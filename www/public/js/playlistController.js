/**
 * playlistController.
 *
 * >>Description<<
 *
 * @author Manfred
 * @date 04.03.14 - 16:05
 * @copyright munichDev UG
 */


var playlistController = function () {

};


playlistController.loadedPlaylistSongs = [
    {"name": "Supergeil", "artist": "Subzonic", "url": "http://www.last.fm/music/Subzonic/_/Supergeil", "streamable": {"#text": "0", "fulltrack": "0"}, "listeners": "210", "image": [
        {"#text": "http://userserve-ak.last.fm/serve/34s/32289987.jpg", "size": "small"},
        {"#text": "http://userserve-ak.last.fm/serve/64s/32289987.jpg", "size": "medium"},
        {"#text": "http://userserve-ak.last.fm/serve/126/32289987.jpg", "size": "large"},
        {"#text": "http://userserve-ak.last.fm/serve/300x300/32289987.jpg", "size": "extralarge"}
    ], "mbid": "b90eb892-3426-45e5-91d1-4b02f5c9d320"},
    {"name": "Supergeil", "artist": "Der Tourist", "url": "http://www.last.fm/music/Der+Tourist/_/Supergeil", "streamable": {"#text": "0", "fulltrack": "0"}, "listeners": "986", "mbid": ""},
    {"name": "Supergeil", "artist": "Geile Tiere", "url": "http://www.last.fm/music/Geile+Tiere/_/Supergeil", "streamable": {"#text": "0", "fulltrack": "0"}, "listeners": "118", "mbid": ""},
    {"name": "Supergeil", "artist": "The Opposites", "url": "http://www.last.fm/music/The+Opposites/_/Supergeil", "streamable": {"#text": "0", "fulltrack": "0"}, "listeners": "20", "mbid": ""},
    {"name": "A5 supergeil", "artist": "Geile Tiere", "url": "http://www.last.fm/music/+noredirect/Geile+Tiere/_/A5+supergeil", "streamable": {"#text": "0", "fulltrack": "0"}, "listeners": "15", "mbid": ""},
    {"name": "Supergeil (Abendstern Remix)", "artist": "Der Tourist", "url": "http://www.last.fm/music/Der+Tourist/_/Supergeil+(Abendstern+Remix)", "streamable": {"#text": "0", "fulltrack": "0"}, "listeners": "16", "mbid": ""},
    {"name": "Supergeil (Siriusmo Remix)", "artist": "Der Tourist", "url": "http://www.last.fm/music/Der+Tourist/_/Supergeil+(Siriusmo+Remix)", "streamable": {"#text": "0", "fulltrack": "0"}, "listeners": "10", "mbid": ""},
    {"name": "Supergeil (feat. Friedrich Liechtenstein)", "artist": "Der Tourist", "url": "http://www.last.fm/music/Der+Tourist/_/Supergeil+(feat.+Friedrich+Liechtenstein)", "streamable": {"#text": "0", "fulltrack": "0"}, "listeners": "401", "mbid": ""},
    {"name": "Supergeil", "artist": "Der Tourist feat. Friedrich Liechtenstein", "url": "http://www.last.fm/music/Der+Tourist+feat.+Friedrich+Liechtenstein/_/Supergeil", "streamable": {"#text": "0", "fulltrack": "0"}, "listeners": "172", "mbid": ""},
    {"name": "Supergeil - Jan Driver Remix", "artist": "Der Tourist", "url": "http://www.last.fm/music/Der+Tourist/_/Supergeil+-+Jan+Driver+Remix", "streamable": {"#text": "0", "fulltrack": "0"}, "listeners": "106", "mbid": ""},
    {"name": "Supergeil - Abendstern Remix", "artist": "Der Tourist", "url": "http://www.last.fm/music/Der+Tourist/_/Supergeil+-+Abendstern+Remix", "streamable": {"#text": "0", "fulltrack": "0"}, "listeners": "112", "mbid": ""},
    {"name": "Supergeil (Jan Driver Remix)", "artist": "Der Tourist", "url": "http://www.last.fm/music/Der+Tourist/_/Supergeil+(Jan+Driver+Remix)", "streamable": {"#text": "0", "fulltrack": "0"}, "listeners": "11", "mbid": ""},
    {"name": "supergeil klasse phantom durchfall mix 08", "artist": "Tom maertens", "url": "http://www.last.fm/music/Tom+maertens/_/supergeil+klasse+phantom+durchfall+mix+08", "streamable": {"#text": "0", "fulltrack": "0"}, "listeners": "74", "mbid": ""},
    {"name": "Supergeil - Scorpio's Miami Brass Remix", "artist": "Der Tourist", "url": "http://www.last.fm/music/Der+Tourist/_/Supergeil+-+Scorpio%27s+Miami+Brass+Remix", "streamable": {"#text": "0", "fulltrack": "0"}, "listeners": "147", "mbid": ""},
    {"name": "Supergeil (Siriusmo Remix) [feat. Friedrich Liechtenstein]", "artist": "Der Tourist", "url": "http://www.last.fm/music/Der+Tourist/_/Supergeil+(Siriusmo+Remix)+%5Bfeat.+Friedrich+Liechtenstein%5D", "streamable": {"#text": "0", "fulltrack": "0"}, "listeners": "48", "mbid": ""},
    {"name": "The Opposites Big2 ft. Klopdokter - Supergeil", "artist": "The Opposites", "url": "http://www.last.fm/music/The+Opposites/_/The+Opposites+Big2+ft.+Klopdokter+-+Supergeil", "streamable": {"#text": "0", "fulltrack": "0"}, "listeners": "9", "mbid": ""},
    {"name": "Der Tourist feat. Friedrich Liechtenstein - Supergeil", "artist": "[unknown]", "url": "http://www.last.fm/music/%5Bunknown%5D/_/Der+Tourist+feat.+Friedrich+Liechtenstein+-+Supergeil", "streamable": {"#text": "0", "fulltrack": "0"}, "listeners": "7", "mbid": ""}
];

playlistController.loadedPlaylistSongs = [
    {"name": "Du hast", "artist": "Rammstein", "url": "http:\/\/www.last.fm\/music\/Rammstein\/_\/Du+hast", "streamable": {"#text": "0", "fulltrack": "0"}, "listeners": "585075", "image": [
        {"#text": "http:\/\/userserve-ak.last.fm\/serve\/34s\/82083299.png", "size": "small"},
        {"#text": "http:\/\/userserve-ak.last.fm\/serve\/64s\/82083299.png", "size": "medium"},
        {"#text": "http:\/\/userserve-ak.last.fm\/serve\/126\/82083299.png", "size": "large"},
        {"#text": "http:\/\/userserve-ak.last.fm\/serve\/300x300\/82083299.png", "size": "extralarge"}
    ], "mbid": "0a1f1661-ecb9-4385-8986-452d589c7f1d"},
    {"name": "SONNE", "artist": "Rammstein", "url": "http:\/\/www.last.fm\/music\/Rammstein\/_\/SONNE", "streamable": {"#text": "0", "fulltrack": "0"}, "listeners": "469416", "image": [
        {"#text": "http:\/\/userserve-ak.last.fm\/serve\/34s\/75977790.png", "size": "small"},
        {"#text": "http:\/\/userserve-ak.last.fm\/serve\/64s\/75977790.png", "size": "medium"},
        {"#text": "http:\/\/userserve-ak.last.fm\/serve\/126\/75977790.png", "size": "large"},
        {"#text": "http:\/\/userserve-ak.last.fm\/serve\/300x300\/75977790.png", "size": "extralarge"}
    ], "mbid": "091e5dea-eb8d-476b-b631-a323fcf68bf8"},
    {"name": "Ich will", "artist": "Rammstein", "url": "http:\/\/www.last.fm\/music\/Rammstein\/_\/Ich+will", "streamable": {"#text": "0", "fulltrack": "0"}, "listeners": "428737", "image": [
        {"#text": "http:\/\/userserve-ak.last.fm\/serve\/34s\/75977790.png", "size": "small"},
        {"#text": "http:\/\/userserve-ak.last.fm\/serve\/64s\/75977790.png", "size": "medium"},
        {"#text": "http:\/\/userserve-ak.last.fm\/serve\/126\/75977790.png", "size": "large"},
        {"#text": "http:\/\/userserve-ak.last.fm\/serve\/300x300\/75977790.png", "size": "extralarge"}
    ], "mbid": "67900c01-43d5-4f29-8935-b96d59da796a"},
    {"name": "Amerika", "artist": "Rammstein", "url": "http:\/\/www.last.fm\/music\/Rammstein\/_\/Amerika", "streamable": {"#text": "0", "fulltrack": "0"}, "listeners": "412739", "image": [
        {"#text": "http:\/\/userserve-ak.last.fm\/serve\/34s\/74896234.png", "size": "small"},
        {"#text": "http:\/\/userserve-ak.last.fm\/serve\/64s\/74896234.png", "size": "medium"},
        {"#text": "http:\/\/userserve-ak.last.fm\/serve\/126\/74896234.png", "size": "large"},
        {"#text": "http:\/\/userserve-ak.last.fm\/serve\/300x300\/74896234.png", "size": "extralarge"}
    ], "mbid": "a8dd9a61-6239-439d-8f95-d4d41401ec6c"},
    {"name": "Engel", "artist": "Rammstein", "url": "http:\/\/www.last.fm\/music\/Rammstein\/_\/Engel", "streamable": {"#text": "0", "fulltrack": "0"}, "listeners": "410205", "image": [
        {"#text": "http:\/\/userserve-ak.last.fm\/serve\/34s\/82083299.png", "size": "small"},
        {"#text": "http:\/\/userserve-ak.last.fm\/serve\/64s\/82083299.png", "size": "medium"},
        {"#text": "http:\/\/userserve-ak.last.fm\/serve\/126\/82083299.png", "size": "large"},
        {"#text": "http:\/\/userserve-ak.last.fm\/serve\/300x300\/82083299.png", "size": "extralarge"}
    ], "mbid": "ebcaf2d7-184a-4a0c-b5e7-a899d62557a3"},
    {"name": "Keine Lust", "artist": "Rammstein", "url": "http:\/\/www.last.fm\/music\/Rammstein\/_\/Keine+Lust", "streamable": {"#text": "0", "fulltrack": "0"}, "listeners": "360676", "image": [
        {"#text": "http:\/\/userserve-ak.last.fm\/serve\/34s\/74896234.png", "size": "small"},
        {"#text": "http:\/\/userserve-ak.last.fm\/serve\/64s\/74896234.png", "size": "medium"},
        {"#text": "http:\/\/userserve-ak.last.fm\/serve\/126\/74896234.png", "size": "large"},
        {"#text": "http:\/\/userserve-ak.last.fm\/serve\/300x300\/74896234.png", "size": "extralarge"}
    ], "mbid": "ff8f03a1-b0cf-454e-8af8-4dcc45c0108e"},
    {"name": "Mutter", "artist": "Rammstein", "url": "http:\/\/www.last.fm\/music\/Rammstein\/_\/Mutter", "streamable": {"#text": "0", "fulltrack": "0"}, "listeners": "357440", "image": [
        {"#text": "http:\/\/userserve-ak.last.fm\/serve\/34s\/75977790.png", "size": "small"},
        {"#text": "http:\/\/userserve-ak.last.fm\/serve\/64s\/75977790.png", "size": "medium"},
        {"#text": "http:\/\/userserve-ak.last.fm\/serve\/126\/75977790.png", "size": "large"},
        {"#text": "http:\/\/userserve-ak.last.fm\/serve\/300x300\/75977790.png", "size": "extralarge"}
    ], "mbid": "7aa94157-d56b-48ab-99ed-74c22509724d"},
    {"name": "Mein Herz brennt", "artist": "Rammstein", "url": "http:\/\/www.last.fm\/music\/Rammstein\/_\/Mein+Herz+brennt", "streamable": {"#text": "0", "fulltrack": "0"}, "listeners": "348223", "image": [
        {"#text": "http:\/\/userserve-ak.last.fm\/serve\/34s\/75977790.png", "size": "small"},
        {"#text": "http:\/\/userserve-ak.last.fm\/serve\/64s\/75977790.png", "size": "medium"},
        {"#text": "http:\/\/userserve-ak.last.fm\/serve\/126\/75977790.png", "size": "large"},
        {"#text": "http:\/\/userserve-ak.last.fm\/serve\/300x300\/75977790.png", "size": "extralarge"}
    ], "mbid": "f4a148d0-a11a-48ae-8ff3-d7aa23c91617"},
    {"name": "Mein Teil", "artist": "Rammstein", "url": "http:\/\/www.last.fm\/music\/Rammstein\/_\/Mein+Teil", "streamable": {"#text": "0", "fulltrack": "0"}, "listeners": "339689", "image": [
        {"#text": "http:\/\/userserve-ak.last.fm\/serve\/34s\/74896234.png", "size": "small"},
        {"#text": "http:\/\/userserve-ak.last.fm\/serve\/64s\/74896234.png", "size": "medium"},
        {"#text": "http:\/\/userserve-ak.last.fm\/serve\/126\/74896234.png", "size": "large"},
        {"#text": "http:\/\/userserve-ak.last.fm\/serve\/300x300\/74896234.png", "size": "extralarge"}
    ], "mbid": "4ee1eca3-1bc4-487a-b047-b158f4a47752"},
    {"name": "Moskau", "artist": "Rammstein", "url": "http:\/\/www.last.fm\/music\/Rammstein\/_\/Moskau", "streamable": {"#text": "0", "fulltrack": "0"}, "listeners": "307559", "image": [
        {"#text": "http:\/\/userserve-ak.last.fm\/serve\/34s\/74896234.png", "size": "small"},
        {"#text": "http:\/\/userserve-ak.last.fm\/serve\/64s\/74896234.png", "size": "medium"},
        {"#text": "http:\/\/userserve-ak.last.fm\/serve\/126\/74896234.png", "size": "large"},
        {"#text": "http:\/\/userserve-ak.last.fm\/serve\/300x300\/74896234.png", "size": "extralarge"}
    ], "mbid": "3d780350-1d05-4b80-a60d-7f7b7645d94a"},
    {"name": "Ohne dich", "artist": "Rammstein", "url": "http:\/\/www.last.fm\/music\/Rammstein\/_\/Ohne+dich", "streamable": {"#text": "0", "fulltrack": "0"}, "listeners": "310324", "image": [
        {"#text": "http:\/\/userserve-ak.last.fm\/serve\/34s\/74896234.png", "size": "small"},
        {"#text": "http:\/\/userserve-ak.last.fm\/serve\/64s\/74896234.png", "size": "medium"},
        {"#text": "http:\/\/userserve-ak.last.fm\/serve\/126\/74896234.png", "size": "large"},
        {"#text": "http:\/\/userserve-ak.last.fm\/serve\/300x300\/74896234.png", "size": "extralarge"}
    ], "mbid": "f87cb637-ab7c-43dc-94e0-bab9ad246c6f"},
    {"name": "Reise, Reise", "artist": "Rammstein", "url": "http:\/\/www.last.fm\/music\/Rammstein\/_\/Reise,+Reise", "streamable": {"#text": "0", "fulltrack": "0"}, "listeners": "302344", "image": [
        {"#text": "http:\/\/userserve-ak.last.fm\/serve\/34s\/74896242.png", "size": "small"},
        {"#text": "http:\/\/userserve-ak.last.fm\/serve\/64s\/74896242.png", "size": "medium"},
        {"#text": "http:\/\/userserve-ak.last.fm\/serve\/126\/74896242.png", "size": "large"},
        {"#text": "http:\/\/userserve-ak.last.fm\/serve\/300x300\/74896242.png", "size": "extralarge"}
    ], "mbid": "68536827-ab50-4693-9c20-41ee60763cff"},
    {"name": "Rosenrot", "artist": "Rammstein", "url": "http:\/\/www.last.fm\/music\/Rammstein\/_\/Rosenrot", "streamable": {"#text": "0", "fulltrack": "0"}, "listeners": "282545", "image": [
        {"#text": "http:\/\/userserve-ak.last.fm\/serve\/34s\/36559201.jpg", "size": "small"},
        {"#text": "http:\/\/userserve-ak.last.fm\/serve\/64s\/36559201.jpg", "size": "medium"},
        {"#text": "http:\/\/userserve-ak.last.fm\/serve\/126\/36559201.jpg", "size": "large"},
        {"#text": "http:\/\/userserve-ak.last.fm\/serve\/300x300\/36559201.jpg", "size": "extralarge"}
    ], "mbid": "8dfde37c-f229-4557-9fa5-329c8beaf75d"},
    {"name": "Benzin", "artist": "Rammstein", "url": "http:\/\/www.last.fm\/music\/Rammstein\/_\/Benzin", "streamable": {"#text": "0", "fulltrack": "0"}, "listeners": "280376", "image": [
        {"#text": "http:\/\/userserve-ak.last.fm\/serve\/34s\/91972115.jpg", "size": "small"},
        {"#text": "http:\/\/userserve-ak.last.fm\/serve\/64s\/91972115.jpg", "size": "medium"},
        {"#text": "http:\/\/userserve-ak.last.fm\/serve\/126\/91972115.jpg", "size": "large"},
        {"#text": "http:\/\/userserve-ak.last.fm\/serve\/300x300\/91972115.jpg", "size": "extralarge"}
    ], "mbid": "e7ca83ab-b500-47af-b936-2c791de11ef5"},
    {"name": "Feuer frei!", "artist": "Rammstein", "url": "http:\/\/www.last.fm\/music\/Rammstein\/_\/Feuer+frei!", "streamable": {"#text": "0", "fulltrack": "0"}, "listeners": "277302", "image": [
        {"#text": "http:\/\/userserve-ak.last.fm\/serve\/34s\/91972115.jpg", "size": "small"},
        {"#text": "http:\/\/userserve-ak.last.fm\/serve\/64s\/91972115.jpg", "size": "medium"},
        {"#text": "http:\/\/userserve-ak.last.fm\/serve\/126\/91972115.jpg", "size": "large"},
        {"#text": "http:\/\/userserve-ak.last.fm\/serve\/300x300\/91972115.jpg", "size": "extralarge"}
    ], "mbid": "a4fc6ffc-3b3d-447d-ae70-5c5016059f52"},
    {"name": "Sehnsucht", "artist": "Rammstein", "url": "http:\/\/www.last.fm\/music\/Rammstein\/_\/Sehnsucht", "streamable": {"#text": "0", "fulltrack": "0"}, "listeners": "264144", "image": [
        {"#text": "http:\/\/userserve-ak.last.fm\/serve\/34s\/82083299.png", "size": "small"},
        {"#text": "http:\/\/userserve-ak.last.fm\/serve\/64s\/82083299.png", "size": "medium"},
        {"#text": "http:\/\/userserve-ak.last.fm\/serve\/126\/82083299.png", "size": "large"},
        {"#text": "http:\/\/userserve-ak.last.fm\/serve\/300x300\/82083299.png", "size": "extralarge"}
    ], "mbid": "51a84cd9-ed6a-40ee-bcea-9f429595f857"},
    {"name": "Zwitter", "artist": "Rammstein", "url": "http:\/\/www.last.fm\/music\/Rammstein\/_\/Zwitter", "streamable": {"#text": "0", "fulltrack": "0"}, "listeners": "261121", "image": [
        {"#text": "http:\/\/userserve-ak.last.fm\/serve\/34s\/75977790.png", "size": "small"},
        {"#text": "http:\/\/userserve-ak.last.fm\/serve\/64s\/75977790.png", "size": "medium"},
        {"#text": "http:\/\/userserve-ak.last.fm\/serve\/126\/75977790.png", "size": "large"},
        {"#text": "http:\/\/userserve-ak.last.fm\/serve\/300x300\/75977790.png", "size": "extralarge"}
    ], "mbid": "a2b5f113-1fb8-4e35-817a-c623bcc0ebf9"},
    {"name": "DU RIECHST SO GUT", "artist": "Rammstein", "url": "http:\/\/www.last.fm\/music\/Rammstein\/_\/DU+RIECHST+SO+GUT", "streamable": {"#text": "0", "fulltrack": "0"}, "listeners": "261997", "image": [
        {"#text": "http:\/\/userserve-ak.last.fm\/serve\/34s\/72930294.png", "size": "small"},
        {"#text": "http:\/\/userserve-ak.last.fm\/serve\/64s\/72930294.png", "size": "medium"},
        {"#text": "http:\/\/userserve-ak.last.fm\/serve\/126\/72930294.png", "size": "large"},
        {"#text": "http:\/\/userserve-ak.last.fm\/serve\/300x300\/72930294.png", "size": "extralarge"}
    ], "mbid": "c12baaaf-c0c7-4c9a-966b-0dce13d0cdc2"},
    {"name": "Spieluhr", "artist": "Rammstein", "url": "http:\/\/www.last.fm\/music\/Rammstein\/_\/Spieluhr", "streamable": {"#text": "0", "fulltrack": "0"}, "listeners": "257071", "image": [
        {"#text": "http:\/\/userserve-ak.last.fm\/serve\/34s\/75977790.png", "size": "small"},
        {"#text": "http:\/\/userserve-ak.last.fm\/serve\/64s\/75977790.png", "size": "medium"},
        {"#text": "http:\/\/userserve-ak.last.fm\/serve\/126\/75977790.png", "size": "large"},
        {"#text": "http:\/\/userserve-ak.last.fm\/serve\/300x300\/75977790.png", "size": "extralarge"}
    ], "mbid": "7dcb19d2-24cf-4a9f-a743-cb85932032be"},
    {"name": "Los", "artist": "Rammstein", "url": "http:\/\/www.last.fm\/music\/Rammstein\/_\/Los", "streamable": {"#text": "0", "fulltrack": "0"}, "listeners": "255951", "image": [
        {"#text": "http:\/\/userserve-ak.last.fm\/serve\/34s\/74896234.png", "size": "small"},
        {"#text": "http:\/\/userserve-ak.last.fm\/serve\/64s\/74896234.png", "size": "medium"},
        {"#text": "http:\/\/userserve-ak.last.fm\/serve\/126\/74896234.png", "size": "large"},
        {"#text": "http:\/\/userserve-ak.last.fm\/serve\/300x300\/74896234.png", "size": "extralarge"}
    ], "mbid": "a33f3044-0579-4b79-be6b-27991acba410"},
    {"name": "LINKS 2 3 4", "artist": "Rammstein", "url": "http:\/\/www.last.fm\/music\/Rammstein\/_\/LINKS+2+3+4", "streamable": {"#text": "0", "fulltrack": "0"}, "listeners": "249608", "image": [
        {"#text": "http:\/\/userserve-ak.last.fm\/serve\/34s\/75977790.png", "size": "small"},
        {"#text": "http:\/\/userserve-ak.last.fm\/serve\/64s\/75977790.png", "size": "medium"},
        {"#text": "http:\/\/userserve-ak.last.fm\/serve\/126\/75977790.png", "size": "large"},
        {"#text": "http:\/\/userserve-ak.last.fm\/serve\/300x300\/75977790.png", "size": "extralarge"}
    ], "mbid": "45196013-8500-4140-a276-9df3e5c31649"},
    {"name": "Mann gegen Mann", "artist": "Rammstein", "url": "http:\/\/www.last.fm\/music\/Rammstein\/_\/Mann+gegen+Mann", "streamable": {"#text": "0", "fulltrack": "0"}, "listeners": "248100", "image": [
        {"#text": "http:\/\/userserve-ak.last.fm\/serve\/34s\/24679705.jpg", "size": "small"},
        {"#text": "http:\/\/userserve-ak.last.fm\/serve\/64s\/24679705.jpg", "size": "medium"},
        {"#text": "http:\/\/userserve-ak.last.fm\/serve\/126\/24679705.jpg", "size": "large"},
        {"#text": "http:\/\/userserve-ak.last.fm\/serve\/300x300\/24679705.jpg", "size": "extralarge"}
    ], "mbid": "193a556e-d1f1-4388-adca-87d56bda7792"},
    {"name": "Morgenstern", "artist": "Rammstein", "url": "http:\/\/www.last.fm\/music\/Rammstein\/_\/Morgenstern", "streamable": {"#text": "0", "fulltrack": "0"}, "listeners": "244719", "image": [
        {"#text": "http:\/\/userserve-ak.last.fm\/serve\/34s\/74896234.png", "size": "small"},
        {"#text": "http:\/\/userserve-ak.last.fm\/serve\/64s\/74896234.png", "size": "medium"},
        {"#text": "http:\/\/userserve-ak.last.fm\/serve\/126\/74896234.png", "size": "large"},
        {"#text": "http:\/\/userserve-ak.last.fm\/serve\/300x300\/74896234.png", "size": "extralarge"}
    ], "mbid": "98ff2b55-7507-4099-8d58-de63cae41d3e"},
    {"name": "Rein Raus", "artist": "Rammstein", "url": "http:\/\/www.last.fm\/music\/Rammstein\/_\/Rein+Raus", "streamable": {"#text": "0", "fulltrack": "0"}, "listeners": "242133", "image": [
        {"#text": "http:\/\/userserve-ak.last.fm\/serve\/34s\/75977790.png", "size": "small"},
        {"#text": "http:\/\/userserve-ak.last.fm\/serve\/64s\/75977790.png", "size": "medium"},
        {"#text": "http:\/\/userserve-ak.last.fm\/serve\/126\/75977790.png", "size": "large"},
        {"#text": "http:\/\/userserve-ak.last.fm\/serve\/300x300\/75977790.png", "size": "extralarge"}
    ], "mbid": "55182d54-9269-40cc-824b-cea14d059f21"},
    {"name": "Adios", "artist": "Rammstein", "url": "http:\/\/www.last.fm\/music\/Rammstein\/_\/Adios", "streamable": {"#text": "0", "fulltrack": "0"}, "listeners": "241853", "image": [
        {"#text": "http:\/\/userserve-ak.last.fm\/serve\/34s\/75977790.png", "size": "small"},
        {"#text": "http:\/\/userserve-ak.last.fm\/serve\/64s\/75977790.png", "size": "medium"},
        {"#text": "http:\/\/userserve-ak.last.fm\/serve\/126\/75977790.png", "size": "large"},
        {"#text": "http:\/\/userserve-ak.last.fm\/serve\/300x300\/75977790.png", "size": "extralarge"}
    ], "mbid": "b155ae04-59d2-40a5-bf4e-c0e8c116a95c"},
    {"name": "Asche zu Asche", "artist": "Rammstein", "url": "http:\/\/www.last.fm\/music\/Rammstein\/_\/Asche+zu+Asche", "streamable": {"#text": "0", "fulltrack": "0"}, "listeners": "238725", "image": [
        {"#text": "http:\/\/userserve-ak.last.fm\/serve\/34s\/72930294.png", "size": "small"},
        {"#text": "http:\/\/userserve-ak.last.fm\/serve\/64s\/72930294.png", "size": "medium"},
        {"#text": "http:\/\/userserve-ak.last.fm\/serve\/126\/72930294.png", "size": "large"},
        {"#text": "http:\/\/userserve-ak.last.fm\/serve\/300x300\/72930294.png", "size": "extralarge"}
    ], "mbid": "aafe63c8-983e-4a79-8d47-b310feda2879"},
    {"name": "Amour", "artist": "Rammstein", "url": "http:\/\/www.last.fm\/music\/Rammstein\/_\/Amour", "streamable": {"#text": "0", "fulltrack": "0"}, "listeners": "235682", "image": [
        {"#text": "http:\/\/userserve-ak.last.fm\/serve\/34s\/74896234.png", "size": "small"},
        {"#text": "http:\/\/userserve-ak.last.fm\/serve\/64s\/74896234.png", "size": "medium"},
        {"#text": "http:\/\/userserve-ak.last.fm\/serve\/126\/74896234.png", "size": "large"},
        {"#text": "http:\/\/userserve-ak.last.fm\/serve\/300x300\/74896234.png", "size": "extralarge"}
    ], "mbid": "23af8ad1-83ca-49af-9d03-6674163b1670"},
    {"name": "Dalai Lama", "artist": "Rammstein", "url": "http:\/\/www.last.fm\/music\/Rammstein\/_\/Dalai+Lama", "streamable": {"#text": "0", "fulltrack": "0"}, "listeners": "230867", "image": [
        {"#text": "http:\/\/userserve-ak.last.fm\/serve\/34s\/74896234.png", "size": "small"},
        {"#text": "http:\/\/userserve-ak.last.fm\/serve\/64s\/74896234.png", "size": "medium"},
        {"#text": "http:\/\/userserve-ak.last.fm\/serve\/126\/74896234.png", "size": "large"},
        {"#text": "http:\/\/userserve-ak.last.fm\/serve\/300x300\/74896234.png", "size": "extralarge"}
    ], "mbid": "37db3443-a429-4bab-94ed-065b1d6ca62d"},
    {"name": "Tier", "artist": "Rammstein", "url": "http:\/\/www.last.fm\/music\/Rammstein\/_\/Tier", "streamable": {"#text": "0", "fulltrack": "0"}, "listeners": "221959", "image": [
        {"#text": "http:\/\/userserve-ak.last.fm\/serve\/34s\/82083299.png", "size": "small"},
        {"#text": "http:\/\/userserve-ak.last.fm\/serve\/64s\/82083299.png", "size": "medium"},
        {"#text": "http:\/\/userserve-ak.last.fm\/serve\/126\/82083299.png", "size": "large"},
        {"#text": "http:\/\/userserve-ak.last.fm\/serve\/300x300\/82083299.png", "size": "extralarge"}
    ], "mbid": "75964d9f-3db0-45d1-bfbe-e7604b83a270"},
    {"name": "Stein um Stein", "artist": "Rammstein", "url": "http:\/\/www.last.fm\/music\/Rammstein\/_\/Stein+um+Stein", "streamable": {"#text": "0", "fulltrack": "0"}, "listeners": "222494", "image": [
        {"#text": "http:\/\/userserve-ak.last.fm\/serve\/34s\/74896234.png", "size": "small"},
        {"#text": "http:\/\/userserve-ak.last.fm\/serve\/64s\/74896234.png", "size": "medium"},
        {"#text": "http:\/\/userserve-ak.last.fm\/serve\/126\/74896234.png", "size": "large"},
        {"#text": "http:\/\/userserve-ak.last.fm\/serve\/300x300\/74896234.png", "size": "extralarge"}
    ], "mbid": "ad616268-ceec-47a3-9ad8-275608709e75"}
];


for (var i = 0; i < playlistController.loadedPlaylistSongs.length; i++) {
    playlistController.loadedPlaylistSongs[i].id = "plsid" + helperFunctions.padZeros(i, ("" + playlistController.loadedPlaylistSongs.length).length);
    playlistController.loadedPlaylistSongs[i].gid = "gsid" + helperFunctions.padZeros(i, ("" + playlistController.loadedPlaylistSongs.length).length);
  //   console.log("::: "+ playlistController.loadedPlaylistSongs[i].gid)
}

playlistController.globalId = playlistController.loadedPlaylistSongs.length;


playlistController.playingSongInPlaylist = false;
playlistController.playingSongId = null;
playlistController.playingSongName = "";
playlistController.playingSongArtist = "";


playlistController.shuffleMode = false;

playlistController.playedSongs = [];


playlistController.playlists = [
    {gid: 0, id: 0, name: "Rock", isPlaylist: true, tracks: playlistController.loadedPlaylistSongs},
    {gid: 1, id: 1, name: "Charts4/13", isPlaylist: true, tracks: []},
    {gid: 2, id: 2, name: "Chillout", isPlaylist: true, tracks: []},
    {gid: 3, id: 3, name: "Vocals", isPlaylist: true, tracks: []},
    {gid: 4, id: 4, name: "Trance", isPlaylist: true, tracks: []},
    {gid: 5, id: 5, name: "Electro '14", isPlaylist: true, tracks: []}

];

console.dir(playlistController.playlists[0].tracks)

for (var i = 0; i < playlistController.loadedPlaylistSongs.length; i++) {
    playlistController.loadedPlaylistSongs[i].playlistgid = 0;
}


window.localStorage.playlists = null;
/*
 var playlists = window.localStorage.playlists;
 if (playlists)
 playlistController.playlists = JSON.parse(playlists);

 */
console.log("--------------------------")
console.dir(playlistController.playlists)

playlistController.globalIdPlaylist = playlistController.playlists.length;


playlistController.loadedPlaylistSongs = playlistController.playlists;

playlistController.loadedPlaylistSongs = [];  playlistController.playlists = [];  //CLEAR_______________________________________________________________

playlistController.counterGlobalId = playlistController.loadedPlaylistSongs.length; //TODO


playlistController.disableStopControl = function (disable) {

    if (disable) {
        $(".mejs-stop-button button").css("opacity", "0.5");

    } else {
        $(".mejs-stop-button button").css("opacity", "1");
    }

    // alert( $(".mejs-stop-button button").length)

}

playlistController.disablePlayStopControls = function (disable) {


    if (disable) {
        $(".mejs-playpause-button button").css("opacity", "0.5");
        $(".mejs-stop-button button").css("opacity", "0.5");

    } else {
        $(".mejs-playpause-button button").css("opacity", "1");
        $(".mejs-stop-button button").css("opacity", "1");

    }


}


playlistController.disableControls = function (disable) {

    if (disable) {
        $(".mejs-nexttrack-button button").css("opacity", "0.5");
        $(".mejs-prevtrack-button button").css("opacity", "0.5");
        $(".mejs-shuffle-button button").css("opacity", "0.5");
    } else {
        $(".mejs-nexttrack-button button").css("opacity", "1");
        $(".mejs-prevtrack-button button").css("opacity", "1");
        if (playlistController.shuffleMode)
            $(".mejs-shuffle-button button").css("opacity", "1");
        else
            $(".mejs-shuffle-button button").css("opacity", "0.5");
    }

}


playlistController.disablePositionControls = function (disable) {

    if (disable) {
        $(".mejs-nexttrack-button button").css("opacity", "0.5");
        $(".mejs-prevtrack-button button").css("opacity", "0.5");
    } else {
        $(".mejs-nexttrack-button button").css("opacity", "1");
        $(".mejs-prevtrack-button button").css("opacity", "1");
    }

}


playlistController.resetPlayingSong = function () {

    playlistController.isLoading = false;

    $(".mejs-controls").find('.mejs-time-loaded').show();

    if ($(".mejs-controls").find('.mejs-time-buffering').css("opacity") > 0)
        $(".mejs-controls").find('.mejs-time-buffering').fadeOut();

    mediaController.playCounter = mediaController.playCounter + 1;

    $("#videoplayer").css("opacity", "0");
    $("#videoplayer").css("pointer-events", "none");

    playlistController.loadingSong = playlistController.loadingOldSong;
    playlistController.playingSongName = playlistController.playingOldSongName;
    playlistController.playingSongArtist = playlistController.playingOldSongArtist;

    if (playlistController.loadingSong) {
        playlistController.playSong(playlistController.loadingSong, true)
        playlistController.setNewTitle(playlistController.loadingSong.name, mediaController.getSongCover(playlistController.loadingSong), true);

    }
    else {
        playlistController.playingSongId = null;
        helperFunctions.clearBackground(".songlist li.loadedsong.stillloading .loadingSongImg");
        $(".songlist li").removeClass("loadedsong playing stillloading plausing");
        playlistController.disableControls(true);
        playlistController.disableStopControl(true);
        $("#videoplayer").css("opacity", "0");
        $("#videoplayer").css("pointer-events", "none");
        $(".iScrollPlayIndicator").hide();

        playlistController.setNewTitle("", "", true);
        $(".mejs-button-lyrics button").css("opacity", "0.5");
    }


}


playlistController.playSong = function (song, onlyStyle, playedAutomatic) {

    //Is Playlist
    if (song.isPlaylist) {
        playlistController.selectPlaylist(song)
        return;
    }


    console.log((Date.now() - playlistController.playSongTimer) + "   " + (Date.now() - uiController.swipeTimer))
    if (playlistController.playSongTimer && Date.now() - playlistController.playSongTimer < 100)
        return;
    if (uiController.swipeTimer && Date.now() - uiController.swipeTimer < 100)
        return;
    mediaController.versionListSong = null;
    // Used Variables
    var Id = song.id;
    var globalId = song.gid;
    if (globalId)
        var isPlaylistSong = true;
    else
        isPlaylistSong = false;
    var playArtist = mediaController.getSongArtist(song);
    var playTitle = song.name;

    if (isPlaylistSong) {

        var listElement = $("#playlistInner li[data-songid='playlistsong" + Id + "'] ");
        var newId = globalId
    }
    else {
        //  listElement = $("#searchlist li[data-songid='searchsong" + Id + "'] ");

        listElement = $("#searchlist li[data-songtitle='" + song.name + "-" + mediaController.getSongArtist(song) + "'] ");


        newId = Id
    }


    playlistController.playingSongInPlaylist = isPlaylistSong;

    playlistController.playSongTimer = Date.now();


    var isSameSong = (playlistController.playingSongId == newId) && (playlistController.playingSongName == song.name) && (playlistController.playingSongArtist == mediaController.getSongArtist(song));



    //Already Loading
    if (playlistController.isLoading && isSameSong)
        return;


    if (!playlistController.isLoading) {
        playlistController.loadingOldSong = playlistController.loadingSong;
        playlistController.playingOldSongName = playlistController.playingSongName;
        playlistController.playingOldSongArtist = playlistController.playingSongArtist;
    }

    playlistController.loadingSong = song;
    playlistController.playingSongName = song.name;
    playlistController.playingSongArtist = mediaController.getSongArtist(song);


    if (mediaController.showLyrics)
        $("#lyricsifrm").attr("src", "http://lyrics.wikia.com/" + mediaController.getSongArtist(playlistController.loadingSong) + ":" + playlistController.loadingSong.name);
    $(".mejs-button-lyrics button").css("opacity", "1");

    if (!playlistController.loadingOldSong) {
        playlistController.disableStopControl(false);
    }

    if (isPlaylistSong) {

        var y = 22+parseInt(Id.substring(5)) / (playlistController.loadedPlaylistSongs.length-1) * ($("#playlistInner").height() - 11-49);
        $("#playlistInner .iScrollPlayIndicator").css('-webkit-transform', 'translate(0px,' + y + 'px)').css('-moz-transform', 'translate(0px, ' + y + 'px)').css('-ms-transform', 'translate(0px, ' + y + 'px)').css('transform', 'translate(0px, ' + y + 'px)')

        $("#playlistInner .iScrollPlayIndicator").fadeIn();
        $("#searchlist .iScrollPlayIndicator").hide();

    }
    else {
        var y = 22+parseInt(Id.substring(5)) / (searchController.searchResults.length-1) * ($("#searchlist").height() - 11-49);
        $("#searchlist .iScrollPlayIndicator").css('-webkit-transform', 'translate(0px,' + y + 'px)').css('-moz-transform', 'translate(0px, ' + y + 'px)').css('-ms-transform', 'translate(0px, ' + y + 'px)').css('transform', 'translate(0px, ' + y + 'px)')
        $("#searchlist .iScrollPlayIndicator").fadeIn();
        $("#playlistInner .iScrollPlayIndicator").hide();

    }


    playlistController.disableControls(false);

    helperFunctions.clearBackground(".songlist li.loadedsong.stillloading .loadingSongImg");

    $(".songlist li").removeClass("loadedsong playing plausing stillloading");

    //Clicked first Time, loading song?
    var loadedSong = false;

    if (!playlistController.isLoading && playlistController.playingSongId) {
        if (playlistController.isPlaying) {
            if (isSameSong)
                $(listElement.get(0)).addClass("playing");
            listElement.removeClass("stillloading");
        }
        else
            $(listElement.get(0)).addClass("pausing");
    }

    if (!onlyStyle) {
        if (!isSameSong) {

            playlistController.isLoading = true;
            loadedSong = true;
            $(listElement.get(0)).addClass("stillloading");
            listElement.removeClass("pausing");

            if (playlistController.loadingSong.streamURL)
                mediaController.playStreamURL(playlistController.loadingSong.streamURL);
            else
                mediaController.playStream(playArtist, playTitle, playedAutomatic);

            console.log("LOAD STREAM")
            playlistController.playedSongs.push(playlistController.loadingSong);

        }
    }
    playlistController.playingSongId = newId;


    $(listElement.get(0)).addClass("loadedsong")

    helperFunctions.animateBackground(".songlist li.loadedsong.stillloading .loadingSongImg", "public/img/loader/sprites.png", 46, 46, 18, 46, 4);


    if (!onlyStyle) {
        if (!loadedSong) {
            setTimeout(function () {
                $(".mejs-playpause-button").click();
            }, 50);
        }
        else
            playlistController.setNewTitle(playlistController.loadingSong.name, mediaController.getSongCover(playlistController.loadingSong));
    }


    $scope.safeApply();
    uiController.styleTopButtons();


    setTimeout(function () {
        $("#playingSongInfoLink").css("opacity", "1");
        $("#buySongLink").css("opacity", "1");
    }, 500)

}


playlistController.setNewTitle = function (title, coverUrl, isLoaded) {

    if (!isLoaded) {
        $("#playingSongCover").removeClass("fadeincomplete")
        $("#playingSongTitle").removeClass("fadeincomplete");
        $("#playingSongTitle").hide();
        $("#playingSongTitleLoading").hide();
        $("#playingSongCover").hide();
    }
    $("#playingSongTitleLoading").removeClass("fadeincomplete").removeClass("fadeoutcomplete");


    if (title && title != "")
        document.title = $scope.appTitle + " : " + title;
    else
        document.title = $scope.appTitle;

    var searchinput = "";
    if ($("#searchinput").val()) {
        searchinput = $("#searchinput").val()
    }
    var song = playlistController.getPlayingSong();
    if(song.name!=""&&searchinput!=""){
        window.history.pushState("",document.title, "/?search="+searchinput+"&artist=" + mediaController.getSongArtist(song) + "&title=" + song.name);
    }
    else if(song.name!=""){
        window.history.pushState("",document.title, "/?artist=" + mediaController.getSongArtist(song) + "&title=" + song.name);
    }
    else if(searchinput!=""){
        window.history.pushState("",document.title, "?search="+searchinput);
    }

    //  $("#playingSongCover").attr("src", coverUrl);

    if (!isLoaded) {
        coverUrl = "public/img/loadertitle.gif";

        $("#playingSongInfoStyle").remove();
        var style = $('<style id="playingSongInfoStyle">' +
            '.playingSongInfo.ui-icon-custom:after  {' +
            ' background-image: url(' + coverUrl + ')' +
            '}' +
            '#popupArtist-popup::before{' +
            '  background-color:rgba(255,255,255,.5)!important' +
            '}' +
            '</style>');
        $('html > head').append(style);
    }
    else {
        $("#playingSongInfoStyle").remove();
        var style = $('<style id="playingSongInfoStyle">' +
            '.playingSongInfo.ui-icon-custom:after  {' +
            ' background-image: url(' + coverUrl + ')' +
            '}' +
            '#popupArtist-popup::before{' +
            '  background: url(' + coverUrl + ');' +
            '  background-size:cover;!important' +
            '}' +
            '</style>');
        $('html > head').append(style);


    }


    $scope.safeApply();
    setTimeout(function () {


        if (isLoaded) {
            $("#playingSongTitleLoading").addClass("fadeoutcomplete")
            $("#playingSongTitleLoading").show();
        }
        else {
            $("#playingSongCover").addClass("fadeincomplete")
            $("#playingSongCover").show();
            $("#playingSongTitleLoading").addClass("fadeincomplete")
            $("#playingSongTitleLoading").show();
            $("#playingSongTitle").addClass("fadeincomplete")
            $("#playingSongTitle").show();
        }

    }, 50)
}

playlistController.getIsLoadingText = function (always) {
    if (playlistController.isLoading || always)
        return " ...";
    else
        return "";
}


playlistController.getPlayingTitle = function () {

    if (playlistController.loadingSong) {
        return mediaController.getSongDisplayName(playlistController.loadingSong);
    }
    else
        return "";
}


playlistController.getPlayingSong = function () {
    if (playlistController.loadingSong)
        return playlistController.loadingSong;
    else
        return {name: ""};
}


playlistController.getPlayingSepSign = function () {
    if (playlistController.loadingSong) {
        return "";
    } else
        return "";

}


playlistController.playNextSong = function () {

    if (playlistController.playingSongInPlaylist) {


        var index = playlistController.getIndexOfSong(playlistController.loadingSong, playlistController.loadedPlaylistSongs);
        if (index >= 0) {
            if (!playlistController.shuffleMode) {
                index = index + 1;
                if (index == playlistController.loadedPlaylistSongs.length)
                    index = 0;
            } else if (playlistController.loadedPlaylistSongs.length > 1) {
                var oIndex = index;
                do {
                    index = Math.round(Math.random() * (playlistController.loadedPlaylistSongs.length - 1))
                }
                while (index == oIndex)
            }

            playlistController.playSong(playlistController.loadedPlaylistSongs[index],false, true)
        } else if (playlistController.loadedPlaylistSongs.length > 0 && !playlistController.loadedPlaylistSongs[0].isPlaylist) {

            playlistController.playSong(playlistController.loadedPlaylistSongs[0],false, true)

        } else
            playlistController.disablePositionControls(true);

    } else {

        index = playlistController.getIndexOfSong(playlistController.loadingSong, searchController.searchResults);
        if (index >= 0) {
            if (!playlistController.shuffleMode) {
                index = index + 1;
                if (index == searchController.searchResults.length)
                    index = 0;
            } else if (searchController.searchResults.length > 1) {
                oIndex = index;
                do {
                    index = Math.round(Math.random() * (searchController.searchResults.length - 1))
                }
                while (index == oIndex)
            }
            playlistController.playSong(searchController.searchResults[index],false, true)
        } else
            playlistController.disablePositionControls(true);

    }


}


playlistController.getIndexOfSong = function (song, list) {

    for (var index = 0; index < list.length; index++) {
        if (song.name == list[index].name && mediaController.getSongArtist(song) == mediaController.getSongArtist(list[index])) {
            return index;
        }
    }

    //alert("!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!")

    return -1;
}


playlistController.playPrevSong = function () {

    var emptyList = false;
    if (playlistController.playingSongInPlaylist) {
        var index = playlistController.getIndexOfSong(playlistController.loadingSong, playlistController.loadedPlaylistSongs);
        if (index == -1) {
            if (playlistController.playedSongs.length == 0) {
                index = 1;
            }
            emptyList = true;
        }

    } else {
        index = playlistController.getIndexOfSong(playlistController.loadingSong, searchController.searchResults);
        if (index == -1) {
            if (playlistController.playedSongs.length == 0) {
                index = 1;
            }
            emptyList = true;

        }
    }

    //  index wo in sichtbarem bereich

    // alert("actuel Index " + index + " ANZAHL:::: " + playlistController.playedSongs.length)


    if (playlistController.playedSongs.length > 0) {

        var song = playlistController.playedSongs[playlistController.playedSongs.length - 1];
        playlistController.playedSongs.splice(playlistController.playedSongs.length - 1, 1);

        //     alert("prev Song "+song)


        var alreadyInList = (song == playlistController.loadingSong);

        /*if (playlistController.playingSongInPlaylist) {
         alreadyInList = (index >= 0 && song == playlistController.loadedPlaylistSongs[index]);
         } else {
         alreadyInList = (index >= 0 && song == searchController.searchResults[index]);
         } */

        if (alreadyInList) {
            if (playlistController.playedSongs.length >= 1) {
                song = playlistController.playedSongs[playlistController.playedSongs.length - 1];
                playlistController.playedSongs.splice(playlistController.playedSongs.length - 1, 1);
            }
            else
                song = null;
        }
    }

    // alert("alreadyInList " + alreadyInList + "   prev song " + song + "   " + playlistController.playedSongs.length)
    if (!song) {

        if (emptyList) {

            if (playlistController.playingSongInPlaylist) {
                if (playlistController.loadedPlaylistSongs.length == 0)
                    return;
                else
                    index = 0;
            } else {
                if (searchController.searchResults == 0)
                    return;
                else
                    index = 0;

            }

        }
        else
            index = index - 1;


        // alert("PLAYING " + index)


        if (playlistController.playingSongInPlaylist) {
            if (index <= -1)
                index = playlistController.loadedPlaylistSongs.length - 1;
            playlistController.playSong(playlistController.loadedPlaylistSongs[index])
        } else {
            if (index <= -1)
                index = searchController.searchResults.length - 1;
            playlistController.playSong(searchController.searchResults[index])
        }

    } else
        playlistController.playSong(song)


}


playlistController.remarkSong = function () {
    var y, listElement;

    if (playlistController.loadingSong) {
        if (playlistController.playingSongInPlaylist) {
            y =  22+parseInt(playlistController.loadingSong.id.substring(5)) / (playlistController.loadedPlaylistSongs.length-1) * ($("#playlistInner").height() - 11-49);
            $("#playlistInner .iScrollPlayIndicator").css('-webkit-transform', 'translate(0px,' + y + 'px)').css('-moz-transform', 'translate(0px, ' + y + 'px)').css('-ms-transform', 'translate(0px, ' + y + 'px)').css('transform', 'translate(0px, ' + y + 'px)')


            $("#playlistInner .iScrollPlayIndicator").fadeIn();
            $("#searchlist .iScrollPlayIndicator").hide();

            listElement = $("#playlistInner li[data-songgid='playlistsong" + playlistController.loadingSong.gid + "'] ");


            listElement.addClass("loadedsong");

            if (playlistController.isPlaying) {
                $($(".songlist li.loadedsong").get(0)).addClass("playing");
                $(".songlist li.loadedsong").removeClass("pausing");
            } else {
                $($(".songlist li.loadedsong").get(0)).addClass("pausing");
                $(".songlist li.loadedsong").removeClass("playing");

            }

        } else {
            y = 22+parseInt(playlistController.loadingSong.id.substring(5)) / (searchController.searchResults.length-1) * ($("#searchlist").height() - 11-49);
            $("#searchlist .iScrollPlayIndicator").css('-webkit-transform', 'translate(0px,' + y + 'px)').css('-moz-transform', 'translate(0px, ' + y + 'px)').css('-ms-transform', 'translate(0px, ' + y + 'px)').css('transform', 'translate(0px, ' + y + 'px)')
            $("#searchlist .iScrollPlayIndicator").fadeIn();
            $("#playlistInner .iScrollPlayIndicator").hide();

            listElement = $("#searchlist li[data-songtitle='" + playlistController.loadingSong.name + "-" + mediaController.getSongArtist(playlistController.loadingSong) + "'] ");
            listElement.addClass("loadedsong");
            if (playlistController.isPlaying) {
                $($(".songlist li.loadedsong").get(0)).addClass("playing");
                $(".songlist li.loadedsong").removeClass("pausing");
            } else {
                $($(".songlist li.loadedsong").get(0)).addClass("pausing");
                $(".songlist li.loadedsong").removeClass("playing");
            }


        }
    }
}



playlistController.selectSong = function(song){
     var Id = song.id;

    if (song.gid) {

        var listElement = $("#playlistInner li[data-songid='playlistsong" + Id + "'] ");
    }
    else {
        //  listElement = $("#searchlist li[data-songid='searchsong" + Id + "'] ");

        listElement = $("#searchlist li[data-songtitle='" + song.name + "-" + mediaController.getSongArtist(song) + "'] ");

    }



    listElement.toggleClass("selected");


}



playlistController.toggleShuffleSongs = function () {

    if (playlistController.loadingSong) {
        playlistController.shuffleMode = !playlistController.shuffleMode;
        if (playlistController.shuffleMode)
            $(".mejs-shuffle-button button").css("opacity", "1");
        else {
            $(".mejs-shuffle-button button").css("opacity", "0.5");
        }
    }

}


playlistController.savePlaylist = function (useSelected) {

    if (!useSelected)
        var playlistTitle = $("#saveplaylistinpt").val();
    else
        playlistTitle = $('#playlistselectvertical .search-choice').text();

    if (playlistTitle) {


        var playlists = window.localStorage.playlists;

        if (!playlists || playlists == "null" || playlists == "undefined" || playlists == "false")
            playlists = playlistController.playlists;
        else
            playlists = JSON.parse(playlists);


        var exists = false;
        for (var i = 0; i < playlists.length; i++) {
            if (playlists[i].name == playlistTitle) {
                exists = true;
                for (var j = 0; j < playlistController.loadedPlaylistSongs.length; j++) {
                    playlistController.loadedPlaylistSongs[j].playlistgid = playlists[i].gid;
                }
                playlists[i].tracks = playlistController.loadedPlaylistSongs;
                var playlist = playlists[i];
                // playlists.splice(i,1);
                break;
            }
        }
        if (!exists) {
            for (var i = 0; i < playlistController.loadedPlaylistSongs.length; i++) {
                playlistController.loadedPlaylistSongs[i].playlistgid = playlistController.globalIdPlaylist;
            }
            playlist = {gid: playlistController.globalIdPlaylist, id: playlistController.globalIdPlaylist, name: playlistTitle, isPlaylist: true, tracks: playlistController.loadedPlaylistSongs}
            playlists.push(playlist);

        }


        playlistController.globalIdPlaylist++;
        playlistController.playlists = playlists;


       // window.localStorage.playlists = JSON.stringify(playlists);

        for (var i = 0; i <  playlistController.playlists.length; i++) {
           accountController.savePlaylist( playlistController.playlists[i].gid, playlistController.playlists[i].name,i, playlistController.playlists[i].tracks)
        }


        $scope.safeApply();
        $('#playlistselectverticalform').trigger('chosen:updated');
        return   playlist.gid;
    }


}


playlistController.selectPlaylist = function (playlist) {

    $('#playlistselectverticalform option[value="' + playlist.gid + '"]').prop('selected', true);
    $('#playlistselectverticalform').trigger('chosen:updated');

    setTimeout(function () {
        $('#playlistselectverticalform').trigger('chosen:close');
        $("#clearChoosenPlaylists").show();
        $("#playlistselectverticalform").trigger('change');
        uiController.updateUI();
    }, 0)


}


playlistController.loadPlaylist = function (playlist) {

    if (playlistController.loadedPlaylistSongs.length > 0 && playlistController.loadedPlaylistSongs[0].isPlaylist)
        playlistController.loadedPlaylistSongs = [];


    playlistController.loadedPlaylistSongs = playlist.tracks.concat(playlistController.loadedPlaylistSongs)


  // $("#playlistview").hide();
    $scope.safeApply();
    $("#playlistview").listview('refresh');
    playlistController.remarkSong();

    uiController.makePlayListSortable();

    setTimeout(function(){
        uiController.playListScroll.refresh();
    },150)


}


