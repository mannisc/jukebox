;
var videoController=function(){
};
videoController.videoPlayerList=[
[]
];
videoController.videoPlayerList[0]=[];
videoController.videoPlayerList[1]=[];
videoController.videoPlayerList[2]=[];
videoController.videoPlayerList[0][0]=new mediaelementPlayer("#mediaemelemtjsPlayer1");
videoController.videoPlayerList[1][0]=dailymotionPlayer;
videoController.videoPlayerList[2][0]=vimeoPlayer;
videoController.videoPlayer=videoController.videoPlayerList[0][0];videoController.videoOpactiy=0.5;
videoController.isEmbedded=false;
videoController.isPlaying=false;
videoController.scaleFactor=1.5;
videoController.fullscreenMode=0;
videoController.progressTime=0;
videoController.maxTime=0;
videoController.changingVolume=false;
videoController.isMuted=false;
videoController.beforeMutedVolume=null;
videoController.volume=0.5;
videoController.shuffleMode=false;
videoController.prevEnabled=true;
videoController.playpauseEnabled=true;
videoController.stopEnabled=true;
videoController.nextEnabled=true;
videoController.shuffleEnabled=true;
videoController.timerailEnabled=true;
videoController.volumeEnabled=true;
videoController.fullscreenEnabled=false;
videoController.versionsEnabled=true;
videoController.lyricsEnabled=false;
videoController.sharesocialEnabled=false;
videoController.externalSiteEnabled=false;

videoController.init=function(){
var changeHandler=function(){
setTimeout(function(){
if(!videoController.isBrowserFullscreen()){
if(videoController.fullscreenMode!=0){
videoController.fullscreenMode=0;
videoController.updateFullscreenMode();
}
}
},500)
}
document.addEventListener("fullscreenchange",changeHandler,false);
document.addEventListener("webkitfullscreenchange",changeHandler,false);
document.addEventListener("mozfullscreenchange",changeHandler,false);
$(document).keyup(function(evt){
if($('input:focus, textarea:focus').length==0){
if(evt.keyCode==32){
videoController.playPauseSong();
}else if(evt.keyCode==38||evt.keyCode==37){
videoController.playPrevSong();
}else if(evt.keyCode==40||evt.keyCode==39){
playbackController.playNextSong();
}
}
})
for(var i=0;i<=1;i++){
for(var j=0;i<=1;i++){
if(videoController.videoPlayerList[i][j])
videoController.videoPlayerList[i][j].init();
}
}
videoController.controls=$(".videoControlElements-controls");
videoController.controls.find(".videoControlElements-prevtrack-button").click(function(){
videoController.playPrevSong();
});
videoController.controls.find(".videoControlElements-playpause-button").click(function(){
if(videoController.playpauseEnabled&&videoController.videoPlayer){
videoController.playPauseSong();
}
});
videoController.controls.find(".videoControlElements-stop-button").click(function(){
if(videoController.stopEnabled&&videoController.videoPlayer)
videoController.stopSong();
});
videoController.controls.find(".videoControlElements-nexttrack-button").click(function(){
videoController.playNextSong();
});
videoController.controls.find(".videoControlElements-shuffle-button").click(function(){
if(videoController.shuffleEnabled)
videoController.toggleShuffleSongs();
});
videoController.controls.find(".videoControlElements-time-rail").click(function(event){
if(videoController.timerailEnabled&&playbackController.playingSong){
var total=videoController.controls.find('.videoControlElements-time-total'),
x=event.pageX,
offset=total.offset(),
width=total.outerWidth(true)*videoController.scaleFactor/1.023,
pos,
percentage;
if(x<offset.left){
x=offset.left;
}else if(x>width+offset.left){
x=width+offset.left;
}
pos=x-offset.left;
percentage=(pos/width);
videoController.videoPlayer.setProgressPercentage(percentage);
}
});
videoController.controls.find(".videoControlElements-volume-button button").click(function(){
if(videoController.volumeEnabled&&videoController.videoPlayer){
videoController.isMuted=!videoController.isMuted;
if(videoController.isMuted){
videoController.beforeMutedVolume=videoController.volume;
videoController.volume=0;
}else{
videoController.volume=videoController.beforeMutedVolume;
}
videoController.setVolume(videoController.volume);
}
});
videoController.controls.find(".videoControlElements-volume-button").mouseover(function(){
if(videoController.volumeEnabled)
videoController.controls.find(".videoControlElements-volume-slider").show();
});
videoController.controls.find(".videoControlElements-volume-button").mouseout(function(){
if(!videoController.changingVolume)
videoController.controls.find(".videoControlElements-volume-slider").hide();
});
videoController.controls.find(".videoControlElements-volume-slider").click(function(event){
if(!videoController.changingVolume){
var total=videoController.controls.find('.videoControlElements-volume-slider'),
y=event.pageY-20,
offset=total.offset(),
height=total.outerHeight(true)*videoController.scaleFactor/1.023-20,
pos,
percentage;
if(y<offset.top){
y=offset.top;
}else if(y>height+offset.top){
y=height+offset.top;
}
pos=y-offset.top;
percentage=(pos/height);
videoController.volume=(1-percentage);
videoController.setVolume(videoController.volume);
}
});
videoController.controls.find(".videoControlElements-volume-handle").bind('mousedown',function(e){
var volumeSlider=videoController.controls.find('.videoControlElements-volume-slider'),
volumeTotal=videoController.controls.find('.videoControlElements-volume-total'),
volumeCurrent=videoController.controls.find('.videoControlElements-volume-current'),
volumeHandle=videoController.controls.find('.videoControlElements-volume-handle'),
mute=$(".videoControlElements-volume-button");
var changeVolumeHandler=function(e){
videoController.changingVolume=true;
var volume,
totalOffset=volumeTotal.offset();
var
railHeight=volumeTotal.height()*videoController.scaleFactor/1.023,totalTop=parseInt(volumeTotal.css('top').replace(/px/,''),10),
newY=e.pageY-totalOffset.top;
volume=(railHeight-newY)/railHeight;
if(totalOffset.top==0||totalOffset.left==0)
return;
volume=Math.max(0,volume);
volume=Math.min(volume,1);
videoController.volume=volume;
videoController.setVolume(videoController.volume);
videoController.videoPlayer.setVolume(videoController.volume);
}
$(document).bind('mousemove.videoVolume',changeVolumeHandler)
$(document).bind('mouseup.videoVolume',function(e){
if(videoController.controls.find(".videoControlElements-volume-slider:hover").length==0)
videoController.controls.find(".videoControlElements-volume-slider").hide();
setTimeout(function(){
videoController.changingVolume=false;
},50)
$(document).unbind(".videoVolume");
})
});
videoController.controls.find(".videoControlElements-fullscreen-button button").click(function(){
if(videoController.fullscreenEnabled&&videoController.videoPlayer){
videoController.toggleFullscreenMode();
}
});
videoController.controls.find(".videoControlElements-fullscreen-button").mouseover(function(){
if(videoController.fullscreenMode==0)
videoController.controls.find(".videoControlElements-fullscreen-slider").show();
});
videoController.controls.find(".videoControlElements-fullscreen-button").mouseout(function(){
videoController.controls.find(".videoControlElements-fullscreen-slider").hide();
});
videoController.controls.find(".videoControlElements-fullscreen-slider").mouseover(function(){
$(".videoControlElements-fullscreen-button button").css("background-image","url(public/img/brightness.png)")
});
videoController.controls.find(".videoControlElements-fullscreen-slider").mouseout(function(){
$(".videoControlElements-fullscreen-button button").css("background","")
});
videoController.controls.find(".videoControlElements-fullscreen-slider").click(function(event){
if(!videoController.changingVideoOpactiy){
var total=videoController.controls.find('.videoControlElements-fullscreen-slider'),
y=event.pageY-20,
offset=total.offset(),
height=total.outerHeight(true)*videoController.scaleFactor/1.023-20,
pos,
percentage;
if(y<offset.top){
y=offset.top;
}else if(y>height+offset.top){
y=height+offset.top;
}
pos=y-offset.top;
percentage=(pos/height);
videoController.videoOpactiy=(1-percentage);
videoController.setVideoOpacity(videoController.videoOpactiy);
}
});
videoController.controls.find(".videoControlElements-fullscreen-handle").bind('mousedown',function(e){
var videoOpactiySlider=videoController.controls.find('.videoControlElements-fullscreen-slider'),
videoOpactiyTotal=videoController.controls.find('.videoControlElements-fullscreen-total'),
videoOpactiyCurrent=videoController.controls.find('.videoControlElements-fullscreen-current'),
videoOpactiyHandle=videoController.controls.find('.videoControlElements-fullscreen-handle'),
mute=$(".videoControlElements-fullscreen-button");
var changevideoOpactiyHandler=function(e){
videoController.changingVideoOpactiy=true;
var videoOpactiy,
totalOffset=videoOpactiyTotal.offset();
var
railHeight=videoOpactiyTotal.height()*videoController.scaleFactor/1.023,totalTop=parseInt(videoOpactiyTotal.css('top').replace(/px/,''),10),
newY=e.pageY-totalOffset.top;
videoOpactiy=(railHeight-newY)/railHeight;
if(totalOffset.top==0||totalOffset.left==0)
return;
videoOpactiy=Math.max(0,videoOpactiy);
videoOpactiy=Math.min(videoOpactiy,1);
videoController.videoOpactiy=videoOpactiy;
videoController.setVideoOpacity(videoController.videoOpactiy);
}
$(document).bind('mousemove.videoOpacity',changevideoOpactiyHandler)
$(document).bind('mouseup.videoOpacity',function(e){
if(videoController.controls.find(".videoControlElements-fullscreen-slider:hover").length==0)
videoController.controls.find(".videoControlElements-fullscreen-slider").hide();
setTimeout(function(){
videoController.changingVideoOpactiy=false;
},50)
$(document).unbind(".videoOpacity");
})
});
videoController.controls.find(".videoControlElements-button-choose-version").click(function(){
if(videoController.versionsEnabled)
var song=playbackController.getPlayingSong();
var artistString=encodeURIComponent(mediaController.getSongArtist(song));
var titleString=encodeURIComponent(song.name);
mediaController.getVersions(artistString,titleString);
});
videoController.controls.find(".videoControlElements-button-share").click(function(){
mediaController.shareMedia();
});
videoController.controls.find(".videoControlElements-button-lyrics").click(function(){
if(videoController.lyricsEnabled)
mediaController.toggleLyrics();
});
videoController.controls.find(".videoControlElements-button-facebook").click(function(){
if(videoController.sharesocialEnabled){
$("#popupSocial").popup('open',{positionTo:"window",transition:'slideup'});
}
});
videoController.controls.find(".videoControlElements-button-external").click(function(){
if(videoController.externalSiteEnabled){
var mywindow=window.open(mediaController.currentvideoURL,"","");
mywindow.focus();
}
});
setTimeout(function(){
$("#videocontrolsInner").hide();
$("#videocontrolsInner").css("opacity","1");
$("#videocontrolsInner").addClass("fadeincomplete");
$("#videocontrolsInner").show();
},1000);
$("#videocontrols").css("background","none");
videoController.setVolume(videoController.volume);
videoController.disablePlayStopControls(true);
videoController.disableControls(true);
uiController.noVideoClickTimer=0;
videoController.setVideoOpacity(videoController.videoOpactiy);

}

videoController.playPauseSong=function(){
if(videoController.isPlaying)
videoController.pauseSong();
else
videoController.playSong();
}

videoController.resizeVideo=function(){
if(videoController.videoPlayer.resize)
videoController.videoPlayer.resize();
}

videoController.playNextSong=function(){
if(videoController.prevEnabled)
playbackController.playNextSong();
}

videoController.playPrevSong=function(){
if(videoController.prevEnabled)
playbackController.playPrevSong();
}

videoController.isEmbedVideo=function(videoURL){
if(videoURL.search("dailymotion.com")>-1){
return videoController.videoPlayerList[1][0];
}
return null;
}

videoController.loadSongInSuitablePlayer=function(streamURL,videoURL){
videoController.isPlaying=false;
videoController.isLoading=false;
playbackController.isLoading=false;
$("#backgroundVideo").css("opacity","0");
$("#backgroundVideo").removeClass("animated")
$("#backgroundVideo").hide();
$("#siteLogo").hide();
videoController.setMaxTime(0);
videoController.setProgressPercentage(0);
videoController.setProgressTime(0);
videoController.setBufferedPercentage(0);
if(videoController.videoPlayer&&videoController.videoPlayer.unload){
videoController.videoPlayer.unload();
}
var player=videoController.isEmbedVideo(videoURL);
if(player!=null){
videoController.isEmbedded=true;
videoController.videoPlayer=player;
videoController.videoPlayer.load(videoURL);
}
else{
videoController.isEmbedded=false;
videoController.videoPlayer=videoController.videoPlayerList[0][0];
console.dir("PLAY STREAM!!!: "+streamURL);
videoController.videoPlayer.load(streamURL);
}
$("#backgroundVideo").show();
videoController.updateFullscreenMode();
if(!playbackController.firstPlayedSongAlready){
playbackController.firstPlayedSongAlready=true;
$("#backgroundImage").addClass("fadeoutcomplete");
setTimeout(function(){
$("#backgroundImage").hide();
},1000)
}
}

videoController.playSong=function(){
if(!videoController.isPlaying&&playbackController.playingSong){
videoController.controls.find(".videoControlElements-play").removeClass("videoControlElements-play").addClass("videoControlElements-pause");
videoController.videoPlayer.play();
videoController.isPlaying=true;
videoController.disablePlayStopControls(false);
if(!playbackController.isLoading&&!$(".songlist li.loadedsong").hasClass("firstplay")){
$(".songlist li.loadedsong.stillloading .loadingSongImg").hide();
$(".songlist li.loadedsong").addClass("playing");
$(".songlist li.loadedsong").removeClass("pausing");
}
}
}

videoController.pauseSong=function(){
if(videoController.isPlaying){
videoController.controls.find(".videoControlElements-pause").removeClass("videoControlElements-pause").addClass("videoControlElements-play");
videoController.videoPlayer.pause();
videoController.isPlaying=false;
if(!playbackController.isLoading){
$(".songlist li.loadedsong.stillloading .loadingSongImg").hide();
$(".songlist li.loadedsong").addClass("pausing");
$(".songlist li.loadedsong").removeClass("playing");
}
}
}

videoController.stopSong=function(){
if(playbackController.playingSong){
if(videoController.isPlaying){
videoController.pauseSong();
videoController.isPlaying=false;
}
videoController.videoPlayer.stop();
videoController.setProgressPercentage(0);
$(".songlist li.loadedsong").removeClass("pausing");
$(".songlist li.loadedsong").addClass("playing");
if(videoController.stopEnabled==true){
videoController.disableStopControl(true);
$(".videoControlElements-playpause-button button").removeClass("looped");
$(".videoControlElements-time-loaded").hide();
if(!playbackController.playingOldSong){
playbackController.resetPlayingSong();
}
}
}
}

videoController.isBrowserFullscreen=function(){
return(document.fullscreen||document.mozFullScreen||document.webkitIsFullScreen||document.msFullscreenElement||window.fullScreen)||
(window.innerWidth==screen.width&&window.innerHeight==screen.height);
}

videoController.toggleFullscreenMode=function(){
videoController.fullscreenMode=videoController.fullscreenMode+1;
if(videoController.fullscreenMode>1)
videoController.fullscreenMode=0;
videoController.updateFullscreenMode();
}
videoController.toggleBrowserFullScreen=function(){
var element=document.getElementById("page");
console.dir("FULLSCREEEN!!!!");
console.dir(document.webkitIsFullScreen);
console.dir(element.webkitRequestFullScreen);
console.dir();
if(element.requestFullScreen){
if(!document.fullScreen){
element.requestFullscreen();
}else{
document.exitFullScreen();
}
}
if(element.mozRequestFullScreen){
if(!document.mozFullScreen){
element.mozRequestFullScreen();
}else{
document.mozCancelFullScreen();
}
}else if(element.webkitRequestFullScreen){
if(!document.webkitIsFullScreen){
element.webkitRequestFullScreen();
}else{
document.webkitCancelFullScreen();
}
}
}

videoController.updateFullscreenMode=function(){
var hideControlsTimer=null;
var hideControlsPointerX=null;
var hideControlsPointerY=null;
var hideControls=function(event){
if(!hideControlsPointerX||!event||(Math.abs(hideControlsPointerX-event.clientX)>20&&Math.abs(hideControlsPointerY-event.clientY)>20)){
if(event){
hideControlsPointerX=event.clientX;
hideControlsPointerY=event.clientY;
}
if(hideControlsTimer){
clearTimeout(hideControlsTimer)
$("#videocontrols").css("opacity","");
$("#siteLogo img").css("bottom","");
}
hideControlsTimer=setTimeout(function(){
if(videoController.fullscreenMode==1){
$("#videocontrols").css("opacity","0");
$("#siteLogo img").css("bottom","15px");
}
},3500)
}
}
if(videoController.fullscreenMode==0){$("#songbaseLogoImage").hide();
if(hideControlsTimer){
clearTimeout(hideControlsTimer);
$("#videocontrols").removeClass("fadeoutcomplete");
}
$("body").off("mousemove mouseup",hideControls);
$("#header").css("opacity","1").css("pointer-events","auto");
$("#controlbar").css("opacity","1").css("pointer-events","auto");
$("#searchlist").css("opacity","1").css("pointer-events","auto");
$("#playlist").css("opacity","1").addClass("fadeincomplete").css("pointer-events","auto");
$("#controlbarplaylist").css("opacity","1").css("pointer-events","auto");
$(".videoControlElements-custom-button").show();
$(".backgroundVideo,  #backgroundVideo").addClass("background");
$(".fb-recommendations-bar-container").show();
$(".sideinfo").show();
$("#page, #content, .backgroundVideo, #backgroundVideo").removeClass("fullscreen");
uiController.updateUI();
if(videoController.isBrowserFullscreen())
videoController.toggleBrowserFullScreen();
setTimeout(function(){
uiController.playListScroll.refresh();
setTimeout(function(){
uiController.updateUI();
uiController.playListScroll.refresh();
setTimeout(function(){
uiController.updateUI();
uiController.playListScroll.refresh();
setTimeout(function(){
uiController.updateUI();
uiController.playListScroll.refresh();
setTimeout(function(){
uiController.updateUI();
uiController.playListScroll.refresh();
},1000)
},1000)
},1000)
},1000)
},150)
}
else if(videoController.fullscreenMode==1){setTimeout(function(){
hideControls();
$("body").on("mousemove mouseup",hideControls);
},2000);
$("#songbaseLogoImage").show();
$(".videoControlElements-custom-button").hide();
$("#header").css("opacity","0").css("pointer-events","none");
$("#controlbar").css("opacity","0").css("pointer-events","none");
$("#searchlist").css("opacity","0").css("pointer-events","none");
$("#playlist").css("opacity","0").removeClass("fadeincomplete").css("pointer-events","none");
$("#controlbarplaylist").css("opacity","0").css("pointer-events","none");
$(".backgroundVideo,  #backgroundVideo").removeClass("background");
$("#page, #content, .backgroundVideo,  #backgroundVideo").addClass("fullscreen");
$(".fb-recommendations-bar-container").hide();
$(".sideinfo").hide();
uiController.updateUI();
if(!videoController.isBrowserFullscreen()){
$("#videocontrols").css("opacity","0");
setTimeout(function(){
$("#videocontrols").hide();
$("#videocontrols").css("opacity","1");
$("#videocontrols").addClass("fadeincomplete")
uiController.updateUI();
$("#videocontrols").show();
setTimeout(function(){
$("#videocontrols").removeClass("fadeincomplete");
},2000)
},1000)
videoController.toggleBrowserFullScreen();
}
}
}

videoController.disableStopControl=function(disable){
videoController.stopEnabled=!disable;
if(disable){
$(".videoControlElements-stop-button button").css("opacity","0.5");
}else{
$(".videoControlElements-stop-button button").css("opacity","1");
}
}

videoController.disablePlayStopControls=function(disable){
videoController.stopEnabled=!disable;
videoController.playpauseEnabled=!disable;
if(disable){
$(".videoControlElements-playpause-button button").css("opacity","0.5");
$(".videoControlElements-stop-button button").css("opacity","0.5");
}else{
$(".videoControlElements-playpause-button button").css("opacity","1");
$(".videoControlElements-stop-button button").css("opacity","1");
}
}

videoController.disableControls=function(disable){
videoController.prevEnabled=!disable;
videoController.nextEnabled=!disable;
if(disable){
$(".videoControlElements-nexttrack-button button").css("opacity","0.5");
$(".videoControlElements-prevtrack-button button").css("opacity","0.5");
}else{
$(".videoControlElements-nexttrack-button button").css("opacity","1");
$(".videoControlElements-prevtrack-button button").css("opacity","1");
}
}

videoController.disablePositionControls=function(disable){
videoController.prevEnabled=!disable;
videoController.nextEnabled=!disable;
if(disable){
$(".videoControlElements-nexttrack-button button").css("opacity","0.5");
$(".videoControlElements-prevtrack-button button").css("opacity","0.5");
}else{
$(".videoControlElements-nexttrack-button button").css("opacity","1");
$(".videoControlElements-prevtrack-button button").css("opacity","1");
}
}

videoController.disableVersionControl=function(disable){
videoController.versionsEnabled=!disable;
if(disable){
$(".videoControlElements-button-choose-version button").css("opacity","0.5");
}else{
$(".videoControlElements-button-choose-version button").css("opacity","1");
}
}

videoController.disableLyricsControl=function(disable){
videoController.lyricsEnabled=!disable;
if(disable){
$(".videoControlElements-button-lyrics button").css("opacity","0.5");
}else{
$(".videoControlElements-button-lyrics button").css("opacity","1");
}
}

videoController.disableFullscreenControl=function(disable){
videoController.fullscreenEnabled=!disable;
if(disable){
$(".videoControlElements-fullscreen-button button").css("opacity","0.5");
}else{
$(".videoControlElements-fullscreen-button button").css("opacity","1");
}
}

videoController.disableExternalSiteControl=function(disable){
videoController.externalSiteEnabled=!disable;
if(disable){
$(".videoControlElements-button-external button").css("opacity","0.5");
}else{
$(".videoControlElements-button-external button").css("opacity","1");
}
}

videoController.disableShareSocialControl=function(disable){
videoController.sharesocialEnabled=!disable;
if(disable){
$(".videoControlElements-button-facebook button").css("opacity","0.5");
}else{
$(".videoControlElements-button-facebook button").css("opacity","1");
}
}

videoController.toggleShuffleSongs=function(){
videoController.shuffleMode=!videoController.shuffleMode;
if(videoController.shuffleMode)
$(".videoControlElements-shuffle-button button").css("opacity","1");
else{
$(".videoControlElements-shuffle-button button").css("opacity","0.5");
}
}

videoController.setLoopButton=function(loop){
if(loop){
$(".videoControlElements-playpause-button button").addClass("looped");
}else{
$(".videoControlElements-playpause-button button").removeClass("looped");
}
}

videoController.setProgressPercentage=function(percentage,updateVideo){
if(percentage<0)
percentage=0;
else if(percentage>1)
percentage=1;
videoController.controls.find(".videoControlElements-time-current").css("width",percentage*100+"%")
if(videoController.maxTime&&videoController.maxTime>0){
videoController.progressTime=videoController.maxTime*percentage;
videoController.controls.find(".videoControlElements-currenttime").text(videoController.secondsToTimeCode(videoController.progressTime,false,false,false));
}
if(updateVideo&&videoController.videoPlayer&&playbackController.playingSong&&!playbackController.isLoading)
videoController.videoPlayer.setProgressPercentage(percentage);
}

videoController.setProgressTime=function(time,updateVideo){
videoController.progressTime=time;
videoController.controls.find(".videoControlElements-currenttime").text(videoController.secondsToTimeCode(time,false,false,false));
if(videoController.maxTime&&videoController.maxTime>0)
videoController.setProgressPercentage(videoController.progressTime/videoController.maxTime,updateVideo)
}

videoController.setBufferedPercentage=function(percentage){
videoController.buffered=percentage;
if(percentage<0)
percentage=0;
else if(percentage>1)
percentage=1;
videoController.controls.find(".videoControlElements-time-loaded").css("width",percentage*100+"%")
}

videoController.showBuffered=function(show){
if(show)
videoController.controls.find(".videoControlElements-time-loaded").fadeIn()
else
videoController.controls.find(".videoControlElements-time-loaded").fadeOut()
}

videoController.setMaxTime=function(time){
videoController.maxTime=time;
videoController.controls.find(".videoControlElements-duration").text(videoController.secondsToTimeCode(time,false,false,false));
}

videoController.showBuffering=function(show){
if(show)
videoController.controls.find(".videoControlElements-time-buffering").fadeIn();
else
videoController.controls.find(".videoControlElements-time-buffering").hide();
}

videoController.setVolume=function(volume,secondTry){
var volumeSlider=videoController.controls.find('.videoControlElements-volume-slider'),
volumeTotal=videoController.controls.find('.videoControlElements-volume-total'),
volumeCurrent=videoController.controls.find('.videoControlElements-volume-current'),
volumeHandle=videoController.controls.find('.videoControlElements-volume-handle'),
mute=$(".videoControlElements-volume-button");
if(!volumeSlider.is(':visible')&&typeof secondTry=='undefined'){
volumeSlider.show();
videoController.setVolume(volume,true);
volumeSlider.hide()
return;
}
volume=Math.max(0,volume);
volume=Math.min(volume,1);
if(volume==0){
mute.removeClass('videoControlElements-mute').addClass('videoControlElements-unmute');
}else{
mute.removeClass('videoControlElements-unmute').addClass('videoControlElements-mute');
}
var totalHeight=volumeTotal.height(),
totalPosition=volumeTotal.position(),
newTop=totalHeight-(totalHeight*volume);
volumeHandle.css('top',Math.round(totalPosition.top+newTop-(volumeHandle.height()/2)));
volumeCurrent.height(totalHeight-newTop);
volumeCurrent.css('top',totalPosition.top+newTop);
videoController.volume=volume;
videoController.videoPlayer.setVolume(videoController.volume);
}

videoController.setVideoOpacity=function(videoOpactiy,secondTry){
var videoOpactiySlider=videoController.controls.find('.videoControlElements-fullscreen-slider'),
videoOpactiyTotal=videoController.controls.find('.videoControlElements-fullscreen-total'),
videoOpactiyCurrent=videoController.controls.find('.videoControlElements-fullscreen-current'),
videoOpactiyHandle=videoController.controls.find('.videoControlElements-fullscreen-handle'),
mute=$(".videoControlElements-fullscreen-button");
if(!videoOpactiySlider.is(':visible')&&typeof secondTry=='undefined'){
videoOpactiySlider.show();
videoController.setVideoOpacity(videoOpactiy,true);
videoOpactiySlider.hide()
return;
}
videoOpactiy=Math.max(0,videoOpactiy);
videoOpactiy=Math.min(videoOpactiy,1);
var totalHeight=videoOpactiyTotal.height(),
totalPosition=videoOpactiyTotal.position(),
newTop=totalHeight-(totalHeight*videoOpactiy);
videoOpactiyHandle.css('top',Math.round(totalPosition.top+newTop-(videoOpactiyHandle.height()/2)));
videoOpactiyCurrent.height(totalHeight-newTop);
videoOpactiyCurrent.css('top',totalPosition.top+newTop);
videoController.videoOpactiy=videoOpactiy;
$("#backgroundVideo").css("opacity",videoController.videoOpactiy);
if(videoController.videoOpactiy==0){
$("#backgroundVideo").hide();
}else
$("#backgroundVideo").show();
}

videoController.endedSong=function(){
videoController.stopSong();

mediaController.mediaEnded();
}

videoController.playingSong=function(){
if(playbackController.playingSong){
playbackController.playingSongTimer=Date.now();
$("#backgroundVideo").addClass("animated")
$("#backgroundVideo").css("opacity",videoController.videoOpactiy);
$("#siteLogoImage").attr("src","public/img/sites/"+mediaController.getSiteLogo());
$("#siteLogo").show();
videoController.disableExternalSiteControl(false);
videoController.disableFullscreenControl(false);
$(".videoControlElements-time-loaded").show();
$(".videoControlElements-playpause-button button").removeClass("looped");
if(!playbackController.playingSong.isAudioFile){

uiController.updateUI(true);
}
}
}


videoController.secondsToTimeCode=function(time,forceHours,showFrameCount,fps){
if(typeof showFrameCount=='undefined'){
showFrameCount=false;
}else if(typeof fps=='undefined'){
fps=25;
}
var hours=Math.floor(time/3600)%24,
minutes=Math.floor(time/60)%60,
seconds=Math.floor(time%60),
frames=Math.floor(((time%1)*fps).toFixed(3)),
result=
((forceHours||hours>0)?(hours<10?'0'+hours:hours)+':':'')
+(minutes<10?'0'+minutes:minutes)+':'
+(seconds<10?'0'+seconds:seconds)
+((showFrameCount)?':'+(frames<10?'0'+frames:frames):'');
return result;
}

;
