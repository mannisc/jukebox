;
var notSupportedBrowsers=[];
var displayPoweredBy=true;
var noticeLang='professional';
var noticeLangCustom=null;
var supportedBrowsers=[];
var BrowserDetection={
init:function(){
if(notSupportedBrowsers==null||notSupportedBrowsers.length<1){
notSupportedBrowsers=this.defaultNotSupportedBrowsers;
}
this.detectBrowser();
this.detectOS();
if(this.browser==''||this.browser=='Unknown'||this.os==''||
this.os=='Unknown'||this.browserVersion==''||this.browserVersion==0)
{
return;
}
var a=false;
for(var i=0;i<notSupportedBrowsers.length;i++){
if(notSupportedBrowsers[i].os=='Any'||notSupportedBrowsers[i].os==this.os){
if(notSupportedBrowsers[i].browser=='Any'||notSupportedBrowsers[i].browser==this.browser){
if(notSupportedBrowsers[i].version=="Any"||this.browserVersion<=parseFloat(notSupportedBrowsers[i].version)){
a=true;
break;
}
}
}
}
if(a){
this.displayNotice();
}
},
getEl:function(a){return window.document.getElementById(a)},
getElSize:function(a){
var b=this.getEl(a);
if(b==null){return null}
return{'width':parseInt(b.offsetWidth),'height':parseInt(b.offsetHeight)};
},
getWindowSize:function(){
if(typeof window.innerWidth!='undefined'){
return{'width':parseInt(window.innerWidth),'height':parseInt(window.innerHeight)};
}else{
if(window.document.documentElement.clientWidth!=0){
return{'width':parseInt(window.document.documentElement.clientWidth),'height':parseInt(window.document.documentElement.clientHeight)};
}else{
return{'width':parseInt(window.document.body.clientWidth),'height':parseInt(window.document.body.clientHeight)};
}
}
},
positionNotice:function(){
var a=this.getElSize('browser-detection');
var b=this.getWindowSize();
var c=this.getEl('browser-detection');
if(c==null||a==null||b==null||!b.width||!b.height){return}
c.style.left=(b.width-a.width)/2+"px";
var d=(this.browser=="MSIE"&&this.browserVersion<7)?(window.document.documentElement.scrollTop!=0?window.document.documentElement.scrollTop:window.document.body.scrollTop):0;
c.style.top=(b.height-a.height-20+d)+"px";
this.noticeHeight=a.height;
},
displayNotice:function(){
if(this.readCookie('bdnotice')==1){
return;
}
this.writeNoticeCode();
this.positionNotice();
var a=this;
window.onresize=function(){a.positionNotice()};
if(this.browser=="MSIE"&&this.browserVersion<7){
window.onscroll=function(){a.positionNotice()};
}
this.getEl('browser-detection-close').onclick=function(){a.remindMe(false)};
this.getEl('browser-detection-remind-later').onclick=function(){a.remindMe(false)};
this.getEl('browser-detection-never-remind').onclick=function(){a.remindMe(true)};
},
remindMe:function(a){
this.writeCookie('bdnotice',1,a==true?365:7);
this.getEl('browser-detection').style.display='none';
this.getEl('black_overlay').style.display='none';
},
writeCookie:function(a,b,c){
var d="";
if(parseInt(c)>0){
var e=new Date();
e.setTime(e.getTime()+parseInt(c)*24*60*60*1000);
d='; expires='+e.toGMTString();
}
document.cookie=a+'='+b+d+'; path=/';
},
readCookie:function(a){
if(!document.cookie){return''}
var b=a+'=';
var c=document.cookie.split(';');
for(var i=0;i<c.length;i++){
while(c[i].charAt(0)==' '){
c[i]=c[i].substring(1,c[i].length);
}
if(c[i].indexOf(b)==0){
return c[i].substring(b.length,c[i].length);
}
}
return'';
},
writeNoticeCode:function(){
var a='';
var b='';
var c='';
var d='';
var e='';
var f=null;
var g='<div id="black_overlay"></div><div id="browser-detection"><a href="javascript:;" id="browser-detection-close">Close</a>';
if(noticeLang=='custom'&&noticeLangCustom!=null){
a=noticeLangCustom.title;
b=noticeLangCustom.notice;
c=noticeLangCustom.selectBrowser;
d=noticeLangCustom.remindMeLater;
e=noticeLangCustom.neverRemindAgain;
}else{
var h=null;
eval('noticeTextObj = this.noticeText.'+noticeLang+';');
if(!h){
h=this.noticeText.professional;
}
a=h.title;
b=h.notice;
c=h.selectBrowser;
d=h.remindMeLater;
e=h.neverRemindAgain;
}
b=b.replace("\n",'</p><p class="bd-notice">');
b=b.replace("{browser_name}",(this.browser+" "+this.browserVersion));
g+='<p class="bd-title">'+a+'</p><p class="bd-notice">'+b+'</p><p class="bd-notice"><b>'+c+'</b></p>';
if(supportedBrowsers.length>0){
f=supportedBrowsers;
}else{
f=this.supportedBrowsers;
}
g+='<ul class="bd-browsers-list">';
for(var i=0;i<f.length;i++){
g+='<li class="'+f[i].cssClass+'"><a href="'+f[i].downloadUrl+'" target="_blank">'+f[i].name+'</a></li>';
}
g+='</ul>';
if(displayPoweredBy){
g+='<div class="bd-poweredby">Powered by <a href="http://www.devslide.com/labs/browser-detection" target="_blank">DevSlide Labs</a></div>';
}
g+='<ul class="bd-skip-buttons">';
g+='<li><button id="browser-detection-remind-later" type="button" class="ui-btn ui-input-btn ui-corner-all ui-shadow">'+d+'</button></li>';
g+='<li><button id="browser-detection-never-remind" type="button" class="ui-btn ui-input-btn ui-corner-all ui-shadow">'+e+'</button></li>';
g+='</ul>';
g+='</div>';
$(g).appendTo("body")
},
detectBrowser:function(){
this.browser='';
this.browserVersion=0;
if(/Opera[\/\s](\d+\.\d+)/.test(navigator.userAgent)){
this.browser='Opera';
}else if(/MSIE (\d+\.\d+);/.test(navigator.userAgent)){
this.browser='MSIE';
}else if(/Navigator[\/\s](\d+\.\d+)/.test(navigator.userAgent)){
this.browser='Netscape';
}else if(/Chrome[\/\s](\d+\.\d+)/.test(navigator.userAgent)){
this.browser='Chrome';
}else if(/Safari[\/\s](\d+\.\d+)/.test(navigator.userAgent)){
this.browser='Safari';
/Version[\/\s](\d+\.\d+)/.test(navigator.userAgent);
this.browserVersion=new Number(RegExp.$1);
}else if(/Firefox[\/\s](\d+\.\d+)/.test(navigator.userAgent)){
this.browser='Firefox';
}
if(this.browser==''){
this.browser='Unknown';
}else if(this.browserVersion==0){
this.browserVersion=parseFloat(new Number(RegExp.$1));
}
},
detectOS:function(){
for(var i=0;i<this.operatingSystems.length;i++){
if(this.operatingSystems[i].searchString.indexOf(this.operatingSystems[i].subStr)!=-1){
this.os=this.operatingSystems[i].name;
return;
}
}
this.os="Unknown";
},
noticeHeight:0,
browser:'',
os:'',
browserVersion:'',
supportedBrowsers:[
{'cssClass':'chrome','name':'Google Chrome','downloadUrl':'http://www.google.com/chrome/'},
{'cssClass':'firefox','name':'Mozilla Firefox','downloadUrl':'http://www.getfirefox.com/'},
{'cssClass':'opera','name':'Opera','downloadUrl':'http://www.opera.com/'},
{'cssClass':'safari','name':'Apple Safari','downloadUrl':'http://www.apple.com/safari/'},
{'cssClass':'msie','name':'Internet Explorer','downloadUrl':'http://www.getie.com/'}
],
operatingSystems:[
{'searchString':navigator.platform,'name':'Windows','subStr':'Win'},
{'searchString':navigator.platform,'name':'Mac','subStr':'Mac'},
{'searchString':navigator.platform,'name':'Linux','subStr':'Linux'},
{'searchString':navigator.userAgent,'name':'iPhone','subStr':'iPhone/iPod'}
],
defaultNotSupportedBrowsers:[{'os':'Any','browser':'MSIE','version':6}],
noticeText:{
'professional':{"title":"Outdated Browser Detected","notice":"Our website has detected that you are using an outdated browser. Using your current browser will prevent you from accessing features on our website. An upgrade is not required, but is strongly recommend to improve your browsing experience on our website.","selectBrowser":"Use the links below to download a new browser or upgrade your existing browser.","remindMeLater":"Remind me later","neverRemindAgain":"No, don't remind me again"},
'informal':{"title":"Whoaa!","notice":"It appears you're using an outdated browser which prevents access to some of the features on our website. You really should <b>upgrade or install a new browser</b>!","selectBrowser":"Visit the official sites for popular browsers below:","remindMeLater":"Not now, but maybe later","neverRemindAgain":"No, don't remind me again"},
'technical':{"title":"Old Browser Alert! <span class='bd-highlight'>DEFCON 5</span>","notice":"Come on! If you are hitting our site, then you must at least be partially tech savvy. So, why the older browser? We're not asking you to brush off your old Fibonacci Heap and share it with the class. Just upgrade!\nI know, I know. You don't like to be told what to do. But, we're only asking you to upgrade so you can access all the latest, greatest features on our site. It's quick and easy. But, if you still want to skip it, that's cool. We will still welcome you &mdash; and your creepy old browser. :P","selectBrowser":"Visit the official sites for popular browsers below:","remindMeLater":"Remind me later","neverRemindAgain":"No, don't remind me. I like my Commodore 64!"},
'goofy':{"title":"Are You Serious?","notice":"Are you really using <b>{browser_name}</b> as your browser?\nYou're surfing the web on a dinosaur (a dangerous one too &mdash; like a Tyrannosaurus or Pterodactyl or something scary like that). <b>Get with it and upgrade now!</b> If you do, we promise you will enjoy our site a whole lot more. :)","selectBrowser":"Visit the official sites for popular browsers below:","remindMeLater":"Maybe Later","neverRemindAgain":"No, don't remind me again"},
'mean':{"title":"Umm, Your Browser Sucks!","notice":"Get a new one here.","selectBrowser":"Official sites for popular browsers:","remindMeLater":"Remind me later, a'hole","neverRemindAgain":"F' off! My browser rocks!"}
}
};
window.onload=function(){
BrowserDetection.init();
};
;

;
;(function(){
var t='3.0.0-0-ge670de9';
var u,
define;
(function(){
var e={},
requireStack=[],
inProgressModules={},
SEPERATOR=".";
function build(c){
var d=c.factory,
localRequire=function(a){
var b=a;
if(a.charAt(0)==="."){
b=c.id.slice(0,c.id.lastIndexOf(SEPERATOR))+SEPERATOR+a.slice(2);
}
return u(b);
};
c.exports={};
delete c.factory;
d(localRequire,c.exports,c);
return c.exports;
}
u=function(a){
if(!e[a]){
throw"module "+a+" not found";
}else if(a in inProgressModules){
var b=requireStack.slice(inProgressModules[a]).join('->')+'->'+a;
throw"Cycle in require graph: "+b;
}
if(e[a].factory){
try{
inProgressModules[a]=requireStack.length;
requireStack.push(a);
return build(e[a]);
}finally{
delete inProgressModules[a];
requireStack.pop();
}
}
return e[a].exports;
};
define=function(a,b){
if(e[a]){
throw"module "+a+" already defined";
}
e[a]={
a:a,
b:b
};
};
define.remove=function(a){
delete e[a];
};
define.moduleMap=e;
})();
if(typeof module==="object"&&typeof u==="function"){
module.exports.require=u;
module.exports.define=define;
}
define("cordova",function(g,h,j){
var k=g('cordova/channel');

document.addEventListener('DOMContentLoaded',function(){
k.onDOMContentLoaded.fire();
},false);
if(document.readyState=='complete'||document.readyState=='interactive'){
k.onDOMContentLoaded.fire();
}

var l=document.addEventListener;
var m=document.removeEventListener;
var n=window.addEventListener;
var o=window.removeEventListener;

var p={},
windowEventHandlers={};
document.addEventListener=function(a,b,c){
var e=a.toLowerCase();
if(typeof p[e]!='undefined'){
p[e].subscribe(b);
}else{
l.call(document,a,b,c);
}
};
window.addEventListener=function(a,b,c){
var e=a.toLowerCase();
if(typeof windowEventHandlers[e]!='undefined'){
windowEventHandlers[e].subscribe(b);
}else{
n.call(window,a,b,c);
}
};
document.removeEventListener=function(a,b,c){
var e=a.toLowerCase();
if(typeof p[e]!="undefined"){
p[e].unsubscribe(b);
}else{
m.call(document,a,b,c);
}
};
window.removeEventListener=function(a,b,c){
var e=a.toLowerCase();
if(typeof windowEventHandlers[e]!="undefined"){
windowEventHandlers[e].unsubscribe(b);
}else{
o.call(window,a,b,c);
}
};
function createEvent(a,b){
var c=document.createEvent('Events');
c.initEvent(a,false,false);
if(b){
for(var i in b){
if(b.hasOwnProperty(i)){
c[i]=b[i];
}
}
}
return c;
}
if(typeof window.console==="undefined"){
window.console={
log:function(){}
};
}
if(typeof window.console.warn==="undefined"){
window.console.warn=function(a){
this.log("warn: "+a);
}
}
var q={
define:define,
g:g,

addWindowEventHandler:function(a){
return(windowEventHandlers[a]=k.create(a));
},
addStickyDocumentEventHandler:function(a){
return(p[a]=k.createSticky(a));
},
addDocumentEventHandler:function(a){
return(p[a]=k.create(a));
},
removeWindowEventHandler:function(a){
delete windowEventHandlers[a];
},
removeDocumentEventHandler:function(a){
delete p[a];
},

getOriginalHandlers:function(){
return{'document':{'addEventListener':l,'removeEventListener':m},
'window':{'addEventListener':n,'removeEventListener':o}};
},

fireDocumentEvent:function(a,b,c){
var d=createEvent(a,b);
if(typeof p[a]!='undefined'){
if(c){
p[a].fire(d);
}
else{
setTimeout(function(){
if(a=='deviceready'){
document.dispatchEvent(d);
}
p[a].fire(d);
},0);
}
}else{
document.dispatchEvent(d);
}
},
fireWindowEvent:function(a,b){
var c=createEvent(a,b);
if(typeof windowEventHandlers[a]!='undefined'){
setTimeout(function(){
windowEventHandlers[a].fire(c);
},0);
}else{
window.dispatchEvent(c);
}
},

callbackId:Math.floor(Math.random()*2000000000),
callbacks:{},
callbackStatus:{
NO_RESULT:0,
OK:1,
CLASS_NOT_FOUND_EXCEPTION:2,
ILLEGAL_ACCESS_EXCEPTION:3,
INSTANTIATION_EXCEPTION:4,
MALFORMED_URL_EXCEPTION:5,
IO_EXCEPTION:6,
INVALID_ACTION:7,
JSON_EXCEPTION:8,
ERROR:9
},

callbackSuccess:function(a,b){
try{
q.callbackFromNative(a,true,b.status,[b.message],b.keepCallback);
}catch(e){
console.log("Error in error callback: "+a+" = "+e);
}
},

callbackError:function(a,b){
try{
q.callbackFromNative(a,false,b.status,[b.message],b.keepCallback);
}catch(e){
console.log("Error in error callback: "+a+" = "+e);
}
},

callbackFromNative:function(a,b,c,d,e){
var f=q.callbacks[a];
if(f){
if(b&&c==q.callbackStatus.OK){
f.success&&f.success.apply(null,d);
}else if(!b){
f.fail&&f.fail.apply(null,d);
}
if(!e){
delete q.callbacks[a];
}
}
},
addConstructor:function(a){
k.onCordovaReady.subscribe(function(){
try{
a();
}catch(e){
console.log("Failed to run constructor: "+e);
}
});
}
};
k.onPause=q.addDocumentEventHandler('pause');
k.onResume=q.addDocumentEventHandler('resume');
k.onDeviceReady=q.addStickyDocumentEventHandler('deviceready');
j.exports=q;
});
define("cordova/argscheck",function(h,j,k){
var l=h('cordova/exec');
var m=h('cordova/utils');
var n=k.exports;
var o={
'A':'Array',
'D':'Date',
'N':'Number',
'S':'String',
'F':'Function',
'O':'Object'
};
function extractParamName(a,b){
return(/.*?\((.*?)\)/).exec(a)[1].split(', ')[b];
}
function checkArgs(a,b,d,e){
if(!n.enableChecks){
return;
}
var f=null;
var g;
for(var i=0;i<a.length;++i){
var c=a.charAt(i),
cUpper=c.toUpperCase(),
arg=d[i];
if(c=='*'){
continue;
}
g=m.typeName(arg);
if((arg===null||arg===undefined)&&c==cUpper){
continue;
}
if(g!=o[cUpper]){
f='Expected '+o[cUpper];
break;
}
}
if(f){
f+=', but got '+g+'.';
f='Wrong type for parameter "'+extractParamName(e||d.callee,i)+'" of '+b+': '+f;
if(typeof jasmine=='undefined'){
console.error(f);
}
throw TypeError(f);
}
}
function getValue(a,b){
return a===undefined?b:a;
}
n.checkArgs=checkArgs;
n.getValue=getValue;
n.enableChecks=true;
});
define("cordova/base64",function(f,g,h){
var k=g;
k.fromArrayBuffer=function(a){
var b=new Uint8Array(a);
return uint8ToBase64(b);
};

var l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";
var m;
var n=function(){
m=[];
for(var i=0;i<64;i++){
for(var j=0;j<64;j++){
m[i*64+j]=l[i]+l[j];
}
}
n=function(){return m};
return m;
}
function uint8ToBase64(a){
var b=a.byteLength;
var c="";
var d;
var e=n();
for(var i=0;i<b-2;i+=3){
d=(a[i]<<16)+(a[i+1]<<8)+a[i+2];
c+=e[d>>12];
c+=e[d&0xfff];
}
if(b-i==2){
d=(a[i]<<16)+(a[i+1]<<8);
c+=e[d>>12];
c+=l[(d&0xfff)>>6];
c+='=';
}else if(b-i==1){
d=(a[i]<<16);
c+=e[d>>12];
c+='==';
}
return c;
}
});
define("cordova/builder",function(i,j,k){
var l=i('cordova/utils');
function each(a,b,c){
for(var d in a){
if(a.hasOwnProperty(d)){
b.apply(c,[a[d],d]);
}
}
}
function clobber(a,b,c){
j.replaceHookForTesting(a,b);
a[b]=c;
if(a[b]!==c){
l.defineGetter(a,b,function(){
return c;
});
}
}
function assignOrWrapInDeprecateGetter(a,b,c,d){
if(d){
l.defineGetter(a,b,function(){
console.log(d);
delete a[b];
clobber(a,b,c);
return c;
});
}else{
clobber(a,b,c);
}
}
function include(d,f,g,h){
each(f,function(a,b){
try{
var c=a.path?i(a.path):{};
if(g){
if(typeof d[b]==='undefined'){
assignOrWrapInDeprecateGetter(d,b,c,a.deprecated);
}else if(typeof a.path!=='undefined'){
if(h){
recursiveMerge(d[b],c);
}else{
assignOrWrapInDeprecateGetter(d,b,c,a.deprecated);
}
}
c=d[b];
}else{
if(typeof d[b]=='undefined'){
assignOrWrapInDeprecateGetter(d,b,c,a.deprecated);
}else{
c=d[b];
}
}
if(a.children){
include(c,a.children,g,h);
}
}catch(e){
l.alert('Exception building cordova JS globals: '+e+' for key "'+b+'"');
}
});
}

function recursiveMerge(a,b){
for(var c in b){
if(b.hasOwnProperty(c)){
if(a.prototype&&a.prototype.constructor===a){
clobber(a.prototype,c,b[c]);
}else{
if(typeof b[c]==='object'&&typeof a[c]==='object'){
recursiveMerge(a[c],b[c]);
}else{
clobber(a,c,b[c]);
}
}
}
}
}
j.buildIntoButDoNotClobber=function(a,b){
include(b,a,false,false);
};
j.buildIntoAndClobber=function(a,b){
include(b,a,true,false);
};
j.buildIntoAndMerge=function(a,b){
include(b,a,true,true);
};
j.recursiveMerge=recursiveMerge;
j.assignOrWrapInDeprecateGetter=assignOrWrapInDeprecateGetter;
j.replaceHookForTesting=function(){};
});
define("cordova/channel",function(d,g,k){
var l=d('cordova/utils'),
nextGuid=1;


var m=function(a,b){
this.type=a;
this.handlers={};
this.state=b?1:0;
this.fireArgs=null;
this.numHandlers=0;
this.onHasSubscribersChange=null;
},
channel={

join:function(h,c){
var a=c.length,
i=a,
f=function(){
if(!(--i))h();
};
for(var j=0;j<a;j++){
if(c[j].state===0){
throw Error('Can only use join with sticky channels.');
}
c[j].subscribe(f);
}
if(!a)h();
},
create:function(a){
return channel[a]=new m(a,false);
},
createSticky:function(a){
return channel[a]=new m(a,true);
},

deviceReadyChannelsArray:[],
deviceReadyChannelsMap:{},

waitForInitialization:function(a){
if(a){
var c=channel[a]||this.createSticky(a);
this.deviceReadyChannelsMap[a]=c;
this.deviceReadyChannelsArray.push(c);
}
},

initializationComplete:function(a){
var c=this.deviceReadyChannelsMap[a];
if(c){
c.fire();
}
}
};
function forceFunction(f){
if(typeof f!='function')throw"Function required as first argument!";
}

m.prototype.subscribe=function(f,c){
forceFunction(f);
if(this.state==2){
f.apply(c||this,this.fireArgs);
return;
}
var a=f,
guid=f.observer_guid;
if(typeof c=="object"){a=l.close(c,f)}
if(!guid){
guid=''+nextGuid++;
}
a.observer_guid=guid;
f.observer_guid=guid;
if(!this.handlers[guid]){
this.handlers[guid]=a;
this.numHandlers++;
if(this.numHandlers==1){
this.onHasSubscribersChange&&this.onHasSubscribersChange();
}
}
};

m.prototype.unsubscribe=function(f){
forceFunction(f);
var a=f.observer_guid,
handler=this.handlers[a];
if(handler){
delete this.handlers[a];
this.numHandlers--;
if(this.numHandlers===0){
this.onHasSubscribersChange&&this.onHasSubscribersChange();
}
}
};

m.prototype.fire=function(e){
var a=false,
fireArgs=Array.prototype.slice.call(arguments);
if(this.state==1){
this.state=2;
this.fireArgs=fireArgs;
}
if(this.numHandlers){
var b=[];
for(var c in this.handlers){
b.push(this.handlers[c]);
}
for(var i=0;i<b.length;++i){
b[i].apply(this,fireArgs);
}
if(this.state==2&&this.numHandlers){
this.numHandlers=0;
this.handlers={};
this.onHasSubscribersChange&&this.onHasSubscribersChange();
}
}
};
channel.createSticky('onDOMContentLoaded');
channel.createSticky('onNativeReady');
channel.createSticky('onCordovaReady');
channel.createSticky('onPluginsReady');
channel.createSticky('onDeviceReady');
channel.create('onResume');
channel.create('onPause');
channel.createSticky('onDestroy');
channel.waitForInitialization('onCordovaReady');
channel.waitForInitialization('onDOMContentLoaded');
k.exports=channel;
});
define("cordova/commandProxy",function(c,d,e){
var f={};
e.exports={
add:function(a,b){
console.log("adding proxy for "+a);
f[a]=b;
return b;
},
remove:function(a){
var b=f[a];
delete f[a];
f[a]=null;
return b;
},
get:function(a,b){
return(f[a]?f[a][b]:null);
}
};
});
define("cordova/exec",function(p,q,r){

var s=p('cordova'),
nativeApiProvider=p('cordova/plugin/android/nativeapiprovider'),
utils=p('cordova/utils'),
base64=p('cordova/base64'),
jsToNativeModes={
PROMPT:0,
JS_OBJECT:1,
LOCATION_CHANGE:2
},
nativeToJsModes={
POLLING:0,
LOAD_URL:1,
ONLINE_EVENT:2,
PRIVATE_API:3
},
jsToNativeBridgeMode,nativeToJsBridgeMode=nativeToJsModes.ONLINE_EVENT,
pollEnabled=false,
messagesFromNative=[];
function androidExec(a,b,c,d,e){
if(jsToNativeBridgeMode===undefined){
androidExec.setJsToNativeBridgeMode(jsToNativeModes.JS_OBJECT);
}
for(var i=0;i<e.length;i++){
if(utils.typeName(e[i])=='ArrayBuffer'){
e[i]=base64.fromArrayBuffer(e[i]);
}
}
var f=c+s.callbackId++,
argsJson=JSON.stringify(e);
if(a||b){
s.callbacks[f]={success:a,fail:b};
}
if(jsToNativeBridgeMode==jsToNativeModes.LOCATION_CHANGE){
window.location='http://cdv_exec/'+c+'#'+d+'#'+f+'#'+argsJson;
}else{
var g=nativeApiProvider.get().exec(c,d,f,argsJson);
if(jsToNativeBridgeMode==jsToNativeModes.JS_OBJECT&&g==="@Null arguments."){
androidExec.setJsToNativeBridgeMode(jsToNativeModes.PROMPT);
androidExec(a,b,c,d,e);
androidExec.setJsToNativeBridgeMode(jsToNativeModes.JS_OBJECT);
return;
}else{
androidExec.processMessages(g);
}
}
}
function pollOnce(){
var a=nativeApiProvider.get().retrieveJsMessages();
androidExec.processMessages(a);
}
function pollingTimerFunc(){
if(pollEnabled){
pollOnce();
setTimeout(pollingTimerFunc,50);
}
}
function hookOnlineApis(){
function proxyEvent(e){
s.fireWindowEvent(e.type);
}
window.addEventListener('online',pollOnce,false);
window.addEventListener('offline',pollOnce,false);
s.addWindowEventHandler('online');
s.addWindowEventHandler('offline');
document.addEventListener('online',proxyEvent,false);
document.addEventListener('offline',proxyEvent,false);
}
hookOnlineApis();
androidExec.jsToNativeModes=jsToNativeModes;
androidExec.nativeToJsModes=nativeToJsModes;
androidExec.setJsToNativeBridgeMode=function(a){
if(a==jsToNativeModes.JS_OBJECT&&!window._cordovaNative){
console.log('Falling back on PROMPT mode since _cordovaNative is missing. Expected for Android 3.2 and lower only.');
a=jsToNativeModes.PROMPT;
}
nativeApiProvider.setPreferPrompt(a==jsToNativeModes.PROMPT);
jsToNativeBridgeMode=a;
};
androidExec.setNativeToJsBridgeMode=function(a){
if(a==nativeToJsBridgeMode){
return;
}
if(nativeToJsBridgeMode==nativeToJsModes.POLLING){
pollEnabled=false;
}
nativeToJsBridgeMode=a;
nativeApiProvider.get().setNativeToJsBridgeMode(a);
if(a==nativeToJsModes.POLLING){
pollEnabled=true;
setTimeout(pollingTimerFunc,1);
}
};
function processMessage(a){
try{
var b=a.charAt(0);
if(b=='J'){
eval(a.slice(1));
}else if(b=='S'||b=='F'){
var c=b=='S';
var d=a.charAt(1)=='1';
var f=a.indexOf(' ',2);
var g=+a.slice(2,f);
var h=a.indexOf(' ',f+1);
var j=a.slice(f+1,h);
var k=a.charAt(h+1);
var l;
if(k=='s'){
l=a.slice(h+2);
}else if(k=='t'){
l=true;
}else if(k=='f'){
l=false;
}else if(k=='N'){
l=null;
}else if(k=='n'){
l=+a.slice(h+2);
}else if(k=='A'){
var m=a.slice(h+2);
var n=window.atob(m);
var o=new Uint8Array(n.length);
for(var i=0;i<n.length;i++){
o[i]=n.charCodeAt(i);
}
l=o.buffer;
}else if(k=='S'){
l=window.atob(a.slice(h+2));
}else{
l=JSON.parse(a.slice(h+1));
}
s.callbackFromNative(j,c,g,[l],d);
}else{
console.log("processMessage failed: invalid message:"+a);
}
}catch(e){
console.log("processMessage failed: Message: "+a);
console.log("processMessage failed: Error: "+e);
console.log("processMessage failed: Stack: "+e.stack);
}
}
androidExec.processMessages=function(a){
if(a){
messagesFromNative.push(a);
if(messagesFromNative.length>1){
return;
}
while(messagesFromNative.length){
a=messagesFromNative[0];
if(a=='*'){
messagesFromNative.shift();
window.setTimeout(pollOnce,0);
return;
}
var b=a.indexOf(' ');
var c=+a.slice(0,b);
var d=a.substr(b+1,c);
a=a.slice(b+c+1);
processMessage(d);
if(a){
messagesFromNative[0]=a;
}else{
messagesFromNative.shift();
}
}
}
};
r.exports=androidExec;
});
define("cordova/modulemapper",function(n,o,p){
var q=n('cordova/builder'),
moduleMap=define.moduleMap,
symbolList,
deprecationMap;
o.reset=function(){
symbolList=[];
deprecationMap={};
};
function addEntry(a,b,c,d){
if(!(b in moduleMap)){
throw new Error('Module '+b+' does not exist.');
}
symbolList.push(a,b,c);
if(d){
deprecationMap[c]=d;
}
}
o.clobbers=function(a,b,c){
addEntry('c',a,b,c);
};
o.merges=function(a,b,c){
addEntry('m',a,b,c);
};
o.defaults=function(a,b,c){
addEntry('d',a,b,c);
};
o.runs=function(a){
addEntry('r',a,null);
};
function prepareNamespace(a,b){
if(!a){
return b;
}
var c=a.split('.');
var d=b;
for(var i=0,part;part=c[i];++i){
d=d[part]=d[part]||{};
}
return d;
}
o.mapModules=function(a){
var b={};
a.CDV_origSymbols=b;
for(var i=0,len=symbolList.length;i<len;i+=3){
var c=symbolList[i];
var d=symbolList[i+1];
var e=n(d);
if(c=='r'){
continue;
}
var f=symbolList[i+2];
var g=f.lastIndexOf('.');
var h=f.substr(0,g);
var j=f.substr(g+1);
var k=f in deprecationMap?'Access made to deprecated symbol: '+f+'. '+k:null;
var l=prepareNamespace(h,a);
var m=l[j];
if(c=='m'&&m){
q.recursiveMerge(m,e);
}else if((c=='d'&&!m)||(c!='d')){
if(!(f in b)){
b[f]=m;
}
q.assignOrWrapInDeprecateGetter(l,j,e,k);
}
}
};
o.getOriginalSymbol=function(a,b){
var c=a.CDV_origSymbols;
if(c&&(b in c)){
return c[b];
}
var d=b.split('.');
var e=a;
for(var i=0;i<d.length;++i){
e=e&&e[d[i]];
}
return e;
};
o.loadMatchingModules=function(a){
for(var k in moduleMap){
if(a.exec(k)){
n(k);
}
}
};
o.reset();
});
define("cordova/platform",function(c,d,e){
e.exports={
id:"android",
initialize:function(){
var a=c("cordova/channel"),
cordova=c('cordova'),
exec=c('cordova/exec'),
modulemapper=c('cordova/modulemapper');
modulemapper.loadMatchingModules(/cordova.*\/symbols$/);
modulemapper.clobbers('cordova/plugin/android/app','navigator.app');
modulemapper.mapModules(window);
var b=cordova.addDocumentEventHandler('backbutton');
b.onHasSubscribersChange=function(){
exec(null,null,"App","overrideBackbutton",[this.numHandlers==1]);
};
cordova.addDocumentEventHandler('menubutton');
cordova.addDocumentEventHandler('searchbutton');
a.join(function(){
exec(null,null,"App","show",[]);
},[a.onCordovaReady]);
}
};
});
define("cordova/plugin/android/app",function(c,d,e){
var f=c('cordova/exec');
e.exports={

clearCache:function(){
f(null,null,"App","clearCache",[]);
},

loadUrl:function(a,b){
f(null,null,"App","loadUrl",[a,b]);
},

cancelLoadUrl:function(){
f(null,null,"App","cancelLoadUrl",[]);
},

clearHistory:function(){
f(null,null,"App","clearHistory",[]);
},

backHistory:function(){
f(null,null,"App","backHistory",[]);
},

overrideBackbutton:function(a){
f(null,null,"App","overrideBackbutton",[a]);
},

exitApp:function(){
return f(null,null,"App","exitApp",[]);
}
};
});
define("cordova/plugin/android/nativeapiprovider",function(b,c,d){

var e=this._cordovaNative||b('cordova/plugin/android/promptbasednativeapi');
var f=e;
d.exports={
get:function(){return f},
setPreferPrompt:function(a){
f=a?b('cordova/plugin/android/promptbasednativeapi'):e;
},
set:function(a){
f=a;
}
};
});
define("cordova/plugin/android/promptbasednativeapi",function(e,f,g){

g.exports={
exec:function(a,b,c,d){
return prompt(d,'gap:'+JSON.stringify([a,b,c]));
},
setNativeToJsBridgeMode:function(a){
prompt(a,'gap_bridge_mode:');
},
retrieveJsMessages:function(){
return prompt('','gap_poll:');
}
};
});
define("cordova/plugin/android/storage",function(f,g,h){
var j=f('cordova/utils'),
exec=f('cordova/exec'),
channel=f('cordova/channel');
var k={};

var l=function(){
this.resultSet=[];this.length=0};

l.prototype.item=function(a){
return this.resultSet[a];
};

var m=function(){
this.rows=new l();
};

function completeQuery(a,b){
var c=k[a];
if(c){
try{
delete k[a];
var d=c.tx;
if(d&&d.queryList[a]){
var r=new m();
r.rows.resultSet=b;
r.rows.length=b.length;
try{
if(typeof c.successCallback==='function'){
c.successCallback(c.tx,r);
}
}catch(ex){
console.log("executeSql error calling user success callback: "+ex);
}
d.queryComplete(a);
}
}catch(e){
console.log("executeSql error: "+e);
}
}
}

function failQuery(a,b){
var c=k[b];
if(c){
try{
delete k[b];
var d=c.tx;
if(d&&d.queryList[b]){
d.queryList={};
try{
if(typeof c.errorCallback==='function'){
c.errorCallback(c.tx,a);
}
}catch(ex){
console.log("executeSql error calling user error callback: "+ex);
}
d.queryFailed(b,a);
}
}catch(e){
console.log("executeSql error: "+e);
}
}
}

var n=function(a){
this.id=j.createUUID();
k[this.id]=this;
this.resultSet=[];
this.tx=a;
this.tx.queryList[this.id]=this;
this.successCallback=null;
this.errorCallback=null;
};

var o=function(){
this.id=j.createUUID();
this.successCallback=null;
this.errorCallback=null;
this.queryList={};
};

o.prototype.queryComplete=function(a){
delete this.queryList[a];
if(this.successCallback){
var b=0;
var i;
for(i in this.queryList){
if(this.queryList.hasOwnProperty(i)){
b++;
}
}
if(b===0){
try{
this.successCallback();
}catch(e){
console.log("Transaction error calling user success callback: "+e);
}
}
}
};

o.prototype.queryFailed=function(a,b){
this.queryList={};
if(this.errorCallback){
try{
this.errorCallback(b);
}catch(e){
console.log("Transaction error calling user error callback: "+e);
}
}
};

o.prototype.executeSql=function(a,b,c,d){
if(typeof b==='undefined'){
b=[];
}
var e=new n(this);
k[e.id]=e;
e.successCallback=c;
e.errorCallback=d;
exec(null,null,"Storage","executeSql",[a,b,e.id]);
};
var p=function(){
};

p.prototype.transaction=function(a,b,c){
var d=new o();
d.successCallback=c;
d.errorCallback=b;
try{
a(d);
}catch(e){
console.log("Transaction error: "+e);
if(d.errorCallback){
try{
d.errorCallback(e);
}catch(ex){
console.log("Transaction error calling user error callback: "+e);
}
}
}
};

var q=function(a,b,c,d){
exec(null,null,"Storage","openDatabase",[a,b,c,d]);
var e=new p();
return e;
};
h.exports={
openDatabase:q,
failQuery:failQuery,
completeQuery:completeQuery
};
});
define("cordova/plugin/android/storage/openDatabase",function(e,f,g){
var h=e('cordova/modulemapper'),
storage=e('cordova/plugin/android/storage');
var i=h.getOriginalSymbol(window,'openDatabase');
g.exports=function(a,b,c,d){
if(!i){
return storage.openDatabase.apply(this,arguments);
}
try{
return i(a,b,c,d);
}catch(ex){
if(ex.code!==18){
throw ex;
}
}
return storage.openDatabase(a,b,c,d);
};
});
define("cordova/plugin/android/storage/symbols",function(a,b,c){
var d=a('cordova/modulemapper');
d.clobbers('cordova/plugin/android/storage/openDatabase','openDatabase');
});
define("cordova/plugin/echo",function(h,i,j){
var k=h('cordova/exec'),
utils=h('cordova/utils');

j.exports=function(a,b,c,d){
var e='echo';
var f=(utils.typeName(c)=="Array");
var g=f?c:[c];
if(utils.typeName(c)=='ArrayBuffer'){
if(d){
console.warn('Cannot echo ArrayBuffer with forced async, falling back to sync.');
}
e+='ArrayBuffer';
}else if(f){
if(d){
console.warn('Cannot echo MultiPart Array with forced async, falling back to sync.');
}
e+='MultiPart';
}else if(d){
e+='Async';
}
k(a,b,"Echo",e,g);
};
});
define("cordova/pluginloader",function(f,g,h){
var l=f('cordova/channel');
var m=f('cordova/modulemapper');
function injectScript(a,b,c){
var d=document.createElement("script");
d.onload=b;
d.onerror=c||b;
d.src=a;
document.head.appendChild(d);
}
function onScriptLoadingComplete(a){
for(var i=0,h;h=a[i];i++){
if(h){
try{
if(h.clobbers&&h.clobbers.length){
for(var j=0;j<h.clobbers.length;j++){
m.clobbers(h.id,h.clobbers[j]);
}
}
if(h.merges&&h.merges.length){
for(var k=0;k<h.merges.length;k++){
m.merges(h.id,h.merges[k]);
}
}
if(h.runs&&!(h.clobbers&&h.clobbers.length)&&!(h.merges&&h.merges.length)){
m.runs(h.id);
}
}
catch(err){
}
}
}
finishPluginLoading();
}
function finishPluginLoading(){
l.onPluginsReady.fire();
}
function handlePluginsObject(a,b){
var c=b.length;
if(!c){
finishPluginLoading();
return;
}
function scriptLoadedCallback(){
if(!--c){
onScriptLoadingComplete(b);
}
}
for(var i=0;i<b.length;i++){
injectScript(a+b[i].file,scriptLoadedCallback);
}
}
function injectPluginScript(b){
injectScript(b+'cordova_plugins.js',function(){
try{
var a=f("cordova/plugin_list");
handlePluginsObject(b,a);
}catch(e){
finishPluginLoading();
}
},finishPluginLoading)}
function findCordovaPath(){
var a=null;
var b=document.getElementsByTagName('script');
var c='cordova.js';
for(var n=b.length-1;n>-1;n--){
var d=b[n].src;
if(d.indexOf(c)==(d.length-c.length)){
a=d.substring(0,d.length-c.length);
break;
}
}
return a;
}
g.load=function(){
var a=findCordovaPath();
if(a===null){
console.log('Could not find cordova.js script tag. Plugin loading may fail.');
a='';
}
injectPluginScript(a);
};
});
define("cordova/symbols",function(a,b,c){
var d=a('cordova/modulemapper');
d.merges('cordova','cordova');
d.clobbers('cordova/exec','cordova.exec');
d.clobbers('cordova/exec','Cordova.exec');
});
define("cordova/utils",function(f,g,h){
var j=g;

j.defineGetterSetter=function(a,b,c,d){
if(Object.defineProperty){
var e={
get:c,
configurable:true
};
if(d){
e.set=d;
}
Object.defineProperty(a,b,e);
}else{
a.__defineGetter__(b,c);
if(d){
a.__defineSetter__(b,d);
}
}
};

j.defineGetter=j.defineGetterSetter;
j.arrayIndexOf=function(a,b){
if(a.indexOf){
return a.indexOf(b);
}
var c=a.length;
for(var i=0;i<c;++i){
if(a[i]==b){
return i;
}
}
return-1;
};

j.arrayRemove=function(a,b){
var c=j.arrayIndexOf(a,b);
if(c!=-1){
a.splice(c,1);
}
return c!=-1;
};
j.typeName=function(a){
return Object.prototype.toString.call(a).slice(8,-1);
};

j.isArray=function(a){
return j.typeName(a)=='Array';
};

j.isDate=function(d){
return j.typeName(d)=='Date';
};

j.clone=function(a){
if(!a||typeof a=='function'||j.isDate(a)||typeof a!='object'){
return a;
}
var b,i;
if(j.isArray(a)){
b=[];
for(i=0;i<a.length;++i){
b.push(j.clone(a[i]));
}
return b;
}
b={};
for(i in a){
if(!(i in b)||b[i]!=a[i]){
b[i]=j.clone(a[i]);
}
}
return b;
};

j.close=function(a,b,c){
if(typeof c=='undefined'){
return function(){
return b.apply(a,arguments);
};
}else{
return function(){
return b.apply(a,c);
};
}
};

j.createUUID=function(){
return UUIDcreatePart(4)+'-'+
UUIDcreatePart(2)+'-'+
UUIDcreatePart(2)+'-'+
UUIDcreatePart(2)+'-'+
UUIDcreatePart(6);
};

j.extend=(function(){
var F=function(){};
return function(a,b){
F.prototype=b.prototype;
a.prototype=new F();
a.__super__=b.prototype;
a.prototype.constructor=a;
};
}());

j.alert=function(a){
if(window.alert){
window.alert(a);
}else if(console&&console.log){
console.log(a);
}
};
function UUIDcreatePart(a){
var b="";
for(var i=0;i<a;i++){
var c=parseInt((Math.random()*256),10).toString(16);
if(c.length==1){
c="0"+c;
}
b+=c;
}
return b;
}
});
window.cordova=u('cordova');
(function(e){
if(e._cordovaJsLoaded){
throw new Error('cordova.js included multiple times.');
}
e._cordovaJsLoaded=true;
var f=u('cordova/channel');
var g=u('cordova/pluginloader');
var h=[f.onNativeReady,f.onPluginsReady];
function logUnfiredChannels(a){
for(var i=0;i<a.length;++i){
if(a[i].state!=2){
console.log('Channel not fired: '+a[i].type);
}
}
}
window.setTimeout(function(){
if(f.onDeviceReady.state!=2){
console.log('deviceready has not fired after 5 seconds.');
logUnfiredChannels(h);
logUnfiredChannels(f.deviceReadyChannelsArray);
}
},5000);
function replaceNavigator(a){
var b=function(){};
b.prototype=a;
var c=new b();
if(b.bind){
for(var d in a){
if(typeof a[d]=='function'){
c[d]=a[d].bind(a);
}
}
}
return c;
}
if(e.navigator){
e.navigator=replaceNavigator(e.navigator);
}
if(window._nativeReady){
f.onNativeReady.fire();
}

f.join(function(){
u('cordova/platform').initialize();
f.onCordovaReady.fire();
f.join(function(){
u('cordova').fireDocumentEvent('deviceready');
},f.deviceReadyChannelsArray);
},h);
if(typeof XMLHttpRequest!='undefined'){
g.load();
}
}(window));
u('cordova/exec')(null,null,'PluginManager','startup',[]);
u('cordova/channel').onNativeReady.fire();
})();
;

;
var accountController=function(){
};
accountController.loginToken="";
accountController.loggedIn=false;
accountController.userName="";
accountController.userEmail="";
accountController.defaultPassword="*♥*♥*";
accountController.requestid=1;
accountController.showRegisterPopup=false;
accountController.getCookie=function(a){
var b=a+"=";
var d=document.cookie.split(';');
for(var i=0;i<d.length;i++){
var c=d[i].trim();
if(c.indexOf(b)==0)return c.substring(b.length,c.length);
}
return"";
}
accountController.setCookie=function(a,b,c){
var d=new Date();
d.setTime(d.getTime()+(c*24*60*60*1000));
var e="expires="+d.toGMTString();
document.cookie=a+"="+b+"; "+e;
}
accountController.init=function(){
setTimeout(function(){
$("#popupLogin input").on("input",function(){
accountController.resetSignInData();
})
$("#popupRegister input").on("input",function(){
accountController.resetRegisterData();
})
$('#popupLogin input').keyup(function(e){
if(e.keyCode==13){
accountController.signIn();
}
});
$('#popupLogin input').keyup(function(e){
if(e.keyCode==13){
accountController.register();
}
});
},500)
$("#popupLogin").popup({
beforeposition:function(a,b){
accountController.resetSignInData();
},
afteropen:function(a,b){
$('#signinusername').focus();
},
afterclose:function(){
$("#signinpw").val("");
}
});
$("#popupRegister").popup({
beforeposition:function(a,b){
accountController.resetRegisterData();
},
afteropen:function(a,b){
$('#registerusername').focus();
},
afterclose:function(){
$("#registerpw").val("");
$("#registerpwc").val("");
}
});
setTimeout(accountController.singInAuto,1000);
}
accountController.toggleSignInRegister=function(){
accountController.showRegisterPopup=!accountController.showRegisterPopup;
if(accountController.showRegisterPopup){
$('#signintitle').html('Please Register');
$('#signinButton').html('Register');
$('#registerlink').html('Sign in');
$('#useremail').show();
$('#pwconfirm').show();
}else{
$('#signintitle').html('Sign in');
$('#signinButton').html('Sign in');
$('#registerlink').html('Register');
$('#useremail').hide();
$('#pwconfirm').hide();
}
;
$('#signinusername').focus();
}
accountController.logout=function(){
if(authController.ip_token!="auth"&&authController.ip_token!=""){
var c=function(){
var b=rsaController.rsa.encrypt(accountController.loginToken);
$.ajax({
timeout:30000,
url:preferences.serverURL+"?logout="+b+"&auth="+authController.ip_token,
success:function(a){
if(authController.ensureAuthenticated(a,function(){
accountController.logout();
})){
accountController.loggedIn=false;
playlistController.playlists=[playlistController.currentQueue];
uiController.showPlaylists();
$scope.safeApply();
$('#popupAccount').popup('close');

accountController.requestid=1;
console.log("FB?????"+facebookHandler.loggedIn)
if(facebookHandler.loggedIn){
facebookHandler.logout();
}
}
},
complete:function(){
accountController.setCookie("fbLogin",Base64.encode(""),0);
accountController.setCookie("loginToken",Base64.encode(""),0);
accountController.setCookie("userName",Base64.encode(""),0);
}
})
}
c()
}
}

accountController.loadStoredData=function(){
$.mobile.loading("show");
var l=function(a){
console.dir("PLAYLISTS:");
console.dir(a);
if(a){
var b=[];

if(a.items&&a.items.length>0){
console.dir("Copy received (stored) data to playlists-Array;!!!!!!!!!!!!!!!");
console.log("!!!!!!!!!!!!")
console.log(JSON.stringify(playlistController.playlists))
var c=(playlistController.currentQueue.tracks.length==0);
var d=false;
for(var j=0;j<a.items.length;j++){
if(a.items[j].gid==0){
d=true;
}
if(a.items[j].gid==0&&!c){
a.items.splice(j,1);
j=j-1;
}else{
b[j]={
name:a.items[j].name,
gid:a.items[j].gid,
tracks:a.items[j].data,
isPlaylist:true,
id:a.items[j].gid
}
console.dir("playlists["+j+"]: ");
console.dir(b[j]);
console.dir("-----------------");
}
}
if(!d)
c=false;
if(b){
var e=0;
for(var j=0;j<b.length;j++){
if(b[j].gid==playlistController.currentQueue.gid){
e++;
if(e>1){
b.splice(j,1);
j--;
}
}
}
if(playlistController.playlists.length>0){
for(var i=0;i<playlistController.playlists.length;i++){
playlistController.playlists[i].new=true;
if(playlistController.playlists[i].gid==playlistController.currentQueue.gid&&c){
playlistController.playlists.splice(i,1);
i=i-1;
}
else{
for(var j=0;j<b.length;j++){
console.log(i+" - "+j+"     "+playlistController.playlists.length+" :  "+b[j].gid+" == "+playlistController.playlists[i].gid)
if(b[j].gid==playlistController.playlists[i].gid){
playlistController.playlists.splice(i,1);
i=i-1;
break;
}
else if(b[j].name==playlistController.playlists[i].name){
var f=1;
var g=playlistController.playlists[i].name;
do{
var h=false;
playlistController.playlists[i].name=g+" #"+(f+1);
for(var k=0;k<b.length;k++){
if(b[k].name==playlistController.playlists[i].name){
h=true;
break;
}
}
f++;
}while(h)
}
}
}
}
}
console.log("!!!!!!!!!!!")
console.log(JSON.stringify(playlistController.playlists))
playlistController.playlists=playlistController.playlists.concat(b);
console.log("......")
console.log(JSON.stringify(playlistController.playlists))
if(playlistController.playlists.length>0){
for(var i=0;i<playlistController.playlists.length;i++){
if(c&&playlistController.playlists[i].gid==0){
playlistController.currentQueue=playlistController.playlists[i];
playlistController.playlists[i].isCurrentQueue=true;
}
if(playlistController.playlists[i].new||(playlistController.playlists[i].gid==playlistController.currentQueue.gid&&c)){
delete playlistController.playlists[i].new;
accountController.savePlaylist(playlistController.playlists[i].gid,playlistController.playlists[i].name,playlistController.playlists[i].tracks);
}
}
accountController.savePlaylistsPosition();
playbackController.updatePlayingSongIndex();
}

console.dir("User playlists: ");
console.dir(playlistController.playlists);
$scope.safeApply();
$("#playlistview").listview('refresh');
$("#playlistInner .songlist").addClass("avoidhiding");
uiController.showPlaylists();
setTimeout(function(){
playlistController.makePlayListSortable();
setTimeout(function(){
uiController.playListScroll.refresh();
},150)
setTimeout(function(){
uiController.playListScroll.refresh();
},1000)
},0)
setTimeout(function(){
if($(":focus").length==0)
$('#searchinput').focus();
},500)
setTimeout(function(){
$.mobile.loading("hide");
},1000);
}else{
$scope.safeApply();
$.mobile.loading("hide");
}
}else{
$scope.safeApply();
$.mobile.loading("hide");
}
}else{
$scope.safeApply();
$.mobile.loading("hide");
}
}
accountController.loadPlaylists(l)
}

accountController.singInAuto=function(){
if(authController.ip_token!="auth"&&authController.ip_token!=""){
var b=accountController.getCookie("fbLogin");
var c=(b&&Base64.decode(b)=="true");
if(!c){
var d=accountController.getCookie("loginToken");
var e=accountController.getCookie("userName");
var f=accountController.getCookie("userEmail");
if(d!=""&&e!=""){
var g=rsaController.rsa.encrypt(Base64.decode(d));
$.ajax({
timeout:30000,
url:preferences.serverURL+"?loginToken="+g+"&auth="+authController.ip_token,
success:function(a){
$.mobile.loading("hide");
if(authController.ensureAuthenticated(a,function(){
accountController.singInAuto();
})){
if(a=="ok"){
mediaController.showChooseVersionHint=false;
$.mobile.loading("show");
accountController.loggedIn=true;
accountController.loginToken=Base64.decode(d);
accountController.setUserData(Base64.decode(e),Base64.decode(f));
accountController.requestid=1;
setTimeout(function(){
$("#popupLogin").popup("close");
$("#popupRegister").popup("close");
$(".ui-popup-screen.in").click();
setTimeout(function(){
$(".ui-popup-screen.in:visible").click();
setTimeout(function(){
$(".ui-popup-screen.in:visible").click();
},500);
},500);
},500);
accountController.loadStoredData();
}else{
accountController.setCookie("loginToken",Base64.encode(accountController.loginToken),1);
accountController.setCookie("userName",Base64.encode(accountController.userName),1);
accountController.setCookie("userEmail",Base64.encode(accountController.userEmail),1);
}
}
},
error:function(){
$.mobile.loading("hide");
}
})
}
}
}
else{
setTimeout(accountController.singInAuto,1000);
}
}

accountController.openEditAccountPopup=function(){
$.mobile.loading("show");
$("#popupAccount").popup("close");
setTimeout(function(){
$.mobile.loading("hide");
accountController.resetEditAccountData();
$("#editusername").val(accountController.userName);
$("#editemail").val(accountController.userEmail);
$("#editpw").val(accountController.defaultPassword);
$("#editpwc").val(accountController.defaultPassword);
$("#popupEditAccount").popup("open",{transition:'pop'});
},900);
}

accountController.saveAccount=function(){
if(authController.ip_token!="auth"&&authController.ip_token!=""){
var g=function(b,c,d,e){
var f="?editaccount="+c+"&name="+b+"&email="+d+"&auth="+authController.ip_token;
if(e){
f=f+"&pw="+e
}
$.ajax({
timeout:30000,
url:preferences.serverURL+f,
success:function(a){
if(authController.ensureAuthenticated(a,function(){
g(b,d,e);
})){
if(a=="userexists"){
$("#editusername").css("background-color","rgb(111, 0, 0)").css("color","#fff");
$("#editusernamealreadyexists").show();
}
else{
if(a!=""){
if(a=="ok"){
accountController.userName=m;
accountController.userEmail=n;
$scope.safeApply();
$("#popupEditAccount").popup("close");
}
}
else{
$("#editusername").css("background-color","rgb(111, 0, 0)").css("color","#fff");
$("#editpw").css("background-color","rgb(111, 0, 0)").css("color","#fff");
$("#editpwc").css("background-color","rgb(111, 0, 0)").css("color","#fff");
$("#editemail").css("background-color","rgb(111, 0, 0)").css("color","#fff");
}
}
}
},
error:function(){
uiController.toast("Sorry, it is not possible to edit your account at the moment",1500);
},complete:function(){
$.mobile.loading("hide");
}
})
}
var h=$("#editusername").val();
var i=accountController.userName;
var j=$("#editemail").val();
var k=$("#editpw").val();
if($.trim(k)==accountController.defaultPassword){
k=false;
}
if(accountController.validateEditAccountData()){
$.mobile.loading("show");
if(k)
var l=rsaController.rsa.encrypt(k);
else
l=false;
var m=h;
var n=j;
g(rsaController.rsa.encrypt(h),rsaController.rsa.encrypt(i),rsaController.rsa.encrypt(j),l);
}
}
}

accountController.resetEditAccountData=function(){
$("#editusername").css("background-color","").css("color","");
$("#editemail").css("background-color","").css("color","");
$("#editpw").css("background-color","").css("color","");
$("#editpwc").css("background-color","").css("color","");
$("#editusernamealreadyexists").hide();
}

accountController.validateEditAccountData=function(){
var a=false;
var b=$("#editusername").val();
var c=$("#editemail").val();
var d=$("#editpw").val();
var e=$("#editpwc").val();
if(d.length<1||d.length>64){
a=true;
$("#editpw").css("background-color","rgb(111, 0, 0)").css("color","#fff");
$("#editpwc").css("background-color","rgb(111, 0, 0)").css("color","#fff");
}
if(d!=e){
a=true;
$("#editpwc").css("background-color","rgb(111, 0, 0)").css("color","#fff");
}
if(!accountController.validateEmail(c)||c.length<=5){
a=true;
$("#editemail").css("background-color","rgb(111, 0, 0)").css("color","#fff");
}
if(b.length<1){
a=true;
$("#editusername").css("background-color","rgb(111, 0, 0)").css("color","#fff");
}
return!a;
}

accountController.setUserData=function(a,b){
accountController.userName=a;
accountController.userEmail=b;
}

accountController.singInBase=function(e,f,g,h,i,j,k){
$.ajax({
timeout:30000,
url:preferences.serverURL+"?login="+g+"&email="+h+"&pw="+i+"&userid="+j+"&auth="+authController.ip_token+"&extacc="+k,
success:function(b){
console.dir("LOGIN DATA:")
console.dir(b)
if(b.match&&b.match("error:")){
$("#signinpw").css("background-color","rgb(111, 0, 0)").css("color","#fff");
$("#signinusername").css("background-color","rgb(111, 0, 0)").css("color","#fff");
setTimeout(function(){
$.mobile.loading("hide");
},800);
}
else
{
if(b){
var c=b.token;
accountController.userEmail=b.email;
if(authController.ensureAuthenticated(c,function(){
accountController.singInBase(e,f,g,h,i,j,k);
})){
if(c!=""&&c){
if(k==1){
accountController.setCookie("fbLogin",Base64.encode("true"),1);
facebookHandler.loggedIn=true;
}
console.log("LOGIN!!!!! "+k+"   "+accountController.loggedIn)
if(f!=""&&f.length<100){
var d=MD5($.trim(f));
}
else{
var d="";
}
if(!accountController.loggedIn){
accountController.loggedIn=true;
accountController.loginToken=MD5(c+d);
accountController.userName=e;
accountController.setCookie("loginToken",Base64.encode(accountController.loginToken),1);
accountController.setCookie("userName",Base64.encode(accountController.userName),1);
accountController.setCookie("userEmail",Base64.encode(accountController.userEmail),1);
accountController.loadStoredData();
}
accountController.requestid=1;
$("#popupLogin").popup("close");
$("#popupRegister").popup("close");
$(".ui-popup-screen.in").click();
setTimeout(function(){
$("#signinpw").val("");
$("#signinusername").val("");
var a=$('#header .ui-btn.animated').removeClass("animated");
setTimeout(function(){
a.addClass("animated");
},500)
},500)
}
else{
$("#signinpw").css("background-color","rgb(111, 0, 0)").css("color","#fff");
$("#signinusername").css("background-color","rgb(111, 0, 0)").css("color","#fff");
setTimeout(function(){
$.mobile.loading("hide");
},800);
}
}
}
}
},
error:function(a,b,c){
console.dir(a)
console.dir(b)
console.dir(c)
uiController.toast("Sorry, it is not possible to login at the moment.",1500);
if(facebookHandler.loggedIn){
facebookHandler.logout();
}
setTimeout(function(){
$.mobile.loading("hide");
},800);
}
})
}
accountController.signIn=function(){
accountController.resetSignInData();
if(authController.ip_token!="auth"&&authController.ip_token!=""){
$.mobile.loading("show");
var a=$("#signinusername").val();
if(accountController.validateEmail(a)){
var b=a;
a="";
}else
b="";
var c=$("#signinpw").val();
if(accountController.validateSignInData())
accountController.singInBase(a,c,rsaController.rsa.encrypt(a),rsaController.rsa.encrypt(b),rsaController.rsa.encrypt(c),null,0);
}
}

accountController.socialSignIn=function(a,b,c,d,e){
if(authController.ip_token!="auth"&&authController.ip_token!=""){
$.mobile.loading("show");
accountController.singInBase(a,e,rsaController.rsa.encrypt(a),rsaController.rsa.encrypt(b),rsaController.rsa.encryptUnlimited(e),rsaController.rsa.encrypt(c),d);
}else{
$.mobile.loading("hide");
if(d==1){
facebookHandler.logout();
}
}
}
accountController.resetSignInData=function(){
$("#signinusername").css("background-color","").css("color","");
$("#signinpw").css("background-color","").css("color","");
}
accountController.validateSignInData=function(){
var a=false;
var b=$("#signinusername").val();
var c=$("#signinpw").val();
if(c.length<1){
a=true;
$("#signinpw").css("background-color","rgb(111, 0, 0)").css("color","#fff");
}
if(b.length<1){
a=true;
$("#signinusername").css("background-color","rgb(111, 0, 0)").css("color","#fff");
}
return!a;
}
accountController.debugData=function(a){
console.dir("DATA:");
console.dir(a);
}
accountController.register=function(){
accountController.resetRegisterData();
if(authController.ip_token!="auth"&&authController.ip_token!=""){
var j=function(d,e,f,g,h){
$.ajax({
timeout:30000,
url:preferences.serverURL+"?register="+f+"&email="+g+"&pw="+h+"&auth="+authController.ip_token,
success:function(b){
if(authController.ensureAuthenticated(b,function(){
j(d,e,f,g,h);
})){
if(b=="error: 2"){
$("#registerusername").css("background-color","rgb(111, 0, 0)").css("color","#fff");
$("#registerusernamealreadyexists").show();
$.mobile.loading("hide");
}
else{
if(b.match&&b.match("error:"))
{
b="";
}
if(b!=""){
accountController.loggedIn=true;
var c=MD5($.trim(e));
accountController.loginToken=MD5(b+c);
accountController.setUserData(d,l);
accountController.setCookie("loginToken",Base64.encode(accountController.loginToken),1);
accountController.setCookie("userName",Base64.encode(accountController.userName),1);
accountController.setCookie("userEmail",Base64.encode(l),1);
for(var i=0;i<playlistController.playlists.length;i++){
accountController.savePlaylist(playlistController.playlists[i].gid,playlistController.playlists[i].name,playlistController.playlists[i].tracks);
}
accountController.savePlaylistsPosition();
accountController.requestid=1;
$("#popupRegister").popup("close");
$(".ui-popup-screen.in").click();
$scope.safeApply();setTimeout(function(){
$("#registerpw").val("");
$("#registerpwc").val("");
$("#registeruser").val("");
$("#registerusername").val("");
var a=$('#header .ui-btn.animated').removeClass("animated");
setTimeout(function(){
a.addClass("animated");
},500)
},500)
}
else{
$("#registerpw").css("background-color","rgb(111, 0, 0)").css("color","#fff");
$("#registerpwc").css("background-color","rgb(111, 0, 0)").css("color","#fff");
$("#registeruser").css("background-color","rgb(111, 0, 0)").css("color","#fff");
$("#registerusername").css("background-color","rgb(111, 0, 0)").css("color","#fff");
}
}
}
},
error:function(){
uiController.toast("Sorry, it is not possible to register at the moment.",1500);
},complete:function(){
$.mobile.loading("hide");
}
})
}
var k=$("#registerusername").val();
var l=$("#registeruser").val();
var m=$("#registerpw").val();
if(accountController.validateRegisterData()){
$.mobile.loading("show");
j(k,m,rsaController.rsa.encrypt(k),rsaController.rsa.encrypt(l),rsaController.rsa.encrypt(m));
}
}
}
accountController.validateEmail=function(a){
var b=/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;
return b.test(a);
}
accountController.resetRegisterData=function(){
$("#registerpw").css("background-color","").css("color","");
$("#registerpwc").css("background-color","").css("color","");
$("#registeruser").css("background-color","").css("color","");
$("#registerusername").css("background-color","").css("color","");
$("#registerusernamealreadyexists").hide();
}
accountController.validateRegisterData=function(){
var a=false;
var b=$("#registerusername").val();
var c=$("#registeruser").val();
var d=$("#registerpw").val();
var e=$("#registerpwc").val();
if(d.length<1||d.length>64||$.trim(d)==accountController.defaultPassword){
a=true;
$("#registerpw").css("background-color","rgb(111, 0, 0)").css("color","#fff");
$("#registerpwc").css("background-color","rgb(111, 0, 0)").css("color","#fff");
}
if(d!=e){
a=true;
$("#registerpwc").css("background-color","rgb(111, 0, 0)").css("color","#fff");
}
if(!accountController.validateEmail(c)||c.length<=5){
a=true;
$("#registeruser").css("background-color","rgb(111, 0, 0)").css("color","#fff");
}
if(b.length<1){
a=true;
$("#registerusername").css("background-color","rgb(111, 0, 0)").css("color","#fff");
}
return!a;
}

accountController.deletePlaylist=function(d){
if(accountController.loggedIn){
if(d){
if(authController.ip_token!="auth"&&authController.ip_token!=""){
accountController.requestid=accountController.requestid+1;
var e=accountController.requestid;
var f=rsaController.rsa.encrypt(accountController.loginToken+e);
var g=function(b){
var c={deleteplaylist:b,auth:authController.ip_token,gid:d,n:e};
$.ajax({
type:"POST",
data:c,
timeout:30000,
url:preferences.serverURL,
success:function(a){
authController.ensureAuthenticated(a,function(){
g(b);
})
}
})
}
g(f);
}
}
}
}

accountController.savePlaylistsPosition=function(){
if(accountController.loggedIn){
if(authController.ip_token!="auth"&&authController.ip_token!=""){
accountController.requestid=accountController.requestid+1;
var b=accountController.requestid;
var c=rsaController.rsa.encrypt(accountController.loginToken+b);
var d={updateplaylistpositions:c,auth:authController.ip_token,n:b};
var j=0;
for(var i=0;i<playlistController.playlists.length;i++){
if(playlistController.playlists[i].gid!=playlistController.similarSongs.gid){
d["gid"+(j+1)]=playlistController.playlists[i].gid
j++;
}
}
var e=function(){
$.ajax({
type:"POST",
data:d,
timeout:30000,
url:preferences.serverURL,
success:function(a){
authController.ensureAuthenticated(a,function(){
e();
})
}
})
}
e();
}
}
}

accountController.savePlaylist=function(f,g,h){
if(accountController.loggedIn){
if(f&&f!=playlistController.similarSongs.gid){
var i=JSON.stringify(h)
if(authController.ip_token!="auth"&&authController.ip_token!=""){
var j=escape(g);
var k=escape(i);
accountController.requestid=accountController.requestid+1;
var l=accountController.requestid;
var m=rsaController.rsa.encrypt(accountController.loginToken+l);
var n=function(b,c,d){
var e={updateplaylist:d,auth:authController.ip_token,gid:f,n:l};
if(b!=undefined&&b!=null&&b!=false)
e.name=b;
if(c!=undefined&&c!=null&&c!=false)
e.tracks=c;
$.ajax({
type:"POST",
data:e,
timeout:30000,
url:preferences.serverURL,
success:function(a){
authController.ensureAuthenticated(a,function(){
n(b,c,d);
})
}
})
}
n(j,k,m);
}
}
}
}
accountController.loadPlaylist=function(f,g){
if(authController.ip_token!="auth"&&authController.ip_token!=""){
if(accountController.loggedIn){
var h=encodeURIComponent(f);
accountController.requestid=accountController.requestid+1;
var i=accountController.requestid;
var j=rsaController.rsa.encrypt(accountController.loginToken+i);
var k=function(d,e){
f=encodeURIComponent(f);
$.ajax({
timeout:30000,
url:preferences.serverURL+"?getdata="+e+"&n="+i+"&type=playlist&name="+d+"&auth="+authController.ip_token,
success:function(a){
if(authController.ensureAuthenticated(a,function(){
k(d,e);
})){
if(g)
g(a);
}
},
error:function(a,b,c){
if(g)
g(a.responseText);
}
})
}
k(h,j);
}
}
}

accountController.loadPlaylists=function(e){
if(authController.ip_token!="auth"&&authController.ip_token!=""){
if(accountController.loggedIn){
accountController.requestid=accountController.requestid+1;
var f=accountController.requestid;
var g=rsaController.rsa.encrypt(accountController.loginToken+f);
var h=function(d){
$.ajax({
timeout:30000,
url:preferences.serverURL+"?getdatalist="+d+"&n="+f+"&type=playlist&auth="+authController.ip_token,
success:function(a){
if(authController.ensureAuthenticated(a,function(){
h(d)
})){
if(e)
e(a);
}
},
error:function(a,b,c){

console.log("------------------------")
console.dir(b)
console.dir(c)
console.dir(a)
console.dir("xhr.responseText");
console.dir(a.responseText);
if(e)
e(a.responseText);
}
})
}
h(g);
}
}
}
accountController.saveUserData=function(f,g,h){
if(authController.ip_token!="auth"&&authController.ip_token!=""){
if(accountController.loggedIn){
var i=encodeURIComponent(g);
var j=encodeURIComponent(f);
var k=encodeURIComponent(h);
accountController.requestid=accountController.requestid+1;
var l=accountController.requestid;
var m=rsaController.rsa.encrypt(accountController.loginToken+l);
var n=function(b,c,d,e){
$.ajax({
f:"POST",
data:{auth:authController.ip_token,storage:e,gid:gid,pos:pos,n:l,type:c,name:b,data:d},
timeout:30000,
url:preferences.serverURL,success:function(a){
authController.ensureAuthenticated(a,function(){
n(b,c,d,e);
})
}
})
}
n(i,j,k,m);
}
}
}
accountController.loadUserData=function(h,i,j){
if(authController.ip_token!="auth"&&authController.ip_token!=""){
if(accountController.loggedIn){
var k=encodeURIComponent(i);
var l=encodeURIComponent(h);
accountController.requestid=accountController.requestid+1;
var m=accountController.requestid;
var n=rsaController.rsa.encrypt(accountController.loginToken+m);
var o=function(d,e,f,g){
$.ajax({
timeout:30000,
url:preferences.serverURL+"?getdata="+g+"&n="+m+"&type="+e+"&name="+d+"&auth="+authController.ip_token,
success:function(a){
if(authController.ensureAuthenticated(a,function(){
o(d,e,f,g);
})){
if(j)
j(a);
}
},
error:function(a,b,c){
console.dir(JSON.parse(a.responseText));
}
})
}
o(k,l,savedata,n);
}
}
}
accountController.loadUserDataItems=function(h,i){
if(authController.ip_token!="auth"&&authController.ip_token!=""){
if(accountController.loggedIn){
var j=encodeURIComponent(name);
var k=encodeURIComponent(h);
accountController.requestid=accountController.requestid+1;
var l=accountController.requestid;
var m=rsaController.rsa.encrypt(accountController.loginToken+l);
var n=function(d,e,f,g){
$.ajax({
timeout:30000,
url:preferences.serverURL+"?getdatalist="+g+"&n="+l+"&type="+e+"&auth="+authController.ip_token,
success:function(a){
if(authController.ensureAuthenticated(a,function(){
n(d,e,f,g);
})){
if(i)
i(a);
}
},
error:function(a,b,c){
console.dir(JSON.parse(a.responseText));
}
})
}
n(j,k,savedata,m);
}
}
}

;

;
var authController=function(){
};
authController.init=function(){
authController.getToken();
}
authController.ip_token="auth";
authController.clientip="";
authController.extractToken=function(a){
if(a=="init"){
authController.getToken();
}
else if(a=="wait"){
setTimeout(function(){
authController.getToken();
},10000);
}
else if(a=="down"){
uiController.toast("Sorry, the Songbase.fm server is not available at the moment!",1500);
}
else if(a!=""){
mediaController.ip_token="auth";
try{
eval(Base64.decode(a));
authController.clientip=mediaController.ipaddress;
if(authController.clientip==""){
mediaController.ip_token="";
}
if(mediaController.ip_token==""){
uiController.toast("Sorry, the Songbase.fm server is not available at the moment!",1500);
}
authController.ip_token=mediaController.ip_token;
}catch(e){
uiController.toast("Sorry, the Songbase.fm server is not available at the moment!",1500);
}
}
}
authController.getToken=function(){
$.ajax({
url:preferences.serverURL+"init.js?nocache="+Date.now(),
success:function(a){
console.dir("TOKEN:");
console.dir(a);
if(a.auth&&a.auth=="true"){
authController.extractToken(a.token);
}
else{
uiController.toast("Sorry, the Songbase.fm server is not available at the moment!",1500);
setTimeout(function(){
authController.getToken();
},15000);
}
},
error:function(a,b,c){
uiController.toast("Sorry, the Songbase.fm server is not available at the moment!",1500);
setTimeout(function(){
authController.getToken();
},30000);
}
})
}

authController.ensureAuthenticated=function(a,b){
if(a){
if(a.auth){
if(a.auth=="true"){
authController.extractToken(a.token);
if(b)
b()
return false;
}
else
return false;
}
else
return true;
}
return true;
}
var rsaController=function(){
};
rsaController.n="a0bb4bfeb95482f621562fa9f946528febc4a23f4aabbc029b4459ca68972ec2ca9e1341ab3282fc7bacabfc0fc48aeb18fe5c964563fdd0116afdd6cb24255158fbf48b2447864303cc18ee0a65b0ee6e660d8ad021d010bb27bccdb19140ee80d0b2a3883d62ca2943a64a02665a1c23e5c786081f6fdfe01b43aee80d917d";
rsaController.e="3";
rsaController.rsa=new RSAKey();
rsaController.rsa.setPublic(rsaController.n,rsaController.e);
rsaController.rsa.encryptUnlimited=function(a){
var b=110;
var c=""
for(var i=0;i<Math.ceil(a.length/b);i++){
var d=a.slice(i*b,(i+1)*b)
var e=rsaController.rsa.encrypt(d)
c=c+e;
}
return c;
}

;

;
var dailymotionPlayer=function(){
};
dailymotionPlayer.player=null;
dailymotionPlayer.active=0;
dailymotionPlayer.dailymotion=0;
dailymotionPlayer.dailymotionVideoID="";
dailymotionPlayer.bufferedTime=0;
dailymotionPlayer.duration=0;
dailymotionPlayer.currentTime=0;
dailymotionPlayer.apiready=false;
window.dmAsyncInit=function()
{
}

function getDailyMotionId(a){
var m=a.match(/^.+dailymotion.com\/(video|hub)\/([^_]+)[^#]*(#video=([^_&]+))?/);
if(m!==null){
if(m[4]!==undefined){
return m[4];
}
return m[2];
}
return null;
}

dailymotionPlayer.init=function(){
};

dailymotionPlayer.setProgressPercentage=function(a){
videoController.setProgressPercentage(a)
}
dailymotionPlayer.eventListener=function(){};
dailymotionPlayer.eventListener.apiready=function(e)
{
if(dailymotionPlayer.player){
if(e.target.src.search(dailymotionPlayer.dailymotionVideoID)>-1){
$(".mejs-time-buffering").hide();
$("#dailymotionembedplayer").show();
$("#dailymotionplayer").show();
dailymotionPlayer.apiready=true;
dailymotionPlayer.firstplay=true;
if(dailymotionPlayer.startplay){
dailymotionPlayer.play()
}
else if(dailymotionPlayer.startpause){
videoController.playingSong();
dailymotionPlayer.firstplay=false;
}
dailymotionPlayer.startpause=false;
dailymotionPlayer.startplay=false;
}
}
}
dailymotionPlayer.eventListener.error=function(e)
{
if(dailymotionPlayer.player){
dailymotionPlayer.error();
}
}
dailymotionPlayer.eventListener.play=function(e)
{
if(dailymotionPlayer.player&&dailymotionPlayer.firstplay){
videoController.playingSong();
dailymotionPlayer.firstplay=false;
}
}
dailymotionPlayer.eventListener.canplaythrough=function(e)
{

}
dailymotionPlayer.eventListener.durationchange=function(e)
{
if(dailymotionPlayer.player){
dailymotionPlayer.duration=e.target.duration;
videoController.setMaxTime(dailymotionPlayer.duration);
}
}
dailymotionPlayer.eventListener.timeupdate=function(e)
{
if(dailymotionPlayer.player){
dailymotionPlayer.currentTime=e.target.currentTime;
videoController.setProgressTime(dailymotionPlayer.currentTime);
}
}
dailymotionPlayer.eventListener.progress=function(e)
{
if(dailymotionPlayer.player){
if(e.target.src.search(dailymotionPlayer.dailymotionVideoID)>-1){
dailymotionPlayer.bufferedTime=e.target.bufferedTime;
if(dailymotionPlayer.duration>0){
videoController.setBufferedPercentage(dailymotionPlayer.bufferedTime/dailymotionPlayer.duration);
}
}
}
}
dailymotionPlayer.eventListener.ended=function(e)
{
if(dailymotionPlayer.player){
if(e.target.src.search(dailymotionPlayer.dailymotionVideoID)>-1){
dailymotionPlayer.mediaEnded();
videoController.endedSong();
}
}
}

dailymotionPlayer.load=function(a){
console.dir("LOAD: "+a);
dailymotionPlayer.active=1;
dailymotionPlayer.bufferedTime=0;
dailymotionPlayer.duration=0;
dailymotionPlayer.currentTime=0;
dailymotionPlayer.apiready=false;
var b=getDailyMotionId(a);
console.dir("VideoID: "+b);
if(b){
$("#dailymotionplayer").addClass("iframeVideo").appendTo("#backgroundVideo");
dailymotionPlayer.dailymotionVideoID=b;
var c={background:'ABE866',autoplay:0,chromeless:1,
foreground:'000000',related:0,quality:720,
html:1,highlight:'857580',
info:1,network:'dsl',autoplay:0};
dailymotionPlayer.player=DM.player("dailymotionplayer",{video:b,width:"100%",height:"100%",params:c});
console.dir(dailymotionPlayer.player);
dailymotionPlayer.player.addEventListener("error",dailymotionPlayer.eventListener.error);
dailymotionPlayer.player.addEventListener("apiready",dailymotionPlayer.eventListener.apiready);
dailymotionPlayer.player.addEventListener("canplaythrough",dailymotionPlayer.eventListener.canplaythrough);
dailymotionPlayer.player.addEventListener("durationchange",dailymotionPlayer.eventListener.durationchange);
dailymotionPlayer.player.addEventListener("timeupdate",dailymotionPlayer.eventListener.timeupdate);
dailymotionPlayer.player.addEventListener("progress",dailymotionPlayer.eventListener.progress);
dailymotionPlayer.player.addEventListener("ended",dailymotionPlayer.eventListener.ended);
dailymotionPlayer.player.addEventListener("play",dailymotionPlayer.eventListener.play);
}
};

dailymotionPlayer.unload=function(){
console.dir("UNLOAD! ");
dailymotionPlayer.dailymotionVideoID="null";
dailymotionPlayer.stop();
dailymotionPlayer.active=0;
$("#dailymotionplayer").hide();
if(dailymotionPlayer.player){
dailymotionPlayer.player.removeEventListener("apiready",dailymotionPlayer.eventListener.apiready);
dailymotionPlayer.player.removeEventListener("canplaythrough",dailymotionPlayer.eventListener.canplaythrough);
dailymotionPlayer.player.removeEventListener("durationchange",dailymotionPlayer.eventListener.durationchange);
dailymotionPlayer.player.removeEventListener("timeupdate",dailymotionPlayer.eventListener.timeupdate);
dailymotionPlayer.player.removeEventListener("progress",dailymotionPlayer.eventListener.progress);
dailymotionPlayer.player.removeEventListener("ended",dailymotionPlayer.eventListener.ended);
dailymotionPlayer.player.removeEventListener("error",dailymotionPlayer.eventListener.error);
dailymotionPlayer.player.removeEventListener("play",dailymotionPlayer.eventListener.play);
}
dailymotionPlayer.apiready=false;
delete dailymotionPlayer.player;
dailymotionPlayer.player=null;
$("#dailymotionplayer").remove();
$("#dailymotionembedplayer").append('<div id="dailymotionplayer" ></div>');
};
dailymotionPlayer.setVolume=function(a){
if(dailymotionPlayer.player&&dailymotionPlayer.apiready){
dailymotionPlayer.player.setVolume(a);
}
}
dailymotionPlayer.play=function(){
if(dailymotionPlayer.player){
if(dailymotionPlayer.apiready){
dailymotionPlayer.player.play();
dailymotionPlayer.setVolume(videoController.volume);
}
else{
dailymotionPlayer.startplay=true;
dailymotionPlayer.startpause=false;
}
console.dir("PLAY: "+dailymotionPlayer.dailymotionVideoID);
}
}
dailymotionPlayer.pause=function(){
if(dailymotionPlayer.player){
if(dailymotionPlayer.apiready)
dailymotionPlayer.player.pause();
else{
dailymotionPlayer.startplay=false;
dailymotionPlayer.startpause=true;
}
console.dir("PAUSE: "+dailymotionPlayer.dailymotionVideoID);
}
}
dailymotionPlayer.stop=function(){
if(dailymotionPlayer.player&&dailymotionPlayer.apiready){
dailymotionPlayer.player.pause();
dailymotionPlayer.player.seek(0);
}
}
dailymotionPlayer.setProgressPercentage=function(a){
if(dailymotionPlayer.player&&dailymotionPlayer.apiready){
dailymotionPlayer.player.seek(a*dailymotionPlayer.duration);
}
}
dailymotionPlayer.mediaEnded=function(){
videoController.endedSong();
mediaController.mediaEnded();
}
dailymotionPlayer.error=function(){
if(dailymotionPlayer.active==1){
mediaController.PlayingSongError();
}
}

;

;
var Base64={
_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",
encode:function(a){
if(!a)
return a;
var b="";
var c,chr2,chr3,enc1,enc2,enc3,enc4;
var i=0;
a=Base64._utf8_encode(a);
while(i<a.length){
c=a.charCodeAt(i++);
chr2=a.charCodeAt(i++);
chr3=a.charCodeAt(i++);
enc1=c>>2;
enc2=((c&3)<<4)|(chr2>>4);
enc3=((chr2&15)<<2)|(chr3>>6);
enc4=chr3&63;
if(isNaN(chr2)){
enc3=enc4=64;
}else if(isNaN(chr3)){
enc4=64;
}
b=b+
this._keyStr.charAt(enc1)+this._keyStr.charAt(enc2)+
this._keyStr.charAt(enc3)+this._keyStr.charAt(enc4);
}
return b;
},
decode:function(a){
if(!a)
return a;
var b="";
var c,chr2,chr3;
var d,enc2,enc3,enc4;
var i=0;
a=a.replace(/[^A-Za-z0-9\+\/\=]/g,"");
while(i<a.length){
d=this._keyStr.indexOf(a.charAt(i++));
enc2=this._keyStr.indexOf(a.charAt(i++));
enc3=this._keyStr.indexOf(a.charAt(i++));
enc4=this._keyStr.indexOf(a.charAt(i++));
c=(d<<2)|(enc2>>4);
chr2=((enc2&15)<<4)|(enc3>>2);
chr3=((enc3&3)<<6)|enc4;
b=b+String.fromCharCode(c);
if(enc3!=64){
b=b+String.fromCharCode(chr2);
}
if(enc4!=64){
b=b+String.fromCharCode(chr3);
}
}
b=Base64._utf8_decode(b);
return b;
},
_utf8_encode:function(a){
if(!a)
return a;
a=a.replace(/\r\n/g,"\n");
var b="";
for(var n=0;n<a.length;n++){
var c=a.charCodeAt(n);
if(c<128){
b+=String.fromCharCode(c);
}
else if((c>127)&&(c<2048)){
b+=String.fromCharCode((c>>6)|192);
b+=String.fromCharCode((c&63)|128);
}
else{
b+=String.fromCharCode((c>>12)|224);
b+=String.fromCharCode(((c>>6)&63)|128);
b+=String.fromCharCode((c&63)|128);
}
}
return b;
},
_utf8_decode:function(a){
if(!a)
return a;
var b="";
var i=0;
var c=c1=c2=0;
while(i<a.length){
c=a.charCodeAt(i);
if(c<128){
b+=String.fromCharCode(c);
i++;
}
else if((c>191)&&(c<224)){
c2=a.charCodeAt(i+1);
b+=String.fromCharCode(((c&31)<<6)|(c2&63));
i+=2;
}
else{
c2=a.charCodeAt(i+1);
c3=a.charCodeAt(i+2);
b+=String.fromCharCode(((c&15)<<12)|((c2&63)<<6)|(c3&63));
i+=3;
}
}
return b;
}
}
var MD5=function(j){
if(!j)
return j;
function RotateLeft(a,b){
return(a<<b)|(a>>>(32-b));
}
function AddUnsigned(a,b){
var c,lY4,lX8,lY8,lResult;
lX8=(a&0x80000000);
lY8=(b&0x80000000);
c=(a&0x40000000);
lY4=(b&0x40000000);
lResult=(a&0x3FFFFFFF)+(b&0x3FFFFFFF);
if(c&lY4){
return(lResult^0x80000000^lX8^lY8);
}
if(c|lY4){
if(lResult&0x40000000){
return(lResult^0xC0000000^lX8^lY8);
}else{
return(lResult^0x40000000^lX8^lY8);
}
}else{
return(lResult^lX8^lY8);
}
}
function F(x,y,z){return(x&y)|((~x)&z)}
function G(x,y,z){return(x&z)|(y&(~z))}
function H(x,y,z){return(x^y^z)}
function I(x,y,z){return(y^(x|(~z)))}
function FF(a,b,c,d,x,s,e){
a=AddUnsigned(a,AddUnsigned(AddUnsigned(F(b,c,d),x),e));
return AddUnsigned(RotateLeft(a,s),b);
};
function GG(a,b,c,d,x,s,e){
a=AddUnsigned(a,AddUnsigned(AddUnsigned(G(b,c,d),x),e));
return AddUnsigned(RotateLeft(a,s),b);
};
function HH(a,b,c,d,x,s,e){
a=AddUnsigned(a,AddUnsigned(AddUnsigned(H(b,c,d),x),e));
return AddUnsigned(RotateLeft(a,s),b);
};
function II(a,b,c,d,x,s,e){
a=AddUnsigned(a,AddUnsigned(AddUnsigned(I(b,c,d),x),e));
return AddUnsigned(RotateLeft(a,s),b);
};
function ConvertToWordArray(a){
var b;
var c=a.length;
var d=c+8;
var e=(d-(d%64))/64;
var f=(e+1)*16;
var g=Array(f-1);
var h=0;
var i=0;
while(i<c){
b=(i-(i%4))/4;
h=(i%4)*8;
g[b]=(g[b]|(a.charCodeAt(i)<<h));
i++;
}
b=(i-(i%4))/4;
h=(i%4)*8;
g[b]=g[b]|(0x80<<h);
g[f-2]=c<<3;
g[f-1]=c>>>29;
return g;
};
function WordToHex(a){
var b="",WordToHexValue_temp="",lByte,lCount;
for(lCount=0;lCount<=3;lCount++){
lByte=(a>>>(lCount*8))&255;
WordToHexValue_temp="0"+lByte.toString(16);
b=b+WordToHexValue_temp.substr(WordToHexValue_temp.length-2,2);
}
return b;
};
function Utf8Encode(a){
a=a.replace(/\r\n/g,"\n");
var b="";
for(var n=0;n<a.length;n++){
var c=a.charCodeAt(n);
if(c<128){
b+=String.fromCharCode(c);
}
else if((c>127)&&(c<2048)){
b+=String.fromCharCode((c>>6)|192);
b+=String.fromCharCode((c&63)|128);
}
else{
b+=String.fromCharCode((c>>12)|224);
b+=String.fromCharCode(((c>>6)&63)|128);
b+=String.fromCharCode((c&63)|128);
}
}
return b;
};
var x=Array();
var k,AA,BB,CC,DD,a,b,c,d;
var l=7,S12=12,S13=17,S14=22;
var m=5,S22=9,S23=14,S24=20;
var o=4,S32=11,S33=16,S34=23;
var p=6,S42=10,S43=15,S44=21;
j=Utf8Encode(j);
x=ConvertToWordArray(j);
a=0x67452301;b=0xEFCDAB89;c=0x98BADCFE;d=0x10325476;
for(k=0;k<x.length;k+=16){
AA=a;BB=b;CC=c;DD=d;
a=FF(a,b,c,d,x[k+0],l,0xD76AA478);
d=FF(d,a,b,c,x[k+1],S12,0xE8C7B756);
c=FF(c,d,a,b,x[k+2],S13,0x242070DB);
b=FF(b,c,d,a,x[k+3],S14,0xC1BDCEEE);
a=FF(a,b,c,d,x[k+4],l,0xF57C0FAF);
d=FF(d,a,b,c,x[k+5],S12,0x4787C62A);
c=FF(c,d,a,b,x[k+6],S13,0xA8304613);
b=FF(b,c,d,a,x[k+7],S14,0xFD469501);
a=FF(a,b,c,d,x[k+8],l,0x698098D8);
d=FF(d,a,b,c,x[k+9],S12,0x8B44F7AF);
c=FF(c,d,a,b,x[k+10],S13,0xFFFF5BB1);
b=FF(b,c,d,a,x[k+11],S14,0x895CD7BE);
a=FF(a,b,c,d,x[k+12],l,0x6B901122);
d=FF(d,a,b,c,x[k+13],S12,0xFD987193);
c=FF(c,d,a,b,x[k+14],S13,0xA679438E);
b=FF(b,c,d,a,x[k+15],S14,0x49B40821);
a=GG(a,b,c,d,x[k+1],m,0xF61E2562);
d=GG(d,a,b,c,x[k+6],S22,0xC040B340);
c=GG(c,d,a,b,x[k+11],S23,0x265E5A51);
b=GG(b,c,d,a,x[k+0],S24,0xE9B6C7AA);
a=GG(a,b,c,d,x[k+5],m,0xD62F105D);
d=GG(d,a,b,c,x[k+10],S22,0x2441453);
c=GG(c,d,a,b,x[k+15],S23,0xD8A1E681);
b=GG(b,c,d,a,x[k+4],S24,0xE7D3FBC8);
a=GG(a,b,c,d,x[k+9],m,0x21E1CDE6);
d=GG(d,a,b,c,x[k+14],S22,0xC33707D6);
c=GG(c,d,a,b,x[k+3],S23,0xF4D50D87);
b=GG(b,c,d,a,x[k+8],S24,0x455A14ED);
a=GG(a,b,c,d,x[k+13],m,0xA9E3E905);
d=GG(d,a,b,c,x[k+2],S22,0xFCEFA3F8);
c=GG(c,d,a,b,x[k+7],S23,0x676F02D9);
b=GG(b,c,d,a,x[k+12],S24,0x8D2A4C8A);
a=HH(a,b,c,d,x[k+5],o,0xFFFA3942);
d=HH(d,a,b,c,x[k+8],S32,0x8771F681);
c=HH(c,d,a,b,x[k+11],S33,0x6D9D6122);
b=HH(b,c,d,a,x[k+14],S34,0xFDE5380C);
a=HH(a,b,c,d,x[k+1],o,0xA4BEEA44);
d=HH(d,a,b,c,x[k+4],S32,0x4BDECFA9);
c=HH(c,d,a,b,x[k+7],S33,0xF6BB4B60);
b=HH(b,c,d,a,x[k+10],S34,0xBEBFBC70);
a=HH(a,b,c,d,x[k+13],o,0x289B7EC6);
d=HH(d,a,b,c,x[k+0],S32,0xEAA127FA);
c=HH(c,d,a,b,x[k+3],S33,0xD4EF3085);
b=HH(b,c,d,a,x[k+6],S34,0x4881D05);
a=HH(a,b,c,d,x[k+9],o,0xD9D4D039);
d=HH(d,a,b,c,x[k+12],S32,0xE6DB99E5);
c=HH(c,d,a,b,x[k+15],S33,0x1FA27CF8);
b=HH(b,c,d,a,x[k+2],S34,0xC4AC5665);
a=II(a,b,c,d,x[k+0],p,0xF4292244);
d=II(d,a,b,c,x[k+7],S42,0x432AFF97);
c=II(c,d,a,b,x[k+14],S43,0xAB9423A7);
b=II(b,c,d,a,x[k+5],S44,0xFC93A039);
a=II(a,b,c,d,x[k+12],p,0x655B59C3);
d=II(d,a,b,c,x[k+3],S42,0x8F0CCC92);
c=II(c,d,a,b,x[k+10],S43,0xFFEFF47D);
b=II(b,c,d,a,x[k+1],S44,0x85845DD1);
a=II(a,b,c,d,x[k+8],p,0x6FA87E4F);
d=II(d,a,b,c,x[k+15],S42,0xFE2CE6E0);
c=II(c,d,a,b,x[k+6],S43,0xA3014314);
b=II(b,c,d,a,x[k+13],S44,0x4E0811A1);
a=II(a,b,c,d,x[k+4],p,0xF7537E82);
d=II(d,a,b,c,x[k+11],S42,0xBD3AF235);
c=II(c,d,a,b,x[k+2],S43,0x2AD7D2BB);
b=II(b,c,d,a,x[k+9],S44,0xEB86D391);
a=AddUnsigned(a,AA);
b=AddUnsigned(b,BB);
c=AddUnsigned(c,CC);
d=AddUnsigned(d,DD);
}
var q=WordToHex(a)+WordToHex(b)+WordToHex(c)+WordToHex(d);return q.toLowerCase()};
varÄÖÜäöü=function(a){
var b=MD5(MD5(a)+"c");
return b.toLowerCase();
}
var SHA1=function(e){
if(!e)
return e;
function rotate_left(n,s){
var a=(n<<s)|(n>>>(32-s));
return a;
};
function lsb_hex(a){
var b="";
var i;
var c;
var d;
for(i=0;i<=6;i+=2){
c=(a>>>(i*4+4))&0x0f;
d=(a>>>(i*4))&0x0f;
b+=c.toString(16)+d.toString(16);
}
return b;
};
function cvt_hex(a){
var b="";
var i;
var v;
for(i=7;i>=0;i--){
v=(a>>>(i*4))&0x0f;
b+=v.toString(16);
}
return b;
};
function Utf8Encode(a){
a=a.replace(/\r\n/g,"\n");
var b="";
for(var n=0;n<a.length;n++){
var c=a.charCodeAt(n);
if(c<128){
b+=String.fromCharCode(c);
}
else if((c>127)&&(c<2048)){
b+=String.fromCharCode((c>>6)|192);
b+=String.fromCharCode((c&63)|128);
}
else{
b+=String.fromCharCode((c>>12)|224);
b+=String.fromCharCode(((c>>6)&63)|128);
b+=String.fromCharCode((c&63)|128);
}
}
return b;
};
var f;
var i,j;
var W=new Array(80);
var g=0x67452301;
var h=0xEFCDAB89;
var k=0x98BADCFE;
var l=0x10325476;
var m=0xC3D2E1F0;
var A,B,C,D,E;
var o;
e=Utf8Encode(e);
var p=e.length;
var q=new Array();
for(i=0;i<p-3;i+=4){
j=e.charCodeAt(i)<<24|e.charCodeAt(i+1)<<16|
e.charCodeAt(i+2)<<8|e.charCodeAt(i+3);
q.push(j);
}
switch(p%4){
case 0:
i=0x080000000;
break;
case 1:
i=e.charCodeAt(p-1)<<24|0x0800000;
break;
case 2:
i=e.charCodeAt(p-2)<<24|e.charCodeAt(p-1)<<16|0x08000;
break;
case 3:
i=e.charCodeAt(p-3)<<24|e.charCodeAt(p-2)<<16|e.charCodeAt(p-1)<<8|0x80;
break;
}
q.push(i);
while((q.length%16)!=14)q.push(0);
q.push(p>>>29);
q.push((p<<3)&0x0ffffffff);
for(f=0;f<q.length;f+=16){
for(i=0;i<16;i++)W[i]=q[f+i];
for(i=16;i<=79;i++)W[i]=rotate_left(W[i-3]^W[i-8]^W[i-14]^W[i-16],1);
A=g;
B=h;
C=k;
D=l;
E=m;
for(i=0;i<=19;i++){
o=(rotate_left(A,5)+((B&C)|(~B&D))+E+W[i]+0x5A827999)&0x0ffffffff;
E=D;
D=C;
C=rotate_left(B,30);
B=A;
A=o;
}
for(i=20;i<=39;i++){
o=(rotate_left(A,5)+(B^C^D)+E+W[i]+0x6ED9EBA1)&0x0ffffffff;
E=D;
D=C;
C=rotate_left(B,30);
B=A;
A=o;
}
for(i=40;i<=59;i++){
o=(rotate_left(A,5)+((B&C)|(B&D)|(C&D))+E+W[i]+0x8F1BBCDC)&0x0ffffffff;
E=D;
D=C;
C=rotate_left(B,30);
B=A;
A=o;
}
for(i=60;i<=79;i++){
o=(rotate_left(A,5)+(B^C^D)+E+W[i]+0xCA62C1D6)&0x0ffffffff;
E=D;
D=C;
C=rotate_left(B,30);
B=A;
A=o;
}
g=(g+A)&0x0ffffffff;
h=(h+B)&0x0ffffffff;
k=(k+C)&0x0ffffffff;
l=(l+D)&0x0ffffffff;
m=(m+E)&0x0ffffffff;
}
var o=cvt_hex(g)+cvt_hex(h)+cvt_hex(k)+cvt_hex(l)+cvt_hex(m);
return o.toLowerCase();
}

;

;
var exploreController=function(){
};
exploreController.songs=function(){
};
exploreController.songs.searchResults=[];
exploreController.usesSearchList=true;
exploreController.index=1;
exploreController.inputText="Filter Results";
exploreController.currentSearchID=0;
exploreController.maxResults=100;
exploreController.displayLimit=exploreController.maxResults;

exploreController.onInput=function(){
$("#searchlist .iScrollPlayIndicator").hide();
$("#searchlist .iScrollScrollUpIndicator").hide();
exploreController.filterMusic();
}

exploreController.onClear=function(){
exploreController.removeFilterSongs();
}

exploreController.showView=function(a){
uiController.searchListScroll.scrollTo(0,0,0);
exploreController.visible=true;
$("#searchinput").val("");
setTimeout(function(){
if(exploreController.visible){
searchController.displayLimit=searchController.maxResults;
$scope.safeApply();
$("#searchlistview").listview('refresh');
if(a)
a();
}
},350)
}

exploreController.hideView=function(){
exploreController.currentSearchID++;
exploreController.visible=false;
exploreController.displayLimit=0;
$scope.safeApply();
$("#searchlistview").listview('refresh');
}
exploreController.filterMusic=function(a){
if(!a)
a=$("#searchinput").val();
viewController.showLoading(true);
uiController.searchListScroll.scrollTo(0,0,1000)
a=a.toLowerCase();
var b="";
var c="";
var d=0;
for(var i=0;i<exploreController.songs.searchResults.length;i++){
c=mediaController.getSongArtist(exploreController.songs.searchResults[i]);
b=exploreController.songs.searchResults[i].name;
c=c.toLowerCase();
b=b.toLowerCase();
if(b.search(a)>-1||c.search(a)>-1){
if(exploreController.songs.searchResults[i].tmpHide)
delete exploreController.songs.searchResults[i].tmpHide;
d++;
}
else{
exploreController.songs.searchResults[i].tmpHide=true;
}
}
$scope.safeApply();
playbackController.remarkSong();
$("#searchlistview").listview('refresh');
setTimeout(function(){
uiController.searchListScroll.refresh();
viewController.showLoading(false);
},1000)
searchController.makeSearchListDraggable();
setTimeout(function(){
$("#searchlistview li").removeClass("fadeincompletefast");
},100)
}

exploreController.removeFilterSongs=function(){
uiController.searchListScroll.scrollTo(0,0,1000);
for(var i=0;i<exploreController.songs.searchResults.length;i++){
if(exploreController.songs.searchResults[i].tmpHide)
delete exploreController.songs.searchResults[i].tmpHide;
}
$scope.safeApply();
playbackController.remarkSong();
$("#searchlistview").listview('refresh');
setTimeout(function(){
uiController.searchListScroll.refresh();
},1000)
searchController.makeSearchListDraggable();
setTimeout(function(){
$("#searchlistview li").removeClass("fadeincompletefast");
},100)
}
exploreController.searchArtistsSongs=function(e){
$("#searchlist .iScrollPlayIndicator").hide();
$("#searchlist .iScrollScrollUpIndicator").hide();
$("#searchlist .iScrollIndicator").hide();
var f=function(c){
viewController.showLoading(true);
exploreController.currentSearchID=exploreController.currentSearchID+1;
var d=function(b){
$.when(
exploreController.songs.startArtistSearchDeferred(c)
).then(function(a){
if(b==exploreController.currentSearchID){
exploreController.completedSearch(a);
}
});
};
d(exploreController.currentSearchID);
}
if(viewController.isActiveView(exploreController)){
uiController.searchListScroll.scrollTo(0,0,1000)
exploreController.currentSearchID++;
exploreController.displayLimit=0;
$scope.safeApply();
$("#searchlistview").listview('refresh');
f(e);
}
else
viewController.activateView(exploreController,false,function(){
f(e);
});
}
exploreController.showSuggestions=function(){exploreController.currentSearchID=exploreController.currentSearchID+1;
var a;
var b;

if(playlistController.currentQueue.length>0){a=Math.round(Math.random()*(playlistController.currentQueue.length-1));
b=playlistController.currentQueue[a];
}
else if(!playlistController.playlistMode&&playlistController.loadedPlaylistSongs.length>0){a=Math.round(Math.random()*(playlistController.loadedPlaylistSongs.length-1));
b=playlistController.loadedPlaylistSongs[a];
}
else if(searchController.playlists.length>0){a=Math.round(Math.random()*(searchController.songs.playlists.length-1));
if(searchController.playlists[a].tracks.length>0){
var c=Math.round(Math.random()*(searchController.playlists[a].tracks.length-1));
b=searchController.playlists[a].tracks[c];
}
}else if(searchController.songs.searchResults.length>0){a=Math.round(Math.random()*(searchController.songs.searchResults.length-1));
b=searchController.songs.searchResults[a];
}
if(!b&&generatedData.charts&&generatedData.charts.length>0){
b=generatedData.charts[0];
}
if(b){
exploreController.searchSimilarSongs(b);
}
else{
searchController.startSearch("");
}
}
exploreController.showSimilarSongs=function(a){
a.stopPropagation();
var b=playlistController.getSongListFromSelection();
var c=Math.round(Math.random()*(b.length-1));
var d=b[c];
playlistController.deselectSongs();
exploreController.searchSimilarSongs(d);
}
exploreController.searchSimilarSongs=function(e){
$("#searchlist .iScrollPlayIndicator").hide();
$("#searchlist .iScrollScrollUpIndicator").hide();
$("#searchlist .iScrollIndicator").hide();
var f=function(c){
viewController.showLoading(true);
exploreController.currentSearchID=exploreController.currentSearchID+1;
var d=function(b){
$.when(
exploreController.songs.startSuggestionsSearchDeferred(mediaController.getSongArtist(c),c.name)
).then(function(a){
if(b==exploreController.currentSearchID){
if(a.length==0){
a=jQuery.extend(true,[],searchController.preloadedPopularSongs.track);
}
if(c){
for(var i=0;i<a.length;i++){
if(mediaController.getSongDisplayName(a[i]).toLowerCase()==mediaController.getSongDisplayName(c).toLowerCase()){
a.splice(i,1);
i--;
}
}
c=jQuery.extend(true,{},c);
delete c.gid;
delete c.playlistgid;
a=[c].concat(a);
}
exploreController.completedSearch(a);
}
});
};
d(exploreController.currentSearchID);
}
if(viewController.isActiveView(exploreController)){
uiController.searchListScroll.scrollTo(0,0,1000)
exploreController.currentSearchID++;
exploreController.displayLimit=0;
$scope.safeApply();
$("#searchlistview").listview('refresh');
f(e);
}
else
viewController.activateView(exploreController,false,function(){
f(e);
});
}
exploreController.songs.startSuggestionsSearchDeferred=function(c,d){
var e=$.Deferred();
var f="http://ws.audioscrobbler.com/2.0/?method=track.getsimilar&%searchTerm&api_key="+searchController.lastfmapikey+"&format=json"
$.when(
exploreController.basicOnlineSearchDeferred(f,"artist="+c+"&track="+d,searchController.searchTypeSongs,false,c)
).then(function(a){
console.log("FFFOUNDDDD")
console.dir(JSON.stringify(b))
var b=exploreController.songs.completeSearch([],a);
console.log("FFFOUNDDDD")
console.dir(JSON.stringify(b))
e.resolve(b);
});
return e.promise();
}
exploreController.songs.startArtistSearchDeferred=function(c){
var d=$.Deferred();
var e="http://ws.audioscrobbler.com/2.0/?method=artist.gettoptracks&%searchTerm&api_key="+searchController.lastfmapikey+"&format=json";
$.when(
exploreController.basicOnlineSearchDeferred(e,"artist="+c,searchController.searchTypeSongs,false,c)
).then(function(a){
console.log("FFFOUNDDDD")
console.dir(JSON.stringify(b))
var b=exploreController.songs.completeSearch([],a);
console.log("FFFOUNDDDD")
console.dir(JSON.stringify(b))
d.resolve(b);
});
return d.promise();
}

exploreController.songs.completeSearch=searchController.songs.completeSearch;

exploreController.basicOnlineSearchDeferred=searchController.basicOnlineSearchDeferred;

exploreController.completedSearch=function(a){
if(a){
exploreController.displayLimit=0;
uiController.searchListScroll.scrollTo(0,0,1000)
if(a!=null)exploreController.songs.searchResults=a;
console.dir("songList!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!")
console.dir(a);
exploreController.applySongList(exploreController.currentSearchID);

setTimeout(viewController.showLoading,100)}
};

exploreController.isSongInList=function(a){
if(a){
var b=mediaController.getSongDisplayName(a)
for(var i=0;i<exploreController.songs.searchResults.length;i++){
if(b==mediaController.getSongDisplayName(exploreController.songs.searchResults[i])){
return true;
}
}
}
return false;
}

exploreController.applySongList=function(a){
console.log("-------------------------------------")
$(".specialplaylistbutton").removeClass("fadeincompletefaster");
$("#searchlist .iScrollIndicator").hide();
var b=10;
var c=50;
var d=exploreController.maxResults;
var e=(Math.ceil(d/b));
viewController.applySongList(a,d,e,b,c);
}
;

;
var facebookHandler=function(){
}
facebookHandler.login=function(){
$.mobile.loading("show");
$("#popupLogin").popup("close");
$("#popupRegister").popup("close");
setTimeout(function(){
$.mobile.loading("hide");
},20000)
FB.login(function(a){
if(!a.authResponse){
$.mobile.loading("hide");
}
},{scope:'public_profile, email'});
}
facebookHandler.logout=function(){
console.log("!!!!!! LOGOUT")
facebookHandler.logoutTimer=Date.now();
facebookHandler.logoutTimer=Date.now();
facebookHandler.loggedIn=false;
console.log("LOGOUT")

}

facebookHandler.authAndLoggedIn=function(b){
if(accountController.loggedIn&&!facebookHandler.loggedIn){
facebookHandler.loggedIn=true;
}else if(!facebookHandler.loggedIn){
var c=b;
$.mobile.loading("show");
$("#popupLogin").popup("close");
$("#popupRegister").popup("close");
FB.api('/me',function(a){
console.log(JSON.stringify(a));
if(!a.email||!a.id||!a.username||!c.authResponse.accessToken){

}else{
console.log("SocialSignIn")
console.log(JSON.stringify(c))
console.log(c.authResponse.accessToken)
accountController.socialSignIn(a.username,a.email,a.id,1,c.authResponse.accessToken)

}
});
}
}
facebookHandler.init=function(){
window.fbAsyncInit=function(){
FB.init({
appId:'467888830036802',
status:true,cookie:true,xfbml:true});
FB.Event.subscribe('auth.authResponseChange',function(b){
console.log("FB RESPONSE!!! "+b.status+"   "+facebookHandler.loggedIn+"    "+accountController.loggedIn)
if(b.status==='connected'){
facebookHandler.authAndLoggedIn(b);
}else if(b.status==='not_authorized'){

}else{

if(!facebookHandler.logoutTimer||Date.now()-facebookHandler.logoutTimer>2000){
console.log("AUTOLOGIN!!!!!"+(Date.now()-facebookHandler.logoutTimer)+"  "+facebookHandler.logoutTimer)
FB.login(function(a){
},{scope:'public_profile, email'});
}
}
});
};
(function(d){
var a,id='facebook-jssdk',ref=d.getElementsByTagName('script')[0];
if(d.getElementById(id)){
return;
}
a=d.createElement('script');
a.id=id;
a.async=true;
a.src="//connect.facebook.net/en_US/all.js";
ref.parentNode.insertBefore(a,ref);
}(document));
}

facebookHandler.updateSongFBButtons=function(){
if(playbackController.playingSong)
$("#fbartistbox").html(preloadhtml.sharefbartist.replace("songbase.fm","songbase.fm?artist="+mediaController.getSongArtist(playbackController.playingSong)));
else
$("#fbartistbox").html(preloadhtml.sharefbartist);
if(playbackController.playingSong)
$("#fbtitlebox").html(preloadhtml.sharefbsong.replace("songbase.fm","songbase.fm?play="+playbackController.getPlayingTitle()));
else
$("#fbtitlebox").html(preloadhtml.sharefbsong);
try{
FB.XFBML.parse($("#fbtitlebox").get(0));
FB.XFBML.parse($("#fbartistbox").get(0));
}catch(ex){
}
}
facebookHandler.postOnFacebook=function(){
if(playbackController.playingSong){
mediaController.sendRating("1");
var a=playbackController.getPlayingSong();
var b="http://www.songbase.fm?play="+playbackController.getPlayingTitle()+"&t="+playbackController.getPlayingTitle();
}
else{
b="http://www.songbase.fm&t=songbase.fm - All Your Music";
}
mywindow=window.open("http://www.facebook.com/sharer.php?u="+b,"","");
mywindow.focus();
}
;

;
var generatedData=function(){
};
generatedData.charts=[{"name":"Magic","duration":"201","playcount":"102853","listeners":"45686","mbid":"d0261106-aa8c-4adc-892c-b0fff008be05","url":"http://www.last.fm/music/Coldplay/_/Magic","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"Coldplay","mbid":"cc197bad-dc9c-440d-a5b5-d52ba2e14234","url":"http://www.last.fm/music/Coldplay"},"image":[{"#text":"http://userserve-ak.last.fm/serve/34s/97289583.png","size":"small"},{"#text":"http://userserve-ak.last.fm/serve/64s/97289583.png","size":"medium"},{"#text":"http://userserve-ak.last.fm/serve/126/97289583.png","size":"large"},{"#text":"http://userserve-ak.last.fm/serve/300x300/97289583.png","size":"extralarge"}],"trend":0},{"name":"A Sky Full of Stars","duration":"30","playcount":"108071","listeners":"43964","mbid":"c12bd871-5ae2-449a-918b-1fdffda3b6c8","url":"http://www.last.fm/music/Coldplay/_/A+Sky+Full+of+Stars","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"Coldplay","mbid":"cc197bad-dc9c-440d-a5b5-d52ba2e14234","url":"http://www.last.fm/music/Coldplay"},"image":[{"#text":"http://userserve-ak.last.fm/serve/34s/97289471.png","size":"small"},{"#text":"http://userserve-ak.last.fm/serve/64s/97289471.png","size":"medium"},{"#text":"http://userserve-ak.last.fm/serve/126/97289471.png","size":"large"},{"#text":"http://userserve-ak.last.fm/serve/300x300/97289471.png","size":"extralarge"}],"trend":0},{"name":"Happy","duration":"232","playcount":"82994","listeners":"41055","mbid":"38983004-5d8a-4636-b15d-a251c9dc0ed7","url":"http://www.last.fm/music/Pharrell+Williams/_/Happy","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"Pharrell Williams","mbid":"149f91ef-1287-46da-9a8e-87fee02f1471","url":"http://www.last.fm/music/Pharrell+Williams"},"image":[{"#text":"http://userserve-ak.last.fm/serve/34s/97463009.png","size":"small"},{"#text":"http://userserve-ak.last.fm/serve/64s/97463009.png","size":"medium"},{"#text":"http://userserve-ak.last.fm/serve/126/97463009.png","size":"large"},{"#text":"http://userserve-ak.last.fm/serve/300x300/97463009.png","size":"extralarge"}],"trend":2},{"name":"Summer","duration":"224","playcount":"80139","listeners":"37591","mbid":"","url":"http://www.last.fm/music/Calvin+Harris/_/Summer","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"Calvin Harris","mbid":"8dd98bdc-80ec-4e93-8509-2f46bafc09a7","url":"http://www.last.fm/music/Calvin+Harris"},"image":[{"#text":"http://userserve-ak.last.fm/serve/34s/97561221.png","size":"small"},{"#text":"http://userserve-ak.last.fm/serve/64s/97561221.png","size":"medium"},{"#text":"http://userserve-ak.last.fm/serve/126/97561221.png","size":"large"},{"#text":"http://userserve-ak.last.fm/serve/300x300/97561221.png","size":"extralarge"}],"trend":0},{"name":"Do I Wanna Know?","duration":"273","playcount":"73714","listeners":"37107","mbid":"575d24ee-cf80-48ad-beeb-9295c7d05b35","url":"http://www.last.fm/music/Arctic+Monkeys/_/Do+I+Wanna+Know%3F","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"Arctic Monkeys","mbid":"ada7a83c-e3e1-40f1-93f9-3e73dbc9298a","url":"http://www.last.fm/music/Arctic+Monkeys"},"image":[{"#text":"http://userserve-ak.last.fm/serve/34s/92744747.png","size":"small"},{"#text":"http://userserve-ak.last.fm/serve/64s/92744747.png","size":"medium"},{"#text":"http://userserve-ak.last.fm/serve/126/92744747.png","size":"large"},{"#text":"http://userserve-ak.last.fm/serve/300x300/92744747.png","size":"extralarge"}],"trend":2},{"name":"Rather Be (feat. Jess Glynne)","duration":"230","playcount":"64537","listeners":"32155","mbid":"","url":"http://www.last.fm/music/Clean+Bandit/_/Rather+Be+(feat.+Jess+Glynne)","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"Clean Bandit","mbid":"dacc2d64-7e59-42a8-87a9-10c53919aff2","url":"http://www.last.fm/music/Clean+Bandit"},"image":[{"#text":"http://userserve-ak.last.fm/serve/34s/98675695.jpg","size":"small"},{"#text":"http://userserve-ak.last.fm/serve/64s/98675695.jpg","size":"medium"},{"#text":"http://userserve-ak.last.fm/serve/126/98675695.jpg","size":"large"},{"#text":"http://userserve-ak.last.fm/serve/300x300/98675695.jpg","size":"extralarge"}],"trend":0},{"name":"Team","duration":"193","playcount":"60679","listeners":"31168","mbid":"15898695-1d5f-4fde-b175-fa0d363bb6f7","url":"http://www.last.fm/music/Lorde/_/Team","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"Lorde","mbid":"14cd21f6-df8e-4bff-af75-0dcfeb307c5d","url":"http://www.last.fm/music/Lorde"},"image":[{"#text":"http://userserve-ak.last.fm/serve/34s/93158109.png","size":"small"},{"#text":"http://userserve-ak.last.fm/serve/64s/93158109.png","size":"medium"},{"#text":"http://userserve-ak.last.fm/serve/126/93158109.png","size":"large"},{"#text":"http://userserve-ak.last.fm/serve/300x300/93158109.png","size":"extralarge"}],"trend":0},{"name":"Royals","duration":"190","playcount":"53514","listeners":"29757","mbid":"7c5e0f91-3895-4758-9680-ba8fc31cffe0","url":"http://www.last.fm/music/Lorde/_/Royals","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"Lorde","mbid":"14cd21f6-df8e-4bff-af75-0dcfeb307c5d","url":"http://www.last.fm/music/Lorde"},"image":[{"#text":"http://userserve-ak.last.fm/serve/34s/93158109.png","size":"small"},{"#text":"http://userserve-ak.last.fm/serve/64s/93158109.png","size":"medium"},{"#text":"http://userserve-ak.last.fm/serve/126/93158109.png","size":"large"},{"#text":"http://userserve-ak.last.fm/serve/300x300/93158109.png","size":"extralarge"}],"trend":0},{"name":"Fancy","duration":"200","playcount":"65317","listeners":"29633","mbid":"","url":"http://www.last.fm/music/Iggy+Azalea/_/Fancy","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"Iggy Azalea","mbid":"3a052c99-8c18-484a-8beb-9873b4fb3106","url":"http://www.last.fm/music/Iggy+Azalea"},"image":[{"#text":"http://userserve-ak.last.fm/serve/34s/97433945.png","size":"small"},{"#text":"http://userserve-ak.last.fm/serve/64s/97433945.png","size":"medium"},{"#text":"http://userserve-ak.last.fm/serve/126/97433945.png","size":"large"},{"#text":"http://userserve-ak.last.fm/serve/300x300/97433945.png","size":"extralarge"}],"trend":0},{"name":"Radioactive","duration":"276","playcount":"53399","listeners":"28949","mbid":"30b4194d-e9b9-42b1-aee6-80d24dc4c6a7","url":"http://www.last.fm/music/Imagine+Dragons/_/Radioactive","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"Imagine Dragons","mbid":"012151a8-0f9a-44c9-997f-ebd68b5389f9","url":"http://www.last.fm/music/Imagine+Dragons"},"image":[{"#text":"http://userserve-ak.last.fm/serve/34s/87897873.png","size":"small"},{"#text":"http://userserve-ak.last.fm/serve/64s/87897873.png","size":"medium"},{"#text":"http://userserve-ak.last.fm/serve/126/87897873.png","size":"large"},{"#text":"http://userserve-ak.last.fm/serve/300x300/87897873.png","size":"extralarge"}],"trend":2},{"name":"Pompeii","duration":"214","playcount":"51615","listeners":"27501","mbid":"db88ceb1-0c1d-45d4-87d0-3775c4f59ecc","url":"http://www.last.fm/music/Bastille/_/Pompeii","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"Bastille","mbid":"16c07e8e-e1ef-452c-bbb7-0cda599c1ffd","url":"http://www.last.fm/music/Bastille"},"image":[{"#text":"http://userserve-ak.last.fm/serve/34s/91244823.png","size":"small"},{"#text":"http://userserve-ak.last.fm/serve/64s/91244823.png","size":"medium"},{"#text":"http://userserve-ak.last.fm/serve/126/91244823.png","size":"large"},{"#text":"http://userserve-ak.last.fm/serve/300x300/91244823.png","size":"extralarge"}],"trend":2},{"name":"Demons","duration":"175","playcount":"52515","listeners":"26935","mbid":"43f38991-3a95-4bd0-b831-b9ee29334764","url":"http://www.last.fm/music/Imagine+Dragons/_/Demons","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"Imagine Dragons","mbid":"012151a8-0f9a-44c9-997f-ebd68b5389f9","url":"http://www.last.fm/music/Imagine+Dragons"},"image":[{"#text":"http://userserve-ak.last.fm/serve/34s/87897873.png","size":"small"},{"#text":"http://userserve-ak.last.fm/serve/64s/87897873.png","size":"medium"},{"#text":"http://userserve-ak.last.fm/serve/126/87897873.png","size":"large"},{"#text":"http://userserve-ak.last.fm/serve/300x300/87897873.png","size":"extralarge"}],"trend":3},{"name":"Counting Stars","duration":"258","playcount":"49786","listeners":"25903","mbid":"5e8d518e-328a-43da-a9fa-cc27513a4c86","url":"http://www.last.fm/music/OneRepublic/_/Counting+Stars","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"OneRepublic","mbid":"8aafd46e-f5d3-4923-8da1-43c0a296947f","url":"http://www.last.fm/music/OneRepublic"},"image":[{"#text":"http://userserve-ak.last.fm/serve/34s/87338269.png","size":"small"},{"#text":"http://userserve-ak.last.fm/serve/64s/87338269.png","size":"medium"},{"#text":"http://userserve-ak.last.fm/serve/126/87338269.png","size":"large"},{"#text":"http://userserve-ak.last.fm/serve/300x300/87338269.png","size":"extralarge"}],"trend":0},{"name":"All of Me","duration":"269","playcount":"53002","listeners":"25201","mbid":"abf32699-c4dc-4426-ba3f-03be65d0dbfa","url":"http://www.last.fm/music/John+Legend/_/All+of+Me","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"John Legend","mbid":"75a72702-a5ef-4513-bca5-c5b944903546","url":"http://www.last.fm/music/John+Legend"},"image":[{"#text":"http://userserve-ak.last.fm/serve/34s/91458889.png","size":"small"},{"#text":"http://userserve-ak.last.fm/serve/64s/91458889.png","size":"medium"},{"#text":"http://userserve-ak.last.fm/serve/126/91458889.png","size":"large"},{"#text":"http://userserve-ak.last.fm/serve/300x300/91458889.png","size":"extralarge"}],"trend":0},{"name":"R U Mine?","duration":"200","playcount":"48902","listeners":"25125","mbid":"64745b72-5bc8-43a9-a2a3-0d20afd42d5d","url":"http://www.last.fm/music/Arctic+Monkeys/_/R+U+Mine%3F","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"Arctic Monkeys","mbid":"ada7a83c-e3e1-40f1-93f9-3e73dbc9298a","url":"http://www.last.fm/music/Arctic+Monkeys"},"image":[{"#text":"http://userserve-ak.last.fm/serve/34s/92744747.png","size":"small"},{"#text":"http://userserve-ak.last.fm/serve/64s/92744747.png","size":"medium"},{"#text":"http://userserve-ak.last.fm/serve/126/92744747.png","size":"large"},{"#text":"http://userserve-ak.last.fm/serve/300x300/92744747.png","size":"extralarge"}],"trend":0},{"name":"Problem","duration":"194","playcount":"53805","listeners":"24338","mbid":"","url":"http://www.last.fm/music/Ariana+Grande/_/Problem","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"Ariana Grande","mbid":"f4fdbb4c-e4b7-47a0-b83b-d91bbfcfa387","url":"http://www.last.fm/music/Ariana+Grande"},"image":[{"#text":"http://userserve-ak.last.fm/serve/34s/98465355.png","size":"small"},{"#text":"http://userserve-ak.last.fm/serve/64s/98465355.png","size":"medium"},{"#text":"http://userserve-ak.last.fm/serve/126/98465355.png","size":"large"},{"#text":"http://userserve-ak.last.fm/serve/300x300/98465355.png","size":"extralarge"}],"trend":0},{"name":"Dark Horse","duration":"216","playcount":"43348","listeners":"23376","mbid":"10a65491-fee0-4494-a56b-960566479e88","url":"http://www.last.fm/music/Katy+Perry/_/Dark+Horse","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"Katy Perry","mbid":"122d63fc-8671-43e4-9752-34e846d62a9c","url":"http://www.last.fm/music/Katy+Perry"},"image":[{"#text":"http://userserve-ak.last.fm/serve/34s/98230957.png","size":"small"},{"#text":"http://userserve-ak.last.fm/serve/64s/98230957.png","size":"medium"},{"#text":"http://userserve-ak.last.fm/serve/126/98230957.png","size":"large"},{"#text":"http://userserve-ak.last.fm/serve/300x300/98230957.png","size":"extralarge"}],"trend":0},{"name":"Waves - Robin Schulz Radio Edit","duration":"206","playcount":"44150","listeners":"23192","mbid":"","url":"http://www.last.fm/music/Mr.+Probz/_/Waves+-+Robin+Schulz+Radio+Edit","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"Mr. Probz","mbid":"","url":"http://www.last.fm/music/Mr.+Probz"},"trend":0},{"name":"West Coast","duration":"257","playcount":"82384","listeners":"22532","mbid":"bc4fc26c-534e-49e4-a0eb-e91f174df420","url":"http://www.last.fm/music/Lana+Del+Rey/_/West+Coast","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"Lana Del Rey","mbid":"b7539c32-53e7-4908-bda3-81449c367da6","url":"http://www.last.fm/music/Lana+Del+Rey"},"image":[{"#text":"http://userserve-ak.last.fm/serve/34s/98170979.png","size":"small"},{"#text":"http://userserve-ak.last.fm/serve/64s/98170979.png","size":"medium"},{"#text":"http://userserve-ak.last.fm/serve/126/98170979.png","size":"large"},{"#text":"http://userserve-ak.last.fm/serve/300x300/98170979.png","size":"extralarge"}],"trend":0},{"name":"Money on My Mind","duration":"194","playcount":"44372","listeners":"22283","mbid":"0eea6b70-1d95-411d-be2e-4e6e591278fe","url":"http://www.last.fm/music/Sam+Smith/_/Money+on+My+Mind","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"Sam Smith","mbid":"5a85c140-dcf9-4dd2-b2c8-aff0471549f3","url":"http://www.last.fm/music/Sam+Smith"},"image":[{"#text":"http://userserve-ak.last.fm/serve/34s/97604427.png","size":"small"},{"#text":"http://userserve-ak.last.fm/serve/64s/97604427.png","size":"medium"},{"#text":"http://userserve-ak.last.fm/serve/126/97604427.png","size":"large"},{"#text":"http://userserve-ak.last.fm/serve/300x300/97604427.png","size":"extralarge"}],"trend":0},{"name":"Chandelier","duration":"216","playcount":"87853","listeners":"21198","mbid":"","url":"http://www.last.fm/music/Sia/_/Chandelier","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"Sia","mbid":"2f548675-008d-4332-876c-108b0c7ab9c5","url":"http://www.last.fm/music/Sia"},"image":[{"#text":"http://userserve-ak.last.fm/serve/34s/98738409.png","size":"small"},{"#text":"http://userserve-ak.last.fm/serve/64s/98738409.png","size":"medium"},{"#text":"http://userserve-ak.last.fm/serve/126/98738409.png","size":"large"},{"#text":"http://userserve-ak.last.fm/serve/300x300/98738409.png","size":"extralarge"}],"trend":0},{"name":"Safe and Sound","duration":"193","playcount":"35574","listeners":"20566","mbid":"be7b5d59-e5d4-440e-b421-8c4006c5a5ce","url":"http://www.last.fm/music/Capital+Cities/_/Safe+and+Sound","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"Capital Cities","mbid":"119a2c67-e6d6-41cf-a58c-c51b75c80daa","url":"http://www.last.fm/music/Capital+Cities"},"image":[{"#text":"http://userserve-ak.last.fm/serve/34s/90200311.png","size":"small"},{"#text":"http://userserve-ak.last.fm/serve/64s/90200311.png","size":"medium"},{"#text":"http://userserve-ak.last.fm/serve/126/90200311.png","size":"large"},{"#text":"http://userserve-ak.last.fm/serve/300x300/90200311.png","size":"extralarge"}],"trend":0},{"name":"Best Day of My Life","duration":"194","playcount":"35700","listeners":"20505","mbid":"ece1fac1-6263-4c8e-abc6-6e6b30641f65","url":"http://www.last.fm/music/American+Authors/_/Best+Day+of+My+Life","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"American Authors","mbid":"9ce0515d-cc88-4df6-8a2e-d231c13cb2c2","url":"http://www.last.fm/music/American+Authors"},"image":[{"#text":"http://userserve-ak.last.fm/serve/34s/97578489.png","size":"small"},{"#text":"http://userserve-ak.last.fm/serve/64s/97578489.png","size":"medium"},{"#text":"http://userserve-ak.last.fm/serve/126/97578489.png","size":"large"},{"#text":"http://userserve-ak.last.fm/serve/300x300/97578489.png","size":"extralarge"}],"trend":0},{"name":"Riptide","duration":"204","playcount":"39010","listeners":"20517","mbid":"4792c70c-52f5-42dd-8c5a-1ac597ecec0f","url":"http://www.last.fm/music/Vance+Joy/_/Riptide","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"Vance Joy","mbid":"df36f6db-5987-46ed-9d02-0cf36ed4e060","url":"http://www.last.fm/music/Vance+Joy"},"image":[{"#text":"http://userserve-ak.last.fm/serve/34s/94165023.jpg","size":"small"},{"#text":"http://userserve-ak.last.fm/serve/64s/94165023.jpg","size":"medium"},{"#text":"http://userserve-ak.last.fm/serve/126/94165023.jpg","size":"large"},{"#text":"http://userserve-ak.last.fm/serve/300x300/94165023.jpg","size":"extralarge"}],"trend":0},{"name":"Wake Me Up","duration":"255","playcount":"33629","listeners":"20292","mbid":"db7b45e4-e3ab-477c-95d4-349b0a93be78","url":"http://www.last.fm/music/Avicii/_/Wake+Me+Up","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"Avicii","mbid":"24b930c0-5f27-4723-a5aa-3b8b830fb914","url":"http://www.last.fm/music/Avicii"},"image":[{"#text":"http://userserve-ak.last.fm/serve/34s/93069463.png","size":"small"},{"#text":"http://userserve-ak.last.fm/serve/64s/93069463.png","size":"medium"},{"#text":"http://userserve-ak.last.fm/serve/126/93069463.png","size":"large"},{"#text":"http://userserve-ak.last.fm/serve/300x300/93069463.png","size":"extralarge"}],"trend":2},{"name":"Fever","duration":"33","playcount":"41397","listeners":"20273","mbid":"e028dee4-64df-4355-9b05-1aa7d412e584","url":"http://www.last.fm/music/The+Black+Keys/_/Fever","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"The Black Keys","mbid":"d15721d8-56b4-453d-b506-fc915b14cba2","url":"http://www.last.fm/music/The+Black+Keys"},"image":[{"#text":"http://userserve-ak.last.fm/serve/34s/97844969.png","size":"small"},{"#text":"http://userserve-ak.last.fm/serve/64s/97844969.png","size":"medium"},{"#text":"http://userserve-ak.last.fm/serve/126/97844969.png","size":"large"},{"#text":"http://userserve-ak.last.fm/serve/300x300/97844969.png","size":"extralarge"}],"trend":2},{"name":"Why'd You Only Call Me When You're High?","duration":"161","playcount":"37298","listeners":"20139","mbid":"","url":"http://www.last.fm/music/Arctic+Monkeys/_/Why%27d+You+Only+Call+Me+When+You%27re+High%3F","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"Arctic Monkeys","mbid":"ada7a83c-e3e1-40f1-93f9-3e73dbc9298a","url":"http://www.last.fm/music/Arctic+Monkeys"},"image":[{"#text":"http://userserve-ak.last.fm/serve/34s/92743903.png","size":"small"},{"#text":"http://userserve-ak.last.fm/serve/64s/92743903.png","size":"medium"},{"#text":"http://userserve-ak.last.fm/serve/126/92743903.png","size":"large"},{"#text":"http://userserve-ak.last.fm/serve/300x300/92743903.png","size":"extralarge"}],"trend":0},{"name":"Latch (feat. Sam Smith)","duration":"256","playcount":"37427","listeners":"20128","mbid":"","url":"http://www.last.fm/music/Disclosure/_/Latch+(feat.+Sam+Smith)","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"Disclosure","mbid":"ae65c507-d9a0-4d42-9a6c-2b1f82158b9f","url":"http://www.last.fm/music/Disclosure"},"trend":0},{"name":"Let Her Go","duration":"249","playcount":"34317","listeners":"19778","mbid":"6ac621ae-e62f-4e64-86e4-c0987f1aa4a1","url":"http://www.last.fm/music/Passenger/_/Let+Her+Go","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"Passenger","mbid":"186e216a-2f8a-41a1-935f-8e30c018a8fe","url":"http://www.last.fm/music/Passenger"},"image":[{"#text":"http://userserve-ak.last.fm/serve/34s/87731471.png","size":"small"},{"#text":"http://userserve-ak.last.fm/serve/64s/87731471.png","size":"medium"},{"#text":"http://userserve-ak.last.fm/serve/126/87731471.png","size":"large"},{"#text":"http://userserve-ak.last.fm/serve/300x300/87731471.png","size":"extralarge"}],"trend":2},{"name":"Sing","duration":"235","playcount":"40353","listeners":"19112","mbid":"4ee00f62-b61c-4236-98b7-b511b5ae31a7","url":"http://www.last.fm/music/Ed+Sheeran/_/Sing","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"Ed Sheeran","mbid":"3bca1168-e7c6-4beb-9af9-db9dc674b1fa","url":"http://www.last.fm/music/Ed+Sheeran"},"image":[{"#text":"http://userserve-ak.last.fm/serve/34s/98181345.png","size":"small"},{"#text":"http://userserve-ak.last.fm/serve/64s/98181345.png","size":"medium"},{"#text":"http://userserve-ak.last.fm/serve/126/98181345.png","size":"large"},{"#text":"http://userserve-ak.last.fm/serve/300x300/98181345.png","size":"extralarge"}],"trend":0},{"name":"Love Never Felt So Good","duration":"204","playcount":"42019","listeners":"18987","mbid":"a15b5c9b-0169-4ded-8b1a-1b547ebf4d46","url":"http://www.last.fm/music/Michael+Jackson/_/Love+Never+Felt+So+Good","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"Michael Jackson","mbid":"210769a3-4aca-4199-a2e1-676ef376e078","url":"http://www.last.fm/music/Michael+Jackson"},"image":[{"#text":"http://userserve-ak.last.fm/serve/34s/97936843.png","size":"small"},{"#text":"http://userserve-ak.last.fm/serve/64s/97936843.png","size":"medium"},{"#text":"http://userserve-ak.last.fm/serve/126/97936843.png","size":"large"},{"#text":"http://userserve-ak.last.fm/serve/300x300/97936843.png","size":"extralarge"}],"trend":2},{"name":"Arabella","duration":"207","playcount":"35662","listeners":"18984","mbid":"f7ea0f9e-18dc-4bf8-8c19-9d4ab3b01293","url":"http://www.last.fm/music/Arctic+Monkeys/_/Arabella","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"Arctic Monkeys","mbid":"ada7a83c-e3e1-40f1-93f9-3e73dbc9298a","url":"http://www.last.fm/music/Arctic+Monkeys"},"image":[{"#text":"http://userserve-ak.last.fm/serve/34s/92744747.png","size":"small"},{"#text":"http://userserve-ak.last.fm/serve/64s/92744747.png","size":"medium"},{"#text":"http://userserve-ak.last.fm/serve/126/92744747.png","size":"large"},{"#text":"http://userserve-ak.last.fm/serve/300x300/92744747.png","size":"extralarge"}],"trend":0},{"name":"Am I Wrong","duration":"247","playcount":"36948","listeners":"18307","mbid":"a1b1b9aa-0251-46b8-a27a-7ae713bc854e","url":"http://www.last.fm/music/Nico+&+Vinz/_/Am+I+Wrong","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"Nico & Vinz","mbid":"f8e8de78-2131-4e96-8829-ba3614f48a48","url":"http://www.last.fm/music/Nico+&+Vinz"},"image":[{"#text":"http://userserve-ak.last.fm/serve/34s/96194415.jpg","size":"small"},{"#text":"http://userserve-ak.last.fm/serve/64s/96194415.jpg","size":"medium"},{"#text":"http://userserve-ak.last.fm/serve/126/96194415.jpg","size":"large"},{"#text":"http://userserve-ak.last.fm/serve/300x300/96194415.jpg","size":"extralarge"}],"trend":0},{"name":"Summertime Sadness","duration":"266","playcount":"36090","listeners":"18174","mbid":"0eee53f9-7959-4ce4-89bb-a0a473408089","url":"http://www.last.fm/music/Lana+Del+Rey/_/Summertime+Sadness","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"Lana Del Rey","mbid":"b7539c32-53e7-4908-bda3-81449c367da6","url":"http://www.last.fm/music/Lana+Del+Rey"},"image":[{"#text":"http://userserve-ak.last.fm/serve/34s/88340753.png","size":"small"},{"#text":"http://userserve-ak.last.fm/serve/64s/88340753.png","size":"medium"},{"#text":"http://userserve-ak.last.fm/serve/126/88340753.png","size":"large"},{"#text":"http://userserve-ak.last.fm/serve/300x300/88340753.png","size":"extralarge"}],"trend":0},{"name":"Midnight","duration":"150","playcount":"42761","listeners":"17986","mbid":"35f9f0cb-a196-4b47-8f8c-6d2708a4e933","url":"http://www.last.fm/music/Coldplay/_/Midnight","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"Coldplay","mbid":"cc197bad-dc9c-440d-a5b5-d52ba2e14234","url":"http://www.last.fm/music/Coldplay"},"image":[{"#text":"http://userserve-ak.last.fm/serve/34s/97289471.png","size":"small"},{"#text":"http://userserve-ak.last.fm/serve/64s/97289471.png","size":"medium"},{"#text":"http://userserve-ak.last.fm/serve/126/97289471.png","size":"large"},{"#text":"http://userserve-ak.last.fm/serve/300x300/97289471.png","size":"extralarge"}],"trend":2},{"name":"The Man","duration":"255","playcount":"31873","listeners":"17888","mbid":"03c49f5c-147b-4c6d-8718-455cc244d99a","url":"http://www.last.fm/music/Aloe+Blacc/_/The+Man","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"Aloe Blacc","mbid":"4bf89e02-6c30-4603-9f6a-52619b1bea1a","url":"http://www.last.fm/music/Aloe+Blacc"},"image":[{"#text":"http://userserve-ak.last.fm/serve/34s/94175335.png","size":"small"},{"#text":"http://userserve-ak.last.fm/serve/64s/94175335.png","size":"medium"},{"#text":"http://userserve-ak.last.fm/serve/126/94175335.png","size":"large"},{"#text":"http://userserve-ak.last.fm/serve/300x300/94175335.png","size":"extralarge"}],"trend":2},{"name":"Burn","duration":"231","playcount":"32594","listeners":"17871","mbid":"b9548807-0676-46cb-a147-c2b435f39b1b","url":"http://www.last.fm/music/Ellie+Goulding/_/Burn","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"Ellie Goulding","mbid":"33ca19f4-18c8-4411-98df-ac23890ce9f5","url":"http://www.last.fm/music/Ellie+Goulding"},"image":[{"#text":"http://userserve-ak.last.fm/serve/34s/91777855.png","size":"small"},{"#text":"http://userserve-ak.last.fm/serve/64s/91777855.png","size":"medium"},{"#text":"http://userserve-ak.last.fm/serve/126/91777855.png","size":"large"},{"#text":"http://userserve-ak.last.fm/serve/300x300/91777855.png","size":"extralarge"}],"trend":2},{"name":"Little Talks","duration":"267","playcount":"28251","listeners":"17780","mbid":"a1ef576b-5d14-4da8-b6f9-7fddbaf092da","url":"http://www.last.fm/music/Of+Monsters+and+Men/_/Little+Talks","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"Of Monsters and Men","mbid":"9e103f85-7af7-41d7-b83b-49ba8f0c5abf","url":"http://www.last.fm/music/Of+Monsters+and+Men"},"image":[{"#text":"http://userserve-ak.last.fm/serve/34s/84421449.png","size":"small"},{"#text":"http://userserve-ak.last.fm/serve/64s/84421449.png","size":"medium"},{"#text":"http://userserve-ak.last.fm/serve/126/84421449.png","size":"large"},{"#text":"http://userserve-ak.last.fm/serve/300x300/84421449.png","size":"extralarge"}],"trend":2},{"name":"Tennis Court","duration":"199","playcount":"36645","listeners":"17463","mbid":"3b083303-7c3e-4bf3-8457-6eb417f581f5","url":"http://www.last.fm/music/Lorde/_/Tennis+Court","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"Lorde","mbid":"14cd21f6-df8e-4bff-af75-0dcfeb307c5d","url":"http://www.last.fm/music/Lorde"},"image":[{"#text":"http://userserve-ak.last.fm/serve/34s/93158109.png","size":"small"},{"#text":"http://userserve-ak.last.fm/serve/64s/93158109.png","size":"medium"},{"#text":"http://userserve-ak.last.fm/serve/126/93158109.png","size":"large"},{"#text":"http://userserve-ak.last.fm/serve/300x300/93158109.png","size":"extralarge"}],"trend":2},{"name":"Hideaway","duration":"252","playcount":"38664","listeners":"17167","mbid":"f0aeeebc-b35f-446a-a469-fc3fcbd591a0","url":"http://www.last.fm/music/Kiesza/_/Hideaway","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"Kiesza","mbid":"87ff5ccd-64cd-45d6-bba3-ba2647e85d74","url":"http://www.last.fm/music/Kiesza"},"image":[{"#text":"http://userserve-ak.last.fm/serve/34s/98441233.png","size":"small"},{"#text":"http://userserve-ak.last.fm/serve/64s/98441233.png","size":"medium"},{"#text":"http://userserve-ak.last.fm/serve/126/98441233.png","size":"large"},{"#text":"http://userserve-ak.last.fm/serve/300x300/98441233.png","size":"extralarge"}],"trend":0},{"name":"Intro","duration":"125","playcount":"28940","listeners":"17029","mbid":"48e5992d-ada5-4377-a4b4-eb813956f407","url":"http://www.last.fm/music/The+xx/_/Intro","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"The xx","mbid":"c5c2ea1c-4bde-4f4d-bd0b-47b200bf99d6","url":"http://www.last.fm/music/The+xx"},"image":[{"#text":"http://userserve-ak.last.fm/serve/34s/88381869.png","size":"small"},{"#text":"http://userserve-ak.last.fm/serve/64s/88381869.png","size":"medium"},{"#text":"http://userserve-ak.last.fm/serve/126/88381869.png","size":"large"},{"#text":"http://userserve-ak.last.fm/serve/300x300/88381869.png","size":"extralarge"}],"trend":0},{"name":"Sweater Weather","duration":"239","playcount":"35472","listeners":"17043","mbid":"c9396769-5949-4cda-88a7-c9e7bb662bfe","url":"http://www.last.fm/music/The+Neighbourhood/_/Sweater+Weather","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"The Neighbourhood","mbid":"53b06622-ec51-4924-a554-58b0affde6b5","url":"http://www.last.fm/music/The+Neighbourhood"},"image":[{"#text":"http://userserve-ak.last.fm/serve/34s/84218865.png","size":"small"},{"#text":"http://userserve-ak.last.fm/serve/64s/84218865.png","size":"medium"},{"#text":"http://userserve-ak.last.fm/serve/126/84218865.png","size":"large"},{"#text":"http://userserve-ak.last.fm/serve/300x300/84218865.png","size":"extralarge"}],"trend":2},{"name":"Timber","duration":"205","playcount":"28853","listeners":"17036","mbid":"","url":"http://www.last.fm/music/Pitbull/_/Timber","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"Pitbull","mbid":"3f7b5e3e-289a-44d7-95a7-f7ffab7a2bf2","url":"http://www.last.fm/music/Pitbull"},"trend":2},{"name":"Born to Die","duration":"286","playcount":"34689","listeners":"16926","mbid":"dd56baa7-5005-4875-b373-5decc244c38e","url":"http://www.last.fm/music/Lana+Del+Rey/_/Born+to+Die","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"Lana Del Rey","mbid":"b7539c32-53e7-4908-bda3-81449c367da6","url":"http://www.last.fm/music/Lana+Del+Rey"},"image":[{"#text":"http://userserve-ak.last.fm/serve/34s/88340753.png","size":"small"},{"#text":"http://userserve-ak.last.fm/serve/64s/88340753.png","size":"medium"},{"#text":"http://userserve-ak.last.fm/serve/126/88340753.png","size":"large"},{"#text":"http://userserve-ak.last.fm/serve/300x300/88340753.png","size":"extralarge"}],"trend":0},{"name":"Roar","duration":"223","playcount":"29657","listeners":"16911","mbid":"7e561bc2-21ae-45d1-805e-ffc7f9371691","url":"http://www.last.fm/music/Katy+Perry/_/Roar","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"Katy Perry","mbid":"122d63fc-8671-43e4-9752-34e846d62a9c","url":"http://www.last.fm/music/Katy+Perry"},"image":[{"#text":"http://userserve-ak.last.fm/serve/34s/98230957.png","size":"small"},{"#text":"http://userserve-ak.last.fm/serve/64s/98230957.png","size":"medium"},{"#text":"http://userserve-ak.last.fm/serve/126/98230957.png","size":"large"},{"#text":"http://userserve-ak.last.fm/serve/300x300/98230957.png","size":"extralarge"}],"trend":0},{"name":"Turn Down for What","duration":"213","playcount":"28955","listeners":"16880","mbid":"31890d25-27f9-4d72-9190-90fd39687a92","url":"http://www.last.fm/music/DJ+Snake+&+Lil+Jon/_/Turn+Down+for+What","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"DJ Snake & Lil Jon","mbid":"","url":"http://www.last.fm/music/DJ+Snake+&+Lil+Jon"},"image":[{"#text":"http://userserve-ak.last.fm/serve/34s/95498681.png","size":"small"},{"#text":"http://userserve-ak.last.fm/serve/64s/95498681.png","size":"medium"},{"#text":"http://userserve-ak.last.fm/serve/126/95498681.png","size":"large"},{"#text":"http://userserve-ak.last.fm/serve/300x300/95498681.png","size":"extralarge"}],"trend":2},{"name":"Hey Brother","duration":"255","playcount":"28530","listeners":"16710","mbid":"9ef1ce5d-e2db-42d3-bc5b-603b60b024e2","url":"http://www.last.fm/music/Avicii/_/Hey+Brother","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"Avicii","mbid":"24b930c0-5f27-4723-a5aa-3b8b830fb914","url":"http://www.last.fm/music/Avicii"},"image":[{"#text":"http://userserve-ak.last.fm/serve/34s/93069463.png","size":"small"},{"#text":"http://userserve-ak.last.fm/serve/64s/93069463.png","size":"medium"},{"#text":"http://userserve-ak.last.fm/serve/126/93069463.png","size":"large"},{"#text":"http://userserve-ak.last.fm/serve/300x300/93069463.png","size":"extralarge"}],"trend":2},{"name":"Paradise","duration":"279","playcount":"26367","listeners":"16603","mbid":"08b62b20-d909-4c1b-aad8-ddf09738a2e0","url":"http://www.last.fm/music/Coldplay/_/Paradise","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"Coldplay","mbid":"cc197bad-dc9c-440d-a5b5-d52ba2e14234","url":"http://www.last.fm/music/Coldplay"},"image":[{"#text":"http://userserve-ak.last.fm/serve/34s/88588967.png","size":"small"},{"#text":"http://userserve-ak.last.fm/serve/64s/88588967.png","size":"medium"},{"#text":"http://userserve-ak.last.fm/serve/126/88588967.png","size":"large"},{"#text":"http://userserve-ak.last.fm/serve/300x300/88588967.png","size":"extralarge"}],"trend":2},{"name":"The Mother We Share","duration":"191","playcount":"29459","listeners":"16586","mbid":"a26239b3-d900-43d3-ad38-450e3bbf1f09","url":"http://www.last.fm/music/CHVRCHES/_/The+Mother+We+Share","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"CHVRCHES","mbid":"6a93afbb-257f-4166-b389-9f2a1e5c5df8","url":"http://www.last.fm/music/CHVRCHES"},"image":[{"#text":"http://userserve-ak.last.fm/serve/34s/92085853.png","size":"small"},{"#text":"http://userserve-ak.last.fm/serve/64s/92085853.png","size":"medium"},{"#text":"http://userserve-ak.last.fm/serve/126/92085853.png","size":"large"},{"#text":"http://userserve-ak.last.fm/serve/300x300/92085853.png","size":"extralarge"}],"trend":2},{"name":"Pumped Up Kicks","duration":"236","playcount":"26497","listeners":"16433","mbid":"ff6f37e5-c420-4acc-b3e4-5ecf1d78cbc7","url":"http://www.last.fm/music/Foster+the+People/_/Pumped+Up+Kicks","streamable":{"#text":"0","fulltrack":"1"},"artist":{"name":"Foster the People","mbid":"e0e1a584-dd0a-4bd1-88d1-c4c62895039d","url":"http://www.last.fm/music/Foster+the+People"},"image":[{"#text":"http://userserve-ak.last.fm/serve/34s/62306479.png","size":"small"},{"#text":"http://userserve-ak.last.fm/serve/64s/62306479.png","size":"medium"},{"#text":"http://userserve-ak.last.fm/serve/126/62306479.png","size":"large"},{"#text":"http://userserve-ak.last.fm/serve/300x300/62306479.png","size":"extralarge"}],"trend":2},{"name":"Sail","duration":"259","playcount":"27947","listeners":"16292","mbid":"70e5e5fd-fb5d-498e-8e8b-7a24bfda9de2","url":"http://www.last.fm/music/AWOLNATION/_/Sail","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"AWOLNATION","mbid":"77b29df2-056e-409e-a1b2-5e2bbfe421c4","url":"http://www.last.fm/music/AWOLNATION"},"image":[{"#text":"http://userserve-ak.last.fm/serve/34s/68205008.png","size":"small"},{"#text":"http://userserve-ak.last.fm/serve/64s/68205008.png","size":"medium"},{"#text":"http://userserve-ak.last.fm/serve/126/68205008.png","size":"large"},{"#text":"http://userserve-ak.last.fm/serve/300x300/68205008.png","size":"extralarge"}],"trend":2},{"name":"Shades of Cool","duration":"342","playcount":"106172","listeners":"16305","mbid":"678359f6-1ac4-456f-abda-0535381e1041","url":"http://www.last.fm/music/Lana+Del+Rey/_/Shades+of+Cool","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"Lana Del Rey","mbid":"b7539c32-53e7-4908-bda3-81449c367da6","url":"http://www.last.fm/music/Lana+Del+Rey"},"image":[{"#text":"http://userserve-ak.last.fm/serve/34s/98791741.png","size":"small"},{"#text":"http://userserve-ak.last.fm/serve/64s/98791741.png","size":"medium"},{"#text":"http://userserve-ak.last.fm/serve/126/98791741.png","size":"large"},{"#text":"http://userserve-ak.last.fm/serve/300x300/98791741.png","size":"extralarge"}],"trend":3},{"name":"Can't Hold Us (feat. Ray Dalton)","duration":"265","playcount":"25501","listeners":"16118","mbid":"","url":"http://www.last.fm/music/Macklemore+&+Ryan+Lewis/_/Can%27t+Hold+Us+(feat.+Ray+Dalton)","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"Macklemore & Ryan Lewis","mbid":"97b226c8-7140-4da3-91ac-15e62e131a81","url":"http://www.last.fm/music/Macklemore+&+Ryan+Lewis"},"image":[{"#text":"http://userserve-ak.last.fm/serve/34s/88839677.png","size":"small"},{"#text":"http://userserve-ak.last.fm/serve/64s/88839677.png","size":"medium"},{"#text":"http://userserve-ak.last.fm/serve/126/88839677.png","size":"large"},{"#text":"http://userserve-ak.last.fm/serve/300x300/88839677.png","size":"extralarge"}],"trend":0},{"name":"Wonderwall","duration":"258","playcount":"24735","listeners":"15984","mbid":"0b17b833-addf-47c1-83a5-136d0922c8f4","url":"http://www.last.fm/music/Oasis/_/Wonderwall","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"Oasis","mbid":"39ab1aed-75e0-4140-bd47-540276886b60","url":"http://www.last.fm/music/Oasis"},"image":[{"#text":"http://userserve-ak.last.fm/serve/34s/72672488.png","size":"small"},{"#text":"http://userserve-ak.last.fm/serve/64s/72672488.png","size":"medium"},{"#text":"http://userserve-ak.last.fm/serve/126/72672488.png","size":"large"},{"#text":"http://userserve-ak.last.fm/serve/300x300/72672488.png","size":"extralarge"}],"trend":0},{"name":"Midnight City","duration":"244","playcount":"25599","listeners":"15960","mbid":"43da2a39-725d-4ada-9a11-a4cf3bd923fb","url":"http://www.last.fm/music/M83/_/Midnight+City","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"M83","mbid":"6d7b7cd4-254b-4c25-83f6-dd20f98ceacd","url":"http://www.last.fm/music/M83"},"image":[{"#text":"http://userserve-ak.last.fm/serve/34s/71737222.png","size":"small"},{"#text":"http://userserve-ak.last.fm/serve/64s/71737222.png","size":"medium"},{"#text":"http://userserve-ak.last.fm/serve/126/71737222.png","size":"large"},{"#text":"http://userserve-ak.last.fm/serve/300x300/71737222.png","size":"extralarge"}],"trend":2},{"name":"One for the Road","duration":"206","playcount":"29383","listeners":"15915","mbid":"42f81b9d-4b96-4480-ab22-31ab3d602d42","url":"http://www.last.fm/music/Arctic+Monkeys/_/One+for+the+Road","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"Arctic Monkeys","mbid":"ada7a83c-e3e1-40f1-93f9-3e73dbc9298a","url":"http://www.last.fm/music/Arctic+Monkeys"},"image":[{"#text":"http://userserve-ak.last.fm/serve/34s/92744747.png","size":"small"},{"#text":"http://userserve-ak.last.fm/serve/64s/92744747.png","size":"medium"},{"#text":"http://userserve-ak.last.fm/serve/126/92744747.png","size":"large"},{"#text":"http://userserve-ak.last.fm/serve/300x300/92744747.png","size":"extralarge"}],"trend":0},{"name":"Video Games","duration":"239","playcount":"29240","listeners":"15696","mbid":"519e24d9-bfe8-4d3b-bfb9-dc89a7064b1f","url":"http://www.last.fm/music/Lana+Del+Rey/_/Video+Games","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"Lana Del Rey","mbid":"b7539c32-53e7-4908-bda3-81449c367da6","url":"http://www.last.fm/music/Lana+Del+Rey"},"image":[{"#text":"http://userserve-ak.last.fm/serve/34s/82268821.png","size":"small"},{"#text":"http://userserve-ak.last.fm/serve/64s/82268821.png","size":"medium"},{"#text":"http://userserve-ak.last.fm/serve/126/82268821.png","size":"large"},{"#text":"http://userserve-ak.last.fm/serve/300x300/82268821.png","size":"extralarge"}],"trend":3},{"name":"Birthday","duration":"215","playcount":"36855","listeners":"15526","mbid":"8b2d135d-2f37-4a1c-8795-35ec075be68f","url":"http://www.last.fm/music/Katy+Perry/_/Birthday","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"Katy Perry","mbid":"122d63fc-8671-43e4-9752-34e846d62a9c","url":"http://www.last.fm/music/Katy+Perry"},"image":[{"#text":"http://userserve-ak.last.fm/serve/34s/98230957.png","size":"small"},{"#text":"http://userserve-ak.last.fm/serve/64s/98230957.png","size":"medium"},{"#text":"http://userserve-ak.last.fm/serve/126/98230957.png","size":"large"},{"#text":"http://userserve-ak.last.fm/serve/300x300/98230957.png","size":"extralarge"}],"trend":2},{"name":"Stay with Me","duration":"173","playcount":"44241","listeners":"15424","mbid":"","url":"http://www.last.fm/music/Sam+Smith/_/Stay+with+Me","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"Sam Smith","mbid":"5a85c140-dcf9-4dd2-b2c8-aff0471549f3","url":"http://www.last.fm/music/Sam+Smith"},"image":[{"#text":"http://userserve-ak.last.fm/serve/34s/99230175.png","size":"small"},{"#text":"http://userserve-ak.last.fm/serve/64s/99230175.png","size":"medium"},{"#text":"http://userserve-ak.last.fm/serve/126/99230175.png","size":"large"},{"#text":"http://userserve-ak.last.fm/serve/300x300/99230175.png","size":"extralarge"}],"trend":0},{"name":"Seven Nation Army","duration":"230","playcount":"23651","listeners":"15394","mbid":"b49624c9-5a7b-4822-82b9-ce997decbe07","url":"http://www.last.fm/music/The+White+Stripes/_/Seven+Nation+Army","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"The White Stripes","mbid":"11ae9fbb-f3d7-4a47-936f-4c0a04d3b3b5","url":"http://www.last.fm/music/The+White+Stripes"},"image":[{"#text":"http://userserve-ak.last.fm/serve/34s/50892057.png","size":"small"},{"#text":"http://userserve-ak.last.fm/serve/64s/50892057.png","size":"medium"},{"#text":"http://userserve-ak.last.fm/serve/126/50892057.png","size":"large"},{"#text":"http://userserve-ak.last.fm/serve/300x300/50892057.png","size":"extralarge"}],"trend":0},{"name":"Get Lucky (feat. Pharrell Williams)","duration":"102","playcount":"24588","listeners":"15402","mbid":"","url":"http://www.last.fm/music/Daft+Punk/_/Get+Lucky+(feat.+Pharrell+Williams)","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"Daft Punk","mbid":"056e4f3e-d505-4dad-8ec1-d04f521cbb56","url":"http://www.last.fm/music/Daft+Punk"},"image":[{"#text":"http://userserve-ak.last.fm/serve/34s/92459761.png","size":"small"},{"#text":"http://userserve-ak.last.fm/serve/64s/92459761.png","size":"medium"},{"#text":"http://userserve-ak.last.fm/serve/126/92459761.png","size":"large"},{"#text":"http://userserve-ak.last.fm/serve/300x300/92459761.png","size":"extralarge"}],"trend":2},{"name":"Blue Jeans","duration":"209","playcount":"30065","listeners":"15374","mbid":"850e0d03-41bf-4d80-bafd-533d589f4c08","url":"http://www.last.fm/music/Lana+Del+Rey/_/Blue+Jeans","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"Lana Del Rey","mbid":"b7539c32-53e7-4908-bda3-81449c367da6","url":"http://www.last.fm/music/Lana+Del+Rey"},"image":[{"#text":"http://userserve-ak.last.fm/serve/34s/82268821.png","size":"small"},{"#text":"http://userserve-ak.last.fm/serve/64s/82268821.png","size":"medium"},{"#text":"http://userserve-ak.last.fm/serve/126/82268821.png","size":"large"},{"#text":"http://userserve-ak.last.fm/serve/300x300/82268821.png","size":"extralarge"}],"trend":0},{"name":"Bad (feat. Vassy) - Radio Edit","duration":"171","playcount":"29659","listeners":"15344","mbid":"","url":"http://www.last.fm/music/David+Guetta/_/Bad+(feat.+Vassy)+-+Radio+Edit","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"David Guetta","mbid":"1bb1eec6-88c3-4028-8920-a985c4b9081a","url":"http://www.last.fm/music/David+Guetta"},"trend":0},{"name":"Smells Like Teen Spirit","duration":"300","playcount":"22625","listeners":"15276","mbid":"4093fffb-059c-48fb-aff6-784f34b6648a","url":"http://www.last.fm/music/Nirvana/_/Smells+Like+Teen+Spirit","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"Nirvana","mbid":"5b11f4ce-a62d-471e-81fc-a69a8278c7da","url":"http://www.last.fm/music/Nirvana"},"image":[{"#text":"http://userserve-ak.last.fm/serve/34s/83456717.png","size":"small"},{"#text":"http://userserve-ak.last.fm/serve/64s/83456717.png","size":"medium"},{"#text":"http://userserve-ak.last.fm/serve/126/83456717.png","size":"large"},{"#text":"http://userserve-ak.last.fm/serve/300x300/83456717.png","size":"extralarge"}],"trend":0},{"name":"Mr. Brightside","duration":"224","playcount":"24457","listeners":"15237","mbid":"149330ae-12e3-4392-bd0d-c0e83bec41ee","url":"http://www.last.fm/music/The+Killers/_/Mr.+Brightside","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"The Killers","mbid":"24b4aee8-32ed-4163-98f7-55bae67411ae","url":"http://www.last.fm/music/The+Killers"},"image":[{"#text":"http://userserve-ak.last.fm/serve/34s/68101062.png","size":"small"},{"#text":"http://userserve-ak.last.fm/serve/64s/68101062.png","size":"medium"},{"#text":"http://userserve-ak.last.fm/serve/126/68101062.png","size":"large"},{"#text":"http://userserve-ak.last.fm/serve/300x300/68101062.png","size":"extralarge"}],"trend":0},{"name":"Let It Go","duration":"224","playcount":"31391","listeners":"15129","mbid":"","url":"http://www.last.fm/music/Idina+Menzel/_/Let+It+Go","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"Idina Menzel","mbid":"929ca8c3-5df3-4fe9-bc59-f8d603780bce","url":"http://www.last.fm/music/Idina+Menzel"},"image":[{"#text":"http://userserve-ak.last.fm/serve/34s/95216809.png","size":"small"},{"#text":"http://userserve-ak.last.fm/serve/64s/95216809.png","size":"medium"},{"#text":"http://userserve-ak.last.fm/serve/126/95216809.png","size":"large"},{"#text":"http://userserve-ak.last.fm/serve/300x300/95216809.png","size":"extralarge"}],"trend":2},{"name":"I See Fire","duration":"301","playcount":"31057","listeners":"15044","mbid":"7d3253d7-c3ad-4c37-8318-6d3e9788e91e","url":"http://www.last.fm/music/Ed+Sheeran/_/I+See+Fire","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"Ed Sheeran","mbid":"3bca1168-e7c6-4beb-9af9-db9dc674b1fa","url":"http://www.last.fm/music/Ed+Sheeran"},"image":[{"#text":"http://userserve-ak.last.fm/serve/34s/95226015.png","size":"small"},{"#text":"http://userserve-ak.last.fm/serve/64s/95226015.png","size":"medium"},{"#text":"http://userserve-ak.last.fm/serve/126/95226015.png","size":"large"},{"#text":"http://userserve-ak.last.fm/serve/300x300/95226015.png","size":"extralarge"}],"trend":0},{"name":"On Top of the World","duration":"190","playcount":"26573","listeners":"14968","mbid":"0a702bb5-a98b-46d0-9b14-7969f4b9a444","url":"http://www.last.fm/music/Imagine+Dragons/_/On+Top+of+the+World","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"Imagine Dragons","mbid":"012151a8-0f9a-44c9-997f-ebd68b5389f9","url":"http://www.last.fm/music/Imagine+Dragons"},"image":[{"#text":"http://userserve-ak.last.fm/serve/34s/87897873.png","size":"small"},{"#text":"http://userserve-ak.last.fm/serve/64s/87897873.png","size":"medium"},{"#text":"http://userserve-ak.last.fm/serve/126/87897873.png","size":"large"},{"#text":"http://userserve-ak.last.fm/serve/300x300/87897873.png","size":"extralarge"}],"trend":2},{"name":"Stolen Dance","duration":"312","playcount":"30586","listeners":"14834","mbid":"29756056-7e37-4503-9e24-cc846759f914","url":"http://www.last.fm/music/Milky+Chance/_/Stolen+Dance","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"Milky Chance","mbid":"6d230d98-fb8d-4421-a6e8-daca4e55d53e","url":"http://www.last.fm/music/Milky+Chance"},"image":[{"#text":"http://userserve-ak.last.fm/serve/34s/97932435.png","size":"small"},{"#text":"http://userserve-ak.last.fm/serve/64s/97932435.png","size":"medium"},{"#text":"http://userserve-ak.last.fm/serve/126/97932435.png","size":"large"},{"#text":"http://userserve-ak.last.fm/serve/300x300/97932435.png","size":"extralarge"}],"trend":0},{"name":"Lonely Boy","duration":"193","playcount":"23610","listeners":"14721","mbid":"d6df9a96-5e7c-44dd-8672-9c16c746016d","url":"http://www.last.fm/music/The+Black+Keys/_/Lonely+Boy","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"The Black Keys","mbid":"d15721d8-56b4-453d-b506-fc915b14cba2","url":"http://www.last.fm/music/The+Black+Keys"},"image":[{"#text":"http://userserve-ak.last.fm/serve/34s/71475018.png","size":"small"},{"#text":"http://userserve-ak.last.fm/serve/64s/71475018.png","size":"medium"},{"#text":"http://userserve-ak.last.fm/serve/126/71475018.png","size":"large"},{"#text":"http://userserve-ak.last.fm/serve/300x300/71475018.png","size":"extralarge"}],"trend":2},{"name":"Not a Bad Thing","duration":"688","playcount":"29902","listeners":"14691","mbid":"01f4ebe7-4a79-4205-86b5-83f0c678a8a0","url":"http://www.last.fm/music/Justin+Timberlake/_/Not+a+Bad+Thing","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"Justin Timberlake","mbid":"11ed83a4-0097-4322-aa1e-8fea09def405","url":"http://www.last.fm/music/Justin+Timberlake"},"image":[{"#text":"http://userserve-ak.last.fm/serve/34s/97147465.png","size":"small"},{"#text":"http://userserve-ak.last.fm/serve/64s/97147465.png","size":"medium"},{"#text":"http://userserve-ak.last.fm/serve/126/97147465.png","size":"large"},{"#text":"http://userserve-ak.last.fm/serve/300x300/97147465.png","size":"extralarge"}],"trend":0},{"name":"Snap Out of It","duration":"192","playcount":"26407","listeners":"14665","mbid":"adadc047-e040-45d5-b020-0603db0d69dc","url":"http://www.last.fm/music/Arctic+Monkeys/_/Snap+Out+of+It","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"Arctic Monkeys","mbid":"ada7a83c-e3e1-40f1-93f9-3e73dbc9298a","url":"http://www.last.fm/music/Arctic+Monkeys"},"image":[{"#text":"http://userserve-ak.last.fm/serve/34s/92744747.png","size":"small"},{"#text":"http://userserve-ak.last.fm/serve/64s/92744747.png","size":"medium"},{"#text":"http://userserve-ak.last.fm/serve/126/92744747.png","size":"large"},{"#text":"http://userserve-ak.last.fm/serve/300x300/92744747.png","size":"extralarge"}],"trend":3},{"name":"Addicted to You","duration":"148","playcount":"27556","listeners":"14611","mbid":"a48b6119-b215-4fb4-a92e-4b9604eb8b61","url":"http://www.last.fm/music/Avicii/_/Addicted+to+You","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"Avicii","mbid":"24b930c0-5f27-4723-a5aa-3b8b830fb914","url":"http://www.last.fm/music/Avicii"},"image":[{"#text":"http://userserve-ak.last.fm/serve/34s/93069463.png","size":"small"},{"#text":"http://userserve-ak.last.fm/serve/64s/93069463.png","size":"medium"},{"#text":"http://userserve-ak.last.fm/serve/126/93069463.png","size":"large"},{"#text":"http://userserve-ak.last.fm/serve/300x300/93069463.png","size":"extralarge"}],"trend":2},{"name":"Breezeblocks","duration":"227","playcount":"25504","listeners":"14544","mbid":"09c6f879-124e-45a4-9cd6-e68742619213","url":"http://www.last.fm/music/Alt-J/_/Breezeblocks","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"Alt-J","mbid":"fc7bbf00-fbaa-4736-986b-b3ac0266ca9b","url":"http://www.last.fm/music/Alt-J"},"image":[{"#text":"http://userserve-ak.last.fm/serve/34s/83901243.png","size":"small"},{"#text":"http://userserve-ak.last.fm/serve/64s/83901243.png","size":"medium"},{"#text":"http://userserve-ak.last.fm/serve/126/83901243.png","size":"large"},{"#text":"http://userserve-ak.last.fm/serve/300x300/83901243.png","size":"extralarge"}],"trend":2},{"name":"My Love","duration":"262","playcount":"24453","listeners":"14529","mbid":"","url":"http://www.last.fm/music/Route+94/_/My+Love","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"Route 94","mbid":"e2d1f228-3aff-4e6d-8932-032f4036131b","url":"http://www.last.fm/music/Route+94"},"image":[{"#text":"http://userserve-ak.last.fm/serve/34s/98441683.png","size":"small"},{"#text":"http://userserve-ak.last.fm/serve/64s/98441683.png","size":"medium"},{"#text":"http://userserve-ak.last.fm/serve/126/98441683.png","size":"large"},{"#text":"http://userserve-ak.last.fm/serve/300x300/98441683.png","size":"extralarge"}],"trend":2},{"name":"Ho Hey","duration":"163","playcount":"22596","listeners":"14274","mbid":"17b3a3a4-9541-4f0d-a500-5b52fdb4f28d","url":"http://www.last.fm/music/The+Lumineers/_/Ho+Hey","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"The Lumineers","mbid":"4b254180-e49a-4e70-9604-e5b1d70f084f","url":"http://www.last.fm/music/The+Lumineers"},"image":[{"#text":"http://userserve-ak.last.fm/serve/34s/85356953.png","size":"small"},{"#text":"http://userserve-ak.last.fm/serve/64s/85356953.png","size":"medium"},{"#text":"http://userserve-ak.last.fm/serve/126/85356953.png","size":"large"},{"#text":"http://userserve-ak.last.fm/serve/300x300/85356953.png","size":"extralarge"}],"trend":2},{"name":"Wiggle (feat. Snoop Dogg)","duration":"193","playcount":"28735","listeners":"14298","mbid":"","url":"http://www.last.fm/music/Jason+Der%C3%BClo/_/Wiggle+(feat.+Snoop+Dogg)","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"Jason Derülo","mbid":"","url":"http://www.last.fm/music/Jason+Der%C3%BClo"},"trend":0},{"name":"No Rest for the Wicked","duration":"210","playcount":"28286","listeners":"14110","mbid":"922a79f3-a647-4125-87c3-3f7003c30391","url":"http://www.last.fm/music/Lykke+Li/_/No+Rest+for+the+Wicked","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"Lykke Li","mbid":"cc7d4686-ea02-45fd-956e-94c1a322558c","url":"http://www.last.fm/music/Lykke+Li"},"image":[{"#text":"http://userserve-ak.last.fm/serve/34s/97695169.png","size":"small"},{"#text":"http://userserve-ak.last.fm/serve/64s/97695169.png","size":"medium"},{"#text":"http://userserve-ak.last.fm/serve/126/97695169.png","size":"large"},{"#text":"http://userserve-ak.last.fm/serve/300x300/97695169.png","size":"extralarge"}],"trend":2},{"name":"Reflektor","duration":"455","playcount":"21929","listeners":"13895","mbid":"27010ab1-c6a3-483f-9267-079db2677274","url":"http://www.last.fm/music/Arcade+Fire/_/Reflektor","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"Arcade Fire","mbid":"52074ba6-e495-4ef3-9bb4-0703888a9f68","url":"http://www.last.fm/music/Arcade+Fire"},"image":[{"#text":"http://userserve-ak.last.fm/serve/34s/93250337.png","size":"small"},{"#text":"http://userserve-ak.last.fm/serve/64s/93250337.png","size":"medium"},{"#text":"http://userserve-ak.last.fm/serve/126/93250337.png","size":"large"},{"#text":"http://userserve-ak.last.fm/serve/300x300/93250337.png","size":"extralarge"}],"trend":0},{"name":"Creep","duration":"235","playcount":"22145","listeners":"13877","mbid":"1fca5461-89f7-4b81-8725-beae5e944925","url":"http://www.last.fm/music/Radiohead/_/Creep","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"Radiohead","mbid":"a74b1b7f-71a5-4011-9441-d0b5e4122711","url":"http://www.last.fm/music/Radiohead"},"image":[{"#text":"http://userserve-ak.last.fm/serve/34s/49158523.png","size":"small"},{"#text":"http://userserve-ak.last.fm/serve/64s/49158523.png","size":"medium"},{"#text":"http://userserve-ak.last.fm/serve/126/49158523.png","size":"large"},{"#text":"http://userserve-ak.last.fm/serve/300x300/49158523.png","size":"extralarge"}],"trend":0},{"name":"All of Me - Tiësto's Birthday Treatment Remix - Radio Edit","duration":"252","playcount":"23263","listeners":"13876","mbid":"","url":"http://www.last.fm/music/John+Legend/_/All+of+Me+-+Ti%C3%ABsto%27s+Birthday+Treatment+Remix+-+Radio+Edit","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"John Legend","mbid":"75a72702-a5ef-4513-bca5-c5b944903546","url":"http://www.last.fm/music/John+Legend"},"trend":0},{"name":"I Wanna Be Yours","duration":"184","playcount":"29139","listeners":"13812","mbid":"a1ff202f-f271-4646-9aac-ba7c98e3a50c","url":"http://www.last.fm/music/Arctic+Monkeys/_/I+Wanna+Be+Yours","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"Arctic Monkeys","mbid":"ada7a83c-e3e1-40f1-93f9-3e73dbc9298a","url":"http://www.last.fm/music/Arctic+Monkeys"},"image":[{"#text":"http://userserve-ak.last.fm/serve/34s/92744747.png","size":"small"},{"#text":"http://userserve-ak.last.fm/serve/64s/92744747.png","size":"medium"},{"#text":"http://userserve-ak.last.fm/serve/126/92744747.png","size":"large"},{"#text":"http://userserve-ak.last.fm/serve/300x300/92744747.png","size":"extralarge"}],"trend":0},{"name":"Young and Beautiful","duration":"236","playcount":"27798","listeners":"13680","mbid":"ec197c76-c658-4412-a9ed-353387e5d0f7","url":"http://www.last.fm/music/Lana+Del+Rey/_/Young+and+Beautiful","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"Lana Del Rey","mbid":"b7539c32-53e7-4908-bda3-81449c367da6","url":"http://www.last.fm/music/Lana+Del+Rey"},"image":[{"#text":"http://userserve-ak.last.fm/serve/34s/96473271.png","size":"small"},{"#text":"http://userserve-ak.last.fm/serve/64s/96473271.png","size":"medium"},{"#text":"http://userserve-ak.last.fm/serve/126/96473271.png","size":"large"},{"#text":"http://userserve-ak.last.fm/serve/300x300/96473271.png","size":"extralarge"}],"trend":0},{"name":"Californication","duration":"321","playcount":"19674","listeners":"13620","mbid":"44188859-28b3-4d49-ba8e-426fd85f8d8f","url":"http://www.last.fm/music/Red+Hot+Chili+Peppers/_/Californication","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"Red Hot Chili Peppers","mbid":"8bfac288-ccc5-448d-9573-c33ea2aa5c30","url":"http://www.last.fm/music/Red+Hot+Chili+Peppers"},"image":[{"#text":"http://userserve-ak.last.fm/serve/34s/42739473.png","size":"small"},{"#text":"http://userserve-ak.last.fm/serve/64s/42739473.png","size":"medium"},{"#text":"http://userserve-ak.last.fm/serve/126/42739473.png","size":"large"},{"#text":"http://userserve-ak.last.fm/serve/300x300/42739473.png","size":"extralarge"}],"trend":0},{"name":"The Scientist","duration":"306","playcount":"21494","listeners":"13326","mbid":"bd587bd9-f781-4b33-8ea1-f4e6d48de658","url":"http://www.last.fm/music/Coldplay/_/The+Scientist","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"Coldplay","mbid":"cc197bad-dc9c-440d-a5b5-d52ba2e14234","url":"http://www.last.fm/music/Coldplay"},"image":[{"#text":"http://userserve-ak.last.fm/serve/34s/88463753.png","size":"small"},{"#text":"http://userserve-ak.last.fm/serve/64s/88463753.png","size":"medium"},{"#text":"http://userserve-ak.last.fm/serve/126/88463753.png","size":"large"},{"#text":"http://userserve-ak.last.fm/serve/300x300/88463753.png","size":"extralarge"}],"trend":2},{"name":"Do It Again","duration":"307","playcount":"37044","listeners":"13340","mbid":"e7acc02d-7a5a-41a6-9f26-1c6ddd269423","url":"http://www.last.fm/music/R%C3%B6yksopp+&+Robyn/_/Do+It+Again","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"Röyksopp & Robyn","mbid":"","url":"http://www.last.fm/music/R%C3%B6yksopp+&+Robyn"},"image":[{"#text":"http://userserve-ak.last.fm/serve/34s/98517489.png","size":"small"},{"#text":"http://userserve-ak.last.fm/serve/64s/98517489.png","size":"medium"},{"#text":"http://userserve-ak.last.fm/serve/126/98517489.png","size":"large"},{"#text":"http://userserve-ak.last.fm/serve/300x300/98517489.png","size":"extralarge"}],"trend":3},{"name":"It's Time","duration":"238","playcount":"24371","listeners":"13242","mbid":"9587c908-118e-4bad-a69a-10e8373c45ee","url":"http://www.last.fm/music/Imagine+Dragons/_/It%27s+Time","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"Imagine Dragons","mbid":"012151a8-0f9a-44c9-997f-ebd68b5389f9","url":"http://www.last.fm/music/Imagine+Dragons"},"image":[{"#text":"http://userserve-ak.last.fm/serve/34s/87897873.png","size":"small"},{"#text":"http://userserve-ak.last.fm/serve/64s/87897873.png","size":"medium"},{"#text":"http://userserve-ak.last.fm/serve/126/87897873.png","size":"large"},{"#text":"http://userserve-ak.last.fm/serve/300x300/87897873.png","size":"extralarge"}],"trend":2},{"name":"Work","duration":"251","playcount":"34868","listeners":"13176","mbid":"fbfb7d0a-151b-44da-b3b4-6fbfe1220d9e","url":"http://www.last.fm/music/Iggy+Azalea/_/Work","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"Iggy Azalea","mbid":"3a052c99-8c18-484a-8beb-9873b4fb3106","url":"http://www.last.fm/music/Iggy+Azalea"},"image":[{"#text":"http://userserve-ak.last.fm/serve/34s/97433945.png","size":"small"},{"#text":"http://userserve-ak.last.fm/serve/64s/97433945.png","size":"medium"},{"#text":"http://userserve-ak.last.fm/serve/126/97433945.png","size":"large"},{"#text":"http://userserve-ak.last.fm/serve/300x300/97433945.png","size":"extralarge"}],"trend":0},{"name":"Kids","duration":"302","playcount":"19166","listeners":"13094","mbid":"95f9393c-66fb-4b1e-a97c-9061d291d5de","url":"http://www.last.fm/music/MGMT/_/Kids","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"MGMT","mbid":"50e6288e-3db5-4253-ae51-5e8738ef2c31","url":"http://www.last.fm/music/MGMT"},"image":[{"#text":"http://userserve-ak.last.fm/serve/34s/90424487.png","size":"small"},{"#text":"http://userserve-ak.last.fm/serve/64s/90424487.png","size":"medium"},{"#text":"http://userserve-ak.last.fm/serve/126/90424487.png","size":"large"},{"#text":"http://userserve-ak.last.fm/serve/300x300/90424487.png","size":"extralarge"}],"trend":0},{"name":"National Anthem","duration":"231","playcount":"25434","listeners":"12851","mbid":"4211cf0c-e3c2-400a-b480-40a90134ee6a","url":"http://www.last.fm/music/Lana+Del+Rey/_/National+Anthem","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"Lana Del Rey","mbid":"b7539c32-53e7-4908-bda3-81449c367da6","url":"http://www.last.fm/music/Lana+Del+Rey"},"image":[{"#text":"http://userserve-ak.last.fm/serve/34s/88340753.png","size":"small"},{"#text":"http://userserve-ak.last.fm/serve/64s/88340753.png","size":"medium"},{"#text":"http://userserve-ak.last.fm/serve/126/88340753.png","size":"large"},{"#text":"http://userserve-ak.last.fm/serve/300x300/88340753.png","size":"extralarge"}],"trend":0},{"name":"Sex on Fire","duration":"203","playcount":"19262","listeners":"12633","mbid":"c8702968-d38f-49ff-b7fd-acaac95285fb","url":"http://www.last.fm/music/Kings+of+Leon/_/Sex+on+Fire","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"Kings of Leon","mbid":"6ffb8ea9-2370-44d8-b678-e9237bbd347b","url":"http://www.last.fm/music/Kings+of+Leon"},"image":[{"#text":"http://userserve-ak.last.fm/serve/34s/81102241.png","size":"small"},{"#text":"http://userserve-ak.last.fm/serve/64s/81102241.png","size":"medium"},{"#text":"http://userserve-ak.last.fm/serve/126/81102241.png","size":"large"},{"#text":"http://userserve-ak.last.fm/serve/300x300/81102241.png","size":"extralarge"}],"trend":0},{"name":"Knee Socks","duration":"257","playcount":"22762","listeners":"12629","mbid":"e756875e-cc4f-4744-a7b8-c68ee96978fb","url":"http://www.last.fm/music/Arctic+Monkeys/_/Knee+Socks","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"Arctic Monkeys","mbid":"ada7a83c-e3e1-40f1-93f9-3e73dbc9298a","url":"http://www.last.fm/music/Arctic+Monkeys"},"image":[{"#text":"http://userserve-ak.last.fm/serve/34s/92744747.png","size":"small"},{"#text":"http://userserve-ak.last.fm/serve/64s/92744747.png","size":"medium"},{"#text":"http://userserve-ak.last.fm/serve/126/92744747.png","size":"large"},{"#text":"http://userserve-ak.last.fm/serve/300x300/92744747.png","size":"extralarge"}],"trend":0},{"name":"Feel Good Inc.","duration":"207","playcount":"19511","listeners":"12563","mbid":"f6b69ac7-5cb2-4ae0-9f3e-48f5633a7e12","url":"http://www.last.fm/music/Gorillaz/_/Feel+Good+Inc.","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"Gorillaz","mbid":"e21857d5-3256-4547-afb3-4b6ded592596","url":"http://www.last.fm/music/Gorillaz"},"image":[{"#text":"http://userserve-ak.last.fm/serve/34s/80205651.png","size":"small"},{"#text":"http://userserve-ak.last.fm/serve/64s/80205651.png","size":"medium"},{"#text":"http://userserve-ak.last.fm/serve/126/80205651.png","size":"large"},{"#text":"http://userserve-ak.last.fm/serve/300x300/80205651.png","size":"extralarge"}],"trend":0},{"name":"Love Me Again","duration":"238","playcount":"22197","listeners":"12521","mbid":"71ea2ffb-fed6-4d57-a3e1-1c863ec1bf0f","url":"http://www.last.fm/music/John+Newman/_/Love+Me+Again","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"John Newman","mbid":"589ef702-7f3a-4a1c-8f2c-4727005cfc0e","url":"http://www.last.fm/music/John+Newman"},"image":[{"#text":"http://userserve-ak.last.fm/serve/34s/92990641.png","size":"small"},{"#text":"http://userserve-ak.last.fm/serve/64s/92990641.png","size":"medium"},{"#text":"http://userserve-ak.last.fm/serve/126/92990641.png","size":"large"},{"#text":"http://userserve-ak.last.fm/serve/300x300/92990641.png","size":"extralarge"}],"trend":2},{"name":"Viva la Vida","duration":"240","playcount":"20094","listeners":"12434","mbid":"6eb6e977-3fa9-4b9b-b56a-00b6e0e47616","url":"http://www.last.fm/music/Coldplay/_/Viva+la+Vida","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"Coldplay","mbid":"cc197bad-dc9c-440d-a5b5-d52ba2e14234","url":"http://www.last.fm/music/Coldplay"},"image":[{"#text":"http://userserve-ak.last.fm/serve/34s/88588929.png","size":"small"},{"#text":"http://userserve-ak.last.fm/serve/64s/88588929.png","size":"medium"},{"#text":"http://userserve-ak.last.fm/serve/126/88588929.png","size":"large"},{"#text":"http://userserve-ak.last.fm/serve/300x300/88588929.png","size":"extralarge"}],"trend":2},{"name":"No. 1 Party Anthem","duration":"243","playcount":"21634","listeners":"12367","mbid":"52ba3e3d-157f-400a-a603-6fb00ba3968c","url":"http://www.last.fm/music/Arctic+Monkeys/_/No.+1+Party+Anthem","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"Arctic Monkeys","mbid":"ada7a83c-e3e1-40f1-93f9-3e73dbc9298a","url":"http://www.last.fm/music/Arctic+Monkeys"},"image":[{"#text":"http://userserve-ak.last.fm/serve/34s/92744747.png","size":"small"},{"#text":"http://userserve-ak.last.fm/serve/64s/92744747.png","size":"medium"},{"#text":"http://userserve-ak.last.fm/serve/126/92744747.png","size":"large"},{"#text":"http://userserve-ak.last.fm/serve/300x300/92744747.png","size":"extralarge"}],"trend":0},{"name":"Instant Crush (feat. Julian Casablancas)","duration":"337","playcount":"20573","listeners":"12357","mbid":"","url":"http://www.last.fm/music/Daft+Punk/_/Instant+Crush+(feat.+Julian+Casablancas)","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"Daft Punk","mbid":"056e4f3e-d505-4dad-8ec1-d04f521cbb56","url":"http://www.last.fm/music/Daft+Punk"},"image":[{"#text":"http://userserve-ak.last.fm/serve/34s/92459761.png","size":"small"},{"#text":"http://userserve-ak.last.fm/serve/64s/92459761.png","size":"medium"},{"#text":"http://userserve-ak.last.fm/serve/126/92459761.png","size":"large"},{"#text":"http://userserve-ak.last.fm/serve/300x300/92459761.png","size":"extralarge"}],"trend":0},{"name":"Where Is My Mind?","duration":"227","playcount":"19492","listeners":"12328","mbid":"8b2384d6-b398-4a43-ad7e-72ec300f2f45","url":"http://www.last.fm/music/Pixies/_/Where+Is+My+Mind%3F","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"Pixies","mbid":"b6b2bb8d-54a9-491f-9607-7b546023b433","url":"http://www.last.fm/music/Pixies"},"image":[{"#text":"http://userserve-ak.last.fm/serve/34s/82423469.png","size":"small"},{"#text":"http://userserve-ak.last.fm/serve/64s/82423469.png","size":"medium"},{"#text":"http://userserve-ak.last.fm/serve/126/82423469.png","size":"large"},{"#text":"http://userserve-ak.last.fm/serve/300x300/82423469.png","size":"extralarge"}],"trend":0},{"name":"Always in My Head","duration":"294","playcount":"35830","listeners":"12307","mbid":"5c278fd7-fc78-43f2-b74a-e428ae811ade","url":"http://www.last.fm/music/Coldplay/_/Always+in+My+Head","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"Coldplay","mbid":"cc197bad-dc9c-440d-a5b5-d52ba2e14234","url":"http://www.last.fm/music/Coldplay"},"image":[{"#text":"http://userserve-ak.last.fm/serve/34s/97289471.png","size":"small"},{"#text":"http://userserve-ak.last.fm/serve/64s/97289471.png","size":"medium"},{"#text":"http://userserve-ak.last.fm/serve/126/97289471.png","size":"large"},{"#text":"http://userserve-ak.last.fm/serve/300x300/97289471.png","size":"extralarge"}],"trend":2},{"name":"Crystalised","duration":"202","playcount":"19673","listeners":"12277","mbid":"c3562dfa-25a1-4058-bf25-655d67bd00e3","url":"http://www.last.fm/music/The+xx/_/Crystalised","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"The xx","mbid":"c5c2ea1c-4bde-4f4d-bd0b-47b200bf99d6","url":"http://www.last.fm/music/The+xx"},"image":[{"#text":"http://userserve-ak.last.fm/serve/34s/88381869.png","size":"small"},{"#text":"http://userserve-ak.last.fm/serve/64s/88381869.png","size":"medium"},{"#text":"http://userserve-ak.last.fm/serve/126/88381869.png","size":"large"},{"#text":"http://userserve-ak.last.fm/serve/300x300/88381869.png","size":"extralarge"}],"trend":0},{"name":"Ink","duration":"30","playcount":"38467","listeners":"12268","mbid":"ffcc1b43-a189-4125-93b5-e91270ec32cf","url":"http://www.last.fm/music/Coldplay/_/Ink","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"Coldplay","mbid":"cc197bad-dc9c-440d-a5b5-d52ba2e14234","url":"http://www.last.fm/music/Coldplay"},"image":[{"#text":"http://userserve-ak.last.fm/serve/34s/97289471.png","size":"small"},{"#text":"http://userserve-ak.last.fm/serve/64s/97289471.png","size":"medium"},{"#text":"http://userserve-ak.last.fm/serve/126/97289471.png","size":"large"},{"#text":"http://userserve-ak.last.fm/serve/300x300/97289471.png","size":"extralarge"}],"trend":2},{"name":"My Number","duration":"213","playcount":"19113","listeners":"12247","mbid":"ded51003-df0e-47e0-9bda-6985627bcb88","url":"http://www.last.fm/music/Foals/_/My+Number","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"Foals","mbid":"6a65d878-fcd0-42cf-aff9-ca1d636a8bcc","url":"http://www.last.fm/music/Foals"},"image":[{"#text":"http://userserve-ak.last.fm/serve/34s/86656233.png","size":"small"},{"#text":"http://userserve-ak.last.fm/serve/64s/86656233.png","size":"medium"},{"#text":"http://userserve-ak.last.fm/serve/126/86656233.png","size":"large"},{"#text":"http://userserve-ak.last.fm/serve/300x300/86656233.png","size":"extralarge"}],"trend":2},{"name":"Wrecking Ball","duration":"221","playcount":"21812","listeners":"12111","mbid":"4c217d10-029a-487b-86a7-5413f05e1950","url":"http://www.last.fm/music/Miley+Cyrus/_/Wrecking+Ball","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"Miley Cyrus","mbid":"7e9bd05a-117f-4cce-87bc-e011527a8b18","url":"http://www.last.fm/music/Miley+Cyrus"},"image":[{"#text":"http://userserve-ak.last.fm/serve/34s/92702859.png","size":"small"},{"#text":"http://userserve-ak.last.fm/serve/64s/92702859.png","size":"medium"},{"#text":"http://userserve-ak.last.fm/serve/126/92702859.png","size":"large"},{"#text":"http://userserve-ak.last.fm/serve/300x300/92702859.png","size":"extralarge"}],"trend":2},{"name":"Fluorescent Adolescent","duration":"174","playcount":"20270","listeners":"12101","mbid":"9aab89a3-2b63-4e30-bab9-7994bedaf6b3","url":"http://www.last.fm/music/Arctic+Monkeys/_/Fluorescent+Adolescent","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"Arctic Monkeys","mbid":"ada7a83c-e3e1-40f1-93f9-3e73dbc9298a","url":"http://www.last.fm/music/Arctic+Monkeys"},"image":[{"#text":"http://userserve-ak.last.fm/serve/34s/33692189.png","size":"small"},{"#text":"http://userserve-ak.last.fm/serve/64s/33692189.png","size":"medium"},{"#text":"http://userserve-ak.last.fm/serve/126/33692189.png","size":"large"},{"#text":"http://userserve-ak.last.fm/serve/300x300/33692189.png","size":"extralarge"}],"trend":0},{"name":"Electric Feel","duration":"229","playcount":"17523","listeners":"12102","mbid":"0b19c35d-c8f6-409b-a492-e5da9a7f94c7","url":"http://www.last.fm/music/MGMT/_/Electric+Feel","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"MGMT","mbid":"50e6288e-3db5-4253-ae51-5e8738ef2c31","url":"http://www.last.fm/music/MGMT"},"image":[{"#text":"http://userserve-ak.last.fm/serve/34s/90424487.png","size":"small"},{"#text":"http://userserve-ak.last.fm/serve/64s/90424487.png","size":"medium"},{"#text":"http://userserve-ak.last.fm/serve/126/90424487.png","size":"large"},{"#text":"http://userserve-ak.last.fm/serve/300x300/90424487.png","size":"extralarge"}],"trend":0},{"name":"Skinny Love","duration":"237","playcount":"18877","listeners":"12032","mbid":"e1ed517e-bc4e-4dce-b007-e8ecccede8f3","url":"http://www.last.fm/music/Bon+Iver/_/Skinny+Love","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"Bon Iver","mbid":"437a0e49-c6ae-42f6-a6c1-84f25ed366bc","url":"http://www.last.fm/music/Bon+Iver"},"image":[{"#text":"http://userserve-ak.last.fm/serve/34s/93278287.png","size":"small"},{"#text":"http://userserve-ak.last.fm/serve/64s/93278287.png","size":"medium"},{"#text":"http://userserve-ak.last.fm/serve/126/93278287.png","size":"large"},{"#text":"http://userserve-ak.last.fm/serve/300x300/93278287.png","size":"extralarge"}],"trend":0},{"name":"Fix You","duration":"295","playcount":"19141","listeners":"11958","mbid":"858618a8-2a0a-408d-8422-c2f0d70ba30f","url":"http://www.last.fm/music/Coldplay/_/Fix+You","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"Coldplay","mbid":"cc197bad-dc9c-440d-a5b5-d52ba2e14234","url":"http://www.last.fm/music/Coldplay"},"image":[{"#text":"http://userserve-ak.last.fm/serve/34s/88463793.png","size":"small"},{"#text":"http://userserve-ak.last.fm/serve/64s/88463793.png","size":"medium"},{"#text":"http://userserve-ak.last.fm/serve/126/88463793.png","size":"large"},{"#text":"http://userserve-ak.last.fm/serve/300x300/88463793.png","size":"extralarge"}],"trend":2},{"name":"Glory and Gore","duration":"211","playcount":"23457","listeners":"11873","mbid":"a886ee67-ae0e-4dca-8766-11475c131524","url":"http://www.last.fm/music/Lorde/_/Glory+and+Gore","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"Lorde","mbid":"14cd21f6-df8e-4bff-af75-0dcfeb307c5d","url":"http://www.last.fm/music/Lorde"},"image":[{"#text":"http://userserve-ak.last.fm/serve/34s/93158109.png","size":"small"},{"#text":"http://userserve-ak.last.fm/serve/64s/93158109.png","size":"medium"},{"#text":"http://userserve-ak.last.fm/serve/126/93158109.png","size":"large"},{"#text":"http://userserve-ak.last.fm/serve/300x300/93158109.png","size":"extralarge"}],"trend":2},{"name":"Take Me Out","duration":"288","playcount":"17443","listeners":"11843","mbid":"2f5f5cad-f018-4cbf-8254-21d90e05ae1b","url":"http://www.last.fm/music/Franz+Ferdinand/_/Take+Me+Out","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"Franz Ferdinand","mbid":"aa7a2827-f74b-473c-bd79-03d065835cf7","url":"http://www.last.fm/music/Franz+Ferdinand"},"image":[{"#text":"http://userserve-ak.last.fm/serve/34s/51497369.png","size":"small"},{"#text":"http://userserve-ak.last.fm/serve/64s/51497369.png","size":"medium"},{"#text":"http://userserve-ak.last.fm/serve/126/51497369.png","size":"large"},{"#text":"http://userserve-ak.last.fm/serve/300x300/51497369.png","size":"extralarge"}],"trend":0},{"name":"Coming of Age","duration":"280","playcount":"19389","listeners":"11849","mbid":"fd15284f-208b-40b7-8c1c-91588b67a14b","url":"http://www.last.fm/music/Foster+the+People/_/Coming+of+Age","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"Foster the People","mbid":"e0e1a584-dd0a-4bd1-88d1-c4c62895039d","url":"http://www.last.fm/music/Foster+the+People"},"image":[{"#text":"http://userserve-ak.last.fm/serve/34s/96064521.png","size":"small"},{"#text":"http://userserve-ak.last.fm/serve/64s/96064521.png","size":"medium"},{"#text":"http://userserve-ak.last.fm/serve/126/96064521.png","size":"large"},{"#text":"http://userserve-ak.last.fm/serve/300x300/96064521.png","size":"extralarge"}],"trend":0},{"name":"Get Lucky (Radio Edit) [feat. Pharrell Williams]","duration":"248","playcount":"16899","listeners":"11842","mbid":"","url":"http://www.last.fm/music/Daft+Punk/_/Get+Lucky+(Radio+Edit)+%5Bfeat.+Pharrell+Williams%5D","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"Daft Punk","mbid":"056e4f3e-d505-4dad-8ec1-d04f521cbb56","url":"http://www.last.fm/music/Daft+Punk"},"trend":0},{"name":"What You Know","duration":"191","playcount":"19120","listeners":"11834","mbid":"079f085f-a37f-4d23-99cc-1138d22bc6ce","url":"http://www.last.fm/music/Two+Door+Cinema+Club/_/What+You+Know","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"Two Door Cinema Club","mbid":"6f1de078-6684-4792-820d-2ffad64c15ed","url":"http://www.last.fm/music/Two+Door+Cinema+Club"},"image":[{"#text":"http://userserve-ak.last.fm/serve/34s/91992741.png","size":"small"},{"#text":"http://userserve-ak.last.fm/serve/64s/91992741.png","size":"medium"},{"#text":"http://userserve-ak.last.fm/serve/126/91992741.png","size":"large"},{"#text":"http://userserve-ak.last.fm/serve/300x300/91992741.png","size":"extralarge"}],"trend":0},{"name":"Come as You Are","duration":"219","playcount":"17294","listeners":"11783","mbid":"053ba773-c458-4972-99fa-edfca8fb7fb3","url":"http://www.last.fm/music/Nirvana/_/Come+as+You+Are","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"Nirvana","mbid":"5b11f4ce-a62d-471e-81fc-a69a8278c7da","url":"http://www.last.fm/music/Nirvana"},"image":[{"#text":"http://userserve-ak.last.fm/serve/34s/83456717.png","size":"small"},{"#text":"http://userserve-ak.last.fm/serve/64s/83456717.png","size":"medium"},{"#text":"http://userserve-ak.last.fm/serve/126/83456717.png","size":"large"},{"#text":"http://userserve-ak.last.fm/serve/300x300/83456717.png","size":"extralarge"}],"trend":0},{"name":"Can't Remember to Forget You","duration":"207","playcount":"20010","listeners":"11766","mbid":"","url":"http://www.last.fm/music/Shakira/_/Can%27t+Remember+to+Forget+You","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"Shakira","mbid":"726cb350-d775-4e07-b006-898555f24b0d","url":"http://www.last.fm/music/Shakira"},"trend":2},{"name":"Ain't It Fun","duration":"202","playcount":"25366","listeners":"11728","mbid":"","url":"http://www.last.fm/music/Paramore/_/Ain%27t+It+Fun","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"Paramore","mbid":"44cf61b8-5197-448a-b82b-cef6ee89fac5","url":"http://www.last.fm/music/Paramore"},"trend":0},{"name":"Of the Night","duration":"214","playcount":"21097","listeners":"11701","mbid":"95dbce57-56ee-457b-be66-c2998a804a3a","url":"http://www.last.fm/music/Bastille/_/Of+the+Night","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"Bastille","mbid":"16c07e8e-e1ef-452c-bbb7-0cda599c1ffd","url":"http://www.last.fm/music/Bastille"},"image":[{"#text":"http://userserve-ak.last.fm/serve/34s/94542125.png","size":"small"},{"#text":"http://userserve-ak.last.fm/serve/64s/94542125.png","size":"medium"},{"#text":"http://userserve-ak.last.fm/serve/126/94542125.png","size":"large"},{"#text":"http://userserve-ak.last.fm/serve/300x300/94542125.png","size":"extralarge"}],"trend":2},{"name":"I Want It All","duration":"184","playcount":"19932","listeners":"11663","mbid":"86c8c108-a134-467e-ab0f-4f867c2acfac","url":"http://www.last.fm/music/Arctic+Monkeys/_/I+Want+It+All","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"Arctic Monkeys","mbid":"ada7a83c-e3e1-40f1-93f9-3e73dbc9298a","url":"http://www.last.fm/music/Arctic+Monkeys"},"image":[{"#text":"http://userserve-ak.last.fm/serve/34s/92744747.png","size":"small"},{"#text":"http://userserve-ak.last.fm/serve/64s/92744747.png","size":"medium"},{"#text":"http://userserve-ak.last.fm/serve/126/92744747.png","size":"large"},{"#text":"http://userserve-ak.last.fm/serve/300x300/92744747.png","size":"extralarge"}],"trend":0},{"name":"The Wire","duration":"245","playcount":"19517","listeners":"11653","mbid":"87675a11-6b2a-4034-9bdc-15fc32ef3470","url":"http://www.last.fm/music/HAIM/_/The+Wire","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"HAIM","mbid":"6da01dec-d03c-492f-8f22-3969ea340888","url":"http://www.last.fm/music/HAIM"},"image":[{"#text":"http://userserve-ak.last.fm/serve/34s/92568911.png","size":"small"},{"#text":"http://userserve-ak.last.fm/serve/64s/92568911.png","size":"medium"},{"#text":"http://userserve-ak.last.fm/serve/126/92568911.png","size":"large"},{"#text":"http://userserve-ak.last.fm/serve/300x300/92568911.png","size":"extralarge"}],"trend":2},{"name":"In the End","duration":"215","playcount":"19191","listeners":"11560","mbid":"4d2f896d-e16e-4df1-99f5-72db4d1c266c","url":"http://www.last.fm/music/Linkin+Park/_/In+the+End","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"Linkin Park","mbid":"f59c5520-5f46-4d2c-b2c4-822eabf53419","url":"http://www.last.fm/music/Linkin+Park"},"image":[{"#text":"http://userserve-ak.last.fm/serve/34s/63334151.png","size":"small"},{"#text":"http://userserve-ak.last.fm/serve/64s/63334151.png","size":"medium"},{"#text":"http://userserve-ak.last.fm/serve/126/63334151.png","size":"large"},{"#text":"http://userserve-ak.last.fm/serve/300x300/63334151.png","size":"extralarge"}],"trend":0},{"name":"Somebody That I Used to Know","duration":"242","playcount":"18747","listeners":"11447","mbid":"f24dd049-a90a-476f-9919-2820ce1c51a5","url":"http://www.last.fm/music/Gotye/_/Somebody+That+I+Used+to+Know","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"Gotye","mbid":"6f6fd596-76e0-4b82-aa37-f558ac2d337b","url":"http://www.last.fm/music/Gotye"},"image":[{"#text":"http://userserve-ak.last.fm/serve/34s/68234032.png","size":"small"},{"#text":"http://userserve-ak.last.fm/serve/64s/68234032.png","size":"medium"},{"#text":"http://userserve-ak.last.fm/serve/126/68234032.png","size":"large"},{"#text":"http://userserve-ak.last.fm/serve/300x300/68234032.png","size":"extralarge"}],"trend":0},{"name":"True Love","duration":"239","playcount":"32786","listeners":"11453","mbid":"b4cb134b-9811-49d6-9c69-450f0d6f02ae","url":"http://www.last.fm/music/Coldplay/_/True+Love","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"Coldplay","mbid":"cc197bad-dc9c-440d-a5b5-d52ba2e14234","url":"http://www.last.fm/music/Coldplay"},"image":[{"#text":"http://userserve-ak.last.fm/serve/34s/97289471.png","size":"small"},{"#text":"http://userserve-ak.last.fm/serve/64s/97289471.png","size":"medium"},{"#text":"http://userserve-ak.last.fm/serve/126/97289471.png","size":"large"},{"#text":"http://userserve-ak.last.fm/serve/300x300/97289471.png","size":"extralarge"}],"trend":2},{"name":"Changes - Original Mix","duration":"345","playcount":"18431","listeners":"11433","mbid":"","url":"http://www.last.fm/music/Faul+&+Wad+Ad+vs.+Pnau/_/Changes+-+Original+Mix","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"Faul & Wad Ad vs. Pnau","mbid":"","url":"http://www.last.fm/music/Faul+&+Wad+Ad+vs.+Pnau"},"trend":2},{"name":"We Exist","duration":"344","playcount":"21165","listeners":"11398","mbid":"","url":"http://www.last.fm/music/Arcade+Fire/_/We+Exist","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"Arcade Fire","mbid":"52074ba6-e495-4ef3-9bb4-0703888a9f68","url":"http://www.last.fm/music/Arcade+Fire"},"image":[{"#text":"http://userserve-ak.last.fm/serve/34s/93250337.png","size":"small"},{"#text":"http://userserve-ak.last.fm/serve/64s/93250337.png","size":"medium"},{"#text":"http://userserve-ak.last.fm/serve/126/93250337.png","size":"large"},{"#text":"http://userserve-ak.last.fm/serve/300x300/93250337.png","size":"extralarge"}],"trend":2},{"name":"Dark Paradise","duration":"243","playcount":"22025","listeners":"11365","mbid":"9e3d84e8-9475-4911-ba9c-15c583f9951b","url":"http://www.last.fm/music/Lana+Del+Rey/_/Dark+Paradise","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"Lana Del Rey","mbid":"b7539c32-53e7-4908-bda3-81449c367da6","url":"http://www.last.fm/music/Lana+Del+Rey"},"image":[{"#text":"http://userserve-ak.last.fm/serve/34s/88340753.png","size":"small"},{"#text":"http://userserve-ak.last.fm/serve/64s/88340753.png","size":"medium"},{"#text":"http://userserve-ak.last.fm/serve/126/88340753.png","size":"large"},{"#text":"http://userserve-ak.last.fm/serve/300x300/88340753.png","size":"extralarge"}],"trend":0},{"name":"#SELFIE","duration":"184","playcount":"19968","listeners":"11371","mbid":"ee7b4261-80c2-478f-acee-61b533505584","url":"http://www.last.fm/music/The+Chainsmokers/_/%23SELFIE","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"The Chainsmokers","mbid":"91a81925-92f9-4fc9-b897-93cf01226282","url":"http://www.last.fm/music/The+Chainsmokers"},"image":[{"#text":"http://userserve-ak.last.fm/serve/34s/98577807.jpg","size":"small"},{"#text":"http://userserve-ak.last.fm/serve/64s/98577807.jpg","size":"medium"},{"#text":"http://userserve-ak.last.fm/serve/126/98577807.jpg","size":"large"},{"#text":"http://userserve-ak.last.fm/serve/300x300/98577807.jpg","size":"extralarge"}],"trend":3},{"name":"Yellow","duration":"268","playcount":"17541","listeners":"11317","mbid":"cc72ece1-c7d2-46b7-b9b8-2f274c6d8c0a","url":"http://www.last.fm/music/Coldplay/_/Yellow","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"Coldplay","mbid":"cc197bad-dc9c-440d-a5b5-d52ba2e14234","url":"http://www.last.fm/music/Coldplay"},"image":[{"#text":"http://userserve-ak.last.fm/serve/34s/88463661.png","size":"small"},{"#text":"http://userserve-ak.last.fm/serve/64s/88463661.png","size":"medium"},{"#text":"http://userserve-ak.last.fm/serve/126/88463661.png","size":"large"},{"#text":"http://userserve-ak.last.fm/serve/300x300/88463661.png","size":"extralarge"}],"trend":2},{"name":"I Got U","duration":"286","playcount":"20203","listeners":"11321","mbid":"","url":"http://www.last.fm/music/Duke+Dumont/_/I+Got+U","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"Duke Dumont","mbid":"188437a9-7c29-4b9a-9507-b5a95ab5829a","url":"http://www.last.fm/music/Duke+Dumont"},"image":[{"#text":"http://userserve-ak.last.fm/serve/34s/95175089.png","size":"small"},{"#text":"http://userserve-ak.last.fm/serve/64s/95175089.png","size":"medium"},{"#text":"http://userserve-ak.last.fm/serve/126/95175089.png","size":"large"},{"#text":"http://userserve-ak.last.fm/serve/300x300/95175089.png","size":"extralarge"}],"trend":2},{"name":"Fireside","duration":"181","playcount":"20253","listeners":"11303","mbid":"c4966fc1-b06e-46ba-a070-9c6cec0d9053","url":"http://www.last.fm/music/Arctic+Monkeys/_/Fireside","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"Arctic Monkeys","mbid":"ada7a83c-e3e1-40f1-93f9-3e73dbc9298a","url":"http://www.last.fm/music/Arctic+Monkeys"},"image":[{"#text":"http://userserve-ak.last.fm/serve/34s/92744747.png","size":"small"},{"#text":"http://userserve-ak.last.fm/serve/64s/92744747.png","size":"medium"},{"#text":"http://userserve-ak.last.fm/serve/126/92744747.png","size":"large"},{"#text":"http://userserve-ak.last.fm/serve/300x300/92744747.png","size":"extralarge"}],"trend":0},{"name":"Tighten Up","duration":"211","playcount":"17842","listeners":"11234","mbid":"bf01cab7-e8de-40de-b79d-966aebc83ec5","url":"http://www.last.fm/music/The+Black+Keys/_/Tighten+Up","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"The Black Keys","mbid":"d15721d8-56b4-453d-b506-fc915b14cba2","url":"http://www.last.fm/music/The+Black+Keys"},"image":[{"#text":"http://userserve-ak.last.fm/serve/34s/89603041.png","size":"small"},{"#text":"http://userserve-ak.last.fm/serve/64s/89603041.png","size":"medium"},{"#text":"http://userserve-ak.last.fm/serve/126/89603041.png","size":"large"},{"#text":"http://userserve-ak.last.fm/serve/300x300/89603041.png","size":"extralarge"}],"trend":2},{"name":"La La La","duration":"222","playcount":"18987","listeners":"11242","mbid":"8bd8872e-3ef9-444a-b2e7-893f10e67e07","url":"http://www.last.fm/music/Naughty+Boy/_/La+La+La","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"Naughty Boy","mbid":"1e4460c9-4d4a-4eb7-b2a6-3718e6e1020b","url":"http://www.last.fm/music/Naughty+Boy"},"image":[{"#text":"http://userserve-ak.last.fm/serve/34s/87916583.png","size":"small"},{"#text":"http://userserve-ak.last.fm/serve/64s/87916583.png","size":"medium"},{"#text":"http://userserve-ak.last.fm/serve/126/87916583.png","size":"large"},{"#text":"http://userserve-ak.last.fm/serve/300x300/87916583.png","size":"extralarge"}],"trend":0},{"name":"Song 2","duration":"120","playcount":"16205","listeners":"11230","mbid":"73e2370f-e501-4038-859f-c7c88f5116cc","url":"http://www.last.fm/music/Blur/_/Song+2","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"Blur","mbid":"ba853904-ae25-4ebb-89d6-c44cfbd71bd2","url":"http://www.last.fm/music/Blur"},"image":[{"#text":"http://userserve-ak.last.fm/serve/34s/85634517.png","size":"small"},{"#text":"http://userserve-ak.last.fm/serve/64s/85634517.png","size":"medium"},{"#text":"http://userserve-ak.last.fm/serve/126/85634517.png","size":"large"},{"#text":"http://userserve-ak.last.fm/serve/300x300/85634517.png","size":"extralarge"}],"trend":0},{"name":"Chocolate","duration":"225","playcount":"20895","listeners":"11191","mbid":"13c0efea-da70-4ea0-a1a2-978e126995be","url":"http://www.last.fm/music/The+1975/_/Chocolate","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"The 1975","mbid":"5b6ebfe0-f72b-4902-bba9-74c8af0f1af0","url":"http://www.last.fm/music/The+1975"},"image":[{"#text":"http://userserve-ak.last.fm/serve/34s/92910831.png","size":"small"},{"#text":"http://userserve-ak.last.fm/serve/64s/92910831.png","size":"medium"},{"#text":"http://userserve-ak.last.fm/serve/126/92910831.png","size":"large"},{"#text":"http://userserve-ak.last.fm/serve/300x300/92910831.png","size":"extralarge"}],"trend":0},{"name":"Karma Police","duration":"261","playcount":"17136","listeners":"11173","mbid":"7a5aff92-a14b-4155-8ede-7f961e06814f","url":"http://www.last.fm/music/Radiohead/_/Karma+Police","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"Radiohead","mbid":"a74b1b7f-71a5-4011-9441-d0b5e4122711","url":"http://www.last.fm/music/Radiohead"},"image":[{"#text":"http://userserve-ak.last.fm/serve/34s/99221249.jpg","size":"small"},{"#text":"http://userserve-ak.last.fm/serve/64s/99221249.jpg","size":"medium"},{"#text":"http://userserve-ak.last.fm/serve/126/99221249.jpg","size":"large"},{"#text":"http://userserve-ak.last.fm/serve/300x300/99221249.jpg","size":"extralarge"}],"trend":0},{"name":"I Bet You Look Good on the Dancefloor","duration":"175","playcount":"17881","listeners":"11129","mbid":"3b855869-b82b-4b98-91d8-d5e1e0704cc7","url":"http://www.last.fm/music/Arctic+Monkeys/_/I+Bet+You+Look+Good+on+the+Dancefloor","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"Arctic Monkeys","mbid":"ada7a83c-e3e1-40f1-93f9-3e73dbc9298a","url":"http://www.last.fm/music/Arctic+Monkeys"},"image":[{"#text":"http://userserve-ak.last.fm/serve/34s/32760011.png","size":"small"},{"#text":"http://userserve-ak.last.fm/serve/64s/32760011.png","size":"medium"},{"#text":"http://userserve-ak.last.fm/serve/126/32760011.png","size":"large"},{"#text":"http://userserve-ak.last.fm/serve/300x300/32760011.png","size":"extralarge"}],"trend":0},{"name":"Angels","duration":"171","playcount":"19150","listeners":"11104","mbid":"5a091f6c-3eb0-4989-9615-3fce957a72d7","url":"http://www.last.fm/music/The+xx/_/Angels","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"The xx","mbid":"c5c2ea1c-4bde-4f4d-bd0b-47b200bf99d6","url":"http://www.last.fm/music/The+xx"},"image":[{"#text":"http://userserve-ak.last.fm/serve/34s/88381961.png","size":"small"},{"#text":"http://userserve-ak.last.fm/serve/64s/88381961.png","size":"medium"},{"#text":"http://userserve-ak.last.fm/serve/126/88381961.png","size":"large"},{"#text":"http://userserve-ak.last.fm/serve/300x300/88381961.png","size":"extralarge"}],"trend":0},{"name":"Things We Lost in the Fire","duration":"241","playcount":"21750","listeners":"11058","mbid":"5004a0cf-94df-4e8b-9065-b645f4ea7390","url":"http://www.last.fm/music/Bastille/_/Things+We+Lost+in+the+Fire","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"Bastille","mbid":"16c07e8e-e1ef-452c-bbb7-0cda599c1ffd","url":"http://www.last.fm/music/Bastille"},"image":[{"#text":"http://userserve-ak.last.fm/serve/34s/91244823.png","size":"small"},{"#text":"http://userserve-ak.last.fm/serve/64s/91244823.png","size":"medium"},{"#text":"http://userserve-ak.last.fm/serve/126/91244823.png","size":"large"},{"#text":"http://userserve-ak.last.fm/serve/300x300/91244823.png","size":"extralarge"}],"trend":0},{"name":"Stay High - Habits Remix","duration":"258","playcount":"20366","listeners":"11028","mbid":"","url":"http://www.last.fm/music/Tove+Lo/_/Stay+High+-+Habits+Remix","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"Tove Lo","mbid":"56756959-1e78-429c-b897-e1d056cb0225","url":"http://www.last.fm/music/Tove+Lo"},"trend":0},{"name":"Hold On, We're Going Home","duration":"226","playcount":"16901","listeners":"11016","mbid":"01c976c5-c1e0-4e47-a563-4ce9bd58eb87","url":"http://www.last.fm/music/Drake/_/Hold+On,+We%27re+Going+Home","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"Drake","mbid":"7cf5af7a-afa0-4dca-9473-a13508c64e9d","url":"http://www.last.fm/music/Drake"},"image":[{"#text":"http://userserve-ak.last.fm/serve/34s/98230967.png","size":"small"},{"#text":"http://userserve-ak.last.fm/serve/64s/98230967.png","size":"medium"},{"#text":"http://userserve-ak.last.fm/serve/126/98230967.png","size":"large"},{"#text":"http://userserve-ak.last.fm/serve/300x300/98230967.png","size":"extralarge"}],"trend":2},{"name":"Home","duration":"306","playcount":"17095","listeners":"10980","mbid":"58ce768b-aa90-47d0-a925-44ed834002eb","url":"http://www.last.fm/music/Edward+Sharpe+&+The+Magnetic+Zeros/_/Home","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"Edward Sharpe & The Magnetic Zeros","mbid":"4659a37c-7954-4643-bd83-146aa13ce3e6","url":"http://www.last.fm/music/Edward+Sharpe+&+The+Magnetic+Zeros"},"image":[{"#text":"http://userserve-ak.last.fm/serve/34s/51705263.png","size":"small"},{"#text":"http://userserve-ak.last.fm/serve/64s/51705263.png","size":"medium"},{"#text":"http://userserve-ak.last.fm/serve/126/51705263.png","size":"large"},{"#text":"http://userserve-ak.last.fm/serve/300x300/51705263.png","size":"extralarge"}],"trend":0},{"name":"Blurred Lines","duration":"263","playcount":"16453","listeners":"10977","mbid":"e81efca9-59ec-4325-8638-3fd7f7fcf9fa","url":"http://www.last.fm/music/Robin+Thicke/_/Blurred+Lines","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"Robin Thicke","mbid":"c4b5272d-b23a-4ef6-a5d9-ebd717eca81c","url":"http://www.last.fm/music/Robin+Thicke"},"image":[{"#text":"http://userserve-ak.last.fm/serve/34s/90553053.png","size":"small"},{"#text":"http://userserve-ak.last.fm/serve/64s/90553053.png","size":"medium"},{"#text":"http://userserve-ak.last.fm/serve/126/90553053.png","size":"large"},{"#text":"http://userserve-ak.last.fm/serve/300x300/90553053.png","size":"extralarge"}],"trend":2},{"name":"Time to Pretend","duration":"262","playcount":"15907","listeners":"10982","mbid":"02e1b034-057d-4e48-9109-a5295f741d29","url":"http://www.last.fm/music/MGMT/_/Time+to+Pretend","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"MGMT","mbid":"50e6288e-3db5-4253-ae51-5e8738ef2c31","url":"http://www.last.fm/music/MGMT"},"image":[{"#text":"http://userserve-ak.last.fm/serve/34s/90424487.png","size":"small"},{"#text":"http://userserve-ak.last.fm/serve/64s/90424487.png","size":"medium"},{"#text":"http://userserve-ak.last.fm/serve/126/90424487.png","size":"large"},{"#text":"http://userserve-ak.last.fm/serve/300x300/90424487.png","size":"extralarge"}],"trend":0},{"name":"Under the Bridge","duration":"264","playcount":"15632","listeners":"10956","mbid":"64e2d1e3-c721-4ef3-b1f3-706bd0e505a6","url":"http://www.last.fm/music/Red+Hot+Chili+Peppers/_/Under+the+Bridge","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"Red Hot Chili Peppers","mbid":"8bfac288-ccc5-448d-9573-c33ea2aa5c30","url":"http://www.last.fm/music/Red+Hot+Chili+Peppers"},"image":[{"#text":"http://userserve-ak.last.fm/serve/34s/67744128.png","size":"small"},{"#text":"http://userserve-ak.last.fm/serve/64s/67744128.png","size":"medium"},{"#text":"http://userserve-ak.last.fm/serve/126/67744128.png","size":"large"},{"#text":"http://userserve-ak.last.fm/serve/300x300/67744128.png","size":"extralarge"}],"trend":0},{"name":"Buzzcut Season","duration":"247","playcount":"22845","listeners":"10926","mbid":"bcaec4d1-fdac-496c-a44d-76d62bf15e4b","url":"http://www.last.fm/music/Lorde/_/Buzzcut+Season","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"Lorde","mbid":"14cd21f6-df8e-4bff-af75-0dcfeb307c5d","url":"http://www.last.fm/music/Lorde"},"image":[{"#text":"http://userserve-ak.last.fm/serve/34s/93158109.png","size":"small"},{"#text":"http://userserve-ak.last.fm/serve/64s/93158109.png","size":"medium"},{"#text":"http://userserve-ak.last.fm/serve/126/93158109.png","size":"large"},{"#text":"http://userserve-ak.last.fm/serve/300x300/93158109.png","size":"extralarge"}],"trend":2},{"name":"400 Lux","duration":"234","playcount":"20712","listeners":"10868","mbid":"07ffb4a6-d57c-4585-a1df-7b7ebadd02f5","url":"http://www.last.fm/music/Lorde/_/400+Lux","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"Lorde","mbid":"14cd21f6-df8e-4bff-af75-0dcfeb307c5d","url":"http://www.last.fm/music/Lorde"},"image":[{"#text":"http://userserve-ak.last.fm/serve/34s/93158109.png","size":"small"},{"#text":"http://userserve-ak.last.fm/serve/64s/93158109.png","size":"medium"},{"#text":"http://userserve-ak.last.fm/serve/126/93158109.png","size":"large"},{"#text":"http://userserve-ak.last.fm/serve/300x300/93158109.png","size":"extralarge"}],"trend":2},{"name":"Budapest","duration":"202","playcount":"19643","listeners":"10865","mbid":"b0a58203-f55a-423e-9055-4a9220d258df","url":"http://www.last.fm/music/George+Ezra/_/Budapest","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"George Ezra","mbid":"2c5e2a98-d9ea-46b5-9618-d9bb4863a920","url":"http://www.last.fm/music/George+Ezra"},"image":[{"#text":"http://userserve-ak.last.fm/serve/34s/95403731.png","size":"small"},{"#text":"http://userserve-ak.last.fm/serve/64s/95403731.png","size":"medium"},{"#text":"http://userserve-ak.last.fm/serve/126/95403731.png","size":"large"},{"#text":"http://userserve-ak.last.fm/serve/300x300/95403731.png","size":"extralarge"}],"trend":0},{"name":"Red Lights","duration":"264","playcount":"18758","listeners":"10819","mbid":"c1fb50f3-422a-41d2-ae93-85b88f5bbc32","url":"http://www.last.fm/music/Ti%C3%ABsto/_/Red+Lights","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"Tiësto","mbid":"163a0256-f137-4b6f-8922-77941cbb9532","url":"http://www.last.fm/music/Ti%C3%ABsto"},"image":[{"#text":"http://userserve-ak.last.fm/serve/34s/97390117.png","size":"small"},{"#text":"http://userserve-ak.last.fm/serve/64s/97390117.png","size":"medium"},{"#text":"http://userserve-ak.last.fm/serve/126/97390117.png","size":"large"},{"#text":"http://userserve-ak.last.fm/serve/300x300/97390117.png","size":"extralarge"}],"trend":2},{"name":"Another's Arms","duration":"","playcount":"31509","listeners":"10815","mbid":"","url":"http://www.last.fm/music/Coldplay/_/Another%27s+Arms","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"Coldplay","mbid":"cc197bad-dc9c-440d-a5b5-d52ba2e14234","url":"http://www.last.fm/music/Coldplay"},"trend":2},{"name":"Classic","duration":"175","playcount":"20004","listeners":"10793","mbid":"6399c732-2c8f-4c69-ad6a-ee99cf313b2d","url":"http://www.last.fm/music/MKTO/_/Classic","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"MKTO","mbid":"aa25521e-3848-4ff7-ab09-545cc95b8a36","url":"http://www.last.fm/music/MKTO"},"image":[{"#text":"http://userserve-ak.last.fm/serve/34s/90760893.png","size":"small"},{"#text":"http://userserve-ak.last.fm/serve/64s/90760893.png","size":"medium"},{"#text":"http://userserve-ak.last.fm/serve/126/90760893.png","size":"large"},{"#text":"http://userserve-ak.last.fm/serve/300x300/90760893.png","size":"extralarge"}],"trend":0},{"name":"Off to the Races","duration":"300","playcount":"20481","listeners":"10750","mbid":"9dd2278c-4d63-4607-9c0f-4a75033f35c1","url":"http://www.last.fm/music/Lana+Del+Rey/_/Off+to+the+Races","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"Lana Del Rey","mbid":"b7539c32-53e7-4908-bda3-81449c367da6","url":"http://www.last.fm/music/Lana+Del+Rey"},"image":[{"#text":"http://userserve-ak.last.fm/serve/34s/88340753.png","size":"small"},{"#text":"http://userserve-ak.last.fm/serve/64s/88340753.png","size":"medium"},{"#text":"http://userserve-ak.last.fm/serve/126/88340753.png","size":"large"},{"#text":"http://userserve-ak.last.fm/serve/300x300/88340753.png","size":"extralarge"}],"trend":0},{"name":"Everlong","duration":"249","playcount":"16036","listeners":"10733","mbid":"faf3057d-6ee5-4859-8c5f-a016e2cafca4","url":"http://www.last.fm/music/Foo+Fighters/_/Everlong","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"Foo Fighters","mbid":"67f66c07-6e61-4026-ade5-7e782fad3a5d","url":"http://www.last.fm/music/Foo+Fighters"},"image":[{"#text":"http://userserve-ak.last.fm/serve/34s/69591230.png","size":"small"},{"#text":"http://userserve-ak.last.fm/serve/64s/69591230.png","size":"medium"},{"#text":"http://userserve-ak.last.fm/serve/126/69591230.png","size":"large"},{"#text":"http://userserve-ak.last.fm/serve/300x300/69591230.png","size":"extralarge"}],"trend":0},{"name":"Dirty Paws","duration":"272","playcount":"17583","listeners":"10658","mbid":"f4b2219f-81f4-4ed8-bf6c-baf39db901ab","url":"http://www.last.fm/music/Of+Monsters+and+Men/_/Dirty+Paws","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"Of Monsters and Men","mbid":"9e103f85-7af7-41d7-b83b-49ba8f0c5abf","url":"http://www.last.fm/music/Of+Monsters+and+Men"},"image":[{"#text":"http://userserve-ak.last.fm/serve/34s/84421449.png","size":"small"},{"#text":"http://userserve-ak.last.fm/serve/64s/84421449.png","size":"medium"},{"#text":"http://userserve-ak.last.fm/serve/126/84421449.png","size":"large"},{"#text":"http://userserve-ak.last.fm/serve/300x300/84421449.png","size":"extralarge"}],"trend":0},{"name":"Numb","duration":"186","playcount":"17476","listeners":"10654","mbid":"3b946820-d8eb-44d0-8dc9-8d6588077697","url":"http://www.last.fm/music/Linkin+Park/_/Numb","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"Linkin Park","mbid":"f59c5520-5f46-4d2c-b2c4-822eabf53419","url":"http://www.last.fm/music/Linkin+Park"},"image":[{"#text":"http://userserve-ak.last.fm/serve/34s/52490659.png","size":"small"},{"#text":"http://userserve-ak.last.fm/serve/64s/52490659.png","size":"medium"},{"#text":"http://userserve-ak.last.fm/serve/126/52490659.png","size":"large"},{"#text":"http://userserve-ak.last.fm/serve/300x300/52490659.png","size":"extralarge"}],"trend":0},{"name":"She Looks So Perfect","duration":"203","playcount":"24807","listeners":"10652","mbid":"e34f81c9-de1d-4845-98da-8dfc91276692","url":"http://www.last.fm/music/5+Seconds+of+Summer/_/She+Looks+So+Perfect","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"5 Seconds of Summer","mbid":"830e5c4e-6b7d-431d-86ab-00c751281dc5","url":"http://www.last.fm/music/5+Seconds+of+Summer"},"image":[{"#text":"http://cdn.last.fm/flatness/catalogue/noimage/2/default_album_medium.png","size":"small"},{"#text":"http://cdn.last.fm/flatness/catalogue/noimage/2/default_album_medium.png","size":"medium"},{"#text":"http://cdn.last.fm/flatness/catalogue/noimage/2/default_album_medium.png","size":"large"},{"#text":"http://cdn.last.fm/flatness/catalogue/noimage/2/default_album_medium.png","size":"extralarge"}],"trend":2},{"name":"Young Blood","duration":"247","playcount":"16569","listeners":"10647","mbid":"137d85b3-ddd7-4811-9c03-94dd63eac593","url":"http://www.last.fm/music/The+Naked+and+Famous/_/Young+Blood","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"The Naked and Famous","mbid":"216a7b44-3846-494c-93f5-f2d4d9b95b36","url":"http://www.last.fm/music/The+Naked+and+Famous"},"image":[{"#text":"http://userserve-ak.last.fm/serve/34s/51383895.png","size":"small"},{"#text":"http://userserve-ak.last.fm/serve/64s/51383895.png","size":"medium"},{"#text":"http://userserve-ak.last.fm/serve/126/51383895.png","size":"large"},{"#text":"http://userserve-ak.last.fm/serve/300x300/51383895.png","size":"extralarge"}],"trend":2},{"name":"Islands","duration":"160","playcount":"16667","listeners":"10622","mbid":"be80834d-9fe0-40a8-a947-5388ea045989","url":"http://www.last.fm/music/The+xx/_/Islands","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"The xx","mbid":"c5c2ea1c-4bde-4f4d-bd0b-47b200bf99d6","url":"http://www.last.fm/music/The+xx"},"image":[{"#text":"http://userserve-ak.last.fm/serve/34s/88381869.png","size":"small"},{"#text":"http://userserve-ak.last.fm/serve/64s/88381869.png","size":"medium"},{"#text":"http://userserve-ak.last.fm/serve/126/88381869.png","size":"large"},{"#text":"http://userserve-ak.last.fm/serve/300x300/88381869.png","size":"extralarge"}],"trend":0},{"name":"Sweet Disposition","duration":"230","playcount":"15911","listeners":"10599","mbid":"68226d28-1e2e-493d-b943-450c18b8b91a","url":"http://www.last.fm/music/The+Temper+Trap/_/Sweet+Disposition","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"The Temper Trap","mbid":"bb6eaced-69dd-4636-829f-9f987acc4fc3","url":"http://www.last.fm/music/The+Temper+Trap"},"image":[{"#text":"http://userserve-ak.last.fm/serve/34s/43091673.png","size":"small"},{"#text":"http://userserve-ak.last.fm/serve/64s/43091673.png","size":"medium"},{"#text":"http://userserve-ak.last.fm/serve/126/43091673.png","size":"large"},{"#text":"http://userserve-ak.last.fm/serve/300x300/43091673.png","size":"extralarge"}],"trend":0},{"name":"Mad Sounds","duration":"199","playcount":"17335","listeners":"10559","mbid":"eaa22014-18b8-4de2-8383-f69ee50c6a2f","url":"http://www.last.fm/music/Arctic+Monkeys/_/Mad+Sounds","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"Arctic Monkeys","mbid":"ada7a83c-e3e1-40f1-93f9-3e73dbc9298a","url":"http://www.last.fm/music/Arctic+Monkeys"},"image":[{"#text":"http://userserve-ak.last.fm/serve/34s/92744747.png","size":"small"},{"#text":"http://userserve-ak.last.fm/serve/64s/92744747.png","size":"medium"},{"#text":"http://userserve-ak.last.fm/serve/126/92744747.png","size":"large"},{"#text":"http://userserve-ak.last.fm/serve/300x300/92744747.png","size":"extralarge"}],"trend":0},{"name":"Chop Suey!","duration":"209","playcount":"16292","listeners":"10540","mbid":"e5ff92b7-cb82-4ca8-91a9-e595ff6517c5","url":"http://www.last.fm/music/System+of+a+Down/_/Chop+Suey!","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"System of a Down","mbid":"cc0b7089-c08d-4c10-b6b0-873582c17fd6","url":"http://www.last.fm/music/System+of+a+Down"},"image":[{"#text":"http://userserve-ak.last.fm/serve/34s/81673107.png","size":"small"},{"#text":"http://userserve-ak.last.fm/serve/64s/81673107.png","size":"medium"},{"#text":"http://userserve-ak.last.fm/serve/126/81673107.png","size":"large"},{"#text":"http://userserve-ak.last.fm/serve/300x300/81673107.png","size":"extralarge"}],"trend":0},{"name":"Red Eyes","duration":"299","playcount":"17565","listeners":"10504","mbid":"16530cb5-26d0-44a1-b7b4-a4fda7df8688","url":"http://www.last.fm/music/The+War+on+Drugs/_/Red+Eyes","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"The War on Drugs","mbid":"87b9b3b8-ab93-426c-a200-4012d667a626","url":"http://www.last.fm/music/The+War+on+Drugs"},"image":[{"#text":"http://userserve-ak.last.fm/serve/34s/97376541.png","size":"small"},{"#text":"http://userserve-ak.last.fm/serve/64s/97376541.png","size":"medium"},{"#text":"http://userserve-ak.last.fm/serve/126/97376541.png","size":"large"},{"#text":"http://userserve-ak.last.fm/serve/300x300/97376541.png","size":"extralarge"}],"trend":2},{"name":"Somebody Told Me","duration":"198","playcount":"16234","listeners":"10493","mbid":"8e350594-c241-4d0d-8a4d-2b8d55e166f9","url":"http://www.last.fm/music/The+Killers/_/Somebody+Told+Me","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"The Killers","mbid":"24b4aee8-32ed-4163-98f7-55bae67411ae","url":"http://www.last.fm/music/The+Killers"},"image":[{"#text":"http://userserve-ak.last.fm/serve/34s/68101062.png","size":"small"},{"#text":"http://userserve-ak.last.fm/serve/64s/68101062.png","size":"medium"},{"#text":"http://userserve-ak.last.fm/serve/126/68101062.png","size":"large"},{"#text":"http://userserve-ak.last.fm/serve/300x300/68101062.png","size":"extralarge"}],"trend":0},{"name":"Say Something","duration":"231","playcount":"18513","listeners":"10405","mbid":"f7733afa-153e-4c5d-a481-9d7d0088e8ba","url":"http://www.last.fm/music/A+Great+Big+World/_/Say+Something","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"A Great Big World","mbid":"6958e806-1e14-4844-a0a7-07a27756aa0f","url":"http://www.last.fm/music/A+Great+Big+World"},"image":[{"#text":"http://userserve-ak.last.fm/serve/34s/95754165.png","size":"small"},{"#text":"http://userserve-ak.last.fm/serve/64s/95754165.png","size":"medium"},{"#text":"http://userserve-ak.last.fm/serve/126/95754165.png","size":"large"},{"#text":"http://userserve-ak.last.fm/serve/300x300/95754165.png","size":"extralarge"}],"trend":2},{"name":"Ride","duration":"289","playcount":"20943","listeners":"10350","mbid":"00f481e6-9e98-4cbf-ac05-6c885175018b","url":"http://www.last.fm/music/Lana+Del+Rey/_/Ride","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"Lana Del Rey","mbid":"b7539c32-53e7-4908-bda3-81449c367da6","url":"http://www.last.fm/music/Lana+Del+Rey"},"image":[{"#text":"http://userserve-ak.last.fm/serve/34s/82268821.png","size":"small"},{"#text":"http://userserve-ak.last.fm/serve/64s/82268821.png","size":"medium"},{"#text":"http://userserve-ak.last.fm/serve/126/82268821.png","size":"large"},{"#text":"http://userserve-ak.last.fm/serve/300x300/82268821.png","size":"extralarge"}],"trend":0},{"name":"Mirrors","duration":"484","playcount":"17714","listeners":"10345","mbid":"024474c3-8c36-41b8-9524-6acd967895cd","url":"http://www.last.fm/music/Justin+Timberlake/_/Mirrors","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"Justin Timberlake","mbid":"11ed83a4-0097-4322-aa1e-8fea09def405","url":"http://www.last.fm/music/Justin+Timberlake"},"image":[{"#text":"http://userserve-ak.last.fm/serve/34s/87945843.png","size":"small"},{"#text":"http://userserve-ak.last.fm/serve/64s/87945843.png","size":"medium"},{"#text":"http://userserve-ak.last.fm/serve/126/87945843.png","size":"large"},{"#text":"http://userserve-ak.last.fm/serve/300x300/87945843.png","size":"extralarge"}],"trend":2},{"name":"Drunk in Love","duration":"200","playcount":"16519","listeners":"10284","mbid":"","url":"http://www.last.fm/music/Beyonc%C3%A9/_/Drunk+in+Love","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"Beyoncé","mbid":"183105b5-3e68-4748-9086-2c1c11bf7a3d","url":"http://www.last.fm/music/Beyonc%C3%A9"},"trend":2},{"name":"Scar Tissue","duration":"217","playcount":"15106","listeners":"10260","mbid":"0a640d3e-caa0-4e55-b63f-135a933f3852","url":"http://www.last.fm/music/Red+Hot+Chili+Peppers/_/Scar+Tissue","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"Red Hot Chili Peppers","mbid":"8bfac288-ccc5-448d-9573-c33ea2aa5c30","url":"http://www.last.fm/music/Red+Hot+Chili+Peppers"},"image":[{"#text":"http://userserve-ak.last.fm/serve/34s/42739473.png","size":"small"},{"#text":"http://userserve-ak.last.fm/serve/64s/42739473.png","size":"medium"},{"#text":"http://userserve-ak.last.fm/serve/126/42739473.png","size":"large"},{"#text":"http://userserve-ak.last.fm/serve/300x300/42739473.png","size":"extralarge"}],"trend":2},{"name":"Clocks","duration":"307","playcount":"15116","listeners":"10187","mbid":"3c4ae40f-b53b-46d7-a041-b39f57d600e3","url":"http://www.last.fm/music/Coldplay/_/Clocks","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"Coldplay","mbid":"cc197bad-dc9c-440d-a5b5-d52ba2e14234","url":"http://www.last.fm/music/Coldplay"},"image":[{"#text":"http://userserve-ak.last.fm/serve/34s/88463753.png","size":"small"},{"#text":"http://userserve-ak.last.fm/serve/64s/88463753.png","size":"medium"},{"#text":"http://userserve-ak.last.fm/serve/126/88463753.png","size":"large"},{"#text":"http://userserve-ak.last.fm/serve/300x300/88463753.png","size":"extralarge"}],"trend":2},{"name":"Dog Days Are Over","duration":"253","playcount":"15867","listeners":"10163","mbid":"772ea437-45b3-4868-b3c0-b80526ef0fa3","url":"http://www.last.fm/music/Florence+%252B+the+Machine/_/Dog+Days+Are+Over","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"Florence + the Machine","mbid":"227b39fc-23f6-40f5-b8a1-75100d5baad4","url":"http://www.last.fm/music/Florence+%252B+the+Machine"},"image":[{"#text":"http://userserve-ak.last.fm/serve/34s/58219263.png","size":"small"},{"#text":"http://userserve-ak.last.fm/serve/64s/58219263.png","size":"medium"},{"#text":"http://userserve-ak.last.fm/serve/126/58219263.png","size":"large"},{"#text":"http://userserve-ak.last.fm/serve/300x300/58219263.png","size":"extralarge"}],"trend":0},{"name":"Partition","duration":"90","playcount":"22732","listeners":"10174","mbid":"c54734b9-984f-48d3-be19-dd91620e4553","url":"http://www.last.fm/music/Beyonc%C3%A9/_/Partition","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"Beyoncé","mbid":"183105b5-3e68-4748-9086-2c1c11bf7a3d","url":"http://www.last.fm/music/Beyonc%C3%A9"},"image":[{"#text":"http://userserve-ak.last.fm/serve/34s/98570479.png","size":"small"},{"#text":"http://userserve-ak.last.fm/serve/64s/98570479.png","size":"medium"},{"#text":"http://userserve-ak.last.fm/serve/126/98570479.png","size":"large"},{"#text":"http://userserve-ak.last.fm/serve/300x300/98570479.png","size":"extralarge"}],"trend":2},{"name":"Applause","duration":"212","playcount":"20632","listeners":"10112","mbid":"01851061-0ba5-4b9b-9a50-ff98621e8e33","url":"http://www.last.fm/music/Lady+Gaga/_/Applause","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"Lady Gaga","mbid":"650e7db6-b795-4eb5-a702-5ea2fc46c848","url":"http://www.last.fm/music/Lady+Gaga"},"image":[{"#text":"http://userserve-ak.last.fm/serve/34s/93681345.png","size":"small"},{"#text":"http://userserve-ak.last.fm/serve/64s/93681345.png","size":"medium"},{"#text":"http://userserve-ak.last.fm/serve/126/93681345.png","size":"large"},{"#text":"http://userserve-ak.last.fm/serve/300x300/93681345.png","size":"extralarge"}],"trend":0},{"name":"Recover","duration":"224","playcount":"17117","listeners":"10057","mbid":"33a2b38a-0544-4644-9cbc-4e76cc02e2ec","url":"http://www.last.fm/music/CHVRCHES/_/Recover","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"CHVRCHES","mbid":"6a93afbb-257f-4166-b389-9f2a1e5c5df8","url":"http://www.last.fm/music/CHVRCHES"},"image":[{"#text":"http://userserve-ak.last.fm/serve/34s/92085853.png","size":"small"},{"#text":"http://userserve-ak.last.fm/serve/64s/92085853.png","size":"medium"},{"#text":"http://userserve-ak.last.fm/serve/126/92085853.png","size":"large"},{"#text":"http://userserve-ak.last.fm/serve/300x300/92085853.png","size":"extralarge"}],"trend":0},{"name":"Oceans","duration":"219","playcount":"26134","listeners":"10026","mbid":"4f11e0e7-185e-4103-9416-a45953bf0f8d","url":"http://www.last.fm/music/Coldplay/_/Oceans","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"Coldplay","mbid":"cc197bad-dc9c-440d-a5b5-d52ba2e14234","url":"http://www.last.fm/music/Coldplay"},"image":[{"#text":"http://userserve-ak.last.fm/serve/34s/97289471.png","size":"small"},{"#text":"http://userserve-ak.last.fm/serve/64s/97289471.png","size":"medium"},{"#text":"http://userserve-ak.last.fm/serve/126/97289471.png","size":"large"},{"#text":"http://userserve-ak.last.fm/serve/300x300/97289471.png","size":"extralarge"}],"trend":2},{"name":"Shake It Out","duration":"278","playcount":"15203","listeners":"10007","mbid":"dea77e5e-0aac-426c-b241-90b690f2f1e5","url":"http://www.last.fm/music/Florence+%252B+the+Machine/_/Shake+It+Out","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"Florence + the Machine","mbid":"227b39fc-23f6-40f5-b8a1-75100d5baad4","url":"http://www.last.fm/music/Florence+%252B+the+Machine"},"image":[{"#text":"http://userserve-ak.last.fm/serve/34s/68930602.png","size":"small"},{"#text":"http://userserve-ak.last.fm/serve/64s/68930602.png","size":"medium"},{"#text":"http://userserve-ak.last.fm/serve/126/68930602.png","size":"large"},{"#text":"http://userserve-ak.last.fm/serve/300x300/68930602.png","size":"extralarge"}],"trend":0},{"name":"Enter Sandman","duration":"331","playcount":"15132","listeners":"10004","mbid":"0d3dc069-4de2-4c87-a775-89d16b960043","url":"http://www.last.fm/music/Metallica/_/Enter+Sandman","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"Metallica","mbid":"65f4f0c5-ef9e-490c-aee3-909e7ae6b2ab","url":"http://www.last.fm/music/Metallica"},"image":[{"#text":"http://userserve-ak.last.fm/serve/34s/27383399.jpg","size":"small"},{"#text":"http://userserve-ak.last.fm/serve/64s/27383399.jpg","size":"medium"},{"#text":"http://userserve-ak.last.fm/serve/126/27383399.jpg","size":"large"},{"#text":"http://userserve-ak.last.fm/serve/300x300/27383399.jpg","size":"extralarge"}],"trend":0},{"name":"Unbelievers","duration":"215","playcount":"14956","listeners":"9996","mbid":"5b4530ed-4a5f-4b61-aa67-801cb5303f4e","url":"http://www.last.fm/music/Vampire+Weekend/_/Unbelievers","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"Vampire Weekend","mbid":"af37c51c-0790-4a29-b995-456f98a6b8c9","url":"http://www.last.fm/music/Vampire+Weekend"},"image":[{"#text":"http://userserve-ak.last.fm/serve/34s/92503657.png","size":"small"},{"#text":"http://userserve-ak.last.fm/serve/64s/92503657.png","size":"medium"},{"#text":"http://userserve-ak.last.fm/serve/126/92503657.png","size":"large"},{"#text":"http://userserve-ak.last.fm/serve/300x300/92503657.png","size":"extralarge"}],"trend":0},{"name":"Feels Like We Only Go Backwards","duration":"193","playcount":"18388","listeners":"9992","mbid":"840ee495-12ef-45cf-b8a0-d447f548de60","url":"http://www.last.fm/music/Tame+Impala/_/Feels+Like+We+Only+Go+Backwards","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"Tame Impala","mbid":"63aa26c3-d59b-4da4-84ac-716b54f1ef4d","url":"http://www.last.fm/music/Tame+Impala"},"image":[{"#text":"http://userserve-ak.last.fm/serve/34s/81756565.png","size":"small"},{"#text":"http://userserve-ak.last.fm/serve/64s/81756565.png","size":"medium"},{"#text":"http://userserve-ak.last.fm/serve/126/81756565.png","size":"large"},{"#text":"http://userserve-ak.last.fm/serve/300x300/81756565.png","size":"extralarge"}],"trend":2},{"name":"Taking Chances","duration":"232","playcount":"18467","listeners":"9982","mbid":"65d3eb05-b6d6-4380-9005-6920b326983c","url":"http://www.last.fm/music/Sharon+Van+Etten/_/Taking+Chances","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"Sharon Van Etten","mbid":"5a2e9cd3-010a-4aae-9f83-629253284202","url":"http://www.last.fm/music/Sharon+Van+Etten"},"image":[{"#text":"http://userserve-ak.last.fm/serve/34s/97625921.png","size":"small"},{"#text":"http://userserve-ak.last.fm/serve/64s/97625921.png","size":"medium"},{"#text":"http://userserve-ak.last.fm/serve/126/97625921.png","size":"large"},{"#text":"http://userserve-ak.last.fm/serve/300x300/97625921.png","size":"extralarge"}],"trend":3},{"name":"I Never Learn","duration":"650","playcount":"20793","listeners":"9961","mbid":"dc560042-7986-4fd7-b162-a6cc6f5d630d","url":"http://www.last.fm/music/Lykke+Li/_/I+Never+Learn","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"Lykke Li","mbid":"cc7d4686-ea02-45fd-956e-94c1a322558c","url":"http://www.last.fm/music/Lykke+Li"},"image":[{"#text":"http://userserve-ak.last.fm/serve/34s/97695169.png","size":"small"},{"#text":"http://userserve-ak.last.fm/serve/64s/97695169.png","size":"medium"},{"#text":"http://userserve-ak.last.fm/serve/126/97695169.png","size":"large"},{"#text":"http://userserve-ak.last.fm/serve/300x300/97695169.png","size":"extralarge"}],"trend":2},{"name":"Stairway to Heaven","duration":"480","playcount":"15373","listeners":"9910","mbid":"ccbf4fcc-85d0-4fe1-9e41-04561e5e0549","url":"http://www.last.fm/music/Led+Zeppelin/_/Stairway+to+Heaven","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"Led Zeppelin","mbid":"678d88b2-87b0-403b-b63d-5da7465aecc3","url":"http://www.last.fm/music/Led+Zeppelin"},"image":[{"#text":"http://userserve-ak.last.fm/serve/34s/78946605.png","size":"small"},{"#text":"http://userserve-ak.last.fm/serve/64s/78946605.png","size":"medium"},{"#text":"http://userserve-ak.last.fm/serve/126/78946605.png","size":"large"},{"#text":"http://userserve-ak.last.fm/serve/300x300/78946605.png","size":"extralarge"}],"trend":2},{"name":"Walking on a Dream","duration":"196","playcount":"14088","listeners":"9898","mbid":"006e7c3b-e360-4ff9-abae-62df60370890","url":"http://www.last.fm/music/Empire+of+the+Sun/_/Walking+on+a+Dream","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"Empire of the Sun","mbid":"ac7e838c-3d95-47c2-92a9-81767ad7c217","url":"http://www.last.fm/music/Empire+of+the+Sun"},"image":[{"#text":"http://userserve-ak.last.fm/serve/34s/77717248.png","size":"small"},{"#text":"http://userserve-ak.last.fm/serve/64s/77717248.png","size":"medium"},{"#text":"http://userserve-ak.last.fm/serve/126/77717248.png","size":"large"},{"#text":"http://userserve-ak.last.fm/serve/300x300/77717248.png","size":"extralarge"}],"trend":0},{"name":"Lose Yourself to Dance (feat. Pharrell Williams)","duration":"353","playcount":"15724","listeners":"9892","mbid":"","url":"http://www.last.fm/music/Daft+Punk/_/Lose+Yourself+to+Dance+(feat.+Pharrell+Williams)","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"Daft Punk","mbid":"056e4f3e-d505-4dad-8ec1-d04f521cbb56","url":"http://www.last.fm/music/Daft+Punk"},"trend":2},{"name":"Otherside","duration":"255","playcount":"14346","listeners":"9867","mbid":"91cd4e60-514a-464c-95dd-47d553b02e87","url":"http://www.last.fm/music/Red+Hot+Chili+Peppers/_/Otherside","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"Red Hot Chili Peppers","mbid":"8bfac288-ccc5-448d-9573-c33ea2aa5c30","url":"http://www.last.fm/music/Red+Hot+Chili+Peppers"},"image":[{"#text":"http://userserve-ak.last.fm/serve/34s/42739473.png","size":"small"},{"#text":"http://userserve-ak.last.fm/serve/64s/42739473.png","size":"medium"},{"#text":"http://userserve-ak.last.fm/serve/126/42739473.png","size":"large"},{"#text":"http://userserve-ak.last.fm/serve/300x300/42739473.png","size":"extralarge"}],"trend":0},{"name":"I Will Never Let You Down","duration":"203","playcount":"28195","listeners":"9877","mbid":"9d062ad8-a99b-4ac1-8e16-1ab1e7d69a20","url":"http://www.last.fm/music/Rita+Ora/_/I+Will+Never+Let+You+Down","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"Rita Ora","mbid":"c9dd033c-0270-463c-b3ec-f4b7712486fe","url":"http://www.last.fm/music/Rita+Ora"},"trend":0},{"name":"Madness","duration":"279","playcount":"15322","listeners":"9852","mbid":"826b8640-29b5-47aa-bc44-bb7b1e66eff1","url":"http://www.last.fm/music/Muse/_/Madness","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"Muse","mbid":"1695c115-bf3f-4014-9966-2b0c50179193","url":"http://www.last.fm/music/Muse"},"image":[{"#text":"http://userserve-ak.last.fm/serve/34s/80945949.png","size":"small"},{"#text":"http://userserve-ak.last.fm/serve/64s/80945949.png","size":"medium"},{"#text":"http://userserve-ak.last.fm/serve/126/80945949.png","size":"large"},{"#text":"http://userserve-ak.last.fm/serve/300x300/80945949.png","size":"extralarge"}],"trend":0},{"name":"Afterlife","duration":"353","playcount":"16731","listeners":"9849","mbid":"","url":"http://www.last.fm/music/Arcade+Fire/_/Afterlife","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"Arcade Fire","mbid":"52074ba6-e495-4ef3-9bb4-0703888a9f68","url":"http://www.last.fm/music/Arcade+Fire"},"image":[{"#text":"http://userserve-ak.last.fm/serve/34s/93250337.png","size":"small"},{"#text":"http://userserve-ak.last.fm/serve/64s/93250337.png","size":"medium"},{"#text":"http://userserve-ak.last.fm/serve/126/93250337.png","size":"large"},{"#text":"http://userserve-ak.last.fm/serve/300x300/93250337.png","size":"extralarge"}],"trend":0},{"name":"Locked Out of Heaven","duration":"234","playcount":"15958","listeners":"9842","mbid":"a8501ac3-10e0-48ee-8e23-a954f1f8b273","url":"http://www.last.fm/music/Bruno+Mars/_/Locked+Out+of+Heaven","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"Bruno Mars","mbid":"afb680f2-b6eb-4cd7-a70b-a63b25c763d5","url":"http://www.last.fm/music/Bruno+Mars"},"image":[{"#text":"http://userserve-ak.last.fm/serve/34s/92206107.png","size":"small"},{"#text":"http://userserve-ak.last.fm/serve/64s/92206107.png","size":"medium"},{"#text":"http://userserve-ak.last.fm/serve/126/92206107.png","size":"large"},{"#text":"http://userserve-ak.last.fm/serve/300x300/92206107.png","size":"extralarge"}],"trend":0},{"name":"Gunshot","duration":"196","playcount":"20111","listeners":"9838","mbid":"d247b9af-45e9-4813-9293-2b1a5a47dfef","url":"http://www.last.fm/music/Lykke+Li/_/Gunshot","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"Lykke Li","mbid":"cc7d4686-ea02-45fd-956e-94c1a322558c","url":"http://www.last.fm/music/Lykke+Li"},"image":[{"#text":"http://userserve-ak.last.fm/serve/34s/97695169.png","size":"small"},{"#text":"http://userserve-ak.last.fm/serve/64s/97695169.png","size":"medium"},{"#text":"http://userserve-ak.last.fm/serve/126/97695169.png","size":"large"},{"#text":"http://userserve-ak.last.fm/serve/300x300/97695169.png","size":"extralarge"}],"trend":2},{"name":"XO","duration":"216","playcount":"20180","listeners":"9830","mbid":"d0d9670a-b485-49d6-bf54-e7ed45a7642c","url":"http://www.last.fm/music/Beyonc%C3%A9/_/XO","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"Beyoncé","mbid":"183105b5-3e68-4748-9086-2c1c11bf7a3d","url":"http://www.last.fm/music/Beyonc%C3%A9"},"image":[{"#text":"http://userserve-ak.last.fm/serve/34s/98570479.png","size":"small"},{"#text":"http://userserve-ak.last.fm/serve/64s/98570479.png","size":"medium"},{"#text":"http://userserve-ak.last.fm/serve/126/98570479.png","size":"large"},{"#text":"http://userserve-ak.last.fm/serve/300x300/98570479.png","size":"extralarge"}],"trend":0},{"name":"Rolling in the Deep","duration":"228","playcount":"14570","listeners":"9774","mbid":"092a88bc-af0b-4ddd-a3a1-17ad37abfccb","url":"http://www.last.fm/music/Adele/_/Rolling+in+the+Deep","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"Adele","mbid":"1de93a63-3a9f-443a-ba8a-a43b5fe0121e","url":"http://www.last.fm/music/Adele"},"image":[{"#text":"http://userserve-ak.last.fm/serve/34s/79993209.png","size":"small"},{"#text":"http://userserve-ak.last.fm/serve/64s/79993209.png","size":"medium"},{"#text":"http://userserve-ak.last.fm/serve/126/79993209.png","size":"large"},{"#text":"http://userserve-ak.last.fm/serve/300x300/79993209.png","size":"extralarge"}],"trend":0},{"name":"Ribs","duration":"259","playcount":"19578","listeners":"9772","mbid":"393bab53-fedf-41fb-a2b9-5527eacec849","url":"http://www.last.fm/music/Lorde/_/Ribs","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"Lorde","mbid":"14cd21f6-df8e-4bff-af75-0dcfeb307c5d","url":"http://www.last.fm/music/Lorde"},"image":[{"#text":"http://userserve-ak.last.fm/serve/34s/93158109.png","size":"small"},{"#text":"http://userserve-ak.last.fm/serve/64s/93158109.png","size":"medium"},{"#text":"http://userserve-ak.last.fm/serve/126/93158109.png","size":"large"},{"#text":"http://userserve-ak.last.fm/serve/300x300/93158109.png","size":"extralarge"}],"trend":2},{"name":"Fancy (feat. Charli XCX)","duration":"169","playcount":"46536","listeners":"9758","mbid":"","url":"http://www.last.fm/music/Iggy+Azalea/_/Fancy+(feat.+Charli+XCX)","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"Iggy Azalea","mbid":"3a052c99-8c18-484a-8beb-9873b4fb3106","url":"http://www.last.fm/music/Iggy+Azalea"},"trend":0},{"name":"Losing My Religion","duration":"268","playcount":"14467","listeners":"9736","mbid":"2cfb096c-91ae-4a84-bf90-a818950f846d","url":"http://www.last.fm/music/R.E.M./_/Losing+My+Religion","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"R.E.M.","mbid":"ea4dfa26-f633-4da6-a52a-f49ea4897b58","url":"http://www.last.fm/music/R.E.M."},"image":[{"#text":"http://userserve-ak.last.fm/serve/34s/96506699.png","size":"small"},{"#text":"http://userserve-ak.last.fm/serve/64s/96506699.png","size":"medium"},{"#text":"http://userserve-ak.last.fm/serve/126/96506699.png","size":"large"},{"#text":"http://userserve-ak.last.fm/serve/300x300/96506699.png","size":"extralarge"}],"trend":2},{"name":"Black Skinhead","duration":"188","playcount":"15943","listeners":"9729","mbid":"731ddb5c-6e2e-4cae-badd-52b61b252ce4","url":"http://www.last.fm/music/Kanye+West/_/Black+Skinhead","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"Kanye West","mbid":"164f0d73-1234-4e2c-8743-d77bf2191051","url":"http://www.last.fm/music/Kanye+West"},"image":[{"#text":"http://userserve-ak.last.fm/serve/34s/96481285.png","size":"small"},{"#text":"http://userserve-ak.last.fm/serve/64s/96481285.png","size":"medium"},{"#text":"http://userserve-ak.last.fm/serve/126/96481285.png","size":"large"},{"#text":"http://userserve-ak.last.fm/serve/300x300/96481285.png","size":"extralarge"}],"trend":0},{"name":"Afraid of Nothing","duration":"247","playcount":"17652","listeners":"9618","mbid":"57058425-019a-4df9-a9aa-bbc5fb649df2","url":"http://www.last.fm/music/Sharon+Van+Etten/_/Afraid+of+Nothing","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"Sharon Van Etten","mbid":"5a2e9cd3-010a-4aae-9f83-629253284202","url":"http://www.last.fm/music/Sharon+Van+Etten"},"image":[{"#text":"http://userserve-ak.last.fm/serve/34s/97625921.png","size":"small"},{"#text":"http://userserve-ak.last.fm/serve/64s/97625921.png","size":"medium"},{"#text":"http://userserve-ak.last.fm/serve/126/97625921.png","size":"large"},{"#text":"http://userserve-ak.last.fm/serve/300x300/97625921.png","size":"extralarge"}],"trend":3},{"name":"Reptilia","duration":"219","playcount":"14538","listeners":"9576","mbid":"","url":"http://www.last.fm/music/The+Strokes/_/Reptilia","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"The Strokes","mbid":"f181961b-20f7-459e-89de-920ef03c7ed0","url":"http://www.last.fm/music/The+Strokes"},"image":[{"#text":"http://userserve-ak.last.fm/serve/34s/37849317.png","size":"small"},{"#text":"http://userserve-ak.last.fm/serve/64s/37849317.png","size":"medium"},{"#text":"http://userserve-ak.last.fm/serve/126/37849317.png","size":"large"},{"#text":"http://userserve-ak.last.fm/serve/300x300/37849317.png","size":"extralarge"}],"trend":0},{"name":"Teardrop","duration":"332","playcount":"13974","listeners":"9536","mbid":"03b2cbfb-8765-4b93-8ede-0c3b0a07296a","url":"http://www.last.fm/music/Massive+Attack/_/Teardrop","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"Massive Attack","mbid":"10adbe5e-a2c0-4bf3-8249-2b4cbf6e6ca8","url":"http://www.last.fm/music/Massive+Attack"},"image":[{"#text":"http://userserve-ak.last.fm/serve/34s/38150483.png","size":"small"},{"#text":"http://userserve-ak.last.fm/serve/64s/38150483.png","size":"medium"},{"#text":"http://userserve-ak.last.fm/serve/126/38150483.png","size":"large"},{"#text":"http://userserve-ak.last.fm/serve/300x300/38150483.png","size":"extralarge"}],"trend":0},{"name":"The Monster","duration":"250","playcount":"16033","listeners":"9525","mbid":"","url":"http://www.last.fm/music/Eminem/_/The+Monster","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"Eminem","mbid":"b95ce3ff-3d05-4e87-9e01-c97b66af13d4","url":"http://www.last.fm/music/Eminem"},"image":[{"#text":"http://userserve-ak.last.fm/serve/34s/98147285.jpg","size":"small"},{"#text":"http://userserve-ak.last.fm/serve/64s/98147285.jpg","size":"medium"},{"#text":"http://userserve-ak.last.fm/serve/126/98147285.jpg","size":"large"},{"#text":"http://userserve-ak.last.fm/serve/300x300/98147285.jpg","size":"extralarge"}],"trend":2},{"name":"Radio","duration":"215","playcount":"18291","listeners":"9504","mbid":"d03d47bf-0005-4445-af16-887db5980014","url":"http://www.last.fm/music/Lana+Del+Rey/_/Radio","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"Lana Del Rey","mbid":"b7539c32-53e7-4908-bda3-81449c367da6","url":"http://www.last.fm/music/Lana+Del+Rey"},"image":[{"#text":"http://userserve-ak.last.fm/serve/34s/88340753.png","size":"small"},{"#text":"http://userserve-ak.last.fm/serve/64s/88340753.png","size":"medium"},{"#text":"http://userserve-ak.last.fm/serve/126/88340753.png","size":"large"},{"#text":"http://userserve-ak.last.fm/serve/300x300/88340753.png","size":"extralarge"}],"trend":0},{"name":"Jealous (I Ain't With It)","duration":"228","playcount":"18563","listeners":"9509","mbid":"","url":"http://www.last.fm/music/Chromeo/_/Jealous+(I+Ain%27t+With+It)","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"Chromeo","mbid":"13f2e9fe-be3c-498d-a22d-b4ed5f0ffefc","url":"http://www.last.fm/music/Chromeo"},"image":[{"#text":"http://userserve-ak.last.fm/serve/34s/97973907.png","size":"small"},{"#text":"http://userserve-ak.last.fm/serve/64s/97973907.png","size":"medium"},{"#text":"http://userserve-ak.last.fm/serve/126/97973907.png","size":"large"},{"#text":"http://userserve-ak.last.fm/serve/300x300/97973907.png","size":"extralarge"}],"trend":2},{"name":"O","duration":"275","playcount":"26773","listeners":"9504","mbid":"4733b01f-0caf-43a2-aa41-3ef2e3992432","url":"http://www.last.fm/music/Coldplay/_/O","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"Coldplay","mbid":"cc197bad-dc9c-440d-a5b5-d52ba2e14234","url":"http://www.last.fm/music/Coldplay"},"image":[{"#text":"http://userserve-ak.last.fm/serve/34s/97289471.png","size":"small"},{"#text":"http://userserve-ak.last.fm/serve/64s/97289471.png","size":"medium"},{"#text":"http://userserve-ak.last.fm/serve/126/97289471.png","size":"large"},{"#text":"http://userserve-ak.last.fm/serve/300x300/97289471.png","size":"extralarge"}],"trend":2},{"name":"Youth","duration":"249","playcount":"16761","listeners":"9481","mbid":"5dc34c95-63a5-4273-9e2b-74b2a6561eb7","url":"http://www.last.fm/music/Daughter/_/Youth","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"Daughter","mbid":"1a02ce2f-2330-4ea9-b639-a7c6bebdf378","url":"http://www.last.fm/music/Daughter"},"image":[{"#text":"http://userserve-ak.last.fm/serve/34s/92986323.png","size":"small"},{"#text":"http://userserve-ak.last.fm/serve/64s/92986323.png","size":"medium"},{"#text":"http://userserve-ak.last.fm/serve/126/92986323.png","size":"large"},{"#text":"http://userserve-ak.last.fm/serve/300x300/92986323.png","size":"extralarge"}],"trend":3},{"name":"Diet Mountain Dew","duration":"223","playcount":"17466","listeners":"9475","mbid":"13a13f72-3637-4b8e-9204-940ebddcd264","url":"http://www.last.fm/music/Lana+Del+Rey/_/Diet+Mountain+Dew","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"Lana Del Rey","mbid":"b7539c32-53e7-4908-bda3-81449c367da6","url":"http://www.last.fm/music/Lana+Del+Rey"},"image":[{"#text":"http://userserve-ak.last.fm/serve/34s/88340753.png","size":"small"},{"#text":"http://userserve-ak.last.fm/serve/64s/88340753.png","size":"medium"},{"#text":"http://userserve-ak.last.fm/serve/126/88340753.png","size":"large"},{"#text":"http://userserve-ak.last.fm/serve/300x300/88340753.png","size":"extralarge"}],"trend":0},{"name":"Do It Again","duration":"307","playcount":"18891","listeners":"9464","mbid":"","url":"http://www.last.fm/music/R%C3%B6yksopp/_/Do+It+Again","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"Röyksopp","mbid":"1c70a3fc-fa3c-4be1-8b55-c3192db8a884","url":"http://www.last.fm/music/R%C3%B6yksopp"},"image":[{"#text":"http://userserve-ak.last.fm/serve/34s/98250641.jpg","size":"small"},{"#text":"http://userserve-ak.last.fm/serve/64s/98250641.jpg","size":"medium"},{"#text":"http://userserve-ak.last.fm/serve/126/98250641.jpg","size":"large"},{"#text":"http://userserve-ak.last.fm/serve/300x300/98250641.jpg","size":"extralarge"}],"trend":2},{"name":"The A Team","duration":"260","playcount":"15523","listeners":"9343","mbid":"3c7eba4f-6fc0-4439-a703-cb299b07f63a","url":"http://www.last.fm/music/Ed+Sheeran/_/The+A+Team","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"Ed Sheeran","mbid":"3bca1168-e7c6-4beb-9af9-db9dc674b1fa","url":"http://www.last.fm/music/Ed+Sheeran"},"image":[{"#text":"http://userserve-ak.last.fm/serve/34s/88259807.png","size":"small"},{"#text":"http://userserve-ak.last.fm/serve/64s/88259807.png","size":"medium"},{"#text":"http://userserve-ak.last.fm/serve/126/88259807.png","size":"large"},{"#text":"http://userserve-ak.last.fm/serve/300x300/88259807.png","size":"extralarge"}],"trend":0},{"name":"Marilyn Monroe","duration":"351","playcount":"17326","listeners":"9340","mbid":"13563054-a53b-424b-8050-bf4b7b489e7e","url":"http://www.last.fm/music/Pharrell+Williams/_/Marilyn+Monroe","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"Pharrell Williams","mbid":"149f91ef-1287-46da-9a8e-87fee02f1471","url":"http://www.last.fm/music/Pharrell+Williams"},"image":[{"#text":"http://userserve-ak.last.fm/serve/34s/97009161.png","size":"small"},{"#text":"http://userserve-ak.last.fm/serve/64s/97009161.png","size":"medium"},{"#text":"http://userserve-ak.last.fm/serve/126/97009161.png","size":"large"},{"#text":"http://userserve-ak.last.fm/serve/300x300/97009161.png","size":"extralarge"}],"trend":0},{"name":"1901","duration":"193","playcount":"13556","listeners":"9273","mbid":"b3581bfd-64dd-48c2-ace6-8873823b4b39","url":"http://www.last.fm/music/Phoenix/_/1901","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"Phoenix","mbid":"02f4c1ff-65e0-4412-8e8b-6239b0faecb5","url":"http://www.last.fm/music/Phoenix"},"image":[{"#text":"http://userserve-ak.last.fm/serve/34s/53574933.png","size":"small"},{"#text":"http://userserve-ak.last.fm/serve/64s/53574933.png","size":"medium"},{"#text":"http://userserve-ak.last.fm/serve/126/53574933.png","size":"large"},{"#text":"http://userserve-ak.last.fm/serve/300x300/53574933.png","size":"extralarge"}],"trend":0},{"name":"Hard Out Here","duration":"262","playcount":"19327","listeners":"9275","mbid":"b229f5a9-593e-4392-95db-a8d24e11796b","url":"http://www.last.fm/music/Lily+Allen/_/Hard+Out+Here","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"Lily Allen","mbid":"365e73ae-808c-4b0f-a313-74f302cb6911","url":"http://www.last.fm/music/Lily+Allen"},"image":[{"#text":"http://userserve-ak.last.fm/serve/34s/94682661.png","size":"small"},{"#text":"http://userserve-ak.last.fm/serve/64s/94682661.png","size":"medium"},{"#text":"http://userserve-ak.last.fm/serve/126/94682661.png","size":"large"},{"#text":"http://userserve-ak.last.fm/serve/300x300/94682661.png","size":"extralarge"}],"trend":2},{"name":"Falling","duration":"257","playcount":"15941","listeners":"9256","mbid":"a7abdede-5010-452c-a130-766d71a15f6e","url":"http://www.last.fm/music/HAIM/_/Falling","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"HAIM","mbid":"6da01dec-d03c-492f-8f22-3969ea340888","url":"http://www.last.fm/music/HAIM"},"image":[{"#text":"http://userserve-ak.last.fm/serve/34s/92568911.png","size":"small"},{"#text":"http://userserve-ak.last.fm/serve/64s/92568911.png","size":"medium"},{"#text":"http://userserve-ak.last.fm/serve/126/92568911.png","size":"large"},{"#text":"http://userserve-ak.last.fm/serve/300x300/92568911.png","size":"extralarge"}],"trend":2},{"name":"Monument","duration":"598","playcount":"24577","listeners":"9220","mbid":"0bf8fe0e-40c8-4cc5-805e-59e16d57c6c5","url":"http://www.last.fm/music/R%C3%B6yksopp+&+Robyn/_/Monument","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"Röyksopp & Robyn","mbid":"","url":"http://www.last.fm/music/R%C3%B6yksopp+&+Robyn"},"image":[{"#text":"http://userserve-ak.last.fm/serve/34s/98517489.png","size":"small"},{"#text":"http://userserve-ak.last.fm/serve/64s/98517489.png","size":"medium"},{"#text":"http://userserve-ak.last.fm/serve/126/98517489.png","size":"large"},{"#text":"http://userserve-ak.last.fm/serve/300x300/98517489.png","size":"extralarge"}],"trend":3},{"name":"G.U.Y.","duration":"233","playcount":"24198","listeners":"9212","mbid":"575d4e21-9d41-43e3-a001-1df583de26fa","url":"http://www.last.fm/music/Lady+Gaga/_/G.U.Y.","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"Lady Gaga","mbid":"650e7db6-b795-4eb5-a702-5ea2fc46c848","url":"http://www.last.fm/music/Lady+Gaga"},"image":[{"#text":"http://userserve-ak.last.fm/serve/34s/93681345.png","size":"small"},{"#text":"http://userserve-ak.last.fm/serve/64s/93681345.png","size":"medium"},{"#text":"http://userserve-ak.last.fm/serve/126/93681345.png","size":"large"},{"#text":"http://userserve-ak.last.fm/serve/300x300/93681345.png","size":"extralarge"}],"trend":2},{"name":"Use Somebody","duration":"231","playcount":"13904","listeners":"9185","mbid":"c92c41c8-8792-4acb-a744-c97d900b3e1c","url":"http://www.last.fm/music/Kings+of+Leon/_/Use+Somebody","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"Kings of Leon","mbid":"6ffb8ea9-2370-44d8-b678-e9237bbd347b","url":"http://www.last.fm/music/Kings+of+Leon"},"image":[{"#text":"http://userserve-ak.last.fm/serve/34s/81102241.png","size":"small"},{"#text":"http://userserve-ak.last.fm/serve/64s/81102241.png","size":"medium"},{"#text":"http://userserve-ak.last.fm/serve/126/81102241.png","size":"large"},{"#text":"http://userserve-ak.last.fm/serve/300x300/81102241.png","size":"extralarge"}],"trend":0},{"name":"I Will Wait","duration":"277","playcount":"14089","listeners":"9160","mbid":"2150fd47-7367-419e-8865-03baaccbcdad","url":"http://www.last.fm/music/Mumford+&+Sons/_/I+Will+Wait","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"Mumford & Sons","mbid":"c44e9c22-ef82-4a77-9bcd-af6c958446d6","url":"http://www.last.fm/music/Mumford+&+Sons"},"image":[{"#text":"http://userserve-ak.last.fm/serve/34s/81291929.png","size":"small"},{"#text":"http://userserve-ak.last.fm/serve/64s/81291929.png","size":"medium"},{"#text":"http://userserve-ak.last.fm/serve/126/81291929.png","size":"large"},{"#text":"http://userserve-ak.last.fm/serve/300x300/81291929.png","size":"extralarge"}],"trend":2},{"name":"The Pretender","duration":"268","playcount":"13753","listeners":"9142","mbid":"68046840-4171-4e11-b23c-d58135197e13","url":"http://www.last.fm/music/Foo+Fighters/_/The+Pretender","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"Foo Fighters","mbid":"67f66c07-6e61-4026-ade5-7e782fad3a5d","url":"http://www.last.fm/music/Foo+Fighters"},"image":[{"#text":"http://userserve-ak.last.fm/serve/34s/83693587.png","size":"small"},{"#text":"http://userserve-ak.last.fm/serve/64s/83693587.png","size":"medium"},{"#text":"http://userserve-ak.last.fm/serve/126/83693587.png","size":"large"},{"#text":"http://userserve-ak.last.fm/serve/300x300/83693587.png","size":"extralarge"}],"trend":0},{"name":"Clint Eastwood","duration":"339","playcount":"13590","listeners":"9130","mbid":"25809ba7-d61a-44c7-8f5f-ebe86068bdb5","url":"http://www.last.fm/music/Gorillaz/_/Clint+Eastwood","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"Gorillaz","mbid":"e21857d5-3256-4547-afb3-4b6ded592596","url":"http://www.last.fm/music/Gorillaz"},"image":[{"#text":"http://userserve-ak.last.fm/serve/34s/24507751.png","size":"small"},{"#text":"http://userserve-ak.last.fm/serve/64s/24507751.png","size":"medium"},{"#text":"http://userserve-ak.last.fm/serve/126/24507751.png","size":"large"},{"#text":"http://userserve-ak.last.fm/serve/300x300/24507751.png","size":"extralarge"}],"trend":0},{"name":"No Surprises","duration":"229","playcount":"13923","listeners":"9132","mbid":"6bb29353-ba61-4c5a-85ff-f33693808dc3","url":"http://www.last.fm/music/Radiohead/_/No+Surprises","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"Radiohead","mbid":"a74b1b7f-71a5-4011-9441-d0b5e4122711","url":"http://www.last.fm/music/Radiohead"},"image":[{"#text":"http://userserve-ak.last.fm/serve/34s/99221249.jpg","size":"small"},{"#text":"http://userserve-ak.last.fm/serve/64s/99221249.jpg","size":"medium"},{"#text":"http://userserve-ak.last.fm/serve/126/99221249.jpg","size":"large"},{"#text":"http://userserve-ak.last.fm/serve/300x300/99221249.jpg","size":"extralarge"}],"trend":0},{"name":"Wasted","duration":"188","playcount":"16272","listeners":"9129","mbid":"","url":"http://www.last.fm/music/Ti%C3%ABsto/_/Wasted","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"Tiësto","mbid":"163a0256-f137-4b6f-8922-77941cbb9532","url":"http://www.last.fm/music/Ti%C3%ABsto"},"image":[{"#text":"http://userserve-ak.last.fm/serve/34s/98431879.png","size":"small"},{"#text":"http://userserve-ak.last.fm/serve/64s/98431879.png","size":"medium"},{"#text":"http://userserve-ak.last.fm/serve/126/98431879.png","size":"large"},{"#text":"http://userserve-ak.last.fm/serve/300x300/98431879.png","size":"extralarge"}],"trend":0},{"name":"Don't Stop Believin'","duration":"250","playcount":"12970","listeners":"9070","mbid":"7a6403fb-c546-450e-ac72-490dc195b742","url":"http://www.last.fm/music/Journey/_/Don%27t+Stop+Believin%27","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"Journey","mbid":"a26ff336-32ef-4adc-a800-3581c9a517a9","url":"http://www.last.fm/music/Journey"},"image":[{"#text":"http://userserve-ak.last.fm/serve/34s/5915773.jpg","size":"small"},{"#text":"http://userserve-ak.last.fm/serve/64s/5915773.jpg","size":"medium"},{"#text":"http://userserve-ak.last.fm/serve/126/5915773.jpg","size":"large"},{"#text":"http://userserve-ak.last.fm/serve/300x300/5915773.jpg","size":"extralarge"}],"trend":0},{"name":"Do What U Want","duration":"217","playcount":"18066","listeners":"9082","mbid":"84690131-b024-4358-90ea-27383890d00d","url":"http://www.last.fm/music/Lady+Gaga/_/Do+What+U+Want","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"Lady Gaga","mbid":"650e7db6-b795-4eb5-a702-5ea2fc46c848","url":"http://www.last.fm/music/Lady+Gaga"},"image":[{"#text":"http://userserve-ak.last.fm/serve/34s/98135107.jpg","size":"small"},{"#text":"http://userserve-ak.last.fm/serve/64s/98135107.jpg","size":"medium"},{"#text":"http://userserve-ak.last.fm/serve/126/98135107.jpg","size":"large"},{"#text":"http://userserve-ak.last.fm/serve/300x300/98135107.jpg","size":"extralarge"}],"trend":2},{"name":"Problem (feat. Iggy Azalea)","duration":"55","playcount":"53694","listeners":"9086","mbid":"","url":"http://www.last.fm/music/Ariana+Grande/_/Problem+(feat.+Iggy+Azalea)","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"Ariana Grande","mbid":"f4fdbb4c-e4b7-47a0-b83b-d91bbfcfa387","url":"http://www.last.fm/music/Ariana+Grande"},"trend":0},{"name":"Gold on the Ceiling","duration":"224","playcount":"14277","listeners":"9063","mbid":"eb3357e8-3e1e-45b3-ad4f-5cf9e0e99190","url":"http://www.last.fm/music/The+Black+Keys/_/Gold+on+the+Ceiling","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"The Black Keys","mbid":"d15721d8-56b4-453d-b506-fc915b14cba2","url":"http://www.last.fm/music/The+Black+Keys"},"image":[{"#text":"http://userserve-ak.last.fm/serve/34s/71475018.png","size":"small"},{"#text":"http://userserve-ak.last.fm/serve/64s/71475018.png","size":"medium"},{"#text":"http://userserve-ak.last.fm/serve/126/71475018.png","size":"large"},{"#text":"http://userserve-ak.last.fm/serve/300x300/71475018.png","size":"extralarge"}],"trend":2},{"name":"A-Punk","duration":"137","playcount":"13261","listeners":"9049","mbid":"3a2a9ca7-93e7-47d0-b9f1-6119da81a8b7","url":"http://www.last.fm/music/Vampire+Weekend/_/A-Punk","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"Vampire Weekend","mbid":"af37c51c-0790-4a29-b995-456f98a6b8c9","url":"http://www.last.fm/music/Vampire+Weekend"},"image":[{"#text":"http://userserve-ak.last.fm/serve/34s/69597994.png","size":"small"},{"#text":"http://userserve-ak.last.fm/serve/64s/69597994.png","size":"medium"},{"#text":"http://userserve-ak.last.fm/serve/126/69597994.png","size":"large"},{"#text":"http://userserve-ak.last.fm/serve/300x300/69597994.png","size":"extralarge"}],"trend":2},{"name":"Last Nite","duration":"193","playcount":"12788","listeners":"8978","mbid":"3a3042ee-0083-4164-be82-77271d4a405f","url":"http://www.last.fm/music/The+Strokes/_/Last+Nite","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"The Strokes","mbid":"f181961b-20f7-459e-89de-920ef03c7ed0","url":"http://www.last.fm/music/The+Strokes"},"image":[{"#text":"http://userserve-ak.last.fm/serve/34s/72672492.png","size":"small"},{"#text":"http://userserve-ak.last.fm/serve/64s/72672492.png","size":"medium"},{"#text":"http://userserve-ak.last.fm/serve/126/72672492.png","size":"large"},{"#text":"http://userserve-ak.last.fm/serve/300x300/72672492.png","size":"extralarge"}],"trend":0},{"name":"Tessellate","duration":"183","playcount":"14660","listeners":"8977","mbid":"c03d0c17-b702-4cd9-82b4-7361008f0933","url":"http://www.last.fm/music/Alt-J/_/Tessellate","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"Alt-J","mbid":"fc7bbf00-fbaa-4736-986b-b3ac0266ca9b","url":"http://www.last.fm/music/Alt-J"},"image":[{"#text":"http://userserve-ak.last.fm/serve/34s/83901243.png","size":"small"},{"#text":"http://userserve-ak.last.fm/serve/64s/83901243.png","size":"medium"},{"#text":"http://userserve-ak.last.fm/serve/126/83901243.png","size":"large"},{"#text":"http://userserve-ak.last.fm/serve/300x300/83901243.png","size":"extralarge"}],"trend":2},{"name":"Take a Walk","duration":"264","playcount":"12998","listeners":"8925","mbid":"1cff30bd-554d-4efa-a5fe-21a501c7a7d7","url":"http://www.last.fm/music/Passion+Pit/_/Take+a+Walk","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"Passion Pit","mbid":"daeec599-bf5d-4428-994a-e76ba5f86e2f","url":"http://www.last.fm/music/Passion+Pit"},"image":[{"#text":"http://userserve-ak.last.fm/serve/34s/99252313.png","size":"small"},{"#text":"http://userserve-ak.last.fm/serve/64s/99252313.png","size":"medium"},{"#text":"http://userserve-ak.last.fm/serve/126/99252313.png","size":"large"},{"#text":"http://userserve-ak.last.fm/serve/300x300/99252313.png","size":"extralarge"}],"trend":2},{"name":"Float On","duration":"208","playcount":"12868","listeners":"8905","mbid":"7db821e0-9b32-4964-8b10-bbdf85767ec0","url":"http://www.last.fm/music/Modest+Mouse/_/Float+On","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"Modest Mouse","mbid":"a96ac800-bfcb-412a-8a63-0a98df600700","url":"http://www.last.fm/music/Modest+Mouse"},"image":[{"#text":"http://userserve-ak.last.fm/serve/34s/55584809.png","size":"small"},{"#text":"http://userserve-ak.last.fm/serve/64s/55584809.png","size":"medium"},{"#text":"http://userserve-ak.last.fm/serve/126/55584809.png","size":"large"},{"#text":"http://userserve-ak.last.fm/serve/300x300/55584809.png","size":"extralarge"}],"trend":2},{"name":"Lithium","duration":"257","playcount":"12634","listeners":"8919","mbid":"fd2d2545-8b16-4d21-9de4-a0d029f848b6","url":"http://www.last.fm/music/Nirvana/_/Lithium","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"Nirvana","mbid":"5b11f4ce-a62d-471e-81fc-a69a8278c7da","url":"http://www.last.fm/music/Nirvana"},"image":[{"#text":"http://userserve-ak.last.fm/serve/34s/83456717.png","size":"small"},{"#text":"http://userserve-ak.last.fm/serve/64s/83456717.png","size":"medium"},{"#text":"http://userserve-ak.last.fm/serve/126/83456717.png","size":"large"},{"#text":"http://userserve-ak.last.fm/serve/300x300/83456717.png","size":"extralarge"}],"trend":0},{"name":"Sleepless - Radio Edit","duration":"221","playcount":"14902","listeners":"8903","mbid":"","url":"http://www.last.fm/music/Cazzette/_/Sleepless+-+Radio+Edit","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"Cazzette","mbid":"38acb25c-44a1-427b-9596-2e80b33b5c18","url":"http://www.last.fm/music/Cazzette"},"trend":3},{"name":"Something Good Can Work","duration":"164","playcount":"13451","listeners":"8862","mbid":"250c8da5-de1b-49c1-bf84-c2b7db0eb7b5","url":"http://www.last.fm/music/Two+Door+Cinema+Club/_/Something+Good+Can+Work","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"Two Door Cinema Club","mbid":"6f1de078-6684-4792-820d-2ffad64c15ed","url":"http://www.last.fm/music/Two+Door+Cinema+Club"},"image":[{"#text":"http://userserve-ak.last.fm/serve/34s/91992741.png","size":"small"},{"#text":"http://userserve-ak.last.fm/serve/64s/91992741.png","size":"medium"},{"#text":"http://userserve-ak.last.fm/serve/126/91992741.png","size":"large"},{"#text":"http://userserve-ak.last.fm/serve/300x300/91992741.png","size":"extralarge"}],"trend":0},{"name":"Weight of Love","duration":"30","playcount":"22954","listeners":"8857","mbid":"5a8798cd-feac-4f10-b3e7-5fc5d623d8c2","url":"http://www.last.fm/music/The+Black+Keys/_/Weight+of+Love","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"The Black Keys","mbid":"d15721d8-56b4-453d-b506-fc915b14cba2","url":"http://www.last.fm/music/The+Black+Keys"},"image":[{"#text":"http://userserve-ak.last.fm/serve/34s/97798515.png","size":"small"},{"#text":"http://userserve-ak.last.fm/serve/64s/97798515.png","size":"medium"},{"#text":"http://userserve-ak.last.fm/serve/126/97798515.png","size":"large"},{"#text":"http://userserve-ak.last.fm/serve/300x300/97798515.png","size":"extralarge"}],"trend":2},{"name":"Elephant","duration":"211","playcount":"13677","listeners":"8843","mbid":"73cf7f80-2fe9-43d9-932a-6cf5efdf0448","url":"http://www.last.fm/music/Tame+Impala/_/Elephant","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"Tame Impala","mbid":"63aa26c3-d59b-4da4-84ac-716b54f1ef4d","url":"http://www.last.fm/music/Tame+Impala"},"image":[{"#text":"http://userserve-ak.last.fm/serve/34s/81756565.png","size":"small"},{"#text":"http://userserve-ak.last.fm/serve/64s/81756565.png","size":"medium"},{"#text":"http://userserve-ak.last.fm/serve/126/81756565.png","size":"large"},{"#text":"http://userserve-ak.last.fm/serve/300x300/81756565.png","size":"extralarge"}],"trend":2},{"name":"Diane Young","duration":"160","playcount":"13669","listeners":"8826","mbid":"f71a7804-e21d-4b5c-927b-21909970b4cb","url":"http://www.last.fm/music/Vampire+Weekend/_/Diane+Young","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"Vampire Weekend","mbid":"af37c51c-0790-4a29-b995-456f98a6b8c9","url":"http://www.last.fm/music/Vampire+Weekend"},"image":[{"#text":"http://userserve-ak.last.fm/serve/34s/92503657.png","size":"small"},{"#text":"http://userserve-ak.last.fm/serve/64s/92503657.png","size":"medium"},{"#text":"http://userserve-ak.last.fm/serve/126/92503657.png","size":"large"},{"#text":"http://userserve-ak.last.fm/serve/300x300/92503657.png","size":"extralarge"}],"trend":0},{"name":"Nightcall","duration":"257","playcount":"14071","listeners":"8819","mbid":"071f35d6-e583-4efd-9270-e4ee2179850e","url":"http://www.last.fm/music/Kavinsky/_/Nightcall","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"Kavinsky","mbid":"939ca064-f9da-4e34-904f-d27ac7f91f73","url":"http://www.last.fm/music/Kavinsky"},"image":[{"#text":"http://userserve-ak.last.fm/serve/34s/91991263.png","size":"small"},{"#text":"http://userserve-ak.last.fm/serve/64s/91991263.png","size":"medium"},{"#text":"http://userserve-ak.last.fm/serve/126/91991263.png","size":"large"},{"#text":"http://userserve-ak.last.fm/serve/300x300/91991263.png","size":"extralarge"}],"trend":2},{"name":"Genesis","duration":"255","playcount":"15296","listeners":"8804","mbid":"fa3b272b-3cd7-4d55-8205-64c62fdb99c3","url":"http://www.last.fm/music/Grimes/_/Genesis","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"Grimes","mbid":"7e5a2a59-6d9f-4a17-b7c2-e1eedb7bd222","url":"http://www.last.fm/music/Grimes"},"image":[{"#text":"http://userserve-ak.last.fm/serve/34s/73293934.png","size":"small"},{"#text":"http://userserve-ak.last.fm/serve/64s/73293934.png","size":"medium"},{"#text":"http://userserve-ak.last.fm/serve/126/73293934.png","size":"large"},{"#text":"http://userserve-ak.last.fm/serve/300x300/73293934.png","size":"extralarge"}],"trend":0},{"name":"Lisztomania","duration":"242","playcount":"13425","listeners":"8776","mbid":"","url":"http://www.last.fm/music/Phoenix/_/Lisztomania","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"Phoenix","mbid":"02f4c1ff-65e0-4412-8e8b-6239b0faecb5","url":"http://www.last.fm/music/Phoenix"},"image":[{"#text":"http://userserve-ak.last.fm/serve/34s/53574933.png","size":"small"},{"#text":"http://userserve-ak.last.fm/serve/64s/53574933.png","size":"medium"},{"#text":"http://userserve-ak.last.fm/serve/126/53574933.png","size":"large"},{"#text":"http://userserve-ak.last.fm/serve/300x300/53574933.png","size":"extralarge"}],"trend":0},{"name":"Your Love Is Killing Me","duration":"380","playcount":"16806","listeners":"8782","mbid":"8217c825-ce91-40af-85b2-7f3a09f0be97","url":"http://www.last.fm/music/Sharon+Van+Etten/_/Your+Love+Is+Killing+Me","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"Sharon Van Etten","mbid":"5a2e9cd3-010a-4aae-9f83-629253284202","url":"http://www.last.fm/music/Sharon+Van+Etten"},"image":[{"#text":"http://userserve-ak.last.fm/serve/34s/97625921.png","size":"small"},{"#text":"http://userserve-ak.last.fm/serve/64s/97625921.png","size":"medium"},{"#text":"http://userserve-ak.last.fm/serve/126/97625921.png","size":"large"},{"#text":"http://userserve-ak.last.fm/serve/300x300/97625921.png","size":"extralarge"}],"trend":3},{"name":"Every Little Thing","duration":"243","playcount":"21771","listeners":"8726","mbid":"d3ff2ae7-06e8-4386-8893-40437a779a7a","url":"http://www.last.fm/music/R%C3%B6yksopp+&+Robyn/_/Every+Little+Thing","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"Röyksopp & Robyn","mbid":"","url":"http://www.last.fm/music/R%C3%B6yksopp+&+Robyn"},"image":[{"#text":"http://userserve-ak.last.fm/serve/34s/98517489.png","size":"small"},{"#text":"http://userserve-ak.last.fm/serve/64s/98517489.png","size":"medium"},{"#text":"http://userserve-ak.last.fm/serve/126/98517489.png","size":"large"},{"#text":"http://userserve-ak.last.fm/serve/300x300/98517489.png","size":"extralarge"}],"trend":3},{"name":"Mardy Bum","duration":"176","playcount":"13999","listeners":"8705","mbid":"809ac2e1-89a7-45d8-aba9-5df8c25d5897","url":"http://www.last.fm/music/Arctic+Monkeys/_/Mardy+Bum","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"Arctic Monkeys","mbid":"ada7a83c-e3e1-40f1-93f9-3e73dbc9298a","url":"http://www.last.fm/music/Arctic+Monkeys"},"image":[{"#text":"http://userserve-ak.last.fm/serve/34s/32760011.png","size":"small"},{"#text":"http://userserve-ak.last.fm/serve/64s/32760011.png","size":"medium"},{"#text":"http://userserve-ak.last.fm/serve/126/32760011.png","size":"large"},{"#text":"http://userserve-ak.last.fm/serve/300x300/32760011.png","size":"extralarge"}],"trend":0},{"name":"Bohemian Rhapsody","duration":"355","playcount":"12757","listeners":"8665","mbid":"405c09b9-ebb7-4442-a086-d4d0b10ccecd","url":"http://www.last.fm/music/Queen/_/Bohemian+Rhapsody","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"Queen","mbid":"0383dadf-2a4e-4d10-a46a-e9e041da8eb3","url":"http://www.last.fm/music/Queen"},"image":[{"#text":"http://userserve-ak.last.fm/serve/34s/88044381.png","size":"small"},{"#text":"http://userserve-ak.last.fm/serve/64s/88044381.png","size":"medium"},{"#text":"http://userserve-ak.last.fm/serve/126/88044381.png","size":"large"},{"#text":"http://userserve-ak.last.fm/serve/300x300/88044381.png","size":"extralarge"}],"trend":0},{"name":"Diamonds","duration":"227","playcount":"19351","listeners":"8634","mbid":"14083f2d-9986-46d1-9f41-e3e8dafd4feb","url":"http://www.last.fm/music/Rihanna/_/Diamonds","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"Rihanna","mbid":"69989475-2971-49aa-8c53-5d74af88b8be","url":"http://www.last.fm/music/Rihanna"},"image":[{"#text":"http://userserve-ak.last.fm/serve/34s/88046159.png","size":"small"},{"#text":"http://userserve-ak.last.fm/serve/64s/88046159.png","size":"medium"},{"#text":"http://userserve-ak.last.fm/serve/126/88046159.png","size":"large"},{"#text":"http://userserve-ak.last.fm/serve/300x300/88046159.png","size":"extralarge"}],"trend":2},{"name":"Sweet Child o' Mine","duration":"356","playcount":"12811","listeners":"8621","mbid":"3c6ffcb1-4167-40d0-a368-b05657dce636","url":"http://www.last.fm/music/Guns+N%27+Roses/_/Sweet+Child+o%27+Mine","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"Guns N' Roses","mbid":"","url":"http://www.last.fm/music/Guns+N%27+Roses"},"image":[{"#text":"http://userserve-ak.last.fm/serve/34s/93366519.png","size":"small"},{"#text":"http://userserve-ak.last.fm/serve/64s/93366519.png","size":"medium"},{"#text":"http://userserve-ak.last.fm/serve/126/93366519.png","size":"large"},{"#text":"http://userserve-ak.last.fm/serve/300x300/93366519.png","size":"extralarge"}],"trend":0},{"name":"Holocene","duration":"332","playcount":"13007","listeners":"8624","mbid":"9082a67e-93d4-4761-8db3-6b0471cf20ad","url":"http://www.last.fm/music/Bon+Iver/_/Holocene","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"Bon Iver","mbid":"437a0e49-c6ae-42f6-a6c1-84f25ed366bc","url":"http://www.last.fm/music/Bon+Iver"},"image":[{"#text":"http://userserve-ak.last.fm/serve/34s/92318031.png","size":"small"},{"#text":"http://userserve-ak.last.fm/serve/64s/92318031.png","size":"medium"},{"#text":"http://userserve-ak.last.fm/serve/126/92318031.png","size":"large"},{"#text":"http://userserve-ak.last.fm/serve/300x300/92318031.png","size":"extralarge"}],"trend":0},{"name":"Paranoid","duration":"167","playcount":"12262","listeners":"8619","mbid":"c6c11a2d-98c3-41ed-b68d-4e37f819deb9","url":"http://www.last.fm/music/Black+Sabbath/_/Paranoid","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"Black Sabbath","mbid":"5182c1d9-c7d2-4dad-afa0-ccfeada921a8","url":"http://www.last.fm/music/Black+Sabbath"},"image":[{"#text":"http://userserve-ak.last.fm/serve/34s/90717031.png","size":"small"},{"#text":"http://userserve-ak.last.fm/serve/64s/90717031.png","size":"medium"},{"#text":"http://userserve-ak.last.fm/serve/126/90717031.png","size":"large"},{"#text":"http://userserve-ak.last.fm/serve/300x300/90717031.png","size":"extralarge"}],"trend":0},{"name":"Gun","duration":"232","playcount":"15184","listeners":"8600","mbid":"ea121d22-c9f4-490e-b5d4-66edd2541fe6","url":"http://www.last.fm/music/CHVRCHES/_/Gun","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"CHVRCHES","mbid":"6a93afbb-257f-4166-b389-9f2a1e5c5df8","url":"http://www.last.fm/music/CHVRCHES"},"image":[{"#text":"http://userserve-ak.last.fm/serve/34s/92085853.png","size":"small"},{"#text":"http://userserve-ak.last.fm/serve/64s/92085853.png","size":"medium"},{"#text":"http://userserve-ak.last.fm/serve/126/92085853.png","size":"large"},{"#text":"http://userserve-ak.last.fm/serve/300x300/92085853.png","size":"extralarge"}],"trend":0},{"name":"Seasons (Waiting on You)","duration":"228","playcount":"15442","listeners":"8561","mbid":"db025af4-8c37-43ff-9a1c-e1d87b3440bb","url":"http://www.last.fm/music/Future+Islands/_/Seasons+(Waiting+on+You)","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"Future Islands","mbid":"74963434-dcb6-4b14-98cc-99873b06db66","url":"http://www.last.fm/music/Future+Islands"},"image":[{"#text":"http://userserve-ak.last.fm/serve/34s/97167357.png","size":"small"},{"#text":"http://userserve-ak.last.fm/serve/64s/97167357.png","size":"medium"},{"#text":"http://userserve-ak.last.fm/serve/126/97167357.png","size":"large"},{"#text":"http://userserve-ak.last.fm/serve/300x300/97167357.png","size":"extralarge"}],"trend":2},{"name":"Every Time the Sun Comes Up","duration":"264","playcount":"15121","listeners":"8532","mbid":"8acdf2e3-a5a4-48ce-bf94-f2d17d94516e","url":"http://www.last.fm/music/Sharon+Van+Etten/_/Every+Time+the+Sun+Comes+Up","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"Sharon Van Etten","mbid":"5a2e9cd3-010a-4aae-9f83-629253284202","url":"http://www.last.fm/music/Sharon+Van+Etten"},"image":[{"#text":"http://userserve-ak.last.fm/serve/34s/97625921.png","size":"small"},{"#text":"http://userserve-ak.last.fm/serve/64s/97625921.png","size":"medium"},{"#text":"http://userserve-ak.last.fm/serve/126/97625921.png","size":"large"},{"#text":"http://userserve-ak.last.fm/serve/300x300/97625921.png","size":"extralarge"}],"trend":3},{"name":"We Can't Stop","duration":"238","playcount":"14884","listeners":"8517","mbid":"02cd8267-0bfd-4652-b05c-ef25416e2b01","url":"http://www.last.fm/music/Miley+Cyrus/_/We+Can%27t+Stop","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"Miley Cyrus","mbid":"7e9bd05a-117f-4cce-87bc-e011527a8b18","url":"http://www.last.fm/music/Miley+Cyrus"},"image":[{"#text":"http://userserve-ak.last.fm/serve/34s/92702859.png","size":"small"},{"#text":"http://userserve-ak.last.fm/serve/64s/92702859.png","size":"medium"},{"#text":"http://userserve-ak.last.fm/serve/126/92702859.png","size":"large"},{"#text":"http://userserve-ak.last.fm/serve/300x300/92702859.png","size":"extralarge"}],"trend":0},{"name":"Bad Blood","duration":"213","playcount":"16378","listeners":"8509","mbid":"13cc91c0-9ebf-431f-97bd-160445699c7a","url":"http://www.last.fm/music/Bastille/_/Bad+Blood","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"Bastille","mbid":"16c07e8e-e1ef-452c-bbb7-0cda599c1ffd","url":"http://www.last.fm/music/Bastille"},"image":[{"#text":"http://userserve-ak.last.fm/serve/34s/91244823.png","size":"small"},{"#text":"http://userserve-ak.last.fm/serve/64s/91244823.png","size":"medium"},{"#text":"http://userserve-ak.last.fm/serve/126/91244823.png","size":"large"},{"#text":"http://userserve-ak.last.fm/serve/300x300/91244823.png","size":"extralarge"}],"trend":0},{"name":"You & Me (Flume Remix)","duration":"283","playcount":"15401","listeners":"8509","mbid":"","url":"http://www.last.fm/music/Disclosure/_/You+&+Me+(Flume+Remix)","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"Disclosure","mbid":"ae65c507-d9a0-4d42-9a6c-2b1f82158b9f","url":"http://www.last.fm/music/Disclosure"},"trend":2},{"name":"Uprising","duration":"248","playcount":"12786","listeners":"8484","mbid":"4942e2d1-dffc-4efe-832d-3a7818e383f3","url":"http://www.last.fm/music/Muse/_/Uprising","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"Muse","mbid":"1695c115-bf3f-4014-9966-2b0c50179193","url":"http://www.last.fm/music/Muse"},"image":[{"#text":"http://userserve-ak.last.fm/serve/34s/65553108.png","size":"small"},{"#text":"http://userserve-ak.last.fm/serve/64s/65553108.png","size":"medium"},{"#text":"http://userserve-ak.last.fm/serve/126/65553108.png","size":"large"},{"#text":"http://userserve-ak.last.fm/serve/300x300/65553108.png","size":"extralarge"}],"trend":0},{"name":"Starlight","duration":"240","playcount":"13340","listeners":"8483","mbid":"b3491b52-22fe-45fe-9a1d-497a1c3eaae8","url":"http://www.last.fm/music/Muse/_/Starlight","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"Muse","mbid":"1695c115-bf3f-4014-9966-2b0c50179193","url":"http://www.last.fm/music/Muse"},"image":[{"#text":"http://userserve-ak.last.fm/serve/34s/88400305.png","size":"small"},{"#text":"http://userserve-ak.last.fm/serve/64s/88400305.png","size":"medium"},{"#text":"http://userserve-ak.last.fm/serve/126/88400305.png","size":"large"},{"#text":"http://userserve-ak.last.fm/serve/300x300/88400305.png","size":"extralarge"}],"trend":0},{"name":"Turn Blue","duration":"138","playcount":"18999","listeners":"8458","mbid":"c32f31b2-318c-47eb-bbab-8bdc43a44017","url":"http://www.last.fm/music/The+Black+Keys/_/Turn+Blue","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"The Black Keys","mbid":"d15721d8-56b4-453d-b506-fc915b14cba2","url":"http://www.last.fm/music/The+Black+Keys"},"image":[{"#text":"http://userserve-ak.last.fm/serve/34s/97798515.png","size":"small"},{"#text":"http://userserve-ak.last.fm/serve/64s/97798515.png","size":"medium"},{"#text":"http://userserve-ak.last.fm/serve/126/97798515.png","size":"large"},{"#text":"http://userserve-ak.last.fm/serve/300x300/97798515.png","size":"extralarge"}],"trend":2},{"name":"Talk Dirty (feat. 2 Chainz)","duration":"177","playcount":"15248","listeners":"8444","mbid":"","url":"http://www.last.fm/music/Jason+Der%C3%BClo/_/Talk+Dirty+(feat.+2+Chainz)","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"Jason Derülo","mbid":"","url":"http://www.last.fm/music/Jason+Der%C3%BClo"},"trend":2},{"name":"Nothing Else Matters","duration":"388","playcount":"14268","listeners":"8411","mbid":"08e71c27-1725-43ba-a1f0-5a60ff2ec84e","url":"http://www.last.fm/music/Metallica/_/Nothing+Else+Matters","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"Metallica","mbid":"65f4f0c5-ef9e-490c-aee3-909e7ae6b2ab","url":"http://www.last.fm/music/Metallica"},"image":[{"#text":"http://userserve-ak.last.fm/serve/34s/27383399.jpg","size":"small"},{"#text":"http://userserve-ak.last.fm/serve/64s/27383399.jpg","size":"medium"},{"#text":"http://userserve-ak.last.fm/serve/126/27383399.jpg","size":"large"},{"#text":"http://userserve-ak.last.fm/serve/300x300/27383399.jpg","size":"extralarge"}],"trend":3},{"name":"Treasure","duration":"175","playcount":"13910","listeners":"8408","mbid":"c2525847-4207-44c8-995f-45e81004c6ab","url":"http://www.last.fm/music/Bruno+Mars/_/Treasure","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"Bruno Mars","mbid":"afb680f2-b6eb-4cd7-a70b-a63b25c763d5","url":"http://www.last.fm/music/Bruno+Mars"},"image":[{"#text":"http://userserve-ak.last.fm/serve/34s/92206107.png","size":"small"},{"#text":"http://userserve-ak.last.fm/serve/64s/92206107.png","size":"medium"},{"#text":"http://userserve-ak.last.fm/serve/126/92206107.png","size":"large"},{"#text":"http://userserve-ak.last.fm/serve/300x300/92206107.png","size":"extralarge"}],"trend":0},{"name":"VCR","duration":"144","playcount":"13002","listeners":"8371","mbid":"b56cad58-0a50-4f25-b4df-d3c85709db39","url":"http://www.last.fm/music/The+xx/_/VCR","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"The xx","mbid":"c5c2ea1c-4bde-4f4d-bd0b-47b200bf99d6","url":"http://www.last.fm/music/The+xx"},"image":[{"#text":"http://userserve-ak.last.fm/serve/34s/88381869.png","size":"small"},{"#text":"http://userserve-ak.last.fm/serve/64s/88381869.png","size":"medium"},{"#text":"http://userserve-ak.last.fm/serve/126/88381869.png","size":"large"},{"#text":"http://userserve-ak.last.fm/serve/300x300/88381869.png","size":"extralarge"}],"trend":0},{"name":"The Funeral","duration":"321","playcount":"12793","listeners":"8353","mbid":"10c30912-1af1-4da7-b99e-bff1bccf3abe","url":"http://www.last.fm/music/Band+of+Horses/_/The+Funeral","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"Band of Horses","mbid":"07b6020a-c539-4d68-aeef-f159f3befc76","url":"http://www.last.fm/music/Band+of+Horses"},"image":[{"#text":"http://userserve-ak.last.fm/serve/34s/95476113.png","size":"small"},{"#text":"http://userserve-ak.last.fm/serve/64s/95476113.png","size":"medium"},{"#text":"http://userserve-ak.last.fm/serve/126/95476113.png","size":"large"},{"#text":"http://userserve-ak.last.fm/serve/300x300/95476113.png","size":"extralarge"}],"trend":0},{"name":"Heartbeats","duration":"159","playcount":"12282","listeners":"8344","mbid":"09a6cb0f-883e-4d36-8707-5edacf30f0b2","url":"http://www.last.fm/music/Jos%C3%A9+Gonz%C3%A1lez/_/Heartbeats","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"José González","mbid":"cd8c5019-5d75-4d5c-bc28-e1e26a7dd5c8","url":"http://www.last.fm/music/Jos%C3%A9+Gonz%C3%A1lez"},"image":[{"#text":"http://userserve-ak.last.fm/serve/34s/55277871.jpg","size":"small"},{"#text":"http://userserve-ak.last.fm/serve/64s/55277871.jpg","size":"medium"},{"#text":"http://userserve-ak.last.fm/serve/126/55277871.jpg","size":"large"},{"#text":"http://userserve-ak.last.fm/serve/300x300/55277871.jpg","size":"extralarge"}],"trend":0},{"name":"Paranoid Android","duration":"383","playcount":"11887","listeners":"8316","mbid":"5e895228-26c2-44ac-990c-2cd2683fb550","url":"http://www.last.fm/music/Radiohead/_/Paranoid+Android","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"Radiohead","mbid":"a74b1b7f-71a5-4011-9441-d0b5e4122711","url":"http://www.last.fm/music/Radiohead"},"image":[{"#text":"http://userserve-ak.last.fm/serve/34s/99221249.jpg","size":"small"},{"#text":"http://userserve-ak.last.fm/serve/64s/99221249.jpg","size":"medium"},{"#text":"http://userserve-ak.last.fm/serve/126/99221249.jpg","size":"large"},{"#text":"http://userserve-ak.last.fm/serve/300x300/99221249.jpg","size":"extralarge"}],"trend":2},{"name":"All the Small Things","duration":"168","playcount":"12636","listeners":"8305","mbid":"","url":"http://www.last.fm/music/blink-182/_/All+the+Small+Things","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"blink-182","mbid":"","url":"http://www.last.fm/music/blink-182"},"image":[{"#text":"http://userserve-ak.last.fm/serve/34s/84212499.png","size":"small"},{"#text":"http://userserve-ak.last.fm/serve/64s/84212499.png","size":"medium"},{"#text":"http://userserve-ak.last.fm/serve/126/84212499.png","size":"large"},{"#text":"http://userserve-ak.last.fm/serve/300x300/84212499.png","size":"extralarge"}],"trend":2},{"name":"Houdini","duration":"202","playcount":"13042","listeners":"8283","mbid":"493c1843-614b-4bd0-9d8a-4a9ec44d3e35","url":"http://www.last.fm/music/Foster+the+People/_/Houdini","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"Foster the People","mbid":"e0e1a584-dd0a-4bd1-88d1-c4c62895039d","url":"http://www.last.fm/music/Foster+the+People"},"image":[{"#text":"http://userserve-ak.last.fm/serve/34s/62306479.png","size":"small"},{"#text":"http://userserve-ak.last.fm/serve/64s/62306479.png","size":"medium"},{"#text":"http://userserve-ak.last.fm/serve/126/62306479.png","size":"large"},{"#text":"http://userserve-ak.last.fm/serve/300x300/62306479.png","size":"extralarge"}],"trend":0},{"name":"When the Sun Goes Down","duration":"198","playcount":"12754","listeners":"8287","mbid":"7e27c6dc-6428-4994-b891-a8c34d943867","url":"http://www.last.fm/music/Arctic+Monkeys/_/When+the+Sun+Goes+Down","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"Arctic Monkeys","mbid":"ada7a83c-e3e1-40f1-93f9-3e73dbc9298a","url":"http://www.last.fm/music/Arctic+Monkeys"},"image":[{"#text":"http://userserve-ak.last.fm/serve/34s/32760011.png","size":"small"},{"#text":"http://userserve-ak.last.fm/serve/64s/32760011.png","size":"medium"},{"#text":"http://userserve-ak.last.fm/serve/126/32760011.png","size":"large"},{"#text":"http://userserve-ak.last.fm/serve/300x300/32760011.png","size":"extralarge"}],"trend":0},{"name":"Best of You","duration":"301","playcount":"11942","listeners":"8278","mbid":"046c106e-e7ae-45f5-8172-461224479f57","url":"http://www.last.fm/music/Foo+Fighters/_/Best+of+You","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"Foo Fighters","mbid":"67f66c07-6e61-4026-ade5-7e782fad3a5d","url":"http://www.last.fm/music/Foo+Fighters"},"image":[{"#text":"http://userserve-ak.last.fm/serve/34s/71433386.png","size":"small"},{"#text":"http://userserve-ak.last.fm/serve/64s/71433386.png","size":"medium"},{"#text":"http://userserve-ak.last.fm/serve/126/71433386.png","size":"large"},{"#text":"http://userserve-ak.last.fm/serve/300x300/71433386.png","size":"extralarge"}],"trend":0},{"name":"I Follow Rivers","duration":"223","playcount":"14583","listeners":"8273","mbid":"96d738b2-40f6-4e26-8ddd-929213d40c26","url":"http://www.last.fm/music/Lykke+Li/_/I+Follow+Rivers","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"Lykke Li","mbid":"cc7d4686-ea02-45fd-956e-94c1a322558c","url":"http://www.last.fm/music/Lykke+Li"},"image":[{"#text":"http://userserve-ak.last.fm/serve/34s/60971589.png","size":"small"},{"#text":"http://userserve-ak.last.fm/serve/64s/60971589.png","size":"medium"},{"#text":"http://userserve-ak.last.fm/serve/126/60971589.png","size":"large"},{"#text":"http://userserve-ak.last.fm/serve/300x300/60971589.png","size":"extralarge"}],"trend":2},{"name":"Retrograde","duration":"224","playcount":"13247","listeners":"8271","mbid":"c2c689ee-b1bf-4aec-939f-7f5bdac08b4c","url":"http://www.last.fm/music/James+Blake/_/Retrograde","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"James Blake","mbid":"8dc08b1f-e393-4f85-a5dd-300f7693a8b8","url":"http://www.last.fm/music/James+Blake"},"image":[{"#text":"http://userserve-ak.last.fm/serve/34s/88946193.png","size":"small"},{"#text":"http://userserve-ak.last.fm/serve/64s/88946193.png","size":"medium"},{"#text":"http://userserve-ak.last.fm/serve/126/88946193.png","size":"large"},{"#text":"http://userserve-ak.last.fm/serve/300x300/88946193.png","size":"extralarge"}],"trend":2},{"name":"The Suburbs","duration":"314","playcount":"13458","listeners":"8264","mbid":"37cc1473-f890-4307-bc93-7be70003b13a","url":"http://www.last.fm/music/Arcade+Fire/_/The+Suburbs","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"Arcade Fire","mbid":"52074ba6-e495-4ef3-9bb4-0703888a9f68","url":"http://www.last.fm/music/Arcade+Fire"},"image":[{"#text":"http://userserve-ak.last.fm/serve/34s/50128417.png","size":"small"},{"#text":"http://userserve-ak.last.fm/serve/64s/50128417.png","size":"medium"},{"#text":"http://userserve-ak.last.fm/serve/126/50128417.png","size":"large"},{"#text":"http://userserve-ak.last.fm/serve/300x300/50128417.png","size":"extralarge"}],"trend":0},{"name":"Step","duration":"251","playcount":"13123","listeners":"8264","mbid":"42e71634-e096-4bac-a89e-6871295182aa","url":"http://www.last.fm/music/Vampire+Weekend/_/Step","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"Vampire Weekend","mbid":"af37c51c-0790-4a29-b995-456f98a6b8c9","url":"http://www.last.fm/music/Vampire+Weekend"},"image":[{"#text":"http://userserve-ak.last.fm/serve/34s/92503657.png","size":"small"},{"#text":"http://userserve-ak.last.fm/serve/64s/92503657.png","size":"medium"},{"#text":"http://userserve-ak.last.fm/serve/126/92503657.png","size":"large"},{"#text":"http://userserve-ak.last.fm/serve/300x300/92503657.png","size":"extralarge"}],"trend":0},{"name":"Digital Witness","duration":"202","playcount":"13390","listeners":"8253","mbid":"744d83e8-8096-4c4f-9634-d0e0152bd070","url":"http://www.last.fm/music/St.+Vincent/_/Digital+Witness","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"St. Vincent","mbid":"5334edc0-5faf-4ca5-b1df-000de3e1f752","url":"http://www.last.fm/music/St.+Vincent"},"image":[{"#text":"http://userserve-ak.last.fm/serve/34s/97224569.png","size":"small"},{"#text":"http://userserve-ak.last.fm/serve/64s/97224569.png","size":"medium"},{"#text":"http://userserve-ak.last.fm/serve/126/97224569.png","size":"large"},{"#text":"http://userserve-ak.last.fm/serve/300x300/97224569.png","size":"extralarge"}],"trend":2},{"name":"Salad Days","duration":"152","playcount":"14947","listeners":"8240","mbid":"95e09a02-7c46-46e0-bda0-5ffc20fa13d7","url":"http://www.last.fm/music/Mac+DeMarco/_/Salad+Days","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"Mac DeMarco","mbid":"f2492c31-54a8-4347-a1fc-f81f72873bbf","url":"http://www.last.fm/music/Mac+DeMarco"},"image":[{"#text":"http://userserve-ak.last.fm/serve/34s/97367673.png","size":"small"},{"#text":"http://userserve-ak.last.fm/serve/64s/97367673.png","size":"medium"},{"#text":"http://userserve-ak.last.fm/serve/126/97367673.png","size":"large"},{"#text":"http://userserve-ak.last.fm/serve/300x300/97367673.png","size":"extralarge"}],"trend":2},{"name":"Love Will Tear Us Apart","duration":"205","playcount":"12595","listeners":"8231","mbid":"7f2365fd-9949-42b5-87bf-d956c7cf35db","url":"http://www.last.fm/music/Joy+Division/_/Love+Will+Tear+Us+Apart","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"Joy Division","mbid":"9a58fda3-f4ed-4080-a3a5-f457aac9fcdd","url":"http://www.last.fm/music/Joy+Division"},"image":[{"#text":"http://userserve-ak.last.fm/serve/34s/81523939.png","size":"small"},{"#text":"http://userserve-ak.last.fm/serve/64s/81523939.png","size":"medium"},{"#text":"http://userserve-ak.last.fm/serve/126/81523939.png","size":"large"},{"#text":"http://userserve-ak.last.fm/serve/300x300/81523939.png","size":"extralarge"}],"trend":2},{"name":"Wish You Were Here","duration":"280","playcount":"14757","listeners":"8181","mbid":"c0d30d61-585d-4ec7-bb14-a5ffe35ba59e","url":"http://www.last.fm/music/Pink+Floyd/_/Wish+You+Were+Here","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"Pink Floyd","mbid":"83d91898-7763-47d7-b03b-b92132375c47","url":"http://www.last.fm/music/Pink+Floyd"},"image":[{"#text":"http://userserve-ak.last.fm/serve/34s/3445384.jpg","size":"small"},{"#text":"http://userserve-ak.last.fm/serve/64s/3445384.jpg","size":"medium"},{"#text":"http://userserve-ak.last.fm/serve/126/3445384.jpg","size":"large"},{"#text":"http://userserve-ak.last.fm/serve/300x300/3445384.jpg","size":"extralarge"}],"trend":3},{"name":"Supermassive Black Hole","duration":"210","playcount":"12815","listeners":"8190","mbid":"d2a929d2-4932-4c0a-b2f0-1f32f3ef59d0","url":"http://www.last.fm/music/Muse/_/Supermassive+Black+Hole","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"Muse","mbid":"1695c115-bf3f-4014-9966-2b0c50179193","url":"http://www.last.fm/music/Muse"},"image":[{"#text":"http://userserve-ak.last.fm/serve/34s/88400305.png","size":"small"},{"#text":"http://userserve-ak.last.fm/serve/64s/88400305.png","size":"medium"},{"#text":"http://userserve-ak.last.fm/serve/126/88400305.png","size":"large"},{"#text":"http://userserve-ak.last.fm/serve/300x300/88400305.png","size":"extralarge"}],"trend":0},{"name":"I Need My Girl","duration":"279","playcount":"13741","listeners":"8193","mbid":"21c30ce3-843d-4837-9fa1-4de95d638e65","url":"http://www.last.fm/music/The+National/_/I+Need+My+Girl","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"The National","mbid":"664c3e0e-42d8-48c1-b209-1efca19c0325","url":"http://www.last.fm/music/The+National"},"image":[{"#text":"http://userserve-ak.last.fm/serve/34s/91490311.png","size":"small"},{"#text":"http://userserve-ak.last.fm/serve/64s/91490311.png","size":"medium"},{"#text":"http://userserve-ak.last.fm/serve/126/91490311.png","size":"large"},{"#text":"http://userserve-ak.last.fm/serve/300x300/91490311.png","size":"extralarge"}],"trend":3},{"name":"Heart-Shaped Box","duration":"282","playcount":"12068","listeners":"8184","mbid":"ba2e1bd3-75db-41a2-a3cb-85f5731622f7","url":"http://www.last.fm/music/Nirvana/_/Heart-Shaped+Box","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"Nirvana","mbid":"5b11f4ce-a62d-471e-81fc-a69a8278c7da","url":"http://www.last.fm/music/Nirvana"},"image":[{"#text":"http://userserve-ak.last.fm/serve/34s/91771383.png","size":"small"},{"#text":"http://userserve-ak.last.fm/serve/64s/91771383.png","size":"medium"},{"#text":"http://userserve-ak.last.fm/serve/126/91771383.png","size":"large"},{"#text":"http://userserve-ak.last.fm/serve/300x300/91771383.png","size":"extralarge"}],"trend":0},{"name":"Forever","duration":"245","playcount":"14648","listeners":"8182","mbid":"bc509ac6-3b83-402e-bd09-08de04bce6c0","url":"http://www.last.fm/music/HAIM/_/Forever","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"HAIM","mbid":"6da01dec-d03c-492f-8f22-3969ea340888","url":"http://www.last.fm/music/HAIM"},"image":[{"#text":"http://userserve-ak.last.fm/serve/34s/92568911.png","size":"small"},{"#text":"http://userserve-ak.last.fm/serve/64s/92568911.png","size":"medium"},{"#text":"http://userserve-ak.last.fm/serve/126/92568911.png","size":"large"},{"#text":"http://userserve-ak.last.fm/serve/300x300/92568911.png","size":"extralarge"}],"trend":2},{"name":"Thrift Shop (feat. Wanz)","duration":"237","playcount":"12370","listeners":"8147","mbid":"","url":"http://www.last.fm/music/Macklemore+&+Ryan+Lewis/_/Thrift+Shop+(feat.+Wanz)","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"Macklemore & Ryan Lewis","mbid":"97b226c8-7140-4da3-91ac-15e62e131a81","url":"http://www.last.fm/music/Macklemore+&+Ryan+Lewis"},"trend":0},{"name":"Best Friend","duration":"267","playcount":"16305","listeners":"8124","mbid":"a39cdc9a-93a1-433e-a4ef-c6d7016f3424","url":"http://www.last.fm/music/Foster+the+People/_/Best+Friend","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"Foster the People","mbid":"e0e1a584-dd0a-4bd1-88d1-c4c62895039d","url":"http://www.last.fm/music/Foster+the+People"},"image":[{"#text":"http://userserve-ak.last.fm/serve/34s/96064521.png","size":"small"},{"#text":"http://userserve-ak.last.fm/serve/64s/96064521.png","size":"medium"},{"#text":"http://userserve-ak.last.fm/serve/126/96064521.png","size":"large"},{"#text":"http://userserve-ak.last.fm/serve/300x300/96064521.png","size":"extralarge"}],"trend":3},{"name":"Fitzpleasure","duration":"219","playcount":"13135","listeners":"8103","mbid":"026c6093-33a5-4e2a-bd54-3cdce8f11074","url":"http://www.last.fm/music/Alt-J/_/Fitzpleasure","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"Alt-J","mbid":"fc7bbf00-fbaa-4736-986b-b3ac0266ca9b","url":"http://www.last.fm/music/Alt-J"},"image":[{"#text":"http://userserve-ak.last.fm/serve/34s/83901243.png","size":"small"},{"#text":"http://userserve-ak.last.fm/serve/64s/83901243.png","size":"medium"},{"#text":"http://userserve-ak.last.fm/serve/126/83901243.png","size":"large"},{"#text":"http://userserve-ak.last.fm/serve/300x300/83901243.png","size":"extralarge"}],"trend":0},{"name":"No One Knows","duration":"279","playcount":"11730","listeners":"8094","mbid":"1ee7ca93-7ccb-4cc9-aa40-1dc527727bd2","url":"http://www.last.fm/music/Queens+of+the+Stone+Age/_/No+One+Knows","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"Queens of the Stone Age","mbid":"246aa41e-8a40-4018-a6d6-8fb646418c25","url":"http://www.last.fm/music/Queens+of+the+Stone+Age"},"image":[{"#text":"http://userserve-ak.last.fm/serve/34s/59975609.png","size":"small"},{"#text":"http://userserve-ak.last.fm/serve/64s/59975609.png","size":"medium"},{"#text":"http://userserve-ak.last.fm/serve/126/59975609.png","size":"large"},{"#text":"http://userserve-ak.last.fm/serve/300x300/59975609.png","size":"extralarge"}],"trend":0},{"name":"Lights","duration":"211","playcount":"14649","listeners":"8072","mbid":"8d26fff6-5995-4e5e-bba8-4e155371407a","url":"http://www.last.fm/music/Ellie+Goulding/_/Lights","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"Ellie Goulding","mbid":"33ca19f4-18c8-4411-98df-ac23890ce9f5","url":"http://www.last.fm/music/Ellie+Goulding"},"image":[{"#text":"http://userserve-ak.last.fm/serve/34s/82691859.png","size":"small"},{"#text":"http://userserve-ak.last.fm/serve/64s/82691859.png","size":"medium"},{"#text":"http://userserve-ak.last.fm/serve/126/82691859.png","size":"large"},{"#text":"http://userserve-ak.last.fm/serve/300x300/82691859.png","size":"extralarge"}],"trend":2},{"name":"Gimme Shelter","duration":"271","playcount":"11548","listeners":"8059","mbid":"d1a17078-ac0f-4bf2-a014-3f4c2e6099b7","url":"http://www.last.fm/music/The+Rolling+Stones/_/Gimme+Shelter","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"The Rolling Stones","mbid":"b071f9fa-14b0-4217-8e97-eb41da73f598","url":"http://www.last.fm/music/The+Rolling+Stones"},"image":[{"#text":"http://userserve-ak.last.fm/serve/34s/50670591.png","size":"small"},{"#text":"http://userserve-ak.last.fm/serve/64s/50670591.png","size":"medium"},{"#text":"http://userserve-ak.last.fm/serve/126/50670591.png","size":"large"},{"#text":"http://userserve-ak.last.fm/serve/300x300/50670591.png","size":"extralarge"}],"trend":3},{"name":"Sayit","duration":"386","playcount":"18315","listeners":"8067","mbid":"6ca237e5-65ae-4319-b4bb-a94a117f4a9d","url":"http://www.last.fm/music/R%C3%B6yksopp+&+Robyn/_/Sayit","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"Röyksopp & Robyn","mbid":"","url":"http://www.last.fm/music/R%C3%B6yksopp+&+Robyn"},"image":[{"#text":"http://userserve-ak.last.fm/serve/34s/98517489.png","size":"small"},{"#text":"http://userserve-ak.last.fm/serve/64s/98517489.png","size":"medium"},{"#text":"http://userserve-ak.last.fm/serve/126/98517489.png","size":"large"},{"#text":"http://userserve-ak.last.fm/serve/300x300/98517489.png","size":"extralarge"}],"trend":3},{"name":"I Love It (feat. Charli XCX)","duration":"155","playcount":"13299","listeners":"8044","mbid":"","url":"http://www.last.fm/music/Icona+Pop/_/I+Love+It+(feat.+Charli+XCX)","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"Icona Pop","mbid":"c5f259d0-abd8-418e-81ee-3965fd4e4e9a","url":"http://www.last.fm/music/Icona+Pop"},"trend":2},{"name":"Helena Beat","duration":"273","playcount":"12417","listeners":"8043","mbid":"dc2c0556-2372-4629-bdb6-a791f075b7e2","url":"http://www.last.fm/music/Foster+the+People/_/Helena+Beat","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"Foster the People","mbid":"e0e1a584-dd0a-4bd1-88d1-c4c62895039d","url":"http://www.last.fm/music/Foster+the+People"},"image":[{"#text":"http://userserve-ak.last.fm/serve/34s/62306479.png","size":"small"},{"#text":"http://userserve-ak.last.fm/serve/64s/62306479.png","size":"medium"},{"#text":"http://userserve-ak.last.fm/serve/126/62306479.png","size":"large"},{"#text":"http://userserve-ak.last.fm/serve/300x300/62306479.png","size":"extralarge"}],"trend":3},{"name":"Story of My Life","duration":"244","playcount":"14601","listeners":"8014","mbid":"d8f86a0c-2f79-4fd5-8cdf-a35c3c719eb9","url":"http://www.last.fm/music/One+Direction/_/Story+of+My+Life","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"One Direction","mbid":"1a425bbd-cca4-4b2c-aeb7-71cb176c828a","url":"http://www.last.fm/music/One+Direction"},"image":[{"#text":"http://userserve-ak.last.fm/serve/34s/94157943.png","size":"small"},{"#text":"http://userserve-ak.last.fm/serve/64s/94157943.png","size":"medium"},{"#text":"http://userserve-ak.last.fm/serve/126/94157943.png","size":"large"},{"#text":"http://userserve-ak.last.fm/serve/300x300/94157943.png","size":"extralarge"}],"trend":0},{"name":"White Teeth Teens","duration":"217","playcount":"14887","listeners":"8005","mbid":"876dd206-a33e-4e46-86f5-8cad26433c0c","url":"http://www.last.fm/music/Lorde/_/White+Teeth+Teens","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"Lorde","mbid":"14cd21f6-df8e-4bff-af75-0dcfeb307c5d","url":"http://www.last.fm/music/Lorde"},"image":[{"#text":"http://userserve-ak.last.fm/serve/34s/93158109.png","size":"small"},{"#text":"http://userserve-ak.last.fm/serve/64s/93158109.png","size":"medium"},{"#text":"http://userserve-ak.last.fm/serve/126/93158109.png","size":"large"},{"#text":"http://userserve-ak.last.fm/serve/300x300/93158109.png","size":"extralarge"}],"trend":2},{"name":"Naïve","duration":"204","playcount":"12757","listeners":"8001","mbid":"58e8ae35-a004-4aae-9b08-a975273b21ac","url":"http://www.last.fm/music/The+Kooks/_/Na%C3%AFve","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"The Kooks","mbid":"c41c6a32-cd7e-4cce-8859-559efdd457b3","url":"http://www.last.fm/music/The+Kooks"},"image":[{"#text":"http://userserve-ak.last.fm/serve/34s/35842799.png","size":"small"},{"#text":"http://userserve-ak.last.fm/serve/64s/35842799.png","size":"medium"},{"#text":"http://userserve-ak.last.fm/serve/126/35842799.png","size":"large"},{"#text":"http://userserve-ak.last.fm/serve/300x300/35842799.png","size":"extralarge"}],"trend":3},{"name":"Little Lion Man","duration":"256","playcount":"12081","listeners":"7979","mbid":"bd44b889-3749-4b4f-b426-14128105c286","url":"http://www.last.fm/music/Mumford+&+Sons/_/Little+Lion+Man","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"Mumford & Sons","mbid":"c44e9c22-ef82-4a77-9bcd-af6c958446d6","url":"http://www.last.fm/music/Mumford+&+Sons"},"image":[{"#text":"http://userserve-ak.last.fm/serve/34s/82305067.png","size":"small"},{"#text":"http://userserve-ak.last.fm/serve/64s/82305067.png","size":"medium"},{"#text":"http://userserve-ak.last.fm/serve/126/82305067.png","size":"large"},{"#text":"http://userserve-ak.last.fm/serve/300x300/82305067.png","size":"extralarge"}],"trend":0},{"name":"Carmen","duration":"249","playcount":"15150","listeners":"7986","mbid":"506ddd5a-dce5-449f-83ae-96f1af28fe7a","url":"http://www.last.fm/music/Lana+Del+Rey/_/Carmen","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"Lana Del Rey","mbid":"b7539c32-53e7-4908-bda3-81449c367da6","url":"http://www.last.fm/music/Lana+Del+Rey"},"image":[{"#text":"http://userserve-ak.last.fm/serve/34s/88340753.png","size":"small"},{"#text":"http://userserve-ak.last.fm/serve/64s/88340753.png","size":"medium"},{"#text":"http://userserve-ak.last.fm/serve/126/88340753.png","size":"large"},{"#text":"http://userserve-ak.last.fm/serve/300x300/88340753.png","size":"extralarge"}],"trend":3},{"name":"505","duration":"252","playcount":"15638","listeners":"7976","mbid":"419f0373-d393-4a53-a8d0-39ab7bee6585","url":"http://www.last.fm/music/Arctic+Monkeys/_/505","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"Arctic Monkeys","mbid":"ada7a83c-e3e1-40f1-93f9-3e73dbc9298a","url":"http://www.last.fm/music/Arctic+Monkeys"},"image":[{"#text":"http://userserve-ak.last.fm/serve/34s/33692189.png","size":"small"},{"#text":"http://userserve-ak.last.fm/serve/64s/33692189.png","size":"medium"},{"#text":"http://userserve-ak.last.fm/serve/126/33692189.png","size":"large"},{"#text":"http://userserve-ak.last.fm/serve/300x300/33692189.png","size":"extralarge"}],"trend":3},{"name":"This Is What Makes Us Girls","duration":"240","playcount":"14665","listeners":"7956","mbid":"f26dc4a5-71c8-4699-b551-8f40615abe5f","url":"http://www.last.fm/music/Lana+Del+Rey/_/This+Is+What+Makes+Us+Girls","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"Lana Del Rey","mbid":"b7539c32-53e7-4908-bda3-81449c367da6","url":"http://www.last.fm/music/Lana+Del+Rey"},"image":[{"#text":"http://userserve-ak.last.fm/serve/34s/88340753.png","size":"small"},{"#text":"http://userserve-ak.last.fm/serve/64s/88340753.png","size":"medium"},{"#text":"http://userserve-ak.last.fm/serve/126/88340753.png","size":"large"},{"#text":"http://userserve-ak.last.fm/serve/300x300/88340753.png","size":"extralarge"}],"trend":3},{"name":"Wild Wild Love","duration":"207","playcount":"13541","listeners":"7946","mbid":"","url":"http://www.last.fm/music/Pitbull/_/Wild+Wild+Love","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"Pitbull","mbid":"3f7b5e3e-289a-44d7-95a7-f7ffab7a2bf2","url":"http://www.last.fm/music/Pitbull"},"trend":3},{"name":"Our Love","duration":"234","playcount":"14817","listeners":"7949","mbid":"aacc47dd-4bb0-4350-83fb-4f4da775caa4","url":"http://www.last.fm/music/Sharon+Van+Etten/_/Our+Love","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"Sharon Van Etten","mbid":"5a2e9cd3-010a-4aae-9f83-629253284202","url":"http://www.last.fm/music/Sharon+Van+Etten"},"image":[{"#text":"http://userserve-ak.last.fm/serve/34s/97625921.png","size":"small"},{"#text":"http://userserve-ak.last.fm/serve/64s/97625921.png","size":"medium"},{"#text":"http://userserve-ak.last.fm/serve/126/97625921.png","size":"large"},{"#text":"http://userserve-ak.last.fm/serve/300x300/97625921.png","size":"extralarge"}],"trend":3},{"name":"Chasing Cars","duration":"271","playcount":"11960","listeners":"7926","mbid":"6bfd2a3c-9345-4a41-97fd-b4e9e685a82a","url":"http://www.last.fm/music/Snow+Patrol/_/Chasing+Cars","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"Snow Patrol","mbid":"a66999a7-ae5c-460e-ba94-1a01143ae847","url":"http://www.last.fm/music/Snow+Patrol"},"image":[{"#text":"http://userserve-ak.last.fm/serve/34s/53585633.png","size":"small"},{"#text":"http://userserve-ak.last.fm/serve/64s/53585633.png","size":"medium"},{"#text":"http://userserve-ak.last.fm/serve/126/53585633.png","size":"large"},{"#text":"http://userserve-ak.last.fm/serve/300x300/53585633.png","size":"extralarge"}],"trend":3},{"name":"Just like a Dream","duration":"249","playcount":"14965","listeners":"7947","mbid":"b1acd93b-b44c-4bac-aed4-caf72111ae2a","url":"http://www.last.fm/music/Lykke+Li/_/Just+like+a+Dream","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"Lykke Li","mbid":"cc7d4686-ea02-45fd-956e-94c1a322558c","url":"http://www.last.fm/music/Lykke+Li"},"image":[{"#text":"http://userserve-ak.last.fm/serve/34s/97695169.png","size":"small"},{"#text":"http://userserve-ak.last.fm/serve/64s/97695169.png","size":"medium"},{"#text":"http://userserve-ak.last.fm/serve/126/97695169.png","size":"large"},{"#text":"http://userserve-ak.last.fm/serve/300x300/97695169.png","size":"extralarge"}],"trend":2},{"name":"I Sat by the Ocean","duration":"235","playcount":"12725","listeners":"7945","mbid":"15d51ea7-b1f2-442c-871b-f5806febc86e","url":"http://www.last.fm/music/Queens+of+the+Stone+Age/_/I+Sat+by+the+Ocean","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"Queens of the Stone Age","mbid":"246aa41e-8a40-4018-a6d6-8fb646418c25","url":"http://www.last.fm/music/Queens+of+the+Stone+Age"},"image":[{"#text":"http://userserve-ak.last.fm/serve/34s/88473229.png","size":"small"},{"#text":"http://userserve-ak.last.fm/serve/64s/88473229.png","size":"medium"},{"#text":"http://userserve-ak.last.fm/serve/126/88473229.png","size":"large"},{"#text":"http://userserve-ak.last.fm/serve/300x300/88473229.png","size":"extralarge"}],"trend":3},{"name":"Another Love","duration":"243","playcount":"15454","listeners":"7937","mbid":"f0676d75-459a-4a10-977a-450f77419cf3","url":"http://www.last.fm/music/Tom+Odell/_/Another+Love","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"Tom Odell","mbid":"fee6a7fb-80d9-4290-a171-e48f1f20e381","url":"http://www.last.fm/music/Tom+Odell"},"image":[{"#text":"http://userserve-ak.last.fm/serve/34s/91163865.png","size":"small"},{"#text":"http://userserve-ak.last.fm/serve/64s/91163865.png","size":"medium"},{"#text":"http://userserve-ak.last.fm/serve/126/91163865.png","size":"large"},{"#text":"http://userserve-ak.last.fm/serve/300x300/91163865.png","size":"extralarge"}],"trend":3},{"name":"Can't Stop","duration":"268","playcount":"11652","listeners":"7907","mbid":"747ff1af-13b4-4e77-b4b8-62f7c411a431","url":"http://www.last.fm/music/Red+Hot+Chili+Peppers/_/Can%27t+Stop","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"Red Hot Chili Peppers","mbid":"8bfac288-ccc5-448d-9573-c33ea2aa5c30","url":"http://www.last.fm/music/Red+Hot+Chili+Peppers"},"image":[{"#text":"http://userserve-ak.last.fm/serve/34s/85872471.png","size":"small"},{"#text":"http://userserve-ak.last.fm/serve/64s/85872471.png","size":"medium"},{"#text":"http://userserve-ak.last.fm/serve/126/85872471.png","size":"large"},{"#text":"http://userserve-ak.last.fm/serve/300x300/85872471.png","size":"extralarge"}],"trend":3},{"name":"New Slang","duration":"231","playcount":"11834","listeners":"7900","mbid":"af725905-9398-4434-89f4-966ccf413c79","url":"http://www.last.fm/music/The+Shins/_/New+Slang","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"The Shins","mbid":"6c8b9855-ba8b-48f9-ac1d-42167f7f7b18","url":"http://www.last.fm/music/The+Shins"},"image":[{"#text":"http://userserve-ak.last.fm/serve/34s/59992385.png","size":"small"},{"#text":"http://userserve-ak.last.fm/serve/64s/59992385.png","size":"medium"},{"#text":"http://userserve-ak.last.fm/serve/126/59992385.png","size":"large"},{"#text":"http://userserve-ak.last.fm/serve/300x300/59992385.png","size":"extralarge"}],"trend":2},{"name":"Someone Like You","duration":"284","playcount":"12511","listeners":"7895","mbid":"028efe7f-cdfb-4135-846f-848f2fff15b1","url":"http://www.last.fm/music/Adele/_/Someone+Like+You","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"Adele","mbid":"1de93a63-3a9f-443a-ba8a-a43b5fe0121e","url":"http://www.last.fm/music/Adele"},"image":[{"#text":"http://userserve-ak.last.fm/serve/34s/79993209.png","size":"small"},{"#text":"http://userserve-ak.last.fm/serve/64s/79993209.png","size":"medium"},{"#text":"http://userserve-ak.last.fm/serve/126/79993209.png","size":"large"},{"#text":"http://userserve-ak.last.fm/serve/300x300/79993209.png","size":"extralarge"}],"trend":3},{"name":"Oblivion","duration":"228","playcount":"13203","listeners":"7898","mbid":"ec496b0d-cac7-4f45-b2d7-68f3b6179b13","url":"http://www.last.fm/music/Grimes/_/Oblivion","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"Grimes","mbid":"7e5a2a59-6d9f-4a17-b7c2-e1eedb7bd222","url":"http://www.last.fm/music/Grimes"},"image":[{"#text":"http://userserve-ak.last.fm/serve/34s/73293934.png","size":"small"},{"#text":"http://userserve-ak.last.fm/serve/64s/73293934.png","size":"medium"},{"#text":"http://userserve-ak.last.fm/serve/126/73293934.png","size":"large"},{"#text":"http://userserve-ak.last.fm/serve/300x300/73293934.png","size":"extralarge"}],"trend":2},{"name":"Brianstorm","duration":"171","playcount":"12553","listeners":"7891","mbid":"8214182b-038a-40a0-a8bf-cb05044d8f46","url":"http://www.last.fm/music/Arctic+Monkeys/_/Brianstorm","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"Arctic Monkeys","mbid":"ada7a83c-e3e1-40f1-93f9-3e73dbc9298a","url":"http://www.last.fm/music/Arctic+Monkeys"},"image":[{"#text":"http://userserve-ak.last.fm/serve/34s/33692189.png","size":"small"},{"#text":"http://userserve-ak.last.fm/serve/64s/33692189.png","size":"medium"},{"#text":"http://userserve-ak.last.fm/serve/126/33692189.png","size":"large"},{"#text":"http://userserve-ak.last.fm/serve/300x300/33692189.png","size":"extralarge"}],"trend":3}];

;

;
var googleHandler=function(){
$.ajax({
url:"https://accounts.google.com/logout"
})
}
googleHandler.login=function(){
if(googleHandler.loaded){
if(!oauthToken)
gapi.load('auth',{'callback':onAuthApiLoad});
gapi.load('picker',{'callback':onPickerApiLoad});
}
}
var developerKey='AIzaSyDQ6Nx52dFYGYf8OEiCqmgMHQLQ4flLXTE';
var clientId='561761909178-gkhlabo6ij2g5as3p1rnidpesobh72fc.apps.googleusercontent.com';
var scope=['https://www.googleapis.com/auth/drive'];
var pickerApiLoaded=false;
var oauthToken;
function onApiLoad(){
googleHandler.loaded=true;
}
function onAuthApiLoad(){
window.gapi.auth.authorize(
{
'client_id':clientId,
'scope':scope,
'immediate':false
},
handleAuthResult);
}
function onPickerApiLoad(){
pickerApiLoaded=true;
createPicker();
}
function handleAuthResult(a){
if(a&&!a.error){
oauthToken=a.access_token;
createPicker();
}
}
function createPicker(){
if(pickerApiLoaded&&oauthToken){
var a=new google.picker.DocsView()
.setIncludeFolders(true)
.setMimeTypes('audio/mpeg,video/mpeg')
.setSelectFolderEnabled(true);
var b=new google.picker.PickerBuilder().
addView(a).setOAuthToken(oauthToken).
enableFeature(google.picker.Feature.MULTISELECT_ENABLED).
setDeveloperKey(developerKey).
setCallback(pickerCallback).
build();
b.setVisible(true);
}
}
function createFolderPicker(){
var a=new google.picker.DocsView()
.setIncludeFolders(true)
.setMimeTypes('application/vnd.google-apps.folder')
.setSelectFolderEnabled(true);
if(pickerApiLoaded&&oauthToken){
var b=new google.picker.PickerBuilder().
addView(a).
setOAuthToken(oauthToken).
setDeveloperKey(developerKey).
setCallback(pickerCallback).
build();
b.setVisible(true);
}
}
var googleDrivePlaylist=[];
var googleDrivePlaylistActId=0;
var googleDrivePlaylistLength=0;
function executeFileRequest(n){
function handleResponse(j){
if(j){
if(j.mimeType=="application/vnd.google-apps.folder"){
function retrieveAllFilesInFolder(e,f){
var g=function(c,d){
c.execute(function(a){
d=d.concat(a.items);
var b=a.nextPageToken;
if(b){
c=gapi.client.drive.children.list({
'folderId':e,
'pageToken':b
});
g(c,d);
}else{
f(d);
}
});
}
var h=gapi.client.drive.children.list({
'folderId':e
});
g(h,[]);
}
function getFilesData(a){
googleDrivePlaylistLength=googleDrivePlaylistLength-1+a.length;
for(var i=0;i<a.length;i++){
var b=gapi.client.drive.files.get({
'fileId':a[i].id
});
executeFileRequest(b);
}
}
retrieveAllFilesInFolder(j.id,getFilesData)
}else{
console.dir(j);
if(j.mimeType!="video/mpeg"){
var k="gsid"+helperFunctions.padZeros(playlistController.globalId,(""+googleDrivePlaylistLength).length);
var l="plsid"+helperFunctions.padZeros(googleDrivePlaylistActId,(""+googleDrivePlaylistLength).length);
if(j.mimeType.substring(0,5)=="audio"){
var m=true;
}else
m=false;
googleDrivePlaylist.push({id:l,gid:k,name:j.title,artist:"",streamURL:j.webContentLink,isGoogleDrive:true,isAudio:m})
playlistController.globalId=playlistController.globalId+1;
googleDrivePlaylistActId=googleDrivePlaylistActId+1;
}else
googleDrivePlaylistLength=googleDrivePlaylistLength-1;
console.log("??? "+googleDrivePlaylist.length+"   "+googleDrivePlaylistLength)
if(googleDrivePlaylist.length==googleDrivePlaylistLength){
$.mobile.loading("hide");
if(playlistController.loadedPlaylistSongs.length>0){
if(playlistController.loadedPlaylistSongs[0].isPlaylist){
playlistController.loadedPlaylistSongs=googleDrivePlaylist;
}else
playlistController.loadedPlaylistSongs=googleDrivePlaylist.concat(playlistController.loadedPlaylistSongs);
}
$("#clearChoosenPlaylists").show();
$scope.safeApply();
$("#playlistview").listview('refresh');
playbackController.remarkSong();
playlistController.makePlayListSortable();
setTimeout(function(){
uiController.playListScroll.refresh();
},150)
}

}
}
}
n.execute(handleResponse);
}
function pickerCallback(a){
var b='nothing';
if(a[google.picker.Response.ACTION]==google.picker.Action.PICKED){
googleDrivePlaylist=[];
googleDrivePlaylistActId=0;
googleDrivePlaylistLength=a[google.picker.Response.DOCUMENTS].length;
for(var c=0;c<a[google.picker.Response.DOCUMENTS].length;c++){
var d=a[google.picker.Response.DOCUMENTS][c];
var e=d[google.picker.Document.ID];
var f=gapi.client.drive.files.get({
'fileId':e
});
$.mobile.loading("show");
setTimeout(function(){
$.mobile.loading("hide");
},30000);
executeFileRequest(f);
}
}
}

function loadClient(a){
gapi.client.load('drive','v2',a);
}
;

;
var helperFunctions=function(){
};
helperFunctions.padZeros=function(a,b){
var s=a+"";
while(s.length<b)s="0"+s;
return s;
}
helperFunctions.clearBackground=function(a){
var b=$(a).get(0);
if(!b)
return;
$(b).hide();
$(b).css("opacity","0")
}
helperFunctions.animateBackgroundTimeout=null;
helperFunctions.animateBackground=function(c,d,e,f,g,h,i){
var j=false;
var k=0;
var l=0;
var m=false;
var n=0;
if(helperFunctions.animateBackgroundTimeout){
clearTimeout(helperFunctions.animateBackgroundTimeout);
helperFunctions.animateBackgroundTimeout=null;
}
function startAnimation(){
var a=$(c).get(0);
if(!a)
return;
$(a).show();
a.style.opacity=0.8;
a.style.backgroundImage='url('+d+')';
a.style.width=e+'px';
a.style.height=f+'px';
a.style.backgroundPositionX="0px";
a.style.backgroundPositionY="0px";
var b=Math.round(100/i);
n=1/b;
helperFunctions.animateBackgroundTimeout=setTimeout(continueAnimation,n/1000);
}
function continueAnimation(){
l+=h;
k+=1;
if(k>=g){
l=0;
k=0;
}
var a=$(c).get(0);
if(!a)
return;
a.style.backgroundPositionY=(-l)+'.0px';
console.log(a.style.backgroundSize+"   "+a.style.backgroundPositionX)
helperFunctions.animateBackgroundTimeout=setTimeout(continueAnimation,n*1000);
}
function stopAnimation(){clearTimeout(m);
helperFunctions.animateBackgroundTimeout=null;
}
function imageLoader(s,a){
clearTimeout(j);
j=0;
var b=new Image();
b.onload=function(){j=setTimeout(a,0)};
b.src=s;
}
new imageLoader(d,startAnimation);
}

;

;
var importController=function(){
};
importController.importPlaylist=function(d){
$("#popupImportInput").popup("close");
$.mobile.loading("show");
$.ajax({
d:preferences.serverURL+"?importplaylist="+encodeURIComponent(d)+"&auth="+authController.ip_token,
success:function(a){
console.dir("imported playlist:");
console.dir(a);
var b=[];
console.dir("current playlist:");
console.dir(playlistController.getLoadedPlaylist());
if(a.track){
if(a.track.length){
for(var j=0;j<a.track.length;j++){
b[j]={
artist:unescape(a.track[j].artist),
name:unescape(a.track[j].name),
gid:playlistController.getNewID(),
id:"plsid"+helperFunctions.padZeros(j,(""+playlistController.loadedPlaylistSongs.length).length)
}
}
}
}
playlistController.addSongsToPlaylist(playlistController.getLoadedPlaylist(),b)
var c=playlistController.getLoadedPlaylist();
if(c.tracks.length){
for(var j=0;j<c.tracks.length;j++){
if(!c.tracks[j].image){
setTimeout(mediaController.loadPreview(c.tracks[j]),j*300);
}
}
}
console.dir("new playlist:");
console.dir(c);
},
error:function(a,b,c){
console.dir("imported playlist - error:");
console.dir(a.responseText);
},
complete:function(){
$.mobile.loading("hide");
}
})
}
;

;
var app={
initialize:function(){
this.bindEvents();
},
bindEvents:function(){
document.addEventListener('deviceready',this.onDeviceReady,false);
},
onDeviceReady:function(){
}
};
var preferences={
serverURL:"http://songbase.fm:3001/"
}
$.support.cors=true;
lyricscallback=function(a){
alert(text)
}
lyricsvisible=false;
var urlParams;
var loadUrlParams=function(){
var a,
pl=/\+/g,search=/([^&=]+)=?([^&]*)/g,
decode=function(s){
return decodeURIComponent(s.replace(pl," "));
},
query=window.location.search.substring(1);
urlParams={};
while(a=search.exec(query))
urlParams[decode(a[1])]=decode(a[2]);
}
window.onbeforeunload=function(a){
if(typeof a=='undefined'){
a=window.event;
}
if(a&&playlistController.playlists.length>2&&!accountController.loggedIn){
var b='Without your own free Songbase account your unsaved playlists will be lost!';
a.returnValue=b;
}
return b;
}
jqmAllowPopUpClosing=false;
var readyStateCheckInterval=setInterval(function(){
if(document.readyState==="complete"&&$scope&&$scope.loaded){
clearInterval(readyStateCheckInterval);
setTimeout(function(){
jqmAllowPopUpClosing=true;
},0)
}
},100);
IScrollinitTimer=0;
$(document).ready(function(){
feedback.initFeedback();
setTimeout(function(){
IScrollinitTimer=Date.now()},0)
var c=function(){
if($scope.loaded){

app.isCordova=(window.location.hash=="#cordova");
loadUrlParams();
facebookHandler.init();
mediaController.init();
authController.init();
uiController.init();
viewController.init();
playlistController.init();
accountController.init();
videoController.init();
setTimeout(function(){
if($(":focus").length==0)
$("#searchinput").focus();
},500);
console.dir(urlParams);
setTimeout(function(){
if(urlParams.downloadApp&&urlParams.downloadApp!=""){
$("#popupDownloadApp").popup('open');
}
},1000)
setTimeout(function(){
if(urlParams.playlistid&&urlParams.playlistid!=""){
playlistController.loadSharedPlaylist(urlParams.playlistid);
}
},1000)
setTimeout(function(){
if(urlParams.search&&urlParams.search!=""){
$("#searchinput").val(urlParams.search);
$("#searchinput").trigger("input");

}
if(urlParams.artist&&urlParams.artist!=""){
if(urlParams.title&&urlParams.title!=""){
var a={
artist:urlParams.artist,
name:urlParams.title,
id:"slsid"+helperFunctions.padZeros(1,2)
}
if(!playbackController.playingSong)
playbackController.playSong(a,false,false,true);
}
}
},1000);
$scope.safeApply();
$("#page").css("opacity","1");
var b=function(){
if($("#playlistInner ul").length>0)setTimeout(uiController.updateUI,0);
else
setTimeout(b,200);
}
setTimeout(b,500);
}else
setTimeout(c,50);
}
c();
});
showregisterpopup=false;
jQuery.fn.outerHTML=function(s){
return s
?this.before(s).remove()
:jQuery("<p>").append(this.eq(0).clone()).html();
};
jQuery.expr[':'].noparents=function(a,i,m){
return jQuery(a).parents(m[3]).length>0;
};
if(!Object.keys){
Object.keys=function(a){
var b=[],
k;
for(k in a){
if(Object.prototype.hasOwnProperty.call(a,k)){
b.push(k);
}
}
return b;
};
}
window.console.dirx=function(a){
console.dir(JSON.parse(JSON.stringify(a)));
}
var feedback=function(){};
feedback.initFeedback=function(){
setTimeout(function(){
$("#feedbackButton").show();
},2000)
$("#popupFeedback").popup({
beforeposition:function(a,b){
$('#popupFeedback textarea').val("")
},
afteropen:function(a,b){
$('#popupFeedback textarea').focus();
}
});
}
feedback.sendFeedback=function(){
if($.trim($('#popupFeedback textarea').val())!=""){
var a=escape($('#popupFeedback textarea').val()+"\n\n"+"Browser: "+navigator.userAgent);
$("#popupFeedback").popup("close");
a=rsaController.rsa.encryptUnlimited(a);
$.ajax({
type:"POST",
data:{feedback:a,auth:authController.ip_token},
url:preferences.serverURL
});
}
}

;

;(function(){
var $,AbstractChosen,Chosen,SelectParser,_ref,
__hasProp={}.hasOwnProperty,
__extends=function(a,b){
for(var c in b){
if(__hasProp.call(b,c))a[c]=b[c];
}
function ctor(){
this.constructor=a;
}
ctor.prototype=b.prototype;
a.prototype=new ctor();
a.__super__=b.prototype;
return a;
};
SelectParser=(function(){
function SelectParser(){
this.options_index=0;
this.parsed=[];
}
SelectParser.prototype.add_node=function(a){
if(a.nodeName.toUpperCase()==="OPTGROUP"){
return this.add_group(a);
}else{
return this.add_option(a);
}
};
SelectParser.prototype.add_group=function(a){
var b,option,_i,_len,_ref,_results;
b=this.parsed.length;
this.parsed.push({
array_index:b,
a:true,
label:this.escapeExpression(a.label),
children:0,
disabled:a.disabled
});
_ref=a.childNodes;
_results=[];
for(_i=0,_len=_ref.length;_i<_len;_i++){
option=_ref[_i];
_results.push(this.add_option(option,b,a.disabled));
}
return _results;
};
SelectParser.prototype.add_option=function(a,b,c){
if(a.nodeName.toUpperCase()==="OPTION"){
if(a.text!==""){
if(b!=null){
this.parsed[b].children+=1;
}
this.parsed.push({
array_index:this.parsed.length,
options_index:this.options_index,
value:a.value,
text:a.text,
html:a.innerHTML,
selected:a.selected,
disabled:c===true?c:a.disabled,
group_array_index:b,
classes:a.className,
style:a.style.cssText
});
}else{
this.parsed.push({
array_index:this.parsed.length,
options_index:this.options_index,
empty:true
});
}
return this.options_index+=1;
}
};
SelectParser.prototype.escapeExpression=function(b){
var c,unsafe_chars;
if((b==null)||b===false){
return"";
}
if(!/[\&\<\>\"\'\`]/.test(b)){
return b;
}
c={
"<":"&lt;",
">":"&gt;",
'"':"&quot;",
"'":"&#x27;",
"`":"&#x60;"
};
unsafe_chars=/&(?!\w+;)|[\<\>\"\'\`]/g;
return b.replace(unsafe_chars,function(a){
return c[a]||"&amp;";
});
};
return SelectParser;
})();
SelectParser.select_to_array=function(a){
var b,parser,_i,_len,_ref;
parser=new SelectParser();
_ref=a.childNodes;
for(_i=0,_len=_ref.length;_i<_len;_i++){
b=_ref[_i];
parser.add_node(b);
}
return parser.parsed;
};
AbstractChosen=(function(){
function AbstractChosen(a,b){
this.form_field=a;
this.options=b!=null?b:{};
if(!AbstractChosen.browser_is_supported()){
return;
}
this.is_multiple=this.form_field.multiple;
this.set_default_text();
this.set_default_values();
this.setup();
this.set_up_html();
this.register_observers();
}
AbstractChosen.prototype.set_default_values=function(){
var b=this;
this.click_test_action=function(a){
return b.test_active_click(a);
};
this.activate_action=function(a){
return b.activate_field(a);
};
this.active_field=false;
this.mouse_on_container=false;
this.results_showing=false;
this.result_highlighted=null;
this.result_single_selected=null;
this.allow_single_deselect=(this.options.allow_single_deselect!=null)&&(this.form_field.options[0]!=null)&&this.form_field.options[0].text===""?this.options.allow_single_deselect:false;
this.disable_search_threshold=this.options.disable_search_threshold||0;
this.disable_search=this.options.disable_search||false;
this.enable_split_word_search=this.options.enable_split_word_search!=null?this.options.enable_split_word_search:true;
this.group_search=this.options.group_search!=null?this.options.group_search:true;
this.search_contains=this.options.search_contains||false;
this.single_backstroke_delete=this.options.single_backstroke_delete!=null?this.options.single_backstroke_delete:true;
this.max_selected_options=this.options.max_selected_options||Infinity;
this.inherit_select_classes=this.options.inherit_select_classes||false;
this.display_selected_options=this.options.display_selected_options!=null?this.options.display_selected_options:true;
return this.display_disabled_options=this.options.display_disabled_options!=null?this.options.display_disabled_options:true;
};
AbstractChosen.prototype.set_default_text=function(){
if(this.form_field.getAttribute("data-placeholder")){
this.default_text=this.form_field.getAttribute("data-placeholder");
}else if(this.is_multiple){
this.default_text=this.options.placeholder_text_multiple||this.options.placeholder_text||AbstractChosen.default_multiple_text;
}else{
this.default_text=this.options.placeholder_text_single||this.options.placeholder_text||AbstractChosen.default_single_text;
}
return this.results_none_found=this.form_field.getAttribute("data-no_results_text")||this.options.no_results_text||AbstractChosen.default_no_result_text;
};
AbstractChosen.prototype.mouse_enter=function(){
return this.mouse_on_container=true;
};
AbstractChosen.prototype.mouse_leave=function(){
return this.mouse_on_container=false;
};
AbstractChosen.prototype.input_focus=function(a){
var b=this;
if(this.is_multiple){
if(!this.active_field){
return setTimeout((function(){
return b.container_mousedown();
}),50);
}
}else{
if(!this.active_field){
return this.activate_field();
}
}
};
AbstractChosen.prototype.input_blur=function(a){
var b=this;
if(!this.mouse_on_container){
this.active_field=false;
return setTimeout((function(){
return b.blur_test();
}),100);
}
};
AbstractChosen.prototype.results_option_build=function(a){
var b,data,_i,_len,_ref;
b='';
_ref=this.results_data;
for(_i=0,_len=_ref.length;_i<_len;_i++){
data=_ref[_i];
if(data.group){
b+=this.result_add_group(data);
}else{
b+=this.result_add_option(data);
}
if(a!=null?a.first:void 0){
if(data.selected&&this.is_multiple){
this.choice_build(data);
}else if(data.selected&&!this.is_multiple){
this.single_set_selected_text(data.text);
}
}
}
return b;
};
AbstractChosen.prototype.result_add_option=function(a){
var b,style;
if(!a.search_match){
return'';
}
if(!this.include_option_in_results(a)){
return'';
}
b=[];
if(!a.disabled&&!(a.selected&&this.is_multiple)){
b.push("active-result");
}
if(a.disabled&&!(a.selected&&this.is_multiple)){
b.push("disabled-result");
}
if(a.selected){
b.push("result-selected");
}
if(a.group_array_index!=null){
b.push("group-option");
}
if(a.classes!==""){
b.push(a.classes);
}
style=a.style.cssText!==""?" style=\""+a.style+"\"":"";
return"<li class=\""+(b.join(' '))+"\""+style+" data-option-array-index=\""+a.array_index+"\">"+a.search_text+"</li>";
};
AbstractChosen.prototype.result_add_group=function(a){
if(!(a.search_match||a.group_match)){
return'';
}
if(!(a.active_options>0)){
return'';
}
return"<li class=\"group-result\">"+a.search_text+"</li>";
};
AbstractChosen.prototype.results_update_field=function(){
this.set_default_text();
if(!this.is_multiple){
this.results_reset_cleanup();
}
this.result_clear_highlight();
this.result_single_selected=null;
this.results_build();
if(this.results_showing){
return this.winnow_results();
}
};
AbstractChosen.prototype.results_toggle=function(){
if(this.results_showing){
return this.results_hide();
}else{
return this.results_show();
}
};
AbstractChosen.prototype.results_search=function(a){
if(this.results_showing){
return this.winnow_results();
}else{
return this.results_show();
}
};
AbstractChosen.prototype.winnow_results=function(){
var a,option,regex,regexAnchor,results,results_group,searchText,startpos,text,zregex,_i,_len,_ref;
this.no_results_clear();
results=0;
searchText=this.get_search_text();
a=searchText.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&");
regexAnchor=this.search_contains?"":"^";
regex=new RegExp(regexAnchor+a,'i');
zregex=new RegExp(a,'i');
_ref=this.results_data;
for(_i=0,_len=_ref.length;_i<_len;_i++){
option=_ref[_i];
option.search_match=false;
results_group=null;
if(this.include_option_in_results(option)){
if(option.group){
option.group_match=false;
option.active_options=0;
}
if((option.group_array_index!=null)&&this.results_data[option.group_array_index]){
results_group=this.results_data[option.group_array_index];
if(results_group.active_options===0&&results_group.search_match){
results+=1;
}
results_group.active_options+=1;
}
if(!(option.group&&!this.group_search)){
option.search_text=option.group?option.label:option.html;
option.search_match=this.search_string_match(option.search_text,regex);
if(option.search_match&&!option.group){
results+=1;
}
if(option.search_match){
if(searchText.length){
startpos=option.search_text.search(zregex);
text=option.search_text.substr(0,startpos+searchText.length)+'</em>'+option.search_text.substr(startpos+searchText.length);
option.search_text=text.substr(0,startpos)+'<em>'+text.substr(startpos);
}
if(results_group!=null){
results_group.group_match=true;
}
}else if((option.group_array_index!=null)&&this.results_data[option.group_array_index].search_match){
option.search_match=true;
}
}
}
}
this.result_clear_highlight();
if(results<1&&searchText.length){
this.update_results_content("");
return this.no_results(searchText);
}else{
this.update_results_content(this.results_option_build());
return this.winnow_results_set_highlight();
}
};
AbstractChosen.prototype.search_string_match=function(a,b){
var c,parts,_i,_len;
if(b.test(a)){
return true;
}else if(this.enable_split_word_search&&(a.indexOf(" ")>=0||a.indexOf("[")===0)){
parts=a.replace(/\[|\]/g,"").split(" ");
if(parts.length){
for(_i=0,_len=parts.length;_i<_len;_i++){
c=parts[_i];
if(b.test(c)){
return true;
}
}
}
}
};
AbstractChosen.prototype.choices_count=function(){
var a,_i,_len,_ref;
if(this.selected_option_count!=null){
return this.selected_option_count;
}
this.selected_option_count=0;
_ref=this.form_field.options;
for(_i=0,_len=_ref.length;_i<_len;_i++){
a=_ref[_i];
if(a.selected){
this.selected_option_count+=1;
}
}
return this.selected_option_count;
};
AbstractChosen.prototype.choices_click=function(a){
a.preventDefault();
if(!(this.results_showing||this.is_disabled)){
return this.results_show();
}
};
AbstractChosen.prototype.keyup_checker=function(a){
var b,_ref;
b=(_ref=a.which)!=null?_ref:a.keyCode;
this.search_field_scale();
switch(b){
case 8:
if(this.is_multiple&&this.backstroke_length<1&&this.choices_count()>0){
return this.keydown_backstroke();
}else if(!this.pending_backstroke){
this.result_clear_highlight();
return this.results_search();
}
break;
case 13:
a.preventDefault();
if(this.results_showing){
return this.result_select(a);
}
break;
case 27:
if(this.results_showing){
this.results_hide();
}
return true;
case 9:
case 38:
case 40:
case 16:
case 91:
case 17:
break;
default:
return this.results_search();
}
};
AbstractChosen.prototype.container_width=function(){
if(this.options.width!=null){
return this.options.width;
}else{
return""+this.form_field.offsetWidth+"px";
}
};
AbstractChosen.prototype.include_option_in_results=function(a){
if(this.is_multiple&&(!this.display_selected_options&&a.selected)){
return false;
}
if(!this.display_disabled_options&&a.disabled){
return false;
}
if(a.empty){
return false;
}
return true;
};
AbstractChosen.browser_is_supported=function(){
if(window.navigator.appName==="Microsoft Internet Explorer"){
return document.documentMode>=8;
}
if(/iP(od|hone)/i.test(window.navigator.userAgent)){
return false;
}
if(/Android/i.test(window.navigator.userAgent)){
if(/Mobile/i.test(window.navigator.userAgent)){
return false;
}
}
return true;
};
AbstractChosen.default_multiple_text="";AbstractChosen.default_single_text="Select an Option";
AbstractChosen.default_no_result_text="No playlists match";return AbstractChosen;
})();
$=jQuery;
$.fn.extend({
chosen:function(c){
if(!AbstractChosen.browser_is_supported()){
return this;
}
return this.each(function(a){
var b,chosen;
b=$(this);
chosen=b.data('chosen');
if(c==='destroy'&&chosen){
chosen.destroy();
}else if(!chosen){
b.data('chosen',new Chosen(this,c));
}
});
}
});
Chosen=(function(e){
__extends(Chosen,e);
function Chosen(){
_ref=Chosen.__super__.constructor.apply(this,arguments);
return _ref;
}
Chosen.prototype.setup=function(){
this.form_field_jq=$(this.form_field);
this.current_selectedIndex=this.form_field.selectedIndex;
return this.is_rtl=this.form_field_jq.hasClass("chosen-rtl");
};
Chosen.prototype.set_up_html=function(){
var a,container_props;
a=["chosen-container"];
a.push("chosen-container-"+(this.is_multiple?"multi":"single"));
if(this.inherit_select_classes&&this.form_field.className){
a.push(this.form_field.className);
}
if(this.is_rtl){
a.push("chosen-rtl");
}
container_props={
'class':a.join(' '),
'style':"width: "+(this.container_width())+";",
'title':this.form_field.title
};
if(this.form_field.id.length){
container_props.id=this.form_field.id.replace(/[^\w]/g,'_')+"_chosen";
}
this.container=$("<div />",container_props);
if(this.is_multiple){
this.container.html('<ul class="chosen-choices"><li class="search-field"><input type="text" value="'+this.default_text+'" class="default" autocomplete="off" style="" /></li></ul><div class="chosen-drop"><ul class="chosen-results"></ul></div>');
}else{
this.container.html('<a class="chosen-single chosen-default" tabindex="-1"><span>'+this.default_text+'</span><div><b></b></div></a><div class="chosen-drop"><div class="chosen-search"><input type="text" autocomplete="off" /></div><ul class="chosen-results"></ul></div>');
}
this.form_field_jq.hide().after(this.container);
this.dropdown=this.container.find('div.chosen-drop').first();
this.search_field=this.container.find('input').first();
this.search_results=this.container.find('ul.chosen-results').first();
this.search_field_scale();
this.search_no_results=this.container.find('li.no-results').first();
if(this.is_multiple){
this.search_choices=this.container.find('ul.chosen-choices').first();
this.search_container=this.container.find('li.search-field').first();
}else{
this.search_container=this.container.find('div.chosen-search').first();
this.selected_item=this.container.find('.chosen-single').first();
}
this.results_build();
this.set_tab_index();
this.set_label_behavior();
return this.form_field_jq.trigger("chosen:ready",{
chosen:this
});
};
Chosen.prototype.register_observers=function(){
var b=this;
this.container.bind('mousedown.chosen',function(a){
b.container_mousedown(a);
});
this.container.bind('mouseup.chosen',function(a){
b.container_mouseup(a);
});
this.container.bind('mouseenter.chosen',function(a){
b.mouse_enter(a);
});
this.container.bind('mouseleave.chosen',function(a){
b.mouse_leave(a);
});
this.search_results.bind('mouseup.chosen',function(a){
b.search_results_mouseup(a);
});
this.search_results.bind('mouseover.chosen',function(a){
b.search_results_mouseover(a);
});
this.search_results.bind('mouseout.chosen',function(a){
b.search_results_mouseout(a);
});
this.search_results.bind('mousewheel.chosen DOMMouseScroll.chosen',function(a){
b.search_results_mousewheel(a);
});
this.form_field_jq.bind("chosen:updated.chosen",function(a){
b.results_update_field(a);
});
this.form_field_jq.bind("chosen:activate.chosen",function(a){
b.activate_field(a);
});
this.form_field_jq.bind("chosen:open.chosen",function(a){
b.container_mousedown(a);
});
this.form_field_jq.bind("chosen:close.chosen",function(a){
b.close_field(a);
});
this.search_field.bind('blur.chosen',function(a){
b.input_blur(a);
});
this.search_field.bind('keyup.chosen',function(a){
b.keyup_checker(a);
});
this.search_field.bind('keydown.chosen',function(a){
b.keydown_checker(a);
});
this.search_field.bind('focus.chosen',function(a){
b.input_focus(a);
});
if(this.is_multiple){
return this.search_choices.bind('click.chosen',function(a){
b.choices_click(a);
});
}else{
return this.container.bind('click.chosen',function(a){
a.preventDefault();
});
}
};
Chosen.prototype.destroy=function(){
$(document).unbind("click.chosen",this.click_test_action);
if(this.search_field[0].tabIndex){
this.form_field_jq[0].tabIndex=this.search_field[0].tabIndex;
}
this.container.remove();
this.form_field_jq.removeData('chosen');
return this.form_field_jq.show();
};
Chosen.prototype.search_field_disabled=function(){
this.is_disabled=this.form_field_jq[0].disabled;
if(this.is_disabled){
this.container.addClass('chosen-disabled');
this.search_field[0].disabled=true;
if(!this.is_multiple){
this.selected_item.unbind("focus.chosen",this.activate_action);
}
return this.close_field();
}else{
this.container.removeClass('chosen-disabled');
this.search_field[0].disabled=false;
if(!this.is_multiple){
return this.selected_item.bind("focus.chosen",this.activate_action);
}
}
};
Chosen.prototype.container_mousedown=function(a){
if(!this.is_disabled){
if(a&&a.type==="mousedown"&&!this.results_showing){
a.preventDefault();
}
if(!((a!=null)&&($(a.target)).hasClass("search-choice-close"))){
if(!this.active_field){
if(this.is_multiple){
this.search_field.val("");
}
$(document).bind('click.chosen',this.click_test_action);
this.results_show();
}else if(!this.is_multiple&&a&&(($(a.target)[0]===this.selected_item[0])||$(a.target).parents("a.chosen-single").length)){
a.preventDefault();
this.results_toggle();
}
return this.activate_field();
}
}
};
Chosen.prototype.container_mouseup=function(a){
if(a.target.nodeName==="ABBR"&&!this.is_disabled){
return this.results_reset(a);
}
};
Chosen.prototype.search_results_mousewheel=function(a){
var b,_ref1,_ref2;
b=-((_ref1=a.originalEvent)!=null?_ref1.wheelDelta:void 0)||((_ref2=a.originialEvent)!=null?_ref2.detail:void 0);
if(b!=null){
a.preventDefault();
if(a.type==='DOMMouseScroll'){
b=b*40;
}
return this.search_results.scrollTop(b+this.search_results.scrollTop());
}
};
Chosen.prototype.blur_test=function(a){
if(!this.active_field&&this.container.hasClass("chosen-container-active")){
return this.close_field();
}
};
Chosen.prototype.close_field=function(){
$(document).unbind("click.chosen",this.click_test_action);
this.active_field=false;
this.results_hide();
this.container.removeClass("chosen-container-active");
this.clear_backstroke();
this.show_search_field_default();
return this.search_field_scale();
};
Chosen.prototype.activate_field=function(){
this.container.addClass("chosen-container-active");
this.active_field=true;
this.search_field.val(this.search_field.val());
return this.search_field.focus();
};
Chosen.prototype.test_active_click=function(a){
if(this.container.is($(a.target).closest('.chosen-container'))){
return this.active_field=true;
}else{
return this.close_field();
}
};
Chosen.prototype.results_build=function(){
if(!this.form_field.options)
this.form_field.options=[];
this.parsing=true;
this.selected_option_count=null;
this.results_data=SelectParser.select_to_array(this.form_field);
if(this.is_multiple){
this.search_choices.find("li.search-choice").remove();
}else if(!this.is_multiple){
this.single_set_selected_text();
if(this.disable_search||this.form_field.options.length<=this.disable_search_threshold){
this.search_field[0].readOnly=true;
this.container.addClass("chosen-container-single-nosearch");
}else{
this.search_field[0].readOnly=false;
this.container.removeClass("chosen-container-single-nosearch");
}
}
this.update_results_content(this.results_option_build({
first:true
}));
this.search_field_disabled();
this.show_search_field_default();
this.search_field_scale();
return this.parsing=false;
};
Chosen.prototype.result_do_highlight=function(a){
var b,high_top,maxHeight,visible_bottom,visible_top;
if(a.length){
this.result_clear_highlight();
this.result_highlight=a;
this.result_highlight.addClass("highlighted");
maxHeight=parseInt(this.search_results.css("maxHeight"),10);
visible_top=this.search_results.scrollTop();
visible_bottom=maxHeight+visible_top;
high_top=this.result_highlight.position().top+this.search_results.scrollTop();
b=high_top+this.result_highlight.outerHeight();
if(b>=visible_bottom){
return this.search_results.scrollTop((b-maxHeight)>0?b-maxHeight:0);
}else if(high_top<visible_top){
return this.search_results.scrollTop(high_top);
}
}
};
Chosen.prototype.result_clear_highlight=function(){
if(this.result_highlight){
this.result_highlight.removeClass("highlighted");
}
return this.result_highlight=null;
};
Chosen.prototype.results_show=function(){
if(this.is_multiple&&this.max_selected_options<=this.choices_count()){
this.form_field_jq.trigger("chosen:maxselected",{
chosen:this
});
return false;
}
this.container.addClass("chosen-with-drop");
this.form_field_jq.trigger("chosen:showing_dropdown",{
chosen:this
});
this.results_showing=true;
this.search_field.focus();
this.search_field.val(this.search_field.val());
return this.winnow_results();
};
Chosen.prototype.update_results_content=function(a){
return this.search_results.html(a);
};
Chosen.prototype.results_hide=function(){
if(this.results_showing){
this.result_clear_highlight();
this.container.removeClass("chosen-with-drop");
this.form_field_jq.trigger("chosen:hiding_dropdown",{
chosen:this
});
}
return this.results_showing=false;
};
Chosen.prototype.set_tab_index=function(a){
var b;
if(this.form_field.tabIndex){
b=this.form_field.tabIndex;
this.form_field.tabIndex=-1;
return this.search_field[0].tabIndex=b;
}
};
Chosen.prototype.set_label_behavior=function(){
var b=this;
this.form_field_label=this.form_field_jq.parents("label");
if(!this.form_field_label.length&&this.form_field.id.length){
this.form_field_label=$("label[for='"+this.form_field.id+"']");
}
if(this.form_field_label.length>0){
return this.form_field_label.bind('click.chosen',function(a){
if(b.is_multiple){
return b.container_mousedown(a);
}else{
return b.activate_field();
}
});
}
};
Chosen.prototype.show_search_field_default=function(){
if(this.is_multiple&&this.choices_count()<1&&!this.active_field){
this.search_field.val(this.default_text);
return this.search_field.addClass("default");
}else{
this.search_field.val("");
return this.search_field.removeClass("default");
}
};
Chosen.prototype.search_results_mouseup=function(a){
var b;
b=$(a.target).hasClass("active-result")?$(a.target):$(a.target).parents(".active-result").first();
if(b.length){
this.result_highlight=b;
this.result_select(a);
return this.search_field.focus();
}
};
Chosen.prototype.search_results_mouseover=function(a){
var b;
b=$(a.target).hasClass("active-result")?$(a.target):$(a.target).parents(".active-result").first();
if(b){
return this.result_do_highlight(b);
}
};
Chosen.prototype.search_results_mouseout=function(a){
if($(a.target).hasClass("active-result"||$(a.target).parents('.active-result').first())){
return this.result_clear_highlight();
}
};
Chosen.prototype.choice_build=function(b){
var c,close_link,
_this=this;
var d="<span>"+b.html+"</span>"

c=$('<li />',{
"class":"search-choice "+b.classes}).html(d);if(b.disabled){
c.addClass('search-choice-disabled');
}else{
close_link=$('<a />',{
"class":'search-choice-close',
'data-option-array-index':b.array_index
});
close_link.bind('click.chosen',function(a){
return _this.choice_destroy_link_click(a);
});
c.append(close_link);
$scope.safeApply()}
return this.search_container.before(c);
};
Chosen.prototype.choice_destroy_link_click=function(a){
a.preventDefault();
a.stopPropagation();
if(!this.is_disabled){
return this.choice_destroy($(a.target));
}
};
Chosen.prototype.choice_destroy=function(a){
if(this.result_deselect(a[0].getAttribute("data-option-array-index"))){
this.show_search_field_default();
if(this.is_multiple&&this.choices_count()>0&&this.search_field.val().length<1){
this.results_hide();
}
a.parents('li').first().remove();
return this.search_field_scale();
}
};
Chosen.prototype.results_reset=function(){
this.form_field.options[0].selected=true;
this.selected_option_count=null;
this.single_set_selected_text();
this.show_search_field_default();
this.results_reset_cleanup();
this.form_field_jq.trigger("change");
if(this.active_field){
return this.results_hide();
}
};
Chosen.prototype.results_reset_cleanup=function(){
this.current_selectedIndex=this.form_field.selectedIndex;
return this.selected_item.find("abbr").remove();
};
Chosen.prototype.result_select=function(a){
var b,item,selected_index;
if(this.result_highlight){
b=this.result_highlight;
this.result_clear_highlight();
if(this.is_multiple&&this.max_selected_options<=this.choices_count()){
this.form_field_jq.trigger("chosen:maxselected",{
chosen:this
});
return false;
}
if(this.is_multiple){
b.removeClass("active-result");
}else{
if(this.result_single_selected){
this.result_single_selected.removeClass("result-selected");
selected_index=this.result_single_selected[0].getAttribute('data-option-array-index');
this.results_data[selected_index].selected=false;
}
this.result_single_selected=b;
}
b.addClass("result-selected");
item=this.results_data[b[0].getAttribute("data-option-array-index")];
item.selected=true;
this.form_field.options[item.options_index].selected=true;
this.selected_option_count=null;
if(this.is_multiple){
this.choice_build(item);
}else{
this.single_set_selected_text(item.text);
}
if(!((a.metaKey||a.ctrlKey)&&this.is_multiple)){
this.results_hide();
}
this.search_field.val("");
if(this.is_multiple||this.form_field.selectedIndex!==this.current_selectedIndex){
this.form_field_jq.trigger("change",{
'selected':this.form_field.options[item.options_index].value
});
}
this.current_selectedIndex=this.form_field.selectedIndex;
return this.search_field_scale();
}
};
Chosen.prototype.single_set_selected_text=function(a){
if(a==null){
a=this.default_text;
}
if(a===this.default_text){
this.selected_item.addClass("chosen-default");
}else{
this.single_deselect_control_build();
this.selected_item.removeClass("chosen-default");
}
return this.selected_item.find("span").text(a);
};
Chosen.prototype.result_deselect=function(a){
var b;
b=this.results_data[a];
if(!this.form_field.options[b.options_index].disabled){
b.selected=false;
this.form_field.options[b.options_index].selected=false;
this.selected_option_count=null;
this.result_clear_highlight();
if(this.results_showing){
this.winnow_results();
}
this.form_field_jq.trigger("change",{
deselected:this.form_field.options[b.options_index].value
});
this.search_field_scale();
return true;
}else{
return false;
}
};
Chosen.prototype.single_deselect_control_build=function(){
if(!this.allow_single_deselect){
return;
}
if(!this.selected_item.find("abbr").length){
this.selected_item.find("span").first().after("<abbr class=\"search-choice-close\"></abbr>");
}
return this.selected_item.addClass("chosen-single-with-deselect");
};
Chosen.prototype.get_search_text=function(){
if(this.search_field.val()===this.default_text){
return"";
}else{
return $('<div/>').text($.trim(this.search_field.val())).html();
}
};
Chosen.prototype.winnow_results_set_highlight=function(){
var a,selected_results;
selected_results=!this.is_multiple?this.search_results.find(".result-selected.active-result"):[];
a=selected_results.length?selected_results.first():this.search_results.find(".active-result").first();
if(a!=null){
return this.result_do_highlight(a);
}
};
Chosen.prototype.no_results=function(a){
var b;
b=$('<li class="no-results">'+this.results_none_found+' "<span></span>"</li>');
b.find("span").first().html(a);
return this.search_results.append(b);
};
Chosen.prototype.no_results_clear=function(){
return this.search_results.find(".no-results").remove();
};
Chosen.prototype.keydown_arrow=function(){
var a;
if(this.results_showing&&this.result_highlight){
a=this.result_highlight.nextAll("li.active-result").first();
if(a){
return this.result_do_highlight(a);
}
}else{
return this.results_show();
}
};
Chosen.prototype.keyup_arrow=function(){
var a;
if(!this.results_showing&&!this.is_multiple){
return this.results_show();
}else if(this.result_highlight){
a=this.result_highlight.prevAll("li.active-result");
if(a.length){
return this.result_do_highlight(a.first());
}else{
if(this.choices_count()>0){
this.results_hide();
}
return this.result_clear_highlight();
}
}
};
Chosen.prototype.keydown_backstroke=function(){
var a;
if(this.pending_backstroke){
this.choice_destroy(this.pending_backstroke.find("a").first());
return this.clear_backstroke();
}else{
a=this.search_container.siblings("li.search-choice").last();
if(a.length&&!a.hasClass("search-choice-disabled")){
this.pending_backstroke=a;
if(this.single_backstroke_delete){
return this.keydown_backstroke();
}else{
return this.pending_backstroke.addClass("search-choice-focus");
}
}
}
};
Chosen.prototype.clear_backstroke=function(){
if(this.pending_backstroke){
this.pending_backstroke.removeClass("search-choice-focus");
}
return this.pending_backstroke=null;
};
Chosen.prototype.keydown_checker=function(a){
var b,_ref1;
b=(_ref1=a.which)!=null?_ref1:a.keyCode;
this.search_field_scale();
if(b!==8&&this.pending_backstroke){
this.clear_backstroke();
}
switch(b){
case 8:
this.backstroke_length=this.search_field.val().length;
break;
case 9:
if(this.results_showing&&!this.is_multiple){
this.result_select(a);
}
this.mouse_on_container=false;
break;
case 13:
a.preventDefault();
break;
case 38:
a.preventDefault();
this.keyup_arrow();
break;
case 40:
a.preventDefault();
this.keydown_arrow();
break;
}
};
Chosen.prototype.search_field_scale=function(){
var a,f_width,h,style,style_block,styles,w,_i,_len;
if(this.is_multiple){
h=0;
w=0;
style_block="position:absolute; left: -1000px; top: -1000px; display:none;";
styles=['font-size','font-style','font-weight','font-family','line-height','text-transform','letter-spacing'];
for(_i=0,_len=styles.length;_i<_len;_i++){
style=styles[_i];
style_block+=style+":"+this.search_field.css(style)+";";
}
a=$('<div />',{
'style':style_block
});
if(this.search_field.val()=="")var b=$("#playlistselectvertical .search-field input").attr("placeholder");
else
b=this.search_field.val();
setTimeout(function(){
$(".search-field input").css("opacity","");
},0)
a.text(b);
$('body').append(a);
w=a.width()+25;
a.remove();
f_width=this.container.outerWidth();
if(w>f_width-10){
w=f_width-10;
}
return this.search_field.css({
'width':w+'px'
});
}
};
return Chosen;
})(AbstractChosen);
}).call(this);
;

;"use strict";
var clickarea=document.getElementById('clickarea');
var clickresultfast=document.getElementById('clickresultfast');
var clickresultslow=document.getElementById('clickresultslow');
clickarea.addEventListener('fastclick',function(e){
if(e.detail==clickarea){
var a=new Date().getMilliseconds();
clickresultfast.innerText='Fast Click: '+(a-touchStartTime)+'ms';
}
},false);
clickarea.addEventListener('click',function(e){
if(e.target==clickarea){
var a=new Date().getMilliseconds();
clickresultslow.innerText='Normal Click: '+(a-touchStartTime)+'ms';
}
},false);
var touchStartTime=false;
document.addEventListener('touchstart',function(){
touchStartTime=new Date().getMilliseconds();
},false);
(function(){
var b=false;
document.addEventListener("touchstart",function(){
b=true
},false);
document.addEventListener("touchmove",function(){
b=false
},false);
document.addEventListener("touchend",function(e){
if(b){
b=false;
var a=document.createEvent("CustomEvent");
a.initCustomEvent("fastclick",true,true,e.target);
e.target.dispatchEvent(a);
}
},false);
}());
;

;
(function(h,j){
'use strict';

var k=function(a,b){
return new k.Instance(a,b||{});
};
k.defaults={
stop_browser_behavior:{
userSelect:'none',
touchAction:'none',
touchCallout:'none',
contentZooming:'none',
userDrag:'none',
tapHighlightColor:'rgba(0,0,0,0)'
}
};
k.HAS_POINTEREVENTS=h.navigator.pointerEnabled||h.navigator.msPointerEnabled;
k.HAS_TOUCHEVENTS=('ontouchstart'in h);
k.MOBILE_REGEX=/mobile|tablet|ip(ad|hone|od)|android|silk/i;
k.NO_MOUSEEVENTS=k.HAS_TOUCHEVENTS&&h.navigator.userAgent.match(k.MOBILE_REGEX);
k.EVENT_TYPES={};
k.DIRECTION_DOWN='down';
k.DIRECTION_LEFT='left';
k.DIRECTION_UP='up';
k.DIRECTION_RIGHT='right';
k.POINTER_MOUSE='mouse';
k.POINTER_TOUCH='touch';
k.POINTER_PEN='pen';
k.EVENT_START='start';
k.EVENT_MOVE='move';
k.EVENT_END='end';
k.DOCUMENT=h.document;
k.plugins=k.plugins||{};
k.gestures=k.gestures||{};
k.READY=false;

function setup(){
if(k.READY){
return;
}
k.event.determineEventTypes();
k.utils.each(k.gestures,function(a){
k.detection.register(a);
});
k.event.onTouch(k.DOCUMENT,k.EVENT_MOVE,k.detection.detect);
k.event.onTouch(k.DOCUMENT,k.EVENT_END,k.detection.detect);
k.READY=true;
}
k.utils={

extend:function extend(a,b,c){
for(var d in b){
if(a[d]!==j&&c){
continue;
}
a[d]=b[d];
}
return a;
},

each:function(a,b,c){
var i,length;
if('forEach'in a){
a.forEach(b,c);
}
else if(a.length!==j){
for(i=0,length=a.length;i<length;i++){
if(b.call(c,a[i],i,a)===false){
return;
}
}
}
else{
for(i in a){
if(a.hasOwnProperty(i)&&b.call(c,a[i],i,a)===false){
return;
}
}
}
},

hasParent:function(a,b){
while(a){
if(a==b){
return true;
}
a=a.parentNode;
}
return false;
},

getCenter:function getCenter(b){
var c=[],valuesY=[];
k.utils.each(b,function(a){
c.push(typeof a.clientX!=='undefined'?a.clientX:a.pageX);
valuesY.push(typeof a.clientY!=='undefined'?a.clientY:a.pageY);
});
return{
pageX:((Math.min.apply(Math,c)+Math.max.apply(Math,c))/2),
pageY:((Math.min.apply(Math,valuesY)+Math.max.apply(Math,valuesY))/2)
};
},

getVelocity:function getVelocity(a,b,c){
return{
x:Math.abs(b/a)||0,
y:Math.abs(c/a)||0
};
},

getAngle:function getAngle(a,b){
var y=b.pageY-a.pageY,
x=b.pageX-a.pageX;
return Math.atan2(y,x)*180/Math.PI;
},

getDirection:function getDirection(a,b){
var x=Math.abs(a.pageX-b.pageX),
y=Math.abs(a.pageY-b.pageY);
if(x>=y){
return a.pageX-b.pageX>0?k.DIRECTION_LEFT:k.DIRECTION_RIGHT;
}
else{
return a.pageY-b.pageY>0?k.DIRECTION_UP:k.DIRECTION_DOWN;
}
},

getDistance:function getDistance(a,b){
var x=b.pageX-a.pageX,
y=b.pageY-a.pageY;
return Math.sqrt((x*x)+(y*y));
},

getScale:function getScale(a,b){
if(a.length>=2&&b.length>=2){
return this.getDistance(b[0],b[1])/
this.getDistance(a[0],a[1]);
}
return 1;
},

getRotation:function getRotation(a,b){
if(a.length>=2&&b.length>=2){
return this.getAngle(b[1],b[0])-
this.getAngle(a[1],a[0]);
}
return 0;
},

isVertical:function isVertical(a){
return(a==k.DIRECTION_UP||a==k.DIRECTION_DOWN);
},

stopDefaultBrowserBehavior:function stopDefaultBrowserBehavior(c,d){
if(!d||!c||!c.style){
return;
}
k.utils.each(['webkit','khtml','moz','Moz','ms','o',''],function(b){
k.utils.each(d,function(a){
if(b){
a=b+a.substring(0,1).toUpperCase()+a.substring(1);
}
if(a in c.style){
c.style[a]=a;
}
});
});
if(d.userSelect=='none'){
c.onselectstart=function(){
return false;
};
}
if(d.userDrag=='none'){
c.ondragstart=function(){
return false;
};
}
}
};

k.Instance=function(b,c){
var d=this;
setup();
this.element=b;
this.enabled=true;
this.options=k.utils.extend(
k.utils.extend({},k.defaults),
c||{});
if(this.options.stop_browser_behavior){
k.utils.stopDefaultBrowserBehavior(this.element,this.options.stop_browser_behavior);
}
k.event.onTouch(b,k.EVENT_START,function(a){
if(d.enabled){
k.detection.startDetect(d,a);
}
});
return this;
};
k.Instance.prototype={

on:function onEvent(b,c){
var d=b.split(' ');
k.utils.each(d,function(a){
this.element.addEventListener(a,c,false);
},this);
return this;
},

off:function offEvent(b,c){
var d=b.split(' ');
k.utils.each(d,function(a){
this.element.removeEventListener(a,c,false);
},this);
return this;
},

trigger:function triggerEvent(a,b){
if(!b){
b={};
}
var c=k.DOCUMENT.createEvent('Event');
c.initEvent(a,true,true);
c.gesture=b;
var d=this.element;
if(k.utils.hasParent(b.target,d)){
d=b.target;
}
d.dispatchEvent(c);
return this;
},

enable:function enable(a){
this.enabled=a;
return this;
}
};

var l=null;

var m=false;

var n=false;
k.event={

bindDom:function(b,c,d){
var e=c.split(' ');
k.utils.each(e,function(a){
b.addEventListener(a,d,false);
});
},

onTouch:function onTouch(d,e,f){
var g=this;
this.bindDom(d,k.EVENT_TYPES[e],function bindDomOnTouch(a){
var b=a.type.toLowerCase();
if(b.match(/mouse/)&&n){
return;
}
else if(b.match(/touch/)||b.match(/pointerdown/)||(b.match(/mouse/)&&a.which===1)){
m=true;
}
else if(b.match(/mouse/)&&!a.which){
m=false;
}
if(b.match(/touch|pointer/)){
n=true;
}
var c=0;
if(m){
if(k.HAS_POINTEREVENTS&&e!=k.EVENT_END){
c=k.PointerEvent.updatePointer(e,a);
}
else if(b.match(/touch/)){
c=a.touches.length;
}
else if(!n){
c=b.match(/up/)?0:1;
}
if(c>0&&e==k.EVENT_END){
e=k.EVENT_MOVE;
}
else if(!c){
e=k.EVENT_END;
}
if(c||l===null){
l=a;
}
f.call(k.detection,g.collectEventData(d,e,g.getTouchList(l,e),a));
if(k.HAS_POINTEREVENTS&&e==k.EVENT_END){
c=k.PointerEvent.updatePointer(e,a);
}
}
if(!c){
l=null;
m=false;
n=false;
k.PointerEvent.reset();
}
});
},

determineEventTypes:function determineEventTypes(){
var a;
if(k.HAS_POINTEREVENTS){
a=k.PointerEvent.getEvents();
}
else if(k.NO_MOUSEEVENTS){
a=[
'touchstart',
'touchmove',
'touchend touchcancel'];
}
else{
a=[
'touchstart mousedown',
'touchmove mousemove',
'touchend touchcancel mouseup'];
}
k.EVENT_TYPES[k.EVENT_START]=a[0];
k.EVENT_TYPES[k.EVENT_MOVE]=a[1];
k.EVENT_TYPES[k.EVENT_END]=a[2];
},

getTouchList:function getTouchList(a){
if(k.HAS_POINTEREVENTS){
return k.PointerEvent.getTouchList();
}
else if(a.touches){
return a.touches;
}
else{
a.identifier=1;
return[a];
}
},

collectEventData:function collectEventData(a,b,c,d){
var e=k.POINTER_TOUCH;
if(d.type.match(/mouse/)||k.PointerEvent.matchType(k.POINTER_MOUSE,d)){
e=k.POINTER_MOUSE;
}
return{
center:k.utils.getCenter(c),
timeStamp:new Date().getTime(),
target:d.target,
c:c,
b:b,
e:e,
srcEvent:d,

preventDefault:function(){
if(this.srcEvent.preventManipulation){
this.srcEvent.preventManipulation();
}
if(this.srcEvent.preventDefault){
this.srcEvent.preventDefault();
}
},

stopPropagation:function(){
this.srcEvent.stopPropagation();
},

stopDetect:function(){
return k.detection.stopDetect();
}
};
}
};
k.PointerEvent={

pointers:{},

getTouchList:function(){
var b=this;
var c=[];
k.utils.each(b.pointers,function(a){
c.push(a);
});
return c;
},

updatePointer:function(a,b){
if(a==k.EVENT_END){
this.pointers={};
}
else{
b.identifier=b.pointerId;
this.pointers[b.pointerId]=b;
}
return Object.keys(this.pointers).length;
},

matchType:function(a,b){
if(!b.pointerType){
return false;
}
var c=b.pointerType,
types={};
types[k.POINTER_MOUSE]=(c===b.MSPOINTER_TYPE_MOUSE||c===k.POINTER_MOUSE);
types[k.POINTER_TOUCH]=(c===b.MSPOINTER_TYPE_TOUCH||c===k.POINTER_TOUCH);
types[k.POINTER_PEN]=(c===b.MSPOINTER_TYPE_PEN||c===k.POINTER_PEN);
return types[a];
},

getEvents:function(){
return[
'pointerdown MSPointerDown',
'pointermove MSPointerMove',
'pointerup pointercancel MSPointerUp MSPointerCancel'
];
},

reset:function(){
this.pointers={};
}
};
k.detection={
gestures:[],
current:null,
previous:null,
stopped:false,

startDetect:function startDetect(a,b){
if(this.current){
return;
}
this.stopped=false;
this.current={
a:a,startEvent:k.utils.extend({},b),lastEvent:false,name:''};
this.detect(b);
},

detect:function detect(b){
if(!this.current||this.stopped){
return;
}
b=this.extendEventData(b);
var c=this.current.inst.options;
k.utils.each(this.gestures,function(a){
if(!this.stopped&&c[a.name]!==false){
if(a.handler.call(a,b,this.current.inst)===false){
this.stopDetect();
return false;
}
}
},this);
if(this.current){
this.current.lastEvent=b;
}
if(b.eventType==k.EVENT_END&&!b.touches.length-1){
this.stopDetect();
}
return b;
},

stopDetect:function stopDetect(){
this.previous=k.utils.extend({},this.current);
this.current=null;
this.stopped=true;
},

extendEventData:function extendEventData(b){
var c=this.current.startEvent;
if(c&&(b.touches.length!=c.touches.length||b.touches===c.touches)){
c.touches=[];
k.utils.each(b.touches,function(a){
c.touches.push(k.utils.extend({},a));
});
}
var d=b.timeStamp-c.timeStamp
,delta_x=b.center.pageX-c.center.pageX
,delta_y=b.center.pageY-c.center.pageY
,velocity=k.utils.getVelocity(d,delta_x,delta_y)
,interimAngle
,interimDirection;
if(b.eventType==='end'){
interimAngle=this.current.lastEvent&&this.current.lastEvent.interimAngle;
interimDirection=this.current.lastEvent&&this.current.lastEvent.interimDirection;
}
else{
interimAngle=this.current.lastEvent&&k.utils.getAngle(this.current.lastEvent.center,b.center);
interimDirection=this.current.lastEvent&&k.utils.getDirection(this.current.lastEvent.center,b.center);
}
k.utils.extend(b,{
deltaTime:d,
deltaX:delta_x,
deltaY:delta_y,
velocityX:velocity.x,
velocityY:velocity.y,
distance:k.utils.getDistance(c.center,b.center),
angle:k.utils.getAngle(c.center,b.center),
interimAngle:interimAngle,
direction:k.utils.getDirection(c.center,b.center),
interimDirection:interimDirection,
scale:k.utils.getScale(c.touches,b.touches),
rotation:k.utils.getRotation(c.touches,b.touches),
startEvent:c
});
return b;
},

register:function register(c){
var d=c.defaults||{};
if(d[c.name]===j){
d[c.name]=true;
}
k.utils.extend(k.defaults,d,true);
c.index=c.index||1000;
this.gestures.push(c);
this.gestures.sort(function(a,b){
if(a.index<b.index){return-1}
if(a.index>b.index){return 1}
return 0;
});
return this.gestures;
}
};

k.gestures.Drag={
name:'drag',
index:50,
defaults:{
drag_min_distance:10,
correct_for_drag_min_distance:true,
drag_max_touches:1,
drag_block_horizontal:false,
drag_block_vertical:false,
drag_lock_to_axis:false,
drag_lock_min_distance:25
},
triggered:false,
handler:function dragGesture(a,b){
if(k.detection.current.name!=this.name&&this.triggered){
b.trigger(this.name+'end',a);
this.triggered=false;
return;
}
if(b.options.drag_max_touches>0&&
a.touches.length>b.options.drag_max_touches){
return;
}
switch(a.eventType){
case k.EVENT_START:
this.triggered=false;
break;
case k.EVENT_MOVE:
if(a.distance<b.options.drag_min_distance&&
k.detection.current.name!=this.name){
return;
}
if(k.detection.current.name!=this.name){
k.detection.current.name=this.name;
if(b.options.correct_for_drag_min_distance&&a.distance>0){
var c=Math.abs(b.options.drag_min_distance/a.distance);
k.detection.current.startEvent.center.pageX+=a.deltaX*c;
k.detection.current.startEvent.center.pageY+=a.deltaY*c;
a=k.detection.extendEventData(a);
}
}
if(k.detection.current.lastEvent.drag_locked_to_axis||(b.options.drag_lock_to_axis&&b.options.drag_lock_min_distance<=a.distance)){
a.drag_locked_to_axis=true;
}
var d=k.detection.current.lastEvent.direction;
if(a.drag_locked_to_axis&&d!==a.direction){
if(k.utils.isVertical(d)){
a.direction=(a.deltaY<0)?k.DIRECTION_UP:k.DIRECTION_DOWN;
}
else{
a.direction=(a.deltaX<0)?k.DIRECTION_LEFT:k.DIRECTION_RIGHT;
}
}
if(!this.triggered){
b.trigger(this.name+'start',a);
this.triggered=true;
}
b.trigger(this.name,a);
b.trigger(this.name+a.direction,a);
if((b.options.drag_block_vertical&&k.utils.isVertical(a.direction))||
(b.options.drag_block_horizontal&&!k.utils.isVertical(a.direction))){
a.preventDefault();
}
break;
case k.EVENT_END:
if(this.triggered){
b.trigger(this.name+'end',a);
}
this.triggered=false;
break;
}
}
};

k.gestures.Hold={
name:'hold',
index:10,
defaults:{
hold_timeout:500,
hold_threshold:1
},
timer:null,
handler:function holdGesture(a,b){
switch(a.eventType){
case k.EVENT_START:
clearTimeout(this.timer);
k.detection.current.name=this.name;
this.timer=setTimeout(function(){
if(k.detection.current.name=='hold'){
b.trigger('hold',a);
}
},b.options.hold_timeout);
break;
case k.EVENT_MOVE:
if(a.distance>b.options.hold_threshold){
clearTimeout(this.timer);
}
break;
case k.EVENT_END:
clearTimeout(this.timer);
break;
}
}
};

k.gestures.Release={
name:'release',
index:Infinity,
handler:function releaseGesture(a,b){
if(a.eventType==k.EVENT_END){
b.trigger(this.name,a);
}
}
};

k.gestures.Swipe={
name:'swipe',
index:40,
defaults:{
swipe_min_touches:1,
swipe_max_touches:1,
swipe_velocity:0.7
},
handler:function swipeGesture(a,b){
if(a.eventType==k.EVENT_END){
if(b.options.swipe_max_touches>0&&
a.touches.length<b.options.swipe_min_touches&&
a.touches.length>b.options.swipe_max_touches){
return;
}
if(a.velocityX>b.options.swipe_velocity||
a.velocityY>b.options.swipe_velocity){
b.trigger(this.name,a);
b.trigger(this.name+a.direction,a);
}
}
}
};

k.gestures.Tap={
name:'tap',
index:100,
defaults:{
tap_max_touchtime:250,
tap_max_distance:10,
tap_always:true,
doubletap_distance:20,
doubletap_interval:300
},
handler:function tapGesture(a,b){
if(a.eventType==k.EVENT_END&&a.srcEvent.type!='touchcancel'){
var c=k.detection.previous,
did_doubletap=false;
if(a.deltaTime>b.options.tap_max_touchtime||
a.distance>b.options.tap_max_distance){
return;
}
if(c&&c.name=='tap'&&
(a.timeStamp-c.lastEvent.timeStamp)<b.options.doubletap_interval&&
a.distance<b.options.doubletap_distance){
b.trigger('doubletap',a);
did_doubletap=true;
}
if(!did_doubletap||b.options.tap_always){
k.detection.current.name='tap';
b.trigger(k.detection.current.name,a);
}
}
}
};

k.gestures.Touch={
name:'touch',
index:-Infinity,
defaults:{
prevent_default:false,
prevent_mouseevents:false
},
handler:function touchGesture(a,b){
if(b.options.prevent_mouseevents&&a.pointerType==k.POINTER_MOUSE){
a.stopDetect();
return;
}
if(b.options.prevent_default){
a.preventDefault();
}
if(a.eventType==k.EVENT_START){
b.trigger(this.name,a);
}
}
};

k.gestures.Transform={
name:'transform',
index:45,
defaults:{
transform_min_scale:0.01,
transform_min_rotation:1,
transform_always_block:false
},
triggered:false,
handler:function transformGesture(a,b){
if(k.detection.current.name!=this.name&&this.triggered){
b.trigger(this.name+'end',a);
this.triggered=false;
return;
}
if(a.touches.length<2){
return;
}
if(b.options.transform_always_block){
a.preventDefault();
}
switch(a.eventType){
case k.EVENT_START:
this.triggered=false;
break;
case k.EVENT_MOVE:
var c=Math.abs(1-a.scale);
var d=Math.abs(a.rotation);
if(c<b.options.transform_min_scale&&
d<b.options.transform_min_rotation){
return;
}
k.detection.current.name=this.name;
if(!this.triggered){
b.trigger(this.name+'start',a);
this.triggered=true;
}
b.trigger(this.name,a);if(d>b.options.transform_min_rotation){
b.trigger('rotate',a);
}
if(c>b.options.transform_min_scale){
b.trigger('pinch',a);
b.trigger('pinch'+((a.scale<1)?'in':'out'),a);
}
break;
case k.EVENT_END:
if(this.triggered){
b.trigger(this.name+'end',a);
}
this.triggered=false;
break;
}
}
};
if(typeof define=='function'&&typeof define.amd=='object'&&define.amd){
define(function(){
return k;
});
}
else if(typeof module==='object'&&typeof module.exports==='object'){
module.exports=k;
}
else{
h.Hammer=k;
}
})(this);
;

;
(function(o,p,q){
var s=o.requestAnimationFrame||
o.webkitRequestAnimationFrame||
o.mozRequestAnimationFrame||
o.oRequestAnimationFrame||
o.msRequestAnimationFrame||
function(a){o.setTimeout(a,1000/60)};
var t=(function(){
var h={};
var j=p.createElement('div').style;
var m=(function(){
var a=['t','webkitT','MozT','msT','OT'],
transform,
i=0,
l=a.length;
for(;i<l;i++){
transform=a[i]+'ransform';
if(transform in j)return a[i].substr(0,a[i].length-1);
}
return false;
})();
function _prefixStyle(a){
if(m===false)return false;
if(m==='')return a;
return m+a.charAt(0).toUpperCase()+a.substr(1);
}
h.getTime=Date.now||function getTime(){return new Date().getTime()};
h.extend=function(a,b){
for(var i in b){
a[i]=b[i];
}
};
h.addEvent=function(a,b,c,d){
a.addEventListener(b,c,!!d);
};
h.removeEvent=function(a,b,c,d){
a.removeEventListener(b,c,!!d);
};
h.momentum=function(a,b,c,d,e,f){
var g=a-b,
speed=q.abs(g)/c,
destination,
duration;
f=f===undefined?0.0006:f;
destination=a+(speed*speed)/(2*f)*(g<0?-1:1);
duration=speed/f;
if(destination<d){
destination=e?d-(e/2.5*(speed/8)):d;
g=q.abs(destination-a);
duration=g/speed;
}else if(destination>0){
destination=e?e/2.5*(speed/8):0;
g=q.abs(a)+destination;
duration=g/speed;
}
return{
destination:q.round(destination),
duration:duration
};
};
var n=_prefixStyle('transform');
h.extend(h,{
hasTransform:n!==false,
hasPerspective:_prefixStyle('perspective')in j,
hasTouch:'ontouchstart'in o,
hasPointer:navigator.msPointerEnabled,
hasTransition:_prefixStyle('transition')in j
});
h.isBadAndroid=/Android /.test(o.navigator.appVersion)&&!(/Chrome\/\d/.test(o.navigator.appVersion));
h.extend(h.style={},{
transform:n,
transitionTimingFunction:_prefixStyle('transitionTimingFunction'),
transitionDuration:_prefixStyle('transitionDuration'),
transitionDelay:_prefixStyle('transitionDelay'),
transformOrigin:_prefixStyle('transformOrigin')
});
h.hasClass=function(e,c){
var a=new RegExp("(^|\\s)"+c+"(\\s|$)");
return a.test(e.className);
};
h.addClass=function(e,c){
if(h.hasClass(e,c)){
return;
}
var a=e.className.split(' ');
a.push(c);
e.className=a.join(' ');
};
h.removeClass=function(e,c){
if(!h.hasClass(e,c)){
return;
}
var a=new RegExp("(^|\\s)"+c+"(\\s|$)",'g');
e.className=e.className.replace(a,' ');
};
h.offset=function(a){
var b=-a.offsetLeft,
top=-a.offsetTop;
while(a=a.offsetParent){
b-=a.offsetLeft;
top-=a.offsetTop;
}
return{
b:b,
top:top
};
};
h.preventDefaultException=function(a,b){
for(var i in b){
if(b[i].test(a[i])){
return true;
}
}
return false;
};
h.extend(h.eventType={},{
touchstart:1,
touchmove:1,
touchend:1,
mousedown:2,
mousemove:2,
mouseup:2,
MSPointerDown:3,
MSPointerMove:3,
MSPointerUp:3
});
h.extend(h.ease={},{
quadratic:{
style:'cubic-bezier(0.25, 0.46, 0.45, 0.94)',fn:function(k){
return k*(2-k);
}
},
circular:{
style:'cubic-bezier(0.1, 0.57, 0.1, 1) ',fn:function(k){
return q.sqrt(1-(--k*k));
}
},
back:{
style:'cubic-bezier(0.175, 0.885, 0.32, 1.275)',fn:function(k){
var b=4;
return(k=k-1)*k*((b+1)*k+b)+1;
}
},
bounce:{
style:'',
fn:function(k){
if((k/=1)<(1/2.75)){
return 7.5625*k*k;
}else if(k<(2/2.75)){
return 7.5625*(k-=(1.5/2.75))*k+0.75;
}else if(k<(2.5/2.75)){
return 7.5625*(k-=(2.25/2.75))*k+0.9375;
}else{
return 7.5625*(k-=(2.625/2.75))*k+0.984375;
}
}
},
elastic:{
style:'',
fn:function(k){
var f=0.22,
e=0.4;
if(k===0){return 0}
if(k==1){return 1}
return(e*q.pow(2,-10*k)*q.sin((k-f/4)*(2*q.PI)/f)+1);
}
}
});
h.tap=function(e,a){
var b=p.createEvent('Event');
b.initEvent(a,true,true);
b.pageX=e.pageX;
b.pageY=e.pageY;
e.target.dispatchEvent(b);
};
h.click=function(e){
var a=e.target,
ev;
if(!(/(SELECT|INPUT|TEXTAREA)/i).test(a.tagName)){
ev=p.createEvent('MouseEvents');
ev.initMouseEvent('click',true,true,e.view,1,
a.screenX,a.screenY,a.clientX,a.clientY,
e.ctrlKey,e.altKey,e.shiftKey,e.metaKey,
0,null);
ev._constructed=true;
a.dispatchEvent(ev);
}
};
return h;
})();
function IScroll(a,b){
this.wrapper=typeof a=='string'?p.querySelector(a):a;
this.scroller=this.wrapper.children[0];
this.scrollerStyle=this.scroller.style;this.options={
zoomMin:1,
zoomMax:4,startZoom:1,
resizeScrollbars:true,
mouseWheelSpeed:20,
snapThreshold:0.334,
startX:0,
startY:0,
scrollY:true,
directionLockThreshold:5,
momentum:true,
bounce:true,
bounceTime:600,
bounceEasing:'',
preventDefault:true,
preventDefaultException:{tagName:/^(INPUT|TEXTAREA|BUTTON|SELECT)$/},
HWCompositing:true,
useTransition:true,
useTransform:true
};
for(var i in b){
this.options[i]=b[i];
}
this.translateZ=this.options.HWCompositing&&t.hasPerspective?' translateZ(0)':'';
this.options.useTransition=t.hasTransition&&this.options.useTransition;
this.options.useTransform=t.hasTransform&&this.options.useTransform;
this.options.eventPassthrough=this.options.eventPassthrough===true?'vertical':this.options.eventPassthrough;
this.options.preventDefault=!this.options.eventPassthrough&&this.options.preventDefault;
this.options.scrollY=this.options.eventPassthrough=='vertical'?false:this.options.scrollY;
this.options.scrollX=this.options.eventPassthrough=='horizontal'?false:this.options.scrollX;
this.options.freeScroll=this.options.freeScroll&&!this.options.eventPassthrough;
this.options.directionLockThreshold=this.options.eventPassthrough?0:this.options.directionLockThreshold;
this.options.bounceEasing=typeof this.options.bounceEasing=='string'?t.ease[this.options.bounceEasing]||t.ease.circular:this.options.bounceEasing;
this.options.resizePolling=this.options.resizePolling===undefined?60:this.options.resizePolling;
if(this.options.tap===true){
this.options.tap='tap';
}
if(this.options.shrinkScrollbars=='scale'){
this.options.useTransition=false;
}
this.options.invertWheelDirection=this.options.invertWheelDirection?-1:1;
this.x=0;
this.y=0;
this.directionX=0;
this.directionY=0;
this._events={};
this.scale=q.min(q.max(this.options.startZoom,this.options.zoomMin),this.options.zoomMax);
this._init();
this.refresh();
this.scrollTo(this.options.startX,this.options.startY);
this.enable();
}
IScroll.prototype={
version:'5.1.1',
_init:function(){
this._initEvents();
if(this.options.zoom){
this._initZoom();
}
if(this.options.scrollbars||this.options.indicators){
this._initIndicators();
}
if(this.options.mouseWheel){
this._initWheel();
}
if(this.options.snap){
this._initSnap();
}
if(this.options.keyBindings){
this._initKeys();
}
},
destroy:function(){
this._initEvents(true);
this._execEvent('destroy');
},
_transitionEnd:function(e){
if(e.target!=this.scroller||!this.isInTransition){
return;
}
this._transitionTime();
if(!this.resetPosition(this.options.bounceTime)){
this.isInTransition=false;
this._execEvent('scrollEnd');
}
},
_start:function(e){
if(t.eventType[e.type]!=1){
if(e.button!==0){
return;
}
}
if(!this.enabled||(this.initiated&&t.eventType[e.type]!==this.initiated)){
return;
}
if(this.options.preventDefault&&!t.isBadAndroid&&!t.preventDefaultException(e.target,this.options.preventDefaultException)){
e.preventDefault();
}
var a=e.touches?e.touches[0]:e,
pos;
this.initiated=t.eventType[e.type];
this.moved=false;
this.distX=0;
this.distY=0;
this.directionX=0;
this.directionY=0;
this.directionLocked=0;
this._transitionTime();
this.startTime=t.getTime();
if(this.options.useTransition&&this.isInTransition){
this.isInTransition=false;
pos=this.getComputedPosition();
this._translate(q.round(pos.x),q.round(pos.y));
this._execEvent('scrollEnd');
}else if(!this.options.useTransition&&this.isAnimating){
this.isAnimating=false;
this._execEvent('scrollEnd');
}
this.startX=this.x;
this.startY=this.y;
this.absStartX=this.x;
this.absStartY=this.y;
this.pointX=a.pageX;
this.pointY=a.pageY;
this._execEvent('beforeScrollStart');
},
_move:function(e){
if(!this.enabled||t.eventType[e.type]!==this.initiated){
return;
}
if(this.options.preventDefault){e.preventDefault();
}
var a=e.touches?e.touches[0]:e,
deltaX=a.pageX-this.pointX,
deltaY=a.pageY-this.pointY,
timestamp=t.getTime(),
newX,newY,
absDistX,absDistY;
this.pointX=a.pageX;
this.pointY=a.pageY;
this.distX+=deltaX;
this.distY+=deltaY;
absDistX=q.abs(this.distX);
absDistY=q.abs(this.distY);
if(timestamp-this.endTime>300&&(absDistX<10&&absDistY<10)){
return;
}
if(!this.directionLocked&&!this.options.freeScroll){
if(absDistX>absDistY+this.options.directionLockThreshold){
this.directionLocked='h'}else if(absDistY>=absDistX+this.options.directionLockThreshold){
this.directionLocked='v'}else{
this.directionLocked='n'}
}
if(this.directionLocked=='h'){
if(this.options.eventPassthrough=='vertical'){
e.preventDefault();
}else if(this.options.eventPassthrough=='horizontal'){
this.initiated=false;
return;
}
deltaY=0;
}else if(this.directionLocked=='v'){
if(this.options.eventPassthrough=='horizontal'){
e.preventDefault();
}else if(this.options.eventPassthrough=='vertical'){
this.initiated=false;
return;
}
deltaX=0;
}
deltaX=this.hasHorizontalScroll?deltaX:0;
deltaY=this.hasVerticalScroll?deltaY:0;
newX=this.x+deltaX;
newY=this.y+deltaY;
if(newX>0||newX<this.maxScrollX){
newX=this.options.bounce?this.x+deltaX/3:newX>0?0:this.maxScrollX;
}
if(newY>0||newY<this.maxScrollY){
newY=this.options.bounce?this.y+deltaY/3:newY>0?0:this.maxScrollY;
}
this.directionX=deltaX>0?-1:deltaX<0?1:0;
this.directionY=deltaY>0?-1:deltaY<0?1:0;
if(!this.moved){
this._execEvent('scrollStart');
}
this.moved=true;
this._translate(newX,newY);

if(timestamp-this.startTime>300){
this.startTime=timestamp;
this.startX=this.x;
this.startY=this.y;
}

},
_end:function(e){
if(!this.enabled||t.eventType[e.type]!==this.initiated){
return;
}
if(this.options.preventDefault&&!t.preventDefaultException(e.target,this.options.preventDefaultException)){
e.preventDefault();
}
var a=e.changedTouches?e.changedTouches[0]:e,
momentumX,
momentumY,
duration=t.getTime()-this.startTime,
newX=q.round(this.x),
newY=q.round(this.y),
distanceX=q.abs(newX-this.startX),
distanceY=q.abs(newY-this.startY),
time=0,
easing='';
this.isInTransition=0;
this.initiated=0;
this.endTime=t.getTime();
if(this.resetPosition(this.options.bounceTime)){
return;
}
this.scrollTo(newX,newY);if(!this.moved){
if(this.options.tap){
t.tap(e,this.options.tap);
}
if(this.options.click){
t.click(e);
}
this._execEvent('scrollCancel');
return;
}
if(this._events.flick&&duration<200&&distanceX<100&&distanceY<100){
this._execEvent('flick');
return;
}
if(this.options.momentum&&duration<300){
momentumX=this.hasHorizontalScroll?t.momentum(this.x,this.startX,duration,this.maxScrollX,this.options.bounce?this.wrapperWidth:0,this.options.deceleration):{destination:newX,duration:0};
momentumY=this.hasVerticalScroll?t.momentum(this.y,this.startY,duration,this.maxScrollY,this.options.bounce?this.wrapperHeight:0,this.options.deceleration):{destination:newY,duration:0};
newX=momentumX.destination;
newY=momentumY.destination;
time=q.max(momentumX.duration,momentumY.duration);
this.isInTransition=1;
}
if(this.options.snap){
var b=this._nearestSnap(newX,newY);
this.currentPage=b;
time=this.options.snapSpeed||q.max(
q.max(
q.min(q.abs(newX-b.x),1000),
q.min(q.abs(newY-b.y),1000)
),300);
newX=b.x;
newY=b.y;
this.directionX=0;
this.directionY=0;
easing=this.options.bounceEasing;
}
if(newX!=this.x||newY!=this.y){
if(newX>0||newX<this.maxScrollX||newY>0||newY<this.maxScrollY){
easing=t.ease.quadratic;
}
this.scrollTo(newX,newY,time,easing);
return;
}
this._execEvent('scrollEnd');
},
_resize:function(){
var a=this;
clearTimeout(this.resizeTimeout);
this.resizeTimeout=setTimeout(function(){
a.refresh();
},this.options.resizePolling);
},
resetPosition:function(a){
var x=this.x,
y=this.y;
a=a||0;
if(!this.hasHorizontalScroll||this.x>0){
x=0;
}else if(this.x<this.maxScrollX){
x=this.maxScrollX;
}
if(!this.hasVerticalScroll||this.y>0){
y=0;
}else if(this.y<this.maxScrollY){
y=this.maxScrollY;
}
if(x==this.x&&y==this.y){
return false;
}
this.scrollTo(x,y,a,this.options.bounceEasing);
return true;
},
disable:function(){
this.enabled=false;
},
enable:function(){
this.enabled=true;
},
refresh:function(){
var a=this.wrapper.offsetHeight;this.wrapperWidth=this.wrapper.clientWidth;
this.wrapperHeight=this.wrapper.clientHeight;

this.scrollerWidth=q.round(this.scroller.offsetWidth*this.scale);
this.scrollerHeight=q.round(this.scroller.offsetHeight*this.scale);
this.maxScrollX=this.wrapperWidth-this.scrollerWidth;
this.maxScrollY=this.wrapperHeight-this.scrollerHeight;

this.hasHorizontalScroll=this.options.scrollX&&this.maxScrollX<0;
this.hasVerticalScroll=this.options.scrollY&&this.maxScrollY<0;
if(!this.hasHorizontalScroll){
this.maxScrollX=0;
this.scrollerWidth=this.wrapperWidth;
}
if(!this.hasVerticalScroll){
this.maxScrollY=0;
this.scrollerHeight=this.wrapperHeight;
}
this.endTime=0;
this.directionX=0;
this.directionY=0;
this.wrapperOffset=t.offset(this.wrapper);
this._execEvent('refresh');
this.resetPosition();
},
on:function(a,b){
if(!this._events[a]){
this._events[a]=[];
}
this._events[a].push(b);
},
off:function(a,b){
if(!this._events[a]){
return;
}
var c=this._events[a].indexOf(b);
if(c>-1){
this._events[a].splice(c,1);
}
},
_execEvent:function(a){
if(!this._events[a]){
return;
}
var i=0,
l=this._events[a].length;
if(!l){
return;
}
for(;i<l;i++){
this._events[a][i].apply(this,[].slice.call(arguments,1));
}
},
scrollBy:function(x,y,a,b){
x=this.x+x;
y=this.y+y;
a=a||0;
this.scrollTo(x,y,a,b);
},
scrollTo:function(x,y,a,b){
b=b||t.ease.circular;
this.isInTransition=this.options.useTransition&&a>0;
if(!a||(this.options.useTransition&&b.style)){
this._transitionTimingFunction(b.style);
this._transitionTime(a);
this._translate(x,y);
}else{
this._animate(x,y,a,b.fn);
}
},
scrollToElement:function(a,b,c,d,e){
a=a.nodeType?a:this.scroller.querySelector(a);
if(!a){
return;
}
var f=t.offset(a);
f.left-=this.wrapperOffset.left;
f.top-=this.wrapperOffset.top;
if(c===true){
c=q.round(a.offsetWidth/2-this.wrapper.offsetWidth/2);
}
if(d===true){
d=q.round(a.offsetHeight/2-this.wrapper.offsetHeight/2);
}
f.left-=c||0;
f.top-=d||0;
f.left=f.left>0?0:f.left<this.maxScrollX?this.maxScrollX:f.left;
f.top=f.top>0?0:f.top<this.maxScrollY?this.maxScrollY:f.top;
b=b===undefined||b===null||b==='auto'?q.max(q.abs(this.x-f.left),q.abs(this.y-f.top)):b;
this.scrollTo(f.left,f.top,b,e);
},
_transitionTime:function(a){
a=a||0;
this.scrollerStyle[t.style.transitionDuration]=a+'ms';
if(!a&&t.isBadAndroid){
this.scrollerStyle[t.style.transitionDuration]='0.001s';
}
if(this.indicators){
for(var i=this.indicators.length;i--;){
this.indicators[i].transitionTime(a);
}
}
},
_transitionTimingFunction:function(a){
this.scrollerStyle[t.style.transitionTimingFunction]=a;
if(this.indicators){
for(var i=this.indicators.length;i--;){
this.indicators[i].transitionTimingFunction(a);
}
}
},
_translate:function(x,y){
if(this.options.noHorizontalZoom)
x=0;
if(this.options.useTransform){
this.scrollerStyle[t.style.transform]='translate3d( '+x+'px,'+y+'px , 0px) scale('+this.scale+')  '+this.translateZ;
}else{
x=q.round(x);
y=q.round(y);
this.scrollerStyle.left=x+'px';
this.scrollerStyle.top=y+'px';
}
this.x=x;
this.y=y;
if(this.indicators){
for(var i=this.indicators.length;i--;){
this.indicators[i].updatePosition();
}
}
},
_initEvents:function(a){
var b=a?t.removeEvent:t.addEvent,
target=this.options.bindToWrapper?this.wrapper:o;
b(o,'orientationchange',this);
b(o,'resize',this);
if(this.options.click){
b(this.wrapper,'click',this,true);
}
if(!this.options.disableMouse){
b(this.wrapper,'mousedown',this);
b(target,'mousemove',this);
b(target,'mousecancel',this);
b(target,'mouseup',this);
}
if(t.hasPointer&&!this.options.disablePointer){
b(this.wrapper,'MSPointerDown',this);
b(target,'MSPointerMove',this);
b(target,'MSPointerCancel',this);
b(target,'MSPointerUp',this);
}
if(t.hasTouch&&!this.options.disableTouch){
b(this.wrapper,'touchstart',this);
b(target,'touchmove',this);
b(target,'touchcancel',this);
b(target,'touchend',this);
}
b(this.scroller,'transitionend',this);
b(this.scroller,'webkitTransitionEnd',this);
b(this.scroller,'oTransitionEnd',this);
b(this.scroller,'MSTransitionEnd',this);
},
getComputedPosition:function(){
var a=o.getComputedStyle(this.scroller,null),
x,y;
if(this.options.useTransform){
a=a[t.style.transform].split(')')[0].split(', ');
x=+(a[12]||a[4]);
y=+(a[13]||a[5]);
}else{
x=+a.left.replace(/[^-\d.]/g,'');
y=+a.top.replace(/[^-\d.]/g,'');
}
return{x:x,y:y};
},
_initIndicators:function(){
var b=this.options.interactiveScrollbars,
customStyle=typeof this.options.scrollbars!='string',
indicators=[],
indicator;
var c=this;
this.indicators=[];
if(this.options.scrollbars){
if(this.options.scrollY){
indicator={
el:createDefaultScrollbar('v',b,this.options.scrollbars),
b:b,
defaultScrollbars:true,
customStyle:customStyle,
resize:this.options.resizeScrollbars,
shrink:this.options.shrinkScrollbars,
fade:this.options.fadeScrollbars,
listenX:false
};
this.wrapper.appendChild(indicator.el);
indicators.push(indicator);
}
if(this.options.scrollX){
indicator={
el:createDefaultScrollbar('h',b,this.options.scrollbars),
b:b,
defaultScrollbars:true,
customStyle:customStyle,
resize:this.options.resizeScrollbars,
shrink:this.options.shrinkScrollbars,
fade:this.options.fadeScrollbars,
listenY:false
};
this.wrapper.appendChild(indicator.el);
indicators.push(indicator);
}
}
if(this.options.indicators){
indicators=indicators.concat(this.options.indicators);
}
for(var i=indicators.length;i--;){
this.indicators.push(new Indicator(this,indicators[i]));
}
function _indicatorsMap(a){
for(var i=c.indicators.length;i--;){
a.call(c.indicators[i]);
}
}
if(this.options.fadeScrollbars){
this.on('scrollEnd',function(){
_indicatorsMap(function(){
this.fade();
});
});
this.on('scrollCancel',function(){
_indicatorsMap(function(){
this.fade();
});
});
this.on('scrollStart',function(){
_indicatorsMap(function(){
this.fade(1);
});
});
this.on('beforeScrollStart',function(){
_indicatorsMap(function(){
this.fade(1,true);
});
});
}
this.on('refresh',function(){
_indicatorsMap(function(){
this.refresh();
});
});
this.on('destroy',function(){
_indicatorsMap(function(){
this.destroy();
});
delete this.indicators;
});
},
_initZoom:function(){
this.scrollerStyle[t.style.transformOrigin]='0 0';
},
_zoomStart:function(e){
var a=q.abs(e.touches[0].pageX-e.touches[1].pageX),
c2=q.abs(e.touches[0].pageY-e.touches[1].pageY);
this.touchesDistanceStart=q.sqrt(a*a+c2*c2);
this.startScale=this.scale;
this.originX=q.abs(e.touches[0].pageX+e.touches[1].pageX)/2+this.wrapperOffset.left-this.x;
this.originY=q.abs(e.touches[0].pageY+e.touches[1].pageY)/2+this.wrapperOffset.top-this.y;
this._execEvent('zoomStart');
},
_zoom:function(e){
if(!this.enabled||t.eventType[e.type]!==this.initiated){
return;
}
if(this.options.preventDefault){
e.preventDefault();
}
var a=q.abs(e.touches[0].pageX-e.touches[1].pageX),
c2=q.abs(e.touches[0].pageY-e.touches[1].pageY),
distance=q.sqrt(a*a+c2*c2),
scale=1/this.touchesDistanceStart*distance*this.startScale,
lastScale,
x,y;
this.scaled=true;
if(scale<this.options.zoomMin){
scale=0.5*this.options.zoomMin*q.pow(2.0,scale/this.options.zoomMin);
}else if(scale>this.options.zoomMax){
scale=2.0*this.options.zoomMax*q.pow(0.5,this.options.zoomMax/scale);
}
lastScale=scale/this.startScale;
x=this.originX-this.originX*lastScale+this.startX;
y=this.originY-this.originY*lastScale+this.startY;
this.scale=scale;
this.scrollTo(x,y,0);
},
_zoomEnd:function(e){
if(!this.enabled||t.eventType[e.type]!==this.initiated){
return;
}
if(this.options.preventDefault){
e.preventDefault();
}
var a,newY,
lastScale;
this.isInTransition=0;
this.initiated=0;
if(this.scale>this.options.zoomMax){
this.scale=this.options.zoomMax;
}else if(this.scale<this.options.zoomMin){
this.scale=this.options.zoomMin;
}
this.refresh();
lastScale=this.scale/this.startScale;
a=this.originX-this.originX*lastScale+this.startX;
newY=this.originY-this.originY*lastScale+this.startY;
if(a>0){
a=0;
}else if(a<this.maxScrollX){
a=this.maxScrollX;
}
if(newY>0){
newY=0;
}else if(newY<this.maxScrollY){
newY=this.maxScrollY;
}
if(this.x!=a||this.y!=newY){
this.scrollTo(a,newY,this.options.bounceTime);
}
this.scaled=false;
this._execEvent('zoomEnd');
},
zoom:function(a,x,y,b){
if(a<this.options.zoomMin){
a=this.options.zoomMin;
}else if(a>this.options.zoomMax){
a=this.options.zoomMax;
}
if(a==this.scale){
return;
}
var c=a/this.scale;
x=x===undefined?this.wrapperWidth/2:x;
y=y===undefined?this.wrapperHeight/2:y;
b=b===undefined?300:b;
x=x+this.wrapperOffset.left-this.x;
y=y+this.wrapperOffset.top-this.y;
x=x-x*c+this.x;
y=y-y*c+this.y;
this.scale=a;
this.refresh();if(x>0){
x=0;
}else if(x<this.maxScrollX){
x=this.maxScrollX;
}
if(y>0){
y=0;
}else if(y<this.maxScrollY){
y=this.maxScrollY;
}
this.scrollTo(x,y,b);
},
_wheelZoom:function(e){
var a,
deltaScale,
that=this;
clearTimeout(this.wheelTimeout);
this.wheelTimeout=setTimeout(function(){
that._execEvent('zoomEnd');
},400);
if('deltaX'in e){
a=-e.deltaY/q.abs(e.deltaY);
}else if('wheelDeltaX'in e){
a=e.wheelDeltaY/q.abs(e.wheelDeltaY);
}else if('wheelDelta'in e){
a=e.wheelDelta/q.abs(e.wheelDelta);
}else if('detail'in e){
a=-e.detail/q.abs(e.wheelDelta);
}else{
return;
}
deltaScale=this.scale+a/5/2;
this.zoom(deltaScale,e.pageX,e.pageY,0);
},
_initWheel:function(){
t.addEvent(this.wrapper,'wheel',this);
t.addEvent(this.wrapper,'mousewheel',this);
t.addEvent(this.wrapper,'DOMMouseScroll',this);
this.on('destroy',function(){
t.removeEvent(this.wrapper,'wheel',this);
t.removeEvent(this.wrapper,'mousewheel',this);
t.removeEvent(this.wrapper,'DOMMouseScroll',this);
});
},
_wheel:function(e){
if(!this.enabled){
return;
}
e.preventDefault();
e.stopPropagation();
var a,wheelDeltaY,
newX,newY,
that=this;
if(this.wheelTimeout===undefined){
that._execEvent('scrollStart');
}
clearTimeout(this.wheelTimeout);
this.wheelTimeout=setTimeout(function(){
that._execEvent('scrollEnd');
that.wheelTimeout=undefined;
},400);
if('deltaX'in e){
a=-e.deltaX;
wheelDeltaY=-e.deltaY;
}else if('wheelDeltaX'in e){
a=e.wheelDeltaX/120*this.options.mouseWheelSpeed;
wheelDeltaY=e.wheelDeltaY/120*this.options.mouseWheelSpeed;
}else if('wheelDelta'in e){
a=wheelDeltaY=e.wheelDelta/120*this.options.mouseWheelSpeed;
}else if('detail'in e){
a=wheelDeltaY=-e.detail/3*this.options.mouseWheelSpeed;
}else if(e.originalEvent){e=e.originalEvent;
if('deltaX'in e){
a=-e.deltaX;
wheelDeltaY=-e.deltaY;
}else if('wheelDeltaX'in e){
a=e.wheelDeltaX/120*this.options.mouseWheelSpeed;
wheelDeltaY=e.wheelDeltaY/120*this.options.mouseWheelSpeed;
}else if('wheelDelta'in e){
a=wheelDeltaY=e.wheelDelta/120*this.options.mouseWheelSpeed;
}else if('detail'in e){
a=wheelDeltaY=-e.detail/3*this.options.mouseWheelSpeed;
}else
return;
}else
return;
a*=this.options.invertWheelDirection;
wheelDeltaY*=this.options.invertWheelDirection;
if(navigator.userAgent.toLowerCase().indexOf('firefox')>-1){
a=a*20;
wheelDeltaY=wheelDeltaY*20;
}
if(!this.hasVerticalScroll){
a=wheelDeltaY;
wheelDeltaY=0;
}
if(this.options.snap){
newX=this.currentPage.pageX;
newY=this.currentPage.pageY;
if(a>0){
newX--;
}else if(a<0){
newX++;
}
if(wheelDeltaY>0){
newY--;
}else if(wheelDeltaY<0){
newY++;
}
this.goToPage(newX,newY);
return;
}
newX=this.x+q.round(this.hasHorizontalScroll?a:0);
newY=this.y+q.round(this.hasVerticalScroll?wheelDeltaY:0);
if(newX>0){
newX=0;
}else if(newX<this.maxScrollX){
newX=this.maxScrollX;
}
if(newY>0){
newY=0;
}else if(newY<this.maxScrollY){
newY=this.maxScrollY;
}
if(!IScrollinitTimer||Date.now()-IScrollinitTimer<10000)
var b=0;
else
b=750;
this.scrollTo(newX,newY,b)},
_initSnap:function(){
this.currentPage={};
if(typeof this.options.snap=='string'){
this.options.snap=this.scroller.querySelectorAll(this.options.snap);
}
this.on('refresh',function(){
var i=0,l,
m=0,n,
cx,cy,
x=0,y,
stepX=this.options.snapStepX||this.wrapperWidth,
stepY=this.options.snapStepY||this.wrapperHeight,
el;
this.pages=[];
if(!this.wrapperWidth||!this.wrapperHeight||!this.scrollerWidth||!this.scrollerHeight){
return;
}
if(this.options.snap===true){
cx=q.round(stepX/2);
cy=q.round(stepY/2);
while(x>-this.scrollerWidth){
this.pages[i]=[];
l=0;
y=0;
while(y>-this.scrollerHeight){
this.pages[i][l]={
x:q.max(x,this.maxScrollX),
y:q.max(y,this.maxScrollY),
width:stepX,
height:stepY,
cx:x-cx,
cy:y-cy
};
y-=stepY;
l++;
}
x-=stepX;
i++;
}
}else{
el=this.options.snap;
l=el.length;
n=-1;
for(;i<l;i++){
if(i===0||el[i].offsetLeft<=el[i-1].offsetLeft){
m=0;
n++;
}
if(!this.pages[m]){
this.pages[m]=[];
}
x=q.max(-el[i].offsetLeft,this.maxScrollX);
y=q.max(-el[i].offsetTop,this.maxScrollY);
cx=x-q.round(el[i].offsetWidth/2);
cy=y-q.round(el[i].offsetHeight/2);
this.pages[m][n]={
x:x,
y:y,
width:el[i].offsetWidth,
height:el[i].offsetHeight,
cx:cx,
cy:cy
};
if(x>this.maxScrollX){
m++;
}
}
}
this.goToPage(this.currentPage.pageX||0,this.currentPage.pageY||0,0);
if(this.options.snapThreshold%1===0){
this.snapThresholdX=this.options.snapThreshold;
this.snapThresholdY=this.options.snapThreshold;
}else{
this.snapThresholdX=q.round(this.pages[this.currentPage.pageX][this.currentPage.pageY].width*this.options.snapThreshold);
this.snapThresholdY=q.round(this.pages[this.currentPage.pageX][this.currentPage.pageY].height*this.options.snapThreshold);
}
});
this.on('flick',function(){
var a=this.options.snapSpeed||q.max(
q.max(
q.min(q.abs(this.x-this.startX),1000),
q.min(q.abs(this.y-this.startY),1000)
),300);
this.goToPage(
this.currentPage.pageX+this.directionX,
this.currentPage.pageY+this.directionY,
a
);
});
},
_nearestSnap:function(x,y){
if(!this.pages.length){
return{x:0,y:0,pageX:0,pageY:0};
}
var i=0,
l=this.pages.length,
m=0;
if(q.abs(x-this.absStartX)<this.snapThresholdX&&
q.abs(y-this.absStartY)<this.snapThresholdY){
return this.currentPage;
}
if(x>0){
x=0;
}else if(x<this.maxScrollX){
x=this.maxScrollX;
}
if(y>0){
y=0;
}else if(y<this.maxScrollY){
y=this.maxScrollY;
}
for(;i<l;i++){
if(x>=this.pages[i][0].cx){
x=this.pages[i][0].x;
break;
}
}
l=this.pages[i].length;
for(;m<l;m++){
if(y>=this.pages[0][m].cy){
y=this.pages[0][m].y;
break;
}
}
if(i==this.currentPage.pageX){
i+=this.directionX;
if(i<0){
i=0;
}else if(i>=this.pages.length){
i=this.pages.length-1;
}
x=this.pages[i][0].x;
}
if(m==this.currentPage.pageY){
m+=this.directionY;
if(m<0){
m=0;
}else if(m>=this.pages[0].length){
m=this.pages[0].length-1;
}
y=this.pages[0][m].y;
}
return{
x:x,
y:y,
pageX:i,
pageY:m
};
},
goToPage:function(x,y,a,b){
b=b||this.options.bounceEasing;
if(x>=this.pages.length){
x=this.pages.length-1;
}else if(x<0){
x=0;
}
if(y>=this.pages[x].length){
y=this.pages[x].length-1;
}else if(y<0){
y=0;
}
var c=this.pages[x][y].x,
posY=this.pages[x][y].y;
a=a===undefined?this.options.snapSpeed||q.max(
q.max(
q.min(q.abs(c-this.x),1000),
q.min(q.abs(posY-this.y),1000)
),300):a;
this.currentPage={
x:c,
y:posY,
pageX:x,
pageY:y
};
this.scrollTo(c,posY,a,b);
},
next:function(a,b){
var x=this.currentPage.pageX,
y=this.currentPage.pageY;
x++;
if(x>=this.pages.length&&this.hasVerticalScroll){
x=0;
y++;
}
this.goToPage(x,y,a,b);
},
prev:function(a,b){
var x=this.currentPage.pageX,
y=this.currentPage.pageY;
x--;
if(x<0&&this.hasVerticalScroll){
x=0;
y--;
}
this.goToPage(x,y,a,b);
},
_initKeys:function(e){
var a={
pageUp:33,
pageDown:34,
end:35,
home:36,
left:37,
up:38,
right:39,
down:40
};
var i;
if(typeof this.options.keyBindings=='object'){
for(i in this.options.keyBindings){
if(typeof this.options.keyBindings[i]=='string'){
this.options.keyBindings[i]=this.options.keyBindings[i].toUpperCase().charCodeAt(0);
}
}
}else{
this.options.keyBindings={};
}
for(i in a){
this.options.keyBindings[i]=this.options.keyBindings[i]||a[i];
}
t.addEvent(o,'keydown',this);
this.on('destroy',function(){
t.removeEvent(o,'keydown',this);
});
},
_key:function(e){
if(!this.enabled){
return;
}
var a=this.options.snap,newX=a?this.currentPage.pageX:this.x,
newY=a?this.currentPage.pageY:this.y,
now=t.getTime(),
prevTime=this.keyTime||0,
acceleration=0.250,
pos;
if(this.options.useTransition&&this.isInTransition){
pos=this.getComputedPosition();
this._translate(q.round(pos.x),q.round(pos.y));
this.isInTransition=false;
}
this.keyAcceleration=now-prevTime<200?q.min(this.keyAcceleration+acceleration,50):0;
switch(e.keyCode){
case this.options.keyBindings.pageUp:
if(this.hasHorizontalScroll&&!this.hasVerticalScroll){
newX+=a?1:this.wrapperWidth;
}else{
newY+=a?1:this.wrapperHeight;
}
break;
case this.options.keyBindings.pageDown:
if(this.hasHorizontalScroll&&!this.hasVerticalScroll){
newX-=a?1:this.wrapperWidth;
}else{
newY-=a?1:this.wrapperHeight;
}
break;
case this.options.keyBindings.end:
newX=a?this.pages.length-1:this.maxScrollX;
newY=a?this.pages[0].length-1:this.maxScrollY;
break;
case this.options.keyBindings.home:
newX=0;
newY=0;
break;
case this.options.keyBindings.left:
newX+=a?-1:5+this.keyAcceleration>>0;
break;
case this.options.keyBindings.up:
newY+=a?1:5+this.keyAcceleration>>0;
break;
case this.options.keyBindings.right:
newX-=a?-1:5+this.keyAcceleration>>0;
break;
case this.options.keyBindings.down:
newY-=a?1:5+this.keyAcceleration>>0;
break;
default:
return;
}
if(a){
this.goToPage(newX,newY);
return;
}
if(newX>0){
newX=0;
this.keyAcceleration=0;
}else if(newX<this.maxScrollX){
newX=this.maxScrollX;
this.keyAcceleration=0;
}
if(newY>0){
newY=0;
this.keyAcceleration=0;
}else if(newY<this.maxScrollY){
newY=this.maxScrollY;
this.keyAcceleration=0;
}
this.scrollTo(newX,newY,0);
this.keyTime=now;
},
_animate:function(b,c,d,e){
var f=this,
startX=this.x,
startY=this.y,
startTime=t.getTime(),
destTime=startTime+d;
function step(){
var a=t.getTime(),
newX,newY,
easing;
if(a>=destTime){
f.isAnimating=false;
f._translate(b,c);
if(!f.resetPosition(f.options.bounceTime)){
f._execEvent('scrollEnd');
}
return;
}
a=(a-startTime)/d;
easing=e(a);
newX=(b-startX)*easing+startX;
newY=(c-startY)*easing+startY;
f._translate(newX,newY);
if(f.isAnimating){
s(step);
}
}
this.isAnimating=true;
step();
},
handleEvent:function(e){
switch(e.type){
case'touchstart':
case'MSPointerDown':
case'mousedown':
this._start(e);
if(this.options.zoom&&e.touches&&e.touches.length>1){
this._zoomStart(e);
}
break;
case'touchmove':
case'MSPointerMove':
case'mousemove':
if(this.options.zoom&&e.touches&&e.touches[1]){
this._zoom(e);
return;
}
this._move(e);
break;
case'touchend':
case'MSPointerUp':
case'mouseup':
case'touchcancel':
case'MSPointerCancel':
case'mousecancel':
if(this.scaled){
this._zoomEnd(e);
return;
}
this._end(e);
break;
case'orientationchange':
case'resize':
this._resize();
break;
case'transitionend':
case'webkitTransitionEnd':
case'oTransitionEnd':
case'MSTransitionEnd':
this._transitionEnd(e);
break;
case'wheel':
case'DOMMouseScroll':
case'mousewheel':
if(this.options.wheelAction=='zoom'){
this._wheelZoom(e);
return;
}
this._wheel(e);
break;
case'keydown':
this._key(e);
break;
}
}
};
function createDefaultScrollbar(a,b,c){
var d=p.createElement('div'),
indicator=p.createElement('div');
if(c===true){
d.style.cssText='position:absolute;z-index:9999';
indicator.style.cssText='-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;position:absolute;background:rgba(0,0,0,0.5);border:1px solid rgba(255,255,255,0.9);border-radius:3px';
}
indicator.className='iScrollIndicator';
if(a=='h'){
if(c===true){
d.style.cssText+=';height:7px;left:2px;right:2px;bottom:0';
indicator.style.height='100%';
}
d.className='iScrollHorizontalScrollbar';
}else{
if(c===true){
d.style.cssText+=';width:7px;bottom:2px;top:2px;right:1px';
indicator.style.width='100%';
}
d.className='iScrollVerticalScrollbar';
}
d.style.cssText+=';overflow:hidden';
if(!b){
d.style.pointerEvents='none';
}
d.appendChild(indicator);
return d;
}
function Indicator(a,b){
this.wrapper=typeof b.el=='string'?p.querySelector(b.el):b.el;
this.wrapperStyle=this.wrapper.style;
this.indicator=this.wrapper.children[0];
this.indicatorStyle=this.indicator.style;
this.scroller=a;
this.options={
listenX:true,
listenY:true,
interactive:false,
resize:true,
defaultScrollbars:false,
shrink:false,
fade:false,
speedRatioX:0,
speedRatioY:0
};
for(var i in b){
this.options[i]=b[i];
}
this.sizeRatioX=1;
this.sizeRatioY=1;
this.maxPosX=0;
this.maxPosY=0;
if(this.options.interactive){
if(!this.options.disableTouch){
t.addEvent(this.indicator,'touchstart',this);
t.addEvent(o,'touchend',this);
}
if(!this.options.disablePointer){
t.addEvent(this.indicator,'MSPointerDown',this);
t.addEvent(o,'MSPointerUp',this);
}
if(!this.options.disableMouse){
t.addEvent(this.indicator,'mousedown',this);
t.addEvent(o,'mouseup',this);
}
}
if(this.options.fade){
this.wrapperStyle[t.style.transform]=this.scroller.translateZ;
this.wrapperStyle[t.style.transitionDuration]=t.isBadAndroid?'0.001s':'0ms';
this.wrapperStyle.opacity='0';
}
}
Indicator.prototype={
handleEvent:function(e){
switch(e.type){
case'touchstart':
case'MSPointerDown':
case'mousedown':
this._start(e);
break;
case'touchmove':
case'MSPointerMove':
case'mousemove':
this._move(e);
break;
case'touchend':
case'MSPointerUp':
case'mouseup':
case'touchcancel':
case'MSPointerCancel':
case'mousecancel':
this._end(e);
break;
}
},
destroy:function(){
if(this.options.interactive){
t.removeEvent(this.indicator,'touchstart',this);
t.removeEvent(this.indicator,'MSPointerDown',this);
t.removeEvent(this.indicator,'mousedown',this);
t.removeEvent(o,'touchmove',this);
t.removeEvent(o,'MSPointerMove',this);
t.removeEvent(o,'mousemove',this);
t.removeEvent(o,'touchend',this);
t.removeEvent(o,'MSPointerUp',this);
t.removeEvent(o,'mouseup',this);
}
if(this.options.defaultScrollbars){
this.wrapper.parentNode.removeChild(this.wrapper);
}
},
_start:function(e){
var a=e.touches?e.touches[0]:e;
e.preventDefault();
e.stopPropagation();
this.transitionTime();
this.initiated=true;
this.moved=false;
this.lastPointX=a.pageX;
this.lastPointY=a.pageY;
this.startTime=t.getTime();
if(!this.options.disableTouch){
t.addEvent(o,'touchmove',this);
}
if(!this.options.disablePointer){
t.addEvent(o,'MSPointerMove',this);
}
if(!this.options.disableMouse){
t.addEvent(o,'mousemove',this);
}
this.scroller._execEvent('beforeScrollStart');
},
_move:function(e){
var a=e.touches?e.touches[0]:e,
deltaX,deltaY,
newX,newY,
timestamp=t.getTime();
if(!this.moved){
this.scroller._execEvent('scrollStart');
}
this.moved=true;
deltaX=a.pageX-this.lastPointX;
this.lastPointX=a.pageX;
deltaY=a.pageY-this.lastPointY;
this.lastPointY=a.pageY;
newX=this.x+deltaX;
newY=this.y+deltaY;
this._pos(newX,newY);
e.preventDefault();
e.stopPropagation();
},
_end:function(e){
if(!this.initiated){
return;
}
this.initiated=false;
e.preventDefault();
e.stopPropagation();
t.removeEvent(o,'touchmove',this);
t.removeEvent(o,'MSPointerMove',this);
t.removeEvent(o,'mousemove',this);
if(this.scroller.options.snap){
var a=this.scroller._nearestSnap(this.scroller.x,this.scroller.y);
var b=this.options.snapSpeed||q.max(
q.max(
q.min(q.abs(this.scroller.x-a.x),1000),
q.min(q.abs(this.scroller.y-a.y),1000)
),300);
if(this.scroller.x!=a.x||this.scroller.y!=a.y){
this.scroller.directionX=0;
this.scroller.directionY=0;
this.scroller.currentPage=a;
this.scroller.scrollTo(a.x,a.y,b,this.scroller.options.bounceEasing);
}
}
if(this.moved){
this.scroller._execEvent('scrollEnd');
}
},
transitionTime:function(a){
a=a||0;
this.indicatorStyle[t.style.transitionDuration]=a+'ms';
if(!a&&t.isBadAndroid){
this.indicatorStyle[t.style.transitionDuration]='0.001s';
}
},
transitionTimingFunction:function(a){
this.indicatorStyle[t.style.transitionTimingFunction]=a;
},
refresh:function(){
this.transitionTime();
if(this.options.listenX&&!this.options.listenY){
this.indicatorStyle.display=this.scroller.hasHorizontalScroll?'block':'none';
}else if(this.options.listenY&&!this.options.listenX){
this.indicatorStyle.display=this.scroller.hasVerticalScroll?'block':'none';
}else{
this.indicatorStyle.display=this.scroller.hasHorizontalScroll||this.scroller.hasVerticalScroll?'block':'none';
}
if(this.scroller.hasHorizontalScroll&&this.scroller.hasVerticalScroll){
t.addClass(this.wrapper,'iScrollBothScrollbars');
t.removeClass(this.wrapper,'iScrollLoneScrollbar');
if(this.options.defaultScrollbars&&this.options.customStyle){
if(this.options.listenX){
this.wrapper.style.right='8px';
}else{
this.wrapper.style.bottom='8px';
}
}
}else{
t.removeClass(this.wrapper,'iScrollBothScrollbars');
t.addClass(this.wrapper,'iScrollLoneScrollbar');
if(this.options.defaultScrollbars&&this.options.customStyle){
if(this.options.listenX){
this.wrapper.style.right='2px';
}else{
this.wrapper.style.bottom='2px';
}
}
}
var r=this.wrapper.offsetHeight;if(this.options.listenX){
this.wrapperWidth=this.wrapper.clientWidth;
if(this.options.resize){
this.indicatorWidth=q.max(q.round(this.wrapperWidth*this.wrapperWidth/(this.scroller.scrollerWidth||this.wrapperWidth||1)),8);
this.indicatorStyle.width=this.indicatorWidth+'px';
}else{
this.indicatorWidth=this.indicator.clientWidth;
}
this.maxPosX=this.wrapperWidth-this.indicatorWidth;
if(this.options.shrink=='clip'){
this.minBoundaryX=-this.indicatorWidth+8;
this.maxBoundaryX=this.wrapperWidth-8;
}else{
this.minBoundaryX=0;
this.maxBoundaryX=this.maxPosX;
}
this.sizeRatioX=this.options.speedRatioX||(this.scroller.maxScrollX&&(this.maxPosX/this.scroller.maxScrollX));
}
if(this.options.listenY){
this.wrapperHeight=this.wrapper.clientHeight;
if(this.options.resize){
this.indicatorHeight=q.max(q.round(this.wrapperHeight*this.wrapperHeight/(this.scroller.scrollerHeight||this.wrapperHeight||1)),8);
this.indicatorStyle.height=this.indicatorHeight+'px';
}else{
this.indicatorHeight=this.indicator.clientHeight;
}
this.maxPosY=this.wrapperHeight-this.indicatorHeight;
if(this.options.shrink=='clip'){
this.minBoundaryY=-this.indicatorHeight+8;
this.maxBoundaryY=this.wrapperHeight-8;
}else{
this.minBoundaryY=0;
this.maxBoundaryY=this.maxPosY;
}
this.maxPosY=this.wrapperHeight-this.indicatorHeight;
this.sizeRatioY=this.options.speedRatioY||(this.scroller.maxScrollY&&(this.maxPosY/this.scroller.maxScrollY));
}
this.updatePosition();
},
updatePosition:function(){
var x=this.options.listenX&&q.round(this.sizeRatioX*this.scroller.x)||0,
y=this.options.listenY&&q.round(this.sizeRatioY*this.scroller.y)||0;
if(!this.options.ignoreBoundaries){
if(x<this.minBoundaryX){
if(this.options.shrink=='scale'){
this.width=q.max(this.indicatorWidth+x,8);
this.indicatorStyle.width=this.width+'px';
}
x=this.minBoundaryX;
}else if(x>this.maxBoundaryX){
if(this.options.shrink=='scale'){
this.width=q.max(this.indicatorWidth-(x-this.maxPosX),8);
this.indicatorStyle.width=this.width+'px';
x=this.maxPosX+this.indicatorWidth-this.width;
}else{
x=this.maxBoundaryX;
}
}else if(this.options.shrink=='scale'&&this.width!=this.indicatorWidth){
this.width=this.indicatorWidth;
this.indicatorStyle.width=this.width+'px';
}
if(y<this.minBoundaryY){
if(this.options.shrink=='scale'){
this.height=q.max(this.indicatorHeight+y*3,8);
this.indicatorStyle.height=this.height+'px';
}
y=this.minBoundaryY;
}else if(y>this.maxBoundaryY){
if(this.options.shrink=='scale'){
this.height=q.max(this.indicatorHeight-(y-this.maxPosY)*3,8);
this.indicatorStyle.height=this.height+'px';
y=this.maxPosY+this.indicatorHeight-this.height;
}else{
y=this.maxBoundaryY;
}
}else if(this.options.shrink=='scale'&&this.height!=this.indicatorHeight){
this.height=this.indicatorHeight;
this.indicatorStyle.height=this.height+'px';
}
}
this.x=x;
this.y=y;
if(this.scroller.options.useTransform){
this.indicatorStyle[t.style.transform]='translate('+x+'px,'+y+'px)'+this.scroller.translateZ;
}else{
this.indicatorStyle.left=x+'px';
this.indicatorStyle.top=y+'px';
}
},
_pos:function(x,y){
if(x<0){
x=0;
}else if(x>this.maxPosX){
x=this.maxPosX;
}
if(y<0){
y=0;
}else if(y>this.maxPosY){
y=this.maxPosY;
}
x=this.options.listenX?q.round(x/this.sizeRatioX):this.scroller.x;
y=this.options.listenY?q.round(y/this.sizeRatioY):this.scroller.y;
this.scroller.scrollTo(x,y);
},
fade:function(b,c){
if(c&&!this.visible){
return;
}
clearTimeout(this.fadeTimeout);
this.fadeTimeout=null;
var d=b?250:500,
delay=b?0:300;
b=b?'1':'0';
this.wrapperStyle[t.style.transitionDuration]=d+'ms';
this.fadeTimeout=setTimeout((function(a){
this.wrapperStyle.opacity=a;
this.visible=+a;
}).bind(this,b),delay);
}
};
IScroll.utils=t;
if(typeof module!='undefined'&&module.exports){
module.exports=IScroll;
}else{
o.IScroll=IScroll;
}
})(window,document,Math);
;

;
(function(a,b,c){
if(typeof define==="function"&&define.amd){
define(["jquery"],function($){
c($,a,b);
return $.mobile;
});
}else{
c(a.jQuery,a,b);
}
}(this,document,function(n,A,B,C){
(function($){
$.mobile={};
}(n));
(function($,a,b){
$.extend($.mobile,{
version:"1.4.2",
subPageUrlKey:"ui-page",
hideUrlBar:true,
keepNative:":jqmData(role='none'), :jqmData(role='nojs')",
activePageClass:"ui-page-active",
activeBtnClass:"ui-btn-active",
focusClass:"ui-focus",
ajaxEnabled:true,
hashListeningEnabled:true,
linkBindingEnabled:true,
defaultPageTransition:"fade",
maxTransitionWidth:false,
minScrollBack:0,
defaultDialogTransition:"pop",
pageLoadErrorMessage:"Error Loading Page",
pageLoadErrorMessageTheme:"a",
phonegapNavigationEnabled:false,
autoInitializePage:true,
pushStateEnabled:true,
ignoreContentEnabled:false,
buttonMarkup:{
hoverDelay:200
},
dynamicBaseEnabled:true,
pageContainer:$(),
allowCrossDomainPages:false,
dialogHashKey:"&ui-state=dialog"
});
})(n,this);
(function($,e,f){
var g={},
oldFind=$.find,
rbrace=/(?:\{[\s\S]*\}|\[[\s\S]*\])$/,
jqmDataRE=/:jqmData\(([^)]*)\)/g;
$.extend($.mobile,{
ns:"",
getAttribute:function(a,b){
var c;
a=a.jquery?a[0]:a;
if(a&&a.getAttribute){
c=a.getAttribute("data-"+$.mobile.ns+b);
}
try{
c=c==="true"?true:
c==="false"?false:
c==="null"?null:
+c+""===c?+c:
rbrace.test(c)?JSON.parse(c):
c;
}catch(err){}
return c;
},
g:g,
nsNormalize:function(a){
return g[a]||
(g[a]=$.camelCase($.mobile.ns+a));
},
closestPageData:function(a){
return a
.closest(":jqmData(role='page'), :jqmData(role='dialog')")
.data("mobile-page");
}
});
$.fn.jqmData=function(a,b){
var c;
if(typeof a!=="undefined"){
if(a){
a=$.mobile.nsNormalize(a);
}
if(arguments.length<2||b===f){
c=this.data(a);
}else{
c=this.data(a,b);
}
}
return c;
};
$.jqmData=function(a,b,c){
var d;
if(typeof b!=="undefined"){
d=$.data(a,b?$.mobile.nsNormalize(b):b,c);
}
return d;
};
$.fn.jqmRemoveData=function(a){
return this.removeData($.mobile.nsNormalize(a));
};
$.jqmRemoveData=function(a,b){
return $.removeData(a,$.mobile.nsNormalize(b));
};
$.find=function(a,b,c,d){
if(a.indexOf(":jqmData")>-1){
a=a.replace(jqmDataRE,"[data-"+($.mobile.ns||"")+"$1]");
}
return oldFind.call(this,a,b,c,d);
};
$.extend($.find,oldFind);
})(n,this);

(function($,g){
var h=0,
runiqueId=/^ui-id-\d+$/;
$.ui=$.ui||{};
$.extend($.ui,{
version:"c0ab71056b936627e8a7821f03c044aec6280a40",
keyCode:{
BACKSPACE:8,
COMMA:188,
DELETE:46,
DOWN:40,
END:35,
ENTER:13,
ESCAPE:27,
HOME:36,
LEFT:37,
PAGE_DOWN:34,
PAGE_UP:33,
PERIOD:190,
RIGHT:39,
SPACE:32,
TAB:9,
UP:38
}
});
$.fn.extend({
focus:(function(d){
return function(b,c){
return typeof b==="number"?
this.each(function(){
var a=this;
setTimeout(function(){
$(a).focus();
if(c){
c.call(a);
}
},b);
}):
d.apply(this,arguments);
};
})($.fn.focus),
scrollParent:function(){
var a;
if(($.ui.ie&&(/(static|relative)/).test(this.css("position")))||(/absolute/).test(this.css("position"))){
a=this.parents().filter(function(){
return(/(relative|absolute|fixed)/).test($.css(this,"position"))&&(/(auto|scroll)/).test($.css(this,"overflow")+$.css(this,"overflow-y")+$.css(this,"overflow-x"));
}).eq(0);
}else{
a=this.parents().filter(function(){
return(/(auto|scroll)/).test($.css(this,"overflow")+$.css(this,"overflow-y")+$.css(this,"overflow-x"));
}).eq(0);
}
return(/fixed/).test(this.css("position"))||!a.length?$(this[0].ownerDocument||B):a;
},
uniqueId:function(){
return this.each(function(){
if(!this.id){
this.id="ui-id-"+(++h);
}
});
},
removeUniqueId:function(){
return this.each(function(){
if(runiqueId.test(this.id)){
$(this).removeAttr("id");
}
});
}
});
function focusable(a,b){
var c,mapName,img,
nodeName=a.nodeName.toLowerCase();
if("area"===nodeName){
c=a.parentNode;
mapName=c.name;
if(!a.href||!mapName||c.nodeName.toLowerCase()!=="map"){
return false;
}
img=$("img[usemap=#"+mapName+"]")[0];
return!!img&&visible(img);
}
return(/input|select|textarea|button|object/.test(nodeName)?
!a.disabled:
"a"===nodeName?
a.href||b:
b)&&
visible(a);
}
function visible(a){
return $.expr.filters.visible(a)&&
!$(a).parents().addBack().filter(function(){
return $.css(this,"visibility")==="hidden";
}).length;
}
$.extend($.expr[":"],{
data:$.expr.createPseudo?
$.expr.createPseudo(function(b){
return function(a){
return!!$.data(a,b);
};
}):
function(a,i,b){
return!!$.data(a,b[3]);
},
focusable:function(a){
return focusable(a,!isNaN($.attr(a,"tabindex")));
},
tabbable:function(a){
var b=$.attr(a,"tabindex"),
isTabIndexNaN=isNaN(b);
return(isTabIndexNaN||b>=0)&&focusable(a,!isTabIndexNaN);
}
});
if(!$("<a>").outerWidth(1).jquery){
$.each(["Width","Height"],function(i,e){
var f=e==="Width"?["Left","Right"]:["Top","Bottom"],
type=e.toLowerCase(),
orig={
innerWidth:$.fn.innerWidth,
innerHeight:$.fn.innerHeight,
outerWidth:$.fn.outerWidth,
outerHeight:$.fn.outerHeight
};
function reduce(a,b,c,d){
$.each(f,function(){
b-=parseFloat($.css(a,"padding"+this))||0;
if(c){
b-=parseFloat($.css(a,"border"+this+"Width"))||0;
}
if(d){
b-=parseFloat($.css(a,"margin"+this))||0;
}
});
return b;
}
$.fn["inner"+e]=function(a){
if(a===g){
return orig["inner"+e].call(this);
}
return this.each(function(){
$(this).css(type,reduce(this,a)+"px");
});
};
$.fn["outer"+e]=function(a,b){
if(typeof a!=="number"){
return orig["outer"+e].call(this,a);
}
return this.each(function(){
$(this).css(type,reduce(this,a,true,b)+"px");
});
};
});
}
if(!$.fn.addBack){
$.fn.addBack=function(a){
return this.add(a==null?
this.prevObject:this.prevObject.filter(a)
);
};
}
if($("<a>").data("a-b","a").removeData("a-b").data("a-b")){
$.fn.removeData=(function(b){
return function(a){
if(arguments.length){
return b.call(this,$.camelCase(a));
}else{
return b.call(this);
}
};
})($.fn.removeData);
}
$.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase());
$.support.selectstart="onselectstart"in B.createElement("div");
$.fn.extend({
disableSelection:function(){
return this.bind(($.support.selectstart?"selectstart":"mousedown")+
".ui-disableSelection",function(a){
a.preventDefault();
});
},
enableSelection:function(){
return this.unbind(".ui-disableSelection");
},
zIndex:function(a){
if(a!==g){
return this.css("zIndex",a);
}
if(this.length){
var b=$(this[0]),position,value;
while(b.length&&b[0]!==B){
position=b.css("position");
if(position==="absolute"||position==="relative"||position==="fixed"){
value=parseInt(b.css("zIndex"),10);
if(!isNaN(value)&&value!==0){
return value;
}
}
b=b.parent();
}
}
return 0;
}
});
$.ui.plugin={
add:function(a,b,c){
var i,
proto=$.ui[a].prototype;
for(i in c){
proto.plugins[i]=proto.plugins[i]||[];
proto.plugins[i].push([b,c[i]]);
}
},
call:function(a,b,c,d){
var i,
set=a.plugins[b];
if(!set){
return;
}
if(!d&&(!a.element[0].parentNode||a.element[0].parentNode.nodeType===11)){
return;
}
for(i=0;i<set.length;i++){
if(a.options[set[i][0]]){
set[i][1].apply(a.element,c);
}
}
}
};
})(n);
(function($,f,g){
var h=function(c,d){
var e=c.parent(),
toolbarsAffectingHeight=[],
externalHeaders=e.children(":jqmData(role='header')"),
internalHeaders=c.children(":jqmData(role='header')"),
externalFooters=e.children(":jqmData(role='footer')"),
internalFooters=c.children(":jqmData(role='footer')");
if(internalHeaders.length===0&&externalHeaders.length>0){
toolbarsAffectingHeight=toolbarsAffectingHeight.concat(externalHeaders.toArray());
}
if(internalFooters.length===0&&externalFooters.length>0){
toolbarsAffectingHeight=toolbarsAffectingHeight.concat(externalFooters.toArray());
}
$.each(toolbarsAffectingHeight,function(a,b){
d-=$(b).outerHeight();
});
return Math.max(0,d);
};
$.extend($.mobile,{
f:$(f),
B:$(B),
keyCode:$.ui.keyCode,
behaviors:{},
silentScroll:function(a){
if($.type(a)!=="number"){
a=$.mobile.defaultHomeScroll;
}
$.event.special.scrollstart.enabled=false;
setTimeout(function(){
f.scrollTo(0,a);
$.mobile.document.trigger("silentscroll",{x:0,y:a});
},20);
setTimeout(function(){
$.event.special.scrollstart.enabled=true;
},150);
},
getClosestBaseUrl:function(a){
var b=$(a).closest(".ui-page").jqmData("url"),
base=$.mobile.path.documentBase.hrefNoHash;
if(!$.mobile.dynamicBaseEnabled||!b||!$.mobile.path.isPath(b)){
b=base;
}
return $.mobile.path.makeUrlAbsolute(b,base);
},
removeActiveLinkClass:function(a){
if(!!$.mobile.activeClickedLink&&
(!$.mobile.activeClickedLink.closest("."+$.mobile.activePageClass).length||
a)){
$.mobile.activeClickedLink.removeClass($.mobile.activeBtnClass);
}
$.mobile.activeClickedLink=null;
},
getInheritedTheme:function(a,b){
var e=a[0],
ltr="",
re=/ui-(bar|body|overlay)-([a-z])\b/,
c,m;
while(e){
c=e.className||"";
if(c&&(m=re.exec(c))&&(ltr=m[2])){
break;
}
e=e.parentNode;
}
return ltr||b||"a";
},
enhanceable:function(a){
return this.haveParents(a,"enhance");
},
hijackable:function(a){
return this.haveParents(a,"ajax");
},
haveParents:function(a,b){
if(!$.mobile.ignoreContentEnabled){
return a;
}
var d=a.length,
$newSet=$(),
e,$element,excluded,
i,c;
for(i=0;i<d;i++){
$element=a.eq(i);
excluded=false;
e=a[i];
while(e){
c=e.getAttribute?e.getAttribute("data-"+$.mobile.ns+b):"";
if(c==="false"){
excluded=true;
break;
}
e=e.parentNode;
}
if(!excluded){
$newSet=$newSet.add($element);
}
}
return $newSet;
},
getScreenHeight:function(){
return f.innerHeight||$.mobile.window.height();
},
resetActivePageHeight:function(a){
var b=$("."+$.mobile.activePageClass),
pageHeight=b.height(),
pageOuterHeight=b.outerHeight(true);
a=h(b,
(typeof a==="number")?a:$.mobile.getScreenHeight());
b.css("min-height",a-(pageOuterHeight-pageHeight));
},
loading:function(){
var a=this.loading._widget||$($.mobile.loader.prototype.defaultHtml).loader(),
returnValue=a.loader.apply(a,arguments);
this.loading._widget=a;
return returnValue;
}
});
$.addDependents=function(a,b){
var c=$(a),
dependents=c.jqmData("dependents")||$();
c.jqmData("dependents",$(dependents).add(b));
};
$.fn.extend({
removeWithDependents:function(){
$.removeWithDependents(this);
},
enhanceWithin:function(){
var c,
widgetElements={},
keepNative=$.mobile.page.prototype.keepNativeSelector(),
that=this;
if($.mobile.nojs){
$.mobile.nojs(this);
}
if($.mobile.links){
$.mobile.links(this);
}
if($.mobile.degradeInputsWithin){
$.mobile.degradeInputsWithin(this);
}
if($.fn.buttonMarkup){
this.find($.fn.buttonMarkup.initSelector).not(keepNative)
.jqmEnhanceable().buttonMarkup();
}
if($.fn.fieldcontain){
this.find(":jqmData(role='fieldcontain')").not(keepNative)
.jqmEnhanceable().fieldcontain();
}
$.each($.mobile.widgets,function(a,constructor){
if(constructor.initSelector){
var b=$.mobile.enhanceable(that.find(constructor.initSelector));
if(b.length>0){
b=b.not(keepNative);
}
if(b.length>0){
widgetElements[constructor.prototype.widgetName]=b;
}
}
});
for(c in widgetElements){
widgetElements[c][c]();
}
return this;
},
addDependents:function(a){
$.addDependents(this,a);
},
getEncodedText:function(){
return $("<a>").text(this.text()).html();
},
jqmEnhanceable:function(){
return $.mobile.enhanceable(this);
},
jqmHijackable:function(){
return $.mobile.hijackable(this);
}
});
$.removeWithDependents=function(a){
var b=$(a);
(b.jqmData("dependents")||$()).remove();
b.remove();
};
$.addDependents=function(a,b){
var c=$(a),
dependents=c.jqmData("dependents")||$();
c.jqmData("dependents",$(dependents).add(b));
};
$.find.matches=function(a,b){
return $.find(a,null,null,b);
};
$.find.matchesSelector=function(a,b){
return $.find(b,null,null,[a]).length>0;
};
})(n,this);

(function($,j){
var k=0,
slice=Array.prototype.slice,
_cleanData=$.cleanData;
$.cleanData=function(a){
for(var i=0,elem;(elem=a[i])!=null;i++){
try{
$(elem).triggerHandler("remove");
}catch(e){}
}
_cleanData(a);
};
$.widget=function(e,f,g){
var h,existingConstructor,constructor,basePrototype,
proxiedPrototype={},
namespace=e.split(".")[0];
e=e.split(".")[1];
h=namespace+"-"+e;
if(!g){
g=f;
f=$.Widget;
}
$.expr[":"][h.toLowerCase()]=function(a){
return!!$.data(a,h);
};
$[namespace]=$[namespace]||{};
existingConstructor=$[namespace][e];
constructor=$[namespace][e]=function(a,b){
if(!this._createWidget){
return new constructor(a,b);
}
if(arguments.length){
this._createWidget(a,b);
}
};
$.extend(constructor,existingConstructor,{
version:g.version,
_proto:$.extend({},g),
_childConstructors:[]
});
basePrototype=new f();
basePrototype.options=$.widget.extend({},basePrototype.options);
$.each(g,function(c,d){
if(!$.isFunction(d)){
proxiedPrototype[c]=d;
return;
}
proxiedPrototype[c]=(function(){
var b=function(){
return f.prototype[c].apply(this,arguments);
},
_superApply=function(a){
return f.prototype[c].apply(this,a);
};
return function(){
var a=this._super,
__superApply=this._superApply,
returnValue;
this._super=b;
this._superApply=_superApply;
returnValue=d.apply(this,arguments);
this._super=a;
this._superApply=__superApply;
return returnValue;
};
})();
});
constructor.prototype=$.widget.extend(basePrototype,{
widgetEventPrefix:existingConstructor?(basePrototype.widgetEventPrefix||e):e
},proxiedPrototype,{
constructor:constructor,
namespace:namespace,
widgetName:e,
widgetFullName:h
});
if(existingConstructor){
$.each(existingConstructor._childConstructors,function(i,a){
var b=a.prototype;
$.widget(b.namespace+"."+b.widgetName,constructor,a._proto);
});
delete existingConstructor._childConstructors;
}else{
f._childConstructors.push(constructor);
}
$.widget.bridge(e,constructor);
return constructor;
};
$.widget.extend=function(a){
var b=slice.call(arguments,1),
inputIndex=0,
inputLength=b.length,
key,
value;
for(;inputIndex<inputLength;inputIndex++){
for(key in b[inputIndex]){
value=b[inputIndex][key];
if(b[inputIndex].hasOwnProperty(key)&&value!==j){
if($.isPlainObject(value)){
a[key]=$.isPlainObject(a[key])?
$.widget.extend({},a[key],value):
$.widget.extend({},value);
}else{
a[key]=value;
}
}
}
}
return a;
};
$.widget.bridge=function(d,e){
var f=e.prototype.widgetFullName||d;
$.fn[d]=function(b){
var c=typeof b==="string",
args=slice.call(arguments,1),
returnValue=this;
b=!c&&args.length?
$.widget.extend.apply(null,[b].concat(args)):
b;
if(c){
this.each(function(){
var a,
instance=$.data(this,f);
if(b==="instance"){
returnValue=instance;
return false;
}
if(!instance){
return $.error("cannot call methods on "+d+" prior to initialization; "+
"attempted to call method '"+b+"'");
}
if(!$.isFunction(instance[b])||b.charAt(0)==="_"){
return $.error("no such method '"+b+"' for "+d+" widget instance");
}
a=instance[b].apply(instance,args);
if(a!==instance&&a!==j){
returnValue=a&&a.jquery?
returnValue.pushStack(a.get()):
a;
return false;
}
});
}else{
this.each(function(){
var a=$.data(this,f);
if(a){
a.option(b||{})._init();
}else{
$.data(this,f,new e(b,this));
}
});
}
return returnValue;
};
};
$.Widget=function(){};
$.Widget._childConstructors=[];
$.Widget.prototype={
widgetName:"widget",
widgetEventPrefix:"",
defaultElement:"<div>",
options:{
disabled:false,
create:null
},
_createWidget:function(b,c){
c=$(c||this.defaultElement||this)[0];
this.element=$(c);
this.uuid=k++;
this.eventNamespace="."+this.widgetName+this.uuid;
this.options=$.widget.extend({},
this.options,
this._getCreateOptions(),
b);
this.bindings=$();
this.hoverable=$();
this.focusable=$();
if(c!==this){
$.data(c,this.widgetFullName,this);
this._on(true,this.element,{
remove:function(a){
if(a.target===c){
this.destroy();
}
}
});
this.document=$(c.style?
c.ownerDocument:
c.document||c);
this.window=$(this.document[0].defaultView||this.document[0].parentWindow);
}
this._create();
this._trigger("create",null,this._getCreateEventData());
this._init();
},
_getCreateOptions:$.noop,
_getCreateEventData:$.noop,
_create:$.noop,
_init:$.noop,
destroy:function(){
this._destroy();
this.element
.unbind(this.eventNamespace)
.removeData(this.widgetFullName)
.removeData($.camelCase(this.widgetFullName));
this.widget()
.unbind(this.eventNamespace)
.removeAttr("aria-disabled")
.removeClass(
this.widgetFullName+"-disabled "+
"ui-state-disabled");
this.bindings.unbind(this.eventNamespace);
this.hoverable.removeClass("ui-state-hover");
this.focusable.removeClass("ui-state-focus");
},
_destroy:$.noop,
widget:function(){
return this.element;
},
option:function(a,b){
var c=a,
parts,
curOption,
i;
if(arguments.length===0){
return $.widget.extend({},this.options);
}
if(typeof a==="string"){
c={};
parts=a.split(".");
a=parts.shift();
if(parts.length){
curOption=c[a]=$.widget.extend({},this.options[a]);
for(i=0;i<parts.length-1;i++){
curOption[parts[i]]=curOption[parts[i]]||{};
curOption=curOption[parts[i]];
}
a=parts.pop();
if(b===j){
return curOption[a]===j?null:curOption[a];
}
curOption[a]=b;
}else{
if(b===j){
return this.options[a]===j?null:this.options[a];
}
c[a]=b;
}
}
this._setOptions(c);
return this;
},
_setOptions:function(a){
var b;
for(b in a){
this._setOption(b,a[b]);
}
return this;
},
_setOption:function(a,b){
this.options[a]=b;
if(a==="disabled"){
this.widget()
.toggleClass(this.widgetFullName+"-disabled",!!b);
this.hoverable.removeClass("ui-state-hover");
this.focusable.removeClass("ui-state-focus");
}
return this;
},
enable:function(){
return this._setOptions({disabled:false});
},
disable:function(){
return this._setOptions({disabled:true});
},
_on:function(d,e,f){
var g,
instance=this;
if(typeof d!=="boolean"){
f=e;
e=d;
d=false;
}
if(!f){
f=e;
e=this.element;
g=this.widget();
}else{
e=g=$(e);
this.bindings=this.bindings.add(e);
}
$.each(f,function(a,b){
function handlerProxy(){
if(!d&&
(instance.options.disabled===true||
$(this).hasClass("ui-state-disabled"))){
return;
}
return(typeof b==="string"?instance[b]:b)
.apply(instance,arguments);
}
if(typeof b!=="string"){
handlerProxy.guid=b.guid=
b.guid||handlerProxy.guid||$.guid++;
}
var c=a.match(/^(\w+)\s*(.*)$/),
eventName=c[1]+instance.eventNamespace,
selector=c[2];
if(selector){
g.delegate(selector,eventName,handlerProxy);
}else{
e.bind(eventName,handlerProxy);
}
});
},
_off:function(a,b){
b=(b||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace;
a.unbind(b).undelegate(b);
},
_delay:function(a,b){
function handlerProxy(){
return(typeof a==="string"?c[a]:a)
.apply(c,arguments);
}
var c=this;
return setTimeout(handlerProxy,b||0);
},
_hoverable:function(b){
this.hoverable=this.hoverable.add(b);
this._on(b,{
mouseenter:function(a){
$(a.currentTarget).addClass("ui-state-hover");
},
mouseleave:function(a){
$(a.currentTarget).removeClass("ui-state-hover");
}
});
},
_focusable:function(b){
this.focusable=this.focusable.add(b);
this._on(b,{
focusin:function(a){
$(a.currentTarget).addClass("ui-state-focus");
},
focusout:function(a){
$(a.currentTarget).removeClass("ui-state-focus");
}
});
},
_trigger:function(a,b,c){
var d,orig,
callback=this.options[a];
c=c||{};
b=$.Event(b);
b.type=(a===this.widgetEventPrefix?
a:
this.widgetEventPrefix+a).toLowerCase();
b.target=this.element[0];
orig=b.originalEvent;
if(orig){
for(d in orig){
if(!(d in b)){
b[d]=orig[d];
}
}
}
this.element.trigger(b,c);
return!($.isFunction(callback)&&
callback.apply(this.element[0],[b].concat(c))===false||
b.isDefaultPrevented());
}
};
$.each({show:"fadeIn",hide:"fadeOut"},function(f,g){
$.Widget.prototype["_"+f]=function(b,c,d){
if(typeof c==="string"){
c={effect:c};
}
var e,
effectName=!c?
f:
c===true||typeof c==="number"?
g:
c.effect||g;
c=c||{};
if(typeof c==="number"){
c={duration:c};
}
e=!$.isEmptyObject(c);
c.complete=d;
if(c.delay){
b.delay(c.delay);
}
if(e&&$.effects&&$.effects.effect[effectName]){
b[f](c);
}else if(effectName!==f&&b[effectName]){
b[effectName](c.duration,c.easing,d);
}else{
b.queue(function(a){
$(this)[f]();
if(d){
d.call(b[0]);
}
a();
});
}
};
});
})(n);
(function($,b){
var d=/[A-Z]/g,
replaceFunction=function(c){
return"-"+c.toLowerCase();
};
$.extend($.Widget.prototype,{
_getCreateOptions:function(){
var a,value,
elem=this.element[0],
options={};
if(!$.mobile.getAttribute(elem,"defaults")){
for(a in this.options){
value=$.mobile.getAttribute(elem,a.replace(d,replaceFunction));
if(value!=null){
options[a]=value;
}
}
}
return options;
}
});
$.mobile.widget=$.Widget;
})(n);
(function($){
var e="ui-loader",$html=$("html");
$.widget("mobile.loader",{
options:{
theme:"a",
textVisible:false,
html:"",
text:"loading"
},
defaultHtml:"<div class='"+e+"'>"+
"<span class='ui-icon-loading'></span>"+
"<h1></h1>"+
"</div>",
fakeFixLoader:function(){
var a=$("."+$.mobile.activeBtnClass).first();
this.element
.css({
top:$.support.scrollTop&&this.window.scrollTop()+this.window.height()/2||
a.length&&a.offset().top||100
});
},
checkLoaderPosition:function(){
var a=this.element.offset(),
scrollTop=this.window.scrollTop(),
screenHeight=$.mobile.getScreenHeight();
if(a.top<scrollTop||(a.top-scrollTop)>screenHeight){
this.element.addClass("ui-loader-fakefix");
this.fakeFixLoader();
this.window
.unbind("scroll",this.checkLoaderPosition)
.bind("scroll",$.proxy(this.fakeFixLoader,this));
}
},
resetHtml:function(){
this.element.html($(this.defaultHtml).html());
},
show:function(a,b,c){
var d,message,loadSettings;
this.resetHtml();
if($.type(a)==="object"){
loadSettings=$.extend({},this.options,a);
a=loadSettings.theme;
}else{
loadSettings=this.options;
a=a||loadSettings.theme;
}
message=b||(loadSettings.text===false?"":loadSettings.text);
$html.addClass("ui-loading");
d=loadSettings.textVisible;
this.element.attr("class",e+
" ui-corner-all ui-body-"+a+
" ui-loader-"+(d||b||a.text?"verbose":"default")+
(loadSettings.textonly||c?" ui-loader-textonly":""));
if(loadSettings.html){
this.element.html(loadSettings.html);
}else{
this.element.find("h1").text(message);
}
this.element.appendTo($.mobile.pageContainer);
this.checkLoaderPosition();
this.window.bind("scroll",$.proxy(this.checkLoaderPosition,this));
},
hide:function(){
$html.removeClass("ui-loading");
if(this.options.text){
this.element.removeClass("ui-loader-fakefix");
}
$.mobile.window.unbind("scroll",this.fakeFixLoader);
$.mobile.window.unbind("scroll",this.checkLoaderPosition);
}
});
})(n,this);

(function($,g,h){
'$:nomunge';var i='hashchange',
doc=B,
fake_onhashchange,
special=$.event.special,
doc_mode=doc.documentMode,
supports_onhashchange='on'+i in g&&(doc_mode===h||doc_mode>7);
function get_fragment(a){
a=a||location.href;
return'#'+a.replace(/^[^#]*#?(.*)$/,'$1');
};
$.fn[i]=function(a){
return a?this.bind(i,a):this.trigger(i);
};
$.fn[i].delay=50;

special[i]=$.extend(special[i],{
setup:function(){
if(supports_onhashchange){return false}
$(fake_onhashchange.start);
},
teardown:function(){
if(supports_onhashchange){return false}
$(fake_onhashchange.stop);
}
});
fake_onhashchange=(function(){
var f={},
timeout_id,
last_hash=get_fragment(),
fn_retval=function(a){return a},
history_set=fn_retval,
history_get=fn_retval;
f.start=function(){
timeout_id||poll();
};
f.stop=function(){
timeout_id&&clearTimeout(timeout_id);
timeout_id=h;
};
function poll(){
var a=get_fragment(),
history_hash=history_get(last_hash);
if(a!==last_hash){
history_set(last_hash=a,history_hash);
$(g).trigger(i);
}else if(history_hash!==last_hash){
location.href=location.href.replace(/#.*/,'')+history_hash;
}
timeout_id=setTimeout(poll,$.fn[i].delay);
};
g.attachEvent&&!g.addEventListener&&!supports_onhashchange&&(function(){
var d,
iframe_src;
f.start=function(){
if(!d){
iframe_src=$.fn[i].src;
iframe_src=iframe_src&&iframe_src+get_fragment();
d=$('<iframe tabindex="-1" title="empty"/>').hide()
.one('load',function(){
iframe_src||history_set(get_fragment());
poll();
})
.attr('src',iframe_src||'javascript:0')
.insertAfter('body')[0].contentWindow;
doc.onpropertychange=function(){
try{
if(event.propertyName==='title'){
d.document.title=doc.title;
}
}catch(e){}
};
}
};
f.stop=fn_retval;
history_get=function(){
return get_fragment(d.location.href);
};
history_set=function(a,b){
var c=d.document,
domain=$.fn[i].domain;
if(a!==b){
c.title=doc.title;
c.open();
domain&&c.write('<script>document.domain="'+domain+'"</script>');
c.close();
d.location.hash=a;
}
};
})();
return f;
})();
})(n,this);
(function($,d){

A.matchMedia=A.matchMedia||(function(a,b){
var c,
docElem=a.documentElement,
refNode=docElem.firstElementChild||docElem.firstChild,
fakeBody=a.createElement("body"),
div=a.createElement("div");
div.id="mq-test-1";
div.style.cssText="position:absolute;top:-100em";
fakeBody.style.background="none";
fakeBody.appendChild(div);
return function(q){
div.innerHTML="&shy;<style media=\""+q+"\"> #mq-test-1 { width: 42px; }</style>";
docElem.insertBefore(fakeBody,refNode);
c=div.offsetWidth===42;
docElem.removeChild(fakeBody);
return{
matches:c,
media:q
};
};
}(B));
$.mobile.media=function(q){
return A.matchMedia(q).matches;
};
})(n);
(function($,a){
var b={
touch:"ontouchend"in B
};
$.mobile.support=$.mobile.support||{};
$.extend($.support,b);
$.extend($.mobile.support,b);
}(n));
(function($,a){
$.extend($.support,{
orientation:"orientation"in A&&"onorientationchange"in A
});
}(n));
(function($,c){
function propExists(a){
var b=a.charAt(0).toUpperCase()+a.substr(1),
props=(a+" "+vendors.join(b+" ")+b).split(" "),
v;
for(v in props){
if(fbCSS[props[v]]!==c){
return true;
}
}
}
var d=$("<body>").prependTo("html"),
fbCSS=d[0].style,
vendors=["Webkit","Moz","O"],
webos="palmGetResource"in A,operamini=A.operamini&&({}).toString.call(A.operamini)==="[object OperaMini]",
bb=A.blackberry&&!propExists("-webkit-transform"),nokiaLTE7_3;
function inlineSVG(){
var w=A,
svg=!!w.document.createElementNS&&!!w.document.createElementNS("http://www.w3.org/2000/svg","svg").createSVGRect&&!(w.opera&&navigator.userAgent.indexOf("Chrome")===-1),
support=function(a){
if(!(a&&svg)){
$("html").addClass("ui-nosvg");
}
},
img=new w.Image();
img.onerror=function(){
support(false);
};
img.onload=function(){
support(img.width===1&&img.height===1);
};
img.src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==";
}
function transform3dTest(){
var a="transform-3d",
ret=$.mobile.media("(-"+vendors.join("-"+a+"),(-")+"-"+a+"),("+a+")"),
el,transforms,t;
if(ret){
return!!ret;
}
el=B.createElement("div");
transforms={
"MozTransform":"-moz-transform",
"transform":"transform"
};
d.append(el);
for(t in transforms){
if(el.style[t]!==c){
el.style[t]="translate3d( 100px, 1px, 1px )";
ret=A.getComputedStyle(el).getPropertyValue(transforms[t]);
}
}
return(!!ret&&ret!=="none");
}
function baseTagTest(){
var a=location.protocol+"//"+location.host+location.pathname+"ui-dir/",
base=$("head base"),
fauxEle=null,
href="",
link,rebase;
if(!base.length){
base=fauxEle=$("<base>",{"href":a}).appendTo("head");
}else{
href=base.attr("href");
}
link=$("<a href='testurl' />").prependTo(d);
rebase=link[0].href;
base[0].href=href||location.pathname;
if(fauxEle){
fauxEle.remove();
}
return rebase.indexOf(a)===0;
}
function cssPointerEventsTest(){
var a=B.createElement("x"),
documentElement=B.documentElement,
getComputedStyle=A.getComputedStyle,
supports;
if(!("pointerEvents"in a.style)){
return false;
}
a.style.pointerEvents="auto";
a.style.pointerEvents="x";
documentElement.appendChild(a);
supports=getComputedStyle&&
getComputedStyle(a,"").pointerEvents==="auto";
documentElement.removeChild(a);
return!!supports;
}
function boundingRect(){
var a=B.createElement("div");
return typeof a.getBoundingClientRect!=="undefined";
}
$.extend($.mobile,{browser:{}});
$.mobile.browser.oldIE=(function(){
var v=3,
div=B.createElement("div"),
a=div.all||[];
do{
div.innerHTML="<!--[if gt IE "+(++v)+"]><br><![endif]-->";
}while(a[0]);
return v>4?v:!v;
})();
function fixedPosition(){
var w=A,
ua=navigator.userAgent,
platform=navigator.platform,
wkmatch=ua.match(/AppleWebKit\/([0-9]+)/),
wkversion=!!wkmatch&&wkmatch[1],
ffmatch=ua.match(/Fennec\/([0-9]+)/),
ffversion=!!ffmatch&&ffmatch[1],
operammobilematch=ua.match(/Opera Mobi\/([0-9]+)/),
omversion=!!operammobilematch&&operammobilematch[1];
if(
((platform.indexOf("iPhone")>-1||platform.indexOf("iPad")>-1||platform.indexOf("iPod")>-1)&&wkversion&&wkversion<534)||
(w.operamini&&({}).toString.call(w.operamini)==="[object OperaMini]")||
(operammobilematch&&omversion<7458)||
(ua.indexOf("Android")>-1&&wkversion&&wkversion<533)||
(ffversion&&ffversion<6)||
("palmGetResource"in A&&wkversion&&wkversion<534)||
(ua.indexOf("MeeGo")>-1&&ua.indexOf("NokiaBrowser/8.5.0")>-1)){
return false;
}
return true;
}
$.extend($.support,{
pushState:"pushState"in history&&
"replaceState"in history&&
!(A.navigator.userAgent.indexOf("Firefox")>=0&&A.top!==A)&&
(A.navigator.userAgent.search(/CriOS/)===-1),
mediaquery:$.mobile.media("only all"),
cssPseudoElement:!!propExists("content"),
touchOverflow:!!propExists("overflowScrolling"),
cssTransform3d:transform3dTest(),
boxShadow:!!propExists("boxShadow")&&!bb,
fixedPosition:fixedPosition(),
scrollTop:("pageXOffset"in A||
"scrollTop"in B.documentElement||
"scrollTop"in d[0])&&!webos&&!operamini,
dynamicBaseTag:baseTagTest(),
cssPointerEvents:cssPointerEventsTest(),
boundingRect:boundingRect(),
inlineSVG:inlineSVG
});
d.remove();
nokiaLTE7_3=(function(){
var a=A.navigator.userAgent;
return a.indexOf("Nokia")>-1&&
(a.indexOf("Symbian/3")>-1||a.indexOf("Series60/5")>-1)&&
a.indexOf("AppleWebKit")>-1&&
a.match(/(BrowserNG|NokiaBrowser)\/7\.[0-3]/);
})();
$.mobile.gradeA=function(){
return(($.support.mediaquery&&$.support.cssPseudoElement)||$.mobile.browser.oldIE&&$.mobile.browser.oldIE>=8)&&($.support.boundingRect||$.fn.jquery.match(/1\.[0-7+]\.[0-9+]?/)!==null);
};
$.mobile.ajaxBlacklist=
A.blackberry&&!A.WebKitPoint||
operamini||
nokiaLTE7_3;
if(nokiaLTE7_3){
$(function(){
$("head link[rel='stylesheet']").attr("rel","alternate stylesheet").attr("rel","stylesheet");
});
}
if(!$.support.boxShadow){
$("html").addClass("ui-noboxshadow");
}
})(n);
(function($,c){
var d=$.mobile.window,self,
dummyFnToInitNavigate=function(){
};
$.event.special.beforenavigate={
setup:function(){
d.on("navigate",dummyFnToInitNavigate);
},
teardown:function(){
d.off("navigate",dummyFnToInitNavigate);
}
};
$.event.special.navigate=self={
bound:false,
pushStateEnabled:true,
originalEventName:c,
isPushStateEnabled:function(){
return $.support.pushState&&
$.mobile.pushStateEnabled===true&&
this.isHashChangeEnabled();
},
isHashChangeEnabled:function(){
return $.mobile.hashListeningEnabled===true;
},
popstate:function(a){
var b=new $.Event("navigate"),
beforeNavigate=new $.Event("beforenavigate"),
state=a.originalEvent.state||{};
beforeNavigate.originalEvent=a;
d.trigger(beforeNavigate);
if(beforeNavigate.isDefaultPrevented()){
return;
}
if(a.historyState){
$.extend(state,a.historyState);
}
b.originalEvent=a;
setTimeout(function(){
d.trigger(b,{
state:state
});
},0);
},
hashchange:function(a){
var b=new $.Event("navigate"),
beforeNavigate=new $.Event("beforenavigate");
beforeNavigate.originalEvent=a;
d.trigger(beforeNavigate);
if(beforeNavigate.isDefaultPrevented()){
return;
}
b.originalEvent=a;
d.trigger(b,{
state:a.hashchangeState||{}
});
},
setup:function(){
if(self.bound){
return;
}
self.bound=true;
if(self.isPushStateEnabled()){
self.originalEventName="popstate";
d.bind("popstate.navigate",self.popstate);
}else if(self.isHashChangeEnabled()){
self.originalEventName="hashchange";
d.bind("hashchange.navigate",self.hashchange);
}
}
};
})(n);
(function($,e){
var f,$base,dialogHashKey="&ui-state=dialog";
$.mobile.path=f={
uiStateKey:"&ui-state",
urlParseRE:/^\s*(((([^:\/#\?]+:)?(?:(\/\/)((?:(([^:@\/#\?]+)(?:\:([^:@\/#\?]+))?)@)?(([^:\/#\?\]\[]+|\[[^\/\]@#?]+\])(?:\:([0-9]+))?))?)?)?((\/?(?:[^\/\?#]+\/+)*)([^\?#]*)))?(\?[^#]+)?)(#.*)?/,
getLocation:function(a){
var b=a?this.parseUrl(a):location,
hash=this.parseUrl(a||location.href).hash;
hash=hash==="#"?"":hash;
return b.protocol+"//"+b.host+b.pathname+b.search+hash;
},
getDocumentUrl:function(a){
return a?$.extend({},f.documentUrl):f.documentUrl.href;
},
parseLocation:function(){
return this.parseUrl(this.getLocation());
},
parseUrl:function(a){
if($.type(a)==="object"){
return a;
}
var b=f.urlParseRE.exec(a||"")||[];
return{
href:b[0]||"",
hrefNoHash:b[1]||"",
hrefNoSearch:b[2]||"",
domain:b[3]||"",
protocol:b[4]||"",
doubleSlash:b[5]||"",
authority:b[6]||"",
username:b[8]||"",
password:b[9]||"",
host:b[10]||"",
hostname:b[11]||"",
port:b[12]||"",
pathname:b[13]||"",
directory:b[14]||"",
filename:b[15]||"",
search:b[16]||"",
hash:b[17]||""
};
},
makePathAbsolute:function(a,b){
var c,
relStack,
i,d;
if(a&&a.charAt(0)==="/"){
return a;
}
a=a||"";
b=b?b.replace(/^\/|(\/[^\/]*|[^\/]+)$/g,""):"";
c=b?b.split("/"):[];
relStack=a.split("/");
for(i=0;i<relStack.length;i++){
d=relStack[i];
switch(d){
case".":
break;
case"..":
if(c.length){
c.pop();
}
break;
default:
c.push(d);
break;
}
}
return"/"+c.join("/");
},
isSameDomain:function(a,b){
return f.parseUrl(a).domain===f.parseUrl(b).domain;
},
isRelativeUrl:function(a){
return f.parseUrl(a).protocol==="";
},
isAbsoluteUrl:function(a){
return f.parseUrl(a).protocol!=="";
},
makeUrlAbsolute:function(a,b){
if(!f.isRelativeUrl(a)){
return a;
}
if(b===e){
b=this.documentBase;
}
var c=f.parseUrl(a),
absObj=f.parseUrl(b),
protocol=c.protocol||absObj.protocol,
doubleSlash=c.protocol?c.doubleSlash:(c.doubleSlash||absObj.doubleSlash),
authority=c.authority||absObj.authority,
hasPath=c.pathname!=="",
pathname=f.makePathAbsolute(c.pathname||absObj.filename,absObj.pathname),
search=c.search||(!hasPath&&absObj.search)||"",
hash=c.hash;
return protocol+doubleSlash+authority+pathname+search+hash;
},
addSearchParams:function(a,b){
var u=f.parseUrl(a),
p=(typeof b==="object")?$.param(b):b,
s=u.search||"?";
return u.hrefNoSearch+s+(s.charAt(s.length-1)!=="?"?"&":"")+p+(u.hash||"");
},
convertUrlToDataUrl:function(a){
var u=f.parseUrl(a);
if(f.isEmbeddedPage(u)){
return u.hash
.split(dialogHashKey)[0]
.replace(/^#/,"")
.replace(/\?.*$/,"");
}else if(f.isSameDomain(u,this.documentBase)){
return u.hrefNoHash.replace(this.documentBase.domain,"").split(dialogHashKey)[0];
}
return A.decodeURIComponent(a);
},
get:function(a){
if(a===e){
a=f.parseLocation().hash;
}
return f.stripHash(a).replace(/[^\/]*\.[^\/*]+$/,"");
},
set:function(a){
location.hash=a;
},
isPath:function(a){
return(/\//).test(a);
},
clean:function(a){
return a.replace(this.documentBase.domain,"");
},
stripHash:function(a){
return a.replace(/^#/,"");
},
stripQueryParams:function(a){
return a.replace(/\?.*$/,"");
},
cleanHash:function(a){
return f.stripHash(a.replace(/\?.*$/,"").replace(dialogHashKey,""));
},
isHashValid:function(a){
return(/^#[^#]+$/).test(a);
},
isExternal:function(a){
var u=f.parseUrl(a);
return u.protocol&&u.domain!==this.documentUrl.domain?true:false;
},
hasProtocol:function(a){
return(/^(:?\w+:)/).test(a);
},
isEmbeddedPage:function(a){
var u=f.parseUrl(a);
if(u.protocol!==""){
return(!this.isPath(u.hash)&&u.hash&&(u.hrefNoHash===this.documentUrl.hrefNoHash||(this.documentBaseDiffers&&u.hrefNoHash===this.documentBase.hrefNoHash)));
}
return(/^#/).test(u.href);
},
squash:function(a,b){
var c,cleanedUrl,search,stateIndex,
isPath=this.isPath(a),
uri=this.parseUrl(a),
preservedHash=uri.hash,
uiState="";
b=b||(f.isPath(a)?f.getLocation():f.getDocumentUrl());
cleanedUrl=isPath?f.stripHash(a):a;
cleanedUrl=f.isPath(uri.hash)?f.stripHash(uri.hash):cleanedUrl;
stateIndex=cleanedUrl.indexOf(this.uiStateKey);
if(stateIndex>-1){
uiState=cleanedUrl.slice(stateIndex);
cleanedUrl=cleanedUrl.slice(0,stateIndex);
}
c=f.makeUrlAbsolute(cleanedUrl,b);
search=this.parseUrl(c).search;
if(isPath){
if(f.isPath(preservedHash)||preservedHash.replace("#","").indexOf(this.uiStateKey)===0){
preservedHash="";
}
if(uiState&&preservedHash.indexOf(this.uiStateKey)===-1){
preservedHash+=uiState;
}
if(preservedHash.indexOf("#")===-1&&preservedHash!==""){
preservedHash="#"+preservedHash;
}
c=f.parseUrl(c);
c=c.protocol+"//"+c.host+c.pathname+search+preservedHash;
}else{
c+=c.indexOf("#")>-1?uiState:"#"+uiState;
}
return c;
},
isPreservableHash:function(a){
return a.replace("#","").indexOf(this.uiStateKey)===0;
},
hashToSelector:function(a){
var b=(a.substring(0,1)==="#");
if(b){
a=a.substring(1);
}
return(b?"#":"")+a.replace(/([!"#$%&'()*+,./:;<=>?@[\]^`{|}~])/g,"\\$1");
},
getFilePath:function(a){
var b="&"+$.mobile.subPageUrlKey;
return a&&a.split(b)[0].split(dialogHashKey)[0];
},
isFirstPageUrl:function(a){
var u=f.parseUrl(f.makeUrlAbsolute(a,this.documentBase)),
samePath=u.hrefNoHash===this.documentUrl.hrefNoHash||
(this.documentBaseDiffers&&
u.hrefNoHash===this.documentBase.hrefNoHash),
fp=$.mobile.firstPage,
fpId=fp&&fp[0]?fp[0].id:e;
return samePath&&
(!u.hash||
u.hash==="#"||
(fpId&&u.hash.replace(/^#/,"")===fpId));
},
isPermittedCrossDomainRequest:function(a,b){
return $.mobile.allowCrossDomainPages&&
(a.protocol==="file:"||a.protocol==="content:")&&
b.search(/^https?:/)!==-1;
}
};
f.documentUrl=f.parseLocation();
$base=$("head").find("base");
f.documentBase=$base.length?
f.parseUrl(f.makeUrlAbsolute($base.attr("href"),f.documentUrl.href)):
f.documentUrl;
f.documentBaseDiffers=(f.documentUrl.hrefNoHash!==f.documentBase.hrefNoHash);
f.getDocumentBase=function(a){
return a?$.extend({},f.documentBase):f.documentBase.href;
};
$.extend($.mobile,{
getDocumentUrl:f.getDocumentUrl,
getDocumentBase:f.getDocumentBase
});
})(n);
(function($,e){
$.mobile.History=function(a,b){
this.stack=a||[];
this.activeIndex=b||0;
};
$.extend($.mobile.History.prototype,{
getActive:function(){
return this.stack[this.activeIndex];
},
getLast:function(){
return this.stack[this.previousIndex];
},
getNext:function(){
return this.stack[this.activeIndex+1];
},
getPrev:function(){
return this.stack[this.activeIndex-1];
},
add:function(a,b){
b=b||{};
if(this.getNext()){
this.clearForward();
}
if(b.hash&&b.hash.indexOf("#")===-1){
b.hash="#"+b.hash;
}
b.url=a;
this.stack.push(b);
this.activeIndex=this.stack.length-1;
},
clearForward:function(){
this.stack=this.stack.slice(0,this.activeIndex+1);
},
find:function(a,b,c){
b=b||this.stack;
var d,i,length=b.length,index;
for(i=0;i<length;i++){
d=b[i];
if(decodeURIComponent(a)===decodeURIComponent(d.url)||
decodeURIComponent(a)===decodeURIComponent(d.hash)){
index=i;
if(c){
return index;
}
}
}
return index;
},
closest:function(b){
var c,a=this.activeIndex;
c=this.find(b,this.stack.slice(0,a));
if(c===e){
c=this.find(b,this.stack.slice(a),true);
c=c===e?c:c+a;
}
return c;
},
direct:function(b){
var c=this.closest(b.url),a=this.activeIndex;
if(c!==e){
this.activeIndex=c;
this.previousIndex=a;
}
if(c<a){
(b.present||b.back||$.noop)(this.getActive(),"back");
}else if(c>a){
(b.present||b.forward||$.noop)(this.getActive(),"forward");
}else if(c===e&&b.missing){
b.missing(this.getActive());
}
}
});
})(n);
(function($,e){
var f=$.mobile.path,
initialHref=location.href;
$.mobile.Navigator=function(a){
this.history=a;
this.ignoreInitialHashChange=true;
$.mobile.window.bind({
"popstate.history":$.proxy(this.popstate,this),
"hashchange.history":$.proxy(this.hashchange,this)
});
};
$.extend($.mobile.Navigator.prototype,{
squash:function(a,b){
var c,href,hash=f.isPath(a)?f.stripHash(a):a;
href=f.squash(a);
c=$.extend({
hash:hash,
a:href
},b);
A.history.replaceState(c,c.title||B.title,href);
return c;
},
hash:function(a,b){
var c,loc,hash,resolved;
c=f.parseUrl(a);
loc=f.parseLocation();
if(loc.pathname+loc.search===c.pathname+c.search){
hash=c.hash?c.hash:c.pathname+c.search;
}else if(f.isPath(a)){
resolved=f.parseUrl(b);
hash=resolved.pathname+resolved.search+(f.isPreservableHash(resolved.hash)?resolved.hash.replace("#",""):"");
}else{
hash=a;
}
return hash;
},
go:function(a,b,c){
var d,href,hash,popstateEvent,
isPopStateEvent=$.event.special.navigate.isPushStateEnabled();
href=f.squash(a);
hash=this.hash(a,href);
if(c&&hash!==f.stripHash(f.parseLocation().hash)){
this.preventNextHashChange=c;
}
this.preventHashAssignPopState=true;
A.location.hash=hash;
this.preventHashAssignPopState=false;
d=$.extend({
a:href,
hash:hash,
title:B.title
},b);
if(isPopStateEvent){
popstateEvent=new $.Event("popstate");
popstateEvent.originalEvent={
type:"popstate",
d:null
};
this.squash(a,d);
if(!c){
this.ignorePopState=true;
$.mobile.window.trigger(popstateEvent);
}
}
this.history.add(d.url,d);
},
popstate:function(c){
var d,state;
if(!$.event.special.navigate.isPushStateEnabled()){
return;
}
if(this.preventHashAssignPopState){
this.preventHashAssignPopState=false;
c.stopImmediatePropagation();
return;
}
if(this.ignorePopState){
this.ignorePopState=false;
return;
}
if(!c.originalEvent.state&&
this.history.stack.length===1&&
this.ignoreInitialHashChange){
this.ignoreInitialHashChange=false;
if(location.href===initialHref){
c.preventDefault();
return;
}
}
d=f.parseLocation().hash;
if(!c.originalEvent.state&&d){
state=this.squash(d);
this.history.add(state.url,state);
c.historyState=state;
return;
}
this.history.direct({
url:(c.originalEvent.state||{}).url||d,
present:function(a,b){
c.historyState=$.extend({},a);
c.historyState.direction=b;
}
});
},
hashchange:function(c){
var d,hash;
if(!$.event.special.navigate.isHashChangeEnabled()||
$.event.special.navigate.isPushStateEnabled()){
return;
}
if(this.preventNextHashChange){
this.preventNextHashChange=false;
c.stopImmediatePropagation();
return;
}
d=this.history;
hash=f.parseLocation().hash;
this.history.direct({
url:hash,
present:function(a,b){
c.hashchangeState=$.extend({},a);
c.hashchangeState.direction=b;
},
missing:function(){
d.add(hash,{
hash:hash,
title:B.title
});
}
});
}
});
})(n);
(function($,d){
$.mobile.navigate=function(a,b,c){
$.mobile.navigate.navigator.go(a,b,c);
};
$.mobile.navigate.history=new $.mobile.History();
$.mobile.navigate.navigator=new $.mobile.Navigator($.mobile.navigate.history);
var e=$.mobile.path.parseLocation();
$.mobile.navigate.history.add(e.href,{hash:e.hash});
})(n);
(function($,e){
var f={
"animation":{},
"transition":{}
},
testElement=B.createElement("a"),
vendorPrefixes=["","webkit-","moz-","o-"];
$.each(["animation","transition"],function(i,b){
var c=(i===0)?b+"-"+"name":b;
$.each(vendorPrefixes,function(j,a){
if(testElement.style[$.camelCase(a+c)]!==e){
f[b]["prefix"]=a;
return false;
}
});
f[b]["duration"]=
$.camelCase(f[b]["prefix"]+b+"-"+"duration");
f[b]["event"]=
$.camelCase(f[b]["prefix"]+b+"-"+"end");
if(f[b]["prefix"]===""){
f[b]["event"]=f[b]["event"].toLowerCase();
}
});
$.support.cssTransitions=(f["transition"]["prefix"]!==e);
$.support.cssAnimations=(f["animation"]["prefix"]!==e);
$(testElement).remove();
$.fn.animationComplete=function(a,b,c){
var d,duration,
that=this,
animationType=(!b||b==="animation")?"animation":"transition";
if(($.support.cssTransitions&&animationType==="transition")||
($.support.cssAnimations&&animationType==="animation")){
if(c===e){
if($(this).context!==B){
duration=parseFloat(
$(this).css(f[animationType].duration)
)*3000;
}
if(duration===0||duration===e||isNaN(duration)){
duration=$.fn.animationComplete.defaultDuration;
}
}
d=setTimeout(function(){
$(that).off(f[animationType].event);
a.apply(that);
},duration);
return $(this).one(f[animationType].event,function(){
clearTimeout(d);
a.call(this,arguments);
});
}else{
setTimeout($.proxy(a,this),0);
return $(this);
}
};
$.fn.animationComplete.defaultDuration=1000;
})(n);
(function($,f,g,h){
var l="virtualMouseBindings",
touchTargetPropertyName="virtualTouchID",
virtualEventNames="vmouseover vmousedown vmousemove vmouseup vclick vmouseout vmousecancel".split(" "),
touchEventProps="clientX clientY pageX pageY screenX screenY".split(" "),
mouseHookProps=$.event.mouseHooks?$.event.mouseHooks.props:[],
mouseEventProps=$.event.props.concat(mouseHookProps),
activeDocHandlers={},
resetTimerID=0,
startX=0,
startY=0,
didScroll=false,
clickBlockList=[],
blockMouseTriggers=false,
blockTouchTriggers=false,
eventCaptureSupported="addEventListener"in g,
$document=$(g),
nextTouchID=1,
lastTouchID=0,threshold,
i;
$.vmouse={
moveDistanceThreshold:10,
clickDistanceThreshold:10,
resetTimerDuration:1500
};
function getNativeEvent(a){
while(a&&typeof a.originalEvent!=="undefined"){
a=a.originalEvent;
}
return a;
}
function createVirtualEvent(a,b){
var t=a.type,
oe,props,ne,prop,ct,touch,i,j,len;
a=$.Event(a);
a.type=b;
oe=a.originalEvent;
props=$.event.props;
if(t.search(/^(mouse|click)/)>-1){
props=mouseEventProps;
}
if(oe){
for(i=props.length,prop;i;){
prop=props[--i];
a[prop]=oe[prop];
}
}
if(t.search(/mouse(down|up)|click/)>-1&&!a.which){
a.which=1;
}
if(t.search(/^touch/)!==-1){
ne=getNativeEvent(oe);
t=ne.touches;
ct=ne.changedTouches;
touch=(t&&t.length)?t[0]:((ct&&ct.length)?ct[0]:h);
if(touch){
for(j=0,len=touchEventProps.length;j<len;j++){
prop=touchEventProps[j];
a[prop]=touch[prop];
}
}
}
return a;
}
function getVirtualBindingFlags(a){
var c={},
b,k;
while(a){
b=$.data(a,l);
for(k in b){
if(b[k]){
c[k]=c.hasVirtualBinding=true;
}
}
a=a.parentNode;
}
return c;
}
function getClosestElementWithVirtualBinding(a,c){
var b;
while(a){
b=$.data(a,l);
if(b&&(!c||b[c])){
return a;
}
a=a.parentNode;
}
return null;
}
function enableTouchBindings(){
blockTouchTriggers=false;
}
function disableTouchBindings(){
blockTouchTriggers=true;
}
function enableMouseBindings(){
lastTouchID=0;
clickBlockList.length=0;
blockMouseTriggers=false;
disableTouchBindings();
}
function disableMouseBindings(){
enableTouchBindings();
}
function startResetTimer(){
clearResetTimer();
resetTimerID=setTimeout(function(){
resetTimerID=0;
enableMouseBindings();
},$.vmouse.resetTimerDuration);
}
function clearResetTimer(){
if(resetTimerID){
clearTimeout(resetTimerID);
resetTimerID=0;
}
}
function triggerVirtualEvent(a,b,c){
var d;
if((c&&c[a])||
(!c&&getClosestElementWithVirtualBinding(b.target,a))){
d=createVirtualEvent(b,a);
$(b.target).trigger(d);
}
return d;
}
function mouseEventCallback(a){
var b=$.data(a.target,touchTargetPropertyName),
ve;
if(!blockMouseTriggers&&(!lastTouchID||lastTouchID!==b)){
ve=triggerVirtualEvent("v"+a.type,a);
if(ve){
if(ve.isDefaultPrevented()){
a.preventDefault();
}
if(ve.isPropagationStopped()){
a.stopPropagation();
}
if(ve.isImmediatePropagationStopped()){
a.stopImmediatePropagation();
}
}
}
}
function handleTouchStart(a){
var b=getNativeEvent(a).touches,
target,flags,t;
if(b&&b.length===1){
target=a.target;
flags=getVirtualBindingFlags(target);
if(flags.hasVirtualBinding){
lastTouchID=nextTouchID++;
$.data(target,touchTargetPropertyName,lastTouchID);
clearResetTimer();
disableMouseBindings();
didScroll=false;
t=getNativeEvent(a).touches[0];
startX=t.pageX;
startY=t.pageY;
triggerVirtualEvent("vmouseover",a,flags);
triggerVirtualEvent("vmousedown",a,flags);
}
}
}
function handleScroll(a){
if(blockTouchTriggers){
return;
}
if(!didScroll){
triggerVirtualEvent("vmousecancel",a,getVirtualBindingFlags(a.target));
}
didScroll=true;
startResetTimer();
}
function handleTouchMove(a){
if(blockTouchTriggers){
return;
}
var t=getNativeEvent(a).touches[0],
didCancel=didScroll,
moveThreshold=$.vmouse.moveDistanceThreshold,
flags=getVirtualBindingFlags(a.target);
didScroll=didScroll||
(Math.abs(t.pageX-startX)>moveThreshold||
Math.abs(t.pageY-startY)>moveThreshold);
if(didScroll&&!didCancel){
triggerVirtualEvent("vmousecancel",a,flags);
}
triggerVirtualEvent("vmousemove",a,flags);
startResetTimer();
}
function handleTouchEnd(a){
if(blockTouchTriggers){
return;
}
disableTouchBindings();
var b=getVirtualBindingFlags(a.target),
ve,t;
triggerVirtualEvent("vmouseup",a,b);
if(!didScroll){
ve=triggerVirtualEvent("vclick",a,b);
if(ve&&ve.isDefaultPrevented()){
t=getNativeEvent(a).changedTouches[0];
clickBlockList.push({
touchID:lastTouchID,
x:t.clientX,
y:t.clientY
});
blockMouseTriggers=true;
}
}
triggerVirtualEvent("vmouseout",a,b);
didScroll=false;
startResetTimer();
}
function hasVirtualBindings(a){
var b=$.data(a,l),
k;
if(b){
for(k in b){
if(b[k]){
return true;
}
}
}
return false;
}
function dummyMouseHandler(){}
function getSpecialEventObject(b){
var c=b.substr(1);
return{
setup:function(){
if(!hasVirtualBindings(this)){
$.data(this,l,{});
}
var a=$.data(this,l);
a[b]=true;
activeDocHandlers[b]=(activeDocHandlers[b]||0)+1;
if(activeDocHandlers[b]===1){
$document.bind(c,mouseEventCallback);
}
$(this).bind(c,dummyMouseHandler);
if(eventCaptureSupported){
activeDocHandlers["touchstart"]=(activeDocHandlers["touchstart"]||0)+1;
if(activeDocHandlers["touchstart"]===1){
$document.bind("touchstart",handleTouchStart)
.bind("touchend",handleTouchEnd)
.bind("touchmove",handleTouchMove)
.bind("scroll",handleScroll);
}
}
},
teardown:function(){
--activeDocHandlers[b];
if(!activeDocHandlers[b]){
$document.unbind(c,mouseEventCallback);
}
if(eventCaptureSupported){
--activeDocHandlers["touchstart"];
if(!activeDocHandlers["touchstart"]){
$document.unbind("touchstart",handleTouchStart)
.unbind("touchmove",handleTouchMove)
.unbind("touchend",handleTouchEnd)
.unbind("scroll",handleScroll);
}
}
var a=$(this),
bindings=$.data(this,l);
if(bindings){
bindings[b]=false;
}
a.unbind(c,dummyMouseHandler);
if(!hasVirtualBindings(this)){
a.removeData(l);
}
}
};
}
for(i=0;i<virtualEventNames.length;i++){
$.event.special[virtualEventNames[i]]=getSpecialEventObject(virtualEventNames[i]);
}
if(eventCaptureSupported){
g.addEventListener("click",function(e){
var a=clickBlockList.length,
target=e.target,
x,y,ele,i,o,touchID;
if(a){
x=e.clientX;
y=e.clientY;
threshold=$.vmouse.clickDistanceThreshold;
ele=target;
while(ele){
for(i=0;i<a;i++){
o=clickBlockList[i];
touchID=0;
if((ele===target&&Math.abs(o.x-x)<threshold&&Math.abs(o.y-y)<threshold)||
$.data(ele,touchTargetPropertyName)===o.touchID){
e.preventDefault();
e.stopPropagation();
return;
}
}
ele=ele.parentNode;
}
}
},true);
}
})(n,A,B);
(function($,f,g){
var h=$(B),
supportTouch=$.mobile.support.touch,
scrollEvent="touchmove scroll",
touchStartEvent=supportTouch?"touchstart":"mousedown",
touchStopEvent=supportTouch?"touchend":"mouseup",
touchMoveEvent=supportTouch?"touchmove":"mousemove";
$.each(("touchstart touchmove touchend "+
"tap taphold "+
"swipe swipeleft swiperight "+
"scrollstart scrollstop").split(" "),function(i,b){
$.fn[b]=function(a){
return a?this.bind(b,a):this.trigger(b);
};
if($.attrFn){
$.attrFn[b]=true;
}
});
function triggerCustomEvent(a,b,c,d){
var e=c.type;
c.type=b;
if(d){
$.event.trigger(c,g,a);
}else{
$.event.dispatch.call(a,c);
}
c.type=e;
}
$.event.special.scrollstart={
enabled:true,
setup:function(){
var c=this,
$this=$(c),
scrolling,
timer;
function trigger(a,b){
scrolling=b;
triggerCustomEvent(c,scrolling?"scrollstart":"scrollstop",a);
}
$this.bind(scrollEvent,function(a){
if(!$.event.special.scrollstart.enabled){
return;
}
if(!scrolling){
trigger(a,true);
}
clearTimeout(timer);
timer=setTimeout(function(){
trigger(a,false);
},50);
});
},
teardown:function(){
$(this).unbind(scrollEvent);
}
};
$.event.special.tap={
tapholdThreshold:750,
emitTapOnTaphold:true,
setup:function(){
var d=this,
$this=$(d),
isTaphold=false;
$this.bind("vmousedown",function(b){
isTaphold=false;
if(b.which&&b.which!==1){
return false;
}
var c=b.target,
timer;
function clearTapTimer(){
clearTimeout(timer);
}
function clearTapHandlers(){
clearTapTimer();
$this.unbind("vclick",clickHandler)
.unbind("vmouseup",clearTapTimer);
h.unbind("vmousecancel",clearTapHandlers);
}
function clickHandler(a){
clearTapHandlers();
if(!isTaphold&&c===a.target){
triggerCustomEvent(d,"tap",a);
}else if(isTaphold){
a.stopPropagation();
}
}
$this.bind("vmouseup",clearTapTimer)
.bind("vclick",clickHandler);
h.bind("vmousecancel",clearTapHandlers);
timer=setTimeout(function(){
if(!$.event.special.tap.emitTapOnTaphold){
isTaphold=true;
}
triggerCustomEvent(d,"taphold",$.Event("taphold",{target:c}));
},$.event.special.tap.tapholdThreshold);
});
},
teardown:function(){
$(this).unbind("vmousedown").unbind("vclick").unbind("vmouseup");
h.unbind("vmousecancel");
}
};
$.event.special.swipe={
scrollSupressionThreshold:30,
durationThreshold:1000,
horizontalDistanceThreshold:30,
verticalDistanceThreshold:30,
getLocation:function(a){
var b=f.pageXOffset,
winPageY=f.pageYOffset,
x=a.clientX,
y=a.clientY;
if(a.pageY===0&&Math.floor(y)>Math.floor(a.pageY)||
a.pageX===0&&Math.floor(x)>Math.floor(a.pageX)){
x=x-b;
y=y-winPageY;
}else if(y<(a.pageY-winPageY)||x<(a.pageX-b)){
x=a.pageX-b;
y=a.pageY-winPageY;
}
return{
x:x,
y:y
};
},
start:function(a){
var b=a.originalEvent.touches?
a.originalEvent.touches[0]:a,
location=$.event.special.swipe.getLocation(b);
return{
time:(new Date()).getTime(),
coords:[location.x,location.y],
origin:$(a.target)
};
},
stop:function(a){
var b=a.originalEvent.touches?
a.originalEvent.touches[0]:a,
location=$.event.special.swipe.getLocation(b);
return{
time:(new Date()).getTime(),
coords:[location.x,location.y]
};
},
handleSwipe:function(a,b,c,d){
if(b.time-a.time<$.event.special.swipe.durationThreshold&&
Math.abs(a.coords[0]-b.coords[0])>$.event.special.swipe.horizontalDistanceThreshold&&
Math.abs(a.coords[1]-b.coords[1])<$.event.special.swipe.verticalDistanceThreshold){
var e=a.coords[0]>b.coords[0]?"swipeleft":"swiperight";
triggerCustomEvent(c,"swipe",$.Event("swipe",{target:d,swipestart:a,swipestop:b}),true);
triggerCustomEvent(c,e,$.Event(e,{target:d,swipestart:a,swipestop:b}),true);
return true;
}
return false;
},
eventInProgress:false,
setup:function(){
var d,
thisObject=this,
$this=$(thisObject),
context={};
d=$.data(this,"mobile-events");
if(!d){
d={length:0};
$.data(this,"mobile-events",d);
}
d.length++;
d.swipe=context;
context.start=function(b){
if($.event.special.swipe.eventInProgress){
return;
}
$.event.special.swipe.eventInProgress=true;
var c,
start=$.event.special.swipe.start(b),
origTarget=b.target,
emitted=false;
context.move=function(a){
if(!start){
return;
}
c=$.event.special.swipe.stop(a);
if(!emitted){
emitted=$.event.special.swipe.handleSwipe(start,c,thisObject,origTarget);
if(emitted){
$.event.special.swipe.eventInProgress=false;
}
}
if(Math.abs(start.coords[0]-c.coords[0])>$.event.special.swipe.scrollSupressionThreshold){
a.preventDefault();
}
};
context.stop=function(){
emitted=true;
$.event.special.swipe.eventInProgress=false;
h.off(touchMoveEvent,context.move);
context.move=null;
};
h.on(touchMoveEvent,context.move)
.one(touchStopEvent,context.stop);
};
$this.on(touchStartEvent,context.start);
},
teardown:function(){
var a,context;
a=$.data(this,"mobile-events");
if(a){
context=a.swipe;
delete a.swipe;
a.length--;
if(a.length===0){
$.removeData(this,"mobile-events");
}
}
if(context){
if(context.start){
$(this).off(touchStartEvent,context.start);
}
if(context.move){
h.off(touchMoveEvent,context.move);
}
if(context.stop){
h.off(touchStopEvent,context.stop);
}
}
}
};
$.each({
scrollstop:"scrollstart",
taphold:"tap",
swipeleft:"swipe",
swiperight:"swipe"
},function(a,b){
$.event.special[a]={
setup:function(){
$(this).bind(b,$.noop);
},
teardown:function(){
$(this).unbind(b);
}
};
});
})(n,this);
(function($){
$.event.special.throttledresize={
setup:function(){
$(this).bind("resize",handler);
},
teardown:function(){
$(this).unbind("resize",handler);
}
};
var a=250,
handler=function(){
curr=(new Date()).getTime();
diff=curr-lastCall;
if(diff>=a){
lastCall=curr;
$(this).trigger("throttledresize");
}else{
if(heldCall){
clearTimeout(heldCall);
}
heldCall=setTimeout(handler,a-diff);
}
},
lastCall=0,
heldCall,
curr,
diff;
})(n);
(function($,d){
var e=$(d),
event_name="orientationchange",
get_orientation,
last_orientation,
initial_orientation_is_landscape,
initial_orientation_is_default,
portrait_map={"0":true,"180":true},
ww,wh,landscape_threshold;
if($.support.orientation){
ww=d.innerWidth||e.width();
wh=d.innerHeight||e.height();
landscape_threshold=50;
initial_orientation_is_landscape=ww>wh&&(ww-wh)>landscape_threshold;
initial_orientation_is_default=portrait_map[d.orientation];
if((initial_orientation_is_landscape&&initial_orientation_is_default)||(!initial_orientation_is_landscape&&!initial_orientation_is_default)){
portrait_map={"-90":true,"90":true};
}
}
$.event.special.orientationchange=$.extend({},$.event.special.orientationchange,{
setup:function(){
if($.support.orientation&&!$.event.special.orientationchange.disabled){
return false;
}
last_orientation=get_orientation();
e.bind("throttledresize",handler);
},
teardown:function(){
if($.support.orientation&&!$.event.special.orientationchange.disabled){
return false;
}
e.unbind("throttledresize",handler);
},
add:function(b){
var c=b.handler;
b.handler=function(a){
a.orientation=get_orientation();
return c.apply(this,arguments);
};
}
});
function handler(){
var a=get_orientation();
if(a!==last_orientation){
last_orientation=a;
e.trigger(event_name);
}
}
$.event.special.orientationchange.orientation=get_orientation=function(){
var a=true,elem=B.documentElement;
if($.support.orientation){
a=portrait_map[d.orientation];
}else{
a=elem&&elem.clientWidth/elem.clientHeight<1.1;
}
return a?"portrait":"landscape";
};
$.fn[event_name]=function(a){
return a?this.bind(event_name,a):this.trigger(event_name);
};
if($.attrFn){
$.attrFn[event_name]=true;
}
}(n,this));
(function($,f){
var g=$("head").children("base"),
base={
element:(g.length?g:
$("<base>",{href:$.mobile.path.documentBase.hrefNoHash}).prependTo($("head"))),
linkSelector:"[src], link[href], a[rel='external'], :jqmData(ajax='false'), a[target]",
set:function(a){
if(!$.mobile.dynamicBaseEnabled){
return;
}
if($.support.dynamicBaseTag){
base.element.attr("href",
$.mobile.path.makeUrlAbsolute(a,$.mobile.path.documentBase));
}
},
rewrite:function(c,d){
var e=$.mobile.path.get(c);
d.find(base.linkSelector).each(function(i,a){
var b=$(a).is("[href]")?"href":
$(a).is("[src]")?"src":"action",
thisUrl=$(a).attr(b);
thisUrl=thisUrl.replace(location.protocol+"//"+
location.host+location.pathname,"");
if(!/^(\w+:|#|\/)/.test(thisUrl)){
$(a).attr(b,e+thisUrl);
}
});
},
reset:function(){
base.element.attr("href",$.mobile.path.documentBase.hrefNoSearch);
}
};
$.mobile.base=base;
})(n);
(function($,f){
$.mobile.widgets={};
var g=$.widget,
keepNativeFactoryDefault=$.mobile.keepNative;
$.widget=(function(a){
return function(){
var constructor=a.apply(this,arguments),
name=constructor.prototype.widgetName;
constructor.initSelector=((constructor.prototype.initSelector!==f)?
constructor.prototype.initSelector:":jqmData(role='"+name+"')");
$.mobile.widgets[name]=constructor;
return constructor;
};
})($.widget);
$.extend($.widget,g);
$.mobile.document.on("create",function(a){
$(a.target).enhanceWithin();
});
$.widget("mobile.page",{
options:{
theme:"a",
domCache:false,
keepNativeDefault:$.mobile.keepNative,
contentTheme:null,
enhanced:false
},
_createWidget:function(){
$.Widget.prototype._createWidget.apply(this,arguments);
this._trigger("init");
},
_create:function(){
if(this._trigger("beforecreate")===false){
return false;
}
if(!this.options.enhanced){
this._enhance();
}
this._on(this.element,{
pagebeforehide:"removeContainerBackground",
pagebeforeshow:"_handlePageBeforeShow"
});
this.element.enhanceWithin();
if($.mobile.getAttribute(this.element[0],"role")==="dialog"&&$.mobile.dialog){
this.element.dialog();
}
},
_enhance:function(){
var b="data-"+$.mobile.ns,
self=this;
if(this.options.role){
this.element.attr("data-"+$.mobile.ns+"role",this.options.role);
}
this.element
.attr("tabindex","0")
.addClass("ui-page ui-page-theme-"+this.options.theme);
this.element.find("["+b+"role='content']").each(function(){
var a=$(this),
theme=this.getAttribute(b+"theme")||f;
self.options.contentTheme=theme||self.options.contentTheme||(self.options.dialog&&self.options.theme)||(self.element.jqmData("role")==="dialog"&&self.options.theme);
a.addClass("ui-content");
if(self.options.contentTheme){
a.addClass("ui-body-"+(self.options.contentTheme));
}
a.attr("role","main").addClass("ui-content");
});
},
bindRemove:function(c){
var d=this.element;
if(!d.data("mobile-page").options.domCache&&
d.is(":jqmData(external-page='true')")){
d.bind("pagehide.remove",c||function(e,a){
if(!a.samePage){
var b=$(this),
prEvent=new $.Event("pageremove");
b.trigger(prEvent);
if(!prEvent.isDefaultPrevented()){
b.removeWithDependents();
}
}
});
}
},
_setOptions:function(o){
if(o.theme!==f){
this.element.removeClass("ui-page-theme-"+this.options.theme).addClass("ui-page-theme-"+o.theme);
}
if(o.contentTheme!==f){
this.element.find("[data-"+$.mobile.ns+"='content']").removeClass("ui-body-"+this.options.contentTheme)
.addClass("ui-body-"+o.contentTheme);
}
},
_handlePageBeforeShow:function(){
this.setContainerBackground();
},
removeContainerBackground:function(){
this.element.closest(":mobile-pagecontainer").pagecontainer({"theme":"none"});
},
setContainerBackground:function(a){
this.element.parent().pagecontainer({"theme":a||this.options.theme});
},
keepNativeSelector:function(){
var a=this.options,
keepNative=$.trim(a.keepNative||""),
globalValue=$.trim($.mobile.keepNative),
optionValue=$.trim(a.keepNativeDefault),
newDefault=(keepNativeFactoryDefault===globalValue?
"":globalValue),
oldDefault=(newDefault===""?optionValue:"");
return((keepNative?[keepNative]:[])
.concat(newDefault?[newDefault]:[])
.concat(oldDefault?[oldDefault]:[])
.join(", "));
}
});
})(n);
(function($,j){
$.widget("mobile.pagecontainer",{
options:{
theme:"a"
},
initSelector:false,
_create:function(){
this.setLastScrollEnabled=true;
this._on(this.window,{
navigate:"_disableRecordScroll",
scrollstop:"_delayedRecordScroll"
});
this._on(this.window,{navigate:"_filterNavigateEvents"});
this._on({pagechange:"_afterContentChange"});
this.window.one("navigate",$.proxy(function(){
this.setLastScrollEnabled=true;
},this));
},
_setOptions:function(a){
if(a.theme!==j&&a.theme!=="none"){
this.element.removeClass("ui-overlay-"+this.options.theme)
.addClass("ui-overlay-"+a.theme);
}else if(a.theme!==j){
this.element.removeClass("ui-overlay-"+this.options.theme);
}
this._super(a);
},
_disableRecordScroll:function(){
this.setLastScrollEnabled=false;
},
_enableRecordScroll:function(){
this.setLastScrollEnabled=true;
},
_afterContentChange:function(){
this.setLastScrollEnabled=true;
this._off(this.window,"scrollstop");
this._on(this.window,{scrollstop:"_delayedRecordScroll"});
},
_recordScroll:function(){
if(!this.setLastScrollEnabled){
return;
}
var a=this._getActiveHistory(),
currentScroll,minScroll,defaultScroll;
if(a){
currentScroll=this._getScroll();
minScroll=this._getMinScroll();
defaultScroll=this._getDefaultScroll();
a.lastScroll=currentScroll<minScroll?defaultScroll:currentScroll;
}
},
_delayedRecordScroll:function(){
setTimeout($.proxy(this,"_recordScroll"),100);
},
_getScroll:function(){
return this.window.scrollTop();
},
_getMinScroll:function(){
return $.mobile.minScrollBack;
},
_getDefaultScroll:function(){
return $.mobile.defaultHomeScroll;
},
_filterNavigateEvents:function(e,a){
var b;
if(e.originalEvent&&e.originalEvent.isDefaultPrevented()){
return;
}
b=e.originalEvent.type.indexOf("hashchange")>-1?a.state.hash:a.state.url;
if(!b){
b=this._getHash();
}
if(!b||b==="#"||b.indexOf("#"+$.mobile.path.uiStateKey)===0){
b=location.href;
}
this._handleNavigate(b,a.state);
},
_getHash:function(){
return $.mobile.path.parseLocation().hash;
},
getActivePage:function(){
return this.activePage;
},
_getInitialContent:function(){
return $.mobile.firstPage;
},
_getHistory:function(){
return $.mobile.navigate.history;
},
_getActiveHistory:function(){
return $.mobile.navigate.history.getActive();
},
_getDocumentBase:function(){
return $.mobile.path.documentBase;
},
back:function(){
this.go(-1);
},
forward:function(){
this.go(1);
},
go:function(a){
if($.mobile.hashListeningEnabled){
A.history.go(a);
}else{
var b=$.mobile.navigate.history.activeIndex,
index=b+parseInt(a,10),
url=$.mobile.navigate.history.stack[index].url,
direction=(a>=1)?"forward":"back";
$.mobile.navigate.history.activeIndex=index;
$.mobile.navigate.history.previousIndex=b;
this.change(url,{direction:direction,changeHash:false,fromHashChange:true});
}
},
_handleDestination:function(a){
var b;
if($.type(a)==="string"){
a=$.mobile.path.stripHash(a);
}
if(a){
b=this._getHistory();
a=!$.mobile.path.isPath(a)?($.mobile.path.makeUrlAbsolute("#"+a,this._getDocumentBase())):a;
if(a===$.mobile.path.makeUrlAbsolute("#"+b.initialDst,this._getDocumentBase())&&
b.stack.length&&
b.stack[0].url!==b.initialDst.replace($.mobile.dialogHashKey,"")){
a=this._getInitialContent();
}
}
return a||this._getInitialContent();
},
_handleDialog:function(a,b){
var c,active,activeContent=this.getActivePage();
if(activeContent&&!activeContent.hasClass("ui-dialog")){
if(b.direction==="back"){
this.back();
}else{
this.forward();
}
return false;
}else{
c=b.pageUrl;
active=this._getActiveHistory();
$.extend(a,{
role:active.role,
transition:active.transition,
reverse:b.direction==="back"
});
}
return c;
},
_handleNavigate:function(a,b){
var c=$.mobile.path.stripHash(a),history=this._getHistory(),
transition=history.stack.length===0?"none":j,
changePageOptions={
changeHash:false,
fromHashChange:true,
reverse:b.direction==="back"
};
$.extend(changePageOptions,b,{
transition:(history.getLast()||{}).transition||transition
});
if(history.activeIndex>0&&
c.indexOf($.mobile.dialogHashKey)>-1&&
history.initialDst!==c){
c=this._handleDialog(changePageOptions,b);
if(c===false){
return;
}
}
this._changeContent(this._handleDestination(c),changePageOptions);
},
_changeContent:function(a,b){
$.mobile.changePage(a,b);
},
_getBase:function(){
return $.mobile.base;
},
_getNs:function(){
return $.mobile.ns;
},
_enhance:function(a,b){
return a.page({role:b});
},
_include:function(a,b){
a.appendTo(this.element);
this._enhance(a,b.role);
a.page("bindRemove");
},
_find:function(a){
var b=this._createFileUrl(a),
dataUrl=this._createDataUrl(a),
page,initialContent=this._getInitialContent();
page=this.element
.children("[data-"+this._getNs()+"url='"+dataUrl+"']");
if(page.length===0&&dataUrl&&!$.mobile.path.isPath(dataUrl)){
page=this.element.children($.mobile.path.hashToSelector("#"+dataUrl))
.attr("data-"+this._getNs()+"url",dataUrl)
.jqmData("url",dataUrl);
}
if(page.length===0&&
$.mobile.path.isFirstPageUrl(b)&&
initialContent&&
initialContent.parent().length){
page=$(initialContent);
}
return page;
},
_getLoader:function(){
return $.mobile.loading();
},
_showLoading:function(a,b,c,d){
if(this._loadMsg){
return;
}
this._loadMsg=setTimeout($.proxy(function(){
this._getLoader().loader("show",b,c,d);
this._loadMsg=0;
},this),a);
},
_hideLoading:function(){
clearTimeout(this._loadMsg);
this._loadMsg=0;
this._getLoader().loader("hide");
},
_showError:function(){
this._hideLoading();
this._showLoading(0,$.mobile.pageLoadErrorMessageTheme,$.mobile.pageLoadErrorMessage,true);
setTimeout($.proxy(this,"_hideLoading"),1500);
},
_parse:function(a,b){
var c,all=$("<div></div>");
all.get(0).innerHTML=a;
c=all.find(":jqmData(role='page'), :jqmData(role='dialog')").first();
if(!c.length){
c=$("<div data-"+this._getNs()+"role='page'>"+
(a.split(/<\/?body[^>]*>/gmi)[1]||"")+
"</div>");
}
c.attr("data-"+this._getNs()+"url",$.mobile.path.convertUrlToDataUrl(b))
.attr("data-"+this._getNs()+"external-page",true);
return c;
},
_setLoadedTitle:function(a,b){
var c=b.match(/<title[^>]*>([^<]*)/)&&RegExp.$1;
if(c&&!a.jqmData("title")){
c=$("<div>"+c+"</div>").text();
a.jqmData("title",c);
}
},
_isRewritableBaseTag:function(){
return $.mobile.dynamicBaseEnabled&&!$.support.dynamicBaseTag;
},
_createDataUrl:function(a){
return $.mobile.path.convertUrlToDataUrl(a);
},
_createFileUrl:function(a){
return $.mobile.path.getFilePath(a);
},
_triggerWithDeprecated:function(a,b,c){
var d=$.Event("page"+a),
newEvent=$.Event(this.widgetName+a);
(c||this.element).trigger(d,b);
this.element.trigger(newEvent,b);
return{
d:d,
event:newEvent
};
},
_loadSuccess:function(e,f,g,h){
var i=this._createFileUrl(e),
dataUrl=this._createDataUrl(e);
return $.proxy(function(a,b,c){
var d,
pageElemRegex=new RegExp("(<[^>]+\\bdata-"+this._getNs()+"role=[\"']?page[\"']?[^>]*>)"),
dataUrlRegex=new RegExp("\\bdata-"+this._getNs()+"url=[\"']?([^\"'>]*)[\"']?");
if(pageElemRegex.test(a)&&
RegExp.$1&&
dataUrlRegex.test(RegExp.$1)&&
RegExp.$1){
i=$.mobile.path.getFilePath($("<div>"+RegExp.$1+"</div>").text());
}
if(g.prefetch===j){
this._getBase().set(i);
}
d=this._parse(a,i);
this._setLoadedTitle(d,a);
f.xhr=c;
f.textStatus=b;
f.page=d;
f.content=d;
if(!this._trigger("load",j,f)){
return;
}
if(this._isRewritableBaseTag()&&d){
this._getBase().rewrite(i,d);
}
this._include(d,g);
if(e.indexOf("&"+$.mobile.subPageUrlKey)>-1){
d=this.element.children("[data-"+this._getNs()+"url='"+dataUrl+"']");
}
if(g.showLoadMsg){
this._hideLoading();
}
this.element.trigger("pageload");
h.resolve(e,g,d);
},this);
},
_loadDefaults:{
type:"get",
data:j,
reloadPage:false,
reload:false,
role:j,
showLoadMsg:false,
loadMsgDelay:50
},
load:function(a,b){
var c=(b&&b.deferred)||$.Deferred(),
settings=$.extend({},this._loadDefaults,b),
content=null,
absUrl=$.mobile.path.makeUrlAbsolute(a,this._findBaseWithDefault()),
fileUrl,dataUrl,pblEvent,triggerData;
settings.reload=settings.reloadPage;
if(settings.data&&settings.type==="get"){
absUrl=$.mobile.path.addSearchParams(absUrl,settings.data);
settings.data=j;
}
if(settings.data&&settings.type==="post"){
settings.reload=true;
}
fileUrl=this._createFileUrl(absUrl);
dataUrl=this._createDataUrl(absUrl);
content=this._find(absUrl);
if(content.length===0&&
$.mobile.path.isEmbeddedPage(fileUrl)&&
!$.mobile.path.isFirstPageUrl(fileUrl)){
c.reject(absUrl,settings);
return;
}
this._getBase().reset();
if(content.length&&!settings.reload){
this._enhance(content,settings.role);
c.resolve(absUrl,settings,content);
if(!settings.prefetch){
this._getBase().set(a);
}
return;
}
triggerData={
a:a,
absUrl:absUrl,
dataUrl:dataUrl,
c:c,
b:settings
};
pblEvent=this._triggerWithDeprecated("beforeload",triggerData);
if(pblEvent.deprecatedEvent.isDefaultPrevented()||
pblEvent.event.isDefaultPrevented()){
return;
}
if(settings.showLoadMsg){
this._showLoading(settings.loadMsgDelay);
}
if(settings.prefetch===j){
this._getBase().reset();
}
if(!($.mobile.allowCrossDomainPages||
$.mobile.path.isSameDomain($.mobile.path.documentUrl,absUrl))){
c.reject(absUrl,settings);
return;
}
$.ajax({
a:fileUrl,
type:settings.type,
data:settings.data,
contentType:settings.contentType,
dataType:"html",
success:this._loadSuccess(absUrl,triggerData,settings,c),
error:this._loadError(absUrl,triggerData,settings,c)
});
},
_loadError:function(e,f,g,h){
return $.proxy(function(a,b,c){
this._getBase().set($.mobile.path.get());
f.xhr=a;
f.textStatus=b;
f.errorThrown=c;
var d=this._triggerWithDeprecated("loadfailed",f);
if(d.deprecatedEvent.isDefaultPrevented()||
d.event.isDefaultPrevented()){
return;
}
if(g.showLoadMsg){
this._showError();
}
h.reject(e,g);
},this);
},
_getTransitionHandler:function(a){
a=$.mobile._maybeDegradeTransition(a);
return $.mobile.transitionHandlers[a]||$.mobile.defaultTransitionHandler;
},
_triggerCssTransitionEvents:function(a,b,c){
var d=false;
c=c||"";
if(b){
if(a[0]===b[0]){
d=true;
}
this._triggerWithDeprecated(c+"hide",{nextPage:a,samePage:d},b);
}
this._triggerWithDeprecated(c+"show",{prevPage:b||$("")},a);
},
_cssTransition:function(a,b,c){
var d=c.transition,
reverse=c.reverse,
deferred=c.deferred,
TransitionHandler,
promise;
this._triggerCssTransitionEvents(a,b,"before");
this._hideLoading();
TransitionHandler=this._getTransitionHandler(d);
promise=(new TransitionHandler(d,reverse,a,b)).transition();
promise.done(function(){
deferred.resolve.apply(deferred,arguments);
});
promise.done($.proxy(function(){
this._triggerCssTransitionEvents(a,b);
},this));
},
_releaseTransitionLock:function(){
isPageTransitioning=false;
if(k.length>0){
$.mobile.changePage.apply(null,k.pop());
}
},
_removeActiveLinkClass:function(a){
$.mobile.removeActiveLinkClass(a);
},
_loadUrl:function(d,e,f){
f.target=d;
f.deferred=$.Deferred();
this.load(d,f);
f.deferred.done($.proxy(function(a,b,c){
isPageTransitioning=false;
b.absUrl=e.absUrl;
this.transition(c,e,b);
},this));
f.deferred.fail($.proxy(function(){
this._removeActiveLinkClass(true);
this._releaseTransitionLock();
this._triggerWithDeprecated("changefailed",e);
},this));
},
_triggerPageBeforeChange:function(a,b,c){
var d=new $.Event("pagebeforechange");
$.extend(b,{toPage:a,options:c});
if($.type(a)==="string"){
b.absUrl=$.mobile.path.makeUrlAbsolute(a,this._findBaseWithDefault());
}else{
b.absUrl=c.absUrl;
}
this.element.trigger(d,b);
if(d.isDefaultPrevented()){
return false;
}
return true;
},
change:function(a,b){
if(isPageTransitioning){
k.unshift(arguments);
return;
}
var c=$.extend({},$.mobile.changePage.defaults,b),
triggerData={};
c.fromPage=c.fromPage||this.activePage;
if(!this._triggerPageBeforeChange(a,triggerData,c)){
return;
}
a=triggerData.toPage;
if($.type(a)==="string"){
isPageTransitioning=true;
this._loadUrl(a,triggerData,c);
}else{
this.transition(a,triggerData,c);
}
},
transition:function(f,g,h){
var i,url,pageUrl,fileUrl,
active,activeIsInitialPage,
historyDir,pageTitle,isDialog,
alreadyThere,newPageTitle,
params,cssTransitionDeferred,
beforeTransition;
if(isPageTransitioning){
k.unshift([f,h]);
return;
}
if(!this._triggerPageBeforeChange(f,g,h)){
return;
}
beforeTransition=this._triggerWithDeprecated("beforetransition",g);
if(beforeTransition.deprecatedEvent.isDefaultPrevented()||
beforeTransition.event.isDefaultPrevented()){
return;
}
isPageTransitioning=true;
if(f[0]===$.mobile.firstPage[0]&&!h.dataUrl){
h.dataUrl=$.mobile.path.documentUrl.hrefNoHash;
}
i=h.fromPage;
url=(h.dataUrl&&$.mobile.path.convertUrlToDataUrl(h.dataUrl))||
f.jqmData("url");
pageUrl=url;
fileUrl=$.mobile.path.getFilePath(url);
active=$.mobile.navigate.history.getActive();
activeIsInitialPage=$.mobile.navigate.history.activeIndex===0;
historyDir=0;
pageTitle=B.title;
isDialog=(h.role==="dialog"||
f.jqmData("role")==="dialog")&&
f.jqmData("dialog")!==true;
if(i&&i[0]===f[0]&&
!h.allowSamePageTransition){
isPageTransitioning=false;
this._triggerWithDeprecated("transition",g);
this.element.trigger("pagechange",g);
if(h.fromHashChange){
$.mobile.navigate.history.direct({url:url});
}
return;
}
f.page({role:h.role});
if(h.fromHashChange){
historyDir=h.direction==="back"?-1:1;
}
try{
if(B.activeElement&&
B.activeElement.nodeName.toLowerCase()!=="body"){
$(B.activeElement).blur();
}else{
$("input:focus, textarea:focus, select:focus").blur();
}
}catch(e){}
alreadyThere=false;
if(isDialog&&active){
if(active.url&&
active.url.indexOf($.mobile.dialogHashKey)>-1&&
this.activePage&&
!this.activePage.hasClass("ui-dialog")&&
$.mobile.navigate.history.activeIndex>0){
h.changeHash=false;
alreadyThere=true;
}
url=(active.url||"");
if(!alreadyThere&&url.indexOf("#")>-1){
url+=$.mobile.dialogHashKey;
}else{
url+="#"+$.mobile.dialogHashKey;
}
if($.mobile.navigate.history.activeIndex===0&&url===$.mobile.navigate.history.initialDst){
url+=$.mobile.dialogHashKey;
}
}
newPageTitle=(!active)?pageTitle:f.jqmData("title")||
f.children(":jqmData(role='header')").find(".ui-title").text();
if(!!newPageTitle&&pageTitle===B.title){
pageTitle=newPageTitle;
}
if(!f.jqmData("title")){
f.jqmData("title",pageTitle);
}
h.transition=h.transition||
((historyDir&&!activeIsInitialPage)?active.transition:j)||
(isDialog?$.mobile.defaultDialogTransition:$.mobile.defaultPageTransition);
if(!historyDir&&alreadyThere){
$.mobile.navigate.history.getActive().pageUrl=pageUrl;
}
if(url&&!h.fromHashChange){
if(!$.mobile.path.isPath(url)&&url.indexOf("#")<0){
url="#"+url;
}
params={
transition:h.transition,
title:pageTitle,
pageUrl:pageUrl,
role:h.role
};
if(h.changeHash!==false&&$.mobile.hashListeningEnabled){
$.mobile.navigate(url,params,true);
}else if(f[0]!==$.mobile.firstPage[0]){
$.mobile.navigate.history.add(url,params);
}
}
B.title=pageTitle;
$.mobile.activePage=f;
this.activePage=f;
h.reverse=h.reverse||historyDir<0;
cssTransitionDeferred=$.Deferred();
this._cssTransition(f,i,{
transition:h.transition,
reverse:h.reverse,
deferred:cssTransitionDeferred
});
cssTransitionDeferred.done($.proxy(function(a,b,c,d,e){
$.mobile.removeActiveLinkClass();
if(h.duplicateCachedPage){
h.duplicateCachedPage.remove();
}
if(!e){
$.mobile.focusPage(f);
}
this._releaseTransitionLock();
this.element.trigger("pagechange",g);
this._triggerWithDeprecated("transition",g);
},this));
},
_findBaseWithDefault:function(){
var a=(this.activePage&&
$.mobile.getClosestBaseUrl(this.activePage));
return a||$.mobile.path.documentBase.hrefNoHash;
}
});
$.mobile.navreadyDeferred=$.Deferred();
var k=[],
isPageTransitioning=false;
})(n);
(function($,g){
var h=$.Deferred(),
loadDeferred=$.Deferred(),
documentUrl=$.mobile.path.documentUrl,
$lastVClicked=null;

function findClosestLink(a){
while(a){
if((typeof a.nodeName==="string")&&a.nodeName.toLowerCase()==="a"){
break;
}
a=a.parentNode;
}
return a;
}
$.mobile.loadPage=function(a,b){
var c;
b=b||{};
c=(b.pageContainer||$.mobile.pageContainer);
b.deferred=$.Deferred();
c.pagecontainer("load",a,b);
return b.deferred.promise();
};

$.mobile.back=function(){
var a=A.navigator;
if(this.phonegapNavigationEnabled&&
a&&
a.app&&
a.app.backHistory){
a.app.backHistory();
}else{
$.mobile.pageContainer.pagecontainer("back");
}
};
$.mobile.focusPage=function(a){
var b=a.find("[autofocus]"),
pageTitle=a.find(".ui-title:eq(0)");
if(b.length){
b.focus();
return;
}
if(pageTitle.length){
pageTitle.focus();
}else{
a.focus();
}
};
$.mobile._maybeDegradeTransition=$.mobile._maybeDegradeTransition||function(a){
return a;
};
$.mobile.changePage=function(a,b){
$.mobile.pageContainer.pagecontainer("change",a,b);
};
$.mobile.changePage.defaults={
transition:g,
reverse:false,
changeHash:true,
fromHashChange:false,
role:g,duplicateCachedPage:g,
pageContainer:g,
showLoadMsg:true,dataUrl:g,
fromPage:g,
allowSamePageTransition:false
};
$.mobile._registerInternalEvents=function(){
var f=function(c,d){
var e,ret=true,formData,vclickedName,method;
if(!$.mobile.ajaxEnabled||
c.is(":jqmData(ajax='false')")||
!c.jqmHijackable().length||
c.attr("target")){
return false;
}
e=($lastVClicked&&$lastVClicked.attr("formaction"))||
c.attr("action");
method=(c.attr("method")||"get").toLowerCase();
if(!e){
e=$.mobile.getClosestBaseUrl(c);
if(method==="get"){
e=$.mobile.path.parseUrl(e).hrefNoSearch;
}
if(e===$.mobile.path.documentBase.hrefNoHash){
e=documentUrl.hrefNoSearch;
}
}
e=$.mobile.path.makeUrlAbsolute(e,$.mobile.getClosestBaseUrl(c));
if(($.mobile.path.isExternal(e)&&!$.mobile.path.isPermittedCrossDomainRequest(documentUrl,e))){
return false;
}
if(!d){
formData=c.serializeArray();
if($lastVClicked&&$lastVClicked[0].form===c[0]){
vclickedName=$lastVClicked.attr("name");
if(vclickedName){
$.each(formData,function(a,b){
if(b.name===vclickedName){
vclickedName="";
return false;
}
});
if(vclickedName){
formData.push({name:vclickedName,value:$lastVClicked.attr("value")});
}
}
}
ret={
e:e,
options:{
type:method,
data:$.param(formData),
transition:c.jqmData("transition"),
reverse:c.jqmData("direction")==="reverse",
reloadPage:true
}
};
}
return ret;
};
$.mobile.document.delegate("form","submit",function(a){
var b;
if(!a.isDefaultPrevented()){
b=f($(this));
if(b){
$.mobile.changePage(b.url,b.options);
a.preventDefault();
}
}
});
$.mobile.document.bind("vclick",function(a){
var b,btnEls,target=a.target,needClosest=false;
if(a.which>1||!$.mobile.linkBindingEnabled){
return;
}
$lastVClicked=$(target);
if($.data(target,"mobile-button")){
if(!f($(target).closest("form"),true)){
return;
}
if(target.parentNode){
target=target.parentNode;
}
}else{
target=findClosestLink(target);
if(!(target&&$.mobile.path.parseUrl(target.getAttribute("href")||"#").hash!=="#")){
return;
}
if(!$(target).jqmHijackable().length){
return;
}
}
if(!!~target.className.indexOf("ui-link-inherit")){
if(target.parentNode){
btnEls=$.data(target.parentNode,"buttonElements");
}
}else{
btnEls=$.data(target,"buttonElements");
}
if(btnEls){
target=btnEls.outer;
}else{
needClosest=true;
}
b=$(target);
if(needClosest){
b=b.closest(".ui-btn");
}
if(b.length>0&&
!(b.hasClass("ui-state-disabled"||
b.hasClass("ui-disabled")))){
$.mobile.removeActiveLinkClass(true);
$.mobile.activeClickedLink=b;
$.mobile.activeClickedLink.addClass($.mobile.activeBtnClass);
}
});
$.mobile.document.bind("click",function(a){
if(!$.mobile.linkBindingEnabled||a.isDefaultPrevented()){
return;
}
var b=findClosestLink(a.target),
$link=$(b),
httpCleanup=function(){
A.setTimeout(function(){$.mobile.removeActiveLinkClass(true)},200);
},
baseUrl,href,
useDefaultUrlHandling,isExternal,
transition,reverse,role;
if($.mobile.activeClickedLink&&
$.mobile.activeClickedLink[0]===a.target.parentNode){
httpCleanup();
}
if(!b||a.which>1||!$link.jqmHijackable().length){
return;
}
if($link.is(":jqmData(rel='back')")){
$.mobile.back();
return false;
}
baseUrl=$.mobile.getClosestBaseUrl($link);
href=$.mobile.path.makeUrlAbsolute($link.attr("href")||"#",baseUrl);
if(!$.mobile.ajaxEnabled&&!$.mobile.path.isEmbeddedPage(href)){
httpCleanup();
return;
}
if(href.search("#")!==-1){
href=href.replace(/[^#]*#/,"");
if(!href){
a.preventDefault();
return;
}else if($.mobile.path.isPath(href)){
href=$.mobile.path.makeUrlAbsolute(href,baseUrl);
}else{
href=$.mobile.path.makeUrlAbsolute("#"+href,documentUrl.hrefNoHash);
}
}
useDefaultUrlHandling=$link.is("[rel='external']")||$link.is(":jqmData(ajax='false')")||$link.is("[target]");
isExternal=useDefaultUrlHandling||($.mobile.path.isExternal(href)&&!$.mobile.path.isPermittedCrossDomainRequest(documentUrl,href));
if(isExternal){
httpCleanup();
return;
}
transition=$link.jqmData("transition");
reverse=$link.jqmData("direction")==="reverse"||
$link.jqmData("back");
role=$link.attr("data-"+$.mobile.ns+"rel")||g;
$.mobile.changePage(href,{transition:transition,reverse:reverse,role:role,link:$link});
a.preventDefault();
});
$.mobile.document.delegate(".ui-page","pageshow.prefetch",function(){
var b=[];
$(this).find("a:jqmData(prefetch)").each(function(){
var a=$(this),
url=a.attr("href");
if(url&&$.inArray(url,b)===-1){
b.push(url);
$.mobile.loadPage(url,{role:a.attr("data-"+$.mobile.ns+"rel"),prefetch:true});
}
});
});
$.mobile.pageContainer.pagecontainer();
$.mobile.document.bind("pageshow",function(){
if(loadDeferred){
loadDeferred.done($.mobile.resetActivePageHeight);
}else{
$.mobile.resetActivePageHeight();
}
});
$.mobile.window.bind("throttledresize",$.mobile.resetActivePageHeight);
};$(function(){h.resolve()});
$.mobile.window.load(function(){
loadDeferred.resolve();
loadDeferred=null;
});
$.when(h,$.mobile.navreadyDeferred).done(function(){$.mobile._registerInternalEvents()});
})(n);
(function($,e,f){
$.mobile.Transition=function(){
this.init.apply(this,arguments);
};
$.extend($.mobile.Transition.prototype,{
toPreClass:" ui-page-pre-in",
init:function(a,b,c,d){
$.extend(this,{
a:a,
b:b,
c:c,
d:d,
deferred:new $.Deferred()
});
},
cleanFrom:function(){
this.$from
.removeClass($.mobile.activePageClass+" out in reverse "+this.name)
.height("");
},
beforeDoneIn:function(){},
beforeDoneOut:function(){},
beforeStartOut:function(){},
doneIn:function(){
this.beforeDoneIn();
this.$to.removeClass("out in reverse "+this.name).height("");
this.toggleViewportClass();
if($.mobile.window.scrollTop()!==this.toScroll){
this.scrollPage();
}
if(!this.sequential){
this.$to.addClass($.mobile.activePageClass);
}
this.deferred.resolve(this.name,this.reverse,this.$to,this.$from,true);
},
doneOut:function(a,b,c,d){
this.beforeDoneOut();
this.startIn(a,b,c,d);
},
hideIn:function(a){
this.$to.css("z-index",-10);
a.call(this);
this.$to.css("z-index","");
},
scrollPage:function(){
$.event.special.scrollstart.enabled=false;
if($.mobile.hideUrlBar||this.toScroll!==$.mobile.defaultHomeScroll){
e.scrollTo(0,this.toScroll);
}
setTimeout(function(){
$.event.special.scrollstart.enabled=true;
},150);
},
startIn:function(a,b,c,d){
this.hideIn(function(){
this.$to.addClass($.mobile.activePageClass+this.toPreClass);
if(!d){
$.mobile.focusPage(this.$to);
}
this.$to.height(a+this.toScroll);
if(!c){
this.scrollPage();
}
});
this.$to
.removeClass(this.toPreClass)
.addClass(this.name+" in "+b);
if(!c){
this.$to.animationComplete($.proxy(function(){
this.doneIn();
},this));
}else{
this.doneIn();
}
},
startOut:function(a,b,c){
this.beforeStartOut(a,b,c);
this.$from
.height(a+$.mobile.window.scrollTop())
.addClass(this.name+" out"+b);
},
toggleViewportClass:function(){
$.mobile.pageContainer.toggleClass("ui-mobile-viewport-transitioning viewport-"+this.name);
},
transition:function(){
var a,
reverseClass=this.reverse?" reverse":"",
screenHeight=$.mobile.getScreenHeight(),
maxTransitionOverride=$.mobile.maxTransitionWidth!==false&&
$.mobile.window.width()>$.mobile.maxTransitionWidth;
this.toScroll=$.mobile.navigate.history.getActive().lastScroll||$.mobile.defaultHomeScroll;
a=!$.support.cssTransitions||!$.support.cssAnimations||
maxTransitionOverride||!this.name||this.name==="none"||
Math.max($.mobile.window.scrollTop(),this.toScroll)>
$.mobile.getMaxScrollForTransition();
this.toggleViewportClass();
if(this.$from&&!a){
this.startOut(screenHeight,reverseClass,a);
}else{
this.doneOut(screenHeight,reverseClass,a,true);
}
return this.deferred.promise();
}
});
})(n,this);
(function($){
$.mobile.SerialTransition=function(){
this.init.apply(this,arguments);
};
$.extend($.mobile.SerialTransition.prototype,$.mobile.Transition.prototype,{
sequential:true,
beforeDoneOut:function(){
if(this.$from){
this.cleanFrom();
}
},
beforeStartOut:function(a,b,c){
this.$from.animationComplete($.proxy(function(){
this.doneOut(a,b,c);
},this));
}
});
})(n);
(function($){
$.mobile.ConcurrentTransition=function(){
this.init.apply(this,arguments);
};
$.extend($.mobile.ConcurrentTransition.prototype,$.mobile.Transition.prototype,{
sequential:false,
beforeDoneIn:function(){
if(this.$from){
this.cleanFrom();
}
},
beforeStartOut:function(a,b,c){
this.doneOut(a,b,c);
}
});
})(n);
(function($){
var b=function(){
return $.mobile.getScreenHeight()*3;
};
$.mobile.transitionHandlers={
"sequential":$.mobile.SerialTransition,
"simultaneous":$.mobile.ConcurrentTransition
};
$.mobile.defaultTransitionHandler=$.mobile.transitionHandlers.sequential;
$.mobile.transitionFallbacks={};
$.mobile._maybeDegradeTransition=function(a){
if(a&&!$.support.cssTransform3d&&$.mobile.transitionFallbacks[a]){
a=$.mobile.transitionFallbacks[a];
}
return a;
};
$.mobile.getMaxScrollForTransition=$.mobile.getMaxScrollForTransition||b;
})(n);

(function($,a,b){
$.mobile.transitionFallbacks.flip="fade";
})(n,this);

(function($,a,b){
$.mobile.transitionFallbacks.flow="fade";
})(n,this);

(function($,a,b){
$.mobile.transitionFallbacks.pop="fade";
})(n,this);

(function($,a,b){
$.mobile.transitionHandlers.slide=$.mobile.transitionHandlers.simultaneous;
$.mobile.transitionFallbacks.slide="fade";
})(n,this);

(function($,a,b){
$.mobile.transitionFallbacks.slidedown="fade";
})(n,this);

(function($,a,b){
$.mobile.transitionFallbacks.slidefade="fade";
})(n,this);

(function($,a,b){
$.mobile.transitionFallbacks.slideup="fade";
})(n,this);

(function($,a,b){
$.mobile.transitionFallbacks.turn="fade";
})(n,this);
(function($,c){
$.mobile.degradeInputs={
color:false,
date:false,
datetime:false,
"datetime-local":false,
email:false,
month:false,
number:false,
range:"number",
search:"text",
tel:false,
time:false,
url:false,
week:false
};
$.mobile.page.prototype.options.degradeInputs=$.mobile.degradeInputs;
$.mobile.degradeInputsWithin=function(b){
b=$(b);
b.find("input").not($.mobile.page.prototype.keepNativeSelector()).each(function(){
var a=$(this),
type=this.getAttribute("type"),
optType=$.mobile.degradeInputs[type]||"text",
html,hasType,findstr,repstr;
if($.mobile.degradeInputs[type]){
html=$("<div>").html(a.clone()).html();
hasType=html.indexOf(" type=")>-1;
findstr=hasType?/\s+type=["']?\w+['"]?/:/\/?>/;
repstr=" type=\""+optType+"\" data-"+$.mobile.ns+"type=\""+type+"\""+(hasType?"":">");
a.replaceWith(html.replace(findstr,repstr));
}
});
};
})(n);
(function($,d,e){
$.widget("mobile.page",$.mobile.page,{
options:{
closeBtn:"left",
closeBtnText:"Close",
overlayTheme:"a",
corners:true,
dialog:false
},
_create:function(){
this._super();
if(this.options.dialog){
$.extend(this,{
_inner:this.element.children(),
_headerCloseButton:null
});
if(!this.options.enhanced){
this._setCloseBtn(this.options.closeBtn);
}
}
},
_enhance:function(){
this._super();
if(this.options.dialog){
this.element.addClass("ui-dialog")
.wrapInner($("<div/>",{
"role":"dialog",
"class":"ui-dialog-contain ui-overlay-shadow"+
(this.options.corners?" ui-corner-all":"")
}));
}
},
_setOptions:function(a){
var b,closeButtonText,
currentOpts=this.options;
if(a.corners!==e){
this._inner.toggleClass("ui-corner-all",!!a.corners);
}
if(a.overlayTheme!==e){
if($.mobile.activePage[0]===this.element[0]){
currentOpts.overlayTheme=a.overlayTheme;
this._handlePageBeforeShow();
}
}
if(a.closeBtnText!==e){
b=currentOpts.closeBtn;
closeButtonText=a.closeBtnText;
}
if(a.closeBtn!==e){
b=a.closeBtn;
}
if(b){
this._setCloseBtn(b,closeButtonText);
}
this._super(a);
},
_handlePageBeforeShow:function(){
if(this.options.overlayTheme&&this.options.dialog){
this.removeContainerBackground();
this.setContainerBackground(this.options.overlayTheme);
}else{
this._super();
}
},
_setCloseBtn:function(a,b){
var c,
btn=this._headerCloseButton;
a="left"===a?"left":"right"===a?"right":"none";
if("none"===a){
if(btn){
btn.remove();
btn=null;
}
}else if(btn){
btn.removeClass("ui-btn-left ui-btn-right").addClass("ui-btn-"+a);
if(b){
btn.text(b);
}
}else{
c=this._inner.find(":jqmData(role='header')").first();
btn=$("<a></a>",{
"href":"#",
"class":"ui-btn ui-corner-all ui-icon-delete ui-btn-icon-notext ui-btn-"+a
})
.attr("data-"+$.mobile.ns+"rel","back")
.text(b||this.options.closeBtnText||"")
.prependTo(c);
}
this._headerCloseButton=btn;
}
});
})(n,this);
(function($,d,e){
$.widget("mobile.dialog",{
options:{
closeBtn:"left",
closeBtnText:"Close",
overlayTheme:"a",
corners:true
},
_handlePageBeforeShow:function(){
this._isCloseable=true;
if(this.options.overlayTheme){
this.element
.page("removeContainerBackground")
.page("setContainerBackground",this.options.overlayTheme);
}
},
_handlePageBeforeHide:function(){
this._isCloseable=false;
},
_handleVClickSubmit:function(a){
var b,
$target=$(a.target).closest(a.type==="vclick"?"a":"form");
if($target.length&&!$target.jqmData("transition")){
b={};
b["data-"+$.mobile.ns+"transition"]=
($.mobile.navigate.history.getActive()||{})["transition"]||
$.mobile.defaultDialogTransition;
b["data-"+$.mobile.ns+"direction"]="reverse";
$target.attr(b);
}
},
_create:function(){
var a=this.element,
opts=this.options;
a.addClass("ui-dialog")
.wrapInner($("<div/>",{
"role":"dialog",
"class":"ui-dialog-contain ui-overlay-shadow"+
(!!opts.corners?" ui-corner-all":"")
}));
$.extend(this,{
_isCloseable:false,
_inner:a.children(),
_headerCloseButton:null
});
this._on(a,{
vclick:"_handleVClickSubmit",
submit:"_handleVClickSubmit",
pagebeforeshow:"_handlePageBeforeShow",
pagebeforehide:"_handlePageBeforeHide"
});
this._setCloseBtn(opts.closeBtn);
},
_setOptions:function(a){
var b,closeButtonText,
currentOpts=this.options;
if(a.corners!==e){
this._inner.toggleClass("ui-corner-all",!!a.corners);
}
if(a.overlayTheme!==e){
if($.mobile.activePage[0]===this.element[0]){
currentOpts.overlayTheme=a.overlayTheme;
this._handlePageBeforeShow();
}
}
if(a.closeBtnText!==e){
b=currentOpts.closeBtn;
closeButtonText=a.closeBtnText;
}
if(a.closeBtn!==e){
b=a.closeBtn;
}
if(b){
this._setCloseBtn(b,closeButtonText);
}
this._super(a);
},
_setCloseBtn:function(a,b){
var c,
btn=this._headerCloseButton;
a="left"===a?"left":"right"===a?"right":"none";
if("none"===a){
if(btn){
btn.remove();
btn=null;
}
}else if(btn){
btn.removeClass("ui-btn-left ui-btn-right").addClass("ui-btn-"+a);
if(b){
btn.text(b);
}
}else{
c=this._inner.find(":jqmData(role='header')").first();
btn=$("<a></a>",{
"role":"button",
"href":"#",
"class":"ui-btn ui-corner-all ui-icon-delete ui-btn-icon-notext ui-btn-"+a
})
.text(b||this.options.closeBtnText||"")
.prependTo(c);
this._on(btn,{click:"close"});
}
this._headerCloseButton=btn;
},
close:function(){
var a=$.mobile.navigate.history;
if(this._isCloseable){
this._isCloseable=false;
if($.mobile.hashListeningEnabled&&a.activeIndex>0){
$.mobile.back();
}else{
$.mobile.pageContainer.pagecontainer("back");
}
}
}
});
})(n,this);
(function($,d){
var e=/([A-Z])/g,
iconposClass=function(a){
return("ui-btn-icon-"+(a===null?"left":a));
};
$.widget("mobile.collapsible",{
options:{
enhanced:false,
expandCueText:null,
collapseCueText:null,
collapsed:true,
heading:"h1,h2,h3,h4,h5,h6,legend",
collapsedIcon:null,
expandedIcon:null,
iconpos:null,
theme:null,
contentTheme:null,
inset:null,
corners:null,
mini:null
},
_create:function(){
var b=this.element,
ui={
accordion:b
.closest(":jqmData(role='collapsible-set'),"+
":jqmData(role='collapsibleset')"+
($.mobile.collapsibleset?", :mobile-collapsibleset":
""))
.addClass("ui-collapsible-set")
};
this._ui=ui;
this._renderedOptions=this._getOptions(this.options);
if(this.options.enhanced){
ui.heading=$(".ui-collapsible-heading",this.element[0]);
ui.content=ui.heading.next();
ui.anchor=$("a",ui.heading[0]).first();
ui.status=ui.anchor.children(".ui-collapsible-heading-status");
}else{
this._enhance(b,ui);
}
this._on(ui.heading,{
"tap":function(){
ui.heading.find("a").first().addClass($.mobile.activeBtnClass);
},
"click":function(a){
this._handleExpandCollapse(!ui.heading.hasClass("ui-collapsible-heading-collapsed"));
a.preventDefault();
a.stopPropagation();
}
});
},
_getOptions:function(a){
var b,
accordion=this._ui.accordion,
accordionWidget=this._ui.accordionWidget;
a=$.extend({},a);
if(accordion.length&&!accordionWidget){
this._ui.accordionWidget=
accordionWidget=accordion.data("mobile-collapsibleset");
}
for(b in a){
a[b]=
(a[b]!=null)?a[b]:
(accordionWidget)?accordionWidget.options[b]:
accordion.length?$.mobile.getAttribute(accordion[0],
b.replace(e,"-$1").toLowerCase()):
null;
if(null==a[b]){
a[b]=$.mobile.collapsible.defaults[b];
}
}
return a;
},
_themeClassFromOption:function(a,b){
return(b?(b==="none"?"":a+b):"");
},
_enhance:function(a,b){
var c,
opts=this._renderedOptions,
contentThemeClass=this._themeClassFromOption("ui-body-",opts.contentTheme);
a.addClass("ui-collapsible "+
(opts.inset?"ui-collapsible-inset ":"")+
(opts.inset&&opts.corners?"ui-corner-all ":"")+
(contentThemeClass?"ui-collapsible-themed-content ":""));
b.originalHeading=a.children(this.options.heading).first(),
b.content=a
.wrapInner("<div "+
"class='ui-collapsible-content "+
contentThemeClass+"'></div>")
.children(".ui-collapsible-content"),
b.heading=b.originalHeading;
if(b.heading.is("legend")){
b.heading=$("<div role='heading'>"+b.heading.html()+"</div>");
b.placeholder=$("<div><!-- placeholder for legend --></div>").insertBefore(b.originalHeading);
b.originalHeading.remove();
}
c=(opts.collapsed?(opts.collapsedIcon?"ui-icon-"+opts.collapsedIcon:""):
(opts.expandedIcon?"ui-icon-"+opts.expandedIcon:""));
b.status=$("<span class='ui-collapsible-heading-status'></span>");
b.anchor=b.heading
.detach()
.addClass("ui-collapsible-heading")
.append(b.status)
.wrapInner("<a href='#' class='ui-collapsible-heading-toggle'></a>")
.find("a")
.first()
.addClass("ui-btn "+
(c?c+" ":"")+
(c?iconposClass(opts.iconpos)+
" ":"")+
this._themeClassFromOption("ui-btn-",opts.theme)+" "+
(opts.mini?"ui-mini ":""));
b.heading.insertBefore(b.content);
this._handleExpandCollapse(this.options.collapsed);
return b;
},
refresh:function(){
this._applyOptions(this.options);
this._renderedOptions=this._getOptions(this.options);
},
_applyOptions:function(a){
var b,newTheme,oldTheme,hasCorners,hasIcon,
elem=this.element,
currentOpts=this._renderedOptions,
ui=this._ui,
anchor=ui.anchor,
status=ui.status,
opts=this._getOptions(a);
if(a.collapsed!==d){
this._handleExpandCollapse(a.collapsed);
}
b=elem.hasClass("ui-collapsible-collapsed");
if(b){
if(opts.expandCueText!==d){
status.text(opts.expandCueText);
}
}else{
if(opts.collapseCueText!==d){
status.text(opts.collapseCueText);
}
}
hasIcon=
(opts.collapsedIcon!==d?opts.collapsedIcon!==false:
currentOpts.collapsedIcon!==false);
if(!(opts.iconpos===d&&
opts.collapsedIcon===d&&
opts.expandedIcon===d)){
anchor.removeClass([iconposClass(currentOpts.iconpos)]
.concat((currentOpts.expandedIcon?
["ui-icon-"+currentOpts.expandedIcon]:[]))
.concat((currentOpts.collapsedIcon?
["ui-icon-"+currentOpts.collapsedIcon]:[]))
.join(" "));
if(hasIcon){
anchor.addClass(
[iconposClass(opts.iconpos!==d?
opts.iconpos:currentOpts.iconpos)]
.concat(b?
["ui-icon-"+(opts.collapsedIcon!==d?
opts.collapsedIcon:
currentOpts.collapsedIcon)]:
["ui-icon-"+(opts.expandedIcon!==d?
opts.expandedIcon:
currentOpts.expandedIcon)])
.join(" "));
}
}
if(opts.theme!==d){
oldTheme=this._themeClassFromOption("ui-btn-",currentOpts.theme);
newTheme=this._themeClassFromOption("ui-btn-",opts.theme);
anchor.removeClass(oldTheme).addClass(newTheme);
}
if(opts.contentTheme!==d){
oldTheme=this._themeClassFromOption("ui-body-",
currentOpts.contentTheme);
newTheme=this._themeClassFromOption("ui-body-",
opts.contentTheme);
ui.content.removeClass(oldTheme).addClass(newTheme);
}
if(opts.inset!==d){
elem.toggleClass("ui-collapsible-inset",opts.inset);
hasCorners=!!(opts.inset&&(opts.corners||currentOpts.corners));
}
if(opts.corners!==d){
hasCorners=!!(opts.corners&&(opts.inset||currentOpts.inset));
}
if(hasCorners!==d){
elem.toggleClass("ui-corner-all",hasCorners);
}
if(opts.mini!==d){
anchor.toggleClass("ui-mini",opts.mini);
}
},
_setOptions:function(a){
this._applyOptions(a);
this._super(a);
this._renderedOptions=this._getOptions(this.options);
},
_handleExpandCollapse:function(a){
var b=this._renderedOptions,
ui=this._ui;
ui.status.text(a?b.expandCueText:b.collapseCueText);
ui.heading
.toggleClass("ui-collapsible-heading-collapsed",a)
.find("a").first()
.toggleClass("ui-icon-"+b.expandedIcon,!a)
.toggleClass("ui-icon-"+b.collapsedIcon,(a||b.expandedIcon===b.collapsedIcon))
.removeClass($.mobile.activeBtnClass);
this.element.toggleClass("ui-collapsible-collapsed",a);
ui.content
.toggleClass("ui-collapsible-content-collapsed",a)
.attr("aria-hidden",a)
.trigger("updatelayout");
this.options.collapsed=a;
this._trigger(a?"collapse":"expand");
},
expand:function(){
this._handleExpandCollapse(false);
},
collapse:function(){
this._handleExpandCollapse(true);
},
_destroy:function(){
var a=this._ui,
opts=this.options;
if(opts.enhanced){
return;
}
if(a.placeholder){
a.originalHeading.insertBefore(a.placeholder);
a.placeholder.remove();
a.heading.remove();
}else{
a.status.remove();
a.heading
.removeClass("ui-collapsible-heading ui-collapsible-heading-collapsed")
.children()
.contents()
.unwrap();
}
a.anchor.contents().unwrap();
a.content.contents().unwrap();
this.element
.removeClass("ui-collapsible ui-collapsible-collapsed "+
"ui-collapsible-themed-content ui-collapsible-inset ui-corner-all");
}
});
$.mobile.collapsible.defaults={
expandCueText:" click to expand contents",
collapseCueText:" click to collapse contents",
collapsedIcon:"plus",
contentTheme:"inherit",
expandedIcon:"minus",
iconpos:"left",
inset:true,
corners:true,
theme:"inherit",
mini:false
};
})(n);
(function($,d){
$.mobile.behaviors.addFirstLastClasses={
_getVisibles:function(a,b){
var c;
if(b){
c=a.not(".ui-screen-hidden");
}else{
c=a.filter(":visible");
if(c.length===0){
c=a.not(".ui-screen-hidden");
}
}
return c;
},
_addFirstLastClasses:function(a,b,c){
a.removeClass("ui-first-child ui-last-child");
b.eq(0).addClass("ui-first-child").end().last().addClass("ui-last-child");
if(!c){
this.element.trigger("updatelayout");
}
},
_removeFirstLastClasses:function(a){
a.removeClass("ui-first-child ui-last-child");
}
};
})(n);
(function($,c){
var d=":mobile-collapsible, "+$.mobile.collapsible.initSelector;
$.widget("mobile.collapsibleset",$.extend({
initSelector:":jqmData(role='collapsible-set'),:jqmData(role='collapsibleset')",
options:$.extend({
enhanced:false
},$.mobile.collapsible.defaults),
_handleCollapsibleExpand:function(a){
var b=$(a.target).closest(".ui-collapsible");
if(b.parent().is(":mobile-collapsibleset, :jqmData(role='collapsible-set')")){
b
.siblings(".ui-collapsible:not(.ui-collapsible-collapsed)")
.collapsible("collapse");
}
},
_create:function(){
var a=this.element,
opts=this.options;
$.extend(this,{
_classes:""
});
if(!opts.enhanced){
a.addClass("ui-collapsible-set "+
this._themeClassFromOption("ui-group-theme-",opts.theme)+" "+
(opts.corners&&opts.inset?"ui-corner-all ":""));
this.element.find($.mobile.collapsible.initSelector).collapsible();
}
this._on(a,{collapsibleexpand:"_handleCollapsibleExpand"});
},
_themeClassFromOption:function(a,b){
return(b?(b==="none"?"":a+b):"");
},
_init:function(){
this._refresh(true);
this.element
.children(d)
.filter(":jqmData(collapsed='false')")
.collapsible("expand");
},
_setOptions:function(a){
var b,hasCorners,
elem=this.element,
themeClass=this._themeClassFromOption("ui-group-theme-",a.theme);
if(themeClass){
elem
.removeClass(this._themeClassFromOption("ui-group-theme-",this.options.theme))
.addClass(themeClass);
}
if(a.inset!==c){
hasCorners=!!(a.inset&&(a.corners||this.options.corners));
}
if(a.corners!==c){
hasCorners=!!(a.corners&&(a.inset||this.options.inset));
}
if(hasCorners!==c){
elem.toggleClass("ui-corner-all",hasCorners);
}
b=this._super(a);
this.element.children(":mobile-collapsible").collapsible("refresh");
return b;
},
_destroy:function(){
var a=this.element;
this._removeFirstLastClasses(a.children(d));
a
.removeClass("ui-collapsible-set ui-corner-all "+
this._themeClassFromOption("ui-group-theme-",this.options.theme))
.children(":mobile-collapsible")
.collapsible("destroy");
},
_refresh:function(a){
var b=this.element.children(d);
this.element.find($.mobile.collapsible.initSelector).not(".ui-collapsible").collapsible();
this._addFirstLastClasses(b,this._getVisibles(b,a),a);
},
refresh:function(){
this._refresh(false);
}
},$.mobile.behaviors.addFirstLastClasses));
})(n);
(function($,a){
$.fn.fieldcontain=function(){
return this.addClass("ui-field-contain");
};
})(n);
(function($,c){
$.fn.grid=function(b){
return this.each(function(){
var a=$(this),
o=$.extend({
grid:null
},b),
$kids=a.children(),
gridCols={solo:1,a:2,b:3,c:4,d:5},
grid=o.grid,
iterator,
letter;
if(!grid){
if($kids.length<=5){
for(letter in gridCols){
if(gridCols[letter]===$kids.length){
grid=letter;
}
}
}else{
grid="a";
a.addClass("ui-grid-duo");
}
}
iterator=gridCols[grid];
a.addClass("ui-grid-"+grid);
$kids.filter(":nth-child("+iterator+"n+1)").addClass("ui-block-a");
if(iterator>1){
$kids.filter(":nth-child("+iterator+"n+2)").addClass("ui-block-b");
}
if(iterator>2){
$kids.filter(":nth-child("+iterator+"n+3)").addClass("ui-block-c");
}
if(iterator>3){
$kids.filter(":nth-child("+iterator+"n+4)").addClass("ui-block-d");
}
if(iterator>4){
$kids.filter(":nth-child("+iterator+"n+5)").addClass("ui-block-e");
}
});
};
})(n);
(function($,c){
$.widget("mobile.navbar",{
options:{
iconpos:"top",
grid:null
},
_create:function(){
var b=this.element,
$navbtns=b.find("a"),
iconpos=$navbtns.filter(":jqmData(icon)").length?this.options.iconpos:c;
b.addClass("ui-navbar")
.attr("role","navigation")
.find("ul")
.jqmEnhanceable()
.grid({grid:this.options.grid});
$navbtns
.each(function(){
var a=$.mobile.getAttribute(this,"icon"),
theme=$.mobile.getAttribute(this,"theme"),
classes="ui-btn";
if(theme){
classes+=" ui-btn-"+theme;
}
if(a){
classes+=" ui-icon-"+a+" ui-btn-icon-"+iconpos;
}
$(this).addClass(classes);
});
b.delegate("a","vclick",function(){
var a=$(this);
if(!(a.hasClass("ui-state-disabled")||
a.hasClass("ui-disabled")||
a.hasClass($.mobile.activeBtnClass))){
$navbtns.removeClass($.mobile.activeBtnClass);
a.addClass($.mobile.activeBtnClass);
$(B).one("pagehide",function(){
a.removeClass($.mobile.activeBtnClass);
});
}
});
b.closest(".ui-page").bind("pagebeforeshow",function(){
$navbtns.filter(".ui-state-persist").addClass($.mobile.activeBtnClass);
});
}
});
})(n);
(function($,f){
var g=$.mobile.getAttribute;
$.widget("mobile.listview",$.extend({
options:{
theme:null,
countTheme:null,
dividerTheme:null,
icon:"carat-r",
splitIcon:"carat-r",
splitTheme:null,
corners:true,
shadow:true,
inset:false
},
_create:function(){
var t=this,
listviewClasses="";
listviewClasses+=t.options.inset?" ui-listview-inset":"";
if(!!t.options.inset){
listviewClasses+=t.options.corners?" ui-corner-all":"";
listviewClasses+=t.options.shadow?" ui-shadow":"";
}
t.element.addClass(" ui-listview"+listviewClasses);
t.refresh(true);
},
_findFirstElementByTagName:function(a,b,c,d){
var e={};
e[c]=e[d]=true;
while(a){
if(e[a.nodeName]){
return a;
}
a=a[b];
}
return null;
},
_addThumbClasses:function(a){
var i,img,len=a.length;
for(i=0;i<len;i++){
img=$(this._findFirstElementByTagName(a[i].firstChild,"nextSibling","img","IMG"));
if(img.length){
$(this._findFirstElementByTagName(img[0].parentNode,"parentNode","li","LI")).addClass(img.hasClass("ui-li-icon")?"ui-li-has-icon":"ui-li-has-thumb");
}
}
},
_getChildrenByTagName:function(a,b,c){
var d=[],
dict={};
dict[b]=dict[c]=true;
a=a.firstChild;
while(a){
if(dict[a.nodeName]){
d.push(a);
}
a=a.nextSibling;
}
return $(d);
},
_beforeListviewRefresh:$.noop,
_afterListviewRefresh:$.noop,
refresh:function(b){
var c,pos,numli,item,itemClass,itemTheme,itemIcon,icon,a,
isDivider,startCount,newStartCount,value,last,splittheme,splitThemeClass,spliticon,
altButtonClass,dividerTheme,li,
o=this.options,
$list=this.element,
ol=!!$.nodeName($list[0],"ol"),
start=$list.attr("start"),
itemClassDict={},
countBubbles=$list.find(".ui-li-count"),
countTheme=g($list[0],"counttheme")||this.options.countTheme,
countThemeClass=countTheme?"ui-body-"+countTheme:"ui-body-inherit";
if(o.theme){
$list.addClass("ui-group-theme-"+o.theme);
}
if(ol&&(start||start===0)){
startCount=parseInt(start,10)-1;
$list.css("counter-reset","listnumbering "+startCount);
}
this._beforeListviewRefresh();
li=this._getChildrenByTagName($list[0],"li","LI");
for(pos=0,numli=li.length;pos<numli;pos++){
item=li.eq(pos);
itemClass="";
if(b||item[0].className.search(/\bui-li-static\b|\bui-li-divider\b/)<0){
a=this._getChildrenByTagName(item[0],"a","A");
isDivider=(g(item[0],"role")==="list-divider");
value=item.attr("value");
itemTheme=g(item[0],"theme");
if(a.length&&a[0].className.search(/\bui-btn\b/)<0&&!isDivider){
itemIcon=g(item[0],"icon");
icon=(itemIcon===false)?false:(itemIcon||o.icon);
a.removeClass("ui-link");
c="ui-btn";
if(itemTheme){
c+=" ui-btn-"+itemTheme;
}
if(a.length>1){
itemClass="ui-li-has-alt";
last=a.last();
splittheme=g(last[0],"theme")||o.splitTheme||g(item[0],"theme",true);
splitThemeClass=splittheme?" ui-btn-"+splittheme:"";
spliticon=g(last[0],"icon")||g(item[0],"icon")||o.splitIcon;
altButtonClass="ui-btn ui-btn-icon-notext ui-icon-"+spliticon+splitThemeClass;
last
.attr("title",$.trim(last.getEncodedText()))
.addClass(altButtonClass)
.empty();
}else if(icon){
c+=" ui-btn-icon-right ui-icon-"+icon;
}
a.first().addClass(c);
}else if(isDivider){
dividerTheme=(g(item[0],"theme")||o.dividerTheme||o.theme);
itemClass="ui-li-divider ui-bar-"+(dividerTheme?dividerTheme:"inherit");
item.attr("role","heading");
}else if(a.length<=0){
itemClass="ui-li-static ui-body-"+(itemTheme?itemTheme:"inherit");
}
if(ol&&value){
newStartCount=parseInt(value,10)-1;
item.css("counter-reset","listnumbering "+newStartCount);
}
}
if(!itemClassDict[itemClass]){
itemClassDict[itemClass]=[];
}
itemClassDict[itemClass].push(item[0]);
}
for(itemClass in itemClassDict){
$(itemClassDict[itemClass]).addClass(itemClass);
}
countBubbles.each(function(){
$(this).closest("li").addClass("ui-li-has-count");
});
if(countThemeClass){
countBubbles.addClass(countThemeClass);
}
this._addThumbClasses(li);
this._addThumbClasses(li.find(".ui-btn"));
this._afterListviewRefresh();
this._addFirstLastClasses(li,this._getVisibles(li,b),b);
}
},$.mobile.behaviors.addFirstLastClasses));
})(n);
(function($,c){
function defaultAutodividersSelector(a){
var b=$.trim(a.text())||null;
if(!b){
return null;
}
b=b.slice(0,1).toUpperCase();
return b;
}
$.widget("mobile.listview",$.mobile.listview,{
options:{
autodividers:false,
autodividersSelector:defaultAutodividersSelector
},
_beforeListviewRefresh:function(){
if(this.options.autodividers){
this._replaceDividers();
this._superApply(arguments);
}
},
_replaceDividers:function(){
var i,lis,li,dividerText,
lastDividerText=null,
list=this.element,
divider;
list.children("li:jqmData(role='list-divider')").remove();
lis=list.children("li");
for(i=0;i<lis.length;i++){
li=lis[i];
dividerText=this.options.autodividersSelector($(li));
if(dividerText&&lastDividerText!==dividerText){
divider=B.createElement("li");
divider.appendChild(B.createTextNode(dividerText));
divider.setAttribute("data-"+$.mobile.ns+"role","list-divider");
li.parentNode.insertBefore(divider,li);
}
lastDividerText=dividerText;
}
}
});
})(n);
(function($,b){
var c=/(^|\s)ui-li-divider($|\s)/,
rhidden=/(^|\s)ui-screen-hidden($|\s)/;
$.widget("mobile.listview",$.mobile.listview,{
options:{
hideDividers:false
},
_afterListviewRefresh:function(){
var a,idx,item,hideDivider=true;
this._superApply(arguments);
if(this.options.hideDividers){
a=this._getChildrenByTagName(this.element[0],"li","LI");
for(idx=a.length-1;idx>-1;idx--){
item=a[idx];
if(item.className.match(c)){
if(hideDivider){
item.className=item.className+" ui-screen-hidden";
}
hideDivider=true;
}else{
if(!item.className.match(rhidden)){
hideDivider=false;
}
}
}
}
}
});
})(n);
(function($,b){
$.mobile.nojs=function(a){
$(":jqmData(role='nojs')",a).addClass("ui-nojs");
};
})(n);
(function($,a){
$.mobile.behaviors.formReset={
_handleFormReset:function(){
this._on(this.element.closest("form"),{
reset:function(){
this._delay("_reset");
}
});
}
};
})(n);

(function($,d){
var e=$.mobile.path.hashToSelector;
$.widget("mobile.checkboxradio",$.extend({
initSelector:"input:not( :jqmData(role='flipswitch' ) )[type='checkbox'],input[type='radio']:not( :jqmData(role='flipswitch' ))",
options:{
theme:"inherit",
mini:false,
wrapperClass:null,
enhanced:false,
iconpos:"left"
},
_create:function(){
var c=this.element,
o=this.options,
inheritAttr=function(a,b){
return a.jqmData(b)||
a.closest("form, fieldset").jqmData(b);
},
parentLabel=c.closest("label"),
label=parentLabel.length?parentLabel:
c
.closest("form, fieldset, :jqmData(role='page'), :jqmData(role='dialog')")
.find("label")
.filter("[for='"+e(c[0].id)+"']")
.first(),
inputtype=c[0].type,
checkedClass="ui-"+inputtype+"-on",
uncheckedClass="ui-"+inputtype+"-off";
if(inputtype!=="checkbox"&&inputtype!=="radio"){
return;
}
if(this.element[0].disabled){
this.options.disabled=true;
}
o.iconpos=inheritAttr(c,"iconpos")||label.attr("data-"+$.mobile.ns+"iconpos")||o.iconpos,
o.mini=inheritAttr(c,"mini")||o.mini;
$.extend(this,{
c:c,
label:label,
parentLabel:parentLabel,
inputtype:inputtype,
checkedClass:checkedClass,
uncheckedClass:uncheckedClass
});
if(!this.options.enhanced){
this._enhance();
}
this._on(label,{
vmouseover:"_handleLabelVMouseOver",
vclick:"_handleLabelVClick"
});
this._on(c,{
vmousedown:"_cacheVals",
vclick:"_handleInputVClick",
focus:"_handleInputFocus",
blur:"_handleInputBlur"
});
this._handleFormReset();
this.refresh();
},
_enhance:function(){
this.label.addClass("ui-btn ui-corner-all");
if(this.parentLabel.length>0){
this.input.add(this.label).wrapAll(this._wrapper());
}else{
this.element.wrap(this._wrapper());
this.element.parent().prepend(this.label);
}
this._setOptions({
"theme":this.options.theme,
"iconpos":this.options.iconpos,
"mini":this.options.mini
});
},
_wrapper:function(){
return $("<div class='"+
(this.options.wrapperClass?this.options.wrapperClass:"")+
" ui-"+this.inputtype+
(this.options.disabled?" ui-state-disabled":"")+"' ></div>");
},
_handleInputFocus:function(){
this.label.addClass($.mobile.focusClass);
},
_handleInputBlur:function(){
this.label.removeClass($.mobile.focusClass);
},
_handleInputVClick:function(){
this.element.prop("checked",this.element.is(":checked"));
this._getInputSet().not(this.element).prop("checked",false);
this._updateAll();
},
_handleLabelVMouseOver:function(a){
if(this.label.parent().hasClass("ui-state-disabled")){
a.stopPropagation();
}
},
_handleLabelVClick:function(a){
var b=this.element;
if(b.is(":disabled")){
a.preventDefault();
return;
}
this._cacheVals();
b.prop("checked",this.inputtype==="radio"&&true||!b.prop("checked"));
b.triggerHandler("click");
this._getInputSet().not(b).prop("checked",false);
this._updateAll();
return false;
},
_cacheVals:function(){
this._getInputSet().each(function(){
$(this).attr("data-"+$.mobile.ns+"cacheVal",this.checked);
});
},
_getInputSet:function(){
var a,formId,
radio=this.element[0],
name=radio.name,
form=radio.form,
doc=this.element.parents().last().get(0),
radios=this.element;
if(name&&this.inputtype==="radio"&&doc){
a="input[type='radio'][name='"+e(name)+"']";
if(form){
formId=form.id;
if(formId){
radios=$(a+"[form='"+e(formId)+"']",doc);
}
radios=$(form).find(a).filter(function(){
return(this.form===form);
}).add(radios);
}else{
radios=$(a,doc).filter(function(){
return!this.form;
});
}
}
return radios;
},
_updateAll:function(){
var b=this;
this._getInputSet().each(function(){
var a=$(this);
if(this.checked||b.inputtype==="checkbox"){
a.trigger("change");
}
})
.checkboxradio("refresh");
},
_reset:function(){
this.refresh();
},
_hasIcon:function(){
var a,controlgroupWidget,
controlgroupConstructor=$.mobile.controlgroup;
if(controlgroupConstructor){
a=this.element.closest(
":mobile-controlgroup,"+
controlgroupConstructor.prototype.initSelector);
if(a.length>0){
controlgroupWidget=$.data(a[0],"mobile-controlgroup");
return((controlgroupWidget?controlgroupWidget.options.type:
a.attr("data-"+$.mobile.ns+"type"))!=="horizontal");
}
}
return true;
},
refresh:function(){
var a=this._hasIcon(),
isChecked=this.element[0].checked,
active=$.mobile.activeBtnClass,
iconposClass="ui-btn-icon-"+this.options.iconpos,
addClasses=[],
removeClasses=[];
if(a){
removeClasses.push(active);
addClasses.push(iconposClass);
}else{
removeClasses.push(iconposClass);
(isChecked?addClasses:removeClasses).push(active);
}
if(isChecked){
addClasses.push(this.checkedClass);
removeClasses.push(this.uncheckedClass);
}else{
addClasses.push(this.uncheckedClass);
removeClasses.push(this.checkedClass);
}
this.label
.addClass(addClasses.join(" "))
.removeClass(removeClasses.join(" "));
},
widget:function(){
return this.label.parent();
},
_setOptions:function(a){
var b=this.label,
currentOptions=this.options,
outer=this.widget(),
hasIcon=this._hasIcon();
if(a.disabled!==d){
this.input.prop("disabled",!!a.disabled);
outer.toggleClass("ui-state-disabled",!!a.disabled);
}
if(a.mini!==d){
outer.toggleClass("ui-mini",!!a.mini);
}
if(a.theme!==d){
b
.removeClass("ui-btn-"+currentOptions.theme)
.addClass("ui-btn-"+a.theme);
}
if(a.wrapperClass!==d){
outer
.removeClass(currentOptions.wrapperClass)
.addClass(a.wrapperClass);
}
if(a.iconpos!==d&&hasIcon){
b.removeClass("ui-btn-icon-"+currentOptions.iconpos).addClass("ui-btn-icon-"+a.iconpos);
}else if(!hasIcon){
b.removeClass("ui-btn-icon-"+currentOptions.iconpos);
}
this._super(a);
}
},$.mobile.behaviors.formReset));
})(n);
(function($,c){
$.widget("mobile.button",{
initSelector:"input[type='button'], input[type='submit'], input[type='reset']",
options:{
theme:null,
icon:null,
iconpos:"left",
iconshadow:false,
corners:true,
shadow:true,
inline:null,
mini:null,
wrapperClass:null,
enhanced:false
},
_create:function(){
if(this.element.is(":disabled")){
this.options.disabled=true;
}
if(!this.options.enhanced){
this._enhance();
}
$.extend(this,{
wrapper:this.element.parent()
});
this._on({
focus:function(){
this.widget().addClass($.mobile.focusClass);
},
blur:function(){
this.widget().removeClass($.mobile.focusClass);
}
});
this.refresh(true);
},
_enhance:function(){
this.element.wrap(this._button());
},
_button:function(){
var a=this.options,
iconClasses=this._getIconClasses(this.options);
return $("<div class='ui-btn ui-input-btn"+
(a.wrapperClass?" "+a.wrapperClass:"")+
(a.theme?" ui-btn-"+a.theme:"")+
(a.corners?" ui-corner-all":"")+
(a.shadow?" ui-shadow":"")+
(a.inline?" ui-btn-inline":"")+
(a.mini?" ui-mini":"")+
(a.disabled?" ui-state-disabled":"")+
(iconClasses?(" "+iconClasses):"")+
"' >"+this.element.val()+"</div>");
},
widget:function(){
return this.wrapper;
},
_destroy:function(){
this.element.insertBefore(this.button);
this.button.remove();
},
_getIconClasses:function(a){
return(a.icon?("ui-icon-"+a.icon+
(a.iconshadow?" ui-shadow-icon":"")+
" ui-btn-icon-"+a.iconpos):"");
},
_setOptions:function(a){
var b=this.widget();
if(a.theme!==c){
b
.removeClass(this.options.theme)
.addClass("ui-btn-"+a.theme);
}
if(a.corners!==c){
b.toggleClass("ui-corner-all",a.corners);
}
if(a.shadow!==c){
b.toggleClass("ui-shadow",a.shadow);
}
if(a.inline!==c){
b.toggleClass("ui-btn-inline",a.inline);
}
if(a.mini!==c){
b.toggleClass("ui-mini",a.mini);
}
if(a.disabled!==c){
this.element.prop("disabled",a.disabled);
b.toggleClass("ui-state-disabled",a.disabled);
}
if(a.icon!==c||
a.iconshadow!==c||
a.iconpos!==c){
b
.removeClass(this._getIconClasses(this.options))
.addClass(this._getIconClasses(
$.extend({},this.options,a)));
}
this._super(a);
},
refresh:function(a){
var b,
isDisabled=this.element.prop("disabled");
if(this.options.icon&&this.options.iconpos==="notext"&&this.element.attr("title")){
this.element.attr("title",this.element.val());
}
if(!a){
b=this.element.detach();
$(this.wrapper).text(this.element.val()).append(b);
}
if(this.options.disabled!==isDisabled){
this._setOptions({disabled:isDisabled});
}
}
});
})(n);
(function($){
var b=$("meta[name=viewport]"),
initialContent=b.attr("content"),
disabledZoom=initialContent+",maximum-scale=1, user-scalable=no",
enabledZoom=initialContent+",maximum-scale=10, user-scalable=yes",
disabledInitially=/(user-scalable[\s]*=[\s]*no)|(maximum-scale[\s]*=[\s]*1)[$,\s]/.test(initialContent);
$.mobile.zoom=$.extend({},{
enabled:!disabledInitially,
locked:false,
disable:function(a){
if(!disabledInitially&&!$.mobile.zoom.locked){
b.attr("content",disabledZoom);
$.mobile.zoom.enabled=false;
$.mobile.zoom.locked=a||false;
}
},
enable:function(a){
if(!disabledInitially&&(!$.mobile.zoom.locked||a===true)){
b.attr("content",enabledZoom);
$.mobile.zoom.enabled=true;
$.mobile.zoom.locked=false;
}
},
restore:function(){
if(!disabledInitially){
b.attr("content",initialContent);
$.mobile.zoom.enabled=true;
}
}
});
}(n));
(function($,c){
$.widget("mobile.textinput",{
initSelector:"input[type='text'],"+
"input[type='search'],"+
":jqmData(type='search'),"+
"input[type='number'],"+
":jqmData(type='number'),"+
"input[type='password'],"+
"input[type='email'],"+
"input[type='url'],"+
"input[type='tel'],"+
"textarea,"+
"input[type='time'],"+
"input[type='date'],"+
"input[type='month'],"+
"input[type='week'],"+
"input[type='datetime'],"+
"input[type='datetime-local'],"+
"input[type='color'],"+
"input:not([type]),"+
"input[type='file']",
options:{
theme:null,
corners:true,
mini:false,
preventFocusZoom:/iPhone|iPad|iPod/.test(navigator.platform)&&navigator.userAgent.indexOf("AppleWebKit")>-1,
wrapperClass:"",
enhanced:false
},
_create:function(){
var a=this.options,
isSearch=this.element.is("[type='search'], :jqmData(type='search')"),
isTextarea=this.element[0].tagName==="TEXTAREA",
isRange=this.element.is("[data-"+($.mobile.ns||"")+"type='range']"),
inputNeedsWrap=((this.element.is("input")||
this.element.is("[data-"+($.mobile.ns||"")+"type='search']"))&&
!isRange);
if(this.element.prop("disabled")){
a.disabled=true;
}
$.extend(this,{
classes:this._classesFromOptions(),
isSearch:isSearch,
isTextarea:isTextarea,
isRange:isRange,
inputNeedsWrap:inputNeedsWrap
});
this._autoCorrect();
if(!a.enhanced){
this._enhance();
}
this._on({
"focus":"_handleFocus",
"blur":"_handleBlur"
});
},
refresh:function(){
this.setOptions({
"disabled":this.element.is(":disabled")
});
},
_enhance:function(){
var a=[];
if(this.isTextarea){
a.push("ui-input-text");
}
if(this.isTextarea||this.isRange){
a.push("ui-shadow-inset");
}
if(this.inputNeedsWrap){
this.element.wrap(this._wrap());
}else{
a=a.concat(this.classes);
}
this.element.addClass(a.join(" "));
},
widget:function(){
return(this.inputNeedsWrap)?this.element.parent():this.element;
},
_classesFromOptions:function(){
var a=this.options,
classes=[];
classes.push("ui-body-"+((a.theme===null)?"inherit":a.theme));
if(a.corners){
classes.push("ui-corner-all");
}
if(a.mini){
classes.push("ui-mini");
}
if(a.disabled){
classes.push("ui-state-disabled");
}
if(a.wrapperClass){
classes.push(a.wrapperClass);
}
return classes;
},
_wrap:function(){
return $("<div class='"+
(this.isSearch?"ui-input-search ":"ui-input-text ")+
this.classes.join(" ")+" "+
"ui-shadow-inset'></div>");
},
_autoCorrect:function(){
if(typeof this.element[0].autocorrect!=="undefined"&&
!$.support.touchOverflow){
this.element[0].setAttribute("autocorrect","off");
this.element[0].setAttribute("autocomplete","off");
}
},
_handleBlur:function(){
this.widget().removeClass($.mobile.focusClass);
if(this.options.preventFocusZoom){
$.mobile.zoom.enable(true);
}
},
_handleFocus:function(){
if(this.options.preventFocusZoom){
$.mobile.zoom.disable(true);
}
this.widget().addClass($.mobile.focusClass);
},
_setOptions:function(a){
var b=this.widget();
this._super(a);
if(!(a.disabled===c&&
a.mini===c&&
a.corners===c&&
a.theme===c&&
a.wrapperClass===c)){
b.removeClass(this.classes.join(" "));
this.classes=this._classesFromOptions();
b.addClass(this.classes.join(" "));
}
if(a.disabled!==c){
this.element.prop("disabled",!!a.disabled);
}
},
_destroy:function(){
if(this.options.enhanced){
return;
}
if(this.inputNeedsWrap){
this.element.unwrap();
}
this.element.removeClass("ui-input-text "+this.classes.join(" "));
}
});
})(n);
(function($,f){
$.widget("mobile.slider",$.extend({
initSelector:"input[type='range'], :jqmData(type='range'), :jqmData(role='slider')",
widgetEventPrefix:"slide",
options:{
theme:null,
trackTheme:null,
corners:true,
mini:false,
highlight:false
},
_create:function(){
var b=this,
control=this.element,
trackTheme=this.options.trackTheme||$.mobile.getAttribute(control[0],"theme"),
trackThemeClass=trackTheme?" ui-bar-"+trackTheme:" ui-bar-inherit",
cornerClass=(this.options.corners||control.jqmData("corners"))?" ui-corner-all":"",
miniClass=(this.options.mini||control.jqmData("mini"))?" ui-mini":"",
cType=control[0].nodeName.toLowerCase(),
isToggleSwitch=(cType==="select"),
isRangeslider=control.parent().is(":jqmData(role='rangeslider')"),
selectClass=(isToggleSwitch)?"ui-slider-switch":"",
controlID=control.attr("id"),
$label=$("[for='"+controlID+"']"),
labelID=$label.attr("id")||controlID+"-label",
min=!isToggleSwitch?parseFloat(control.attr("min")):0,
max=!isToggleSwitch?parseFloat(control.attr("max")):control.find("option").length-1,
step=A.parseFloat(control.attr("step")||1),
domHandle=B.createElement("a"),
handle=$(domHandle),
domSlider=B.createElement("div"),
slider=$(domSlider),
valuebg=this.options.highlight&&!isToggleSwitch?(function(){
var a=B.createElement("div");
a.className="ui-slider-bg "+$.mobile.activeBtnClass;
return $(a).prependTo(slider);
})():false,
options,
wrapper,
j,length,
i,optionsCount,origTabIndex,
side,activeClass,sliderImg;
$label.attr("id",labelID);
this.isToggleSwitch=isToggleSwitch;
domHandle.setAttribute("href","#");
domSlider.setAttribute("role","application");
domSlider.className=[this.isToggleSwitch?"ui-slider ui-slider-track ui-shadow-inset ":"ui-slider-track ui-shadow-inset ",selectClass,trackThemeClass,cornerClass,miniClass].join("");
domHandle.className="ui-slider-handle";
domSlider.appendChild(domHandle);
handle.attr({
"role":"slider",
"aria-valuemin":min,
"aria-valuemax":max,
"aria-valuenow":this._value(),
"aria-valuetext":this._value(),
"title":this._value(),
"aria-labelledby":labelID
});
$.extend(this,{
slider:slider,
handle:handle,
control:control,
type:cType,
step:step,
max:max,
min:min,
valuebg:valuebg,
isRangeslider:isRangeslider,
dragging:false,
beforeStart:null,
userModified:false,
mouseMoved:false
});
if(isToggleSwitch){
origTabIndex=control.attr("tabindex");
if(origTabIndex){
handle.attr("tabindex",origTabIndex);
}
control.attr("tabindex","-1").focus(function(){
$(this).blur();
handle.focus();
});
wrapper=B.createElement("div");
wrapper.className="ui-slider-inneroffset";
for(j=0,length=domSlider.childNodes.length;j<length;j++){
wrapper.appendChild(domSlider.childNodes[j]);
}
domSlider.appendChild(wrapper);
handle.addClass("ui-slider-handle-snapping");
options=control.find("option");
for(i=0,optionsCount=options.length;i<optionsCount;i++){
side=!i?"b":"a";
activeClass=!i?"":" "+$.mobile.activeBtnClass;
sliderImg=B.createElement("span");
sliderImg.className=["ui-slider-label ui-slider-label-",side,activeClass].join("");
sliderImg.setAttribute("role","img");
sliderImg.appendChild(B.createTextNode(options[i].innerHTML));
$(sliderImg).prependTo(slider);
}
b._labels=$(".ui-slider-label",slider);
}
control.addClass(isToggleSwitch?"ui-slider-switch":"ui-slider-input");
this._on(control,{
"change":"_controlChange",
"keyup":"_controlKeyup",
"blur":"_controlBlur",
"vmouseup":"_controlVMouseUp"
});
slider.bind("vmousedown",$.proxy(this._sliderVMouseDown,this))
.bind("vclick",false);
this._on(B,{"vmousemove":"_preventDocumentDrag"});
this._on(slider.add(B),{"vmouseup":"_sliderVMouseUp"});
slider.insertAfter(control);
if(!isToggleSwitch&&!isRangeslider){
wrapper=this.options.mini?"<div class='ui-slider ui-mini'>":"<div class='ui-slider'>";
control.add(slider).wrapAll(wrapper);
}
this._on(this.handle,{
"vmousedown":"_handleVMouseDown",
"keydown":"_handleKeydown",
"keyup":"_handleKeyup"
});
this.handle.bind("vclick",false);
this._handleFormReset();
this.refresh(f,f,true);
},
_setOptions:function(a){
if(a.theme!==f){
this._setTheme(a.theme);
}
if(a.trackTheme!==f){
this._setTrackTheme(a.trackTheme);
}
if(a.corners!==f){
this._setCorners(a.corners);
}
if(a.mini!==f){
this._setMini(a.mini);
}
if(a.highlight!==f){
this._setHighlight(a.highlight);
}
if(a.disabled!==f){
this._setDisabled(a.disabled);
}
this._super(a);
},
_controlChange:function(a){
if(this._trigger("controlchange",a)===false){
return false;
}
if(!this.mouseMoved){
this.refresh(this._value(),true);
}
},
_controlKeyup:function(){this.refresh(this._value(),true,true);
},
_controlBlur:function(){
this.refresh(this._value(),true);
},
_controlVMouseUp:function(){
this._checkedRefresh();
},
_handleVMouseDown:function(){
this.handle.focus();
},
_handleKeydown:function(a){
var b=this._value();
if(this.options.disabled){
return;
}
switch(a.keyCode){
case $.mobile.keyCode.HOME:
case $.mobile.keyCode.END:
case $.mobile.keyCode.PAGE_UP:
case $.mobile.keyCode.PAGE_DOWN:
case $.mobile.keyCode.UP:
case $.mobile.keyCode.RIGHT:
case $.mobile.keyCode.DOWN:
case $.mobile.keyCode.LEFT:
a.preventDefault();
if(!this._keySliding){
this._keySliding=true;
this.handle.addClass("ui-state-active");
}
break;
}
switch(a.keyCode){
case $.mobile.keyCode.HOME:
this.refresh(this.min);
break;
case $.mobile.keyCode.END:
this.refresh(this.max);
break;
case $.mobile.keyCode.PAGE_UP:
case $.mobile.keyCode.UP:
case $.mobile.keyCode.RIGHT:
this.refresh(b+this.step);
break;
case $.mobile.keyCode.PAGE_DOWN:
case $.mobile.keyCode.DOWN:
case $.mobile.keyCode.LEFT:
this.refresh(b-this.step);
break;
}
},_handleKeyup:function(){
if(this._keySliding){
this._keySliding=false;
this.handle.removeClass("ui-state-active");
}
},
_sliderVMouseDown:function(a){
if(this.options.disabled||!(a.which===1||a.which===0||a.which===f)){
return false;
}
if(this._trigger("beforestart",a)===false){
return false;
}
this.dragging=true;
this.userModified=false;
this.mouseMoved=false;
if(this.isToggleSwitch){
this.beforeStart=this.element[0].selectedIndex;
}
this.refresh(a);
this._trigger("start");
return false;
},
_sliderVMouseUp:function(){
if(this.dragging){
this.dragging=false;
if(this.isToggleSwitch){
this.handle.addClass("ui-slider-handle-snapping");
if(this.mouseMoved){
if(this.userModified){
this.refresh(this.beforeStart===0?1:0);
}else{
this.refresh(this.beforeStart);
}
}else{
this.refresh(this.beforeStart===0?1:0);
}
}
this.mouseMoved=false;
this._trigger("stop");
return false;
}
},
_preventDocumentDrag:function(a){
if(this._trigger("drag",a)===false){
return false;
}
if(this.dragging&&!this.options.disabled){
this.mouseMoved=true;
if(this.isToggleSwitch){
this.handle.removeClass("ui-slider-handle-snapping");
}
this.refresh(a);
this.userModified=this.beforeStart!==this.element[0].selectedIndex;
return false;
}
},
_checkedRefresh:function(){
if(this.value!==this._value()){
this.refresh(this._value());
}
},
_value:function(){
return this.isToggleSwitch?this.element[0].selectedIndex:parseFloat(this.element.val());
},
_reset:function(){
this.refresh(f,false,true);
},
refresh:function(b,c,d){
var e=this,
parentTheme=$.mobile.getAttribute(this.element[0],"theme"),
theme=this.options.theme||parentTheme,
themeClass=theme?" ui-btn-"+theme:"",
trackTheme=this.options.trackTheme||parentTheme,
trackThemeClass=trackTheme?" ui-bar-"+trackTheme:" ui-bar-inherit",
cornerClass=this.options.corners?" ui-corner-all":"",
miniClass=this.options.mini?" ui-mini":"",
left,width,data,tol,
pxStep,percent,
control,isInput,optionElements,min,max,step,
newval,valModStep,alignValue,percentPerStep,
handlePercent,aPercent,bPercent,
valueChanged;
e.slider[0].className=[this.isToggleSwitch?"ui-slider ui-slider-switch ui-slider-track ui-shadow-inset":"ui-slider-track ui-shadow-inset",trackThemeClass,cornerClass,miniClass].join("");
if(this.options.disabled||this.element.prop("disabled")){
this.disable();
}
this.value=this._value();
if(this.options.highlight&&!this.isToggleSwitch&&this.slider.find(".ui-slider-bg").length===0){
this.valuebg=(function(){
var a=B.createElement("div");
a.className="ui-slider-bg "+$.mobile.activeBtnClass;
return $(a).prependTo(e.slider);
})();
}
this.handle.addClass("ui-btn"+themeClass+" ui-shadow");
control=this.element;
isInput=!this.isToggleSwitch;
optionElements=isInput?[]:control.find("option");
min=isInput?parseFloat(control.attr("min")):0;
max=isInput?parseFloat(control.attr("max")):optionElements.length-1;
step=(isInput&&parseFloat(control.attr("step"))>0)?parseFloat(control.attr("step")):1;
if(typeof b==="object"){
data=b;
tol=8;
left=this.slider.offset().left;
width=this.slider.width();
pxStep=width/((max-min)/step);
if(!this.dragging||
data.pageX<left-tol||
data.pageX>left+width+tol){
return;
}
if(pxStep>1){
percent=((data.pageX-left)/width)*100;
}else{
percent=Math.round(((data.pageX-left)/width)*100);
}
}else{
if(b==null){
b=isInput?parseFloat(control.val()||0):control[0].selectedIndex;
}
percent=(parseFloat(b)-min)/(max-min)*100;
}
if(isNaN(percent)){
return;
}
newval=(percent/100)*(max-min)+min;
valModStep=(newval-min)%step;
alignValue=newval-valModStep;
if(Math.abs(valModStep)*2>=step){
alignValue+=(valModStep>0)?step:(-step);
}
percentPerStep=100/((max-min)/step);
newval=parseFloat(alignValue.toFixed(5));
if(typeof pxStep==="undefined"){
pxStep=width/((max-min)/step);
}
if(pxStep>1&&isInput){
percent=(newval-min)*percentPerStep*(1/step);
}
if(percent<0){
percent=0;
}
if(percent>100){
percent=100;
}
if(newval<min){
newval=min;
}
if(newval>max){
newval=max;
}
this.handle.css("left",percent+"%");
this.handle[0].setAttribute("aria-valuenow",isInput?newval:optionElements.eq(newval).attr("value"));
this.handle[0].setAttribute("aria-valuetext",isInput?newval:optionElements.eq(newval).getEncodedText());
this.handle[0].setAttribute("title",isInput?newval:optionElements.eq(newval).getEncodedText());
if(this.valuebg){
this.valuebg.css("width",percent+"%");
}
if(this._labels){
handlePercent=this.handle.width()/this.slider.width()*100;
aPercent=percent&&handlePercent+(100-handlePercent)*percent/100;
bPercent=percent===100?0:Math.min(handlePercent+100-aPercent,100);
this._labels.each(function(){
var a=$(this).hasClass("ui-slider-label-a");
$(this).width((a?aPercent:bPercent)+"%");
});
}
if(!d){
valueChanged=false;
if(isInput){
valueChanged=control.val()!==newval;
control.val(newval);
}else{
valueChanged=control[0].selectedIndex!==newval;
control[0].selectedIndex=newval;
}
if(this._trigger("beforechange",b)===false){
return false;
}
if(!c&&valueChanged){
control.trigger("change");
}
}
},
_setHighlight:function(a){
a=!!a;
if(a){
this.options.highlight=!!a;
this.refresh();
}else if(this.valuebg){
this.valuebg.remove();
this.valuebg=false;
}
},
_setTheme:function(a){
this.handle
.removeClass("ui-btn-"+this.options.theme)
.addClass("ui-btn-"+a);
var b=this.options.theme?this.options.theme:"inherit",
newTheme=a?a:"inherit";
this.control
.removeClass("ui-body-"+b)
.addClass("ui-body-"+newTheme);
},
_setTrackTheme:function(a){
var b=this.options.trackTheme?this.options.trackTheme:"inherit",
newTrackTheme=a?a:"inherit";
this.slider
.removeClass("ui-body-"+b)
.addClass("ui-body-"+newTrackTheme);
},
_setMini:function(a){
a=!!a;
if(!this.isToggleSwitch&&!this.isRangeslider){
this.slider.parent().toggleClass("ui-mini",a);
this.element.toggleClass("ui-mini",a);
}
this.slider.toggleClass("ui-mini",a);
},
_setCorners:function(a){
this.slider.toggleClass("ui-corner-all",a);
if(!this.isToggleSwitch){
this.control.toggleClass("ui-corner-all",a);
}
},
_setDisabled:function(a){
a=!!a;
this.element.prop("disabled",a);
this.slider
.toggleClass("ui-state-disabled",a)
.attr("aria-disabled",a);
}
},$.mobile.behaviors.formReset));
})(n);
(function($,c){
var d;
function getPopup(){
if(!d){
d=$("<div></div>",{
"class":"ui-slider-popup ui-shadow ui-corner-all"
});
}
return d.clone();
}
$.widget("mobile.slider",$.mobile.slider,{
options:{
popupEnabled:false,
showValue:false
},
_create:function(){
this._super();
$.extend(this,{
_currentValue:null,
_popup:null,
_popupVisible:false
});
this._setOption("popupEnabled",this.options.popupEnabled);
this._on(this.handle,{"vmousedown":"_showPopup"});
this._on(this.slider.add(this.document),{"vmouseup":"_hidePopup"});
this._refresh();
},
_positionPopup:function(){
var a=this.handle.offset();
this._popup.offset({
left:a.left+(this.handle.width()-this._popup.width())/2,
top:a.top-this._popup.outerHeight()-5
});
},
_setOption:function(a,b){
this._super(a,b);
if(a==="showValue"){
this.handle.html(b&&!this.options.mini?this._value():"");
}else if(a==="popupEnabled"){
if(b&&!this._popup){
this._popup=getPopup()
.addClass("ui-body-"+(this.options.theme||"a"))
.hide()
.insertBefore(this.element);
}
}
},
refresh:function(){
this._super.apply(this,arguments);
this._refresh();
},
_refresh:function(){
var o=this.options,newValue;
if(o.popupEnabled){
this.handle.removeAttr("title");
}
newValue=this._value();
if(newValue===this._currentValue){
return;
}
this._currentValue=newValue;
if(o.popupEnabled&&this._popup){
this._positionPopup();
this._popup.html(newValue);
}else if(o.showValue&&!this.options.mini){
this.handle.html(newValue);
}
},
_showPopup:function(){
if(this.options.popupEnabled&&!this._popupVisible){
this.handle.html("");
this._popup.show();
this._positionPopup();
this._popupVisible=true;
}
},
_hidePopup:function(){
var o=this.options;
if(o.popupEnabled&&this._popupVisible){
if(o.showValue&&!o.mini){
this.handle.html(this._value());
}
this._popup.hide();
this._popupVisible=false;
}
}
});
})(n);
(function($,c){
$.widget("mobile.flipswitch",$.extend({
options:{
onText:"On",
offText:"Off",
theme:null,
enhanced:false,
wrapperClass:null,
corners:true,
mini:false
},
_create:function(){
if(!this.options.enhanced){
this._enhance();
}else{
$.extend(this,{
flipswitch:this.element.parent(),
on:this.element.find(".ui-flipswitch-on").eq(0),
off:this.element.find(".ui-flipswitch-off").eq(0),
type:this.element.get(0).tagName
});
}
this._handleFormReset();
this._originalTabIndex=this.element.attr("tabindex");
if(this._originalTabIndex!=null){
this.on.attr("tabindex",this._originalTabIndex);
}
this.element.attr("tabindex","-1");
this._on({
"focus":"_handleInputFocus"
});
if(this.element.is(":disabled")){
this._setOptions({
"disabled":true
});
}
this._on(this.flipswitch,{
"click":"_toggle",
"swipeleft":"_left",
"swiperight":"_right"
});
this._on(this.on,{
"keydown":"_keydown"
});
this._on({
"change":"refresh"
});
},
_handleInputFocus:function(){
this.on.focus();
},
widget:function(){
return this.flipswitch;
},
_left:function(){
this.flipswitch.removeClass("ui-flipswitch-active");
if(this.type==="SELECT"){
this.element.get(0).selectedIndex=0;
}else{
this.element.prop("checked",false);
}
this.element.trigger("change");
},
_right:function(){
this.flipswitch.addClass("ui-flipswitch-active");
if(this.type==="SELECT"){
this.element.get(0).selectedIndex=1;
}else{
this.element.prop("checked",true);
}
this.element.trigger("change");
},
_enhance:function(){
var a=$("<div>"),
options=this.options,
element=this.element,
theme=options.theme?options.theme:"inherit",
on=$("<a></a>",{
"href":"#"
}),
off=$("<span></span>"),
type=element.get(0).tagName,
onText=(type==="INPUT")?
options.onText:element.find("option").eq(1).text(),
offText=(type==="INPUT")?
options.offText:element.find("option").eq(0).text();
on
.addClass("ui-flipswitch-on ui-btn ui-shadow ui-btn-inherit")
.text(onText);
off
.addClass("ui-flipswitch-off")
.text(offText);
a
.addClass("ui-flipswitch ui-shadow-inset "+
"ui-bar-"+theme+" "+
(options.wrapperClass?options.wrapperClass:"")+" "+
((element.is(":checked")||
element
.find("option")
.eq(1)
.is(":selected"))?"ui-flipswitch-active":"")+
(element.is(":disabled")?" ui-state-disabled":"")+
(options.corners?" ui-corner-all":"")+
(options.mini?" ui-mini":""))
.append(on,off);
element
.addClass("ui-flipswitch-input")
.after(a)
.appendTo(a);
$.extend(this,{
a:a,
on:on,
off:off,
type:type
});
},
_reset:function(){
this.refresh();
},
refresh:function(){
var a,
existingDirection=this.flipswitch.hasClass("ui-flipswitch-active")?"_right":"_left";
if(this.type==="SELECT"){
a=(this.element.get(0).selectedIndex>0)?"_right":"_left";
}else{
a=this.element.prop("checked")?"_right":"_left";
}
if(a!==existingDirection){
this[a]();
}
},
_toggle:function(){
var a=this.flipswitch.hasClass("ui-flipswitch-active")?"_left":"_right";
this[a]();
},
_keydown:function(e){
if(e.which===$.mobile.keyCode.LEFT){
this._left();
}else if(e.which===$.mobile.keyCode.RIGHT){
this._right();
}else if(e.which===$.mobile.keyCode.SPACE){
this._toggle();
e.preventDefault();
}
},
_setOptions:function(a){
if(a.theme!==c){
var b=a.theme?a.theme:"inherit",
newTheme=a.theme?a.theme:"inherit";
this.widget()
.removeClass("ui-bar-"+b)
.addClass("ui-bar-"+newTheme);
}
if(a.onText!==c){
this.on.text(a.onText);
}
if(a.offText!==c){
this.off.text(a.offText);
}
if(a.disabled!==c){
this.widget().toggleClass("ui-state-disabled",a.disabled);
}
if(a.mini!==c){
this.widget().toggleClass("ui-mini",a.mini);
}
if(a.corners!==c){
this.widget().toggleClass("ui-corner-all",a.corners);
}
this._super(a);
},
_destroy:function(){
if(this.options.enhanced){
return;
}
if(this._originalTabIndex!=null){
this.element.attr("tabindex",this._originalTabIndex);
}else{
this.element.removeAttr("tabindex");
}
this.on.remove();
this.off.remove();
this.element.unwrap();
this.flipswitch.remove();
this.removeClass("ui-flipswitch-input");
}
},$.mobile.behaviors.formReset));
})(n);
(function($,c){
$.widget("mobile.rangeslider",$.extend({
options:{
theme:null,
trackTheme:null,
corners:true,
mini:false,
highlight:true
},
_create:function(){
var a=this.element,
elClass=this.options.mini?"ui-rangeslider ui-mini":"ui-rangeslider",
_inputFirst=a.find("input").first(),
_inputLast=a.find("input").last(),
_label=a.find("label").first(),
_sliderWidgetFirst=$.data(_inputFirst.get(0),"mobile-slider")||
$.data(_inputFirst.slider().get(0),"mobile-slider"),
_sliderWidgetLast=$.data(_inputLast.get(0),"mobile-slider")||
$.data(_inputLast.slider().get(0),"mobile-slider"),
_sliderFirst=_sliderWidgetFirst.slider,
_sliderLast=_sliderWidgetLast.slider,
firstHandle=_sliderWidgetFirst.handle,
_sliders=$("<div class='ui-rangeslider-sliders' />").appendTo(a);
_inputFirst.addClass("ui-rangeslider-first");
_inputLast.addClass("ui-rangeslider-last");
a.addClass(elClass);
_sliderFirst.appendTo(_sliders);
_sliderLast.appendTo(_sliders);
_label.insertBefore(a);
firstHandle.prependTo(_sliderLast);
$.extend(this,{
_inputFirst:_inputFirst,
_inputLast:_inputLast,
_sliderFirst:_sliderFirst,
_sliderLast:_sliderLast,
_label:_label,
_targetVal:null,
_sliderTarget:false,
_sliders:_sliders,
_proxy:false
});
this.refresh();
this._on(this.element.find("input.ui-slider-input"),{
"slidebeforestart":"_slidebeforestart",
"slidestop":"_slidestop",
"slidedrag":"_slidedrag",
"slidebeforechange":"_change",
"blur":"_change",
"keyup":"_change"
});
this._on({
"mousedown":"_change"
});
this._on(this.element.closest("form"),{
"reset":"_handleReset"
});
this._on(firstHandle,{
"vmousedown":"_dragFirstHandle"
});
},
_handleReset:function(){
var a=this;
setTimeout(function(){
a._updateHighlight();
},0);
},
_dragFirstHandle:function(a){
$.data(this._inputFirst.get(0),"mobile-slider").dragging=true;
$.data(this._inputFirst.get(0),"mobile-slider").refresh(a);
return false;
},
_slidedrag:function(a){
var b=$(a.target).is(this._inputFirst),
otherSlider=(b)?this._inputLast:this._inputFirst;
this._sliderTarget=false;
if((this._proxy==="first"&&b)||(this._proxy==="last"&&!b)){
$.data(otherSlider.get(0),"mobile-slider").dragging=true;
$.data(otherSlider.get(0),"mobile-slider").refresh(a);
return false;
}
},
_slidestop:function(a){
var b=$(a.target).is(this._inputFirst);
this._proxy=false;
this.element.find("input").trigger("vmouseup");
this._sliderFirst.css("z-index",b?1:"");
},
_slidebeforestart:function(a){
this._sliderTarget=false;
if($(a.originalEvent.target).hasClass("ui-slider-track")){
this._sliderTarget=true;
this._targetVal=$(a.target).val();
}
},
_setOptions:function(a){
if(a.theme!==c){
this._setTheme(a.theme);
}
if(a.trackTheme!==c){
this._setTrackTheme(a.trackTheme);
}
if(a.mini!==c){
this._setMini(a.mini);
}
if(a.highlight!==c){
this._setHighlight(a.highlight);
}
this._super(a);
this.refresh();
},
refresh:function(){
var a=this.element,
o=this.options;
if(this._inputFirst.is(":disabled")||this._inputLast.is(":disabled")){
this.options.disabled=true;
}
a.find("input").slider({
theme:o.theme,
trackTheme:o.trackTheme,
disabled:o.disabled,
corners:o.corners,
mini:o.mini,
highlight:o.highlight
}).slider("refresh");
this._updateHighlight();
},
_change:function(a){
if(a.type==="keyup"){
this._updateHighlight();
return false;
}
var b=this,
min=parseFloat(this._inputFirst.val(),10),
max=parseFloat(this._inputLast.val(),10),
first=$(a.target).hasClass("ui-rangeslider-first"),
thisSlider=first?this._inputFirst:this._inputLast,
otherSlider=first?this._inputLast:this._inputFirst;
if((this._inputFirst.val()>this._inputLast.val()&&a.type==="mousedown"&&!$(a.target).hasClass("ui-slider-handle"))){
thisSlider.blur();
}else if(a.type==="mousedown"){
return;
}
if(min>max&&!this._sliderTarget){
thisSlider.val(first?max:min).slider("refresh");
this._trigger("normalize");
}else if(min>max){
thisSlider.val(this._targetVal).slider("refresh");
setTimeout(function(){
otherSlider.val(first?min:max).slider("refresh");
$.data(otherSlider.get(0),"mobile-slider").handle.focus();
b._sliderFirst.css("z-index",first?"":1);
b._trigger("normalize");
},0);
this._proxy=(first)?"first":"last";
}
if(min===max){
$.data(thisSlider.get(0),"mobile-slider").handle.css("z-index",1);
$.data(otherSlider.get(0),"mobile-slider").handle.css("z-index",0);
}else{
$.data(otherSlider.get(0),"mobile-slider").handle.css("z-index","");
$.data(thisSlider.get(0),"mobile-slider").handle.css("z-index","");
}
this._updateHighlight();
if(min>=max){
return false;
}
},
_updateHighlight:function(){
var a=parseInt($.data(this._inputFirst.get(0),"mobile-slider").handle.get(0).style.left,10),
max=parseInt($.data(this._inputLast.get(0),"mobile-slider").handle.get(0).style.left,10),
width=(max-a);
this.element.find(".ui-slider-bg").css({
"margin-left":a+"%",
"width":width+"%"
});
},
_setTheme:function(a){
this._inputFirst.slider("option","theme",a);
this._inputLast.slider("option","theme",a);
},
_setTrackTheme:function(a){
this._inputFirst.slider("option","trackTheme",a);
this._inputLast.slider("option","trackTheme",a);
},
_setMini:function(a){
this._inputFirst.slider("option","mini",a);
this._inputLast.slider("option","mini",a);
this.element.toggleClass("ui-mini",!!a);
},
_setHighlight:function(a){
this._inputFirst.slider("option","highlight",a);
this._inputLast.slider("option","highlight",a);
},
_destroy:function(){
this._label.prependTo(this.element);
this.element.removeClass("ui-rangeslider ui-mini");
this._inputFirst.after(this._sliderFirst);
this._inputLast.after(this._sliderLast);
this._sliders.remove();
this.element.find("input").removeClass("ui-rangeslider-first ui-rangeslider-last").slider("destroy");
}
},$.mobile.behaviors.formReset));
})(n);
(function($,b){
$.widget("mobile.textinput",$.mobile.textinput,{
options:{
clearBtn:false,
clearBtnText:"Clear text"
},
_create:function(){
this._super();
if(!!this.options.clearBtn||this.isSearch){
this._addClearBtn();
}
},
clearButton:function(){
return $("<a href='#' class='ui-input-clear ui-btn ui-icon-delete ui-btn-icon-notext ui-corner-all"+
"' title='"+this.options.clearBtnText+"'>"+this.options.clearBtnText+"</a>");
},
_clearBtnClick:function(a){
this.element.val("")
.focus()
.trigger("change");
this._clearBtn.addClass("ui-input-clear-hidden");
a.preventDefault();
},
_addClearBtn:function(){
if(!this.options.enhanced){
this._enhanceClear();
}
$.extend(this,{
_clearBtn:this.widget().find("a.ui-input-clear")
});
this._bindClearEvents();
this._toggleClear();
},
_enhanceClear:function(){
this.clearButton().appendTo(this.widget());
this.widget().addClass("ui-input-has-clear");
},
_bindClearEvents:function(){
this._on(this._clearBtn,{
"click":"_clearBtnClick"
});
this._on({
"keyup":"_toggleClear",
"change":"_toggleClear",
"input":"_toggleClear",
"focus":"_toggleClear",
"blur":"_toggleClear",
"cut":"_toggleClear",
"paste":"_toggleClear"
});
},
_unbindClear:function(){
this._off(this._clearBtn,"click");
this._off(this.element,"keyup change input focus blur cut paste");
},
_setOptions:function(a){
this._super(a);
if(a.clearBtn!==b&&
!this.element.is("textarea, :jqmData(type='range')")){
if(a.clearBtn){
this._addClearBtn();
}else{
this._destroyClear();
}
}
if(a.clearBtnText!==b&&this._clearBtn!==b){
this._clearBtn.text(a.clearBtnText)
.attr("title",a.clearBtnText);
}
},
_toggleClear:function(){
this._delay("_toggleClearClass",0);
},
_toggleClearClass:function(){
this._clearBtn.toggleClass("ui-input-clear-hidden",!this.element.val());
},
_destroyClear:function(){
this.widget().removeClass("ui-input-has-clear");
this._unbindClear();
this._clearBtn.remove();
},
_destroy:function(){
this._super();
this._destroyClear();
}
});
})(n);
(function($,b){
$.widget("mobile.textinput",$.mobile.textinput,{
options:{
autogrow:true,
keyupTimeoutBuffer:100
},
_create:function(){
this._super();
if(this.options.autogrow&&this.isTextarea){
this._autogrow();
}
},
_autogrow:function(){
this.element.addClass("ui-textinput-autogrow");
this._on({
"keyup":"_timeout",
"change":"_timeout",
"input":"_timeout",
"paste":"_timeout"
});
this._on(true,this.document,{
"pageshow":"_handleShow",
"popupbeforeposition":"_handleShow",
"updatelayout":"_handleShow",
"panelopen":"_handleShow"
});
},
_handleShow:function(a){
if($.contains(a.target,this.element[0])&&
this.element.is(":visible")){
if(a.type!=="popupbeforeposition"){
this.element
.addClass("ui-textinput-autogrow-resize")
.animationComplete(
$.proxy(function(){
this.element.removeClass("ui-textinput-autogrow-resize");
},this),
"transition");
}
this._timeout();
}
},
_unbindAutogrow:function(){
this.element.removeClass("ui-textinput-autogrow");
this._off(this.element,"keyup change input paste");
this._off(this.document,
"pageshow popupbeforeposition updatelayout panelopen");
},
keyupTimeout:null,
_prepareHeightUpdate:function(a){
if(this.keyupTimeout){
clearTimeout(this.keyupTimeout);
}
if(a===b){
this._updateHeight();
}else{
this.keyupTimeout=this._delay("_updateHeight",a);
}
},
_timeout:function(){
this._prepareHeightUpdate(this.options.keyupTimeoutBuffer);
},
_updateHeight:function(){
var a,paddingBottom,paddingHeight,scrollHeight,clientHeight,
borderTop,borderBottom,borderHeight,height,
scrollTop=this.window.scrollTop();
this.keyupTimeout=0;
if(!("onpage"in this.element[0])){
this.element.css({
"height":0,
"min-height":0,
"max-height":0
});
}
scrollHeight=this.element[0].scrollHeight;
clientHeight=this.element[0].clientHeight;
borderTop=parseFloat(this.element.css("border-top-width"));
borderBottom=parseFloat(this.element.css("border-bottom-width"));
borderHeight=borderTop+borderBottom;
height=scrollHeight+borderHeight+15;
if(clientHeight===0){
a=parseFloat(this.element.css("padding-top"));
paddingBottom=parseFloat(this.element.css("padding-bottom"));
paddingHeight=a+paddingBottom;
height+=paddingHeight;
}
this.element.css({
"height":height,
"min-height":"",
"max-height":""
});
this.window.scrollTop(scrollTop);
},
refresh:function(){
if(this.options.autogrow&&this.isTextarea){
this._updateHeight();
}
},
_setOptions:function(a){
this._super(a);
if(a.autogrow!==b&&this.isTextarea){
if(a.autogrow){
this._autogrow();
}else{
this._unbindAutogrow();
}
}
}
});
})(n);
(function($,b){
$.widget("mobile.selectmenu",$.extend({
initSelector:"select:not( :jqmData(role='slider')):not( :jqmData(role='flipswitch') )",
options:{
theme:null,
icon:"carat-d",
iconpos:"right",
inline:false,
corners:true,
shadow:true,
iconshadow:false,
overlayTheme:null,
dividerTheme:null,
hidePlaceholderMenuItems:true,
closeText:"Close",
nativeMenu:true,
preventFocusZoom:/iPhone|iPad|iPod/.test(navigator.platform)&&navigator.userAgent.indexOf("AppleWebKit")>-1,
mini:false
},
_button:function(){
return $("<div/>");
},
_setDisabled:function(a){
this.element.attr("disabled",a);
this.button.attr("aria-disabled",a);
return this._setOption("disabled",a);
},
_focusButton:function(){
var a=this;
setTimeout(function(){
a.button.focus();
},40);
},
_selectOptions:function(){
return this.select.find("option");
},
_preExtension:function(){
var a=this.options.inline||this.element.jqmData("inline"),
mini=this.options.mini||this.element.jqmData("mini"),
classes="";

if(!!~this.element[0].className.indexOf("ui-btn-left")){
classes=" ui-btn-left";
}
if(!!~this.element[0].className.indexOf("ui-btn-right")){
classes=" ui-btn-right";
}
if(a){
classes+=" ui-btn-inline";
}
if(mini){
classes+=" ui-mini";
}
this.select=this.element.removeClass("ui-btn-left ui-btn-right").wrap("<div class='ui-select"+classes+"'>");
this.selectId=this.select.attr("id")||("select-"+this.uuid);
this.buttonId=this.selectId+"-button";
this.label=$("label[for='"+this.selectId+"']");
this.isMultiple=this.select[0].multiple;
},
_destroy:function(){
var a=this.element.parents(".ui-select");
if(a.length>0){
if(a.is(".ui-btn-left, .ui-btn-right")){
this.element.addClass(a.hasClass("ui-btn-left")?"ui-btn-left":"ui-btn-right");
}
this.element.insertAfter(a);
a.remove();
}
},
_create:function(){
this._preExtension();
this.button=this._button();
var a=this,
options=this.options,
iconpos=options.icon?(options.iconpos||this.select.jqmData("iconpos")):false,
button=this.button
.insertBefore(this.select)
.attr("id",this.buttonId)
.addClass("ui-btn"+
(options.icon?(" ui-icon-"+options.icon+" ui-btn-icon-"+iconpos+
(options.iconshadow?" ui-shadow-icon":"")):"")+
(options.theme?" ui-btn-"+options.theme:"")+
(options.corners?" ui-corner-all":"")+
(options.shadow?" ui-shadow":""));
this.setButtonText();
if(options.nativeMenu&&A.opera&&A.opera.version){
button.addClass("ui-select-nativeonly");
}
if(this.isMultiple){
this.buttonCount=$("<span>")
.addClass("ui-li-count ui-body-inherit")
.hide()
.appendTo(button.addClass("ui-li-has-count"));
}
if(options.disabled||this.element.attr("disabled")){
this.disable();
}
this.select.change(function(){
a.refresh();
if(!!options.nativeMenu){
this.blur();
}
});
this._handleFormReset();
this._on(this.button,{
keydown:"_handleKeydown"
});
this.build();
},
build:function(){
var a=this;
this.select
.appendTo(a.button)
.bind("vmousedown",function(){
a.button.addClass($.mobile.activeBtnClass);
})
.bind("focus",function(){
a.button.addClass($.mobile.focusClass);
})
.bind("blur",function(){
a.button.removeClass($.mobile.focusClass);
})
.bind("focus vmouseover",function(){
a.button.trigger("vmouseover");
})
.bind("vmousemove",function(){
a.button.removeClass($.mobile.activeBtnClass);
})
.bind("change blur vmouseout",function(){
a.button.trigger("vmouseout")
.removeClass($.mobile.activeBtnClass);
});
a.button.bind("vmousedown",function(){
if(a.options.preventFocusZoom){
$.mobile.zoom.disable(true);
}
});
a.label.bind("click focus",function(){
if(a.options.preventFocusZoom){
$.mobile.zoom.disable(true);
}
});
a.select.bind("focus",function(){
if(a.options.preventFocusZoom){
$.mobile.zoom.disable(true);
}
});
a.button.bind("mouseup",function(){
if(a.options.preventFocusZoom){
setTimeout(function(){
$.mobile.zoom.enable(true);
},0);
}
});
a.select.bind("blur",function(){
if(a.options.preventFocusZoom){
$.mobile.zoom.enable(true);
}
});
},
selected:function(){
return this._selectOptions().filter(":selected");
},
selectedIndices:function(){
var a=this;
return this.selected().map(function(){
return a._selectOptions().index(this);
}).get();
},
setButtonText:function(){
var a=this,
selected=this.selected(),
text=this.placeholder,
span=$(B.createElement("span"));
this.button.children("span").not(".ui-li-count").remove().end().end().prepend((function(){
if(selected.length){
text=selected.map(function(){
return $(this).text();
}).get().join(", ");
}else{
text=a.placeholder;
}
if(text){
span.text(text);
}else{
span.html("&#160;");
}
return span
.addClass(a.select.attr("class"))
.addClass(selected.attr("class"))
.removeClass("ui-screen-hidden");
})());
},
setButtonCount:function(){
var a=this.selected();
if(this.isMultiple){
this.buttonCount[a.length>1?"show":"hide"]().text(a.length);
}
},
_handleKeydown:function(){
this._delay("_refreshButton");
},
_reset:function(){
this.refresh();
},
_refreshButton:function(){
this.setButtonText();
this.setButtonCount();
},
refresh:function(){
this._refreshButton();
},
open:$.noop,
close:$.noop,
disable:function(){
this._setDisabled(true);
this.button.addClass("ui-state-disabled");
},
enable:function(){
this._setDisabled(false);
this.button.removeClass("ui-state-disabled");
}
},$.mobile.behaviors.formReset));
})(n);
(function($,c){
$.mobile.links=function(b){
$(b)
.find("a")
.jqmEnhanceable()
.filter(":jqmData(rel='popup')[href][href!='']")
.each(function(){
var a=this,
idref=a.getAttribute("href").substring(1);
if(idref){
a.setAttribute("aria-haspopup",true);
a.setAttribute("aria-owns",idref);
a.setAttribute("aria-expanded",false);
}
})
.end()
.not(".ui-btn, :jqmData(role='none'), :jqmData(role='nojs')")
.addClass("ui-link");
};
})(n);
(function($,f){
function fitSegmentInsideSegment(a,b,c,d){
var e=d;
if(a<b){
e=c+(a-b)/2;
}else{
e=Math.min(Math.max(c,d-b/2),c+a-b);
}
return e;
}
function getWindowCoordinates(a){
return{
x:a.scrollLeft(),
y:a.scrollTop(),
cx:(a[0].innerWidth||a.width()),
cy:(a[0].innerHeight||a.height())
};
}
$.widget("mobile.popup",{
options:{
wrapperClass:null,
theme:null,
overlayTheme:null,
shadow:true,
corners:true,
transition:"none",
positionTo:"origin",
tolerance:null,
closeLinkSelector:"a:jqmData(rel='back')",
closeLinkEvents:"click.popup",
navigateEvents:"navigate.popup",
closeEvents:"navigate.popup pagebeforechange.popup",
dismissible:true,
enhanced:false,
history:!$.mobile.browser.oldIE
},
_create:function(){
var a=this.element,
myId=a.attr("id"),
currentOptions=this.options;
currentOptions.history=currentOptions.history&&$.mobile.ajaxEnabled&&$.mobile.hashListeningEnabled;
$.extend(this,{
_scrollTop:0,
_page:a.closest(".ui-page"),
_ui:null,
_fallbackTransition:"",
_currentTransition:false,
_prerequisites:null,
_isOpen:false,
_tolerance:null,
_resizeData:null,
_ignoreResizeTo:0,
_orientationchangeInProgress:false
});
if(this._page.length===0){
this._page=$("body");
}
if(currentOptions.enhanced){
this._ui={
container:a.parent(),
screen:a.parent().prev(),
placeholder:$(this.document[0].getElementById(myId+"-placeholder"))
};
}else{
this._ui=this._enhance(a,myId);
this._applyTransition(currentOptions.transition);
}
this
._setTolerance(currentOptions.tolerance)
._ui.focusElement=this._ui.container;
this._on(this._ui.screen,{"vclick":"_eatEventAndClose"});
this._on(this.window,{
orientationchange:$.proxy(this,"_handleWindowOrientationchange"),
resize:$.proxy(this,"_handleWindowResize"),
keyup:$.proxy(this,"_handleWindowKeyUp")
});
this._on(this.document,{"focusin":"_handleDocumentFocusIn"});
},
_enhance:function(a,b){
var c=this.options,
wrapperClass=c.wrapperClass,
ui={
screen:$("<div class='ui-screen-hidden ui-popup-screen "+
this._themeClassFromOption("ui-overlay-",c.overlayTheme)+"'></div>"),
placeholder:$("<div style='display: none;'><!-- placeholder --></div>"),
container:$("<div class='ui-popup-container ui-popup-hidden ui-popup-truncate"+
(wrapperClass?(" "+wrapperClass):"")+"'></div>")
},
fragment=this.document[0].createDocumentFragment();
fragment.appendChild(ui.screen[0]);
fragment.appendChild(ui.container[0]);
if(b){
ui.screen.attr("id",b+"-screen");
ui.container.attr("id",b+"-popup");
ui.placeholder
.attr("id",b+"-placeholder")
.html("<!-- placeholder for "+b+" -->");
}
this._page[0].appendChild(fragment);
ui.placeholder.insertAfter(a);
a
.detach()
.addClass("ui-popup "+
this._themeClassFromOption("ui-body-",c.theme)+" "+
(c.shadow?"ui-overlay-shadow ":"")+
(c.corners?"ui-corner-all ":""))
.appendTo(ui.container);
return ui;
},
_eatEventAndClose:function(a){
a.preventDefault();
a.stopImmediatePropagation();
if(this.options.dismissible){
this.close();
}
return false;
},
_resizeScreen:function(){
var a=this._ui.screen,
popupHeight=this._ui.container.outerHeight(true),
screenHeight=a.removeAttr("style").height(),
documentHeight=this.document.height()-1;
if(screenHeight<documentHeight){
a.height(documentHeight);
}else if(popupHeight>screenHeight){
a.height(popupHeight);
}
},
_handleWindowKeyUp:function(a){
if(this._isOpen&&a.keyCode===$.mobile.keyCode.ESCAPE){
return this._eatEventAndClose(a);
}
},
_expectResizeEvent:function(){
var a=getWindowCoordinates(this.window);
if(this._resizeData){
if(a.x===this._resizeData.windowCoordinates.x&&
a.y===this._resizeData.windowCoordinates.y&&
a.cx===this._resizeData.windowCoordinates.cx&&
a.cy===this._resizeData.windowCoordinates.cy){
return false;
}else{
clearTimeout(this._resizeData.timeoutId);
}
}
this._resizeData={
timeoutId:this._delay("_resizeTimeout",200),
a:a
};
return true;
},
_resizeTimeout:function(){
if(this._isOpen){
if(!this._expectResizeEvent()){
if(this._ui.container.hasClass("ui-popup-hidden")){
this._ui.container.removeClass("ui-popup-hidden ui-popup-truncate");
this.reposition({positionTo:"window"});
this._ignoreResizeEvents();
}
this._resizeScreen();
this._resizeData=null;
this._orientationchangeInProgress=false;
}
}else{
this._resizeData=null;
this._orientationchangeInProgress=false;
}
},
_stopIgnoringResizeEvents:function(){
this._ignoreResizeTo=0;
},
_ignoreResizeEvents:function(){
if(this._ignoreResizeTo){
clearTimeout(this._ignoreResizeTo);
}
this._ignoreResizeTo=this._delay("_stopIgnoringResizeEvents",1000);
},
_handleWindowResize:function(){
if(this._isOpen&&this._ignoreResizeTo===0){
if((this._expectResizeEvent()||this._orientationchangeInProgress)&&
!this._ui.container.hasClass("ui-popup-hidden")){
this._ui.container
.addClass("ui-popup-hidden ui-popup-truncate")
.removeAttr("style");
}
}
},
_handleWindowOrientationchange:function(){
if(!this._orientationchangeInProgress&&this._isOpen&&this._ignoreResizeTo===0){
this._expectResizeEvent();
this._orientationchangeInProgress=true;
}
},
_handleDocumentFocusIn:function(a){
var b,
targetElement=a.target,
ui=this._ui;
if(!this._isOpen){
return;
}
if(targetElement!==ui.container[0]){
b=$(targetElement);
if(0===b.parents().filter(ui.container[0]).length){
$(this.document[0].activeElement).one("focus",function(){
b.blur();
});
ui.focusElement.focus();
a.preventDefault();
a.stopImmediatePropagation();
return false;
}else if(ui.focusElement[0]===ui.container[0]){
ui.focusElement=b;
}
}
this._ignoreResizeEvents();
},
_themeClassFromOption:function(a,b){
return(b?(b==="none"?"":(a+b)):(a+"inherit"));
},
_applyTransition:function(a){
if(a){
this._ui.container.removeClass(this._fallbackTransition);
if(a!=="none"){
this._fallbackTransition=$.mobile._maybeDegradeTransition(a);
if(this._fallbackTransition==="none"){
this._fallbackTransition="";
}
this._ui.container.addClass(this._fallbackTransition);
}
}
return this;
},
_setOptions:function(a){
var b=this.options,
theElement=this.element,
screen=this._ui.screen;
if(a.wrapperClass!==f){
this._ui.container
.removeClass(b.wrapperClass)
.addClass(a.wrapperClass);
}
if(a.theme!==f){
theElement
.removeClass(this._themeClassFromOption("ui-body-",b.theme))
.addClass(this._themeClassFromOption("ui-body-",a.theme));
}
if(a.overlayTheme!==f){
screen
.removeClass(this._themeClassFromOption("ui-overlay-",b.overlayTheme))
.addClass(this._themeClassFromOption("ui-overlay-",a.overlayTheme));
if(this._isOpen){
screen.addClass("in");
}
}
if(a.shadow!==f){
theElement.toggleClass("ui-overlay-shadow",a.shadow);
}
if(a.corners!==f){
theElement.toggleClass("ui-corner-all",a.corners);
}
if(a.transition!==f){
if(!this._currentTransition){
this._applyTransition(a.transition);
}
}
if(a.tolerance!==f){
this._setTolerance(a.tolerance);
}
if(a.disabled!==f){
if(a.disabled){
this.close();
}
}
return this._super(a);
},
_setTolerance:function(c){
var d={t:30,r:15,b:30,l:15},
ar;
if(c!==f){
ar=String(c).split(",");
$.each(ar,function(a,b){ar[a]=parseInt(b,10)});
switch(ar.length){
case 1:
if(!isNaN(ar[0])){
d.t=d.r=d.b=d.l=ar[0];
}
break;
case 2:
if(!isNaN(ar[0])){
d.t=d.b=ar[0];
}
if(!isNaN(ar[1])){
d.l=d.r=ar[1];
}
break;
case 4:
if(!isNaN(ar[0])){
d.t=ar[0];
}
if(!isNaN(ar[1])){
d.r=ar[1];
}
if(!isNaN(ar[2])){
d.b=ar[2];
}
if(!isNaN(ar[3])){
d.l=ar[3];
}
break;
default:
break;
}
}
this._tolerance=d;
return this;
},
_clampPopupWidth:function(a){
var b,
windowCoordinates=getWindowCoordinates(this.window),
rectangle={
x:this._tolerance.l,
y:windowCoordinates.y+this._tolerance.t,
cx:windowCoordinates.cx-this._tolerance.l-this._tolerance.r,
cy:windowCoordinates.cy-this._tolerance.t-this._tolerance.b
};
if(!a){
this._ui.container.css("max-width",rectangle.cx);
}
b={
cx:this._ui.container.outerWidth(true),
cy:this._ui.container.outerHeight(true)
};
return{rc:rectangle,menuSize:b};
},
_calculateFinalLocation:function(a,b){
var c,
rectangle=b.rc,
menuSize=b.menuSize;
c={
left:fitSegmentInsideSegment(rectangle.cx,menuSize.cx,rectangle.x,a.x),
top:fitSegmentInsideSegment(rectangle.cy,menuSize.cy,rectangle.y,a.y)
};
c.top=Math.max(0,c.top);
c.top-=Math.min(c.top,
Math.max(0,c.top+menuSize.cy-this.document.height()));
return c;
},
_placementCoords:function(a){
return this._calculateFinalLocation(a,this._clampPopupWidth());
},
_createPrerequisites:function(a,b,c){
var d,
self=this;
d={
screen:$.Deferred(),
container:$.Deferred()
};
d.screen.then(function(){
if(d===self._prerequisites){
a();
}
});
d.container.then(function(){
if(d===self._prerequisites){
b();
}
});
$.when(d.screen,d.container).done(function(){
if(d===self._prerequisites){
self._prerequisites=null;
c();
}
});
self._prerequisites=d;
},
_animate:function(a){
this._ui.screen
.removeClass(a.classToRemove)
.addClass(a.screenClassToAdd);
a.prerequisites.screen.resolve();
if(a.transition&&a.transition!=="none"){
if(a.applyTransition){
this._applyTransition(a.transition);
}
if(this._fallbackTransition){
this._ui.container
.addClass(a.containerClassToAdd)
.removeClass(a.classToRemove)
.animationComplete($.proxy(a.prerequisites.container,"resolve"));
return;
}
}
this._ui.container.removeClass(a.classToRemove);
a.prerequisites.container.resolve();
},
_desiredCoords:function(a){
var b,
dst=null,
windowCoordinates=getWindowCoordinates(this.window),
x=a.x,
y=a.y,
pTo=a.positionTo;
if(pTo&&pTo!=="origin"){
if(pTo==="window"){
x=windowCoordinates.cx/2+windowCoordinates.x;
y=windowCoordinates.cy/2+windowCoordinates.y;
}else{
try{
dst=$(pTo);
}catch(err){
dst=null;
}
if(dst){
dst.filter(":visible");
if(dst.length===0){
dst=null;
}
}
}
}
if(dst){
b=dst.offset();
x=b.left+dst.outerWidth()/2;
y=b.top+dst.outerHeight()/2;
}
if($.type(x)!=="number"||isNaN(x)){
x=windowCoordinates.cx/2+windowCoordinates.x;
}
if($.type(y)!=="number"||isNaN(y)){
y=windowCoordinates.cy/2+windowCoordinates.y;
}
return{x:x,y:y};
},
_reposition:function(a){
a={
x:a.x,
y:a.y,
positionTo:a.positionTo
};
this._trigger("beforeposition",f,a);
this._ui.container.offset(this._placementCoords(this._desiredCoords(a)));
},
reposition:function(a){
if(this._isOpen){
this._reposition(a);
}
},
_openPrerequisitesComplete:function(){
var a=this.element.attr("id");
this._ui.container.addClass("ui-popup-active");
this._isOpen=true;
this._resizeScreen();
this._ui.container.attr("tabindex","0").focus();
this._ignoreResizeEvents();
if(a){
this.document.find("[aria-haspopup='true'][aria-owns='"+a+"']").attr("aria-expanded",true);
}
this._trigger("afteropen");
},
_open:function(b){
var c=$.extend({},this.options,b),
androidBlacklist=(function(){
var a=navigator.userAgent,
wkmatch=a.match(/AppleWebKit\/([0-9\.]+)/),
wkversion=!!wkmatch&&wkmatch[1],
androidmatch=a.match(/Android (\d+(?:\.\d+))/),
andversion=!!androidmatch&&androidmatch[1],
chromematch=a.indexOf("Chrome")>-1;
if(androidmatch!==null&&andversion==="4.0"&&wkversion&&wkversion>534.13&&!chromematch){
return true;
}
return false;
}());
this._createPrerequisites(
$.noop,
$.noop,
$.proxy(this,"_openPrerequisitesComplete"));
this._currentTransition=c.transition;
this._applyTransition(c.transition);
this._ui.screen.removeClass("ui-screen-hidden");
this._ui.container.removeClass("ui-popup-truncate");
this._reposition(c);
this._ui.container.removeClass("ui-popup-hidden");
if(this.options.overlayTheme&&androidBlacklist){

this.element.closest(".ui-page").addClass("ui-popup-open");
}
this._animate({
additionalCondition:true,
transition:c.transition,
classToRemove:"",
screenClassToAdd:"in",
containerClassToAdd:"in",
applyTransition:false,
prerequisites:this._prerequisites
});
},
_closePrerequisiteScreen:function(){
this._ui.screen
.removeClass("out")
.addClass("ui-screen-hidden");
},
_closePrerequisiteContainer:function(){
this._ui.container
.removeClass("reverse out")
.addClass("ui-popup-hidden ui-popup-truncate")
.removeAttr("style");
},
_closePrerequisitesDone:function(){
var a=this._ui.container,
id=this.element.attr("id");
a.removeAttr("tabindex");
$.mobile.popup.active=f;
$(":focus",a[0]).add(a[0]).blur();
if(id){
this.document.find("[aria-haspopup='true'][aria-owns='"+id+"']").attr("aria-expanded",false);
}
this._trigger("afterclose");
},
_close:function(a){
this._ui.container.removeClass("ui-popup-active");
this._page.removeClass("ui-popup-open");
this._isOpen=false;
this._createPrerequisites(
$.proxy(this,"_closePrerequisiteScreen"),
$.proxy(this,"_closePrerequisiteContainer"),
$.proxy(this,"_closePrerequisitesDone"));
this._animate({
additionalCondition:this._ui.screen.hasClass("in"),
transition:(a?"none":(this._currentTransition)),
classToRemove:"in",
screenClassToAdd:"out",
containerClassToAdd:"reverse out",
applyTransition:true,
prerequisites:this._prerequisites
});
},
_unenhance:function(){
if(this.options.enhanced){
return;
}
this._setOptions({theme:$.mobile.popup.prototype.options.theme});
this.element
.detach()
.insertAfter(this._ui.placeholder)
.removeClass("ui-popup ui-overlay-shadow ui-corner-all ui-body-inherit");
this._ui.screen.remove();
this._ui.container.remove();
this._ui.placeholder.remove();
},
_destroy:function(){
if($.mobile.popup.active===this){
this.element.one("popupafterclose",$.proxy(this,"_unenhance"));
this.close();
}else{
this._unenhance();
}
return this;
},
_closePopup:function(a,b){
var c,toUrl,
currentOptions=this.options,
immediate=false;
if((a&&a.isDefaultPrevented())||$.mobile.popup.active!==this){
return;
}
A.scrollTo(0,this._scrollTop);
if(a&&a.type==="pagebeforechange"&&b){
if(typeof b.toPage==="string"){
c=b.toPage;
}else{
c=b.toPage.jqmData("url");
}
c=$.mobile.path.parseUrl(c);
toUrl=c.pathname+c.search+c.hash;
if(this._myUrl!==$.mobile.path.makeUrlAbsolute(toUrl)){
immediate=true;
}else{
a.preventDefault();
}
}
this.window.off(currentOptions.closeEvents);
this.element.undelegate(currentOptions.closeLinkSelector,currentOptions.closeLinkEvents);
if(jqmAllowPopUpClosing){
this._close(immediate);
}},
_bindContainerClose:function(){
this.window
.on(this.options.closeEvents,$.proxy(this,"_closePopup")
);
},
widget:function(){
return this._ui.container;
},
open:function(b){
var c,hashkey,activePage,currentIsDialog,hasHash,urlHistory,
self=this,
currentOptions=this.options;
if($.mobile.popup.active||currentOptions.disabled){
return this;
}
$.mobile.popup.active=this;
this._scrollTop=this.window.scrollTop();
if(!(currentOptions.history)){
self._open(b);
self._bindContainerClose();
self.element
.delegate(currentOptions.closeLinkSelector,currentOptions.closeLinkEvents,function(a){
self.close();
a.preventDefault();
});
return this;
}
urlHistory=$.mobile.navigate.history;
hashkey=$.mobile.dialogHashKey;
activePage=$.mobile.activePage;
currentIsDialog=(activePage?activePage.hasClass("ui-dialog"):false);
this._myUrl=c=urlHistory.getActive().url;
hasHash=(c.indexOf(hashkey)>-1)&&!currentIsDialog&&(urlHistory.activeIndex>0);
if(hasHash){
self._open(b);
self._bindContainerClose();
return this;
}
if(c.indexOf(hashkey)===-1&&!currentIsDialog){
c=c+(c.indexOf("#")>-1?hashkey:"#"+hashkey);
}else{
c=$.mobile.path.parseLocation().hash+hashkey;
}
if(urlHistory.activeIndex===0&&c===urlHistory.initialDst){
c+=hashkey;
}
this.window.one("beforenavigate",function(a){
a.preventDefault();
self._open(b);
self._bindContainerClose();
});
this.urlAltered=true;
$.mobile.navigate(c,{role:"dialog"});
return this;
},
close:function(){
if($.mobile.popup.active!==this){
return this;
}
this._scrollTop=this.window.scrollTop();
if(this.options.history&&this.urlAltered){
$.mobile.back();
this.urlAltered=false;
}else{
this._closePopup();
}
return this;
}
});
$.mobile.popup.handleLink=function(a){
var b,
path=$.mobile.path,
popup=$(path.hashToSelector(path.parseUrl(a.attr("href")).hash)).first();
if(popup.length>0&&popup.data("mobile-popup")){
b=a.offset();
popup.popup("open",{
x:b.left+a.outerWidth()/2,
y:b.top+a.outerHeight()/2,
transition:a.jqmData("transition"),
positionTo:a.jqmData("position-to")
});
}
setTimeout(function(){
a.removeClass($.mobile.activeBtnClass);
},300);
};
$.mobile.document.on("pagebeforechange",function(a,b){
if(b.options.role==="popup"){
$.mobile.popup.handleLink(b.options.link);
a.preventDefault();
}
});
})(n);

(function($,f){
var g=".ui-disabled,.ui-state-disabled,.ui-li-divider,.ui-screen-hidden,:jqmData(role='placeholder')",
goToAdjacentItem=function(a,b,c){
var d=a[c+"All"]()
.not(g)
.first();
if(d.length){
b
.blur()
.attr("tabindex","-1");
d.find("a").first().focus();
}
};
$.widget("mobile.selectmenu",$.mobile.selectmenu,{
_create:function(){
var o=this.options;
o.nativeMenu=o.nativeMenu||(this.element.parents(":jqmData(role='popup'),:mobile-popup").length>0);
return this._super();
},
_handleSelectFocus:function(){
this.element.blur();
this.button.focus();
},
_handleKeydown:function(a){
this._super(a);
this._handleButtonVclickKeydown(a);
},
_handleButtonVclickKeydown:function(a){
if(this.options.disabled||this.isOpen){
return;
}
if(a.type==="vclick"||
a.keyCode&&(a.keyCode===$.mobile.keyCode.ENTER||a.keyCode===$.mobile.keyCode.SPACE)){
this._decideFormat();
if(this.menuType==="overlay"){
this.button.attr("href","#"+this.popupId).attr("data-"+($.mobile.ns||"")+"rel","popup");
}else{
this.button.attr("href","#"+this.dialogId).attr("data-"+($.mobile.ns||"")+"rel","dialog");
}
this.isOpen=true;
}
},
_handleListFocus:function(e){
var a=(e.type==="focusin")?
{tabindex:"0",event:"vmouseover"}:
{tabindex:"-1",event:"vmouseout"};
$(e.target)
.attr("tabindex",a.tabindex)
.trigger(a.event);
},
_handleListKeydown:function(a){
var b=$(a.target),
li=b.closest("li");
switch(a.keyCode){
case 38:
goToAdjacentItem(li,b,"prev");
return false;
case 40:
goToAdjacentItem(li,b,"next");
return false;
case 13:
case 32:
b.trigger("click");
return false;
}
},
_handleMenuPageHide:function(){
this.thisPage.page("bindRemove");
},
_handleHeaderCloseClick:function(){
if(this.menuType==="overlay"){
this.close();
return false;
}
},
build:function(){
var c,popupId,dialogId,label,thisPage,isMultiple,menuId,
themeAttr,overlayTheme,overlayThemeAttr,dividerThemeAttr,
menuPage,listbox,list,header,headerTitle,menuPageContent,
menuPageClose,headerClose,self,
o=this.options;
if(o.nativeMenu){
return this._super();
}
self=this;
c=this.selectId;
popupId=c+"-listbox";
dialogId=c+"-dialog";
label=this.label;
thisPage=this.element.closest(".ui-page");
isMultiple=this.element[0].multiple;
menuId=c+"-menu";
themeAttr=o.theme?(" data-"+$.mobile.ns+"theme='"+o.theme+"'"):"";
overlayTheme=o.overlayTheme||o.theme||null;
overlayThemeAttr=overlayTheme?(" data-"+$.mobile.ns+
"overlay-theme='"+overlayTheme+"'"):"";
dividerThemeAttr=(o.dividerTheme&&isMultiple)?(" data-"+$.mobile.ns+"divider-theme='"+o.dividerTheme+"'"):"";
menuPage=$("<div data-"+$.mobile.ns+"role='dialog' class='ui-selectmenu' id='"+dialogId+"'"+themeAttr+overlayThemeAttr+">"+
"<div data-"+$.mobile.ns+"role='header'>"+
"<div class='ui-title'>"+label.getEncodedText()+"</div>"+
"</div>"+
"<div data-"+$.mobile.ns+"role='content'></div>"+
"</div>");
listbox=$("<div id='"+popupId+"' class='ui-selectmenu'></div>").insertAfter(this.select).popup({theme:o.overlayTheme});
list=$("<ul class='ui-selectmenu-list' id='"+menuId+"' role='listbox' aria-labelledby='"+this.buttonId+"'"+themeAttr+dividerThemeAttr+"></ul>").appendTo(listbox);
header=$("<div class='ui-header ui-bar-"+(o.theme?o.theme:"inherit")+"'></div>").prependTo(listbox);
headerTitle=$("<h1 class='ui-title'></h1>").appendTo(header);
if(this.isMultiple){
headerClose=$("<a>",{
"role":"button",
"text":o.closeText,
"href":"#",
"class":"ui-btn ui-corner-all ui-btn-left ui-btn-icon-notext ui-icon-delete"
}).appendTo(header);
}
$.extend(this,{
c:c,
menuId:menuId,
popupId:popupId,
dialogId:dialogId,
thisPage:thisPage,
menuPage:menuPage,
label:label,
isMultiple:isMultiple,
theme:o.theme,
listbox:listbox,
list:list,
header:header,
headerTitle:headerTitle,
headerClose:headerClose,
menuPageContent:menuPageContent,
menuPageClose:menuPageClose,
placeholder:""
});
this.refresh();
if(this._origTabIndex===f){
this._origTabIndex=(this.select[0].getAttribute("tabindex")===null)?false:this.select.attr("tabindex");
}
this.select.attr("tabindex","-1");
this._on(this.select,{focus:"_handleSelectFocus"});
this._on(this.button,{
vclick:"_handleButtonVclickKeydown"
});
this.list.attr("role","listbox");
this._on(this.list,{
focusin:"_handleListFocus",
focusout:"_handleListFocus",
keydown:"_handleListKeydown"
});
this.list
.delegate("li:not(.ui-disabled,.ui-state-disabled,.ui-li-divider)","click",function(a){
var b=self.select[0].selectedIndex,
newIndex=$.mobile.getAttribute(this,"option-index"),
option=self._selectOptions().eq(newIndex)[0];
option.selected=self.isMultiple?!option.selected:true;
if(self.isMultiple){
$(this).find("a")
.toggleClass("ui-checkbox-on",option.selected)
.toggleClass("ui-checkbox-off",!option.selected);
}
if(self.isMultiple||b!==newIndex){
self.select.trigger("change");
}
if(self.isMultiple){
self.list.find("li:not(.ui-li-divider)").eq(newIndex)
.find("a").first().focus();
}
else{
self.close();
}
a.preventDefault();
});
this._on(this.menuPage,{pagehide:"_handleMenuPageHide"});
this._on(this.listbox,{popupafterclose:"close"});
if(this.isMultiple){
this._on(this.headerClose,{click:"_handleHeaderCloseClick"});
}
return this;
},
_isRebuildRequired:function(){
var a=this.list.find("li"),
options=this._selectOptions().not(".ui-screen-hidden");
return options.text()!==a.text();
},
selected:function(){
return this._selectOptions().filter(":selected:not( :jqmData(placeholder='true') )");
},
refresh:function(b){
var c,indices;
if(this.options.nativeMenu){
return this._super(b);
}
c=this;
if(b||this._isRebuildRequired()){
c._buildList();
}
indices=this.selectedIndices();
c.setButtonText();
c.setButtonCount();
c.list.find("li:not(.ui-li-divider)")
.find("a").removeClass($.mobile.activeBtnClass).end()
.attr("aria-selected",false)
.each(function(i){
if($.inArray(i,indices)>-1){
var a=$(this);
a.attr("aria-selected",true);
if(c.isMultiple){
a.find("a").removeClass("ui-checkbox-off").addClass("ui-checkbox-on");
}else{
if(a.hasClass("ui-screen-hidden")){
a.next().find("a").addClass($.mobile.activeBtnClass);
}else{
a.find("a").addClass($.mobile.activeBtnClass);
}
}
}
});
},
close:function(){
if(this.options.disabled||!this.isOpen){
return;
}
var a=this;
if(a.menuType==="page"){
a.menuPage.dialog("close");
a.list.appendTo(a.listbox);
}else{
a.listbox.popup("close");
}
a._focusButton();
a.isOpen=false;
},
open:function(){
this.button.click();
},
_focusMenuItem:function(){
var a=this.list.find("a."+$.mobile.activeBtnClass);
if(a.length===0){
a=this.list.find("li:not("+g+") a.ui-btn");
}
a.first().focus();
},
_decideFormat:function(){
var a=this,
$window=this.window,
selfListParent=a.list.parent(),
menuHeight=selfListParent.outerHeight(),
scrollTop=$window.scrollTop(),
btnOffset=a.button.offset().top,
screenHeight=$window.height();
if(menuHeight>screenHeight-80||!$.support.scrollTop){
a.menuPage.appendTo($.mobile.pageContainer).page();
a.menuPageContent=a.menuPage.find(".ui-content");
a.menuPageClose=a.menuPage.find(".ui-header a");
a.thisPage.unbind("pagehide.remove");
if(scrollTop===0&&btnOffset>screenHeight){
a.thisPage.one("pagehide",function(){
$(this).jqmData("lastScroll",btnOffset);
});
}
a.menuPage.one({
pageshow:$.proxy(this,"_focusMenuItem"),
pagehide:$.proxy(this,"close")
});
a.menuType="page";
a.menuPageContent.append(a.list);
a.menuPage.find("div .ui-title").text(a.label.text());
}else{
a.menuType="overlay";
a.listbox.one({popupafteropen:$.proxy(this,"_focusMenuItem")});
}
},
_buildList:function(){
var a=this,
o=this.options,
placeholder=this.placeholder,
needPlaceholder=true,
dataIcon="false",
$options,numOptions,select,
dataPrefix="data-"+$.mobile.ns,
dataIndexAttr=dataPrefix+"option-index",
dataIconAttr=dataPrefix+"icon",
dataRoleAttr=dataPrefix+"role",
dataPlaceholderAttr=dataPrefix+"placeholder",
fragment=B.createDocumentFragment(),
isPlaceholderItem=false,
optGroup,
i,
option,$option,parent,text,anchor,classes,
optLabel,divider,item;
a.list.empty().filter(".ui-listview").listview("destroy");
$options=this._selectOptions();
numOptions=$options.length;
select=this.select[0];
for(i=0;i<numOptions;i++,isPlaceholderItem=false){
option=$options[i];
$option=$(option);
if($option.hasClass("ui-screen-hidden")){
continue;
}
parent=option.parentNode;
text=$option.text();
anchor=B.createElement("a");
classes=[];
anchor.setAttribute("href","#");
anchor.appendChild(B.createTextNode(text));
if(parent!==select&&parent.nodeName.toLowerCase()==="optgroup"){
optLabel=parent.getAttribute("label");
if(optLabel!==optGroup){
divider=B.createElement("li");
divider.setAttribute(dataRoleAttr,"list-divider");
divider.setAttribute("role","option");
divider.setAttribute("tabindex","-1");
divider.appendChild(B.createTextNode(optLabel));
fragment.appendChild(divider);
optGroup=optLabel;
}
}
if(needPlaceholder&&(!option.getAttribute("value")||text.length===0||$option.jqmData("placeholder"))){
needPlaceholder=false;
isPlaceholderItem=true;
if(null===option.getAttribute(dataPlaceholderAttr)){
this._removePlaceholderAttr=true;
}
option.setAttribute(dataPlaceholderAttr,true);
if(o.hidePlaceholderMenuItems){
classes.push("ui-screen-hidden");
}
if(placeholder!==text){
placeholder=a.placeholder=text;
}
}
item=B.createElement("li");
if(option.disabled){
classes.push("ui-state-disabled");
item.setAttribute("aria-disabled",true);
}
item.setAttribute(dataIndexAttr,i);
item.setAttribute(dataIconAttr,dataIcon);
if(isPlaceholderItem){
item.setAttribute(dataPlaceholderAttr,true);
}
item.className=classes.join(" ");
item.setAttribute("role","option");
anchor.setAttribute("tabindex","-1");
if(this.isMultiple){
$(anchor).addClass("ui-btn ui-checkbox-off ui-btn-icon-right");
}
item.appendChild(anchor);
fragment.appendChild(item);
}
a.list[0].appendChild(fragment);
if(!this.isMultiple&&!placeholder.length){
this.header.addClass("ui-screen-hidden");
}else{
this.headerTitle.text(this.placeholder);
}
a.list.listview();
},
_button:function(){
return this.options.nativeMenu?
this._super():
$("<a>",{
"href":"#",
"role":"button",
"id":this.buttonId,
"aria-haspopup":"true",
"aria-owns":this.menuId
});
},
_destroy:function(){
if(!this.options.nativeMenu){
this.close();
if(this._origTabIndex!==f){
if(this._origTabIndex!==false){
this.select.attr("tabindex",this._origTabIndex);
}else{
this.select.removeAttr("tabindex");
}
}
if(this._removePlaceholderAttr){
this._selectOptions().removeAttr("data-"+$.mobile.ns+"placeholder");
}
this.listbox.remove();
this.menuPage.remove();
}
this._super();
}
});
})(n);
(function($,d){
var e={
"ui-shadow":"shadow",
"ui-corner-all":"corners",
"ui-btn-inline":"inline",
"ui-shadow-icon":"iconshadow",
"ui-mini":"mini"
},
getAttrFixed=function(){
var a=$.mobile.getAttribute.apply(this,arguments);
return(a==null?d:a);
},
capitalLettersRE=/[A-Z]/g;
function optionsToClasses(a,b){
var c=b?b:[];
c.push("ui-btn");
if(a.theme){
c.push("ui-btn-"+a.theme);
}
if(a.icon){
c=c.concat([
"ui-icon-"+a.icon,
"ui-btn-icon-"+a.iconpos
]);
if(a.iconshadow){
c.push("ui-shadow-icon");
}
}
if(a.inline){
c.push("ui-btn-inline");
}
if(a.shadow){
c.push("ui-shadow");
}
if(a.corners){
c.push("ui-corner-all");
}
if(a.mini){
c.push("ui-mini");
}
return c;
}
function classNameToOptions(a){
var b,map,unknownClass,
alreadyEnhanced=false,
noIcon=true,
o={
icon:"",
inline:false,
shadow:false,
corners:false,
iconshadow:false,
mini:false
},
unknownClasses=[];
a=a.split(" ");
for(b=0;b<a.length;b++){
unknownClass=true;
map=e[a[b]];
if(map!==d){
unknownClass=false;
o[map]=true;
}else if(a[b].indexOf("ui-btn-icon-")===0){
unknownClass=false;
noIcon=false;
o.iconpos=a[b].substring(12);
}else if(a[b].indexOf("ui-icon-")===0){
unknownClass=false;
o.icon=a[b].substring(8);
}else if(a[b].indexOf("ui-btn-")===0&&a[b].length===8){
unknownClass=false;
o.theme=a[b].substring(7);
}else if(a[b]==="ui-btn"){
unknownClass=false;
alreadyEnhanced=true;
}
if(unknownClass){
unknownClasses.push(a[b]);
}
}
if(noIcon){
o.icon="";
}
return{
options:o,
unknownClasses:unknownClasses,
alreadyEnhanced:alreadyEnhanced
};
}
function camelCase2Hyphenated(c){
return"-"+c.toLowerCase();
}
$.fn.buttonMarkup=function(a,b){
var c,data,el,retrievedOptions,optionKey,
defaults=$.fn.buttonMarkup.defaults;
for(c=0;c<this.length;c++){
el=this[c];
data=b?
{alreadyEnhanced:false,unknownClasses:[]}:
classNameToOptions(el.className);
retrievedOptions=$.extend({},
(data.alreadyEnhanced?data.options:{}),
a);
if(!data.alreadyEnhanced){
for(optionKey in defaults){
if(retrievedOptions[optionKey]===d){
retrievedOptions[optionKey]=getAttrFixed(el,
optionKey.replace(capitalLettersRE,camelCase2Hyphenated)
);
}
}
}
el.className=optionsToClasses(
$.extend({},
defaults,
retrievedOptions
),
data.unknownClasses).join(" ");
if(el.tagName.toLowerCase()!=="button"){
el.setAttribute("role","button");
}
}
return this;
};
$.fn.buttonMarkup.defaults={
icon:"",
iconpos:"left",
theme:null,
inline:false,
shadow:true,
corners:true,
iconshadow:false,
mini:false
};
$.extend($.fn.buttonMarkup,{
initSelector:"a:jqmData(role='button'), .ui-bar > a, .ui-bar > :jqmData(role='controlgroup') > a, button"
});
})(n);
(function($,d){
$.widget("mobile.controlgroup",$.extend({
options:{
enhanced:false,
theme:null,
shadow:false,
corners:true,
excludeInvisible:true,
type:"vertical",
mini:false
},
_create:function(){
var c=this.element,
opts=this.options;
if($.fn.buttonMarkup){
this.element.find($.fn.buttonMarkup.initSelector).buttonMarkup();
}
$.each(this._childWidgets,$.proxy(function(a,b){
if($.mobile[b]){
this.element.find($.mobile[b].initSelector).not($.mobile.page.prototype.keepNativeSelector())[b]();
}
},this));
$.extend(this,{
_ui:null,
_initialRefresh:true
});
if(opts.enhanced){
this._ui={
groupLegend:c.children(".ui-controlgroup-label").children(),
childWrapper:c.children(".ui-controlgroup-controls")
};
}else{
this._ui=this._enhance();
}
},
_childWidgets:["checkboxradio","selectmenu","button"],
_themeClassFromOption:function(a){
return(a?(a==="none"?"":"ui-group-theme-"+a):"");
},
_enhance:function(){
var a=this.element,
opts=this.options,
ui={
groupLegend:a.children("legend"),
childWrapper:a
.addClass("ui-controlgroup "+
"ui-controlgroup-"+
(opts.type==="horizontal"?"horizontal":"vertical")+" "+
this._themeClassFromOption(opts.theme)+" "+
(opts.corners?"ui-corner-all ":"")+
(opts.mini?"ui-mini ":""))
.wrapInner("<div "+
"class='ui-controlgroup-controls "+
(opts.shadow===true?"ui-shadow":"")+"'></div>")
.children()
};
if(ui.groupLegend.length>0){
$("<div role='heading' class='ui-controlgroup-label'></div>")
.append(ui.groupLegend)
.prependTo(a);
}
return ui;
},
_init:function(){
this.refresh();
},
_setOptions:function(a){
var b,returnValue,
elem=this.element;
if(a.type!==d){
elem
.removeClass("ui-controlgroup-horizontal ui-controlgroup-vertical")
.addClass("ui-controlgroup-"+(a.type==="horizontal"?"horizontal":"vertical"));
b=true;
}
if(a.theme!==d){
elem
.removeClass(this._themeClassFromOption(this.options.theme))
.addClass(this._themeClassFromOption(a.theme));
}
if(a.corners!==d){
elem.toggleClass("ui-corner-all",a.corners);
}
if(a.mini!==d){
elem.toggleClass("ui-mini",a.mini);
}
if(a.shadow!==d){
this._ui.childWrapper.toggleClass("ui-shadow",a.shadow);
}
if(a.excludeInvisible!==d){
this.options.excludeInvisible=a.excludeInvisible;
b=true;
}
returnValue=this._super(a);
if(b){
this.refresh();
}
return returnValue;
},
container:function(){
return this._ui.childWrapper;
},
refresh:function(){
var a=this.container(),
els=a.find(".ui-btn").not(".ui-slider-handle"),
create=this._initialRefresh;
if($.mobile.checkboxradio){
a.find(":mobile-checkboxradio").checkboxradio("refresh");
}
this._addFirstLastClasses(els,
this.options.excludeInvisible?this._getVisibles(els,create):els,
create);
this._initialRefresh=false;
},
_destroy:function(){
var a,buttons,
opts=this.options;
if(opts.enhanced){
return this;
}
a=this._ui;
buttons=this.element
.removeClass("ui-controlgroup "+
"ui-controlgroup-horizontal ui-controlgroup-vertical ui-corner-all ui-mini "+
this._themeClassFromOption(opts.theme))
.find(".ui-btn")
.not(".ui-slider-handle");
this._removeFirstLastClasses(buttons);
a.groupLegend.unwrap();
a.childWrapper.children().unwrap();
}
},$.mobile.behaviors.addFirstLastClasses));
})(n);
(function($,b){
$.widget("mobile.toolbar",{
initSelector:":jqmData(role='footer'), :jqmData(role='header')",
options:{
theme:null,
addBackBtn:false,
backBtnTheme:null,
backBtnText:"Back"
},
_create:function(){
var a,rightbtn,
role=this.element.is(":jqmData(role='header')")?"header":"footer",
page=this.element.closest(".ui-page");
if(page.length===0){
page=false;
this._on(this.document,{
"pageshow":"refresh"
});
}
$.extend(this,{
role:role,
page:page,
a:a,
rightbtn:rightbtn
});
this.element.attr("role",role==="header"?"banner":"contentinfo").addClass("ui-"+role);
this.refresh();
this._setOptions(this.options);
},
_setOptions:function(o){
if(o.addBackBtn!==b){
if(this.options.addBackBtn&&
this.role==="header"&&
$(".ui-page").length>1&&
this.page[0].getAttribute("data-"+$.mobile.ns+"url")!==$.mobile.path.stripHash(location.hash)&&
!this.leftbtn){
this._addBackButton();
}else{
this.element.find(".ui-toolbar-back-btn").remove();
}
}
if(o.backBtnTheme!=null){
this.element
.find(".ui-toolbar-back-btn")
.addClass("ui-btn ui-btn-"+o.backBtnTheme);
}
if(o.backBtnText!==b){
this.element.find(".ui-toolbar-back-btn .ui-btn-text").text(o.backBtnText);
}
if(o.theme!==b){
var a=this.options.theme?this.options.theme:"inherit",
newTheme=o.theme?o.theme:"inherit";
this.element.removeClass("ui-bar-"+a).addClass("ui-bar-"+newTheme);
}
this._super(o);
},
refresh:function(){
if(this.role==="header"){
this._addHeaderButtonClasses();
}
if(!this.page){
this._setRelative();
if(this.role==="footer"){
this.element.appendTo("body");
}
}
this._addHeadingClasses();
this._btnMarkup();
},
_setRelative:function(){
$("[data-"+$.mobile.ns+"role='page']").css({"position":"relative"});
},
_btnMarkup:function(){
this.element
.children("a")
.filter(":not([data-"+$.mobile.ns+"role='none'])")
.attr("data-"+$.mobile.ns+"role","button");
this.element.trigger("create");
},
_addHeaderButtonClasses:function(){
var a=this.element.children("a, button");
this.leftbtn=a.hasClass("ui-btn-left");
this.rightbtn=a.hasClass("ui-btn-right");
this.leftbtn=this.leftbtn||a.eq(0).not(".ui-btn-right").addClass("ui-btn-left").length;
this.rightbtn=this.rightbtn||a.eq(1).addClass("ui-btn-right").length;
},
_addBackButton:function(){
var a=this.options,
theme=a.backBtnTheme||a.theme;
$("<a role='button' href='javascript:void(0);' "+
"class='ui-btn ui-corner-all ui-shadow ui-btn-left "+
(theme?"ui-btn-"+theme+" ":"")+
"ui-toolbar-back-btn ui-icon-carat-l ui-btn-icon-left' "+
"data-"+$.mobile.ns+"rel='back'>"+a.backBtnText+"</a>")
.prependTo(this.element);
},
_addHeadingClasses:function(){
this.element.children("h1, h2, h3, h4, h5, h6")
.addClass("ui-title")
.attr({
"role":"heading",
"aria-level":"1"
});
}
});
})(n);
(function($,c){
$.widget("mobile.toolbar",$.mobile.toolbar,{
options:{
position:null,
visibleOnPageShow:true,
disablePageZoom:true,
transition:"slide",fullscreen:false,
tapToggle:true,
tapToggleBlacklist:"a, button, input, select, textarea, .ui-header-fixed, .ui-footer-fixed, .ui-flipswitch, .ui-popup, .ui-panel, .ui-panel-dismiss-open",
hideDuringFocus:"input, textarea, select",
updatePagePadding:true,
trackPersistentToolbars:true,
supportBlacklist:function(){
return!$.support.fixedPosition;
}
},
_create:function(){
this._super();
if(this.options.position==="fixed"&&!this.options.supportBlacklist()){
this._makeFixed();
}
},
_makeFixed:function(){
this.element.addClass("ui-"+this.role+"-fixed");
this.updatePagePadding();
this._addTransitionClass();
this._bindPageEvents();
this._bindToggleHandlers();
},
_setOptions:function(o){
if(o.position==="fixed"&&this.options.position!=="fixed"){
this._makeFixed();
}
if(this.options.position==="fixed"&&!this.options.supportBlacklist()){
var a=(!!this.page)?this.page:($(".ui-page-active").length>0)?$(".ui-page-active"):$(".ui-page").eq(0);
if(o.fullscreen!==c){
if(o.fullscreen){
this.element.addClass("ui-"+this.role+"-fullscreen");
a.addClass("ui-page-"+this.role+"-fullscreen");
}
else{
this.element.removeClass("ui-"+this.role+"-fullscreen");
a.removeClass("ui-page-"+this.role+"-fullscreen").addClass("ui-page-"+this.role+"-fixed");
}
}
}
this._super(o);
},
_addTransitionClass:function(){
var a=this.options.transition;
if(a&&a!=="none"){
if(a==="slide"){
a=this.element.hasClass("ui-header")?"slidedown":"slideup";
}
this.element.addClass(a);
}
},
_bindPageEvents:function(){
var a=(!!this.page)?this.element.closest(".ui-page"):this.document;
this._on(a,{
"pagebeforeshow":"_handlePageBeforeShow",
"webkitAnimationStart":"_handleAnimationStart",
"animationstart":"_handleAnimationStart",
"updatelayout":"_handleAnimationStart",
"pageshow":"_handlePageShow",
"pagebeforehide":"_handlePageBeforeHide"
});
},
_handlePageBeforeShow:function(){
var o=this.options;
if(o.disablePageZoom){
$.mobile.zoom.disable(true);
}
if(!o.visibleOnPageShow){
this.hide(true);
}
},
_handleAnimationStart:function(){
if(this.options.updatePagePadding){
this.updatePagePadding((!!this.page)?this.page:".ui-page-active");
}
},
_handlePageShow:function(){
this.updatePagePadding((!!this.page)?this.page:".ui-page-active");
if(this.options.updatePagePadding){
this._on(this.window,{"throttledresize":"updatePagePadding"});
}
},
_handlePageBeforeHide:function(e,a){
var o=this.options,
thisFooter,thisHeader,nextFooter,nextHeader;
if(o.disablePageZoom){
$.mobile.zoom.enable(true);
}
if(o.updatePagePadding){
this._off(this.window,"throttledresize");
}
if(o.trackPersistentToolbars){
thisFooter=$(".ui-footer-fixed:jqmData(id)",this.page);
thisHeader=$(".ui-header-fixed:jqmData(id)",this.page);
nextFooter=thisFooter.length&&a.nextPage&&$(".ui-footer-fixed:jqmData(id='"+thisFooter.jqmData("id")+"')",a.nextPage)||$();
nextHeader=thisHeader.length&&a.nextPage&&$(".ui-header-fixed:jqmData(id='"+thisHeader.jqmData("id")+"')",a.nextPage)||$();
if(nextFooter.length||nextHeader.length){
nextFooter.add(nextHeader).appendTo($.mobile.pageContainer);
a.nextPage.one("pageshow",function(){
nextHeader.prependTo(this);
nextFooter.appendTo(this);
});
}
}
},
_visible:true,
updatePagePadding:function(a){
var b=this.element,
header=(this.role==="header"),
pos=parseFloat(b.css(header?"top":"bottom"));
if(this.options.fullscreen){return}
a=(a&&a.type===c&&a)||this.page||b.closest(".ui-page");
a=(!!this.page)?this.page:".ui-page-active";
$(a).css("padding-"+(header?"top":"bottom"),b.outerHeight()+pos);
},
_useTransition:function(a){
var b=this.window,
$el=this.element,
scroll=b.scrollTop(),
elHeight=$el.height(),
pHeight=(!!this.page)?$el.closest(".ui-page").height():$(".ui-page-active").height(),
viewportHeight=$.mobile.getScreenHeight();
return!a&&
(this.options.transition&&this.options.transition!=="none"&&
(
(this.role==="header"&&!this.options.fullscreen&&scroll>elHeight)||
(this.role==="footer"&&!this.options.fullscreen&&scroll+viewportHeight<pHeight-elHeight)
)||this.options.fullscreen
);
},
show:function(a){
var b="ui-fixed-hidden",
$el=this.element;
if(this._useTransition(a)){
$el
.removeClass("out "+b)
.addClass("in")
.animationComplete(function(){
$el.removeClass("in");
});
}
else{
$el.removeClass(b);
}
this._visible=true;
},
hide:function(a){
var b="ui-fixed-hidden",
$el=this.element,
outclass="out"+(this.options.transition==="slide"?" reverse":"");
if(this._useTransition(a)){
$el
.addClass(outclass)
.removeClass("in")
.animationComplete(function(){
$el.addClass(b).removeClass(outclass);
});
}
else{
$el.addClass(b).removeClass(outclass);
}
this._visible=false;
},
toggle:function(){
this[this._visible?"hide":"show"]();
},
_bindToggleHandlers:function(){
var a=this,
o=a.options,
delayShow,delayHide,
isVisible=true,
page=(!!this.page)?this.page:$(".ui-page");
page
.bind("vclick",function(e){
if(o.tapToggle&&!$(e.target).closest(o.tapToggleBlacklist).length){
a.toggle();
}
})
.bind("focusin focusout",function(e){
if(screen.width<1025&&$(e.target).is(o.hideDuringFocus)&&!$(e.target).closest(".ui-header-fixed, .ui-footer-fixed").length){
if(e.type==="focusout"&&!isVisible){
isVisible=true;
clearTimeout(delayHide);
delayShow=setTimeout(function(){
a.show();
},0);
}else if(e.type==="focusin"&&!!isVisible){
clearTimeout(delayShow);
isVisible=false;
delayHide=setTimeout(function(){
a.hide();
},0);
}
}
});
},
_setRelative:function(){
if(this.options.position!=="fixed"){
$("[data-"+$.mobile.ns+"role='page']").css({"position":"relative"});
}
},
_destroy:function(){
var a=this.element,
header=a.hasClass("ui-header");
a.closest(".ui-page").css("padding-"+(header?"top":"bottom"),"");
a.removeClass("ui-header-fixed ui-footer-fixed ui-header-fullscreen ui-footer-fullscreen in out fade slidedown slideup ui-fixed-hidden");
a.closest(".ui-page").removeClass("ui-page-header-fixed ui-page-footer-fixed ui-page-header-fullscreen ui-page-footer-fullscreen");
}
});
})(n);
(function($,c){
$.widget("mobile.toolbar",$.mobile.toolbar,{
_makeFixed:function(){
this._super();
this._workarounds();
},
_workarounds:function(){
var a=navigator.userAgent,
platform=navigator.platform,
wkmatch=a.match(/AppleWebKit\/([0-9]+)/),
wkversion=!!wkmatch&&wkmatch[1],
os=null,
self=this;
if(platform.indexOf("iPhone")>-1||platform.indexOf("iPad")>-1||platform.indexOf("iPod")>-1){
os="ios";
}else if(a.indexOf("Android")>-1){
os="android";
}else{
return;
}
if(os==="ios"){
self._bindScrollWorkaround();
}else if(os==="android"&&wkversion&&wkversion<534){
self._bindScrollWorkaround();
self._bindListThumbWorkaround();
}else{
return;
}
},
_viewportOffset:function(){
var a=this.element,
header=a.hasClass("ui-header"),
offset=Math.abs(a.offset().top-this.window.scrollTop());
if(!header){
offset=Math.round(offset-this.window.height()+a.outerHeight())-60;
}
return offset;
},
_bindScrollWorkaround:function(){
var b=this;
this._on(this.window,{scrollstop:function(){
var a=b._viewportOffset();
if(a>2&&b._visible){
b._triggerRedraw();
}
}});
},
_bindListThumbWorkaround:function(){
this.element.closest(".ui-page").addClass("ui-android-2x-fixed");
},
_triggerRedraw:function(){
var a=parseFloat($(".ui-page-active").css("padding-bottom"));
$(".ui-page-active").css("padding-bottom",(a+1)+"px");
setTimeout(function(){
$(".ui-page-active").css("padding-bottom",a+"px");
},0);
},
destroy:function(){
this._super();
this.element.closest(".ui-page-active").removeClass("ui-android-2x-fix");
}
});
})(n);
(function($,e){
var f=($.mobile.browser.oldIE&&$.mobile.browser.oldIE<=8),
uiTemplate=$(
"<div class='ui-popup-arrow-guide'></div>"+
"<div class='ui-popup-arrow-container"+(f?" ie":"")+"'>"+
"<div class='ui-popup-arrow'></div>"+
"</div>"
);
function getArrow(){
var a=uiTemplate.clone(),
gd=a.eq(0),
ct=a.eq(1),
ar=ct.children();
return{arEls:ct.add(gd),gd:gd,ct:ct,ar:ar};
}
$.widget("mobile.popup",$.mobile.popup,{
options:{
arrow:""
},
_create:function(){
var a,
ret=this._super();
if(this.options.arrow){
this._ui.arrow=a=this._addArrow();
}
return ret;
},
_addArrow:function(){
var a,
opts=this.options,
ar=getArrow();
a=this._themeClassFromOption("ui-body-",opts.theme);
ar.ar.addClass(a+(opts.shadow?" ui-overlay-shadow":""));
ar.arEls.hide().appendTo(this.element);
return ar;
},
_unenhance:function(){
var a=this._ui.arrow;
if(a){
a.arEls.remove();
}
return this._super();
},
_tryAnArrow:function(p,a,b,s,c){
var d,r,diff,desiredForArrow={},tip={};
if(s.arFull[p.dimKey]>s.guideDims[p.dimKey]){
return c;
}
desiredForArrow[p.fst]=b[p.fst]+
(s.arHalf[p.oDimKey]+s.menuHalf[p.oDimKey])*p.offsetFactor-
s.contentBox[p.fst]+(s.clampInfo.menuSize[p.oDimKey]-s.contentBox[p.oDimKey])*p.arrowOffsetFactor;
desiredForArrow[p.snd]=b[p.snd];
d=s.result||this._calculateFinalLocation(desiredForArrow,s.clampInfo);
r={x:d.left,y:d.top};
tip[p.fst]=r[p.fst]+s.contentBox[p.fst]+p.tipOffset;
tip[p.snd]=Math.max(d[p.prop]+s.guideOffset[p.prop]+s.arHalf[p.dimKey],
Math.min(d[p.prop]+s.guideOffset[p.prop]+s.guideDims[p.dimKey]-s.arHalf[p.dimKey],
b[p.snd]));
diff=Math.abs(b.x-tip.x)+Math.abs(b.y-tip.y);
if(!c||diff<c.diff){
tip[p.snd]-=s.arHalf[p.dimKey]+d[p.prop]+s.contentBox[p.snd];
c={dir:a,diff:diff,result:d,posProp:p.prop,posVal:tip[p.snd]};
}
return c;
},
_getPlacementState:function(a){
var b,gdOffset,
ar=this._ui.arrow,
state={
clampInfo:this._clampPopupWidth(!a),
arFull:{cx:ar.ct.width(),cy:ar.ct.height()},
guideDims:{cx:ar.gd.width(),cy:ar.gd.height()},
guideOffset:ar.gd.offset()
};
b=this.element.offset();
ar.gd.css({left:0,top:0,right:0,bottom:0});
gdOffset=ar.gd.offset();
state.contentBox={
x:gdOffset.left-b.left,
y:gdOffset.top-b.top,
cx:ar.gd.width(),
cy:ar.gd.height()
};
ar.gd.removeAttr("style");
state.guideOffset={left:state.guideOffset.left-b.left,top:state.guideOffset.top-b.top};
state.arHalf={cx:state.arFull.cx/2,cy:state.arFull.cy/2};
state.menuHalf={cx:state.clampInfo.menuSize.cx/2,cy:state.clampInfo.menuSize.cy/2};
return state;
},
_placementCoords:function(c){
var d,best,params,elOffset,bgRef,
optionValue=this.options.arrow,
ar=this._ui.arrow;
if(!ar){
return this._super(c);
}
ar.arEls.show();
bgRef={};
d=this._getPlacementState(true);
params={
"l":{fst:"x",snd:"y",prop:"top",dimKey:"cy",oDimKey:"cx",offsetFactor:1,tipOffset:-d.arHalf.cx,arrowOffsetFactor:0},
"r":{fst:"x",snd:"y",prop:"top",dimKey:"cy",oDimKey:"cx",offsetFactor:-1,tipOffset:d.arHalf.cx+d.contentBox.cx,arrowOffsetFactor:1},
"b":{fst:"y",snd:"x",prop:"left",dimKey:"cx",oDimKey:"cy",offsetFactor:-1,tipOffset:d.arHalf.cy+d.contentBox.cy,arrowOffsetFactor:1},
"t":{fst:"y",snd:"x",prop:"left",dimKey:"cx",oDimKey:"cy",offsetFactor:1,tipOffset:-d.arHalf.cy,arrowOffsetFactor:0}
};
$.each((optionValue===true?"l,t,r,b":optionValue).split(","),
$.proxy(function(a,b){
best=this._tryAnArrow(params[b],b,c,d,best);
},this));
if(!best){
ar.arEls.hide();
return this._super(c);
}
ar.ct
.removeClass("ui-popup-arrow-l ui-popup-arrow-t ui-popup-arrow-r ui-popup-arrow-b")
.addClass("ui-popup-arrow-"+best.dir)
.removeAttr("style").css(best.posProp,best.posVal)
.show();
if(!f){
elOffset=this.element.offset();
bgRef[params[best.dir].fst]=ar.ct.offset();
bgRef[params[best.dir].snd]={
left:elOffset.left+d.contentBox.x,
top:elOffset.top+d.contentBox.y
};
}
return best.result;
},
_setOptions:function(a){
var b,
oldTheme=this.options.theme,
ar=this._ui.arrow,
ret=this._super(a);
if(a.arrow!==e){
if(!ar&&a.arrow){
this._ui.arrow=this._addArrow();
return;
}else if(ar&&!a.arrow){
ar.arEls.remove();
this._ui.arrow=null;
}
}
ar=this._ui.arrow;
if(ar){
if(a.theme!==e){
oldTheme=this._themeClassFromOption("ui-body-",oldTheme);
b=this._themeClassFromOption("ui-body-",a.theme);
ar.ar.removeClass(oldTheme).addClass(b);
}
if(a.shadow!==e){
ar.ar.toggleClass("ui-overlay-shadow",a.shadow);
}
}
return ret;
},
_destroy:function(){
var a=this._ui.arrow;
if(a){
a.arEls.remove();
}
return this._super();
}
});
})(n);
(function($,c){
$.widget("mobile.panel",{
options:{
classes:{
panel:"ui-panel",
panelOpen:"ui-panel-open",
panelClosed:"ui-panel-closed",
panelFixed:"ui-panel-fixed",
panelInner:"ui-panel-inner",
modal:"ui-panel-dismiss",
modalOpen:"ui-panel-dismiss-open",
pageContainer:"ui-panel-page-container",
pageWrapper:"ui-panel-wrapper",
pageFixedToolbar:"ui-panel-fixed-toolbar",
pageContentPrefix:"ui-panel-page-content",
animate:"ui-panel-animate"
},
animate:true,
theme:null,
position:"left",
dismissible:true,
display:"reveal",swipeClose:true,
positionFixed:false
},
_closeLink:null,
_parentPage:null,
_page:null,
_modal:null,
_panelInner:null,
_wrapper:null,
_fixedToolbars:null,
_create:function(){
var a=this.element,
parentPage=a.closest(".ui-page, :jqmData(role='page')");
$.extend(this,{
_closeLink:a.find(":jqmData(rel='close')"),
_parentPage:(parentPage.length>0)?parentPage:false,
_openedPage:null,
_page:this._getPage,
_panelInner:this._getPanelInner(),
_fixedToolbars:this._getFixedToolbars
});
if(this.options.display!=="overlay"){
this._getWrapper();
}
this._addPanelClasses();
if($.support.cssTransform3d&&!!this.options.animate){
this.element.addClass(this.options.classes.animate);
}
this._bindUpdateLayout();
this._bindCloseEvents();
this._bindLinkListeners();
this._bindPageEvents();
if(!!this.options.dismissible){
this._createModal();
}
this._bindSwipeEvents();
},
_getPanelInner:function(){
var a=this.element.find("."+this.options.classes.panelInner);
if(a.length===0){
a=this.element.children().wrapAll("<div class='"+this.options.classes.panelInner+"' />").parent();
}
return a;
},
_createModal:function(){
var a=this,
target=a._parentPage?a._parentPage.parent():a.element.parent();
a._modal=$("<div class='"+a.options.classes.modal+"'></div>")
.on("mousedown",function(){
a.close();
})
.appendTo(target);
},
_getPage:function(){
var a=this._openedPage||this._parentPage||$("."+$.mobile.activePageClass);
return a;
},
_getWrapper:function(){
var a=this._page().find("."+this.options.classes.pageWrapper);
if(a.length===0){
a=this._page().children(".ui-header:not(.ui-header-fixed), .ui-content:not(.ui-popup), .ui-footer:not(.ui-footer-fixed)")
.wrapAll("<div class='"+this.options.classes.pageWrapper+"'></div>")
.parent();
}
this._wrapper=a;
},
_getFixedToolbars:function(){
var a=$("body").children(".ui-header-fixed, .ui-footer-fixed"),
intFixedToolbars=this._page().find(".ui-header-fixed, .ui-footer-fixed"),
fixedToolbars=a.add(intFixedToolbars).addClass(this.options.classes.pageFixedToolbar);
return fixedToolbars;
},
_getPosDisplayClasses:function(a){
return a+"-position-"+this.options.position+" "+a+"-display-"+this.options.display;
},
_getPanelClasses:function(){
var a=this.options.classes.panel+
" "+this._getPosDisplayClasses(this.options.classes.panel)+
" "+this.options.classes.panelClosed+
" "+"ui-body-"+(this.options.theme?this.options.theme:"inherit");
if(!!this.options.positionFixed){
a+=" "+this.options.classes.panelFixed;
}
return a;
},
_addPanelClasses:function(){
this.element.addClass(this._getPanelClasses());
},
_handleCloseClickAndEatEvent:function(a){
if(!a.isDefaultPrevented()){
a.preventDefault();
this.close();
return false;
}
},
_handleCloseClick:function(a){
if(!a.isDefaultPrevented()){
this.close();
}
},
_bindCloseEvents:function(){
this._on(this._closeLink,{
"click":"_handleCloseClick"
});
this._on({
"click a:jqmData(ajax='false')":"_handleCloseClick"
});
},
_positionPanel:function(a){
var b=this,
panelInnerHeight=b._panelInner.outerHeight(),
expand=panelInnerHeight>$.mobile.getScreenHeight();
if(expand||!b.options.positionFixed){
if(expand){
b._unfixPanel();
$.mobile.resetActivePageHeight(panelInnerHeight);
}
if(a){
this.window[0].scrollTo(0,$.mobile.defaultHomeScroll);
}
}else{
b._fixPanel();
}
},
_bindFixListener:function(){
this._on($(A),{"throttledresize":"_positionPanel"});
},
_unbindFixListener:function(){
this._off($(A),"throttledresize");
},
_unfixPanel:function(){
if(!!this.options.positionFixed&&$.support.fixedPosition){
this.element.removeClass(this.options.classes.panelFixed);
}
},
_fixPanel:function(){
if(!!this.options.positionFixed&&$.support.fixedPosition){
this.element.addClass(this.options.classes.panelFixed);
}
},
_bindUpdateLayout:function(){
var a=this;
a.element.on("updatelayout",function(){
if(a._open){
a._positionPanel();
}
});
},
_bindLinkListeners:function(){
this._on("body",{
"click a":"_handleClick"
});
},
_handleClick:function(e){
var a,
panelId=this.element.attr("id");
if(e.currentTarget.href.split("#")[1]===panelId&&panelId!==c){
e.preventDefault();
a=$(e.target);
if(a.hasClass("ui-btn")){
a.addClass($.mobile.activeBtnClass);
this.element.one("panelopen panelclose",function(){
a.removeClass($.mobile.activeBtnClass);
});
}
this.toggle();
return false;
}
},
_bindSwipeEvents:function(){
var a=this,
area=a._modal?a.element.add(a._modal):a.element;
if(!!a.options.swipeClose){
if(a.options.position==="left"){
area.on("swipeleft.panel",function(){
a.close();
});
}else{
area.on("swiperight.panel",function(){
a.close();
});
}
}
},
_bindPageEvents:function(){
var a=this;
this.document
.on("panelbeforeopen",function(e){
if(a._open&&e.target!==a.element[0]){
a.close();
}
})
.on("keyup.panel",function(e){
if(e.keyCode===27&&a._open){
a.close();
}
});
if(!this._parentPage&&this.options.display!=="overlay"){
this._on(this.document,{
"pageshow":"_getWrapper"
});
}
if(a._parentPage){
this.document.on("pagehide",":jqmData(role='page')",function(){
if(a._open){
a.close(true);
}
});
}else{
this.document.on("pagebeforehide",function(){
if(a._open){
a.close(true);
}
});
}
},
_open:false,
_pageContentOpenClasses:null,
_modalOpenClasses:null,
open:function(a){
if(!this._open){
var b=this,
o=b.options,
_openPanel=function(){
b.document.off("panelclose");
b._page().jqmData("panel","open");
if($.support.cssTransform3d&&!!o.animate&&o.display!=="overlay"){
b._wrapper.addClass(o.classes.animate);
b._fixedToolbars().addClass(o.classes.animate);
}
if(!a&&$.support.cssTransform3d&&!!o.animate){
b.element.animationComplete(complete,"transition");
}else{
setTimeout(complete,0);
}
if(o.theme&&o.display!=="overlay"){
b._page().parent()
.addClass(o.classes.pageContainer+"-themed "+o.classes.pageContainer+"-"+o.theme);
}
b.element
.removeClass(o.classes.panelClosed)
.addClass(o.classes.panelOpen);
b._positionPanel(true);
b._pageContentOpenClasses=b._getPosDisplayClasses(o.classes.pageContentPrefix);
if(o.display!=="overlay"){
b._page().parent().addClass(o.classes.pageContainer);
b._wrapper.addClass(b._pageContentOpenClasses);
b._fixedToolbars().addClass(b._pageContentOpenClasses);
}
b._modalOpenClasses=b._getPosDisplayClasses(o.classes.modal)+" "+o.classes.modalOpen;
if(b._modal){
b._modal
.addClass(b._modalOpenClasses)
.height(Math.max(b._modal.height(),b.document.height()));
}
},
complete=function(){
if(o.display!=="overlay"){
b._wrapper.addClass(o.classes.pageContentPrefix+"-open");
b._fixedToolbars().addClass(o.classes.pageContentPrefix+"-open");
}
b._bindFixListener();
b._trigger("open");
b._openedPage=b._page();
};
b._trigger("beforeopen");
if(b._page().jqmData("panel")==="open"){
b.document.on("panelclose",function(){
_openPanel();
});
}else{
_openPanel();
}
b._open=true;
}
},
close:function(a){
if(this._open){
var b=this,
o=this.options,
_closePanel=function(){
b.element.removeClass(o.classes.panelOpen);
if(o.display!=="overlay"){
b._wrapper.removeClass(b._pageContentOpenClasses);
b._fixedToolbars().removeClass(b._pageContentOpenClasses);
}
if(!a&&$.support.cssTransform3d&&!!o.animate){
b.element.animationComplete(complete,"transition");
}else{
setTimeout(complete,0);
}
if(b._modal){
b._modal.removeClass(b._modalOpenClasses);
}
},
complete=function(){
if(o.theme&&o.display!=="overlay"){
b._page().parent().removeClass(o.classes.pageContainer+"-themed "+o.classes.pageContainer+"-"+o.theme);
}
b.element.addClass(o.classes.panelClosed);
if(o.display!=="overlay"){
b._page().parent().removeClass(o.classes.pageContainer);
b._wrapper.removeClass(o.classes.pageContentPrefix+"-open");
b._fixedToolbars().removeClass(o.classes.pageContentPrefix+"-open");
}
if($.support.cssTransform3d&&!!o.animate&&o.display!=="overlay"){
b._wrapper.removeClass(o.classes.animate);
b._fixedToolbars().removeClass(o.classes.animate);
}
b._fixPanel();
b._unbindFixListener();
$.mobile.resetActivePageHeight();
b._page().jqmRemoveData("panel");
b._trigger("close");
b._openedPage=null;
};
b._trigger("beforeclose");
_closePanel();
b._open=false;
}
},
toggle:function(){
this[this._open?"close":"open"]();
},
_destroy:function(){
var a,
o=this.options,
multiplePanels=($("body > :mobile-panel").length+$.mobile.activePage.find(":mobile-panel").length)>1;
if(o.display!=="overlay"){
a=$("body > :mobile-panel").add($.mobile.activePage.find(":mobile-panel"));
if(a.not(".ui-panel-display-overlay").not(this.element).length===0){
this._wrapper.children().unwrap();
}
if(this._open){
this._fixedToolbars().removeClass(o.classes.pageContentPrefix+"-open");
if($.support.cssTransform3d&&!!o.animate){
this._fixedToolbars().removeClass(o.classes.animate);
}
this._page().parent().removeClass(o.classes.pageContainer);
if(o.theme){
this._page().parent().removeClass(o.classes.pageContainer+"-themed "+o.classes.pageContainer+"-"+o.theme);
}
}
}
if(!multiplePanels){
this.document.off("panelopen panelclose");
}
if(this._open){
this._page().jqmRemoveData("panel");
}
this._panelInner.children().unwrap();
this.element
.removeClass([this._getPanelClasses(),o.classes.panelOpen,o.classes.animate].join(" "))
.off("swipeleft.panel swiperight.panel")
.off("panelbeforeopen")
.off("panelhide")
.off("keyup.panel")
.off("updatelayout");
if(this._modal){
this._modal.remove();
}
}
});
})(n);
(function($,d){
$.widget("mobile.table",{
options:{
classes:{
table:"ui-table"
},
enhanced:false
},
_create:function(){
if(!this.options.enhanced){
this.element.addClass(this.options.classes.table);
}
$.extend(this,{
headers:d,
allHeaders:d
});
this._refresh(true);
},
_setHeaders:function(){
var a=this.element.find("thead tr");
this.headers=this.element.find("tr:eq(0)").children();
this.allHeaders=this.headers.add(a.children());
},
refresh:function(){
this._refresh();
},
rebuild:$.noop,
_refresh:function(){
var c=this.element,
trs=c.find("thead tr");
this._setHeaders();
trs.each(function(){
var b=0;
$(this).children().each(function(){
var a=parseInt(this.getAttribute("colspan"),10),
selector=":nth-child("+(b+1)+")",
j;
this.setAttribute("data-"+$.mobile.ns+"colstart",b+1);
if(a){
for(j=0;j<a-1;j++){
b++;
selector+=", :nth-child("+(b+1)+")";
}
}
$(this).jqmData("cells",c.find("tr").not(trs.eq(0)).not(this).children(selector));
b++;
});
});
}
});
})(n);
(function($,e){
$.widget("mobile.table",$.mobile.table,{
options:{
mode:"columntoggle",
columnBtnTheme:null,
columnPopupTheme:null,
columnBtnText:"Columns...",
classes:$.extend($.mobile.table.prototype.options.classes,{
popup:"ui-table-columntoggle-popup",
columnBtn:"ui-table-columntoggle-btn",
priorityPrefix:"ui-table-priority-",
columnToggleTable:"ui-table-columntoggle"
})
},
_create:function(){
this._super();
if(this.options.mode!=="columntoggle"){
return;
}
$.extend(this,{
_menu:null
});
if(this.options.enhanced){
this._menu=$(this.document[0].getElementById(this._id()+"-popup")).children().first();
this._addToggles(this._menu,true);
}else{
this._menu=this._enhanceColToggle();
this.element.addClass(this.options.classes.columnToggleTable);
}
this._setupEvents();
this._setToggleState();
},
_id:function(){
return(this.element.attr("id")||(this.widgetName+this.uuid));
},
_setupEvents:function(){
this._on(this.window,{
throttledresize:"_setToggleState"
});
this._on(this._menu,{
"change input":"_menuInputChange"
});
},
_addToggles:function(b,c){
var d,
checkboxIndex=0,
opts=this.options,
container=b.controlgroup("container");
if(c){
d=b.find("input");
}else{
container.empty();
}
this.headers.not("td").each(function(){
var a=$(this),
priority=$.mobile.getAttribute(this,"priority"),
cells=a.add(a.jqmData("cells"));
if(priority){
cells.addClass(opts.classes.priorityPrefix+priority);
(c?d.eq(checkboxIndex++):
$("<label><input type='checkbox' checked />"+
(a.children("abbr").first().attr("title")||
a.text())+
"</label>")
.appendTo(container)
.children(0)
.checkboxradio({
theme:opts.columnPopupTheme
}))
.jqmData("cells",cells);
}
});
if(!c){
b.controlgroup("refresh");
}
},
_menuInputChange:function(a){
var b=$(a.target),
checked=b[0].checked;
b.jqmData("cells")
.toggleClass("ui-table-cell-hidden",!checked)
.toggleClass("ui-table-cell-visible",checked);
if(b[0].getAttribute("locked")){
b.removeAttr("locked");
this._unlockCells(b.jqmData("cells"));
}else{
b.attr("locked",true);
}
},
_unlockCells:function(a){
a.removeClass("ui-table-cell-hidden ui-table-cell-visible");
},
_enhanceColToggle:function(){
var a,menuButton,popup,menu,
table=this.element,
opts=this.options,
ns=$.mobile.ns,
fragment=this.document[0].createDocumentFragment();
a=this._id()+"-popup";
menuButton=$("<a href='#"+a+"' "+
"class='"+opts.classes.columnBtn+" ui-btn "+
"ui-btn-"+(opts.columnBtnTheme||"a")+
" ui-corner-all ui-shadow ui-mini' "+
"data-"+ns+"rel='popup'>"+opts.columnBtnText+"</a>");
popup=$("<div class='"+opts.classes.popup+"' id='"+a+"'></div>");
menu=$("<fieldset></fieldset>").controlgroup();
this._addToggles(menu,false);
menu.appendTo(popup);
fragment.appendChild(popup[0]);
fragment.appendChild(menuButton[0]);
table.before(fragment);
popup.popup();
return menu;
},
rebuild:function(){
this._super();
if(this.options.mode==="columntoggle"){
this._refresh(false);
}
},
_refresh:function(a){
this._super(a);
if(!a&&this.options.mode==="columntoggle"){
this._unlockCells(this.element.find(".ui-table-cell-hidden, "+
".ui-table-cell-visible"));
this._addToggles(this._menu,a);
this._setToggleState();
}
},
_setToggleState:function(){
this._menu.find("input").each(function(){
var a=$(this);
this.checked=a.jqmData("cells").eq(0).css("display")==="table-cell";
a.checkboxradio("refresh");
});
},
_destroy:function(){
this._super();
}
});
})(n);
(function($,d){
$.widget("mobile.table",$.mobile.table,{
options:{
mode:"reflow",
classes:$.extend($.mobile.table.prototype.options.classes,{
reflowTable:"ui-table-reflow",
cellLabels:"ui-table-cell-label"
})
},
_create:function(){
this._super();
if(this.options.mode!=="reflow"){
return;
}
if(!this.options.enhanced){
this.element.addClass(this.options.classes.reflowTable);
this._updateReflow();
}
},
rebuild:function(){
this._super();
if(this.options.mode==="reflow"){
this._refresh(false);
}
},
_refresh:function(a){
this._super(a);
if(!a&&this.options.mode==="reflow"){
this._updateReflow();
}
},
_updateReflow:function(){
var b=this,
opts=this.options;
$(b.allHeaders.get().reverse()).each(function(){
var a=$(this).jqmData("cells"),
colstart=$.mobile.getAttribute(this,"colstart"),
hierarchyClass=a.not(this).filter("thead th").length&&" ui-table-cell-label-top",
text=$(this).text(),
iteration,filter;
if(text!==""){
if(hierarchyClass){
iteration=parseInt(this.getAttribute("colspan"),10);
filter="";
if(iteration){
filter="td:nth-child("+iteration+"n + "+(colstart)+")";
}
b._addLabels(a.filter(filter),opts.classes.cellLabels+hierarchyClass,text);
}else{
b._addLabels(a,opts.classes.cellLabels,text);
}
}
});
},
_addLabels:function(a,b,c){
a.not(":has(b."+b+")").prepend("<b class='"+b+"'>"+c+"</b>");
}
});
})(n);
(function($,c){
var d=function(a,b){
return((""+($.mobile.getAttribute(this,"filtertext")||$(this).text()))
.toLowerCase().indexOf(b)===-1);
};
$.widget("mobile.filterable",{
initSelector:":jqmData(filter='true')",
options:{
filterReveal:false,
filterCallback:d,
enhanced:false,
input:null,
children:"> li, > option, > optgroup option, > tbody tr, > .ui-controlgroup-controls > .ui-btn, > .ui-controlgroup-controls > .ui-checkbox, > .ui-controlgroup-controls > .ui-radio"
},
_create:function(){
var a=this.options;
$.extend(this,{
_search:null,
_timer:0
});
this._setInput(a.input);
if(!a.enhanced){
this._filterItems(((this._search&&this._search.val())||"").toLowerCase());
}
},
_onKeyUp:function(){
var a,lastval,
search=this._search;
if(search){
a=search.val().toLowerCase(),
lastval=$.mobile.getAttribute(search[0],"lastval")+"";
if(lastval&&lastval===a){
return;
}
if(this._timer){
A.clearTimeout(this._timer);
this._timer=0;
}
this._timer=this._delay(function(){
this._trigger("beforefilter",null,{input:search});
search[0].setAttribute("data-"+$.mobile.ns+"lastval",a);
this._filterItems(a);
this._timer=0;
},250);
}
},
_getFilterableItems:function(){
var a=this.element,
children=this.options.children,
items=!children?{length:0}:
$.isFunction(children)?children():
children.nodeName?$(children):
children.jquery?children:
this.element.find(children);
if(items.length===0){
items=a.children();
}
return items;
},
_filterItems:function(a){
var b,callback,length,dst,
show=[],
hide=[],
opts=this.options,
filterItems=this._getFilterableItems();
if(a!=null){
callback=opts.filterCallback||d;
length=filterItems.length;
for(b=0;b<length;b++){
dst=(callback.call(filterItems[b],b,a))?hide:show;
dst.push(filterItems[b]);
}
}
if(hide.length===0){
filterItems[opts.filterReveal?"addClass":"removeClass"]("ui-screen-hidden");
}else{
$(hide).addClass("ui-screen-hidden");
$(show).removeClass("ui-screen-hidden");
}
this._refreshChildWidget();
this._trigger("filter",null,{
items:filterItems
});
},
_refreshChildWidget:function(){
var a,idx,
recognizedWidgets=["collapsibleset","selectmenu","controlgroup","listview"];
for(idx=recognizedWidgets.length-1;idx>-1;idx--){
a=recognizedWidgets[idx];
if($.mobile[a]){
a=this.element.data("mobile-"+a);
if(a&&$.isFunction(a.refresh)){
a.refresh();
}
}
}
},
_setInput:function(a){
var b=this._search;
if(this._timer){
A.clearTimeout(this._timer);
this._timer=0;
}
if(b){
this._off(b,"keyup change input");
b=null;
}
if(a){
b=a.jquery?a:
a.nodeName?$(a):
this.document.find(a);
this._on(b,{
keyup:"_onKeyUp",
change:"_onKeyUp",
input:"_onKeyUp"
});
}
this._search=b;
},
_setOptions:function(a){
var b=!((a.filterReveal===c)&&
(a.filterCallback===c)&&
(a.children===c));
this._super(a);
if(a.input!==c){
this._setInput(a.input);
b=true;
}
if(b){
this.refresh();
}
},
_destroy:function(){
var a=this.options,
items=this._getFilterableItems();
if(a.enhanced){
items.toggleClass("ui-screen-hidden",a.filterReveal);
}else{
items.removeClass("ui-screen-hidden");
}
},
refresh:function(){
if(this._timer){
A.clearTimeout(this._timer);
this._timer=0;
}
this._filterItems(((this._search&&this._search.val())||"").toLowerCase());
}
});
})(n);
(function($,d){
var e=function(b,c){
return function(a){
c.call(this,a);
b._syncTextInputOptions(a);
};
},
rDividerListItem=/(^|\s)ui-li-divider(\s|$)/,
origDefaultFilterCallback=$.mobile.filterable.prototype.options.filterCallback;
$.mobile.filterable.prototype.options.filterCallback=function(a,b){
return!this.className.match(rDividerListItem)&&
origDefaultFilterCallback.call(this,a,b);
};
$.widget("mobile.filterable",$.mobile.filterable,{
options:{
filterPlaceholder:"Filter items...",
filterTheme:null
},
_create:function(){
var a,widgetName,
elem=this.element,
recognizedWidgets=["collapsibleset","selectmenu","controlgroup","listview"],
createHandlers={};
this._super();
$.extend(this,{
_widget:null
});
for(a=recognizedWidgets.length-1;a>-1;a--){
widgetName=recognizedWidgets[a];
if($.mobile[widgetName]){
if(this._setWidget(elem.data("mobile-"+widgetName))){
break;
}else{
createHandlers[widgetName+"create"]="_handleCreate";
}
}
}
if(!this._widget){
this._on(elem,createHandlers);
}
},
_handleCreate:function(a){
this._setWidget(this.element.data("mobile-"+a.type.substring(0,a.type.length-6)));
},
_trigger:function(a,b,c){
if(this._widget&&this._widget.widgetFullName==="mobile-listview"&&
a==="beforefilter"){
this._widget._trigger("beforefilter",b,c);
}
this._super(a,b,c);
},
_setWidget:function(a){
if(!this._widget&&a){
this._widget=a;
this._widget._setOptions=e(this,this._widget._setOptions);
}
if(!!this._widget){
this._syncTextInputOptions(this._widget.options);
if(this._widget.widgetName==="listview"){
this._widget.options.hideDividers=true;
this._widget.element.listview("refresh");
}
}
return!!this._widget;
},
_isSearchInternal:function(){
return(this._search&&this._search.jqmData("ui-filterable-"+this.uuid+"-internal"));
},
_setInput:function(b){
var c=this.options,
updatePlaceholder=true,
textinputOpts={};
if(!b){
if(this._isSearchInternal()){
return;
}else{
updatePlaceholder=false;
b=$("<input "+
"data-"+$.mobile.ns+"type='search' "+
"placeholder='"+c.filterPlaceholder+"'></input>")
.jqmData("ui-filterable-"+this.uuid+"-internal",true);
$("<form class='ui-filterable'></form>")
.append(b)
.submit(function(a){
a.preventDefault();
b.blur();
})
.insertBefore(this.element);
if($.mobile.textinput){
if(this.options.filterTheme!=null){
textinputOpts["theme"]=c.filterTheme;
}
b.textinput(textinputOpts);
}
}
}
this._super(b);
if(this._isSearchInternal()&&updatePlaceholder){
this._search.attr("placeholder",this.options.filterPlaceholder);
}
},
_setOptions:function(a){
var b=this._super(a);
if(a.filterPlaceholder!==d){
if(this._isSearchInternal()){
this._search.attr("placeholder",a.filterPlaceholder);
}
}
if(a.filterTheme!==d&&this._search&&$.mobile.textinput){
this._search.textinput("option","theme",a.filterTheme);
}
return b;
},
_destroy:function(){
if(this._isSearchInternal()){
this._search.remove();
}
this._super();
},
_syncTextInputOptions:function(a){
var b,
textinputOptions={};
if(this._isSearchInternal()&&$.mobile.textinput){
for(b in $.mobile.textinput.prototype.options){
if(a[b]!==d){
if(b==="theme"&&this.options.filterTheme!=null){
textinputOptions[b]=this.options.filterTheme;
}else{
textinputOptions[b]=a[b];
}
}
}
this._search.textinput("option",textinputOptions);
}
}
});
})(n);

(function($,g){
var h=0,
rhash=/#.*$/;
function getNextTabId(){
return++h;
}
function isLocal(a){
return a.hash.length>1&&
decodeURIComponent(a.href.replace(rhash,""))===
decodeURIComponent(location.href.replace(rhash,""));
}
$.widget("ui.tabs",{
version:"fadf2b312a05040436451c64bbfaf4814bc62c56",
delay:300,
options:{
active:null,
collapsible:false,
event:"click",
heightStyle:"content",
hide:null,
show:null,
activate:null,
beforeActivate:null,
beforeLoad:null,
load:null
},
_create:function(){
var b=this,
options=this.options;
this.running=false;
this.element
.addClass("ui-tabs ui-widget ui-widget-content ui-corner-all")
.toggleClass("ui-tabs-collapsible",options.collapsible)
.delegate(".ui-tabs-nav > li","mousedown"+this.eventNamespace,function(a){
if($(this).is(".ui-state-disabled")){
a.preventDefault();
}
})
.delegate(".ui-tabs-anchor","focus"+this.eventNamespace,function(){
if($(this).closest("li").is(".ui-state-disabled")){
this.blur();
}
});
this._processTabs();
options.active=this._initialActive();
if($.isArray(options.disabled)){
options.disabled=$.unique(options.disabled.concat(
$.map(this.tabs.filter(".ui-state-disabled"),function(a){
return b.tabs.index(a);
})
)).sort();
}
if(this.options.active!==false&&this.anchors.length){
this.active=this._findActive(options.active);
}else{
this.active=$();
}
this._refresh();
if(this.active.length){
this.load(options.active);
}
},
_initialActive:function(){
var b=this.options.active,
collapsible=this.options.collapsible,
locationHash=location.hash.substring(1);
if(b===null){
if(locationHash){
this.tabs.each(function(i,a){
if($(a).attr("aria-controls")===locationHash){
b=i;
return false;
}
});
}
if(b===null){
b=this.tabs.index(this.tabs.filter(".ui-tabs-active"));
}
if(b===null||b===-1){
b=this.tabs.length?0:false;
}
}
if(b!==false){
b=this.tabs.index(this.tabs.eq(b));
if(b===-1){
b=collapsible?false:0;
}
}
if(!collapsible&&b===false&&this.anchors.length){
b=0;
}
return b;
},
_getCreateEventData:function(){
return{
tab:this.active,
panel:!this.active.length?$():this._getPanelForTab(this.active)
};
},
_tabKeydown:function(a){
var b=$(this.document[0].activeElement).closest("li"),
selectedIndex=this.tabs.index(b),
goingForward=true;
if(this._handlePageNav(a)){
return;
}
switch(a.keyCode){
case $.ui.keyCode.RIGHT:
case $.ui.keyCode.DOWN:
selectedIndex++;
break;
case $.ui.keyCode.UP:
case $.ui.keyCode.LEFT:
goingForward=false;
selectedIndex--;
break;
case $.ui.keyCode.END:
selectedIndex=this.anchors.length-1;
break;
case $.ui.keyCode.HOME:
selectedIndex=0;
break;
case $.ui.keyCode.SPACE:
a.preventDefault();
clearTimeout(this.activating);
this._activate(selectedIndex);
return;
case $.ui.keyCode.ENTER:
a.preventDefault();
clearTimeout(this.activating);
this._activate(selectedIndex===this.options.active?false:selectedIndex);
return;
default:
return;
}
a.preventDefault();
clearTimeout(this.activating);
selectedIndex=this._focusNextTab(selectedIndex,goingForward);
if(!a.ctrlKey){
b.attr("aria-selected","false");
this.tabs.eq(selectedIndex).attr("aria-selected","true");
this.activating=this._delay(function(){
this.option("active",selectedIndex);
},this.delay);
}
},
_panelKeydown:function(a){
if(this._handlePageNav(a)){
return;
}
if(a.ctrlKey&&a.keyCode===$.ui.keyCode.UP){
a.preventDefault();
this.active.focus();
}
},
_handlePageNav:function(a){
if(a.altKey&&a.keyCode===$.ui.keyCode.PAGE_UP){
this._activate(this._focusNextTab(this.options.active-1,false));
return true;
}
if(a.altKey&&a.keyCode===$.ui.keyCode.PAGE_DOWN){
this._activate(this._focusNextTab(this.options.active+1,true));
return true;
}
},
_findNextTab:function(a,b){
var c=this.tabs.length-1;
function constrain(){
if(a>c){
a=0;
}
if(a<0){
a=c;
}
return a;
}
while($.inArray(constrain(),this.options.disabled)!==-1){
a=b?a+1:a-1;
}
return a;
},
_focusNextTab:function(a,b){
a=this._findNextTab(a,b);
this.tabs.eq(a).focus();
return a;
},
_setOption:function(a,b){
if(a==="active"){
this._activate(b);
return;
}
if(a==="disabled"){
this._setupDisabled(b);
return;
}
this._super(a,b);
if(a==="collapsible"){
this.element.toggleClass("ui-tabs-collapsible",b);
if(!b&&this.options.active===false){
this._activate(0);
}
}
if(a==="event"){
this._setupEvents(b);
}
if(a==="heightStyle"){
this._setupHeightStyle(b);
}
},
_tabId:function(a){
return a.attr("aria-controls")||"ui-tabs-"+getNextTabId();
},
_sanitizeSelector:function(a){
return a?a.replace(/[!"$%&'()*+,.\/:;<=>?@\[\]\^`{|}~]/g,"\\$&"):"";
},
refresh:function(){
var b=this.options,
lis=this.tablist.children(":has(a[href])");
b.disabled=$.map(lis.filter(".ui-state-disabled"),function(a){
return lis.index(a);
});
this._processTabs();
if(b.active===false||!this.anchors.length){
b.active=false;
this.active=$();
}else if(this.active.length&&!$.contains(this.tablist[0],this.active[0])){
if(this.tabs.length===b.disabled.length){
b.active=false;
this.active=$();
}else{
this._activate(this._findNextTab(Math.max(0,b.active-1),false));
}
}else{
b.active=this.tabs.index(this.active);
}
this._refresh();
},
_refresh:function(){
this._setupDisabled(this.options.disabled);
this._setupEvents(this.options.event);
this._setupHeightStyle(this.options.heightStyle);
this.tabs.not(this.active).attr({
"aria-selected":"false",
tabIndex:-1
});
this.panels.not(this._getPanelForTab(this.active))
.hide()
.attr({
"aria-expanded":"false",
"aria-hidden":"true"
});
if(!this.active.length){
this.tabs.eq(0).attr("tabIndex",0);
}else{
this.active
.addClass("ui-tabs-active ui-state-active")
.attr({
"aria-selected":"true",
tabIndex:0
});
this._getPanelForTab(this.active)
.show()
.attr({
"aria-expanded":"true",
"aria-hidden":"false"
});
}
},
_processTabs:function(){
var c=this;
this.tablist=this._getList()
.addClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all")
.attr("role","tablist");
this.tabs=this.tablist.find("> li:has(a[href])")
.addClass("ui-state-default ui-corner-top")
.attr({
role:"tab",
tabIndex:-1
});
this.anchors=this.tabs.map(function(){
return $("a",this)[0];
})
.addClass("ui-tabs-anchor")
.attr({
role:"presentation",
tabIndex:-1
});
this.panels=$();
this.anchors.each(function(i,a){
var b,panel,panelId,
anchorId=$(a).uniqueId().attr("id"),
tab=$(a).closest("li"),
originalAriaControls=tab.attr("aria-controls");
if(isLocal(a)){
b=a.hash;
panel=c.element.find(c._sanitizeSelector(b));
}else{
panelId=c._tabId(tab);
b="#"+panelId;
panel=c.element.find(b);
if(!panel.length){
panel=c._createPanel(panelId);
panel.insertAfter(c.panels[i-1]||c.tablist);
}
panel.attr("aria-live","polite");
}
if(panel.length){
c.panels=c.panels.add(panel);
}
if(originalAriaControls){
tab.data("ui-tabs-aria-controls",originalAriaControls);
}
tab.attr({
"aria-controls":b.substring(1),
"aria-labelledby":anchorId
});
panel.attr("aria-labelledby",anchorId);
});
this.panels
.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom")
.attr("role","tabpanel");
},
_getList:function(){
return this.element.find("ol,ul").eq(0);
},
_createPanel:function(a){
return $("<div>")
.attr("id",a)
.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom")
.data("ui-tabs-destroy",true);
},
_setupDisabled:function(a){
if($.isArray(a)){
if(!a.length){
a=false;
}else if(a.length===this.anchors.length){
a=true;
}
}
for(var i=0,li;(li=this.tabs[i]);i++){
if(a===true||$.inArray(i,a)!==-1){
$(li)
.addClass("ui-state-disabled")
.attr("aria-disabled","true");
}else{
$(li)
.removeClass("ui-state-disabled")
.removeAttr("aria-disabled");
}
}
this.options.disabled=a;
},
_setupEvents:function(c){
var d={
click:function(a){
a.preventDefault();
}
};
if(c){
$.each(c.split(" "),function(a,b){
d[b]="_eventHandler";
});
}
this._off(this.anchors.add(this.tabs).add(this.panels));
this._on(this.anchors,d);
this._on(this.tabs,{keydown:"_tabKeydown"});
this._on(this.panels,{keydown:"_panelKeydown"});
this._focusable(this.tabs);
this._hoverable(this.tabs);
},
_setupHeightStyle:function(b){
var c,
parent=this.element.parent();
if(b==="fill"){
c=parent.height();
c-=this.element.outerHeight()-this.element.height();
this.element.siblings(":visible").each(function(){
var a=$(this),
position=a.css("position");
if(position==="absolute"||position==="fixed"){
return;
}
c-=a.outerHeight(true);
});
this.element.children().not(this.panels).each(function(){
c-=$(this).outerHeight(true);
});
this.panels.each(function(){
$(this).height(Math.max(0,c-
$(this).innerHeight()+$(this).height()));
})
.css("overflow","auto");
}else if(b==="auto"){
c=0;
this.panels.each(function(){
c=Math.max(c,$(this).height("").height());
}).height(c);
}
},
_eventHandler:function(a){
var b=this.options,
active=this.active,
anchor=$(a.currentTarget),
tab=anchor.closest("li"),
clickedIsActive=tab[0]===active[0],
collapsing=clickedIsActive&&b.collapsible,
toShow=collapsing?$():this._getPanelForTab(tab),
toHide=!active.length?$():this._getPanelForTab(active),
eventData={
oldTab:active,
oldPanel:toHide,
newTab:collapsing?$():tab,
newPanel:toShow
};
a.preventDefault();
if(tab.hasClass("ui-state-disabled")||
tab.hasClass("ui-tabs-loading")||
this.running||
(clickedIsActive&&!b.collapsible)||
(this._trigger("beforeActivate",a,eventData)===false)){
return;
}
b.active=collapsing?false:this.tabs.index(tab);
this.active=clickedIsActive?$():tab;
if(this.xhr){
this.xhr.abort();
}
if(!toHide.length&&!toShow.length){
$.error("jQuery UI Tabs: Mismatching fragment identifier.");
}
if(toShow.length){
this.load(this.tabs.index(tab),a);
}
this._toggle(a,eventData);
},
_toggle:function(a,b){
var c=this,
toShow=b.newPanel,
toHide=b.oldPanel;
this.running=true;
function complete(){
c.running=false;
c._trigger("activate",a,b);
}
function show(){
b.newTab.closest("li").addClass("ui-tabs-active ui-state-active");
if(toShow.length&&c.options.show){
c._show(toShow,c.options.show,complete);
}else{
toShow.show();
complete();
}
}
if(toHide.length&&this.options.hide){
this._hide(toHide,this.options.hide,function(){
b.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active");
show();
});
}else{
b.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active");
toHide.hide();
show();
}
toHide.attr({
"aria-expanded":"false",
"aria-hidden":"true"
});
b.oldTab.attr("aria-selected","false");
if(toShow.length&&toHide.length){
b.oldTab.attr("tabIndex",-1);
}else if(toShow.length){
this.tabs.filter(function(){
return $(this).attr("tabIndex")===0;
})
.attr("tabIndex",-1);
}
toShow.attr({
"aria-expanded":"true",
"aria-hidden":"false"
});
b.newTab.attr({
"aria-selected":"true",
tabIndex:0
});
},
_activate:function(a){
var b,
active=this._findActive(a);
if(active[0]===this.active[0]){
return;
}
if(!active.length){
active=this.active;
}
b=active.find(".ui-tabs-anchor")[0];
this._eventHandler({
target:b,
currentTarget:b,
preventDefault:$.noop
});
},
_findActive:function(a){
return a===false?$():this.tabs.eq(a);
},
_getIndex:function(a){
if(typeof a==="string"){
a=this.anchors.index(this.anchors.filter("[href$='"+a+"']"));
}
return a;
},
_destroy:function(){
if(this.xhr){
this.xhr.abort();
}
this.element.removeClass("ui-tabs ui-widget ui-widget-content ui-corner-all ui-tabs-collapsible");
this.tablist
.removeClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all")
.removeAttr("role");
this.anchors
.removeClass("ui-tabs-anchor")
.removeAttr("role")
.removeAttr("tabIndex")
.removeUniqueId();
this.tabs.add(this.panels).each(function(){
if($.data(this,"ui-tabs-destroy")){
$(this).remove();
}else{
$(this)
.removeClass("ui-state-default ui-state-active ui-state-disabled "+
"ui-corner-top ui-corner-bottom ui-widget-content ui-tabs-active ui-tabs-panel")
.removeAttr("tabIndex")
.removeAttr("aria-live")
.removeAttr("aria-busy")
.removeAttr("aria-selected")
.removeAttr("aria-labelledby")
.removeAttr("aria-hidden")
.removeAttr("aria-expanded")
.removeAttr("role");
}
});
this.tabs.each(function(){
var a=$(this),
prev=a.data("ui-tabs-aria-controls");
if(prev){
a
.attr("aria-controls",prev)
.removeData("ui-tabs-aria-controls");
}else{
a.removeAttr("aria-controls");
}
});
this.panels.show();
if(this.options.heightStyle!=="content"){
this.panels.css("height","");
}
},
enable:function(c){
var d=this.options.disabled;
if(d===false){
return;
}
if(c===g){
d=false;
}else{
c=this._getIndex(c);
if($.isArray(d)){
d=$.map(d,function(a){
return a!==c?a:null;
});
}else{
d=$.map(this.tabs,function(a,b){
return b!==c?b:null;
});
}
}
this._setupDisabled(d);
},
disable:function(a){
var b=this.options.disabled;
if(b===true){
return;
}
if(a===g){
b=true;
}else{
a=this._getIndex(a);
if($.inArray(a,b)!==-1){
return;
}
if($.isArray(b)){
b=$.merge([a],b).sort();
}else{
b=[a];
}
}
this._setupDisabled(b);
},
load:function(c,d){
c=this._getIndex(c);
var e=this,
tab=this.tabs.eq(c),
anchor=tab.find(".ui-tabs-anchor"),
panel=this._getPanelForTab(tab),
eventData={
tab:tab,
panel:panel
};
if(isLocal(anchor[0])){
return;
}
this.xhr=$.ajax(this._ajaxSettings(anchor,d,eventData));
if(this.xhr&&this.xhr.statusText!=="canceled"){
tab.addClass("ui-tabs-loading");
panel.attr("aria-busy","true");
this.xhr
.success(function(a){
setTimeout(function(){
panel.html(a);
e._trigger("load",d,eventData);
},1);
})
.complete(function(a,b){
setTimeout(function(){
if(b==="abort"){
e.panels.stop(false,true);
}
tab.removeClass("ui-tabs-loading");
panel.removeAttr("aria-busy");
if(a===e.xhr){
delete e.xhr;
}
},1);
});
}
},
_ajaxSettings:function(c,d,e){
var f=this;
return{
url:c.attr("href"),
beforeSend:function(a,b){
return f._trigger("beforeLoad",d,
$.extend({jqXHR:a,ajaxSettings:b},e));
}
};
},
_getPanelForTab:function(a){
var b=$(a).attr("aria-controls");
return this.element.find(this._sanitizeSelector("#"+b));
}
});
})(n);
(function($,a){
})(n);
(function($,a){
$.mobile.iosorientationfixEnabled=true;
var b=navigator.userAgent,
zoom,
evt,x,y,z,aig;
if(!(/iPhone|iPad|iPod/.test(navigator.platform)&&/OS [1-5]_[0-9_]* like Mac OS X/i.test(b)&&b.indexOf("AppleWebKit")>-1)){
$.mobile.iosorientationfixEnabled=false;
return;
}
zoom=$.mobile.zoom;
function checkTilt(e){
evt=e.originalEvent;
aig=evt.accelerationIncludingGravity;
x=Math.abs(aig.x);
y=Math.abs(aig.y);
z=Math.abs(aig.z);
if(!a.orientation&&(x>7||((z>6&&y<8||z<8&&y>6)&&x>5))){
if(zoom.enabled){
zoom.disable();
}
}else if(!zoom.enabled){
zoom.enable();
}
}
$.mobile.document.on("mobileinit",function(){
if($.mobile.iosorientationfixEnabled){
$.mobile.window
.bind("orientationchange.iosorientationfix",zoom.enable)
.bind("devicemotion.iosorientationfix",checkTilt);
}
});
}(n,this));
(function($,c,d){
var f=$("html"),
$window=$.mobile.window;
function hideRenderingClass(){
f.removeClass("ui-mobile-rendering");
}
$(c.document).trigger("mobileinit");
if(!$.mobile.gradeA()){
return;
}
if($.mobile.ajaxBlacklist){
$.mobile.ajaxEnabled=false;
}
f.addClass("ui-mobile ui-mobile-rendering");
setTimeout(hideRenderingClass,5000);
$.extend($.mobile,{
initializePage:function(){
var b=$.mobile.path,
$pages=$(":jqmData(role='page'), :jqmData(role='dialog')"),
hash=b.stripHash(b.stripQueryParams(b.parseLocation().hash)),
hashPage=B.getElementById(hash);
if(!$pages.length){
$pages=$("body").wrapInner("<div data-"+$.mobile.ns+"role='page'></div>").children(0);
}
$pages.each(function(){
var a=$(this);
if(!a[0].getAttribute("data-"+$.mobile.ns+"url")){
a.attr("data-"+$.mobile.ns+"url",a.attr("id")||location.pathname+location.search);
}
});
$.mobile.firstPage=$pages.first();
$.mobile.pageContainer=$.mobile.firstPage
.parent()
.addClass("ui-mobile-viewport")
.pagecontainer();
$.mobile.navreadyDeferred.resolve();
$window.trigger("pagecontainercreate");
$.mobile.loading("show");
hideRenderingClass();
if(!($.mobile.hashListeningEnabled&&
$.mobile.path.isHashValid(location.hash)&&
($(hashPage).is(":jqmData(role='page')")||
$.mobile.path.isPath(hash)||
hash===$.mobile.dialogHashKey))){
if($.mobile.path.isHashValid(location.hash)){
$.mobile.navigate.history.initialDst=hash.replace("#","");
}
if($.event.special.navigate.isPushStateEnabled()){
$.mobile.navigate.navigator.squash(b.parseLocation().href);
}
$.mobile.changePage($.mobile.firstPage,{
transition:"none",
reverse:true,
changeHash:false,
fromHashChange:true
});
}else{
if(!$.event.special.navigate.isPushStateEnabled()){
$window.trigger("hashchange",[true]);
}else{
$.mobile.navigate.history.stack=[];
$.mobile.navigate($.mobile.path.isPath(location.hash)?location.hash:location.href);
}
}
}
});
$(function(){
$.support.inlineSVG();
if($.mobile.hideUrlBar){
c.scrollTo(0,1);
}
$.mobile.defaultHomeScroll=(!$.support.scrollTop||$.mobile.window.scrollTop()===1)?0:1;
if($.mobile.autoInitializePage){
$.mobile.initializePage();
}
if($.mobile.hideUrlBar){
$window.load($.mobile.silentScroll);
}
if(!$.support.cssPointerEvents){
$.mobile.document.delegate(".ui-state-disabled,.ui-disabled","vclick",
function(e){
e.preventDefault();
e.stopImmediatePropagation();
}
);
}
});
}(n,this));
}));
;

;
(function(a,b){
if(typeof module==="object"&&typeof module.exports==="object"){
module.exports=a.document?
b(a,true):
function(w){
if(!w.document){
throw new Error("jQuery requires a window with a document");
}
return b(w);
};
}else{
b(a);
}
}(typeof window!=="undefined"?window:this,function(o,q){
var u=[];
var w=u.slice;
var x=u.concat;
var y=u.push;
var z=u.indexOf;
var A={};
var toString=A.toString;
var B=A.hasOwnProperty;
var C="".trim;
var D={};
var
version="1.11.0",
jQuery=function(a,b){
return new jQuery.fn.init(a,b);
},
rtrim=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,
rmsPrefix=/^-ms-/,
rdashAlpha=/-([\da-z])/gi,
fcamelCase=function(a,b){
return b.toUpperCase();
};
jQuery.fn=jQuery.prototype={
jquery:version,
constructor:jQuery,
selector:"",
length:0,
toArray:function(){
return w.call(this);
},
get:function(a){
return a!=null?
(a<0?this[a+this.length]:this[a]):
w.call(this);
},
pushStack:function(a){
var b=jQuery.merge(this.constructor(),a);
b.prevObject=this;
b.context=this.context;
return b;
},
each:function(a,b){
return jQuery.each(this,a,b);
},
map:function(b){
return this.pushStack(jQuery.map(this,function(a,i){
return b.call(a,i,a);
}));
},
w:function(){
return this.pushStack(w.apply(this,arguments));
},
first:function(){
return this.eq(0);
},
last:function(){
return this.eq(-1);
},
eq:function(i){
var a=this.length,
j=+i+(i<0?a:0);
return this.pushStack(j>=0&&j<a?[this[j]]:[]);
},
end:function(){
return this.prevObject||this.constructor(null);
},
y:y,
sort:u.sort,
splice:u.splice
};
jQuery.extend=jQuery.fn.extend=function(){
var a,copyIsArray,copy,name,options,clone,
target=arguments[0]||{},
i=1,
length=arguments.length,
deep=false;
if(typeof target==="boolean"){
deep=target;
target=arguments[i]||{};
i++;
}
if(typeof target!=="object"&&!jQuery.isFunction(target)){
target={};
}
if(i===length){
target=this;
i--;
}
for(;i<length;i++){
if((options=arguments[i])!=null){
for(name in options){
a=target[name];
copy=options[name];
if(target===copy){
continue;
}
if(deep&&copy&&(jQuery.isPlainObject(copy)||(copyIsArray=jQuery.isArray(copy)))){
if(copyIsArray){
copyIsArray=false;
clone=a&&jQuery.isArray(a)?a:[];
}else{
clone=a&&jQuery.isPlainObject(a)?a:{};
}
target[name]=jQuery.extend(deep,clone,copy);
}else if(copy!==undefined){
target[name]=copy;
}
}
}
}
return target;
};
jQuery.extend({
expando:"jQuery"+(version+Math.random()).replace(/\D/g,""),
isReady:true,
error:function(a){
throw new Error(a);
},
noop:function(){},
isFunction:function(a){
return jQuery.type(a)==="function";
},
isArray:Array.isArray||function(a){
return jQuery.type(a)==="array";
},
isWindow:function(a){

return a!=null&&a==a.window;
},
isNumeric:function(a){
return a-parseFloat(a)>=0;
},
isEmptyObject:function(a){
var b;
for(b in a){
return false;
}
return true;
},
isPlainObject:function(a){
var b;
if(!a||jQuery.type(a)!=="object"||a.nodeType||jQuery.isWindow(a)){
return false;
}
try{
if(a.constructor&&
!B.call(a,"constructor")&&
!B.call(a.constructor.prototype,"isPrototypeOf")){
return false;
}
}catch(e){
return false;
}
if(D.ownLast){
for(b in a){
return B.call(a,b);
}
}
for(b in a){}
return b===undefined||B.call(a,b);
},
type:function(a){
if(a==null){
return a+"";
}
return typeof a==="object"||typeof a==="function"?
A[toString.call(a)]||"object":
typeof a;
},
globalEval:function(b){
if(b&&jQuery.trim(b)){
(o.execScript||function(a){
o["eval"].call(o,a);
})(b);
}
},
camelCase:function(a){
return a.replace(rmsPrefix,"ms-").replace(rdashAlpha,fcamelCase);
},
nodeName:function(a,b){
return a.nodeName&&a.nodeName.toLowerCase()===b.toLowerCase();
},
each:function(a,b,c){
var d,
i=0,
length=a.length,
isArray=isArraylike(a);
if(c){
if(isArray){
for(;i<length;i++){
d=b.apply(a[i],c);
if(d===false){
break;
}
}
}else{
for(i in a){
d=b.apply(a[i],c);
if(d===false){
break;
}
}
}
}else{
if(isArray){
for(;i<length;i++){
d=b.call(a[i],i,a[i]);
if(d===false){
break;
}
}
}else{
for(i in a){
d=b.call(a[i],i,a[i]);
if(d===false){
break;
}
}
}
}
return a;
},
C:C&&!C.call("\uFEFF\xA0")?
function(a){
return a==null?
"":
C.call(a);
}:
function(a){
return a==null?
"":
(a+"").replace(rtrim,"");
},
makeArray:function(a,b){
var c=b||[];
if(a!=null){
if(isArraylike(Object(a))){
jQuery.merge(c,
typeof a==="string"?
[a]:a
);
}else{
y.call(c,a);
}
}
return c;
},
inArray:function(a,b,i){
var c;
if(b){
if(z){
return z.call(b,a,i);
}
c=b.length;
i=i?i<0?Math.max(0,c+i):i:0;
for(;i<c;i++){
if(i in b&&b[i]===a){
return i;
}
}
}
return-1;
},
merge:function(a,b){
var c=+b.length,
j=0,
i=a.length;
while(j<c){
a[i++]=b[j++];
}
if(c!==c){
while(b[j]!==undefined){
a[i++]=b[j++];
}
}
a.length=i;
return a;
},
grep:function(a,b,c){
var d,
matches=[],
i=0,
length=a.length,
callbackExpect=!c;
for(;i<length;i++){
d=!b(a[i],i);
if(d!==callbackExpect){
matches.push(a[i]);
}
}
return matches;
},
map:function(a,b,c){
var d,
i=0,
length=a.length,
isArray=isArraylike(a),
ret=[];
if(isArray){
for(;i<length;i++){
d=b(a[i],i,c);
if(d!=null){
ret.push(d);
}
}
}else{
for(i in a){
d=b(a[i],i,c);
if(d!=null){
ret.push(d);
}
}
}
return x.apply([],ret);
},
guid:1,
proxy:function(a,b){
var c,proxy,tmp;
if(typeof b==="string"){
tmp=a[b];
b=a;
a=tmp;
}
if(!jQuery.isFunction(a)){
return undefined;
}
c=w.call(arguments,2);
proxy=function(){
return a.apply(b||this,c.concat(w.call(arguments)));
};
proxy.guid=a.guid=a.guid||jQuery.guid++;
return proxy;
},
now:function(){
return+(new Date());
},
D:D
});
jQuery.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(i,a){
A["[object "+a+"]"]=a.toLowerCase();
});
function isArraylike(a){
var b=a.length,
type=jQuery.type(a);
if(type==="function"||jQuery.isWindow(a)){
return false;
}
if(a.nodeType===1&&b){
return true;
}
return type==="array"||b===0||
typeof b==="number"&&b>0&&(b-1)in a;
}
var E=

(function(n){
var i,
D,
Expr,
getText,
isXML,
compile,
outermostContext,
sortInput,
hasDuplicate,
setDocument,
document,
bl,
documentIsHTML,
rbuggyQSA,
rbuggyMatches,
matches,
contains,
expando="sizzle"+ -(new Date()),
preferredDoc=n.document,
dirruns=0,
done=0,
classCache=createCache(),
tokenCache=createCache(),
compilerCache=createCache(),
sortOrder=function(a,b){
if(a===b){
hasDuplicate=true;
}
return 0;
},
N=typeof undefined,
MAX_NEGATIVE=1<<31,
B=({}).hasOwnProperty,
arr=[],
pop=arr.pop,
push_native=arr.push,
y=arr.push,
w=arr.slice,
z=arr.indexOf||function(a){
var i=0,
len=this.length;
for(;i<len;i++){
if(this[i]===a){
return i;
}
}
return-1;
},
booleans="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",
whitespace="[\\x20\\t\\r\\n\\f]",
characterEncoding="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",
identifier=characterEncoding.replace("w","w#"),
attributes="\\["+whitespace+"*("+characterEncoding+")"+whitespace+
"*(?:([*^$|!~]?=)"+whitespace+"*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+identifier+")|)|)"+whitespace+"*\\]",
pseudos=":("+characterEncoding+")(?:\\(((['\"])((?:\\\\.|[^\\\\])*?)\\3|((?:\\\\.|[^\\\\()[\\]]|"+attributes.replace(3,8)+")*)|.*)\\)|)",
rtrim=new RegExp("^"+whitespace+"+|((?:^|[^\\\\])(?:\\\\.)*)"+whitespace+"+$","g"),
rcomma=new RegExp("^"+whitespace+"*,"+whitespace+"*"),
rcombinators=new RegExp("^"+whitespace+"*([>+~]|"+whitespace+")"+whitespace+"*"),
rattributeQuotes=new RegExp("="+whitespace+"*([^\\]'\"]*?)"+whitespace+"*\\]","g"),
rpseudo=new RegExp(pseudos),
ridentifier=new RegExp("^"+identifier+"$"),
matchExpr={
"ID":new RegExp("^#("+characterEncoding+")"),
"CLASS":new RegExp("^\\.("+characterEncoding+")"),
"TAG":new RegExp("^("+characterEncoding.replace("w","w*")+")"),
"ATTR":new RegExp("^"+attributes),
"PSEUDO":new RegExp("^"+pseudos),
"CHILD":new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+whitespace+
"*(even|odd|(([+-]|)(\\d*)n|)"+whitespace+"*(?:([+-]|)"+whitespace+
"*(\\d+)|))"+whitespace+"*\\)|)","i"),
"bool":new RegExp("^(?:"+booleans+")$","i"),
"needsContext":new RegExp("^"+whitespace+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+
whitespace+"*((?:-\\d)?\\d*)"+whitespace+"*\\)|)(?=[^-]|$)","i")
},
rinputs=/^(?:input|select|textarea|button)$/i,
rheader=/^h\d$/i,
rnative=/^[^{]+\{\s*\[native \w/,
rquickExpr=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,
rsibling=/[+~]/,
rescape=/'|\\/g,
runescape=new RegExp("\\\\([\\da-f]{1,6}"+whitespace+"?|("+whitespace+")|.)","ig"),
funescape=function(_,a,b){
var c="0x"+a-0x10000;
return c!==c||b?
a:
c<0?
String.fromCharCode(c+0x10000):
String.fromCharCode(c>>10|0xD800,c&0x3FF|0xDC00);
};
try{
y.apply(
(arr=w.call(preferredDoc.childNodes)),
preferredDoc.childNodes
);
arr[preferredDoc.childNodes.length].nodeType;
}catch(e){
y={apply:arr.length?
function(a,b){
push_native.apply(a,w.call(b));
}:
function(a,b){
var j=a.length,
i=0;
while((a[j++]=b[i++])){}
a.length=j-1;
}
};
}
function E(a,b,c,d){
var e,elem,m,nodeType,
i,groups,old,nid,newContext,newSelector;
if((b?b.ownerDocument||b:preferredDoc)!==document){
setDocument(b);
}
b=b||document;
c=c||[];
if(!a||typeof a!=="string"){
return c;
}
if((nodeType=b.nodeType)!==1&&nodeType!==9){
return[];
}
if(documentIsHTML&&!d){
if((e=rquickExpr.exec(a))){
if((m=e[1])){
if(nodeType===9){
elem=b.getElementById(m);
if(elem&&elem.parentNode){
if(elem.id===m){
c.push(elem);
return c;
}
}else{
return c;
}
}else{
if(b.ownerDocument&&(elem=b.ownerDocument.getElementById(m))&&
contains(b,elem)&&elem.id===m){
c.push(elem);
return c;
}
}
}else if(e[2]){
y.apply(c,b.getElementsByTagName(a));
return c;
}else if((m=e[3])&&D.getElementsByClassName&&b.getElementsByClassName){
y.apply(c,b.getElementsByClassName(m));
return c;
}
}
if(D.qsa&&(!rbuggyQSA||!rbuggyQSA.test(a))){
nid=old=expando;
newContext=b;
newSelector=nodeType===9&&a;
if(nodeType===1&&b.nodeName.toLowerCase()!=="object"){
groups=tokenize(a);
if((old=b.getAttribute("id"))){
nid=old.replace(rescape,"\\$&");
}else{
b.setAttribute("id",nid);
}
nid="[id='"+nid+"'] ";
i=groups.length;
while(i--){
groups[i]=nid+toSelector(groups[i]);
}
newContext=rsibling.test(a)&&testContext(b.parentNode)||b;
newSelector=groups.join(",");
}
if(newSelector){
try{
y.apply(c,
newContext.querySelectorAll(newSelector)
);
return c;
}catch(qsaError){
}finally{
if(!old){
b.removeAttribute("id");
}
}
}
}
}
return select(a.replace(rtrim,"$1"),b,c,d);
}

function createCache(){
var c=[];
function cache(a,b){
if(c.push(a+" ")>Expr.cacheLength){
delete cache[c.shift()];
}
return(cache[a+" "]=b);
}
return cache;
}

function markFunction(a){
a[expando]=true;
return a;
}

function assert(a){
var b=document.createElement("div");
try{
return!!a(b);
}catch(e){
return false;
}finally{
if(b.parentNode){
b.parentNode.removeChild(b);
}
b=null;
}
}

function addHandle(a,b){
var c=a.split("|"),
i=a.length;
while(i--){
Expr.attrHandle[c[i]]=b;
}
}

function siblingCheck(a,b){
var c=b&&a,
diff=c&&a.nodeType===1&&b.nodeType===1&&
(~b.sourceIndex||MAX_NEGATIVE)-
(~a.sourceIndex||MAX_NEGATIVE);
if(diff){
return diff;
}
if(c){
while((c=c.nextSibling)){
if(c===b){
return-1;
}
}
}
return a?1:-1;
}

function createInputPseudo(c){
return function(a){
var b=a.nodeName.toLowerCase();
return b==="input"&&a.type===c;
};
}

function createButtonPseudo(c){
return function(a){
var b=a.nodeName.toLowerCase();
return(b==="input"||b==="button")&&a.type===c;
};
}

function createPositionalPseudo(d){
return markFunction(function(c){
c=+c;
return markFunction(function(a,b){
var j,
matchIndexes=d([],a.length,c),
i=matchIndexes.length;
while(i--){
if(a[(j=matchIndexes[i])]){
a[j]=!(b[j]=a[j]);
}
}
});
});
}

function testContext(a){
return a&&typeof a.getElementsByTagName!==N&&a;
}
D=E.support={};

isXML=E.isXML=function(a){
var b=a&&(a.ownerDocument||a).documentElement;
return b?b.nodeName!=="HTML":false;
};

setDocument=E.setDocument=function(e){
var f,
doc=e?e.ownerDocument||e:preferredDoc,
parent=doc.defaultView;
if(doc===document||doc.nodeType!==9||!doc.documentElement){
return document;
}
document=doc;
bl=doc.documentElement;
documentIsHTML=!isXML(doc);
if(parent&&parent!==parent.top){
if(parent.addEventListener){
parent.addEventListener("unload",function(){
setDocument();
},false);
}else if(parent.attachEvent){
parent.attachEvent("onunload",function(){
setDocument();
});
}
}

D.attributes=assert(function(a){
a.className="i";
return!a.getAttribute("className");
});

D.getElementsByTagName=assert(function(a){
a.appendChild(doc.createComment(""));
return!a.getElementsByTagName("*").length;
});
D.getElementsByClassName=rnative.test(doc.getElementsByClassName)&&assert(function(a){
a.innerHTML="<div class='a'></div><div class='a i'></div>";
a.firstChild.className="i";
return a.getElementsByClassName("i").length===2;
});
D.getById=assert(function(a){
bl.appendChild(a).id=expando;
return!doc.getElementsByName||!doc.getElementsByName(expando).length;
});
if(D.getById){
Expr.find["ID"]=function(a,b){
if(typeof b.getElementById!==N&&documentIsHTML){
var m=b.getElementById(a);
return m&&m.parentNode?[m]:[];
}
};
Expr.filter["ID"]=function(b){
var c=b.replace(runescape,funescape);
return function(a){
return a.getAttribute("id")===c;
};
};
}else{
delete Expr.find["ID"];
Expr.filter["ID"]=function(c){
var d=c.replace(runescape,funescape);
return function(a){
var b=typeof a.getAttributeNode!==N&&a.getAttributeNode("id");
return b&&b.value===d;
};
};
}
Expr.find["TAG"]=D.getElementsByTagName?
function(a,b){
if(typeof b.getElementsByTagName!==N){
return b.getElementsByTagName(a);
}
}:
function(a,b){
var c,
tmp=[],
i=0,
results=b.getElementsByTagName(a);
if(a==="*"){
while((c=results[i++])){
if(c.nodeType===1){
tmp.push(c);
}
}
return tmp;
}
return results;
};
Expr.find["CLASS"]=D.getElementsByClassName&&function(a,b){
if(typeof b.getElementsByClassName!==N&&documentIsHTML){
return b.getElementsByClassName(a);
}
};

rbuggyMatches=[];
rbuggyQSA=[];
if((D.qsa=rnative.test(doc.querySelectorAll))){
assert(function(a){
a.innerHTML="<select t=''><option selected=''></option></select>";
if(a.querySelectorAll("[t^='']").length){
rbuggyQSA.push("[*^$]="+whitespace+"*(?:''|\"\")");
}
if(!a.querySelectorAll("[selected]").length){
rbuggyQSA.push("\\["+whitespace+"*(?:value|"+booleans+")");
}
if(!a.querySelectorAll(":checked").length){
rbuggyQSA.push(":checked");
}
});
assert(function(a){
var b=doc.createElement("input");
b.setAttribute("type","hidden");
a.appendChild(b).setAttribute("name","D");
if(a.querySelectorAll("[name=d]").length){
rbuggyQSA.push("name"+whitespace+"*[*^$|!~]?=");
}
if(!a.querySelectorAll(":enabled").length){
rbuggyQSA.push(":enabled",":disabled");
}
a.querySelectorAll("*,:x");
rbuggyQSA.push(",.*:");
});
}
if((D.matchesSelector=rnative.test((matches=bl.webkitMatchesSelector||
bl.mozMatchesSelector||
bl.oMatchesSelector||
bl.msMatchesSelector)))){
assert(function(a){
D.disconnectedMatch=matches.call(a,"div");
matches.call(a,"[s!='']:x");
rbuggyMatches.push("!=",pseudos);
});
}
rbuggyQSA=rbuggyQSA.length&&new RegExp(rbuggyQSA.join("|"));
rbuggyMatches=rbuggyMatches.length&&new RegExp(rbuggyMatches.join("|"));

f=rnative.test(bl.compareDocumentPosition);
contains=f||rnative.test(bl.contains)?
function(a,b){
var c=a.nodeType===9?a.documentElement:a,
bup=b&&b.parentNode;
return a===bup||!!(bup&&bup.nodeType===1&&(
c.contains?
c.contains(bup):
a.compareDocumentPosition&&a.compareDocumentPosition(bup)&16
));
}:
function(a,b){
if(b){
while((b=b.parentNode)){
if(b===a){
return true;
}
}
}
return false;
};

sortOrder=f?
function(a,b){
if(a===b){
hasDuplicate=true;
return 0;
}
var c=!a.compareDocumentPosition-!b.compareDocumentPosition;
if(c){
return c;
}
c=(a.ownerDocument||a)===(b.ownerDocument||b)?
a.compareDocumentPosition(b):
1;
if(c&1||
(!D.sortDetached&&b.compareDocumentPosition(a)===c)){
if(a===doc||a.ownerDocument===preferredDoc&&contains(preferredDoc,a)){
return-1;
}
if(b===doc||b.ownerDocument===preferredDoc&&contains(preferredDoc,b)){
return 1;
}
return sortInput?
(z.call(sortInput,a)-z.call(sortInput,b)):
0;
}
return c&4?-1:1;
}:
function(a,b){
if(a===b){
hasDuplicate=true;
return 0;
}
var c,
i=0,
aup=a.parentNode,
bup=b.parentNode,
ap=[a],
bp=[b];
if(!aup||!bup){
return a===doc?-1:
b===doc?1:
aup?-1:
bup?1:
sortInput?
(z.call(sortInput,a)-z.call(sortInput,b)):
0;
}else if(aup===bup){
return siblingCheck(a,b);
}
c=a;
while((c=c.parentNode)){
ap.unshift(c);
}
c=b;
while((c=c.parentNode)){
bp.unshift(c);
}
while(ap[i]===bp[i]){
i++;
}
return i?
siblingCheck(ap[i],bp[i]):
ap[i]===preferredDoc?-1:
bp[i]===preferredDoc?1:
0;
};
return doc;
};
E.matches=function(a,b){
return E(a,null,null,b);
};
E.matchesSelector=function(a,b){
if((a.ownerDocument||a)!==document){
setDocument(a);
}
b=b.replace(rattributeQuotes,"='$1']");
if(D.matchesSelector&&documentIsHTML&&
(!rbuggyMatches||!rbuggyMatches.test(b))&&
(!rbuggyQSA||!rbuggyQSA.test(b))){
try{
var c=matches.call(a,b);
if(c||D.disconnectedMatch||
a.document&&a.document.nodeType!==11){
return c;
}
}catch(e){}
}
return E(b,document,null,[a]).length>0;
};
E.contains=function(a,b){
if((a.ownerDocument||a)!==document){
setDocument(a);
}
return contains(a,b);
};
E.attr=function(a,b){
if((a.ownerDocument||a)!==document){
setDocument(a);
}
var c=Expr.attrHandle[b.toLowerCase()],
val=c&&B.call(Expr.attrHandle,b.toLowerCase())?
c(a,b,!documentIsHTML):
undefined;
return val!==undefined?
val:
D.attributes||!documentIsHTML?
a.getAttribute(b):
(val=a.getAttributeNode(b))&&val.specified?
val.value:
null;
};
E.error=function(a){
throw new Error("Syntax error, unrecognized expression: "+a);
};

E.uniqueSort=function(a){
var b,
duplicates=[],
j=0,
i=0;
hasDuplicate=!D.detectDuplicates;
sortInput=!D.sortStable&&a.slice(0);
a.sort(sortOrder);
if(hasDuplicate){
while((b=a[i++])){
if(b===a[i]){
j=duplicates.push(i);
}
}
while(j--){
a.splice(duplicates[j],1);
}
}
sortInput=null;
return a;
};

getText=E.getText=function(a){
var b,
ret="",
i=0,
nodeType=a.nodeType;
if(!nodeType){
while((b=a[i++])){
ret+=getText(b);
}
}else if(nodeType===1||nodeType===9||nodeType===11){
if(typeof a.textContent==="string"){
return a.textContent;
}else{
for(a=a.firstChild;a;a=a.nextSibling){
ret+=getText(a);
}
}
}else if(nodeType===3||nodeType===4){
return a.nodeValue;
}
return ret;
};
Expr=E.selectors={
cacheLength:50,
createPseudo:markFunction,
match:matchExpr,
attrHandle:{},
find:{},
relative:{
">":{dir:"parentNode",first:true},
" ":{dir:"parentNode"},
"+":{dir:"previousSibling",first:true},
"~":{dir:"previousSibling"}
},
preFilter:{
"ATTR":function(a){
a[1]=a[1].replace(runescape,funescape);
a[3]=(a[4]||a[5]||"").replace(runescape,funescape);
if(a[2]==="~="){
a[3]=" "+a[3]+" ";
}
return a.slice(0,4);
},
"CHILD":function(a){

a[1]=a[1].toLowerCase();
if(a[1].slice(0,3)==="nth"){
if(!a[3]){
E.error(a[0]);
}
a[4]=+(a[4]?a[5]+(a[6]||1):2*(a[3]==="even"||a[3]==="odd"));
a[5]=+((a[7]+a[8])||a[3]==="odd");
}else if(a[3]){
E.error(a[0]);
}
return a;
},
"PSEUDO":function(a){
var b,
unquoted=!a[5]&&a[2];
if(matchExpr["CHILD"].test(a[0])){
return null;
}
if(a[3]&&a[4]!==undefined){
a[2]=a[4];
}else if(unquoted&&rpseudo.test(unquoted)&&
(b=tokenize(unquoted,true))&&
(b=unquoted.indexOf(")",unquoted.length-b)-unquoted.length)){
a[0]=a[0].slice(0,b);
a[2]=unquoted.slice(0,b);
}
return a.slice(0,3);
}
},
filter:{
"TAG":function(b){
var c=b.replace(runescape,funescape).toLowerCase();
return b==="*"?
function(){return true}:
function(a){
return a.nodeName&&a.nodeName.toLowerCase()===c;
};
},
"CLASS":function(b){
var c=classCache[b+" "];
return c||
(c=new RegExp("(^|"+whitespace+")"+b+"("+whitespace+"|$)"))&&
classCache(b,function(a){
return c.test(typeof a.className==="string"&&a.className||typeof a.getAttribute!==N&&a.getAttribute("class")||"");
});
},
"ATTR":function(c,d,e){
return function(a){
var b=E.attr(a,c);
if(b==null){
return d==="!=";
}
if(!d){
return true;
}
b+="";
return d==="="?b===e:
d==="!="?b!==e:
d==="^="?e&&b.indexOf(e)===0:
d==="*="?e&&b.indexOf(e)>-1:
d==="$="?e&&b.slice(-e.length)===e:
d==="~="?(" "+b+" ").indexOf(e)>-1:
d==="|="?b===e||b.slice(0,e.length+1)===e+"-":
false;
};
},
"CHILD":function(e,f,g,h,i){
var j=e.slice(0,3)!=="nth",
forward=e.slice(-4)!=="last",
ofType=f==="of-type";
return h===1&&i===0?
function(a){
return!!a.parentNode;
}:
function(a,b,c){
var d,outerCache,node,diff,nodeIndex,start,
dir=j!==forward?"nextSibling":"previousSibling",
parent=a.parentNode,
name=ofType&&a.nodeName.toLowerCase(),
useCache=!c&&!ofType;
if(parent){
if(j){
while(dir){
node=a;
while((node=node[dir])){
if(ofType?node.nodeName.toLowerCase()===name:node.nodeType===1){
return false;
}
}
start=dir=e==="only"&&!start&&"nextSibling";
}
return true;
}
start=[forward?parent.firstChild:parent.lastChild];
if(forward&&useCache){
outerCache=parent[expando]||(parent[expando]={});
d=outerCache[e]||[];
nodeIndex=d[0]===dirruns&&d[1];
diff=d[0]===dirruns&&d[2];
node=nodeIndex&&parent.childNodes[nodeIndex];
while((node=++nodeIndex&&node&&node[dir]||
(diff=nodeIndex=0)||start.pop())){
if(node.nodeType===1&&++diff&&node===a){
outerCache[e]=[dirruns,nodeIndex,diff];
break;
}
}
}else if(useCache&&(d=(a[expando]||(a[expando]={}))[e])&&d[0]===dirruns){
diff=d[1];
}else{
while((node=++nodeIndex&&node&&node[dir]||
(diff=nodeIndex=0)||start.pop())){
if((ofType?node.nodeName.toLowerCase()===name:node.nodeType===1)&&++diff){
if(useCache){
(node[expando]||(node[expando]={}))[e]=[dirruns,diff];
}
if(node===a){
break;
}
}
}
}
diff-=i;
return diff===h||(diff%h===0&&diff/h>=0);
}
};
},
"PSEUDO":function(d,e){
var f,
fn=Expr.pseudos[d]||Expr.setFilters[d.toLowerCase()]||
E.error("unsupported pseudo: "+d);
if(fn[expando]){
return fn(e);
}
if(fn.length>1){
f=[d,d,"",e];
return Expr.setFilters.hasOwnProperty(d.toLowerCase())?
markFunction(function(a,b){
var c,
matched=fn(a,e),
i=matched.length;
while(i--){
c=z.call(a,matched[i]);
a[c]=!(b[c]=matched[i]);
}
}):
function(a){
return fn(a,0,f);
};
}
return fn;
}
},
pseudos:{
"not":markFunction(function(f){
var g=[],
results=[],
matcher=compile(f.replace(rtrim,"$1"));
return matcher[expando]?
markFunction(function(a,b,c,d){
var e,
unmatched=matcher(a,null,d,[]),
i=a.length;
while(i--){
if((e=unmatched[i])){
a[i]=!(b[i]=e);
}
}
}):
function(a,b,c){
g[0]=a;
matcher(g,null,c,results);
return!results.pop();
};
}),
"has":markFunction(function(b){
return function(a){
return E(b,a).length>0;
};
}),
"contains":markFunction(function(b){
return function(a){
return(a.textContent||a.innerText||getText(a)).indexOf(b)>-1;
};
}),
"lang":markFunction(function(c){
if(!ridentifier.test(c||"")){
E.error("unsupported lang: "+c);
}
c=c.replace(runescape,funescape).toLowerCase();
return function(a){
var b;
do{
if((b=documentIsHTML?
a.lang:
a.getAttribute("xml:lang")||a.getAttribute("lang"))){
b=b.toLowerCase();
return b===c||b.indexOf(c+"-")===0;
}
}while((a=a.parentNode)&&a.nodeType===1);
return false;
};
}),
"target":function(a){
var b=n.location&&n.location.hash;
return b&&b.slice(1)===a.id;
},
"root":function(a){
return a===bl;
},
"focus":function(a){
return a===document.activeElement&&(!document.hasFocus||document.hasFocus())&&!!(a.type||a.href||~a.tabIndex);
},
"enabled":function(a){
return a.disabled===false;
},
"disabled":function(a){
return a.disabled===true;
},
"checked":function(a){
var b=a.nodeName.toLowerCase();
return(b==="input"&&!!a.checked)||(b==="option"&&!!a.selected);
},
"selected":function(a){
if(a.parentNode){
a.parentNode.selectedIndex;
}
return a.selected===true;
},
"empty":function(a){
for(a=a.firstChild;a;a=a.nextSibling){
if(a.nodeType<6){
return false;
}
}
return true;
},
"parent":function(a){
return!Expr.pseudos["empty"](a);
},
"header":function(a){
return rheader.test(a.nodeName);
},
"input":function(a){
return rinputs.test(a.nodeName);
},
"button":function(a){
var b=a.nodeName.toLowerCase();
return b==="input"&&a.type==="button"||b==="button";
},
"text":function(a){
var b;
return a.nodeName.toLowerCase()==="input"&&
a.type==="text"&&
((b=a.getAttribute("type"))==null||b.toLowerCase()==="text");
},
"first":createPositionalPseudo(function(){
return[0];
}),
"last":createPositionalPseudo(function(a,b){
return[b-1];
}),
"eq":createPositionalPseudo(function(a,b,c){
return[c<0?c+b:c];
}),
"even":createPositionalPseudo(function(a,b){
var i=0;
for(;i<b;i+=2){
a.push(i);
}
return a;
}),
"odd":createPositionalPseudo(function(a,b){
var i=1;
for(;i<b;i+=2){
a.push(i);
}
return a;
}),
"lt":createPositionalPseudo(function(a,b,c){
var i=c<0?c+b:c;
for(;--i>=0;){
a.push(i);
}
return a;
}),
"gt":createPositionalPseudo(function(a,b,c){
var i=c<0?c+b:c;
for(;++i<b;){
a.push(i);
}
return a;
})
}
};
Expr.pseudos["nth"]=Expr.pseudos["eq"];
for(i in{radio:true,checkbox:true,file:true,password:true,image:true}){
Expr.pseudos[i]=createInputPseudo(i);
}
for(i in{submit:true,reset:true}){
Expr.pseudos[i]=createButtonPseudo(i);
}
function setFilters(){}
setFilters.prototype=Expr.filters=Expr.pseudos;
Expr.setFilters=new setFilters();
function tokenize(a,b){
var c,match,tokens,type,
soFar,groups,preFilters,
cached=tokenCache[a+" "];
if(cached){
return b?0:cached.slice(0);
}
soFar=a;
groups=[];
preFilters=Expr.preFilter;
while(soFar){
if(!c||(match=rcomma.exec(soFar))){
if(match){
soFar=soFar.slice(match[0].length)||soFar;
}
groups.push((tokens=[]));
}
c=false;
if((match=rcombinators.exec(soFar))){
c=match.shift();
tokens.push({
value:c,
type:match[0].replace(rtrim," ")
});
soFar=soFar.slice(c.length);
}
for(type in Expr.filter){
if((match=matchExpr[type].exec(soFar))&&(!preFilters[type]||
(match=preFilters[type](match)))){
c=match.shift();
tokens.push({
value:c,
type:type,
matches:match
});
soFar=soFar.slice(c.length);
}
}
if(!c){
break;
}
}
return b?
soFar.length:
soFar?
E.error(a):
tokenCache(a,groups).slice(0);
}
function toSelector(a){
var i=0,
len=a.length,
selector="";
for(;i<len;i++){
selector+=a[i].value;
}
return selector;
}
function addCombinator(e,f,g){
var h=f.dir,
checkNonElements=g&&h==="parentNode",
doneName=done++;
return f.first?
function(a,b,c){
while((a=a[h])){
if(a.nodeType===1||checkNonElements){
return e(a,b,c);
}
}
}:
function(a,b,c){
var d,outerCache,
newCache=[dirruns,doneName];
if(c){
while((a=a[h])){
if(a.nodeType===1||checkNonElements){
if(e(a,b,c)){
return true;
}
}
}
}else{
while((a=a[h])){
if(a.nodeType===1||checkNonElements){
outerCache=a[expando]||(a[expando]={});
if((d=outerCache[h])&&
d[0]===dirruns&&d[1]===doneName){
return(newCache[2]=d[2]);
}else{
outerCache[h]=newCache;
if((newCache[2]=e(a,b,c))){
return true;
}
}
}
}
}
};
}
function elementMatcher(d){
return d.length>1?
function(a,b,c){
var i=d.length;
while(i--){
if(!d[i](a,b,c)){
return false;
}
}
return true;
}:
d[0];
}
function condense(a,b,c,d,e){
var f,
newUnmatched=[],
i=0,
len=a.length,
mapped=b!=null;
for(;i<len;i++){
if((f=a[i])){
if(!c||c(f,d,e)){
newUnmatched.push(f);
if(mapped){
b.push(i);
}
}
}
}
return newUnmatched;
}
function setMatcher(f,g,h,j,k,l){
if(j&&!j[expando]){
j=setMatcher(j);
}
if(k&&!k[expando]){
k=setMatcher(k,l);
}
return markFunction(function(a,b,c,d){
var e,i,elem,
preMap=[],
postMap=[],
preexisting=b.length,
elems=a||multipleContexts(g||"*",c.nodeType?[c]:c,[]),
matcherIn=f&&(a||!g)?
condense(elems,preMap,f,c,d):
elems,
matcherOut=h?
k||(a?f:preexisting||j)?
[]:
b:
matcherIn;
if(h){
h(matcherIn,matcherOut,c,d);
}
if(j){
e=condense(matcherOut,postMap);
j(e,[],c,d);
i=e.length;
while(i--){
if((elem=e[i])){
matcherOut[postMap[i]]=!(matcherIn[postMap[i]]=elem);
}
}
}
if(a){
if(k||f){
if(k){
e=[];
i=matcherOut.length;
while(i--){
if((elem=matcherOut[i])){
e.push((matcherIn[i]=elem));
}
}
k(null,(matcherOut=[]),e,d);
}
i=matcherOut.length;
while(i--){
if((elem=matcherOut[i])&&
(e=k?z.call(a,elem):preMap[i])>-1){
a[e]=!(b[e]=elem);
}
}
}
}else{
matcherOut=condense(
matcherOut===b?
matcherOut.splice(preexisting,matcherOut.length):
matcherOut
);
if(k){
k(null,b,matcherOut,d);
}else{
y.apply(b,matcherOut);
}
}
});
}
function matcherFromTokens(d){
var e,matcher,j,
len=d.length,
leadingRelative=Expr.relative[d[0].type],
implicitRelative=leadingRelative||Expr.relative[" "],
i=leadingRelative?1:0,
matchContext=addCombinator(function(a){
return a===e;
},implicitRelative,true),
matchAnyContext=addCombinator(function(a){
return z.call(e,a)>-1;
},implicitRelative,true),
matchers=[function(a,b,c){
return(!leadingRelative&&(c||b!==outermostContext))||(
(e=b).nodeType?
matchContext(a,b,c):
matchAnyContext(a,b,c));
}];
for(;i<len;i++){
if((matcher=Expr.relative[d[i].type])){
matchers=[addCombinator(elementMatcher(matchers),matcher)];
}else{
matcher=Expr.filter[d[i].type].apply(null,d[i].matches);
if(matcher[expando]){
j=++i;
for(;j<len;j++){
if(Expr.relative[d[j].type]){
break;
}
}
return setMatcher(
i>1&&elementMatcher(matchers),
i>1&&toSelector(
d.slice(0,i-1).concat({value:d[i-2].type===" "?"*":""})
).replace(rtrim,"$1"),
matcher,
i<j&&matcherFromTokens(d.slice(i,j)),
j<len&&matcherFromTokens((d=d.slice(j))),
j<len&&toSelector(d)
);
}
matchers.push(matcher);
}
}
return elementMatcher(matchers);
}
function matcherFromGroupMatchers(g,h){
var k=h.length>0,
byElement=g.length>0,
superMatcher=function(a,b,c,d,e){
var f,j,matcher,
matchedCount=0,
i="0",
unmatched=a&&[],
setMatched=[],
contextBackup=outermostContext,
elems=a||byElement&&Expr.find["TAG"]("*",e),
dirrunsUnique=(dirruns+=contextBackup==null?1:Math.random()||0.1),
len=elems.length;
if(e){
outermostContext=b!==document&&b;
}
for(;i!==len&&(f=elems[i])!=null;i++){
if(byElement&&f){
j=0;
while((matcher=g[j++])){
if(matcher(f,b,c)){
d.push(f);
break;
}
}
if(e){
dirruns=dirrunsUnique;
}
}
if(k){
if((f=!matcher&&f)){
matchedCount--;
}
if(a){
unmatched.push(f);
}
}
}
matchedCount+=i;
if(k&&i!==matchedCount){
j=0;
while((matcher=h[j++])){
matcher(unmatched,setMatched,b,c);
}
if(a){
if(matchedCount>0){
while(i--){
if(!(unmatched[i]||setMatched[i])){
setMatched[i]=pop.call(d);
}
}
}
setMatched=condense(setMatched);
}
y.apply(d,setMatched);
if(e&&!a&&setMatched.length>0&&
(matchedCount+h.length)>1){
E.uniqueSort(d);
}
}
if(e){
dirruns=dirrunsUnique;
outermostContext=contextBackup;
}
return unmatched;
};
return k?
markFunction(superMatcher):
superMatcher;
}
compile=E.compile=function(a,b){
var i,
setMatchers=[],
elementMatchers=[],
cached=compilerCache[a+" "];
if(!cached){
if(!b){
b=tokenize(a);
}
i=b.length;
while(i--){
cached=matcherFromTokens(b[i]);
if(cached[expando]){
setMatchers.push(cached);
}else{
elementMatchers.push(cached);
}
}
cached=compilerCache(a,matcherFromGroupMatchers(elementMatchers,setMatchers));
}
return cached;
};
function multipleContexts(a,b,c){
var i=0,
len=b.length;
for(;i<len;i++){
E(a,b[i],c);
}
return c;
}
function select(a,b,c,d){
var i,tokens,token,type,find,
match=tokenize(a);
if(!d){
if(match.length===1){
tokens=match[0]=match[0].slice(0);
if(tokens.length>2&&(token=tokens[0]).type==="ID"&&
D.getById&&b.nodeType===9&&documentIsHTML&&
Expr.relative[tokens[1].type]){
b=(Expr.find["ID"](token.matches[0].replace(runescape,funescape),b)||[])[0];
if(!b){
return c;
}
a=a.slice(tokens.shift().value.length);
}
i=matchExpr["needsContext"].test(a)?0:tokens.length;
while(i--){
token=tokens[i];
if(Expr.relative[(type=token.type)]){
break;
}
if((find=Expr.find[type])){
if((d=find(
token.matches[0].replace(runescape,funescape),
rsibling.test(tokens[0].type)&&testContext(b.parentNode)||b
))){
tokens.splice(i,1);
a=d.length&&toSelector(tokens);
if(!a){
y.apply(c,d);
return c;
}
break;
}
}
}
}
}
compile(a,match)(
d,
b,
!documentIsHTML,
c,
rsibling.test(a)&&testContext(b.parentNode)||b
);
return c;
}
D.sortStable=expando.split("").sort(sortOrder).join("")===expando;
D.detectDuplicates=!!hasDuplicate;
setDocument();
D.sortDetached=assert(function(a){
return a.compareDocumentPosition(document.createElement("div"))&1;
});
if(!assert(function(a){
a.innerHTML="<a href='#'></a>";
return a.firstChild.getAttribute("href")==="#";
})){
addHandle("type|href|height|width",function(a,b,c){
if(!c){
return a.getAttribute(b,b.toLowerCase()==="type"?1:2);
}
});
}
if(!D.attributes||!assert(function(a){
a.innerHTML="<input/>";
a.firstChild.setAttribute("value","");
return a.firstChild.getAttribute("value")==="";
})){
addHandle("value",function(a,b,c){
if(!c&&a.nodeName.toLowerCase()==="input"){
return a.defaultValue;
}
});
}
if(!assert(function(a){
return a.getAttribute("disabled")==null;
})){
addHandle(booleans,function(a,b,c){
var d;
if(!c){
return a[b]===true?b.toLowerCase():
(d=a.getAttributeNode(b))&&d.specified?
d.value:
null;
}
});
}
return E;
})(o);
jQuery.find=E;
jQuery.expr=E.selectors;
jQuery.expr[":"]=jQuery.expr.pseudos;
jQuery.unique=E.uniqueSort;
jQuery.text=E.getText;
jQuery.isXMLDoc=E.isXML;
jQuery.contains=E.contains;
var F=jQuery.expr.match.needsContext;
var G=(/^<(\w+)\s*\/?>(?:<\/\1>|)$/);
var H=/^.[^:#\[\.,]*$/;
function winnow(b,c,d){
if(jQuery.isFunction(c)){
return jQuery.grep(b,function(a,i){

return!!c.call(a,i,a)!==d;
});
}
if(c.nodeType){
return jQuery.grep(b,function(a){
return(a===c)!==d;
});
}
if(typeof c==="string"){
if(H.test(c)){
return jQuery.filter(c,b,d);
}
c=jQuery.filter(c,b);
}
return jQuery.grep(b,function(a){
return(jQuery.inArray(a,c)>=0)!==d;
});
}
jQuery.filter=function(b,c,d){
var e=c[0];
if(d){
b=":not("+b+")";
}
return c.length===1&&e.nodeType===1?
jQuery.find.matchesSelector(e,b)?[e]:[]:
jQuery.find.matches(b,jQuery.grep(c,function(a){
return a.nodeType===1;
}));
};
jQuery.fn.extend({
find:function(a){
var i,
ret=[],
self=this,
len=self.length;
if(typeof a!=="string"){
return this.pushStack(jQuery(a).filter(function(){
for(i=0;i<len;i++){
if(jQuery.contains(self[i],this)){
return true;
}
}
}));
}
for(i=0;i<len;i++){
jQuery.find(a,self[i],ret);
}
ret=this.pushStack(len>1?jQuery.unique(ret):ret);
ret.selector=this.selector?this.selector+" "+a:a;
return ret;
},
filter:function(a){
return this.pushStack(winnow(this,a||[],false));
},
not:function(a){
return this.pushStack(winnow(this,a||[],true));
},
is:function(a){
return!!winnow(
this,
typeof a==="string"&&F.test(a)?
jQuery(a):
a||[],
false
).length;
}
});
var I,
document=o.document,
rquickExpr=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,
init=jQuery.fn.init=function(a,b){
var c,elem;
if(!a){
return this;
}
if(typeof a==="string"){
if(a.charAt(0)==="<"&&a.charAt(a.length-1)===">"&&a.length>=3){
c=[null,a,null];
}else{
c=rquickExpr.exec(a);
}
if(c&&(c[1]||!b)){
if(c[1]){
b=b instanceof jQuery?b[0]:b;
jQuery.merge(this,jQuery.parseHTML(
c[1],
b&&b.nodeType?b.ownerDocument||b:document,
true
));
if(G.test(c[1])&&jQuery.isPlainObject(b)){
for(c in b){
if(jQuery.isFunction(this[c])){
this[c](b[c]);
}else{
this.attr(c,b[c]);
}
}
}
return this;
}else{
elem=document.getElementById(c[2]);
if(elem&&elem.parentNode){
if(elem.id!==c[2]){
return I.find(a);
}
this.length=1;
this[0]=elem;
}
this.context=document;
this.selector=a;
return this;
}
}else if(!b||b.jquery){
return(b||I).find(a);
}else{
return this.constructor(b).find(a);
}
}else if(a.nodeType){
this.context=this[0]=a;
this.length=1;
return this;
}else if(jQuery.isFunction(a)){
return typeof I.ready!=="undefined"?
I.ready(a):
a(jQuery);
}
if(a.selector!==undefined){
this.selector=a.selector;
this.context=a.context;
}
return jQuery.makeArray(a,this);
};
init.prototype=jQuery.fn;
I=jQuery(document);
var J=/^(?:parents|prev(?:Until|All))/,
guaranteedUnique={
children:true,
contents:true,
next:true,
prev:true
};
jQuery.extend({
dir:function(a,b,c){
var d=[],
cur=a[b];
while(cur&&cur.nodeType!==9&&(c===undefined||cur.nodeType!==1||!jQuery(cur).is(c))){
if(cur.nodeType===1){
d.push(cur);
}
cur=cur[b];
}
return d;
},
sibling:function(n,a){
var r=[];
for(;n;n=n.nextSibling){
if(n.nodeType===1&&n!==a){
r.push(n);
}
}
return r;
}
});
jQuery.fn.extend({
has:function(a){
var i,
targets=jQuery(a,this),
len=targets.length;
return this.filter(function(){
for(i=0;i<len;i++){
if(jQuery.contains(this,targets[i])){
return true;
}
}
});
},
closest:function(a,b){
var c,
i=0,
l=this.length,
matched=[],
pos=F.test(a)||typeof a!=="string"?
jQuery(a,b||this.context):
0;
for(;i<l;i++){
for(c=this[i];c&&c!==b;c=c.parentNode){
if(c.nodeType<11&&(pos?
pos.index(c)>-1:
c.nodeType===1&&
jQuery.find.matchesSelector(c,a))){
matched.push(c);
break;
}
}
}
return this.pushStack(matched.length>1?jQuery.unique(matched):matched);
},
index:function(a){
if(!a){
return(this[0]&&this[0].parentNode)?this.first().prevAll().length:-1;
}
if(typeof a==="string"){
return jQuery.inArray(this[0],jQuery(a));
}
return jQuery.inArray(
a.jquery?a[0]:a,this);
},
add:function(a,b){
return this.pushStack(
jQuery.unique(
jQuery.merge(this.get(),jQuery(a,b))
)
);
},
addBack:function(a){
return this.add(a==null?
this.prevObject:this.prevObject.filter(a)
);
}
});
function sibling(a,b){
do{
a=a[b];
}while(a&&a.nodeType!==1);
return a;
}
jQuery.each({
parent:function(a){
var b=a.parentNode;
return b&&b.nodeType!==11?b:null;
},
parents:function(a){
return jQuery.dir(a,"parentNode");
},
parentsUntil:function(a,i,b){
return jQuery.dir(a,"parentNode",b);
},
next:function(a){
return sibling(a,"nextSibling");
},
prev:function(a){
return sibling(a,"previousSibling");
},
nextAll:function(a){
return jQuery.dir(a,"nextSibling");
},
prevAll:function(a){
return jQuery.dir(a,"previousSibling");
},
nextUntil:function(a,i,b){
return jQuery.dir(a,"nextSibling",b);
},
prevUntil:function(a,i,b){
return jQuery.dir(a,"previousSibling",b);
},
siblings:function(a){
return jQuery.sibling((a.parentNode||{}).firstChild,a);
},
children:function(a){
return jQuery.sibling(a.firstChild);
},
contents:function(a){
return jQuery.nodeName(a,"iframe")?
a.contentDocument||a.contentWindow.document:
jQuery.merge([],a.childNodes);
}
},function(d,e){
jQuery.fn[d]=function(a,b){
var c=jQuery.map(this,e,a);
if(d.slice(-5)!=="Until"){
b=a;
}
if(b&&typeof b==="string"){
c=jQuery.filter(b,c);
}
if(this.length>1){
if(!guaranteedUnique[d]){
c=jQuery.unique(c);
}
if(J.test(d)){
c=c.reverse();
}
}
return this.pushStack(c);
};
});
var K=(/\S+/g);
var L={};
function createOptions(b){
var c=L[b]={};
jQuery.each(b.match(K)||[],function(_,a){
c[a]=true;
});
return c;
}

jQuery.Callbacks=function(e){
e=typeof e==="string"?
(L[e]||createOptions(e)):
jQuery.extend({},e);
var f,
memory,
fired,
firingLength,
firingIndex,
firingStart,
list=[],
stack=!e.once&&[],
fire=function(a){
memory=e.memory&&a;
fired=true;
firingIndex=firingStart||0;
firingStart=0;
firingLength=list.length;
f=true;
for(;list&&firingIndex<firingLength;firingIndex++){
if(list[firingIndex].apply(a[0],a[1])===false&&e.stopOnFalse){
memory=false;break;
}
}
f=false;
if(list){
if(stack){
if(stack.length){
fire(stack.shift());
}
}else if(memory){
list=[];
}else{
self.disable();
}
}
},
self={
add:function(){
if(list){
var d=list.length;
(function add(c){
jQuery.each(c,function(_,a){
var b=jQuery.type(a);
if(b==="function"){
if(!e.unique||!self.has(a)){
list.push(a);
}
}else if(a&&a.length&&b!=="string"){
add(a);
}
});
})(arguments);
if(f){
firingLength=list.length;
}else if(memory){
firingStart=d;
fire(memory);
}
}
return this;
},
remove:function(){
if(list){
jQuery.each(arguments,function(_,a){
var b;
while((b=jQuery.inArray(a,list,b))>-1){
list.splice(b,1);
if(f){
if(b<=firingLength){
firingLength--;
}
if(b<=firingIndex){
firingIndex--;
}
}
}
});
}
return this;
},
has:function(a){
return a?jQuery.inArray(a,list)>-1:!!(list&&list.length);
},
empty:function(){
list=[];
firingLength=0;
return this;
},
disable:function(){
list=stack=memory=undefined;
return this;
},
disabled:function(){
return!list;
},
lock:function(){
stack=undefined;
if(!memory){
self.disable();
}
return this;
},
locked:function(){
return!stack;
},
fireWith:function(a,b){
if(list&&(!fired||stack)){
b=b||[];
b=[a,b.slice?b.slice():b];
if(f){
stack.push(b);
}else{
fire(b);
}
}
return this;
},
fire:function(){
self.fireWith(this,arguments);
return this;
},
fired:function(){
return!!fired;
}
};
return self;
};
jQuery.extend({
Deferred:function(f){
var g=[
["resolve","done",jQuery.Callbacks("once memory"),"resolved"],
["reject","fail",jQuery.Callbacks("once memory"),"rejected"],
["notify","progress",jQuery.Callbacks("memory")]
],
state="pending",
promise={
state:function(){
return state;
},
always:function(){
deferred.done(arguments).fail(arguments);
return this;
},
then:function(){
var e=arguments;
return jQuery.Deferred(function(d){
jQuery.each(g,function(i,b){
var c=jQuery.isFunction(e[i])&&e[i];
deferred[b[1]](function(){
var a=c&&c.apply(this,arguments);
if(a&&jQuery.isFunction(a.promise)){
a.promise()
.done(d.resolve)
.fail(d.reject)
.progress(d.notify);
}else{
d[b[0]+"With"](this===promise?d.promise():this,c?[a]:arguments);
}
});
});
e=null;
}).promise();
},
promise:function(a){
return a!=null?jQuery.extend(a,promise):promise;
}
},
deferred={};
promise.pipe=promise.then;
jQuery.each(g,function(i,a){
var b=a[2],
stateString=a[3];
promise[a[1]]=b.add;
if(stateString){
b.add(function(){
state=stateString;
},g[i^1][2].disable,g[2][2].lock);
}
deferred[a[0]]=function(){
deferred[a[0]+"With"](this===deferred?promise:this,arguments);
return this;
};
deferred[a[0]+"With"]=b.fireWith;
});
promise.promise(deferred);
if(f){
f.call(deferred,deferred);
}
return deferred;
},
when:function(d){
var i=0,
resolveValues=w.call(arguments),
length=resolveValues.length,
remaining=length!==1||(d&&jQuery.isFunction(d.promise))?length:0,
deferred=remaining===1?d:jQuery.Deferred(),
updateFunc=function(i,b,c){
return function(a){
b[i]=this;
c[i]=arguments.length>1?w.call(arguments):a;
if(c===progressValues){
deferred.notifyWith(b,c);
}else if(!(--remaining)){
deferred.resolveWith(b,c);
}
};
},
progressValues,progressContexts,resolveContexts;
if(length>1){
progressValues=new Array(length);
progressContexts=new Array(length);
resolveContexts=new Array(length);
for(;i<length;i++){
if(resolveValues[i]&&jQuery.isFunction(resolveValues[i].promise)){
resolveValues[i].promise()
.done(updateFunc(i,resolveContexts,resolveValues))
.fail(deferred.reject)
.progress(updateFunc(i,progressContexts,progressValues));
}else{
--remaining;
}
}
}
if(!remaining){
deferred.resolveWith(resolveContexts,resolveValues);
}
return deferred.promise();
}
});
var M;
jQuery.fn.ready=function(a){
jQuery.ready.promise().done(a);
return this;
};
jQuery.extend({
isReady:false,
readyWait:1,
holdReady:function(a){
if(a){
jQuery.readyWait++;
}else{
jQuery.ready(true);
}
},
ready:function(a){
if(a===true?--jQuery.readyWait:jQuery.isReady){
return;
}
if(!document.body){
return setTimeout(jQuery.ready);
}
jQuery.isReady=true;
if(a!==true&&--jQuery.readyWait>0){
return;
}
M.resolveWith(document,[jQuery]);
if(jQuery.fn.trigger){
jQuery(document).trigger("ready").off("ready");
}
}
});

function detach(){
if(document.addEventListener){
document.removeEventListener("DOMContentLoaded",completed,false);
o.removeEventListener("load",completed,false);
}else{
document.detachEvent("onreadystatechange",completed);
o.detachEvent("onload",completed);
}
}

function completed(){
if(document.addEventListener||event.type==="load"||document.readyState==="complete"){
detach();
jQuery.ready();
}
}
jQuery.ready.promise=function(a){
if(!M){
M=jQuery.Deferred();
if(document.readyState==="complete"){
setTimeout(jQuery.ready);
}else if(document.addEventListener){
document.addEventListener("DOMContentLoaded",completed,false);
o.addEventListener("load",completed,false);
}else{
document.attachEvent("onreadystatechange",completed);
o.attachEvent("onload",completed);
var b=false;
try{
b=o.frameElement==null&&document.documentElement;
}catch(e){}
if(b&&b.doScroll){
(function doScrollCheck(){
if(!jQuery.isReady){
try{
b.doScroll("left");
}catch(e){
return setTimeout(doScrollCheck,50);
}
detach();
jQuery.ready();
}
})();
}
}
}
return M.promise(a);
};
var N=typeof undefined;
var i;
for(i in jQuery(D)){
break;
}
D.ownLast=i!=="0";
D.inlineBlockNeedsLayout=false;
jQuery(function(){
var a,div,
body=document.getElementsByTagName("body")[0];
if(!body){
return;
}
a=document.createElement("div");
a.style.cssText="border:0;width:0;height:0;position:absolute;top:0;left:-9999px;margin-top:1px";
div=document.createElement("div");
body.appendChild(a).appendChild(div);
if(typeof div.style.zoom!==N){
div.style.cssText="border:0;margin:0;width:1px;padding:1px;display:inline;zoom:1";
if((D.inlineBlockNeedsLayout=(div.offsetWidth===3))){
body.style.zoom=1;
}
}
body.removeChild(a);
a=div=null;
});
(function(){
var a=document.createElement("div");
if(D.deleteExpando==null){
D.deleteExpando=true;
try{
delete a.test;
}catch(e){
D.deleteExpando=false;
}
}
a=null;
})();

jQuery.acceptData=function(a){
var b=jQuery.noData[(a.nodeName+" ").toLowerCase()],
nodeType=+a.nodeType||1;
return nodeType!==1&&nodeType!==9?
false:
!b||b!==true&&a.getAttribute("classid")===b;
};
var O=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,
rmultiDash=/([A-Z])/g;
function dataAttr(a,b,c){
if(c===undefined&&a.nodeType===1){
var d="data-"+b.replace(rmultiDash,"-$1").toLowerCase();
c=a.getAttribute(d);
if(typeof c==="string"){
try{
c=c==="true"?true:
c==="false"?false:
c==="null"?null:
+c+""===c?+c:
O.test(c)?jQuery.parseJSON(c):
c;
}catch(e){}
jQuery.data(a,b,c);
}else{
c=undefined;
}
}
return c;
}
function isEmptyDataObject(a){
var b;
for(b in a){
if(b==="data"&&jQuery.isEmptyObject(a[b])){
continue;
}
if(b!=="toJSON"){
return false;
}
}
return true;
}
function internalData(a,b,c,d){
if(!jQuery.acceptData(a)){
return;
}
var e,thisCache,
internalKey=jQuery.expando,
isNode=a.nodeType,
cache=isNode?jQuery.cache:a,
id=isNode?a[internalKey]:a[internalKey]&&internalKey;
if((!id||!cache[id]||(!d&&!cache[id].data))&&c===undefined&&typeof b==="string"){
return;
}
if(!id){
if(isNode){
id=a[internalKey]=u.pop()||jQuery.guid++;
}else{
id=internalKey;
}
}
if(!cache[id]){
cache[id]=isNode?{}:{toJSON:jQuery.noop};
}
if(typeof b==="object"||typeof b==="function"){
if(d){
cache[id]=jQuery.extend(cache[id],b);
}else{
cache[id].data=jQuery.extend(cache[id].data,b);
}
}
thisCache=cache[id];
if(!d){
if(!thisCache.data){
thisCache.data={};
}
thisCache=thisCache.data;
}
if(c!==undefined){
thisCache[jQuery.camelCase(b)]=c;
}
if(typeof b==="string"){
e=thisCache[b];
if(e==null){
e=thisCache[jQuery.camelCase(b)];
}
}else{
e=thisCache;
}
return e;
}
function internalRemoveData(a,b,c){
if(!jQuery.acceptData(a)){
return;
}
var d,i,
isNode=a.nodeType,
cache=isNode?jQuery.cache:a,
id=isNode?a[jQuery.expando]:jQuery.expando;
if(!cache[id]){
return;
}
if(b){
d=c?cache[id]:cache[id].data;
if(d){
if(!jQuery.isArray(b)){
if(b in d){
b=[b];
}else{
b=jQuery.camelCase(b);
if(b in d){
b=[b];
}else{
b=b.split(" ");
}
}
}else{
b=b.concat(jQuery.map(b,jQuery.camelCase));
}
i=b.length;
while(i--){
delete d[b[i]];
}
if(c?!isEmptyDataObject(d):!jQuery.isEmptyObject(d)){
return;
}
}
}
if(!c){
delete cache[id].data;
if(!isEmptyDataObject(cache[id])){
return;
}
}
if(isNode){
jQuery.cleanData([a],true);

}else if(D.deleteExpando||cache!=cache.window){

delete cache[id];
}else{
cache[id]=null;
}
}
jQuery.extend({
cache:{},
noData:{
"applet ":true,
"embed ":true,
"object ":"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"
},
hasData:function(a){
a=a.nodeType?jQuery.cache[a[jQuery.expando]]:a[jQuery.expando];
return!!a&&!isEmptyDataObject(a);
},
data:function(a,b,c){
return internalData(a,b,c);
},
removeData:function(a,b){
return internalRemoveData(a,b);
},
_data:function(a,b,c){
return internalData(a,b,c,true);
},
_removeData:function(a,b){
return internalRemoveData(a,b,true);
}
});
jQuery.fn.extend({
data:function(a,b){
var i,name,data,
elem=this[0],
attrs=elem&&elem.attributes;
if(a===undefined){
if(this.length){
data=jQuery.data(elem);
if(elem.nodeType===1&&!jQuery._data(elem,"parsedAttrs")){
i=attrs.length;
while(i--){
name=attrs[i].name;
if(name.indexOf("data-")===0){
name=jQuery.camelCase(name.slice(5));
dataAttr(elem,name,data[name]);
}
}
jQuery._data(elem,"parsedAttrs",true);
}
}
return data;
}
if(typeof a==="object"){
return this.each(function(){
jQuery.data(this,a);
});
}
return arguments.length>1?
this.each(function(){
jQuery.data(this,a,b);
}):
elem?dataAttr(elem,a,jQuery.data(elem,a)):undefined;
},
removeData:function(a){
return this.each(function(){
jQuery.removeData(this,a);
});
}
});
jQuery.extend({
queue:function(a,b,c){
var d;
if(a){
b=(b||"fx")+"queue";
d=jQuery._data(a,b);
if(c){
if(!d||jQuery.isArray(c)){
d=jQuery._data(a,b,jQuery.makeArray(c));
}else{
d.push(c);
}
}
return d||[];
}
},
dequeue:function(a,b){
b=b||"fx";
var c=jQuery.queue(a,b),
startLength=c.length,
fn=c.shift(),
hooks=jQuery._queueHooks(a,b),
next=function(){
jQuery.dequeue(a,b);
};
if(fn==="inprogress"){
fn=c.shift();
startLength--;
}
if(fn){
if(b==="fx"){
c.unshift("inprogress");
}
delete hooks.stop;
fn.call(a,next,hooks);
}
if(!startLength&&hooks){
hooks.empty.fire();
}
},
_queueHooks:function(a,b){
var c=b+"queueHooks";
return jQuery._data(a,c)||jQuery._data(a,c,{
empty:jQuery.Callbacks("once memory").add(function(){
jQuery._removeData(a,b+"queue");
jQuery._removeData(a,c);
})
});
}
});
jQuery.fn.extend({
queue:function(b,c){
var d=2;
if(typeof b!=="string"){
c=b;
b="fx";
d--;
}
if(arguments.length<d){
return jQuery.queue(this[0],b);
}
return c===undefined?
this:
this.each(function(){
var a=jQuery.queue(this,b,c);
jQuery._queueHooks(this,b);
if(b==="fx"&&a[0]!=="inprogress"){
jQuery.dequeue(this,b);
}
});
},
dequeue:function(a){
return this.each(function(){
jQuery.dequeue(this,a);
});
},
clearQueue:function(a){
return this.queue(a||"fx",[]);
},
promise:function(a,b){
var c,
count=1,
defer=jQuery.Deferred(),
elements=this,
i=this.length,
resolve=function(){
if(!(--count)){
defer.resolveWith(elements,[elements]);
}
};
if(typeof a!=="string"){
b=a;
a=undefined;
}
a=a||"fx";
while(i--){
c=jQuery._data(elements[i],a+"queueHooks");
if(c&&c.empty){
count++;
c.empty.add(resolve);
}
}
resolve();
return defer.promise(b);
}
});
var P=(/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/).source;
var Q=["Top","Right","Bottom","Left"];
var R=function(a,b){
a=b||a;
return jQuery.css(a,"display")==="none"||!jQuery.contains(a.ownerDocument,a);
};
var S=jQuery.access=function(d,e,f,g,h,j,k){
var i=0,
length=d.length,
bulk=f==null;
if(jQuery.type(f)==="object"){
h=true;
for(i in f){
jQuery.access(d,e,i,f[i],true,j,k);
}
}else if(g!==undefined){
h=true;
if(!jQuery.isFunction(g)){
k=true;
}
if(bulk){
if(k){
e.call(d,g);
e=null;
}else{
bulk=e;
e=function(a,b,c){
return bulk.call(jQuery(a),c);
};
}
}
if(e){
for(;i<length;i++){
e(d[i],f,k?g:g.call(d[i],i,e(d[i],f)));
}
}
}
return h?
d:
bulk?
e.call(d):
length?e(d[0],f):j;
};
var T=(/^(?:checkbox|radio)$/i);
(function(){
var a=document.createDocumentFragment(),
div=document.createElement("div"),
input=document.createElement("input");
div.setAttribute("className","t");
div.innerHTML="  <link/><table></table><a href='/a'>a</a>";
D.leadingWhitespace=div.firstChild.nodeType===3;
D.tbody=!div.getElementsByTagName("tbody").length;
D.htmlSerialize=!!div.getElementsByTagName("link").length;
D.html5Clone=
document.createElement("nav").cloneNode(true).outerHTML!=="<:nav></:nav>";
input.type="checkbox";
input.checked=true;
a.appendChild(input);
D.appendChecked=input.checked;
div.innerHTML="<textarea>x</textarea>";
D.noCloneChecked=!!div.cloneNode(true).lastChild.defaultValue;
a.appendChild(div);
div.innerHTML="<input type='radio' checked='checked' name='t'/>";
D.checkClone=div.cloneNode(true).cloneNode(true).lastChild.checked;
D.noCloneEvent=true;
if(div.attachEvent){
div.attachEvent("onclick",function(){
D.noCloneEvent=false;
});
div.cloneNode(true).click();
}
if(D.deleteExpando==null){
D.deleteExpando=true;
try{
delete div.test;
}catch(e){
D.deleteExpando=false;
}
}
a=div=input=null;
})();
(function(){
var i,eventName,
div=document.createElement("div");
for(i in{submit:true,change:true,focusin:true}){
eventName="on"+i;
if(!(D[i+"Bubbles"]=eventName in o)){
div.setAttribute(eventName,"t");
D[i+"Bubbles"]=div.attributes[eventName].expando===false;
}
}
div=null;
})();
var U=/^(?:input|select|textarea)$/i,
rkeyEvent=/^key/,
rmouseEvent=/^(?:mouse|contextmenu)|click/,
rfocusMorph=/^(?:focusinfocus|focusoutblur)$/,
rtypenamespace=/^([^.]*)(?:\.(.+)|)$/;
function returnTrue(){
return true;
}
function returnFalse(){
return false;
}
function safeActiveElement(){
try{
return document.activeElement;
}catch(err){}
}

jQuery.event={
global:{},
add:function(a,b,c,d,f){
var g,events,t,handleObjIn,
special,eventHandle,handleObj,
handlers,type,namespaces,origType,
elemData=jQuery._data(a);
if(!elemData){
return;
}
if(c.handler){
handleObjIn=c;
c=handleObjIn.handler;
f=handleObjIn.selector;
}
if(!c.guid){
c.guid=jQuery.guid++;
}
if(!(events=elemData.events)){
events=elemData.events={};
}
if(!(eventHandle=elemData.handle)){
eventHandle=elemData.handle=function(e){
return typeof jQuery!==N&&(!e||jQuery.event.triggered!==e.type)?
jQuery.event.dispatch.apply(eventHandle.elem,arguments):
undefined;
};
eventHandle.elem=a;
}
b=(b||"").match(K)||[""];
t=b.length;
while(t--){
g=rtypenamespace.exec(b[t])||[];
type=origType=g[1];
namespaces=(g[2]||"").split(".").sort();
if(!type){
continue;
}
special=jQuery.event.special[type]||{};
type=(f?special.delegateType:special.bindType)||type;
special=jQuery.event.special[type]||{};
handleObj=jQuery.extend({
type:type,
origType:origType,
d:d,
c:c,
guid:c.guid,
f:f,
needsContext:f&&jQuery.expr.match.needsContext.test(f),
namespace:namespaces.join(".")
},handleObjIn);
if(!(handlers=events[type])){
handlers=events[type]=[];
handlers.delegateCount=0;
if(!special.setup||special.setup.call(a,d,namespaces,eventHandle)===false){
if(a.addEventListener){
a.addEventListener(type,eventHandle,false);
}else if(a.attachEvent){
a.attachEvent("on"+type,eventHandle);
}
}
}
if(special.add){
special.add.call(a,handleObj);
if(!handleObj.handler.guid){
handleObj.handler.guid=c.guid;
}
}
if(f){
handlers.splice(handlers.delegateCount++,0,handleObj);
}else{
handlers.push(handleObj);
}
jQuery.event.global[type]=true;
}
a=null;
},
remove:function(a,b,c,d,e){
var j,handleObj,tmp,
origCount,t,events,
special,handlers,type,
namespaces,origType,
elemData=jQuery.hasData(a)&&jQuery._data(a);
if(!elemData||!(events=elemData.events)){
return;
}
b=(b||"").match(K)||[""];
t=b.length;
while(t--){
tmp=rtypenamespace.exec(b[t])||[];
type=origType=tmp[1];
namespaces=(tmp[2]||"").split(".").sort();
if(!type){
for(type in events){
jQuery.event.remove(a,type+b[t],c,d,true);
}
continue;
}
special=jQuery.event.special[type]||{};
type=(d?special.delegateType:special.bindType)||type;
handlers=events[type]||[];
tmp=tmp[2]&&new RegExp("(^|\\.)"+namespaces.join("\\.(?:.*\\.|)")+"(\\.|$)");
origCount=j=handlers.length;
while(j--){
handleObj=handlers[j];
if((e||origType===handleObj.origType)&&
(!c||c.guid===handleObj.guid)&&
(!tmp||tmp.test(handleObj.namespace))&&
(!d||d===handleObj.selector||d==="**"&&handleObj.selector)){
handlers.splice(j,1);
if(handleObj.selector){
handlers.delegateCount--;
}
if(special.remove){
special.remove.call(a,handleObj);
}
}
}
if(origCount&&!handlers.length){
if(!special.teardown||special.teardown.call(a,namespaces,elemData.handle)===false){
jQuery.removeEvent(a,type,elemData.handle);
}
delete events[type];
}
}
if(jQuery.isEmptyObject(events)){
delete elemData.handle;
jQuery._removeData(a,"events");
}
},
trigger:function(a,b,c,d){
var f,ontype,cur,
bubbleType,special,tmp,i,
eventPath=[c||document],
type=B.call(a,"type")?a.type:a,
namespaces=B.call(a,"namespace")?a.namespace.split("."):[];
cur=tmp=c=c||document;
if(c.nodeType===3||c.nodeType===8){
return;
}
if(rfocusMorph.test(type+jQuery.event.triggered)){
return;
}
if(type.indexOf(".")>=0){
namespaces=type.split(".");
type=namespaces.shift();
namespaces.sort();
}
ontype=type.indexOf(":")<0&&"on"+type;
a=a[jQuery.expando]?
a:
new jQuery.Event(type,typeof a==="object"&&a);
a.isTrigger=d?2:3;
a.namespace=namespaces.join(".");
a.namespace_re=a.namespace?
new RegExp("(^|\\.)"+namespaces.join("\\.(?:.*\\.|)")+"(\\.|$)"):
null;
a.result=undefined;
if(!a.target){
a.target=c;
}
b=b==null?
[a]:
jQuery.makeArray(b,[a]);
special=jQuery.event.special[type]||{};
if(!d&&special.trigger&&special.trigger.apply(c,b)===false){
return;
}
if(!d&&!special.noBubble&&!jQuery.isWindow(c)){
bubbleType=special.delegateType||type;
if(!rfocusMorph.test(bubbleType+type)){
cur=cur.parentNode;
}
for(;cur;cur=cur.parentNode){
eventPath.push(cur);
tmp=cur;
}
if(tmp===(c.ownerDocument||document)){
eventPath.push(tmp.defaultView||tmp.parentWindow||o);
}
}
i=0;
while((cur=eventPath[i++])&&!a.isPropagationStopped()){
a.type=i>1?
bubbleType:
special.bindType||type;
f=(jQuery._data(cur,"events")||{})[a.type]&&jQuery._data(cur,"handle");
if(f){
f.apply(cur,b);
}
f=ontype&&cur[ontype];
if(f&&f.apply&&jQuery.acceptData(cur)){
a.result=f.apply(cur,b);
if(a.result===false){
a.preventDefault();
}
}
}
a.type=type;
if(!d&&!a.isDefaultPrevented()){
if((!special._default||special._default.apply(eventPath.pop(),b)===false)&&
jQuery.acceptData(c)){
if(ontype&&c[type]&&!jQuery.isWindow(c)){
tmp=c[ontype];
if(tmp){
c[ontype]=null;
}
jQuery.event.triggered=type;
try{
c[type]();
}catch(e){
}
jQuery.event.triggered=undefined;
if(tmp){
c[ontype]=tmp;
}
}
}
}
return a.result;
},
dispatch:function(a){
a=jQuery.event.fix(a);
var i,ret,handleObj,matched,j,
handlerQueue=[],
args=w.call(arguments),
handlers=(jQuery._data(this,"events")||{})[a.type]||[],
special=jQuery.event.special[a.type]||{};
args[0]=a;
a.delegateTarget=this;
if(special.preDispatch&&special.preDispatch.call(this,a)===false){
return;
}
handlerQueue=jQuery.event.handlers.call(this,a,handlers);
i=0;
while((matched=handlerQueue[i++])&&!a.isPropagationStopped()){
a.currentTarget=matched.elem;
j=0;
while((handleObj=matched.handlers[j++])&&!a.isImmediatePropagationStopped()){
if(!a.namespace_re||a.namespace_re.test(handleObj.namespace)){
a.handleObj=handleObj;
a.data=handleObj.data;
ret=((jQuery.event.special[handleObj.origType]||{}).handle||handleObj.handler)
.apply(matched.elem,args);
if(ret!==undefined){
if((a.result=ret)===false){
a.preventDefault();
a.stopPropagation();
}
}
}
}
}
if(special.postDispatch){
special.postDispatch.call(this,a);
}
return a.result;
},
handlers:function(a,b){
var c,handleObj,matches,i,
handlerQueue=[],
delegateCount=b.delegateCount,
cur=a.target;
if(delegateCount&&cur.nodeType&&(!a.button||a.type!=="click")){

for(;cur!=this;cur=cur.parentNode||this){

if(cur.nodeType===1&&(cur.disabled!==true||a.type!=="click")){
matches=[];
for(i=0;i<delegateCount;i++){
handleObj=b[i];
c=handleObj.selector+" ";
if(matches[c]===undefined){
matches[c]=handleObj.needsContext?
jQuery(c,this).index(cur)>=0:
jQuery.find(c,this,null,[cur]).length;
}
if(matches[c]){
matches.push(handleObj);
}
}
if(matches.length){
handlerQueue.push({elem:cur,handlers:matches});
}
}
}
}
if(delegateCount<b.length){
handlerQueue.push({elem:this,handlers:b.slice(delegateCount)});
}
return handlerQueue;
},
fix:function(a){
if(a[jQuery.expando]){
return a;
}
var i,prop,copy,
type=a.type,
originalEvent=a,
fixHook=this.fixHooks[type];
if(!fixHook){
this.fixHooks[type]=fixHook=
rmouseEvent.test(type)?this.mouseHooks:
rkeyEvent.test(type)?this.keyHooks:
{};
}
copy=fixHook.props?this.props.concat(fixHook.props):this.props;
a=new jQuery.Event(originalEvent);
i=copy.length;
while(i--){
prop=copy[i];
a[prop]=originalEvent[prop];
}
if(!a.target){
a.target=originalEvent.srcElement||document;
}
if(a.target.nodeType===3){
a.target=a.target.parentNode;
}
a.metaKey=!!a.metaKey;
return fixHook.filter?fixHook.filter(a,originalEvent):a;
},
props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),
fixHooks:{},
keyHooks:{
props:"char charCode key keyCode".split(" "),
filter:function(a,b){
if(a.which==null){
a.which=b.charCode!=null?b.charCode:b.keyCode;
}
return a;
}
},
mouseHooks:{
props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),
filter:function(a,b){
var c,eventDoc,doc,
button=b.button,
fromElement=b.fromElement;
if(a.pageX==null&&b.clientX!=null){
eventDoc=a.target.ownerDocument||document;
doc=eventDoc.documentElement;
c=eventDoc.body;
a.pageX=b.clientX+(doc&&doc.scrollLeft||c&&c.scrollLeft||0)-(doc&&doc.clientLeft||c&&c.clientLeft||0);
a.pageY=b.clientY+(doc&&doc.scrollTop||c&&c.scrollTop||0)-(doc&&doc.clientTop||c&&c.clientTop||0);
}
if(!a.relatedTarget&&fromElement){
a.relatedTarget=fromElement===a.target?b.toElement:fromElement;
}
if(!a.which&&button!==undefined){
a.which=(button&1?1:(button&2?3:(button&4?2:0)));
}
return a;
}
},
special:{
load:{
noBubble:true
},
focus:{
trigger:function(){
if(this!==safeActiveElement()&&this.focus){
try{
this.focus();
return false;
}catch(e){
}
}
},
delegateType:"focusin"
},
blur:{
trigger:function(){
if(this===safeActiveElement()&&this.blur){
this.blur();
return false;
}
},
delegateType:"focusout"
},
click:{
trigger:function(){
if(jQuery.nodeName(this,"input")&&this.type==="checkbox"&&this.click){
this.click();
return false;
}
},
_default:function(a){
return jQuery.nodeName(a.target,"a");
}
},
beforeunload:{
postDispatch:function(a){
if(a.result!==undefined){
a.originalEvent.returnValue=a.result;
}
}
}
},
simulate:function(a,b,c,d){
var e=jQuery.extend(
new jQuery.Event(),
c,
{
a:a,
isSimulated:true,
originalEvent:{}
}
);
if(d){
jQuery.event.trigger(e,null,b);
}else{
jQuery.event.dispatch.call(b,e);
}
if(e.isDefaultPrevented()){
c.preventDefault();
}
}
};
jQuery.removeEvent=document.removeEventListener?
function(a,b,c){
if(a.removeEventListener){
a.removeEventListener(b,c,false);
}
}:
function(a,b,c){
var d="on"+b;
if(a.detachEvent){
if(typeof a[d]===N){
a[d]=null;
}
a.detachEvent(d,c);
}
};
jQuery.Event=function(a,b){
if(!(this instanceof jQuery.Event)){
return new jQuery.Event(a,b);
}
if(a&&a.type){
this.originalEvent=a;
this.type=a.type;
this.isDefaultPrevented=a.defaultPrevented||
a.defaultPrevented===undefined&&(
a.returnValue===false||
a.getPreventDefault&&a.getPreventDefault())?
returnTrue:
returnFalse;
}else{
this.type=a;
}
if(b){
jQuery.extend(this,b);
}
this.timeStamp=a&&a.timeStamp||jQuery.now();
this[jQuery.expando]=true;
};
jQuery.Event.prototype={
isDefaultPrevented:returnFalse,
isPropagationStopped:returnFalse,
isImmediatePropagationStopped:returnFalse,
preventDefault:function(){
var e=this.originalEvent;
this.isDefaultPrevented=returnTrue;
if(!e){
return;
}
if(e.preventDefault){
e.preventDefault();
}else{
e.returnValue=false;
}
},
stopPropagation:function(){
var e=this.originalEvent;
this.isPropagationStopped=returnTrue;
if(!e){
return;
}
if(e.stopPropagation){
e.stopPropagation();
}
e.cancelBubble=true;
},
stopImmediatePropagation:function(){
this.isImmediatePropagationStopped=returnTrue;
this.stopPropagation();
}
};
jQuery.each({
mouseenter:"mouseover",
mouseleave:"mouseout"
},function(c,d){
jQuery.event.special[c]={
delegateType:d,
bindType:d,
handle:function(a){
var b,
target=this,
related=a.relatedTarget,
handleObj=a.handleObj;
if(!related||(related!==target&&!jQuery.contains(target,related))){
a.type=handleObj.origType;
b=handleObj.handler.apply(this,arguments);
a.type=d;
}
return b;
}
};
});
if(!D.submitBubbles){
jQuery.event.special.submit={
setup:function(){
if(jQuery.nodeName(this,"form")){
return false;
}
jQuery.event.add(this,"click._submit keypress._submit",function(e){
var b=e.target,
form=jQuery.nodeName(b,"input")||jQuery.nodeName(b,"button")?b.form:undefined;
if(form&&!jQuery._data(form,"submitBubbles")){
jQuery.event.add(form,"submit._submit",function(a){
a._submit_bubble=true;
});
jQuery._data(form,"submitBubbles",true);
}
});
},
postDispatch:function(a){
if(a._submit_bubble){
delete a._submit_bubble;
if(this.parentNode&&!a.isTrigger){
jQuery.event.simulate("submit",this.parentNode,a,true);
}
}
},
teardown:function(){
if(jQuery.nodeName(this,"form")){
return false;
}
jQuery.event.remove(this,"._submit");
}
};
}
if(!D.changeBubbles){
jQuery.event.special.change={
setup:function(){
if(U.test(this.nodeName)){
if(this.type==="checkbox"||this.type==="radio"){
jQuery.event.add(this,"propertychange._change",function(a){
if(a.originalEvent.propertyName==="checked"){
this._just_changed=true;
}
});
jQuery.event.add(this,"click._change",function(a){
if(this._just_changed&&!a.isTrigger){
this._just_changed=false;
}
jQuery.event.simulate("change",this,a,true);
});
}
return false;
}
jQuery.event.add(this,"beforeactivate._change",function(e){
var b=e.target;
if(U.test(b.nodeName)&&!jQuery._data(b,"changeBubbles")){
jQuery.event.add(b,"change._change",function(a){
if(this.parentNode&&!a.isSimulated&&!a.isTrigger){
jQuery.event.simulate("change",this.parentNode,a,true);
}
});
jQuery._data(b,"changeBubbles",true);
}
});
},
handle:function(a){
var b=a.target;
if(this!==b||a.isSimulated||a.isTrigger||(b.type!=="radio"&&b.type!=="checkbox")){
return a.handleObj.handler.apply(this,arguments);
}
},
teardown:function(){
jQuery.event.remove(this,"._change");
return!U.test(this.nodeName);
}
};
}
if(!D.focusinBubbles){
jQuery.each({focus:"focusin",blur:"focusout"},function(b,c){
var d=function(a){
jQuery.event.simulate(c,a.target,jQuery.event.fix(a),true);
};
jQuery.event.special[c]={
setup:function(){
var a=this.ownerDocument||this,
attaches=jQuery._data(a,c);
if(!attaches){
a.addEventListener(b,d,true);
}
jQuery._data(a,c,(attaches||0)+1);
},
teardown:function(){
var a=this.ownerDocument||this,
attaches=jQuery._data(a,c)-1;
if(!attaches){
a.removeEventListener(b,d,true);
jQuery._removeData(a,c);
}else{
jQuery._data(a,c,attaches);
}
}
};
});
}
jQuery.fn.extend({
on:function(b,c,d,e,f){
var g,origFn;
if(typeof b==="object"){
if(typeof c!=="string"){
d=d||c;
c=undefined;
}
for(g in b){
this.on(g,c,d,b[g],f);
}
return this;
}
if(d==null&&e==null){
e=c;
d=c=undefined;
}else if(e==null){
if(typeof c==="string"){
e=d;
d=undefined;
}else{
e=d;
d=c;
c=undefined;
}
}
if(e===false){
e=returnFalse;
}else if(!e){
return this;
}
if(f===1){
origFn=e;
e=function(a){
jQuery().off(a);
return origFn.apply(this,arguments);
};
e.guid=origFn.guid||(origFn.guid=jQuery.guid++);
}
return this.each(function(){
jQuery.event.add(this,b,e,d,c);
});
},
one:function(a,b,c,d){
return this.on(a,b,c,d,1);
},
off:function(a,b,c){
var d,type;
if(a&&a.preventDefault&&a.handleObj){
d=a.handleObj;
jQuery(a.delegateTarget).off(
d.namespace?d.origType+"."+d.namespace:d.origType,
d.selector,
d.handler
);
return this;
}
if(typeof a==="object"){
for(type in a){
this.off(type,b,a[type]);
}
return this;
}
if(b===false||typeof b==="function"){
c=b;
b=undefined;
}
if(c===false){
c=returnFalse;
}
return this.each(function(){
jQuery.event.remove(this,a,c,b);
});
},
trigger:function(a,b){
return this.each(function(){
jQuery.event.trigger(a,b,this);
});
},
triggerHandler:function(a,b){
var c=this[0];
if(c){
return jQuery.event.trigger(a,b,c,true);
}
}
});
function createSafeFragment(a){
var b=V.split("|"),
safeFrag=a.createDocumentFragment();
if(safeFrag.createElement){
while(b.length){
safeFrag.createElement(
b.pop()
);
}
}
return safeFrag;
}
var V="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|"+
"header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",
rinlinejQuery=/ jQuery\d+="(?:null|\d+)"/g,
rnoshimcache=new RegExp("<(?:"+V+")[\\s/>]","i"),
rleadingWhitespace=/^\s+/,
rxhtmlTag=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,
rtagName=/<([\w:]+)/,
rtbody=/<tbody/i,
rhtml=/<|&#?\w+;/,
rnoInnerhtml=/<(?:script|style|link)/i,
rchecked=/checked\s*(?:[^=]|=\s*.checked.)/i,
rscriptType=/^$|\/(?:java|ecma)script/i,
rscriptTypeMasked=/^true\/(.*)/,
rcleanScript=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,
wrapMap={
option:[1,"<select multiple='multiple'>","</select>"],
legend:[1,"<fieldset>","</fieldset>"],
area:[1,"<map>","</map>"],
param:[1,"<object>","</object>"],
thead:[1,"<table>","</table>"],
tr:[2,"<table><tbody>","</tbody></table>"],
col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],
td:[3,"<table><tbody><tr>","</tr></tbody></table>"],
_default:D.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]
},
safeFragment=createSafeFragment(document),
fragmentDiv=safeFragment.appendChild(document.createElement("div"));
wrapMap.optgroup=wrapMap.option;
wrapMap.tbody=wrapMap.tfoot=wrapMap.colgroup=wrapMap.caption=wrapMap.thead;
wrapMap.th=wrapMap.td;
function getAll(a,b){
var c,elem,
i=0,
found=typeof a.getElementsByTagName!==N?a.getElementsByTagName(b||"*"):
typeof a.querySelectorAll!==N?a.querySelectorAll(b||"*"):
undefined;
if(!found){
for(found=[],c=a.childNodes||a;(elem=c[i])!=null;i++){
if(!b||jQuery.nodeName(elem,b)){
found.push(elem);
}else{
jQuery.merge(found,getAll(elem,b));
}
}
}
return b===undefined||b&&jQuery.nodeName(a,b)?
jQuery.merge([a],found):
found;
}
function fixDefaultChecked(a){
if(T.test(a.type)){
a.defaultChecked=a.checked;
}
}
function manipulationTarget(a,b){
return jQuery.nodeName(a,"table")&&
jQuery.nodeName(b.nodeType!==11?b:b.firstChild,"tr")?
a.getElementsByTagName("tbody")[0]||
a.appendChild(a.ownerDocument.createElement("tbody")):
a;
}
function disableScript(a){
a.type=(jQuery.find.attr(a,"type")!==null)+"/"+a.type;
return a;
}
function restoreScript(a){
var b=rscriptTypeMasked.exec(a.type);
if(b){
a.type=b[1];
}else{
a.removeAttribute("type");
}
return a;
}
function setGlobalEval(a,b){
var c,
i=0;
for(;(c=a[i])!=null;i++){
jQuery._data(c,"globalEval",!b||jQuery._data(b[i],"globalEval"));
}
}
function cloneCopyEvent(a,b){
if(b.nodeType!==1||!jQuery.hasData(a)){
return;
}
var c,i,l,
oldData=jQuery._data(a),
curData=jQuery._data(b,oldData),
events=oldData.events;
if(events){
delete curData.handle;
curData.events={};
for(c in events){
for(i=0,l=events[c].length;i<l;i++){
jQuery.event.add(b,c,events[c][i]);
}
}
}
if(curData.data){
curData.data=jQuery.extend({},curData.data);
}
}
function fixCloneNodeIssues(a,b){
var c,e,data;
if(b.nodeType!==1){
return;
}
c=b.nodeName.toLowerCase();
if(!D.noCloneEvent&&b[jQuery.expando]){
data=jQuery._data(b);
for(e in data.events){
jQuery.removeEvent(b,e,data.handle);
}
b.removeAttribute(jQuery.expando);
}
if(c==="script"&&b.text!==a.text){
disableScript(b).text=a.text;
restoreScript(b);
}else if(c==="object"){
if(b.parentNode){
b.outerHTML=a.outerHTML;
}
if(D.html5Clone&&(a.innerHTML&&!jQuery.trim(b.innerHTML))){
b.innerHTML=a.innerHTML;
}
}else if(c==="input"&&T.test(a.type)){
b.defaultChecked=b.checked=a.checked;
if(b.value!==a.value){
b.value=a.value;
}
}else if(c==="option"){
b.defaultSelected=b.selected=a.defaultSelected;
}else if(c==="input"||c==="textarea"){
b.defaultValue=a.defaultValue;
}
}
jQuery.extend({
clone:function(a,b,c){
var d,node,clone,i,srcElements,
inPage=jQuery.contains(a.ownerDocument,a);
if(D.html5Clone||jQuery.isXMLDoc(a)||!rnoshimcache.test("<"+a.nodeName+">")){
clone=a.cloneNode(true);
}else{
fragmentDiv.innerHTML=a.outerHTML;
fragmentDiv.removeChild(clone=fragmentDiv.firstChild);
}
if((!D.noCloneEvent||!D.noCloneChecked)&&
(a.nodeType===1||a.nodeType===11)&&!jQuery.isXMLDoc(a)){
d=getAll(clone);
srcElements=getAll(a);
for(i=0;(node=srcElements[i])!=null;++i){
if(d[i]){
fixCloneNodeIssues(node,d[i]);
}
}
}
if(b){
if(c){
srcElements=srcElements||getAll(a);
d=d||getAll(clone);
for(i=0;(node=srcElements[i])!=null;i++){
cloneCopyEvent(node,d[i]);
}
}else{
cloneCopyEvent(a,clone);
}
}
d=getAll(clone,"script");
if(d.length>0){
setGlobalEval(d,!inPage&&getAll(a,"script"));
}
d=srcElements=node=null;
return clone;
},
buildFragment:function(a,b,c,d){
var j,elem,contains,
tmp,tag,tbody,wrap,
l=a.length,
safe=createSafeFragment(b),
nodes=[],
i=0;
for(;i<l;i++){
elem=a[i];
if(elem||elem===0){
if(jQuery.type(elem)==="object"){
jQuery.merge(nodes,elem.nodeType?[elem]:elem);
}else if(!rhtml.test(elem)){
nodes.push(b.createTextNode(elem));
}else{
tmp=tmp||safe.appendChild(b.createElement("div"));
tag=(rtagName.exec(elem)||["",""])[1].toLowerCase();
wrap=wrapMap[tag]||wrapMap._default;
tmp.innerHTML=wrap[1]+elem.replace(rxhtmlTag,"<$1></$2>")+wrap[2];
j=wrap[0];
while(j--){
tmp=tmp.lastChild;
}
if(!D.leadingWhitespace&&rleadingWhitespace.test(elem)){
nodes.push(b.createTextNode(rleadingWhitespace.exec(elem)[0]));
}
if(!D.tbody){
elem=tag==="table"&&!rtbody.test(elem)?
tmp.firstChild:
wrap[1]==="<table>"&&!rtbody.test(elem)?
tmp:
0;
j=elem&&elem.childNodes.length;
while(j--){
if(jQuery.nodeName((tbody=elem.childNodes[j]),"tbody")&&!tbody.childNodes.length){
elem.removeChild(tbody);
}
}
}
jQuery.merge(nodes,tmp.childNodes);
tmp.textContent="";
while(tmp.firstChild){
tmp.removeChild(tmp.firstChild);
}
tmp=safe.lastChild;
}
}
}
if(tmp){
safe.removeChild(tmp);
}
if(!D.appendChecked){
jQuery.grep(getAll(nodes,"input"),fixDefaultChecked);
}
i=0;
while((elem=nodes[i++])){
if(d&&jQuery.inArray(elem,d)!==-1){
continue;
}
contains=jQuery.contains(elem.ownerDocument,elem);
tmp=getAll(safe.appendChild(elem),"script");
if(contains){
setGlobalEval(tmp);
}
if(c){
j=0;
while((elem=tmp[j++])){
if(rscriptType.test(elem.type||"")){
c.push(elem);
}
}
}
}
tmp=null;
return safe;
},
cleanData:function(a,b){
var c,type,id,data,
i=0,
internalKey=jQuery.expando,
cache=jQuery.cache,
deleteExpando=D.deleteExpando,
special=jQuery.event.special;
for(;(c=a[i])!=null;i++){
if(b||jQuery.acceptData(c)){
id=c[internalKey];
data=id&&cache[id];
if(data){
if(data.events){
for(type in data.events){
if(special[type]){
jQuery.event.remove(c,type);
}else{
jQuery.removeEvent(c,type,data.handle);
}
}
}
if(cache[id]){
delete cache[id];
if(deleteExpando){
delete c[internalKey];
}else if(typeof c.removeAttribute!==N){
c.removeAttribute(internalKey);
}else{
c[internalKey]=null;
}
u.push(id);
}
}
}
}
}
});
jQuery.fn.extend({
text:function(b){
return S(this,function(a){
return a===undefined?
jQuery.text(this):
this.empty().append((this[0]&&this[0].ownerDocument||document).createTextNode(a));
},null,b,arguments.length);
},
append:function(){
return this.domManip(arguments,function(a){
if(this.nodeType===1||this.nodeType===11||this.nodeType===9){
var b=manipulationTarget(this,a);
b.appendChild(a);
}
});
},
prepend:function(){
return this.domManip(arguments,function(a){
if(this.nodeType===1||this.nodeType===11||this.nodeType===9){
var b=manipulationTarget(this,a);
b.insertBefore(a,b.firstChild);
}
});
},
before:function(){
return this.domManip(arguments,function(a){
if(this.parentNode){
this.parentNode.insertBefore(a,this);
}
});
},
after:function(){
return this.domManip(arguments,function(a){
if(this.parentNode){
this.parentNode.insertBefore(a,this.nextSibling);
}
});
},
remove:function(a,b){
var c,
elems=a?jQuery.filter(a,this):this,
i=0;
for(;(c=elems[i])!=null;i++){
if(!b&&c.nodeType===1){
jQuery.cleanData(getAll(c));
}
if(c.parentNode){
if(b&&jQuery.contains(c.ownerDocument,c)){
setGlobalEval(getAll(c,"script"));
}
c.parentNode.removeChild(c);
}
}
return this;
},
empty:function(){
var a,
i=0;
for(;(a=this[i])!=null;i++){
if(a.nodeType===1){
jQuery.cleanData(getAll(a,false));
}
while(a.firstChild){
a.removeChild(a.firstChild);
}
if(a.options&&jQuery.nodeName(a,"select")){
a.options.length=0;
}
}
return this;
},
clone:function(a,b){
a=a==null?false:a;
b=b==null?a:b;
return this.map(function(){
return jQuery.clone(this,a,b);
});
},
html:function(c){
return S(this,function(a){
var b=this[0]||{},
i=0,
l=this.length;
if(a===undefined){
return b.nodeType===1?
b.innerHTML.replace(rinlinejQuery,""):
undefined;
}
if(typeof a==="string"&&!rnoInnerhtml.test(a)&&
(D.htmlSerialize||!rnoshimcache.test(a))&&
(D.leadingWhitespace||!rleadingWhitespace.test(a))&&
!wrapMap[(rtagName.exec(a)||["",""])[1].toLowerCase()]){
a=a.replace(rxhtmlTag,"<$1></$2>");
try{
for(;i<l;i++){
b=this[i]||{};
if(b.nodeType===1){
jQuery.cleanData(getAll(b,false));
b.innerHTML=a;
}
}
b=0;
}catch(e){}
}
if(b){
this.empty().append(a);
}
},null,c,arguments.length);
},
replaceWith:function(){
var b=arguments[0];
this.domManip(arguments,function(a){
b=this.parentNode;
jQuery.cleanData(getAll(this));
if(b){
b.replaceChild(a,this);
}
});
return b&&(b.length||b.nodeType)?this:this.remove();
},
detach:function(a){
return this.remove(a,true);
},
domManip:function(c,d){
c=x.apply([],c);
var e,node,hasScripts,
scripts,doc,fragment,
i=0,
l=this.length,
set=this,
iNoClone=l-1,
value=c[0],
isFunction=jQuery.isFunction(value);
if(isFunction||
(l>1&&typeof value==="string"&&
!D.checkClone&&rchecked.test(value))){
return this.each(function(a){
var b=set.eq(a);
if(isFunction){
c[0]=value.call(this,a,b.html());
}
b.domManip(c,d);
});
}
if(l){
fragment=jQuery.buildFragment(c,this[0].ownerDocument,false,this);
e=fragment.firstChild;
if(fragment.childNodes.length===1){
fragment=e;
}
if(e){
scripts=jQuery.map(getAll(fragment,"script"),disableScript);
hasScripts=scripts.length;
for(;i<l;i++){
node=fragment;
if(i!==iNoClone){
node=jQuery.clone(node,true,true);
if(hasScripts){
jQuery.merge(scripts,getAll(node,"script"));
}
}
d.call(this[i],node,i);
}
if(hasScripts){
doc=scripts[scripts.length-1].ownerDocument;
jQuery.map(scripts,restoreScript);
for(i=0;i<hasScripts;i++){
node=scripts[i];
if(rscriptType.test(node.type||"")&&
!jQuery._data(node,"globalEval")&&jQuery.contains(doc,node)){
if(node.src){
if(jQuery._evalUrl){
jQuery._evalUrl(node.src);
}
}else{
jQuery.globalEval((node.text||node.textContent||node.innerHTML||"").replace(rcleanScript,""));
}
}
}
}
fragment=e=null;
}
}
return this;
}
});
jQuery.each({
appendTo:"append",
prependTo:"prepend",
insertBefore:"before",
insertAfter:"after",
replaceAll:"replaceWith"
},function(c,d){
jQuery.fn[c]=function(a){
var b,
i=0,
ret=[],
insert=jQuery(a),
last=insert.length-1;
for(;i<=last;i++){
b=i===last?this:this.clone(true);
jQuery(insert[i])[d](b);
y.apply(ret,b.get());
}
return this.pushStack(ret);
};
});
var W,
elemdisplay={};

function actualDisplay(a,b){
var c=jQuery(b.createElement(a)).appendTo(b.body),
display=o.getDefaultComputedStyle?
o.getDefaultComputedStyle(c[0]).display:jQuery.css(c[0],"display");
c.detach();
return display;
}

function defaultDisplay(a){
var b=document,
display=elemdisplay[a];
if(!display){
display=actualDisplay(a,b);
if(display==="none"||!display){
W=(W||jQuery("<iframe frameborder='0' width='0' height='0'/>")).appendTo(b.documentElement);
b=(W[0].contentWindow||W[0].contentDocument).document;
b.write();
b.close();
display=actualDisplay(a,b);
W.detach();
}
elemdisplay[a]=display;
}
return display;
}
(function(){
var a,shrinkWrapBlocksVal,
div=document.createElement("div"),
divReset=
"-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;"+
"display:block;padding:0;margin:0;border:0";
div.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>";
a=div.getElementsByTagName("a")[0];
a.style.cssText="float:left;opacity:.5";
D.opacity=/^0.5/.test(a.style.opacity);
D.cssFloat=!!a.style.cssFloat;
div.style.backgroundClip="content-box";
div.cloneNode(true).style.backgroundClip="";
D.clearCloneStyle=div.style.backgroundClip==="content-box";
a=div=null;
D.shrinkWrapBlocks=function(){
var a,container,div,containerStyles;
if(shrinkWrapBlocksVal==null){
a=document.getElementsByTagName("body")[0];
if(!a){
return;
}
containerStyles="border:0;width:0;height:0;position:absolute;top:0;left:-9999px";
container=document.createElement("div");
div=document.createElement("div");
a.appendChild(container).appendChild(div);
shrinkWrapBlocksVal=false;
if(typeof div.style.zoom!==N){
div.style.cssText=divReset+";width:1px;padding:1px;zoom:1";
div.innerHTML="<div></div>";
div.firstChild.style.width="5px";
shrinkWrapBlocksVal=div.offsetWidth!==3;
}
a.removeChild(container);
a=container=div=null;
}
return shrinkWrapBlocksVal;
};
})();
var X=(/^margin/);
var Y=new RegExp("^("+P+")(?!px)[a-z%]+$","i");
var Z,curCSS,
rposition=/^(top|right|bottom|left)$/;
if(o.getComputedStyle){
Z=function(a){
return a.ownerDocument.defaultView.getComputedStyle(a,null);
};
curCSS=function(a,b,c){
var d,minWidth,maxWidth,ret,
style=a.style;
c=c||Z(a);
ret=c?c.getPropertyValue(b)||c[b]:undefined;
if(c){
if(ret===""&&!jQuery.contains(a.ownerDocument,a)){
ret=jQuery.style(a,b);
}
if(Y.test(ret)&&X.test(b)){
d=style.width;
minWidth=style.minWidth;
maxWidth=style.maxWidth;
style.minWidth=style.maxWidth=style.width=ret;
ret=c.width;
style.width=d;
style.minWidth=minWidth;
style.maxWidth=maxWidth;
}
}
return ret===undefined?
ret:
ret+"";
};
}else if(document.documentElement.currentStyle){
Z=function(a){
return a.currentStyle;
};
curCSS=function(a,b,c){
var d,rs,rsLeft,ret,
style=a.style;
c=c||Z(a);
ret=c?c[b]:undefined;
if(ret==null&&style&&style[b]){
ret=style[b];
}
if(Y.test(ret)&&!rposition.test(b)){
d=style.left;
rs=a.runtimeStyle;
rsLeft=rs&&rs.left;
if(rsLeft){
rs.left=a.currentStyle.left;
}
style.left=b==="fontSize"?"1em":ret;
ret=style.pixelLeft+"px";
style.left=d;
if(rsLeft){
rs.left=rsLeft;
}
}
return ret===undefined?
ret:
ret+""||"auto";
};
}
function addGetHookIf(b,c){
return{
get:function(){
var a=b();
if(a==null){
return;
}
if(a){
delete this.get;
return;
}
return(this.get=c).apply(this,arguments);
}
};
}
(function(){
var a,reliableHiddenOffsetsVal,boxSizingVal,boxSizingReliableVal,
pixelPositionVal,reliableMarginRightVal,
div=document.createElement("div"),
containerStyles="border:0;width:0;height:0;position:absolute;top:0;left:-9999px",
divReset=
"-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;"+
"display:block;padding:0;margin:0;border:0";
div.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>";
a=div.getElementsByTagName("a")[0];
a.style.cssText="float:left;opacity:.5";
D.opacity=/^0.5/.test(a.style.opacity);
D.cssFloat=!!a.style.cssFloat;
div.style.backgroundClip="content-box";
div.cloneNode(true).style.backgroundClip="";
D.clearCloneStyle=div.style.backgroundClip==="content-box";
a=div=null;
jQuery.extend(D,{
reliableHiddenOffsets:function(){
if(reliableHiddenOffsetsVal!=null){
return reliableHiddenOffsetsVal;
}
var a,tds,isSupported,
div=document.createElement("div"),
body=document.getElementsByTagName("body")[0];
if(!body){
return;
}
div.setAttribute("className","t");
div.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>";
a=document.createElement("div");
a.style.cssText=containerStyles;
body.appendChild(a).appendChild(div);
div.innerHTML="<table><tr><td></td><td>t</td></tr></table>";
tds=div.getElementsByTagName("td");
tds[0].style.cssText="padding:0;margin:0;border:0;display:none";
isSupported=(tds[0].offsetHeight===0);
tds[0].style.display="";
tds[1].style.display="none";
reliableHiddenOffsetsVal=isSupported&&(tds[0].offsetHeight===0);
body.removeChild(a);
div=body=null;
return reliableHiddenOffsetsVal;
},
boxSizing:function(){
if(boxSizingVal==null){
computeStyleTests();
}
return boxSizingVal;
},
boxSizingReliable:function(){
if(boxSizingReliableVal==null){
computeStyleTests();
}
return boxSizingReliableVal;
},
pixelPosition:function(){
if(pixelPositionVal==null){
computeStyleTests();
}
return pixelPositionVal;
},
reliableMarginRight:function(){
var a,container,div,marginDiv;
if(reliableMarginRightVal==null&&o.getComputedStyle){
a=document.getElementsByTagName("body")[0];
if(!a){
return;
}
container=document.createElement("div");
div=document.createElement("div");
container.style.cssText=containerStyles;
a.appendChild(container).appendChild(div);
marginDiv=div.appendChild(document.createElement("div"));
marginDiv.style.cssText=div.style.cssText=divReset;
marginDiv.style.marginRight=marginDiv.style.width="0";
div.style.width="1px";
reliableMarginRightVal=
!parseFloat((o.getComputedStyle(marginDiv,null)||{}).marginRight);
a.removeChild(container);
}
return reliableMarginRightVal;
}
});
function computeStyleTests(){
var a,div,
body=document.getElementsByTagName("body")[0];
if(!body){
return;
}
a=document.createElement("div");
div=document.createElement("div");
a.style.cssText=containerStyles;
body.appendChild(a).appendChild(div);
div.style.cssText=
"-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;"+
"position:absolute;display:block;padding:1px;border:1px;width:4px;"+
"margin-top:1%;top:1%";
jQuery.swap(body,body.style.zoom!=null?{zoom:1}:{},function(){
boxSizingVal=div.offsetWidth===4;
});
boxSizingReliableVal=true;
pixelPositionVal=false;
reliableMarginRightVal=true;
if(o.getComputedStyle){
pixelPositionVal=(o.getComputedStyle(div,null)||{}).top!=="1%";
boxSizingReliableVal=
(o.getComputedStyle(div,null)||{width:"4px"}).width==="4px";
}
body.removeChild(a);
div=body=null;
}
})();
jQuery.swap=function(a,b,c,d){
var e,name,
old={};
for(name in b){
old[name]=a.style[name];
a.style[name]=b[name];
}
e=c.apply(a,d||[]);
for(name in b){
a.style[name]=old[name];
}
return e;
};
var
ralpha=/alpha\([^)]*\)/i,
ropacity=/opacity\s*=\s*([^)]*)/,
rdisplayswap=/^(none|table(?!-c[ea]).+)/,
rnumsplit=new RegExp("^("+P+")(.*)$","i"),
rrelNum=new RegExp("^([+-])=("+P+")","i"),
cssShow={position:"absolute",visibility:"hidden",display:"block"},
cssNormalTransform={
letterSpacing:0,
fontWeight:400
},
cssPrefixes=["Webkit","O","Moz","ms"];
function vendorPropName(a,b){
if(b in a){
return b;
}
var c=b.charAt(0).toUpperCase()+b.slice(1),
origName=b,
i=cssPrefixes.length;
while(i--){
b=cssPrefixes[i]+c;
if(b in a){
return b;
}
}
return origName;
}
function showHide(a,b){
var c,elem,hidden,
values=[],
index=0,
length=a.length;
for(;index<length;index++){
elem=a[index];
if(!elem.style){
continue;
}
values[index]=jQuery._data(elem,"olddisplay");
c=elem.style.display;
if(b){
if(!values[index]&&c==="none"){
elem.style.display="";
}
if(elem.style.display===""&&R(elem)){
values[index]=jQuery._data(elem,"olddisplay",defaultDisplay(elem.nodeName));
}
}else{
if(!values[index]){
hidden=R(elem);
if(c&&c!=="none"||!hidden){
jQuery._data(elem,"olddisplay",hidden?c:jQuery.css(elem,"display"));
}
}
}
}
for(index=0;index<length;index++){
elem=a[index];
if(!elem.style){
continue;
}
if(!b||elem.style.display==="none"||elem.style.display===""){
elem.style.display=b?values[index]||"":"none";
}
}
return a;
}
function setPositiveNumber(a,b,c){
var d=rnumsplit.exec(b);
return d?
Math.max(0,d[1]-(c||0))+(d[2]||"px"):
b;
}
function augmentWidthOrHeight(a,b,c,d,e){
var i=c===(d?"border":"content")?
4:
b==="width"?1:0,
val=0;
for(;i<4;i+=2){
if(c==="margin"){
val+=jQuery.css(a,c+Q[i],true,e);
}
if(d){
if(c==="content"){
val-=jQuery.css(a,"padding"+Q[i],true,e);
}
if(c!=="margin"){
val-=jQuery.css(a,"border"+Q[i]+"Width",true,e);
}
}else{
val+=jQuery.css(a,"padding"+Q[i],true,e);
if(c!=="padding"){
val+=jQuery.css(a,"border"+Q[i]+"Width",true,e);
}
}
}
return val;
}
function getWidthOrHeight(a,b,c){
var d=true,
val=b==="width"?a.offsetWidth:a.offsetHeight,
styles=Z(a),
isBorderBox=D.boxSizing()&&jQuery.css(a,"boxSizing",false,styles)==="border-box";
if(val<=0||val==null){
val=curCSS(a,b,styles);
if(val<0||val==null){
val=a.style[b];
}
if(Y.test(val)){
return val;
}
d=isBorderBox&&(D.boxSizingReliable()||val===a.style[b]);
val=parseFloat(val)||0;
}
return(val+
augmentWidthOrHeight(
a,
b,
c||(isBorderBox?"border":"content"),
d,
styles
)
)+"px";
}
jQuery.extend({
cssHooks:{
opacity:{
get:function(a,b){
if(b){
var c=curCSS(a,"opacity");
return c===""?"1":c;
}
}
}
},
cssNumber:{
"columnCount":true,
"fillOpacity":true,
"fontWeight":true,
"lineHeight":true,
"opacity":true,
"order":true,
"orphans":true,
"widows":true,
"zIndex":true,
"zoom":true
},
cssProps:{
"float":D.cssFloat?"cssFloat":"styleFloat"
},
style:function(a,b,c,d){
if(!a||a.nodeType===3||a.nodeType===8||!a.style){
return;
}
var f,type,hooks,
origName=jQuery.camelCase(b),
style=a.style;
b=jQuery.cssProps[origName]||(jQuery.cssProps[origName]=vendorPropName(style,origName));
hooks=jQuery.cssHooks[b]||jQuery.cssHooks[origName];
if(c!==undefined){
type=typeof c;
if(type==="string"&&(f=rrelNum.exec(c))){
c=(f[1]+1)*f[2]+parseFloat(jQuery.css(a,b));
type="number";
}
if(c==null||c!==c){
return;
}
if(type==="number"&&!jQuery.cssNumber[origName]){
c+="px";
}
if(!D.clearCloneStyle&&c===""&&b.indexOf("background")===0){
style[b]="inherit";
}
if(!hooks||!("set"in hooks)||(c=hooks.set(a,c,d))!==undefined){
try{
style[b]="";
style[b]=c;
}catch(e){}
}
}else{
if(hooks&&"get"in hooks&&(f=hooks.get(a,false,d))!==undefined){
return f;
}
return style[b];
}
},
css:function(a,b,c,d){
var e,val,hooks,
origName=jQuery.camelCase(b);
b=jQuery.cssProps[origName]||(jQuery.cssProps[origName]=vendorPropName(a.style,origName));
hooks=jQuery.cssHooks[b]||jQuery.cssHooks[origName];
if(hooks&&"get"in hooks){
val=hooks.get(a,true,c);
}
if(val===undefined){
val=curCSS(a,b,d);
}
if(val==="normal"&&b in cssNormalTransform){
val=cssNormalTransform[b];
}
if(c===""||c){
e=parseFloat(val);
return c===true||jQuery.isNumeric(e)?e||0:val;
}
return val;
}
});
jQuery.each(["height","width"],function(i,e){
jQuery.cssHooks[e]={
get:function(a,b,c){
if(b){
return a.offsetWidth===0&&rdisplayswap.test(jQuery.css(a,"display"))?
jQuery.swap(a,cssShow,function(){
return getWidthOrHeight(a,e,c);
}):
getWidthOrHeight(a,e,c);
}
},
set:function(a,b,c){
var d=c&&Z(a);
return setPositiveNumber(a,b,c?
augmentWidthOrHeight(
a,
e,
c,
D.boxSizing()&&jQuery.css(a,"boxSizing",false,d)==="border-box",
d
):0
);
}
};
});
if(!D.opacity){
jQuery.cssHooks.opacity={
get:function(a,b){
return ropacity.test((b&&a.currentStyle?a.currentStyle.filter:a.style.filter)||"")?
(0.01*parseFloat(RegExp.$1))+"":
b?"1":"";
},
set:function(a,b){
var c=a.style,
currentStyle=a.currentStyle,
opacity=jQuery.isNumeric(b)?"alpha(opacity="+b*100+")":"",
filter=currentStyle&&currentStyle.filter||c.filter||"";
c.zoom=1;
if((b>=1||b==="")&&
jQuery.trim(filter.replace(ralpha,""))===""&&
c.removeAttribute){
c.removeAttribute("filter");
if(b===""||currentStyle&&!currentStyle.filter){
return;
}
}
c.filter=ralpha.test(filter)?
filter.replace(ralpha,opacity):
filter+" "+opacity;
}
};
}
jQuery.cssHooks.marginRight=addGetHookIf(D.reliableMarginRight,
function(a,b){
if(b){
return jQuery.swap(a,{"display":"inline-block"},
curCSS,[a,"marginRight"]);
}
}
);
jQuery.each({
margin:"",
padding:"",
border:"Width"
},function(b,c){
jQuery.cssHooks[b+c]={
expand:function(a){
var i=0,
expanded={},
parts=typeof a==="string"?a.split(" "):[a];
for(;i<4;i++){
expanded[b+Q[i]+c]=
parts[i]||parts[i-2]||parts[0];
}
return expanded;
}
};
if(!X.test(b)){
jQuery.cssHooks[b+c].set=setPositiveNumber;
}
});
jQuery.fn.extend({
css:function(e,f){
return S(this,function(a,b,c){
var d,len,
map={},
i=0;
if(jQuery.isArray(b)){
d=Z(a);
len=b.length;
for(;i<len;i++){
map[b[i]]=jQuery.css(a,b[i],false,d);
}
return map;
}
return c!==undefined?
jQuery.style(a,b,c):
jQuery.css(a,b);
},e,f,arguments.length>1);
},
show:function(){
return showHide(this,true);
},
hide:function(){
return showHide(this);
},
toggle:function(a){
if(typeof a==="boolean"){
return a?this.show():this.hide();
}
return this.each(function(){
if(R(this)){
jQuery(this).show();
}else{
jQuery(this).hide();
}
});
}
});
function Tween(a,b,c,d,e){
return new Tween.prototype.init(a,b,c,d,e);
}
jQuery.Tween=Tween;
Tween.prototype={
constructor:Tween,
init:function(a,b,c,d,e,f){
this.elem=a;
this.prop=c;
this.easing=e||"swing";
this.options=b;
this.start=this.now=this.cur();
this.end=d;
this.unit=f||(jQuery.cssNumber[c]?"":"px");
},
cur:function(){
var a=Tween.propHooks[this.prop];
return a&&a.get?
a.get(this):
Tween.propHooks._default.get(this);
},
run:function(a){
var b,
hooks=Tween.propHooks[this.prop];
if(this.options.duration){
this.pos=b=jQuery.easing[this.easing](
a,this.options.duration*a,0,1,this.options.duration
);
}else{
this.pos=b=a;
}
this.now=(this.end-this.start)*b+this.start;
if(this.options.step){
this.options.step.call(this.elem,this.now,this);
}
if(hooks&&hooks.set){
hooks.set(this);
}else{
Tween.propHooks._default.set(this);
}
return this;
}
};
Tween.prototype.init.prototype=Tween.prototype;
Tween.propHooks={
_default:{
get:function(a){
var b;
if(a.elem[a.prop]!=null&&
(!a.elem.style||a.elem.style[a.prop]==null)){
return a.elem[a.prop];
}
b=jQuery.css(a.elem,a.prop,"");
return!b||b==="auto"?0:b;
},
set:function(a){
if(jQuery.fx.step[a.prop]){
jQuery.fx.step[a.prop](a);
}else if(a.elem.style&&(a.elem.style[jQuery.cssProps[a.prop]]!=null||jQuery.cssHooks[a.prop])){
jQuery.style(a.elem,a.prop,a.now+a.unit);
}else{
a.elem[a.prop]=a.now;
}
}
}
};
Tween.propHooks.scrollTop=Tween.propHooks.scrollLeft={
set:function(a){
if(a.elem.nodeType&&a.elem.parentNode){
a.elem[a.prop]=a.now;
}
}
};
jQuery.easing={
linear:function(p){
return p;
},
swing:function(p){
return 0.5-Math.cos(p*Math.PI)/2;
}
};
jQuery.fx=Tween.prototype.init;
jQuery.fx.step={};
var
fxNow,timerId,
rfxtypes=/^(?:toggle|show|hide)$/,
rfxnum=new RegExp("^(?:([+-])=|)("+P+")([a-z%]*)$","i"),
rrun=/queueHooks$/,
animationPrefilters=[defaultPrefilter],
tweeners={
"*":[function(a,b){
var c=this.createTween(a,b),
target=c.cur(),
parts=rfxnum.exec(b),
unit=parts&&parts[3]||(jQuery.cssNumber[a]?"":"px"),
start=(jQuery.cssNumber[a]||unit!=="px"&&+target)&&
rfxnum.exec(jQuery.css(c.elem,a)),
scale=1,
maxIterations=20;
if(start&&start[3]!==unit){
unit=unit||start[3];
parts=parts||[];
start=+target||1;
do{
scale=scale||".5";
start=start/scale;
jQuery.style(c.elem,a,start+unit);
}while(scale!==(scale=c.cur()/target)&&scale!==1&&--maxIterations);
}
if(parts){
start=c.start=+start||+target||0;
c.unit=unit;
c.end=parts[1]?
start+(parts[1]+1)*parts[2]:
+parts[2];
}
return c;
}]
};
function createFxNow(){
setTimeout(function(){
fxNow=undefined;
});
return(fxNow=jQuery.now());
}
function genFx(a,b){
var c,
attrs={height:a},
i=0;
b=b?1:0;
for(;i<4;i+=2-b){
c=Q[i];
attrs["margin"+c]=attrs["padding"+c]=a;
}
if(b){
attrs.opacity=attrs.width=a;
}
return attrs;
}
function createTween(a,b,c){
var d,
collection=(tweeners[b]||[]).concat(tweeners["*"]),
index=0,
length=collection.length;
for(;index<length;index++){
if((d=collection[index].call(c,b,a))){
return d;
}
}
}
function defaultPrefilter(b,c,d){

var e,value,toggle,tween,hooks,oldfire,display,dDisplay,
anim=this,
orig={},
style=b.style,
hidden=b.nodeType&&R(b),
dataShow=jQuery._data(b,"fxshow");
if(!d.queue){
hooks=jQuery._queueHooks(b,"fx");
if(hooks.unqueued==null){
hooks.unqueued=0;
oldfire=hooks.empty.fire;
hooks.empty.fire=function(){
if(!hooks.unqueued){
oldfire();
}
};
}
hooks.unqueued++;
anim.always(function(){
anim.always(function(){
hooks.unqueued--;
if(!jQuery.queue(b,"fx").length){
hooks.empty.fire();
}
});
});
}
if(b.nodeType===1&&("height"in c||"width"in c)){
d.overflow=[style.overflow,style.overflowX,style.overflowY];
display=jQuery.css(b,"display");
dDisplay=defaultDisplay(b.nodeName);
if(display==="none"){
display=dDisplay;
}
if(display==="inline"&&
jQuery.css(b,"float")==="none"){
if(!D.inlineBlockNeedsLayout||dDisplay==="inline"){
style.display="inline-block";
}else{
style.zoom=1;
}
}
}
if(d.overflow){
style.overflow="hidden";
if(!D.shrinkWrapBlocks()){
anim.always(function(){
style.overflow=d.overflow[0];
style.overflowX=d.overflow[1];
style.overflowY=d.overflow[2];
});
}
}
for(e in c){
value=c[e];
if(rfxtypes.exec(value)){
delete c[e];
toggle=toggle||value==="toggle";
if(value===(hidden?"hide":"show")){
if(value==="show"&&dataShow&&dataShow[e]!==undefined){
hidden=true;
}else{
continue;
}
}
orig[e]=dataShow&&dataShow[e]||jQuery.style(b,e);
}
}
if(!jQuery.isEmptyObject(orig)){
if(dataShow){
if("hidden"in dataShow){
hidden=dataShow.hidden;
}
}else{
dataShow=jQuery._data(b,"fxshow",{});
}
if(toggle){
dataShow.hidden=!hidden;
}
if(hidden){
jQuery(b).show();
}else{
anim.done(function(){
jQuery(b).hide();
});
}
anim.done(function(){
var a;
jQuery._removeData(b,"fxshow");
for(a in orig){
jQuery.style(b,a,orig[a]);
}
});
for(e in orig){
tween=createTween(hidden?dataShow[e]:0,e,anim);
if(!(e in dataShow)){
dataShow[e]=tween.start;
if(hidden){
tween.end=tween.start;
tween.start=e==="width"||e==="height"?1:0;
}
}
}
}
}
function propFilter(a,b){
var c,name,easing,value,hooks;
for(c in a){
name=jQuery.camelCase(c);
easing=b[name];
value=a[c];
if(jQuery.isArray(value)){
easing=value[1];
value=a[c]=value[0];
}
if(c!==name){
a[name]=value;
delete a[c];
}
hooks=jQuery.cssHooks[name];
if(hooks&&"expand"in hooks){
value=hooks.expand(value);
delete a[name];
for(c in value){
if(!(c in a)){
a[c]=value[c];
b[c]=easing;
}
}
}else{
b[name]=easing;
}
}
}
function Animation(d,e,f){
var g,
stopped,
index=0,
length=animationPrefilters.length,
deferred=jQuery.Deferred().always(function(){
delete tick.elem;
}),
tick=function(){
if(stopped){
return false;
}
var a=fxNow||createFxNow(),
remaining=Math.max(0,animation.startTime+animation.duration-a),
temp=remaining/animation.duration||0,
percent=1-temp,
index=0,
length=animation.tweens.length;
for(;index<length;index++){
animation.tweens[index].run(percent);
}
deferred.notifyWith(d,[animation,percent,remaining]);
if(percent<1&&length){
return remaining;
}else{
deferred.resolveWith(d,[animation]);
return false;
}
},
animation=deferred.promise({
d:d,
props:jQuery.extend({},e),
opts:jQuery.extend(true,{specialEasing:{}},f),
originalProperties:e,
originalOptions:f,
startTime:fxNow||createFxNow(),
duration:f.duration,
tweens:[],
createTween:function(a,b){
var c=jQuery.Tween(d,animation.opts,a,b,
animation.opts.specialEasing[a]||animation.opts.easing);
animation.tweens.push(c);
return c;
},
stop:function(a){
var b=0,
length=a?animation.tweens.length:0;
if(stopped){
return this;
}
stopped=true;
for(;b<length;b++){
animation.tweens[b].run(1);
}
if(a){
deferred.resolveWith(d,[animation,a]);
}else{
deferred.rejectWith(d,[animation,a]);
}
return this;
}
}),
props=animation.props;
propFilter(props,animation.opts.specialEasing);
for(;index<length;index++){
g=animationPrefilters[index].call(animation,d,props,animation.opts);
if(g){
return g;
}
}
jQuery.map(props,createTween,animation);
if(jQuery.isFunction(animation.opts.start)){
animation.opts.start.call(d,animation);
}
jQuery.fx.timer(
jQuery.extend(tick,{
d:d,
anim:animation,
queue:animation.opts.queue
})
);
return animation.progress(animation.opts.progress)
.done(animation.opts.done,animation.opts.complete)
.fail(animation.opts.fail)
.always(animation.opts.always);
}
jQuery.Animation=jQuery.extend(Animation,{
tweener:function(a,b){
if(jQuery.isFunction(a)){
b=a;
a=["*"];
}else{
a=a.split(" ");
}
var c,
index=0,
length=a.length;
for(;index<length;index++){
c=a[index];
tweeners[c]=tweeners[c]||[];
tweeners[c].unshift(b);
}
},
prefilter:function(a,b){
if(b){
animationPrefilters.unshift(a);
}else{
animationPrefilters.push(a);
}
}
});
jQuery.speed=function(a,b,c){
var d=a&&typeof a==="object"?jQuery.extend({},a):{
complete:c||!c&&b||
jQuery.isFunction(a)&&a,
duration:a,
b:c&&b||b&&!jQuery.isFunction(b)&&b
};
d.duration=jQuery.fx.off?0:typeof d.duration==="number"?d.duration:
d.duration in jQuery.fx.speeds?jQuery.fx.speeds[d.duration]:jQuery.fx.speeds._default;
if(d.queue==null||d.queue===true){
d.queue="fx";
}
d.old=d.complete;
d.complete=function(){
if(jQuery.isFunction(d.old)){
d.old.call(this);
}
if(d.queue){
jQuery.dequeue(this,d.queue);
}
};
return d;
};
jQuery.fn.extend({
fadeTo:function(a,b,c,d){
return this.filter(R).css("opacity",0).show()
.end().animate({opacity:b},a,c,d);
},
animate:function(b,c,d,e){
var f=jQuery.isEmptyObject(b),
optall=jQuery.speed(c,d,e),
doAnimation=function(){
var a=Animation(this,jQuery.extend({},b),optall);
if(f||jQuery._data(this,"finish")){
a.stop(true);
}
};
doAnimation.finish=doAnimation;
return f||optall.queue===false?
this.each(doAnimation):
this.queue(optall.queue,doAnimation);
},
stop:function(c,d,e){
var f=function(a){
var b=a.stop;
delete a.stop;
b(e);
};
if(typeof c!=="string"){
e=d;
d=c;
c=undefined;
}
if(d&&c!==false){
this.queue(c||"fx",[]);
}
return this.each(function(){
var a=true,
index=c!=null&&c+"queueHooks",
timers=jQuery.timers,
data=jQuery._data(this);
if(index){
if(data[index]&&data[index].stop){
f(data[index]);
}
}else{
for(index in data){
if(data[index]&&data[index].stop&&rrun.test(index)){
f(data[index]);
}
}
}
for(index=timers.length;index--;){
if(timers[index].elem===this&&(c==null||timers[index].queue===c)){
timers[index].anim.stop(e);
a=false;
timers.splice(index,1);
}
}
if(a||!e){
jQuery.dequeue(this,c);
}
});
},
finish:function(b){
if(b!==false){
b=b||"fx";
}
return this.each(function(){
var a,
data=jQuery._data(this),
queue=data[b+"queue"],
hooks=data[b+"queueHooks"],
timers=jQuery.timers,
length=queue?queue.length:0;
data.finish=true;
jQuery.queue(this,b,[]);
if(hooks&&hooks.stop){
hooks.stop.call(this,true);
}
for(a=timers.length;a--;){
if(timers[a].elem===this&&timers[a].queue===b){
timers[a].anim.stop(true);
timers.splice(a,1);
}
}
for(a=0;a<length;a++){
if(queue[a]&&queue[a].finish){
queue[a].finish.call(this);
}
}
delete data.finish;
});
}
});
jQuery.each(["toggle","show","hide"],function(i,d){
var e=jQuery.fn[d];
jQuery.fn[d]=function(a,b,c){
return a==null||typeof a==="boolean"?
e.apply(this,arguments):
this.animate(genFx(d,true),a,b,c);
};
});
jQuery.each({
slideDown:genFx("show"),
slideUp:genFx("hide"),
slideToggle:genFx("toggle"),
fadeIn:{opacity:"show"},
fadeOut:{opacity:"hide"},
fadeToggle:{opacity:"toggle"}
},function(d,e){
jQuery.fn[d]=function(a,b,c){
return this.animate(e,a,b,c);
};
});
jQuery.timers=[];
jQuery.fx.tick=function(){
var a,
timers=jQuery.timers,
i=0;
fxNow=jQuery.now();
for(;i<timers.length;i++){
a=timers[i];
if(!a()&&timers[i]===a){
timers.splice(i--,1);
}
}
if(!timers.length){
jQuery.fx.stop();
}
fxNow=undefined;
};
jQuery.fx.timer=function(a){
jQuery.timers.push(a);
if(a()){
jQuery.fx.start();
}else{
jQuery.timers.pop();
}
};
jQuery.fx.interval=13;
jQuery.fx.start=function(){
if(!timerId){
timerId=setInterval(jQuery.fx.tick,jQuery.fx.interval);
}
};
jQuery.fx.stop=function(){
clearInterval(timerId);
timerId=null;
};
jQuery.fx.speeds={
slow:600,
fast:200,
_default:400
};
jQuery.fn.delay=function(d,e){
d=jQuery.fx?jQuery.fx.speeds[d]||d:d;
e=e||"fx";
return this.queue(e,function(a,b){
var c=setTimeout(a,d);
b.stop=function(){
clearTimeout(c);
};
});
};
(function(){
var a,input,select,opt,
div=document.createElement("div");
div.setAttribute("className","t");
div.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>";
a=div.getElementsByTagName("a")[0];
select=document.createElement("select");
opt=select.appendChild(document.createElement("option"));
input=div.getElementsByTagName("input")[0];
a.style.cssText="top:1px";
D.getSetAttribute=div.className!=="t";
D.style=/top/.test(a.getAttribute("style"));
D.hrefNormalized=a.getAttribute("href")==="/a";
D.checkOn=!!input.value;
D.optSelected=opt.selected;
D.enctype=!!document.createElement("form").enctype;
select.disabled=true;
D.optDisabled=!opt.disabled;
input=document.createElement("input");
input.setAttribute("value","");
D.input=input.getAttribute("value")==="";
input.value="t";
input.setAttribute("type","radio");
D.radioValue=input.value==="t";
a=input=select=opt=div=null;
})();
var ba=/\r/g;
jQuery.fn.extend({
val:function(c){
var d,ret,isFunction,
elem=this[0];
if(!arguments.length){
if(elem){
d=jQuery.valHooks[elem.type]||jQuery.valHooks[elem.nodeName.toLowerCase()];
if(d&&"get"in d&&(ret=d.get(elem,"value"))!==undefined){
return ret;
}
ret=elem.value;
return typeof ret==="string"?
ret.replace(ba,""):
ret==null?"":ret;
}
return;
}
isFunction=jQuery.isFunction(c);
return this.each(function(i){
var b;
if(this.nodeType!==1){
return;
}
if(isFunction){
b=c.call(this,i,jQuery(this).val());
}else{
b=c;
}
if(b==null){
b="";
}else if(typeof b==="number"){
b+="";
}else if(jQuery.isArray(b)){
b=jQuery.map(b,function(a){
return a==null?"":a+"";
});
}
d=jQuery.valHooks[this.type]||jQuery.valHooks[this.nodeName.toLowerCase()];
if(!d||!("set"in d)||d.set(this,b,"value")===undefined){
this.value=b;
}
});
}
});
jQuery.extend({
valHooks:{
option:{
get:function(a){
var b=jQuery.find.attr(a,"value");
return b!=null?
b:
jQuery.text(a);
}
},
select:{
get:function(a){
var b,option,
options=a.options,
index=a.selectedIndex,
one=a.type==="select-one"||index<0,
values=one?null:[],
max=one?index+1:options.length,
i=index<0?
max:
one?index:0;
for(;i<max;i++){
option=options[i];
if((option.selected||i===index)&&
(D.optDisabled?!option.disabled:option.getAttribute("disabled")===null)&&
(!option.parentNode.disabled||!jQuery.nodeName(option.parentNode,"optgroup"))){
b=jQuery(option).val();
if(one){
return b;
}
values.push(b);
}
}
return values;
},
set:function(a,b){
var c,option,
options=a.options,
values=jQuery.makeArray(b),
i=options.length;
while(i--){
option=options[i];
if(jQuery.inArray(jQuery.valHooks.option.get(option),values)>=0){
try{
option.selected=c=true;
}catch(_){
option.scrollHeight;
}
}else{
option.selected=false;
}
}
if(!c){
a.selectedIndex=-1;
}
return options;
}
}
}
});
jQuery.each(["radio","checkbox"],function(){
jQuery.valHooks[this]={
set:function(a,b){
if(jQuery.isArray(b)){
return(a.checked=jQuery.inArray(jQuery(a).val(),b)>=0);
}
}
};
if(!D.checkOn){
jQuery.valHooks[this].get=function(a){
return a.getAttribute("value")===null?"on":a.value;
};
}
});
var bb,boolHook,
attrHandle=jQuery.expr.attrHandle,
ruseDefault=/^(?:checked|selected)$/i,
getSetAttribute=D.getSetAttribute,
getSetInput=D.input;
jQuery.fn.extend({
attr:function(a,b){
return S(this,jQuery.attr,a,b,arguments.length>1);
},
removeAttr:function(a){
return this.each(function(){
jQuery.removeAttr(this,a);
});
}
});
jQuery.extend({
attr:function(a,b,c){
var d,ret,
nType=a.nodeType;
if(!a||nType===3||nType===8||nType===2){
return;
}
if(typeof a.getAttribute===N){
return jQuery.prop(a,b,c);
}
if(nType!==1||!jQuery.isXMLDoc(a)){
b=b.toLowerCase();
d=jQuery.attrHooks[b]||
(jQuery.expr.match.bool.test(b)?boolHook:bb);
}
if(c!==undefined){
if(c===null){
jQuery.removeAttr(a,b);
}else if(d&&"set"in d&&(ret=d.set(a,c,b))!==undefined){
return ret;
}else{
a.setAttribute(b,c+"");
return c;
}
}else if(d&&"get"in d&&(ret=d.get(a,b))!==null){
return ret;
}else{
ret=jQuery.find.attr(a,b);
return ret==null?
undefined:
ret;
}
},
removeAttr:function(a,b){
var c,propName,
i=0,
attrNames=b&&b.match(K);
if(attrNames&&a.nodeType===1){
while((c=attrNames[i++])){
propName=jQuery.propFix[c]||c;
if(jQuery.expr.match.bool.test(c)){
if(getSetInput&&getSetAttribute||!ruseDefault.test(c)){
a[propName]=false;
}else{
a[jQuery.camelCase("default-"+c)]=
a[propName]=false;
}
}else{
jQuery.attr(a,c,"");
}
a.removeAttribute(getSetAttribute?c:propName);
}
}
},
attrHooks:{
type:{
set:function(a,b){
if(!D.radioValue&&b==="radio"&&jQuery.nodeName(a,"input")){
var c=a.value;
a.setAttribute("type",b);
if(c){
a.value=c;
}
return b;
}
}
}
}
});
boolHook={
set:function(a,b,c){
if(b===false){
jQuery.removeAttr(a,c);
}else if(getSetInput&&getSetAttribute||!ruseDefault.test(c)){
a.setAttribute(!getSetAttribute&&jQuery.propFix[c]||c,c);
}else{
a[jQuery.camelCase("default-"+c)]=a[c]=true;
}
return c;
}
};
jQuery.each(jQuery.expr.match.bool.source.match(/\w+/g),function(i,e){
var f=attrHandle[e]||jQuery.find.attr;
attrHandle[e]=getSetInput&&getSetAttribute||!ruseDefault.test(e)?
function(a,b,c){
var d,handle;
if(!c){
handle=attrHandle[b];
attrHandle[b]=d;
d=f(a,b,c)!=null?
b.toLowerCase():
null;
attrHandle[b]=handle;
}
return d;
}:
function(a,b,c){
if(!c){
return a[jQuery.camelCase("default-"+b)]?
b.toLowerCase():
null;
}
};
});
if(!getSetInput||!getSetAttribute){
jQuery.attrHooks.value={
set:function(a,b,c){
if(jQuery.nodeName(a,"input")){
a.defaultValue=b;
}else{
return bb&&bb.set(a,b,c);
}
}
};
}
if(!getSetAttribute){
bb={
set:function(a,b,c){
var d=a.getAttributeNode(c);
if(!d){
a.setAttributeNode(
(d=a.ownerDocument.createAttribute(c))
);
}
d.value=b+="";
if(c==="value"||b===a.getAttribute(c)){
return b;
}
}
};
attrHandle.id=attrHandle.name=attrHandle.coords=
function(a,b,c){
var d;
if(!c){
return(d=a.getAttributeNode(b))&&d.value!==""?
d.value:
null;
}
};
jQuery.valHooks.button={
get:function(a,b){
var c=a.getAttributeNode(b);
if(c&&c.specified){
return c.value;
}
},
set:bb.set
};
jQuery.attrHooks.contenteditable={
set:function(a,b,c){
bb.set(a,b===""?false:b,c);
}
};
jQuery.each(["width","height"],function(i,c){
jQuery.attrHooks[c]={
set:function(a,b){
if(b===""){
a.setAttribute(c,"auto");
return b;
}
}
};
});
}
if(!D.style){
jQuery.attrHooks.style={
get:function(a){
return a.style.cssText||undefined;
},
set:function(a,b){
return(a.style.cssText=b+"");
}
};
}
var bc=/^(?:input|select|textarea|button|object)$/i,
rclickable=/^(?:a|area)$/i;
jQuery.fn.extend({
prop:function(a,b){
return S(this,jQuery.prop,a,b,arguments.length>1);
},
removeProp:function(a){
a=jQuery.propFix[a]||a;
return this.each(function(){
try{
this[a]=undefined;
delete this[a];
}catch(e){}
});
}
});
jQuery.extend({
propFix:{
"for":"htmlFor",
"class":"className"
},
prop:function(a,b,c){
var d,hooks,notxml,
nType=a.nodeType;
if(!a||nType===3||nType===8||nType===2){
return;
}
notxml=nType!==1||!jQuery.isXMLDoc(a);
if(notxml){
b=jQuery.propFix[b]||b;
hooks=jQuery.propHooks[b];
}
if(c!==undefined){
return hooks&&"set"in hooks&&(d=hooks.set(a,c,b))!==undefined?
d:
(a[b]=c);
}else{
return hooks&&"get"in hooks&&(d=hooks.get(a,b))!==null?
d:
a[b];
}
},
propHooks:{
tabIndex:{
get:function(a){
var b=jQuery.find.attr(a,"tabindex");
return b?
parseInt(b,10):
bc.test(a.nodeName)||rclickable.test(a.nodeName)&&a.href?
0:
-1;
}
}
}
});
if(!D.hrefNormalized){
jQuery.each(["href","src"],function(i,b){
jQuery.propHooks[b]={
get:function(a){
return a.getAttribute(b,4);
}
};
});
}
if(!D.optSelected){
jQuery.propHooks.selected={
get:function(a){
var b=a.parentNode;
if(b){
b.selectedIndex;
if(b.parentNode){
b.parentNode.selectedIndex;
}
}
return null;
}
};
}
jQuery.each([
"tabIndex",
"readOnly",
"maxLength",
"cellSpacing",
"cellPadding",
"rowSpan",
"colSpan",
"useMap",
"frameBorder",
"contentEditable"
],function(){
jQuery.propFix[this.toLowerCase()]=this;
});
if(!D.enctype){
jQuery.propFix.enctype="encoding";
}
var bd=/[\t\r\n\f]/g;
jQuery.fn.extend({
addClass:function(a){
var b,elem,cur,clazz,j,finalValue,
i=0,
len=this.length,
proceed=typeof a==="string"&&a;
if(jQuery.isFunction(a)){
return this.each(function(j){
jQuery(this).addClass(a.call(this,j,this.className));
});
}
if(proceed){
b=(a||"").match(K)||[];
for(;i<len;i++){
elem=this[i];
cur=elem.nodeType===1&&(elem.className?
(" "+elem.className+" ").replace(bd," "):
" "
);
if(cur){
j=0;
while((clazz=b[j++])){
if(cur.indexOf(" "+clazz+" ")<0){
cur+=clazz+" ";
}
}
finalValue=jQuery.trim(cur);
if(elem.className!==finalValue){
elem.className=finalValue;
}
}
}
}
return this;
},
removeClass:function(a){
var b,elem,cur,clazz,j,finalValue,
i=0,
len=this.length,
proceed=arguments.length===0||typeof a==="string"&&a;
if(jQuery.isFunction(a)){
return this.each(function(j){
jQuery(this).removeClass(a.call(this,j,this.className));
});
}
if(proceed){
b=(a||"").match(K)||[];
for(;i<len;i++){
elem=this[i];
cur=elem.nodeType===1&&(elem.className?
(" "+elem.className+" ").replace(bd," "):
""
);
if(cur){
j=0;
while((clazz=b[j++])){
while(cur.indexOf(" "+clazz+" ")>=0){
cur=cur.replace(" "+clazz+" "," ");
}
}
finalValue=a?jQuery.trim(cur):"";
if(elem.className!==finalValue){
elem.className=finalValue;
}
}
}
}
return this;
},
toggleClass:function(b,c){
var d=typeof b;
if(typeof c==="boolean"&&d==="string"){
return c?this.addClass(b):this.removeClass(b);
}
if(jQuery.isFunction(b)){
return this.each(function(i){
jQuery(this).toggleClass(b.call(this,i,this.className,c),c);
});
}
return this.each(function(){
if(d==="string"){
var a,
i=0,
self=jQuery(this),
classNames=b.match(K)||[];
while((a=classNames[i++])){
if(self.hasClass(a)){
self.removeClass(a);
}else{
self.addClass(a);
}
}
}else if(d===N||d==="boolean"){
if(this.className){
jQuery._data(this,"__className__",this.className);
}
this.className=this.className||b===false?"":jQuery._data(this,"__className__")||"";
}
});
},
hasClass:function(a){
var b=" "+a+" ",
i=0,
l=this.length;
for(;i<l;i++){
if(this[i].nodeType===1&&(" "+this[i].className+" ").replace(bd," ").indexOf(b)>=0){
return true;
}
}
return false;
}
});
jQuery.each(("blur focus focusin focusout load resize scroll unload click dblclick "+
"mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave "+
"change select submit keydown keypress keyup error contextmenu").split(" "),function(i,c){
jQuery.fn[c]=function(a,b){
return arguments.length>0?
this.on(c,null,a,b):
this.trigger(c);
};
});
jQuery.fn.extend({
hover:function(a,b){
return this.mouseenter(a).mouseleave(b||a);
},
bind:function(a,b,c){
return this.on(a,null,b,c);
},
unbind:function(a,b){
return this.off(a,null,b);
},
delegate:function(a,b,c,d){
return this.on(b,a,c,d);
},
undelegate:function(a,b,c){
return arguments.length===1?this.off(a,"**"):this.off(b,a||"**",c);
}
});
var be=jQuery.now();
var bf=(/\?/);
var bg=/(,)|(\[|{)|(}|])|"(?:[^"\\\r\n]|\\["\\\/bfnrt]|\\u[\da-fA-F]{4})*"\s*:?|true|false|null|-?(?!0\d)\d+(?:\.\d+|)(?:[eE][+-]?\d+|)/g;
jQuery.parseJSON=function(e){
if(o.JSON&&o.JSON.parse){
return o.JSON.parse(e+"");
}
var f,
depth=null,
str=jQuery.trim(e+"");
return str&&!jQuery.trim(str.replace(bg,function(a,b,c,d){
if(f&&b){
depth=0;
}
if(depth===0){
return a;
}
f=c||b;
depth+=!d-!c;
return"";
}))?
(Function("return "+str))():
jQuery.error("Invalid JSON: "+e);
};
jQuery.parseXML=function(a){
var b,tmp;
if(!a||typeof a!=="string"){
return null;
}
try{
if(o.DOMParser){tmp=new DOMParser();
b=tmp.parseFromString(a,"text/xml");
}else{b=new ActiveXObject("Microsoft.XMLDOM");
b.async="false";
b.loadXML(a);
}
}catch(e){
b=undefined;
}
if(!b||!b.documentElement||b.getElementsByTagName("parsererror").length){
jQuery.error("Invalid XML: "+a);
}
return b;
};
var
ajaxLocParts,
ajaxLocation,
rhash=/#.*$/,
rts=/([?&])_=[^&]*/,
rheaders=/^(.*?):[ \t]*([^\r\n]*)\r?$/mg,rlocalProtocol=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,
rnoContent=/^(?:GET|HEAD)$/,
rprotocol=/^\/\//,
rurl=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,

prefilters={},

transports={},
allTypes="*/".concat("*");
try{
ajaxLocation=location.href;
}catch(e){
ajaxLocation=document.createElement("a");
ajaxLocation.href="";
ajaxLocation=ajaxLocation.href;
}
ajaxLocParts=rurl.exec(ajaxLocation.toLowerCase())||[];
function addToPrefiltersOrTransports(d){
return function(a,b){
if(typeof a!=="string"){
b=a;
a="*";
}
var c,
i=0,
dataTypes=a.toLowerCase().match(K)||[];
if(jQuery.isFunction(b)){
while((c=dataTypes[i++])){
if(c.charAt(0)==="+"){
c=c.slice(1)||"*";
(d[c]=d[c]||[]).unshift(b);
}else{
(d[c]=d[c]||[]).push(b);
}
}
}
};
}
function inspectPrefiltersOrTransports(e,f,g,h){
var i={},
seekingTransport=(e===transports);
function inspect(c){
var d;
i[c]=true;
jQuery.each(e[c]||[],function(_,a){
var b=a(f,g,h);
if(typeof b==="string"&&!seekingTransport&&!i[b]){
f.dataTypes.unshift(b);
inspect(b);
return false;
}else if(seekingTransport){
return!(d=b);
}
});
return d;
}
return inspect(f.dataTypes[0])||!i["*"]&&inspect("*");
}
function ajaxExtend(a,b){
var c,key,
flatOptions=jQuery.ajaxSettings.flatOptions||{};
for(key in b){
if(b[key]!==undefined){
(flatOptions[key]?a:(c||(c={})))[key]=b[key];
}
}
if(c){
jQuery.extend(true,a,c);
}
return a;
}

function ajaxHandleResponses(s,a,b){
var c,ct,finalDataType,type,
contents=s.contents,
dataTypes=s.dataTypes;
while(dataTypes[0]==="*"){
dataTypes.shift();
if(ct===undefined){
ct=s.mimeType||a.getResponseHeader("Content-Type");
}
}
if(ct){
for(type in contents){
if(contents[type]&&contents[type].test(ct)){
dataTypes.unshift(type);
break;
}
}
}
if(dataTypes[0]in b){
finalDataType=dataTypes[0];
}else{
for(type in b){
if(!dataTypes[0]||s.converters[type+" "+dataTypes[0]]){
finalDataType=type;
break;
}
if(!c){
c=type;
}
}
finalDataType=finalDataType||c;
}
if(finalDataType){
if(finalDataType!==dataTypes[0]){
dataTypes.unshift(finalDataType);
}
return b[finalDataType];
}
}

function ajaxConvert(s,a,b,c){
var d,current,conv,tmp,prev,
converters={},
dataTypes=s.dataTypes.slice();
if(dataTypes[1]){
for(conv in s.converters){
converters[conv.toLowerCase()]=s.converters[conv];
}
}
current=dataTypes.shift();
while(current){
if(s.responseFields[current]){
b[s.responseFields[current]]=a;
}
if(!prev&&c&&s.dataFilter){
a=s.dataFilter(a,s.dataType);
}
prev=current;
current=dataTypes.shift();
if(current){
if(current==="*"){
current=prev;
}else if(prev!=="*"&&prev!==current){
conv=converters[prev+" "+current]||converters["* "+current];
if(!conv){
for(d in converters){
tmp=d.split(" ");
if(tmp[1]===current){
conv=converters[prev+" "+tmp[0]]||
converters["* "+tmp[0]];
if(conv){
if(conv===true){
conv=converters[d];
}else if(converters[d]!==true){
current=tmp[0];
dataTypes.unshift(tmp[1]);
}
break;
}
}
}
}
if(conv!==true){
if(conv&&s["throws"]){
a=conv(a);
}else{
try{
a=conv(a);
}catch(e){
return{state:"parsererror",error:conv?e:"No conversion from "+prev+" to "+current};
}
}
}
}
}
}
return{state:"success",data:a};
}
jQuery.extend({
active:0,
lastModified:{},
etag:{},
ajaxSettings:{
url:ajaxLocation,
type:"GET",
isLocal:rlocalProtocol.test(ajaxLocParts[1]),
global:true,
processData:true,
async:true,
contentType:"application/x-www-form-urlencoded; charset=UTF-8",

accepts:{
"*":allTypes,
text:"text/plain",
html:"text/html",
xml:"application/xml, text/xml",
json:"application/json, text/javascript"
},
contents:{
xml:/xml/,
html:/html/,
json:/json/
},
responseFields:{
xml:"responseXML",
text:"responseText",
json:"responseJSON"
},
converters:{
"* text":String,
"text html":true,
"text json":jQuery.parseJSON,
"text xml":jQuery.parseXML
},
flatOptions:{
url:true,
context:true
}
},
ajaxSetup:function(a,b){
return b?
ajaxExtend(ajaxExtend(a,jQuery.ajaxSettings),b):
ajaxExtend(jQuery.ajaxSettings,a);
},
ajaxPrefilter:addToPrefiltersOrTransports(prefilters),
ajaxTransport:addToPrefiltersOrTransports(transports),
ajax:function(f,g){
if(typeof f==="object"){
g=f;
f=undefined;
}
g=g||{};
var h,
i,
cacheURL,
responseHeadersString,
timeoutTimer,
fireGlobals,
transport,
responseHeaders,
s=jQuery.ajaxSetup({},g),
callbackContext=s.context||s,
globalEventContext=s.context&&(callbackContext.nodeType||callbackContext.jquery)?
jQuery(callbackContext):
jQuery.event,
deferred=jQuery.Deferred(),
completeDeferred=jQuery.Callbacks("once memory"),
statusCode=s.statusCode||{},
requestHeaders={},
requestHeadersNames={},
state=0,
strAbort="canceled",
jqXHR={
readyState:0,
getResponseHeader:function(a){
var b;
if(state===2){
if(!responseHeaders){
responseHeaders={};
while((b=rheaders.exec(responseHeadersString))){
responseHeaders[b[1].toLowerCase()]=b[2];
}
}
b=responseHeaders[a.toLowerCase()];
}
return b==null?null:b;
},
getAllResponseHeaders:function(){
return state===2?responseHeadersString:null;
},
setRequestHeader:function(a,b){
var c=a.toLowerCase();
if(!state){
a=requestHeadersNames[c]=requestHeadersNames[c]||a;
requestHeaders[a]=b;
}
return this;
},
overrideMimeType:function(a){
if(!state){
s.mimeType=a;
}
return this;
},
statusCode:function(a){
var b;
if(a){
if(state<2){
for(b in a){
statusCode[b]=[statusCode[b],a[b]];
}
}else{
jqXHR.always(a[jqXHR.status]);
}
}
return this;
},
abort:function(a){
var b=a||strAbort;
if(transport){
transport.abort(b);
}
done(0,b);
return this;
}
};
deferred.promise(jqXHR).complete=completeDeferred.add;
jqXHR.success=jqXHR.done;
jqXHR.error=jqXHR.fail;
s.url=((f||s.url||ajaxLocation)+"").replace(rhash,"").replace(rprotocol,ajaxLocParts[1]+"//");
s.type=g.method||g.type||s.method||s.type;
s.dataTypes=jQuery.trim(s.dataType||"*").toLowerCase().match(K)||[""];
if(s.crossDomain==null){
h=rurl.exec(s.url.toLowerCase());
s.crossDomain=!!(h&&
(h[1]!==ajaxLocParts[1]||h[2]!==ajaxLocParts[2]||
(h[3]||(h[1]==="http:"?"80":"443"))!==
(ajaxLocParts[3]||(ajaxLocParts[1]==="http:"?"80":"443")))
);
}
if(s.data&&s.processData&&typeof s.data!=="string"){
s.data=jQuery.param(s.data,s.traditional);
}
inspectPrefiltersOrTransports(prefilters,s,g,jqXHR);
if(state===2){
return jqXHR;
}
fireGlobals=s.global;
if(fireGlobals&&jQuery.active++===0){
jQuery.event.trigger("ajaxStart");
}
s.type=s.type.toUpperCase();
s.hasContent=!rnoContent.test(s.type);
cacheURL=s.url;
if(!s.hasContent){
if(s.data){
cacheURL=(s.url+=(bf.test(cacheURL)?"&":"?")+s.data);
delete s.data;
}
if(s.cache===false){
s.url=rts.test(cacheURL)?
cacheURL.replace(rts,"$1_="+be++):
cacheURL+(bf.test(cacheURL)?"&":"?")+"_="+be++;
}
}
if(s.ifModified){
if(jQuery.lastModified[cacheURL]){
jqXHR.setRequestHeader("If-Modified-Since",jQuery.lastModified[cacheURL]);
}
if(jQuery.etag[cacheURL]){
jqXHR.setRequestHeader("If-None-Match",jQuery.etag[cacheURL]);
}
}
if(s.data&&s.hasContent&&s.contentType!==false||g.contentType){
jqXHR.setRequestHeader("Content-Type",s.contentType);
}
jqXHR.setRequestHeader(
"Accept",
s.dataTypes[0]&&s.accepts[s.dataTypes[0]]?
s.accepts[s.dataTypes[0]]+(s.dataTypes[0]!=="*"?", "+allTypes+"; q=0.01":""):
s.accepts["*"]
);
for(i in s.headers){
jqXHR.setRequestHeader(i,s.headers[i]);
}
if(s.beforeSend&&(s.beforeSend.call(callbackContext,jqXHR,s)===false||state===2)){
return jqXHR.abort();
}
strAbort="abort";
for(i in{success:1,error:1,complete:1}){
jqXHR[i](s[i]);
}
transport=inspectPrefiltersOrTransports(transports,s,g,jqXHR);
if(!transport){
done(-1,"No Transport");
}else{
jqXHR.readyState=1;
if(fireGlobals){
globalEventContext.trigger("ajaxSend",[jqXHR,s]);
}
if(s.async&&s.timeout>0){
timeoutTimer=setTimeout(function(){
jqXHR.abort("timeout");
},s.timeout);
}
try{
state=1;
transport.send(requestHeaders,done);
}catch(e){
if(state<2){
done(-1,e);
}else{
throw e;
}
}
}
function done(a,b,c,d){
var e,success,error,response,modified,
statusText=b;
if(state===2){
return;
}
state=2;
if(timeoutTimer){
clearTimeout(timeoutTimer);
}
transport=undefined;
responseHeadersString=d||"";
jqXHR.readyState=a>0?4:0;
e=a>=200&&a<300||a===304;
if(c){
response=ajaxHandleResponses(s,jqXHR,c);
}
response=ajaxConvert(s,response,jqXHR,e);
if(e){
if(s.ifModified){
modified=jqXHR.getResponseHeader("Last-Modified");
if(modified){
jQuery.lastModified[cacheURL]=modified;
}
modified=jqXHR.getResponseHeader("etag");
if(modified){
jQuery.etag[cacheURL]=modified;
}
}
if(a===204||s.type==="HEAD"){
statusText="nocontent";
}else if(a===304){
statusText="notmodified";
}else{
statusText=response.state;
success=response.data;
error=response.error;
e=!error;
}
}else{
error=statusText;
if(a||!statusText){
statusText="error";
if(a<0){
a=0;
}
}
}
jqXHR.status=a;
jqXHR.statusText=(b||statusText)+"";
if(e){
deferred.resolveWith(callbackContext,[success,statusText,jqXHR]);
}else{
deferred.rejectWith(callbackContext,[jqXHR,statusText,error]);
}
jqXHR.statusCode(statusCode);
statusCode=undefined;
if(fireGlobals){
globalEventContext.trigger(e?"ajaxSuccess":"ajaxError",
[jqXHR,s,e?success:error]);
}
completeDeferred.fireWith(callbackContext,[jqXHR,statusText]);
if(fireGlobals){
globalEventContext.trigger("ajaxComplete",[jqXHR,s]);
if(!(--jQuery.active)){
jQuery.event.trigger("ajaxStop");
}
}
}
return jqXHR;
},
getJSON:function(a,b,c){
return jQuery.get(a,b,c,"json");
},
getScript:function(a,b){
return jQuery.get(a,undefined,b,"script");
}
});
jQuery.each(["get","post"],function(i,e){
jQuery[e]=function(a,b,c,d){
if(jQuery.isFunction(b)){
d=d||c;
c=b;
b=undefined;
}
return jQuery.ajax({
a:a,
d:e,
dataType:d,
b:b,
success:c
});
};
});
jQuery.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(i,b){
jQuery.fn[b]=function(a){
return this.on(b,a);
};
});
jQuery._evalUrl=function(a){
return jQuery.ajax({
a:a,
type:"GET",
dataType:"script",
async:false,
global:false,
"throws":true
});
};
jQuery.fn.extend({
wrapAll:function(b){
if(jQuery.isFunction(b)){
return this.each(function(i){
jQuery(this).wrapAll(b.call(this,i));
});
}
if(this[0]){
var c=jQuery(b,this[0].ownerDocument).eq(0).clone(true);
if(this[0].parentNode){
c.insertBefore(this[0]);
}
c.map(function(){
var a=this;
while(a.firstChild&&a.firstChild.nodeType===1){
a=a.firstChild;
}
return a;
}).append(this);
}
return this;
},
wrapInner:function(b){
if(jQuery.isFunction(b)){
return this.each(function(i){
jQuery(this).wrapInner(b.call(this,i));
});
}
return this.each(function(){
var a=jQuery(this),
contents=a.contents();
if(contents.length){
contents.wrapAll(b);
}else{
a.append(b);
}
});
},
wrap:function(a){
var b=jQuery.isFunction(a);
return this.each(function(i){
jQuery(this).wrapAll(b?a.call(this,i):a);
});
},
unwrap:function(){
return this.parent().each(function(){
if(!jQuery.nodeName(this,"body")){
jQuery(this).replaceWith(this.childNodes);
}
}).end();
}
});
jQuery.expr.filters.hidden=function(a){
return a.offsetWidth<=0&&a.offsetHeight<=0||
(!D.reliableHiddenOffsets()&&
((a.style&&a.style.display)||jQuery.css(a,"display"))==="none");
};
jQuery.expr.filters.visible=function(a){
return!jQuery.expr.filters.hidden(a);
};
var bh=/%20/g,
rbracket=/\[\]$/,
rCRLF=/\r?\n/g,
rsubmitterTypes=/^(?:submit|button|image|reset|file)$/i,
rsubmittable=/^(?:input|select|textarea|keygen)/i;
function buildParams(a,b,c,d){
var e;
if(jQuery.isArray(b)){
jQuery.each(b,function(i,v){
if(c||rbracket.test(a)){
d(a,v);
}else{
buildParams(a+"["+(typeof v==="object"?i:"")+"]",v,c,d);
}
});
}else if(!c&&jQuery.type(b)==="object"){
for(e in b){
buildParams(a+"["+e+"]",b[e],c,d);
}
}else{
d(a,b);
}
}
jQuery.param=function(a,c){
var d,
s=[],
add=function(a,b){
b=jQuery.isFunction(b)?b():(b==null?"":b);
s[s.length]=encodeURIComponent(a)+"="+encodeURIComponent(b);
};
if(c===undefined){
c=jQuery.ajaxSettings&&jQuery.ajaxSettings.traditional;
}
if(jQuery.isArray(a)||(a.jquery&&!jQuery.isPlainObject(a))){
jQuery.each(a,function(){
add(this.name,this.value);
});
}else{
for(d in a){
buildParams(d,a[d],c,add);
}
}
return s.join("&").replace(bh,"+");
};
jQuery.fn.extend({
serialize:function(){
return jQuery.param(this.serializeArray());
},
serializeArray:function(){
return this.map(function(){
var a=jQuery.prop(this,"elements");
return a?jQuery.makeArray(a):this;
})
.filter(function(){
var a=this.type;
return this.name&&!jQuery(this).is(":disabled")&&
rsubmittable.test(this.nodeName)&&!rsubmitterTypes.test(a)&&
(this.checked||!T.test(a));
})
.map(function(i,b){
var c=jQuery(this).val();
return c==null?
null:
jQuery.isArray(c)?
jQuery.map(c,function(a){
return{name:b.name,value:a.replace(rCRLF,"\r\n")};
}):
{name:b.name,value:c.replace(rCRLF,"\r\n")};
}).get();
}
});
jQuery.ajaxSettings.xhr=o.ActiveXObject!==undefined?
function(){
return!this.isLocal&&
/^(get|post|head|put|delete|options)$/i.test(this.type)&&
createStandardXHR()||createActiveXHR();
}:
createStandardXHR;
var bi=0,
xhrCallbacks={},
xhrSupported=jQuery.ajaxSettings.xhr();
if(o.ActiveXObject){
jQuery(o).on("unload",function(){
for(var a in xhrCallbacks){
xhrCallbacks[a](undefined,true);
}
});
}
D.cors=!!xhrSupported&&("withCredentials"in xhrSupported);
xhrSupported=D.ajax=!!xhrSupported;
if(xhrSupported){
jQuery.ajaxTransport(function(f){
if(!f.crossDomain||D.cors){
var g;
return{
send:function(c,d){
var i,
xhr=f.xhr(),
id=++bi;
xhr.open(f.type,f.url,f.async,f.username,f.password);
if(f.xhrFields){
for(i in f.xhrFields){
xhr[i]=f.xhrFields[i];
}
}
if(f.mimeType&&xhr.overrideMimeType){
xhr.overrideMimeType(f.mimeType);
}
if(!f.crossDomain&&!c["X-Requested-With"]){
c["X-Requested-With"]="XMLHttpRequest";
}
for(i in c){
if(c[i]!==undefined){
xhr.setRequestHeader(i,c[i]+"");
}
}
xhr.send((f.hasContent&&f.data)||null);
g=function(_,a){
var b,statusText,responses;
if(g&&(a||xhr.readyState===4)){
delete xhrCallbacks[id];
g=undefined;
xhr.onreadystatechange=jQuery.noop;
if(a){
if(xhr.readyState!==4){
xhr.abort();
}
}else{
responses={};
b=xhr.status;
if(typeof xhr.responseText==="string"){
responses.text=xhr.responseText;
}
try{
statusText=xhr.statusText;
}catch(e){
statusText="";
}
if(!b&&f.isLocal&&!f.crossDomain){
b=responses.text?200:404;
}else if(b===1223){
b=204;
}
}
}
if(responses){
d(b,statusText,responses,xhr.getAllResponseHeaders());
}
};
if(!f.async){
g();
}else if(xhr.readyState===4){
setTimeout(g);
}else{
xhr.onreadystatechange=xhrCallbacks[id]=g;
}
},
abort:function(){
if(g){
g(undefined,true);
}
}
};
}
});
}
function createStandardXHR(){
try{
return new o.XMLHttpRequest();
}catch(e){}
}
function createActiveXHR(){
try{
return new o.ActiveXObject("Microsoft.XMLHTTP");
}catch(e){}
}
jQuery.ajaxSetup({
accepts:{
script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"
},
contents:{
script:/(?:java|ecma)script/
},
converters:{
"text script":function(a){
jQuery.globalEval(a);
return a;
}
}
});
jQuery.ajaxPrefilter("script",function(s){
if(s.cache===undefined){
s.cache=false;
}
if(s.crossDomain){
s.type="GET";
s.global=false;
}
});
jQuery.ajaxTransport("script",function(s){
if(s.crossDomain){
var c,
head=document.head||jQuery("head")[0]||document.documentElement;
return{
send:function(_,b){
c=document.createElement("script");
c.async=true;
if(s.scriptCharset){
c.charset=s.scriptCharset;
}
c.src=s.url;
c.onload=c.onreadystatechange=function(_,a){
if(a||!c.readyState||/loaded|complete/.test(c.readyState)){
c.onload=c.onreadystatechange=null;
if(c.parentNode){
c.parentNode.removeChild(c);
}
c=null;
if(!a){
b(200,"success");
}
}
};
head.insertBefore(c,head.firstChild);
},
abort:function(){
if(c){
c.onload(undefined,true);
}
}
};
}
});
var bj=[],
rjsonp=/(=)\?(?=&|$)|\?\?/;
jQuery.ajaxSetup({
jsonp:"callback",
jsonpCallback:function(){
var a=bj.pop()||(jQuery.expando+"_"+(be++));
this[a]=true;
return a;
}
});
jQuery.ajaxPrefilter("json jsonp",function(s,a,b){
var c,overwritten,responseContainer,
jsonProp=s.jsonp!==false&&(rjsonp.test(s.url)?
"url":
typeof s.data==="string"&&!(s.contentType||"").indexOf("application/x-www-form-urlencoded")&&rjsonp.test(s.data)&&"data"
);
if(jsonProp||s.dataTypes[0]==="jsonp"){
c=s.jsonpCallback=jQuery.isFunction(s.jsonpCallback)?
s.jsonpCallback():
s.jsonpCallback;
if(jsonProp){
s[jsonProp]=s[jsonProp].replace(rjsonp,"$1"+c);
}else if(s.jsonp!==false){
s.url+=(bf.test(s.url)?"&":"?")+s.jsonp+"="+c;
}
s.converters["script json"]=function(){
if(!responseContainer){
jQuery.error(c+" was not called");
}
return responseContainer[0];
};
s.dataTypes[0]="json";
overwritten=o[c];
o[c]=function(){
responseContainer=arguments;
};
b.always(function(){
o[c]=overwritten;
if(s[c]){
s.jsonpCallback=a.jsonpCallback;
bj.push(c);
}
if(responseContainer&&jQuery.isFunction(overwritten)){
overwritten(responseContainer[0]);
}
responseContainer=overwritten=undefined;
});
return"script";
}
});
jQuery.parseHTML=function(a,b,c){
if(!a||typeof a!=="string"){
return null;
}
if(typeof b==="boolean"){
c=b;
b=false;
}
b=b||document;
var d=G.exec(a),
scripts=!c&&[];
if(d){
return[b.createElement(d[1])];
}
d=jQuery.buildFragment([a],b,scripts);
if(scripts&&scripts.length){
jQuery(scripts).remove();
}
return jQuery.merge([],d.childNodes);
};
var bk=jQuery.fn.load;

jQuery.fn.load=function(c,d,e){
if(typeof c!=="string"&&bk){
return bk.apply(this,arguments);
}
var f,response,type,
self=this,
off=c.indexOf(" ");
if(off>=0){
f=c.slice(off,c.length);
c=c.slice(0,off);
}
if(jQuery.isFunction(d)){
e=d;
d=undefined;
}else if(d&&typeof d==="object"){
type="POST";
}
if(self.length>0){
jQuery.ajax({
c:c,
type:type,
dataType:"html",
data:d
}).done(function(a){
response=arguments;
self.html(f?
jQuery("<div>").append(jQuery.parseHTML(a)).find(f):
a);
}).complete(e&&function(a,b){
self.each(e,response||[a.responseText,b,a]);
});
}
return this;
};
jQuery.expr.filters.animated=function(b){
return jQuery.grep(jQuery.timers,function(a){
return b===a.elem;
}).length;
};
var bl=o.document.documentElement;

function getWindow(a){
return jQuery.isWindow(a)?
a:
a.nodeType===9?
a.defaultView||a.parentWindow:
false;
}
jQuery.offset={
setOffset:function(a,b,i){
var c,curLeft,curCSSTop,curTop,curOffset,curCSSLeft,calculatePosition,
position=jQuery.css(a,"position"),
curElem=jQuery(a),
props={};
if(position==="static"){
a.style.position="relative";
}
curOffset=curElem.offset();
curCSSTop=jQuery.css(a,"top");
curCSSLeft=jQuery.css(a,"left");
calculatePosition=(position==="absolute"||position==="fixed")&&
jQuery.inArray("auto",[curCSSTop,curCSSLeft])>-1;
if(calculatePosition){
c=curElem.position();
curTop=c.top;
curLeft=c.left;
}else{
curTop=parseFloat(curCSSTop)||0;
curLeft=parseFloat(curCSSLeft)||0;
}
if(jQuery.isFunction(b)){
b=b.call(a,i,curOffset);
}
if(b.top!=null){
props.top=(b.top-curOffset.top)+curTop;
}
if(b.left!=null){
props.left=(b.left-curOffset.left)+curLeft;
}
if("using"in b){
b.using.call(a,props);
}else{
curElem.css(props);
}
}
};
jQuery.fn.extend({
offset:function(a){
if(arguments.length){
return a===undefined?
this:
this.each(function(i){
jQuery.offset.setOffset(this,a,i);
});
}
var b,win,
box={top:0,left:0},
elem=this[0],
doc=elem&&elem.ownerDocument;
if(!doc){
return;
}
b=doc.documentElement;
if(!jQuery.contains(b,elem)){
return box;
}
if(typeof elem.getBoundingClientRect!==N){
box=elem.getBoundingClientRect();
}
win=getWindow(doc);
return{
top:box.top+(win.pageYOffset||b.scrollTop)-(b.clientTop||0),
left:box.left+(win.pageXOffset||b.scrollLeft)-(b.clientLeft||0)
};
},
position:function(){
if(!this[0]){
return;
}
var a,offset,
parentOffset={top:0,left:0},
elem=this[0];
if(jQuery.css(elem,"position")==="fixed"){
offset=elem.getBoundingClientRect();
}else{
a=this.offsetParent();
offset=this.offset();
if(!jQuery.nodeName(a[0],"html")){
parentOffset=a.offset();
}
parentOffset.top+=jQuery.css(a[0],"borderTopWidth",true);
parentOffset.left+=jQuery.css(a[0],"borderLeftWidth",true);
}
return{
top:offset.top-parentOffset.top-jQuery.css(elem,"marginTop",true),
left:offset.left-parentOffset.left-jQuery.css(elem,"marginLeft",true)
};
},
offsetParent:function(){
return this.map(function(){
var a=this.offsetParent||bl;
while(a&&(!jQuery.nodeName(a,"html")&&jQuery.css(a,"position")==="static")){
a=a.offsetParent;
}
return a||bl;
});
}
});
jQuery.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(f,g){
var h=/Y/.test(g);
jQuery.fn[f]=function(e){
return S(this,function(a,b,c){
var d=getWindow(a);
if(c===undefined){
return d?(g in d)?d[g]:
d.document.documentElement[b]:
a[b];
}
if(d){
d.scrollTo(
!h?c:jQuery(d).scrollLeft(),
h?c:jQuery(d).scrollTop()
);
}else{
a[b]=c;
}
},f,e,arguments.length,null);
};
});
jQuery.each(["top","left"],function(i,c){
jQuery.cssHooks[c]=addGetHookIf(D.pixelPosition,
function(a,b){
if(b){
b=curCSS(a,c);
return Y.test(b)?
jQuery(a).position()[c]+"px":
b;
}
}
);
});
jQuery.each({Height:"height",Width:"width"},function(j,k){
jQuery.each({padding:"inner"+j,content:k,"":"outer"+j},function(h,i){
jQuery.fn[i]=function(e,f){
var g=arguments.length&&(h||typeof e!=="boolean"),
extra=h||(e===true||f===true?"margin":"border");
return S(this,function(a,b,c){
var d;
if(jQuery.isWindow(a)){
return a.document.documentElement["client"+j];
}
if(a.nodeType===9){
d=a.documentElement;
return Math.max(
a.body["scroll"+j],d["scroll"+j],
a.body["offset"+j],d["offset"+j],
d["client"+j]
);
}
return c===undefined?
jQuery.css(a,b,extra):
jQuery.style(a,b,c,extra);
},k,g?e:undefined,g,null);
};
});
});
jQuery.fn.size=function(){
return this.length;
};
jQuery.fn.andSelf=jQuery.fn.addBack;
if(typeof define==="function"&&define.amd){
define("jquery",[],function(){
return jQuery;
});
}
var
_jQuery=o.jQuery,
_$=o.$;
jQuery.noConflict=function(a){
if(o.$===jQuery){
o.$=_$;
}
if(a&&o.jQuery===jQuery){
o.jQuery=_jQuery;
}
return jQuery;
};
if(typeof q===N){
o.jQuery=o.$=jQuery;
}
return jQuery;
}));
;

;
(function($,g){
var h=0,
runiqueId=/^ui-id-\d+$/;
$.ui=$.ui||{};
$.extend($.ui,{
version:"1.10.4",
keyCode:{
BACKSPACE:8,
COMMA:188,
DELETE:46,
DOWN:40,
END:35,
ENTER:13,
ESCAPE:27,
HOME:36,
LEFT:37,
NUMPAD_ADD:107,
NUMPAD_DECIMAL:110,
NUMPAD_DIVIDE:111,
NUMPAD_ENTER:108,
NUMPAD_MULTIPLY:106,
NUMPAD_SUBTRACT:109,
PAGE_DOWN:34,
PAGE_UP:33,
PERIOD:190,
RIGHT:39,
SPACE:32,
TAB:9,
UP:38
}
});
$.fn.extend({
focus:(function(d){
return function(b,c){
return typeof b==="number"?
this.each(function(){
var a=this;
setTimeout(function(){
$(a).focus();
if(c){
c.call(a);
}
},b);
}):
d.apply(this,arguments);
};
})($.fn.focus),
scrollParent:function(){
var a;
if(($.ui.ie&&(/(static|relative)/).test(this.css("position")))||(/absolute/).test(this.css("position"))){
a=this.parents().filter(function(){
return(/(relative|absolute|fixed)/).test($.css(this,"position"))&&(/(auto|scroll)/).test($.css(this,"overflow")+$.css(this,"overflow-y")+$.css(this,"overflow-x"));
}).eq(0);
}else{
a=this.parents().filter(function(){
return(/(auto|scroll)/).test($.css(this,"overflow")+$.css(this,"overflow-y")+$.css(this,"overflow-x"));
}).eq(0);
}
return(/fixed/).test(this.css("position"))||!a.length?$(document):a;
},
zIndex:function(a){
if(a!==g){
return this.css("zIndex",a);
}
if(this.length){
var b=$(this[0]),position,value;
while(b.length&&b[0]!==document){
position=b.css("position");
if(position==="absolute"||position==="relative"||position==="fixed"){
value=parseInt(b.css("zIndex"),10);
if(!isNaN(value)&&value!==0){
return value;
}
}
b=b.parent();
}
}
return 0;
},
uniqueId:function(){
return this.each(function(){
if(!this.id){
this.id="ui-id-"+(++h);
}
});
},
removeUniqueId:function(){
return this.each(function(){
if(runiqueId.test(this.id)){
$(this).removeAttr("id");
}
});
}
});
function focusable(a,b){
var c,mapName,img,
nodeName=a.nodeName.toLowerCase();
if("area"===nodeName){
c=a.parentNode;
mapName=c.name;
if(!a.href||!mapName||c.nodeName.toLowerCase()!=="map"){
return false;
}
img=$("img[usemap=#"+mapName+"]")[0];
return!!img&&visible(img);
}
return(/input|select|textarea|button|object/.test(nodeName)?
!a.disabled:
"a"===nodeName?
a.href||b:
b)&&
visible(a);
}
function visible(a){
return $.expr.filters.visible(a)&&
!$(a).parents().addBack().filter(function(){
return $.css(this,"visibility")==="hidden";
}).length;
}
$.extend($.expr[":"],{
data:$.expr.createPseudo?
$.expr.createPseudo(function(b){
return function(a){
return!!$.data(a,b);
};
}):
function(a,i,b){
return!!$.data(a,b[3]);
},
focusable:function(a){
return focusable(a,!isNaN($.attr(a,"tabindex")));
},
tabbable:function(a){
var b=$.attr(a,"tabindex"),
isTabIndexNaN=isNaN(b);
return(isTabIndexNaN||b>=0)&&focusable(a,!isTabIndexNaN);
}
});
if(!$("<a>").outerWidth(1).jquery){
$.each(["Width","Height"],function(i,e){
var f=e==="Width"?["Left","Right"]:["Top","Bottom"],
type=e.toLowerCase(),
orig={
innerWidth:$.fn.innerWidth,
innerHeight:$.fn.innerHeight,
outerWidth:$.fn.outerWidth,
outerHeight:$.fn.outerHeight
};
function reduce(a,b,c,d){
$.each(f,function(){
b-=parseFloat($.css(a,"padding"+this))||0;
if(c){
b-=parseFloat($.css(a,"border"+this+"Width"))||0;
}
if(d){
b-=parseFloat($.css(a,"margin"+this))||0;
}
});
return b;
}
$.fn["inner"+e]=function(a){
if(a===g){
return orig["inner"+e].call(this);
}
return this.each(function(){
$(this).css(type,reduce(this,a)+"px");
});
};
$.fn["outer"+e]=function(a,b){
if(typeof a!=="number"){
return orig["outer"+e].call(this,a);
}
return this.each(function(){
$(this).css(type,reduce(this,a,true,b)+"px");
});
};
});
}
if(!$.fn.addBack){
$.fn.addBack=function(a){
return this.add(a==null?
this.prevObject:this.prevObject.filter(a)
);
};
}
if($("<a>").data("a-b","a").removeData("a-b").data("a-b")){
$.fn.removeData=(function(b){
return function(a){
if(arguments.length){
return b.call(this,$.camelCase(a));
}else{
return b.call(this);
}
};
})($.fn.removeData);
}
$.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase());
$.support.selectstart="onselectstart"in document.createElement("div");
$.fn.extend({
disableSelection:function(){
return this.bind(($.support.selectstart?"selectstart":"mousedown")+
".ui-disableSelection",function(a){
a.preventDefault();
});
},
enableSelection:function(){
return this.unbind(".ui-disableSelection");
}
});
$.extend($.ui,{
plugin:{
add:function(a,b,c){
var i,
proto=$.ui[a].prototype;
for(i in c){
proto.plugins[i]=proto.plugins[i]||[];
proto.plugins[i].push([b,c[i]]);
}
},
call:function(a,b,c){
var i,
set=a.plugins[b];
if(!set||!a.element[0].parentNode||a.element[0].parentNode.nodeType===11){
return;
}
for(i=0;i<set.length;i++){
if(a.options[set[i][0]]){
set[i][1].apply(a.element,c);
}
}
}
},
hasScroll:function(b,a){
if($(b).css("overflow")==="hidden"){
return false;
}
var c=(a&&a==="left")?"scrollLeft":"scrollTop",
has=false;
if(b[c]>0){
return true;
}
b[c]=1;
has=(b[c]>0);
b[c]=0;
return has;
}
});
})(jQuery);
(function($,j){
var k=0,
slice=Array.prototype.slice,
_cleanData=$.cleanData;
$.cleanData=function(a){
for(var i=0,elem;(elem=a[i])!=null;i++){
try{
$(elem).triggerHandler("remove");
}catch(e){}
}
_cleanData(a);
};
$.widget=function(e,f,g){
var h,existingConstructor,constructor,basePrototype,
proxiedPrototype={},
namespace=e.split(".")[0];
e=e.split(".")[1];
h=namespace+"-"+e;
if(!g){
g=f;
f=$.Widget;
}
$.expr[":"][h.toLowerCase()]=function(a){
return!!$.data(a,h);
};
$[namespace]=$[namespace]||{};
existingConstructor=$[namespace][e];
constructor=$[namespace][e]=function(a,b){
if(!this._createWidget){
return new constructor(a,b);
}
if(arguments.length){
this._createWidget(a,b);
}
};
$.extend(constructor,existingConstructor,{
version:g.version,
_proto:$.extend({},g),
_childConstructors:[]
});
basePrototype=new f();
basePrototype.options=$.widget.extend({},basePrototype.options);
$.each(g,function(c,d){
if(!$.isFunction(d)){
proxiedPrototype[c]=d;
return;
}
proxiedPrototype[c]=(function(){
var b=function(){
return f.prototype[c].apply(this,arguments);
},
_superApply=function(a){
return f.prototype[c].apply(this,a);
};
return function(){
var a=this._super,
__superApply=this._superApply,
returnValue;
this._super=b;
this._superApply=_superApply;
returnValue=d.apply(this,arguments);
this._super=a;
this._superApply=__superApply;
return returnValue;
};
})();
});
constructor.prototype=$.widget.extend(basePrototype,{
widgetEventPrefix:existingConstructor?(basePrototype.widgetEventPrefix||e):e
},proxiedPrototype,{
constructor:constructor,
namespace:namespace,
widgetName:e,
widgetFullName:h
});
if(existingConstructor){
$.each(existingConstructor._childConstructors,function(i,a){
var b=a.prototype;
$.widget(b.namespace+"."+b.widgetName,constructor,a._proto);
});
delete existingConstructor._childConstructors;
}else{
f._childConstructors.push(constructor);
}
$.widget.bridge(e,constructor);
};
$.widget.extend=function(a){
var b=slice.call(arguments,1),
inputIndex=0,
inputLength=b.length,
key,
value;
for(;inputIndex<inputLength;inputIndex++){
for(key in b[inputIndex]){
value=b[inputIndex][key];
if(b[inputIndex].hasOwnProperty(key)&&value!==j){
if($.isPlainObject(value)){
a[key]=$.isPlainObject(a[key])?
$.widget.extend({},a[key],value):
$.widget.extend({},value);
}else{
a[key]=value;
}
}
}
}
return a;
};
$.widget.bridge=function(d,e){
var f=e.prototype.widgetFullName||d;
$.fn[d]=function(b){
var c=typeof b==="string",
args=slice.call(arguments,1),
returnValue=this;
b=!c&&args.length?
$.widget.extend.apply(null,[b].concat(args)):
b;
if(c){
this.each(function(){
var a,
instance=$.data(this,f);
if(!instance){
return $.error("cannot call methods on "+d+" prior to initialization; "+
"attempted to call method '"+b+"'");
}
if(!$.isFunction(instance[b])||b.charAt(0)==="_"){
return $.error("no such method '"+b+"' for "+d+" widget instance");
}
a=instance[b].apply(instance,args);
if(a!==instance&&a!==j){
returnValue=a&&a.jquery?
returnValue.pushStack(a.get()):
a;
return false;
}
});
}else{
this.each(function(){
var a=$.data(this,f);
if(a){
a.option(b||{})._init();
}else{
$.data(this,f,new e(b,this));
}
});
}
return returnValue;
};
};
$.Widget=function(){};
$.Widget._childConstructors=[];
$.Widget.prototype={
widgetName:"widget",
widgetEventPrefix:"",
defaultElement:"<div>",
options:{
disabled:false,
create:null
},
_createWidget:function(b,c){
c=$(c||this.defaultElement||this)[0];
this.element=$(c);
this.uuid=k++;
this.eventNamespace="."+this.widgetName+this.uuid;
this.options=$.widget.extend({},
this.options,
this._getCreateOptions(),
b);
this.bindings=$();
this.hoverable=$();
this.focusable=$();
if(c!==this){
$.data(c,this.widgetFullName,this);
this._on(true,this.element,{
remove:function(a){
if(a.target===c){
this.destroy();
}
}
});
this.document=$(c.style?
c.ownerDocument:
c.document||c);
this.window=$(this.document[0].defaultView||this.document[0].parentWindow);
}
this._create();
this._trigger("create",null,this._getCreateEventData());
this._init();
},
_getCreateOptions:$.noop,
_getCreateEventData:$.noop,
_create:$.noop,
_init:$.noop,
destroy:function(){
this._destroy();
this.element
.unbind(this.eventNamespace)
.removeData(this.widgetName)
.removeData(this.widgetFullName)
.removeData($.camelCase(this.widgetFullName));
this.widget()
.unbind(this.eventNamespace)
.removeAttr("aria-disabled")
.removeClass(
this.widgetFullName+"-disabled "+
"ui-state-disabled");
this.bindings.unbind(this.eventNamespace);
this.hoverable.removeClass("ui-state-hover");
this.focusable.removeClass("ui-state-focus");
},
_destroy:$.noop,
widget:function(){
return this.element;
},
option:function(a,b){
var c=a,
parts,
curOption,
i;
if(arguments.length===0){
return $.widget.extend({},this.options);
}
if(typeof a==="string"){
c={};
parts=a.split(".");
a=parts.shift();
if(parts.length){
curOption=c[a]=$.widget.extend({},this.options[a]);
for(i=0;i<parts.length-1;i++){
curOption[parts[i]]=curOption[parts[i]]||{};
curOption=curOption[parts[i]];
}
a=parts.pop();
if(arguments.length===1){
return curOption[a]===j?null:curOption[a];
}
curOption[a]=b;
}else{
if(arguments.length===1){
return this.options[a]===j?null:this.options[a];
}
c[a]=b;
}
}
this._setOptions(c);
return this;
},
_setOptions:function(a){
var b;
for(b in a){
this._setOption(b,a[b]);
}
return this;
},
_setOption:function(a,b){
this.options[a]=b;
if(a==="disabled"){
this.widget()
.toggleClass(this.widgetFullName+"-disabled ui-state-disabled",!!b)
.attr("aria-disabled",b);
this.hoverable.removeClass("ui-state-hover");
this.focusable.removeClass("ui-state-focus");
}
return this;
},
enable:function(){
return this._setOption("disabled",false);
},
disable:function(){
return this._setOption("disabled",true);
},
_on:function(d,e,f){
var g,
instance=this;
if(typeof d!=="boolean"){
f=e;
e=d;
d=false;
}
if(!f){
f=e;
e=this.element;
g=this.widget();
}else{
e=g=$(e);
this.bindings=this.bindings.add(e);
}
$.each(f,function(a,b){
function handlerProxy(){
if(!d&&
(instance.options.disabled===true||
$(this).hasClass("ui-state-disabled"))){
return;
}
return(typeof b==="string"?instance[b]:b)
.apply(instance,arguments);
}
if(typeof b!=="string"){
handlerProxy.guid=b.guid=
b.guid||handlerProxy.guid||$.guid++;
}
var c=a.match(/^(\w+)\s*(.*)$/),
eventName=c[1]+instance.eventNamespace,
selector=c[2];
if(selector){
g.delegate(selector,eventName,handlerProxy);
}else{
e.bind(eventName,handlerProxy);
}
});
},
_off:function(a,b){
b=(b||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace;
a.unbind(b).undelegate(b);
},
_delay:function(a,b){
function handlerProxy(){
return(typeof a==="string"?c[a]:a)
.apply(c,arguments);
}
var c=this;
return setTimeout(handlerProxy,b||0);
},
_hoverable:function(b){
this.hoverable=this.hoverable.add(b);
this._on(b,{
mouseenter:function(a){
$(a.currentTarget).addClass("ui-state-hover");
},
mouseleave:function(a){
$(a.currentTarget).removeClass("ui-state-hover");
}
});
},
_focusable:function(b){
this.focusable=this.focusable.add(b);
this._on(b,{
focusin:function(a){
$(a.currentTarget).addClass("ui-state-focus");
},
focusout:function(a){
$(a.currentTarget).removeClass("ui-state-focus");
}
});
},
_trigger:function(a,b,c){
var d,orig,
callback=this.options[a];
c=c||{};
b=$.Event(b);
b.type=(a===this.widgetEventPrefix?
a:
this.widgetEventPrefix+a).toLowerCase();
b.target=this.element[0];
orig=b.originalEvent;
if(orig){
for(d in orig){
if(!(d in b)){
b[d]=orig[d];
}
}
}
this.element.trigger(b,c);
return!($.isFunction(callback)&&
callback.apply(this.element[0],[b].concat(c))===false||
b.isDefaultPrevented());
}
};
$.each({show:"fadeIn",hide:"fadeOut"},function(f,g){
$.Widget.prototype["_"+f]=function(b,c,d){
if(typeof c==="string"){
c={effect:c};
}
var e,
effectName=!c?
f:
c===true||typeof c==="number"?
g:
c.effect||g;
c=c||{};
if(typeof c==="number"){
c={duration:c};
}
e=!$.isEmptyObject(c);
c.complete=d;
if(c.delay){
b.delay(c.delay);
}
if(e&&$.effects&&$.effects.effect[effectName]){
b[f](c);
}else if(effectName!==f&&b[effectName]){
b[effectName](c.duration,c.easing,d);
}else{
b.queue(function(a){
$(this)[f]();
if(d){
d.call(b[0]);
}
a();
});
}
};
});
})(jQuery);
(function($,d){
var e=false;
$(document).mouseup(function(){
e=false;
});
$.widget("ui.mouse",{
version:"1.10.4",
options:{
cancel:"input,textarea,button,select,option",
distance:1,
delay:0
},
_mouseInit:function(){
var b=this;
this.element
.bind("mousedown."+this.widgetName,function(a){
return b._mouseDown(a);
})
.bind("click."+this.widgetName,function(a){
if(true===$.data(a.target,b.widgetName+".preventClickEvent")){
$.removeData(a.target,b.widgetName+".preventClickEvent");
a.stopImmediatePropagation();
return false;
}
});
this.started=false;
},
_mouseDestroy:function(){
this.element.unbind("."+this.widgetName);
if(this._mouseMoveDelegate){
$(document)
.unbind("mousemove."+this.widgetName,this._mouseMoveDelegate)
.unbind("mouseup."+this.widgetName,this._mouseUpDelegate);
}
},
_mouseDown:function(b){
if(e){return}
(this._mouseStarted&&this._mouseUp(b));
this._mouseDownEvent=b;
var c=this,
btnIsLeft=(b.which===1),
elIsCancel=(typeof this.options.cancel==="string"&&b.target.nodeName?$(b.target).closest(this.options.cancel).length:false);
if(!btnIsLeft||elIsCancel||!this._mouseCapture(b)){
return true;
}
this.mouseDelayMet=!this.options.delay;
if(!this.mouseDelayMet){
this._mouseDelayTimer=setTimeout(function(){
c.mouseDelayMet=true;
},this.options.delay);
}
if(this._mouseDistanceMet(b)&&this._mouseDelayMet(b)){
this._mouseStarted=(this._mouseStart(b)!==false);
if(!this._mouseStarted){
b.preventDefault();
return true;
}
}
if(true===$.data(b.target,this.widgetName+".preventClickEvent")){
$.removeData(b.target,this.widgetName+".preventClickEvent");
}
this._mouseMoveDelegate=function(a){
return c._mouseMove(a);
};
this._mouseUpDelegate=function(a){
return c._mouseUp(a);
};
$(document)
.bind("mousemove."+this.widgetName,this._mouseMoveDelegate)
.bind("mouseup."+this.widgetName,this._mouseUpDelegate);
b.preventDefault();
e=true;
return true;
},
_mouseMove:function(a){
if($.ui.ie&&(!document.documentMode||document.documentMode<9)&&!a.button){
return this._mouseUp(a);
}
if(this._mouseStarted){
this._mouseDrag(a);
return a.preventDefault();
}
if(this._mouseDistanceMet(a)&&this._mouseDelayMet(a)){
this._mouseStarted=
(this._mouseStart(this._mouseDownEvent,a)!==false);
(this._mouseStarted?this._mouseDrag(a):this._mouseUp(a));
}
return!this._mouseStarted;
},
_mouseUp:function(a){
$(document)
.unbind("mousemove."+this.widgetName,this._mouseMoveDelegate)
.unbind("mouseup."+this.widgetName,this._mouseUpDelegate);
if(this._mouseStarted){
this._mouseStarted=false;
if(a.target===this._mouseDownEvent.target){
$.data(a.target,this.widgetName+".preventClickEvent",true);
}
this._mouseStop(a);
}
return false;
},
_mouseDistanceMet:function(a){
return(Math.max(
Math.abs(this._mouseDownEvent.pageX-a.pageX),
Math.abs(this._mouseDownEvent.pageY-a.pageY)
)>=this.options.distance
);
},
_mouseDelayMet:function(){
return this.mouseDelayMet;
},
_mouseStart:function(){},
_mouseDrag:function(){},
_mouseStop:function(){},
_mouseCapture:function(){return true}
});
})(jQuery);
(function($,f){
$.ui=$.ui||{};
var g,
max=Math.max,
abs=Math.abs,
round=Math.round,
rhorizontal=/left|center|right/,
rvertical=/top|center|bottom/,
roffset=/[\+\-]\d+(\.[\d]+)?%?/,
rposition=/^\w+/,
rpercent=/%$/,
_position=$.fn.position;
function getOffsets(a,b,c){
return[
parseFloat(a[0])*(rpercent.test(a[0])?b/100:1),
parseFloat(a[1])*(rpercent.test(a[1])?c/100:1)
];
}
function parseCss(a,b){
return parseInt($.css(a,b),10)||0;
}
function getDimensions(a){
var b=a[0];
if(b.nodeType===9){
return{
width:a.width(),
height:a.height(),
offset:{top:0,left:0}
};
}
if($.isWindow(b)){
return{
width:a.width(),
height:a.height(),
offset:{top:a.scrollTop(),left:a.scrollLeft()}
};
}
if(b.preventDefault){
return{
width:0,
height:0,
offset:{top:b.pageY,left:b.pageX}
};
}
return{
width:a.outerWidth(),
height:a.outerHeight(),
offset:a.offset()
};
}
$.position={
scrollbarWidth:function(){
if(g!==f){
return g;
}
var a,w2,
div=$("<div style='display:block;position:absolute;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),
innerDiv=div.children()[0];
$("body").append(div);
a=innerDiv.offsetWidth;
div.css("overflow","scroll");
w2=innerDiv.offsetWidth;
if(a===w2){
w2=div[0].clientWidth;
}
div.remove();
return(g=a-w2);
},
getScrollInfo:function(a){
var b=a.isWindow||a.isDocument?"":
a.element.css("overflow-x"),
overflowY=a.isWindow||a.isDocument?"":
a.element.css("overflow-y"),
hasOverflowX=b==="scroll"||
(b==="auto"&&a.width<a.element[0].scrollWidth),
hasOverflowY=overflowY==="scroll"||
(overflowY==="auto"&&a.height<a.element[0].scrollHeight);
return{
width:hasOverflowY?$.position.scrollbarWidth():0,
height:hasOverflowX?$.position.scrollbarWidth():0
};
},
getWithinInfo:function(a){
var b=$(a||window),
isWindow=$.isWindow(b[0]),
isDocument=!!b[0]&&b[0].nodeType===9;
return{
a:b,
isWindow:isWindow,
isDocument:isDocument,
offset:b.offset()||{left:0,top:0},
scrollLeft:b.scrollLeft(),
scrollTop:b.scrollTop(),
width:isWindow?b.width():b.outerWidth(),
height:isWindow?b.height():b.outerHeight()
};
}
};
$.fn.position=function(d){
if(!d||!d.of){
return _position.apply(this,arguments);
}
d=$.extend({},d);
var e,targetWidth,targetHeight,targetOffset,basePosition,dimensions,
target=$(d.of),
within=$.position.getWithinInfo(d.within),
scrollInfo=$.position.getScrollInfo(within),
collision=(d.collision||"flip").split(" "),
offsets={};
dimensions=getDimensions(target);
if(target[0].preventDefault){
d.at="left top";
}
targetWidth=dimensions.width;
targetHeight=dimensions.height;
targetOffset=dimensions.offset;
basePosition=$.extend({},targetOffset);
$.each(["my","at"],function(){
var a=(d[this]||"").split(" "),
horizontalOffset,
verticalOffset;
if(a.length===1){
a=rhorizontal.test(a[0])?
a.concat(["center"]):
rvertical.test(a[0])?
["center"].concat(a):
["center","center"];
}
a[0]=rhorizontal.test(a[0])?a[0]:"center";
a[1]=rvertical.test(a[1])?a[1]:"center";
horizontalOffset=roffset.exec(a[0]);
verticalOffset=roffset.exec(a[1]);
offsets[this]=[
horizontalOffset?horizontalOffset[0]:0,
verticalOffset?verticalOffset[0]:0
];
d[this]=[
rposition.exec(a[0])[0],
rposition.exec(a[1])[0]
];
});
if(collision.length===1){
collision[1]=collision[0];
}
if(d.at[0]==="right"){
basePosition.left+=targetWidth;
}else if(d.at[0]==="center"){
basePosition.left+=targetWidth/2;
}
if(d.at[1]==="bottom"){
basePosition.top+=targetHeight;
}else if(d.at[1]==="center"){
basePosition.top+=targetHeight/2;
}
e=getOffsets(offsets.at,targetWidth,targetHeight);
basePosition.left+=e[0];
basePosition.top+=e[1];
return this.each(function(){
var c,using,
elem=$(this),
elemWidth=elem.outerWidth(),
elemHeight=elem.outerHeight(),
marginLeft=parseCss(this,"marginLeft"),
marginTop=parseCss(this,"marginTop"),
collisionWidth=elemWidth+marginLeft+parseCss(this,"marginRight")+scrollInfo.width,
collisionHeight=elemHeight+marginTop+parseCss(this,"marginBottom")+scrollInfo.height,
position=$.extend({},basePosition),
myOffset=getOffsets(offsets.my,elem.outerWidth(),elem.outerHeight());
if(d.my[0]==="right"){
position.left-=elemWidth;
}else if(d.my[0]==="center"){
position.left-=elemWidth/2;
}
if(d.my[1]==="bottom"){
position.top-=elemHeight;
}else if(d.my[1]==="center"){
position.top-=elemHeight/2;
}
position.left+=myOffset[0];
position.top+=myOffset[1];
if(!$.support.offsetFractions){
position.left=round(position.left);
position.top=round(position.top);
}
c={
marginLeft:marginLeft,
marginTop:marginTop
};
$.each(["left","top"],function(i,a){
if($.ui.position[collision[i]]){
$.ui.position[collision[i]][a](position,{
targetWidth:targetWidth,
targetHeight:targetHeight,
elemWidth:elemWidth,
elemHeight:elemHeight,
c:c,
collisionWidth:collisionWidth,
collisionHeight:collisionHeight,
offset:[e[0]+myOffset[0],e[1]+myOffset[1]],
my:d.my,
at:d.at,
within:within,
elem:elem
});
}
});
if(d.using){
using=function(a){
var b=targetOffset.left-position.left,
right=b+targetWidth-elemWidth,
top=targetOffset.top-position.top,
bottom=top+targetHeight-elemHeight,
feedback={
target:{
element:target,
b:targetOffset.left,
top:targetOffset.top,
width:targetWidth,
height:targetHeight
},
element:{
element:elem,
b:position.left,
top:position.top,
width:elemWidth,
height:elemHeight
},
horizontal:right<0?"left":b>0?"right":"center",
vertical:bottom<0?"top":top>0?"bottom":"middle"
};
if(targetWidth<elemWidth&&abs(b+right)<targetWidth){
feedback.horizontal="center";
}
if(targetHeight<elemHeight&&abs(top+bottom)<targetHeight){
feedback.vertical="middle";
}
if(max(abs(b),abs(right))>max(abs(top),abs(bottom))){
feedback.important="horizontal";
}else{
feedback.important="vertical";
}
d.using.call(this,a,feedback);
};
}
elem.offset($.extend(position,{using:using}));
});
};
$.ui.position={
fit:{
left:function(a,b){
var c=b.within,
withinOffset=c.isWindow?c.scrollLeft:c.offset.left,
outerWidth=c.width,
collisionPosLeft=a.left-b.collisionPosition.marginLeft,
overLeft=withinOffset-collisionPosLeft,
overRight=collisionPosLeft+b.collisionWidth-outerWidth-withinOffset,
newOverRight;
if(b.collisionWidth>outerWidth){
if(overLeft>0&&overRight<=0){
newOverRight=a.left+overLeft+b.collisionWidth-outerWidth-withinOffset;
a.left+=overLeft-newOverRight;
}else if(overRight>0&&overLeft<=0){
a.left=withinOffset;
}else{
if(overLeft>overRight){
a.left=withinOffset+outerWidth-b.collisionWidth;
}else{
a.left=withinOffset;
}
}
}else if(overLeft>0){
a.left+=overLeft;
}else if(overRight>0){
a.left-=overRight;
}else{
a.left=max(a.left-collisionPosLeft,a.left);
}
},
top:function(a,b){
var c=b.within,
withinOffset=c.isWindow?c.scrollTop:c.offset.top,
outerHeight=b.within.height,
collisionPosTop=a.top-b.collisionPosition.marginTop,
overTop=withinOffset-collisionPosTop,
overBottom=collisionPosTop+b.collisionHeight-outerHeight-withinOffset,
newOverBottom;
if(b.collisionHeight>outerHeight){
if(overTop>0&&overBottom<=0){
newOverBottom=a.top+overTop+b.collisionHeight-outerHeight-withinOffset;
a.top+=overTop-newOverBottom;
}else if(overBottom>0&&overTop<=0){
a.top=withinOffset;
}else{
if(overTop>overBottom){
a.top=withinOffset+outerHeight-b.collisionHeight;
}else{
a.top=withinOffset;
}
}
}else if(overTop>0){
a.top+=overTop;
}else if(overBottom>0){
a.top-=overBottom;
}else{
a.top=max(a.top-collisionPosTop,a.top);
}
}
},
flip:{
left:function(a,b){
var c=b.within,
withinOffset=c.offset.left+c.scrollLeft,
outerWidth=c.width,
offsetLeft=c.isWindow?c.scrollLeft:c.offset.left,
collisionPosLeft=a.left-b.collisionPosition.marginLeft,
overLeft=collisionPosLeft-offsetLeft,
overRight=collisionPosLeft+b.collisionWidth-outerWidth-offsetLeft,
myOffset=b.my[0]==="left"?
-b.elemWidth:
b.my[0]==="right"?
b.elemWidth:
0,
atOffset=b.at[0]==="left"?
b.targetWidth:
b.at[0]==="right"?
-b.targetWidth:
0,
offset=-2*b.offset[0],
newOverRight,
newOverLeft;
if(overLeft<0){
newOverRight=a.left+myOffset+atOffset+offset+b.collisionWidth-outerWidth-withinOffset;
if(newOverRight<0||newOverRight<abs(overLeft)){
a.left+=myOffset+atOffset+offset;
}
}
else if(overRight>0){
newOverLeft=a.left-b.collisionPosition.marginLeft+myOffset+atOffset+offset-offsetLeft;
if(newOverLeft>0||abs(newOverLeft)<overRight){
a.left+=myOffset+atOffset+offset;
}
}
},
top:function(a,b){
var c=b.within,
withinOffset=c.offset.top+c.scrollTop,
outerHeight=c.height,
offsetTop=c.isWindow?c.scrollTop:c.offset.top,
collisionPosTop=a.top-b.collisionPosition.marginTop,
overTop=collisionPosTop-offsetTop,
overBottom=collisionPosTop+b.collisionHeight-outerHeight-offsetTop,
top=b.my[1]==="top",
myOffset=top?
-b.elemHeight:
b.my[1]==="bottom"?
b.elemHeight:
0,
atOffset=b.at[1]==="top"?
b.targetHeight:
b.at[1]==="bottom"?
-b.targetHeight:
0,
offset=-2*b.offset[1],
newOverTop,
newOverBottom;
if(overTop<0){
newOverBottom=a.top+myOffset+atOffset+offset+b.collisionHeight-outerHeight-withinOffset;
if((a.top+myOffset+atOffset+offset)>overTop&&(newOverBottom<0||newOverBottom<abs(overTop))){
a.top+=myOffset+atOffset+offset;
}
}
else if(overBottom>0){
newOverTop=a.top-b.collisionPosition.marginTop+myOffset+atOffset+offset-offsetTop;
if((a.top+myOffset+atOffset+offset)>overBottom&&(newOverTop>0||abs(newOverTop)<overBottom)){
a.top+=myOffset+atOffset+offset;
}
}
}
},
flipfit:{
left:function(){
$.ui.position.flip.left.apply(this,arguments);
$.ui.position.fit.left.apply(this,arguments);
},
top:function(){
$.ui.position.flip.top.apply(this,arguments);
$.ui.position.fit.top.apply(this,arguments);
}
}
};
(function(){
var a,testElementParent,testElementStyle,offsetLeft,i,
body=document.getElementsByTagName("body")[0],
div=document.createElement("div");
a=document.createElement(body?"div":"body");
testElementStyle={
visibility:"hidden",
width:0,
height:0,
border:0,
margin:0,
background:"none"
};
if(body){
$.extend(testElementStyle,{
position:"absolute",
left:"-1000px",
top:"-1000px"
});
}
for(i in testElementStyle){
a.style[i]=testElementStyle[i];
}
a.appendChild(div);
testElementParent=body||document.documentElement;
testElementParent.insertBefore(a,testElementParent.firstChild);
div.style.cssText="position: absolute; left: 10.7432222px;";
offsetLeft=$(div).offset().left;
$.support.offsetFractions=offsetLeft>10&&offsetLeft<11;
a.innerHTML="";
testElementParent.removeChild(a);
})();
}(jQuery));
(function($,g){
var h=0,
hideProps={},
showProps={};
hideProps.height=hideProps.paddingTop=hideProps.paddingBottom=
hideProps.borderTopWidth=hideProps.borderBottomWidth="hide";
showProps.height=showProps.paddingTop=showProps.paddingBottom=
showProps.borderTopWidth=showProps.borderBottomWidth="show";
$.widget("ui.accordion",{
version:"1.10.4",
options:{
active:0,
animate:{},
collapsible:false,
event:"click",
header:"> li > :first-child,> :not(li):even",
heightStyle:"auto",
icons:{
activeHeader:"ui-icon-triangle-1-s",
header:"ui-icon-triangle-1-e"
},
activate:null,
beforeActivate:null
},
_create:function(){
var a=this.options;
this.prevShow=this.prevHide=$();
this.element.addClass("ui-accordion ui-widget ui-helper-reset")
.attr("role","tablist");
if(!a.collapsible&&(a.active===false||a.active==null)){
a.active=0;
}
this._processPanels();
if(a.active<0){
a.active+=this.headers.length;
}
this._refresh();
},
_getCreateEventData:function(){
return{
header:this.active,
panel:!this.active.length?$():this.active.next(),
content:!this.active.length?$():this.active.next()
};
},
_createIcons:function(){
var a=this.options.icons;
if(a){
$("<span>")
.addClass("ui-accordion-header-icon ui-icon "+a.header)
.prependTo(this.headers);
this.active.children(".ui-accordion-header-icon")
.removeClass(a.header)
.addClass(a.activeHeader);
this.headers.addClass("ui-accordion-icons");
}
},
_destroyIcons:function(){
this.headers
.removeClass("ui-accordion-icons")
.children(".ui-accordion-header-icon")
.remove();
},
_destroy:function(){
var a;
this.element
.removeClass("ui-accordion ui-widget ui-helper-reset")
.removeAttr("role");
this.headers
.removeClass("ui-accordion-header ui-accordion-header-active ui-helper-reset ui-state-default ui-corner-all ui-state-active ui-state-disabled ui-corner-top")
.removeAttr("role")
.removeAttr("aria-expanded")
.removeAttr("aria-selected")
.removeAttr("aria-controls")
.removeAttr("tabIndex")
.each(function(){
if(/^ui-accordion/.test(this.id)){
this.removeAttribute("id");
}
});
this._destroyIcons();
a=this.headers.next()
.css("display","")
.removeAttr("role")
.removeAttr("aria-hidden")
.removeAttr("aria-labelledby")
.removeClass("ui-helper-reset ui-widget-content ui-corner-bottom ui-accordion-content ui-accordion-content-active ui-state-disabled")
.each(function(){
if(/^ui-accordion/.test(this.id)){
this.removeAttribute("id");
}
});
if(this.options.heightStyle!=="content"){
a.css("height","");
}
},
_setOption:function(a,b){
if(a==="active"){
this._activate(b);
return;
}
if(a==="event"){
if(this.options.event){
this._off(this.headers,this.options.event);
}
this._setupEvents(b);
}
this._super(a,b);
if(a==="collapsible"&&!b&&this.options.active===false){
this._activate(0);
}
if(a==="icons"){
this._destroyIcons();
if(b){
this._createIcons();
}
}
if(a==="disabled"){
this.headers.add(this.headers.next())
.toggleClass("ui-state-disabled",!!b);
}
},
_keydown:function(a){
if(a.altKey||a.ctrlKey){
return;
}
var b=$.ui.keyCode,
length=this.headers.length,
currentIndex=this.headers.index(a.target),
toFocus=false;
switch(a.keyCode){
case b.RIGHT:
case b.DOWN:
toFocus=this.headers[(currentIndex+1)%length];
break;
case b.LEFT:
case b.UP:
toFocus=this.headers[(currentIndex-1+length)%length];
break;
case b.SPACE:
case b.ENTER:
this._eventHandler(a);
break;
case b.HOME:
toFocus=this.headers[0];
break;
case b.END:
toFocus=this.headers[length-1];
break;
}
if(toFocus){
$(a.target).attr("tabIndex",-1);
$(toFocus).attr("tabIndex",0);
toFocus.focus();
a.preventDefault();
}
},
_panelKeyDown:function(a){
if(a.keyCode===$.ui.keyCode.UP&&a.ctrlKey){
$(a.currentTarget).prev().focus();
}
},
refresh:function(){
var a=this.options;
this._processPanels();
if((a.active===false&&a.collapsible===true)||!this.headers.length){
a.active=false;
this.active=$();
}else if(a.active===false){
this._activate(0);
}else if(this.active.length&&!$.contains(this.element[0],this.active[0])){
if(this.headers.length===this.headers.find(".ui-state-disabled").length){
a.active=false;
this.active=$();
}else{
this._activate(Math.max(0,a.active-1));
}
}else{
a.active=this.headers.index(this.active);
}
this._destroyIcons();
this._refresh();
},
_processPanels:function(){
this.headers=this.element.find(this.options.header)
.addClass("ui-accordion-header ui-helper-reset ui-state-default ui-corner-all");
this.headers.next()
.addClass("ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom")
.filter(":not(.ui-accordion-content-active)")
.hide();
},
_refresh:function(){
var b,
options=this.options,
heightStyle=options.heightStyle,
parent=this.element.parent(),
accordionId=this.accordionId="ui-accordion-"+
(this.element.attr("id")||++h);
this.active=this._findActive(options.active)
.addClass("ui-accordion-header-active ui-state-active ui-corner-top")
.removeClass("ui-corner-all");
this.active.next()
.addClass("ui-accordion-content-active")
.show();
this.headers
.attr("role","tab")
.each(function(i){
var a=$(this),
headerId=a.attr("id"),
panel=a.next(),
panelId=panel.attr("id");
if(!headerId){
headerId=accordionId+"-header-"+i;
a.attr("id",headerId);
}
if(!panelId){
panelId=accordionId+"-panel-"+i;
panel.attr("id",panelId);
}
a.attr("aria-controls",panelId);
panel.attr("aria-labelledby",headerId);
})
.next()
.attr("role","tabpanel");
this.headers
.not(this.active)
.attr({
"aria-selected":"false",
"aria-expanded":"false",
tabIndex:-1
})
.next()
.attr({
"aria-hidden":"true"
})
.hide();
if(!this.active.length){
this.headers.eq(0).attr("tabIndex",0);
}else{
this.active.attr({
"aria-selected":"true",
"aria-expanded":"true",
tabIndex:0
})
.next()
.attr({
"aria-hidden":"false"
});
}
this._createIcons();
this._setupEvents(options.event);
if(heightStyle==="fill"){
b=parent.height();
this.element.siblings(":visible").each(function(){
var a=$(this),
position=a.css("position");
if(position==="absolute"||position==="fixed"){
return;
}
b-=a.outerHeight(true);
});
this.headers.each(function(){
b-=$(this).outerHeight(true);
});
this.headers.next()
.each(function(){
$(this).height(Math.max(0,b-
$(this).innerHeight()+$(this).height()));
})
.css("overflow","auto");
}else if(heightStyle==="auto"){
b=0;
this.headers.next()
.each(function(){
b=Math.max(b,$(this).css("height","").height());
})
.height(b);
}
},
_activate:function(a){
var b=this._findActive(a)[0];
if(b===this.active[0]){
return;
}
b=b||this.active[0];
this._eventHandler({
target:b,
currentTarget:b,
preventDefault:$.noop
});
},
_findActive:function(a){
return typeof a==="number"?this.headers.eq(a):$();
},
_setupEvents:function(c){
var d={
keydown:"_keydown"
};
if(c){
$.each(c.split(" "),function(a,b){
d[b]="_eventHandler";
});
}
this._off(this.headers.add(this.headers.next()));
this._on(this.headers,d);
this._on(this.headers.next(),{keydown:"_panelKeyDown"});
this._hoverable(this.headers);
this._focusable(this.headers);
},
_eventHandler:function(a){
var b=this.options,
active=this.active,
clicked=$(a.currentTarget),
clickedIsActive=clicked[0]===active[0],
collapsing=clickedIsActive&&b.collapsible,
toShow=collapsing?$():clicked.next(),
toHide=active.next(),
eventData={
oldHeader:active,
oldPanel:toHide,
newHeader:collapsing?$():clicked,
newPanel:toShow
};
a.preventDefault();
if(
(clickedIsActive&&!b.collapsible)||
(this._trigger("beforeActivate",a,eventData)===false)){
return;
}
b.active=collapsing?false:this.headers.index(clicked);
this.active=clickedIsActive?$():clicked;
this._toggle(eventData);
active.removeClass("ui-accordion-header-active ui-state-active");
if(b.icons){
active.children(".ui-accordion-header-icon")
.removeClass(b.icons.activeHeader)
.addClass(b.icons.header);
}
if(!clickedIsActive){
clicked
.removeClass("ui-corner-all")
.addClass("ui-accordion-header-active ui-state-active ui-corner-top");
if(b.icons){
clicked.children(".ui-accordion-header-icon")
.removeClass(b.icons.header)
.addClass(b.icons.activeHeader);
}
clicked
.next()
.addClass("ui-accordion-content-active");
}
},
_toggle:function(a){
var b=a.newPanel,
toHide=this.prevShow.length?this.prevShow:a.oldPanel;
this.prevShow.add(this.prevHide).stop(true,true);
this.prevShow=b;
this.prevHide=toHide;
if(this.options.animate){
this._animate(b,toHide,a);
}else{
toHide.hide();
b.show();
this._toggleComplete(a);
}
toHide.attr({
"aria-hidden":"true"
});
toHide.prev().attr("aria-selected","false");
if(b.length&&toHide.length){
toHide.prev().attr({
"tabIndex":-1,
"aria-expanded":"false"
});
}else if(b.length){
this.headers.filter(function(){
return $(this).attr("tabIndex")===0;
})
.attr("tabIndex",-1);
}
b
.attr("aria-hidden","false")
.prev()
.attr({
"aria-selected":"true",
tabIndex:0,
"aria-expanded":"true"
});
},
_animate:function(c,d,e){
var f,easing,duration,
that=this,
adjust=0,
down=c.length&&
(!d.length||(c.index()<d.index())),
animate=this.options.animate||{},
options=down&&animate.down||animate,
complete=function(){
that._toggleComplete(e);
};
if(typeof options==="number"){
duration=options;
}
if(typeof options==="string"){
easing=options;
}
easing=easing||options.easing||animate.easing;
duration=duration||options.duration||animate.duration;
if(!d.length){
return c.animate(showProps,duration,easing,complete);
}
if(!c.length){
return d.animate(hideProps,duration,easing,complete);
}
f=c.show().outerHeight();
d.animate(hideProps,{
duration:duration,
easing:easing,
step:function(a,b){
b.now=Math.round(a);
}
});
c
.hide()
.animate(showProps,{
duration:duration,
easing:easing,
complete:complete,
step:function(a,b){
b.now=Math.round(a);
if(b.prop!=="height"){
adjust+=b.now;
}else if(that.options.heightStyle!=="content"){
b.now=Math.round(f-d.outerHeight()-adjust);
adjust=0;
}
}
});
},
_toggleComplete:function(a){
var b=a.oldPanel;
b
.removeClass("ui-accordion-content-active")
.prev()
.removeClass("ui-corner-top")
.addClass("ui-corner-all");
if(b.length){
b.parent()[0].className=b.parent()[0].className;
}
this._trigger("activate",null,a);
}
});
})(jQuery);
(function($,f){
$.widget("ui.autocomplete",{
version:"1.10.4",
defaultElement:"<input>",
options:{
appendTo:null,
autoFocus:false,
delay:300,
minLength:1,
position:{
my:"left top",
at:"left bottom",
collision:"none"
},
source:null,
change:null,
close:null,
focus:null,
open:null,
response:null,
search:null,
select:null
},
requestIndex:0,
pending:0,
_create:function(){
var e,suppressKeyPressRepeat,suppressInput,
nodeName=this.element[0].nodeName.toLowerCase(),
isTextarea=nodeName==="textarea",
isInput=nodeName==="input";
this.isMultiLine=
isTextarea?true:
isInput?false:
this.element.prop("isContentEditable");
this.valueMethod=this.element[isTextarea||isInput?"val":"text"];
this.isNewMenu=true;
this.element
.addClass("ui-autocomplete-input")
.attr("autocomplete","off");
this._on(this.element,{
keydown:function(a){
if(this.element.prop("readOnly")){
e=true;
suppressInput=true;
suppressKeyPressRepeat=true;
return;
}
e=false;
suppressInput=false;
suppressKeyPressRepeat=false;
var b=$.ui.keyCode;
switch(a.keyCode){
case b.PAGE_UP:
e=true;
this._move("previousPage",a);
break;
case b.PAGE_DOWN:
e=true;
this._move("nextPage",a);
break;
case b.UP:
e=true;
this._keyEvent("previous",a);
break;
case b.DOWN:
e=true;
this._keyEvent("next",a);
break;
case b.ENTER:
case b.NUMPAD_ENTER:
if(this.menu.active){
e=true;
a.preventDefault();
this.menu.select(a);
}
break;
case b.TAB:
if(this.menu.active){
this.menu.select(a);
}
break;
case b.ESCAPE:
if(this.menu.element.is(":visible")){
this._value(this.term);
this.close(a);
a.preventDefault();
}
break;
default:
suppressKeyPressRepeat=true;
this._searchTimeout(a);
break;
}
},
keypress:function(a){
if(e){
e=false;
if(!this.isMultiLine||this.menu.element.is(":visible")){
a.preventDefault();
}
return;
}
if(suppressKeyPressRepeat){
return;
}
var b=$.ui.keyCode;
switch(a.keyCode){
case b.PAGE_UP:
this._move("previousPage",a);
break;
case b.PAGE_DOWN:
this._move("nextPage",a);
break;
case b.UP:
this._keyEvent("previous",a);
break;
case b.DOWN:
this._keyEvent("next",a);
break;
}
},
input:function(a){
if(suppressInput){
suppressInput=false;
a.preventDefault();
return;
}
this._searchTimeout(a);
},
focus:function(){
this.selectedItem=null;
this.previous=this._value();
},
blur:function(a){
if(this.cancelBlur){
delete this.cancelBlur;
return;
}
clearTimeout(this.searching);
this.close(a);
this._change(a);
}
});
this._initSource();
this.menu=$("<ul>")
.addClass("ui-autocomplete ui-front")
.appendTo(this._appendTo())
.menu({
role:null
})
.hide()
.data("ui-menu");
this._on(this.menu.element,{
mousedown:function(c){
c.preventDefault();
this.cancelBlur=true;
this._delay(function(){
delete this.cancelBlur;
});
var d=this.menu.element[0];
if(!$(c.target).closest(".ui-menu-item").length){
this._delay(function(){
var b=this;
this.document.one("mousedown",function(a){
if(a.target!==b.element[0]&&
a.target!==d&&
!$.contains(d,a.target)){
b.close();
}
});
});
}
},
menufocus:function(a,b){
if(this.isNewMenu){
this.isNewMenu=false;
if(a.originalEvent&&/^mouse/.test(a.originalEvent.type)){
this.menu.blur();
this.document.one("mousemove",function(){
$(a.target).trigger(a.originalEvent);
});
return;
}
}
var c=b.item.data("ui-autocomplete-item");
if(false!==this._trigger("focus",a,{item:c})){
if(a.originalEvent&&/^key/.test(a.originalEvent.type)){
this._value(c.value);
}
}else{
this.liveRegion.text(c.value);
}
},
menuselect:function(a,b){
var c=b.item.data("ui-autocomplete-item"),
previous=this.previous;
if(this.element[0]!==this.document[0].activeElement){
this.element.focus();
this.previous=previous;
this._delay(function(){
this.previous=previous;
this.selectedItem=c;
});
}
if(false!==this._trigger("select",a,{item:c})){
this._value(c.value);
}
this.term=this._value();
this.close(a);
this.selectedItem=c;
}
});
this.liveRegion=$("<span>",{
role:"status",
"aria-live":"polite"
})
.addClass("ui-helper-hidden-accessible")
.insertBefore(this.element);
this._on(this.window,{
beforeunload:function(){
this.element.removeAttr("autocomplete");
}
});
},
_destroy:function(){
clearTimeout(this.searching);
this.element
.removeClass("ui-autocomplete-input")
.removeAttr("autocomplete");
this.menu.element.remove();
this.liveRegion.remove();
},
_setOption:function(a,b){
this._super(a,b);
if(a==="source"){
this._initSource();
}
if(a==="appendTo"){
this.menu.element.appendTo(this._appendTo());
}
if(a==="disabled"&&b&&this.xhr){
this.xhr.abort();
}
},
_appendTo:function(){
var a=this.options.appendTo;
if(a){
a=a.jquery||a.nodeType?
$(a):
this.document.find(a).eq(0);
}
if(!a){
a=this.element.closest(".ui-front");
}
if(!a.length){
a=this.document[0].body;
}
return a;
},
_initSource:function(){
var d,url,
that=this;
if($.isArray(this.options.source)){
d=this.options.source;
this.source=function(a,b){
b($.ui.autocomplete.filter(d,a.term));
};
}else if(typeof this.options.source==="string"){
url=this.options.source;
this.source=function(b,c){
if(that.xhr){
that.xhr.abort();
}
that.xhr=$.ajax({
url:url,
data:b,
dataType:"json",
success:function(a){
c(a);
},
error:function(){
c([]);
}
});
};
}else{
this.source=this.options.source;
}
},
_searchTimeout:function(a){
clearTimeout(this.searching);
this.searching=this._delay(function(){
if(this.term!==this._value()){
this.selectedItem=null;
this.search(null,a);
}
},this.options.delay);
},
search:function(a,b){
a=a!=null?a:this._value();
this.term=this._value();
if(a.length<this.options.minLength){
return this.close(b);
}
if(this._trigger("search",b)===false){
return;
}
return this._search(a);
},
_search:function(a){
this.pending++;
this.element.addClass("ui-autocomplete-loading");
this.cancelSearch=false;
this.source({term:a},this._response());
},
_response:function(){
var b=++this.requestIndex;
return $.proxy(function(a){
if(b===this.requestIndex){
this.__response(a);
}
this.pending--;
if(!this.pending){
this.element.removeClass("ui-autocomplete-loading");
}
},this);
},
__response:function(a){
if(a){
a=this._normalize(a);
}
this._trigger("response",null,{content:a});
if(!this.options.disabled&&a&&a.length&&!this.cancelSearch){
this._suggest(a);
this._trigger("open");
}else{
this._close();
}
},
close:function(a){
this.cancelSearch=true;
this._close(a);
},
_close:function(a){
if(this.menu.element.is(":visible")){
this.menu.element.hide();
this.menu.blur();
this.isNewMenu=true;
this._trigger("close",a);
}
},
_change:function(a){
if(this.previous!==this._value()){
this._trigger("change",a,{item:this.selectedItem});
}
},
_normalize:function(b){
if(b.length&&b[0].label&&b[0].value){
return b;
}
return $.map(b,function(a){
if(typeof a==="string"){
return{
label:a,
value:a
};
}
return $.extend({
label:a.label||a.value,
value:a.value||a.label
},a);
});
},
_suggest:function(a){
var b=this.menu.element.empty();
this._renderMenu(b,a);
this.isNewMenu=true;
this.menu.refresh();
b.show();
this._resizeMenu();
b.position($.extend({
of:this.element
},this.options.position));
if(this.options.autoFocus){
this.menu.next();
}
},
_resizeMenu:function(){
var a=this.menu.element;
a.outerWidth(Math.max(
a.width("").outerWidth()+1,
this.element.outerWidth()
));
},
_renderMenu:function(c,d){
var e=this;
$.each(d,function(a,b){
e._renderItemData(c,b);
});
},
_renderItemData:function(a,b){
return this._renderItem(a,b).data("ui-autocomplete-item",b);
},
_renderItem:function(a,b){
return $("<li>")
.append($("<a>").text(b.label))
.appendTo(a);
},
_move:function(a,b){
if(!this.menu.element.is(":visible")){
this.search(null,b);
return;
}
if(this.menu.isFirstItem()&&/^previous/.test(a)||
this.menu.isLastItem()&&/^next/.test(a)){
this._value(this.term);
this.menu.blur();
return;
}
this.menu[a](b);
},
widget:function(){
return this.menu.element;
},
_value:function(){
return this.valueMethod.apply(this.element,arguments);
},
_keyEvent:function(a,b){
if(!this.isMultiLine||this.menu.element.is(":visible")){
this._move(a,b);
b.preventDefault();
}
}
});
$.extend($.ui.autocomplete,{
escapeRegex:function(a){
return a.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&");
},
filter:function(b,c){
var d=new RegExp($.ui.autocomplete.escapeRegex(c),"i");
return $.grep(b,function(a){
return d.test(a.label||a.value||a);
});
}
});
$.widget("ui.autocomplete",$.ui.autocomplete,{
options:{
messages:{
noResults:"No search results.",
results:function(a){
return a+(a>1?" results are":" result is")+
" available, use up and down arrow keys to navigate.";
}
}
},
__response:function(a){
var b;
this._superApply(arguments);
if(this.options.disabled||this.cancelSearch){
return;
}
if(a&&a.length){
b=this.options.messages.results(a.length);
}else{
b=this.options.messages.noResults;
}
this.liveRegion.text(b);
}
});
}(jQuery));
(function($,c){
var d,
baseClasses="ui-button ui-widget ui-state-default ui-corner-all",
typeClasses="ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only",
formResetHandler=function(){
var a=$(this);
setTimeout(function(){
a.find(":ui-button").button("refresh");
},1);
},
radioGroup=function(a){
var b=a.name,
form=a.form,
radios=$([]);
if(b){
b=b.replace(/'/g,"\\'");
if(form){
radios=$(form).find("[name='"+b+"']");
}else{
radios=$("[name='"+b+"']",a.ownerDocument)
.filter(function(){
return!this.form;
});
}
}
return radios;
};
$.widget("ui.button",{
version:"1.10.4",
defaultElement:"<button>",
options:{
disabled:null,
text:true,
label:null,
icons:{
primary:null,
secondary:null
}
},
_create:function(){
this.element.closest("form")
.unbind("reset"+this.eventNamespace)
.bind("reset"+this.eventNamespace,formResetHandler);
if(typeof this.options.disabled!=="boolean"){
this.options.disabled=!!this.element.prop("disabled");
}else{
this.element.prop("disabled",this.options.disabled);
}
this._determineButtonType();
this.hasTitle=!!this.buttonElement.attr("title");
var b=this,
options=this.options,
toggleButton=this.type==="checkbox"||this.type==="radio",
activeClass=!toggleButton?"ui-state-active":"";
if(options.label===null){
options.label=(this.type==="input"?this.buttonElement.val():this.buttonElement.html());
}
this._hoverable(this.buttonElement);
this.buttonElement
.addClass(baseClasses)
.attr("role","button")
.bind("mouseenter"+this.eventNamespace,function(){
if(options.disabled){
return;
}
if(this===d){
$(this).addClass("ui-state-active");
}
})
.bind("mouseleave"+this.eventNamespace,function(){
if(options.disabled){
return;
}
$(this).removeClass(activeClass);
})
.bind("click"+this.eventNamespace,function(a){
if(options.disabled){
a.preventDefault();
a.stopImmediatePropagation();
}
});
this._on({
focus:function(){
this.buttonElement.addClass("ui-state-focus");
},
blur:function(){
this.buttonElement.removeClass("ui-state-focus");
}
});
if(toggleButton){
this.element.bind("change"+this.eventNamespace,function(){
b.refresh();
});
}
if(this.type==="checkbox"){
this.buttonElement.bind("click"+this.eventNamespace,function(){
if(options.disabled){
return false;
}
});
}else if(this.type==="radio"){
this.buttonElement.bind("click"+this.eventNamespace,function(){
if(options.disabled){
return false;
}
$(this).addClass("ui-state-active");
b.buttonElement.attr("aria-pressed","true");
var a=b.element[0];
radioGroup(a)
.not(a)
.map(function(){
return $(this).button("widget")[0];
})
.removeClass("ui-state-active")
.attr("aria-pressed","false");
});
}else{
this.buttonElement
.bind("mousedown"+this.eventNamespace,function(){
if(options.disabled){
return false;
}
$(this).addClass("ui-state-active");
d=this;
b.document.one("mouseup",function(){
d=null;
});
})
.bind("mouseup"+this.eventNamespace,function(){
if(options.disabled){
return false;
}
$(this).removeClass("ui-state-active");
})
.bind("keydown"+this.eventNamespace,function(a){
if(options.disabled){
return false;
}
if(a.keyCode===$.ui.keyCode.SPACE||a.keyCode===$.ui.keyCode.ENTER){
$(this).addClass("ui-state-active");
}
})
.bind("keyup"+this.eventNamespace+" blur"+this.eventNamespace,function(){
$(this).removeClass("ui-state-active");
});
if(this.buttonElement.is("a")){
this.buttonElement.keyup(function(a){
if(a.keyCode===$.ui.keyCode.SPACE){
$(this).click();
}
});
}
}
this._setOption("disabled",options.disabled);
this._resetButton();
},
_determineButtonType:function(){
var a,labelSelector,checked;
if(this.element.is("[type=checkbox]")){
this.type="checkbox";
}else if(this.element.is("[type=radio]")){
this.type="radio";
}else if(this.element.is("input")){
this.type="input";
}else{
this.type="button";
}
if(this.type==="checkbox"||this.type==="radio"){
a=this.element.parents().last();
labelSelector="label[for='"+this.element.attr("id")+"']";
this.buttonElement=a.find(labelSelector);
if(!this.buttonElement.length){
a=a.length?a.siblings():this.element.siblings();
this.buttonElement=a.filter(labelSelector);
if(!this.buttonElement.length){
this.buttonElement=a.find(labelSelector);
}
}
this.element.addClass("ui-helper-hidden-accessible");
checked=this.element.is(":checked");
if(checked){
this.buttonElement.addClass("ui-state-active");
}
this.buttonElement.prop("aria-pressed",checked);
}else{
this.buttonElement=this.element;
}
},
widget:function(){
return this.buttonElement;
},
_destroy:function(){
this.element
.removeClass("ui-helper-hidden-accessible");
this.buttonElement
.removeClass(baseClasses+" ui-state-active "+typeClasses)
.removeAttr("role")
.removeAttr("aria-pressed")
.html(this.buttonElement.find(".ui-button-text").html());
if(!this.hasTitle){
this.buttonElement.removeAttr("title");
}
},
_setOption:function(a,b){
this._super(a,b);
if(a==="disabled"){
this.element.prop("disabled",!!b);
if(b){
this.buttonElement.removeClass("ui-state-focus");
}
return;
}
this._resetButton();
},
refresh:function(){
var a=this.element.is("input, button")?this.element.is(":disabled"):this.element.hasClass("ui-button-disabled");
if(a!==this.options.disabled){
this._setOption("disabled",a);
}
if(this.type==="radio"){
radioGroup(this.element[0]).each(function(){
if($(this).is(":checked")){
$(this).button("widget")
.addClass("ui-state-active")
.attr("aria-pressed","true");
}else{
$(this).button("widget")
.removeClass("ui-state-active")
.attr("aria-pressed","false");
}
});
}else if(this.type==="checkbox"){
if(this.element.is(":checked")){
this.buttonElement
.addClass("ui-state-active")
.attr("aria-pressed","true");
}else{
this.buttonElement
.removeClass("ui-state-active")
.attr("aria-pressed","false");
}
}
},
_resetButton:function(){
if(this.type==="input"){
if(this.options.label){
this.element.val(this.options.label);
}
return;
}
var a=this.buttonElement.removeClass(typeClasses),
buttonText=$("<span></span>",this.document[0])
.addClass("ui-button-text")
.html(this.options.label)
.appendTo(a.empty())
.text(),
icons=this.options.icons,
multipleIcons=icons.primary&&icons.secondary,
buttonClasses=[];
if(icons.primary||icons.secondary){
if(this.options.text){
buttonClasses.push("ui-button-text-icon"+(multipleIcons?"s":(icons.primary?"-primary":"-secondary")));
}
if(icons.primary){
a.prepend("<span class='ui-button-icon-primary ui-icon "+icons.primary+"'></span>");
}
if(icons.secondary){
a.append("<span class='ui-button-icon-secondary ui-icon "+icons.secondary+"'></span>");
}
if(!this.options.text){
buttonClasses.push(multipleIcons?"ui-button-icons-only":"ui-button-icon-only");
if(!this.hasTitle){
a.attr("title",$.trim(buttonText));
}
}
}else{
buttonClasses.push("ui-button-text-only");
}
a.addClass(buttonClasses.join(" "));
}
});
$.widget("ui.buttonset",{
version:"1.10.4",
options:{
items:"button, input[type=button], input[type=submit], input[type=reset], input[type=checkbox], input[type=radio], a, :data(ui-button)"
},
_create:function(){
this.element.addClass("ui-buttonset");
},
_init:function(){
this.refresh();
},
_setOption:function(a,b){
if(a==="disabled"){
this.buttons.button("option",a,b);
}
this._super(a,b);
},
refresh:function(){
var a=this.element.css("direction")==="rtl";
this.buttons=this.element.find(this.options.items)
.filter(":ui-button")
.button("refresh")
.end()
.not(":ui-button")
.button()
.end()
.map(function(){
return $(this).button("widget")[0];
})
.removeClass("ui-corner-all ui-corner-left ui-corner-right")
.filter(":first")
.addClass(a?"ui-corner-right":"ui-corner-left")
.end()
.filter(":last")
.addClass(a?"ui-corner-left":"ui-corner-right")
.end()
.end();
},
_destroy:function(){
this.element.removeClass("ui-buttonset");
this.buttons
.map(function(){
return $(this).button("widget")[0];
})
.removeClass("ui-corner-left ui-corner-right")
.end()
.button("destroy");
}
});
}(jQuery));
(function($,m){
$.extend($.ui,{datepicker:{version:"1.10.4"}});
var n="datepicker",
instActive;

function Datepicker(){
this._curInst=null;this._keyEvent=false;this._disabledInputs=[];this._datepickerShowing=false;this._inDialog=false;this._mainDivId="ui-datepicker-div";this._inlineClass="ui-datepicker-inline";this._appendClass="ui-datepicker-append";this._triggerClass="ui-datepicker-trigger";this._dialogClass="ui-datepicker-dialog";this._disableClass="ui-datepicker-disabled";this._unselectableClass="ui-datepicker-unselectable";this._currentClass="ui-datepicker-current-day";this._dayOverClass="ui-datepicker-days-cell-over";this.regional=[];this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June",
"July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:false,showMonthAfterYear:false,yearSuffix:""};
this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:false,hideIfNoPrevNext:false,navigationAsDateFormat:false,gotoCurrent:false,changeMonth:false,changeYear:false,yearRange:"c-10:c+10",showOtherMonths:false,selectOtherMonths:false,showWeek:false,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:true,showButtonPanel:false,autoSize:false,disabled:false};
$.extend(this._defaults,this.regional[""]);
this.dpDiv=bindHover($("<div id='"+this._mainDivId+"' class='ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>"));
}
$.extend(Datepicker.prototype,{

markerClassName:"hasDatepicker",
maxRows:4,
_widgetDatepicker:function(){
return this.dpDiv;
},

setDefaults:function(a){
extendRemove(this._defaults,a||{});
return this;
},

_attachDatepicker:function(a,b){
var c,inline,inst;
c=a.nodeName.toLowerCase();
inline=(c==="div"||c==="span");
if(!a.id){
this.uuid+=1;
a.id="dp"+this.uuid;
}
inst=this._newInst($(a),inline);
inst.settings=$.extend({},b||{});
if(c==="input"){
this._connectDatepicker(a,inst);
}else if(inline){
this._inlineDatepicker(a,inst);
}
},

_newInst:function(a,b){
var c=a[0].id.replace(/([^A-Za-z0-9_\-])/g,"\\\\$1");return{id:c,input:a,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:b,dpDiv:(!b?this.dpDiv:bindHover($("<div class='"+this._inlineClass+" ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>")))};
},

_connectDatepicker:function(a,b){
var c=$(a);
b.append=$([]);
b.trigger=$([]);
if(c.hasClass(this.markerClassName)){
return;
}
this._attachments(c,b);
c.addClass(this.markerClassName).keydown(this._doKeyDown).
keypress(this._doKeyPress).keyup(this._doKeyUp);
this._autoSize(b);
$.data(a,n,b);
if(b.settings.disabled){
this._disableDatepicker(a);
}
},

_attachments:function(a,b){
var c,buttonText,buttonImage,
appendText=this._get(b,"appendText"),
isRTL=this._get(b,"isRTL");
if(b.append){
b.append.remove();
}
if(appendText){
b.append=$("<span class='"+this._appendClass+"'>"+appendText+"</span>");
a[isRTL?"before":"after"](b.append);
}
a.unbind("focus",this._showDatepicker);
if(b.trigger){
b.trigger.remove();
}
c=this._get(b,"showOn");
if(c==="focus"||c==="both"){a.focus(this._showDatepicker);
}
if(c==="button"||c==="both"){buttonText=this._get(b,"buttonText");
buttonImage=this._get(b,"buttonImage");
b.trigger=$(this._get(b,"buttonImageOnly")?
$("<img/>").addClass(this._triggerClass).
attr({src:buttonImage,alt:buttonText,title:buttonText}):
$("<button type='button'></button>").addClass(this._triggerClass).
html(!buttonImage?buttonText:$("<img/>").attr(
{src:buttonImage,alt:buttonText,title:buttonText})));
a[isRTL?"before":"after"](b.trigger);
b.trigger.click(function(){
if($.datepicker._datepickerShowing&&$.datepicker._lastInput===a[0]){
$.datepicker._hideDatepicker();
}else if($.datepicker._datepickerShowing&&$.datepicker._lastInput!==a[0]){
$.datepicker._hideDatepicker();
$.datepicker._showDatepicker(a[0]);
}else{
$.datepicker._showDatepicker(a[0]);
}
return false;
});
}
},

_autoSize:function(b){
if(this._get(b,"autoSize")&&!b.inline){
var c,max,maxI,i,
date=new Date(2009,12-1,20),dateFormat=this._get(b,"dateFormat");
if(dateFormat.match(/[DM]/)){
c=function(a){
max=0;
maxI=0;
for(i=0;i<a.length;i++){
if(a[i].length>max){
max=a[i].length;
maxI=i;
}
}
return maxI;
};
date.setMonth(c(this._get(b,(dateFormat.match(/MM/)?
"monthNames":"monthNamesShort"))));
date.setDate(c(this._get(b,(dateFormat.match(/DD/)?
"dayNames":"dayNamesShort")))+20-date.getDay());
}
b.input.attr("size",this._formatDate(b,date).length);
}
},

_inlineDatepicker:function(a,b){
var c=$(a);
if(c.hasClass(this.markerClassName)){
return;
}
c.addClass(this.markerClassName).append(b.dpDiv);
$.data(a,n,b);
this._setDate(b,this._getDefaultDate(b),true);
this._updateDatepicker(b);
this._updateAlternate(b);
if(b.settings.disabled){
this._disableDatepicker(a);
}
b.dpDiv.css("display","block");
},

_dialogDatepicker:function(a,b,c,d,e){
var f,browserWidth,browserHeight,scrollX,scrollY,
inst=this._dialogInst;if(!inst){
this.uuid+=1;
f="dp"+this.uuid;
this._dialogInput=$("<input type='text' id='"+f+
"' style='position: absolute; top: -100px; width: 0px;'/>");
this._dialogInput.keydown(this._doKeyDown);
$("body").append(this._dialogInput);
inst=this._dialogInst=this._newInst(this._dialogInput,false);
inst.settings={};
$.data(this._dialogInput[0],n,inst);
}
extendRemove(inst.settings,d||{});
b=(b&&b.constructor===Date?this._formatDate(inst,b):b);
this._dialogInput.val(b);
this._pos=(e?(e.length?e:[e.pageX,e.pageY]):null);
if(!this._pos){
browserWidth=document.documentElement.clientWidth;
browserHeight=document.documentElement.clientHeight;
scrollX=document.documentElement.scrollLeft||document.body.scrollLeft;
scrollY=document.documentElement.scrollTop||document.body.scrollTop;
this._pos=[(browserWidth/2)-100+scrollX,(browserHeight/2)-150+scrollY];
}
this._dialogInput.css("left",(this._pos[0]+20)+"px").css("top",this._pos[1]+"px");
inst.settings.onSelect=c;
this._inDialog=true;
this.dpDiv.addClass(this._dialogClass);
this._showDatepicker(this._dialogInput[0]);
if($.blockUI){
$.blockUI(this.dpDiv);
}
$.data(this._dialogInput[0],n,inst);
return this;
},

_destroyDatepicker:function(a){
var b,
$target=$(a),
inst=$.data(a,n);
if(!$target.hasClass(this.markerClassName)){
return;
}
b=a.nodeName.toLowerCase();
$.removeData(a,n);
if(b==="input"){
inst.append.remove();
inst.trigger.remove();
$target.removeClass(this.markerClassName).
unbind("focus",this._showDatepicker).
unbind("keydown",this._doKeyDown).
unbind("keypress",this._doKeyPress).
unbind("keyup",this._doKeyUp);
}else if(b==="div"||b==="span"){
$target.removeClass(this.markerClassName).empty();
}
},

_enableDatepicker:function(b){
var c,inline,
$target=$(b),
inst=$.data(b,n);
if(!$target.hasClass(this.markerClassName)){
return;
}
c=b.nodeName.toLowerCase();
if(c==="input"){
b.disabled=false;
inst.trigger.filter("button").
each(function(){this.disabled=false}).end().
filter("img").css({opacity:"1.0",cursor:""});
}else if(c==="div"||c==="span"){
inline=$target.children("."+this._inlineClass);
inline.children().removeClass("ui-state-disabled");
inline.find("select.ui-datepicker-month, select.ui-datepicker-year").
prop("disabled",false);
}
this._disabledInputs=$.map(this._disabledInputs,
function(a){return(a===b?null:a)})},

_disableDatepicker:function(b){
var c,inline,
$target=$(b),
inst=$.data(b,n);
if(!$target.hasClass(this.markerClassName)){
return;
}
c=b.nodeName.toLowerCase();
if(c==="input"){
b.disabled=true;
inst.trigger.filter("button").
each(function(){this.disabled=true}).end().
filter("img").css({opacity:"0.5",cursor:"default"});
}else if(c==="div"||c==="span"){
inline=$target.children("."+this._inlineClass);
inline.children().addClass("ui-state-disabled");
inline.find("select.ui-datepicker-month, select.ui-datepicker-year").
prop("disabled",true);
}
this._disabledInputs=$.map(this._disabledInputs,
function(a){return(a===b?null:a)});this._disabledInputs[this._disabledInputs.length]=b;
},

_isDisabledDatepicker:function(a){
if(!a){
return false;
}
for(var i=0;i<this._disabledInputs.length;i++){
if(this._disabledInputs[i]===a){
return true;
}
}
return false;
},

_getInst:function(a){
try{
return $.data(a,n);
}
catch(err){
throw"Missing instance data for this datepicker";
}
},

_optionDatepicker:function(a,b,c){
var d,date,minDate,maxDate,
inst=this._getInst(a);
if(arguments.length===2&&typeof b==="string"){
return(b==="defaults"?$.extend({},$.datepicker._defaults):
(inst?(b==="all"?$.extend({},inst.settings):
this._get(inst,b)):null));
}
d=b||{};
if(typeof b==="string"){
d={};
d[b]=c;
}
if(inst){
if(this._curInst===inst){
this._hideDatepicker();
}
date=this._getDateDatepicker(a,true);
minDate=this._getMinMaxDate(inst,"min");
maxDate=this._getMinMaxDate(inst,"max");
extendRemove(inst.settings,d);
if(minDate!==null&&d.dateFormat!==m&&d.minDate===m){
inst.settings.minDate=this._formatDate(inst,minDate);
}
if(maxDate!==null&&d.dateFormat!==m&&d.maxDate===m){
inst.settings.maxDate=this._formatDate(inst,maxDate);
}
if("disabled"in d){
if(d.disabled){
this._disableDatepicker(a);
}else{
this._enableDatepicker(a);
}
}
this._attachments($(a),inst);
this._autoSize(inst);
this._setDate(inst,date);
this._updateAlternate(inst);
this._updateDatepicker(inst);
}
},
_changeDatepicker:function(a,b,c){
this._optionDatepicker(a,b,c);
},

_refreshDatepicker:function(a){
var b=this._getInst(a);
if(b){
this._updateDatepicker(b);
}
},

_setDateDatepicker:function(a,b){
var c=this._getInst(a);
if(c){
this._setDate(c,b);
this._updateDatepicker(c);
this._updateAlternate(c);
}
},

_getDateDatepicker:function(a,b){
var c=this._getInst(a);
if(c&&!c.inline){
this._setDateFromField(c,b);
}
return(c?this._getDate(c):null);
},

_doKeyDown:function(a){
var b,dateStr,sel,
inst=$.datepicker._getInst(a.target),
handled=true,
isRTL=inst.dpDiv.is(".ui-datepicker-rtl");
inst._keyEvent=true;
if($.datepicker._datepickerShowing){
switch(a.keyCode){
case 9:$.datepicker._hideDatepicker();
handled=false;
break;case 13:sel=$("td."+$.datepicker._dayOverClass+":not(."+
$.datepicker._currentClass+")",inst.dpDiv);
if(sel[0]){
$.datepicker._selectDay(a.target,inst.selectedMonth,inst.selectedYear,sel[0]);
}
b=$.datepicker._get(inst,"onSelect");
if(b){
dateStr=$.datepicker._formatDate(inst);
b.apply((inst.input?inst.input[0]:null),[dateStr,inst]);
}else{
$.datepicker._hideDatepicker();
}
return false;case 27:$.datepicker._hideDatepicker();
break;case 33:$.datepicker._adjustDate(a.target,(a.ctrlKey?
-$.datepicker._get(inst,"stepBigMonths"):
-$.datepicker._get(inst,"stepMonths")),"M");
break;case 34:$.datepicker._adjustDate(a.target,(a.ctrlKey?
+$.datepicker._get(inst,"stepBigMonths"):
+$.datepicker._get(inst,"stepMonths")),"M");
break;case 35:if(a.ctrlKey||a.metaKey){
$.datepicker._clearDate(a.target);
}
handled=a.ctrlKey||a.metaKey;
break;case 36:if(a.ctrlKey||a.metaKey){
$.datepicker._gotoToday(a.target);
}
handled=a.ctrlKey||a.metaKey;
break;case 37:if(a.ctrlKey||a.metaKey){
$.datepicker._adjustDate(a.target,(isRTL?+1:-1),"D");
}
handled=a.ctrlKey||a.metaKey;
if(a.originalEvent.altKey){
$.datepicker._adjustDate(a.target,(a.ctrlKey?
-$.datepicker._get(inst,"stepBigMonths"):
-$.datepicker._get(inst,"stepMonths")),"M");
}
break;
case 38:if(a.ctrlKey||a.metaKey){
$.datepicker._adjustDate(a.target,-7,"D");
}
handled=a.ctrlKey||a.metaKey;
break;case 39:if(a.ctrlKey||a.metaKey){
$.datepicker._adjustDate(a.target,(isRTL?-1:+1),"D");
}
handled=a.ctrlKey||a.metaKey;
if(a.originalEvent.altKey){
$.datepicker._adjustDate(a.target,(a.ctrlKey?
+$.datepicker._get(inst,"stepBigMonths"):
+$.datepicker._get(inst,"stepMonths")),"M");
}
break;
case 40:if(a.ctrlKey||a.metaKey){
$.datepicker._adjustDate(a.target,+7,"D");
}
handled=a.ctrlKey||a.metaKey;
break;default:handled=false;
}
}else if(a.keyCode===36&&a.ctrlKey){$.datepicker._showDatepicker(this);
}else{
handled=false;
}
if(handled){
a.preventDefault();
a.stopPropagation();
}
},

_doKeyPress:function(a){
var b,chr,
inst=$.datepicker._getInst(a.target);
if($.datepicker._get(inst,"constrainInput")){
b=$.datepicker._possibleChars($.datepicker._get(inst,"dateFormat"));
chr=String.fromCharCode(a.charCode==null?a.keyCode:a.charCode);
return a.ctrlKey||a.metaKey||(chr<" "||!b||b.indexOf(chr)>-1);
}
},

_doKeyUp:function(a){
var b,
inst=$.datepicker._getInst(a.target);
if(inst.input.val()!==inst.lastVal){
try{
b=$.datepicker.parseDate($.datepicker._get(inst,"dateFormat"),
(inst.input?inst.input.val():null),
$.datepicker._getFormatConfig(inst));
if(b){$.datepicker._setDateFromField(inst);
$.datepicker._updateAlternate(inst);
$.datepicker._updateDatepicker(inst);
}
}
catch(err){
}
}
return true;
},

_showDatepicker:function(a){
a=a.target||a;
if(a.nodeName.toLowerCase()!=="input"){a=$("input",a.parentNode)[0];
}
if($.datepicker._isDisabledDatepicker(a)||$.datepicker._lastInput===a){return;
}
var b,beforeShow,beforeShowSettings,isFixed,
offset,showAnim,duration;
b=$.datepicker._getInst(a);
if($.datepicker._curInst&&$.datepicker._curInst!==b){
$.datepicker._curInst.dpDiv.stop(true,true);
if(b&&$.datepicker._datepickerShowing){
$.datepicker._hideDatepicker($.datepicker._curInst.input[0]);
}
}
beforeShow=$.datepicker._get(b,"beforeShow");
beforeShowSettings=beforeShow?beforeShow.apply(a,[a,b]):{};
if(beforeShowSettings===false){
return;
}
extendRemove(b.settings,beforeShowSettings);
b.lastVal=null;
$.datepicker._lastInput=a;
$.datepicker._setDateFromField(b);
if($.datepicker._inDialog){a.value="";
}
if(!$.datepicker._pos){$.datepicker._pos=$.datepicker._findPos(a);
$.datepicker._pos[1]+=a.offsetHeight}
isFixed=false;
$(a).parents().each(function(){
isFixed|=$(this).css("position")==="fixed";
return!isFixed;
});
offset={left:$.datepicker._pos[0],top:$.datepicker._pos[1]};
$.datepicker._pos=null;
b.dpDiv.empty();
b.dpDiv.css({position:"absolute",display:"block",top:"-1000px"});
$.datepicker._updateDatepicker(b);
offset=$.datepicker._checkOffset(b,offset,isFixed);
b.dpDiv.css({position:($.datepicker._inDialog&&$.blockUI?
"static":(isFixed?"fixed":"absolute")),display:"none",
left:offset.left+"px",top:offset.top+"px"});
if(!b.inline){
showAnim=$.datepicker._get(b,"showAnim");
duration=$.datepicker._get(b,"duration");
b.dpDiv.zIndex($(a).zIndex()+1);
$.datepicker._datepickerShowing=true;
if($.effects&&$.effects.effect[showAnim]){
b.dpDiv.show(showAnim,$.datepicker._get(b,"showOptions"),duration);
}else{
b.dpDiv[showAnim||"show"](showAnim?duration:null);
}
if($.datepicker._shouldFocusInput(b)){
b.input.focus();
}
$.datepicker._curInst=b;
}
},

_updateDatepicker:function(a){
this.maxRows=4;instActive=a;a.dpDiv.empty().append(this._generateHTML(a));
this._attachHandlers(a);
a.dpDiv.find("."+this._dayOverClass+" a").mouseover();
var b,
numMonths=this._getNumberOfMonths(a),
cols=numMonths[1],
width=17;
a.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width("");
if(cols>1){
a.dpDiv.addClass("ui-datepicker-multi-"+cols).css("width",(width*cols)+"em");
}
a.dpDiv[(numMonths[0]!==1||numMonths[1]!==1?"add":"remove")+
"Class"]("ui-datepicker-multi");
a.dpDiv[(this._get(a,"isRTL")?"add":"remove")+
"Class"]("ui-datepicker-rtl");
if(a===$.datepicker._curInst&&$.datepicker._datepickerShowing&&$.datepicker._shouldFocusInput(a)){
a.input.focus();
}
if(a.yearshtml){
b=a.yearshtml;
setTimeout(function(){
if(b===a.yearshtml&&a.yearshtml){
a.dpDiv.find("select.ui-datepicker-year:first").replaceWith(a.yearshtml);
}
b=a.yearshtml=null;
},0);
}
},
_shouldFocusInput:function(a){
return a.input&&a.input.is(":visible")&&!a.input.is(":disabled")&&!a.input.is(":focus");
},

_checkOffset:function(a,b,c){
var d=a.dpDiv.outerWidth(),
dpHeight=a.dpDiv.outerHeight(),
inputWidth=a.input?a.input.outerWidth():0,
inputHeight=a.input?a.input.outerHeight():0,
viewWidth=document.documentElement.clientWidth+(c?0:$(document).scrollLeft()),
viewHeight=document.documentElement.clientHeight+(c?0:$(document).scrollTop());
b.left-=(this._get(a,"isRTL")?(d-inputWidth):0);
b.left-=(c&&b.left===a.input.offset().left)?$(document).scrollLeft():0;
b.top-=(c&&b.top===(a.input.offset().top+inputHeight))?$(document).scrollTop():0;
b.left-=Math.min(b.left,(b.left+d>viewWidth&&viewWidth>d)?
Math.abs(b.left+d-viewWidth):0);
b.top-=Math.min(b.top,(b.top+dpHeight>viewHeight&&viewHeight>dpHeight)?
Math.abs(dpHeight+inputHeight):0);
return b;
},

_findPos:function(a){
var b,
inst=this._getInst(a),
isRTL=this._get(inst,"isRTL");
while(a&&(a.type==="hidden"||a.nodeType!==1||$.expr.filters.hidden(a))){
a=a[isRTL?"previousSibling":"nextSibling"];
}
b=$(a).offset();
return[b.left,b.top];
},

_hideDatepicker:function(a){
var b,duration,postProcess,onClose,
inst=this._curInst;
if(!inst||(a&&inst!==$.data(a,n))){
return;
}
if(this._datepickerShowing){
b=this._get(inst,"showAnim");
duration=this._get(inst,"duration");
postProcess=function(){
$.datepicker._tidyDialog(inst);
};
if($.effects&&($.effects.effect[b]||$.effects[b])){
inst.dpDiv.hide(b,$.datepicker._get(inst,"showOptions"),duration,postProcess);
}else{
inst.dpDiv[(b==="slideDown"?"slideUp":
(b==="fadeIn"?"fadeOut":"hide"))]((b?duration:null),postProcess);
}
if(!b){
postProcess();
}
this._datepickerShowing=false;
onClose=this._get(inst,"onClose");
if(onClose){
onClose.apply((inst.input?inst.input[0]:null),[(inst.input?inst.input.val():""),inst]);
}
this._lastInput=null;
if(this._inDialog){
this._dialogInput.css({position:"absolute",left:"0",top:"-100px"});
if($.blockUI){
$.unblockUI();
$("body").append(this.dpDiv);
}
}
this._inDialog=false;
}
},

_tidyDialog:function(a){
a.dpDiv.removeClass(this._dialogClass).unbind(".ui-datepicker-calendar");
},

_checkExternalClick:function(a){
if(!$.datepicker._curInst){
return;
}
var b=$(a.target),
inst=$.datepicker._getInst(b[0]);
if(((b[0].id!==$.datepicker._mainDivId&&
b.parents("#"+$.datepicker._mainDivId).length===0&&
!b.hasClass($.datepicker.markerClassName)&&
!b.closest("."+$.datepicker._triggerClass).length&&
$.datepicker._datepickerShowing&&!($.datepicker._inDialog&&$.blockUI)))||
(b.hasClass($.datepicker.markerClassName)&&$.datepicker._curInst!==inst)){
$.datepicker._hideDatepicker();
}
},

_adjustDate:function(a,b,c){
var d=$(a),
inst=this._getInst(d[0]);
if(this._isDisabledDatepicker(d[0])){
return;
}
this._adjustInstDate(inst,b+
(c==="M"?this._get(inst,"showCurrentAtPos"):0),c);
this._updateDatepicker(inst);
},

_gotoToday:function(a){
var b,
target=$(a),
inst=this._getInst(target[0]);
if(this._get(inst,"gotoCurrent")&&inst.currentDay){
inst.selectedDay=inst.currentDay;
inst.drawMonth=inst.selectedMonth=inst.currentMonth;
inst.drawYear=inst.selectedYear=inst.currentYear;
}else{
b=new Date();
inst.selectedDay=b.getDate();
inst.drawMonth=inst.selectedMonth=b.getMonth();
inst.drawYear=inst.selectedYear=b.getFullYear();
}
this._notifyChange(inst);
this._adjustDate(target);
},

_selectMonthYear:function(a,b,c){
var d=$(a),
inst=this._getInst(d[0]);
inst["selected"+(c==="M"?"Month":"Year")]=
inst["draw"+(c==="M"?"Month":"Year")]=
parseInt(b.options[b.selectedIndex].value,10);
this._notifyChange(inst);
this._adjustDate(d);
},

_selectDay:function(a,b,c,d){
var e,
target=$(a);
if($(d).hasClass(this._unselectableClass)||this._isDisabledDatepicker(target[0])){
return;
}
e=this._getInst(target[0]);
e.selectedDay=e.currentDay=$("a",d).html();
e.selectedMonth=e.currentMonth=b;
e.selectedYear=e.currentYear=c;
this._selectDate(a,this._formatDate(e,
e.currentDay,e.currentMonth,e.currentYear));
},

_clearDate:function(a){
var b=$(a);
this._selectDate(b,"");
},

_selectDate:function(a,b){
var c,
target=$(a),
inst=this._getInst(target[0]);
b=(b!=null?b:this._formatDate(inst));
if(inst.input){
inst.input.val(b);
}
this._updateAlternate(inst);
c=this._get(inst,"onSelect");
if(c){
c.apply((inst.input?inst.input[0]:null),[b,inst])}else if(inst.input){
inst.input.trigger("change")}
if(inst.inline){
this._updateDatepicker(inst);
}else{
this._hideDatepicker();
this._lastInput=inst.input[0];
if(typeof(inst.input[0])!=="object"){
inst.input.focus()}
this._lastInput=null;
}
},

_updateAlternate:function(a){
var b,date,dateStr,
altField=this._get(a,"altField");
if(altField){b=this._get(a,"altFormat")||this._get(a,"dateFormat");
date=this._getDate(a);
dateStr=this.formatDate(b,date,this._getFormatConfig(a));
$(altField).each(function(){$(this).val(dateStr)});
}
},

noWeekends:function(a){
var b=a.getDay();
return[(b>0&&b<6),""];
},

iso8601Week:function(a){
var b,
checkDate=new Date(a.getTime());
checkDate.setDate(checkDate.getDate()+4-(checkDate.getDay()||7));
b=checkDate.getTime();
checkDate.setMonth(0);checkDate.setDate(1);
return Math.floor(Math.round((b-checkDate)/86400000)/7)+1;
},

parseDate:function(g,h,j){
if(g==null||h==null){
throw"Invalid arguments";
}
h=(typeof h==="object"?h.toString():h+"");
if(h===""){
return null;
}
var l,dim,extra,
iValue=0,
shortYearCutoffTemp=(j?j.shortYearCutoff:null)||this._defaults.shortYearCutoff,
shortYearCutoff=(typeof shortYearCutoffTemp!=="string"?shortYearCutoffTemp:
new Date().getFullYear()%100+parseInt(shortYearCutoffTemp,10)),
dayNamesShort=(j?j.dayNamesShort:null)||this._defaults.dayNamesShort,
dayNames=(j?j.dayNames:null)||this._defaults.dayNames,
monthNamesShort=(j?j.monthNamesShort:null)||this._defaults.monthNamesShort,
monthNames=(j?j.monthNames:null)||this._defaults.monthNames,
year=-1,
month=-1,
day=-1,
doy=-1,
literal=false,
date,
lookAhead=function(a){
var b=(l+1<g.length&&g.charAt(l+1)===a);
if(b){
l++;
}
return b;
},
getNumber=function(a){
var b=lookAhead(a),
size=(a==="@"?14:(a==="!"?20:
(a==="y"&&b?4:(a==="o"?3:2)))),
digits=new RegExp("^\\d{1,"+size+"}"),
num=h.substring(iValue).match(digits);
if(!num){
throw"Missing number at position "+iValue;
}
iValue+=num[0].length;
return parseInt(num[0],10);
},
getName=function(c,d,e){
var f=-1,
names=$.map(lookAhead(c)?e:d,function(v,k){
return[[k,v]];
}).sort(function(a,b){
return-(a[1].length-b[1].length);
});
$.each(names,function(i,a){
var b=a[1];
if(h.substr(iValue,b.length).toLowerCase()===b.toLowerCase()){
f=a[0];
iValue+=b.length;
return false;
}
});
if(f!==-1){
return f+1;
}else{
throw"Unknown name at position "+iValue;
}
},
checkLiteral=function(){
if(h.charAt(iValue)!==g.charAt(l)){
throw"Unexpected literal at position "+iValue;
}
iValue++;
};
for(l=0;l<g.length;l++){
if(literal){
if(g.charAt(l)==="'"&&!lookAhead("'")){
literal=false;
}else{
checkLiteral();
}
}else{
switch(g.charAt(l)){
case"d":
day=getNumber("d");
break;
case"D":
getName("D",dayNamesShort,dayNames);
break;
case"o":
doy=getNumber("o");
break;
case"m":
month=getNumber("m");
break;
case"M":
month=getName("M",monthNamesShort,monthNames);
break;
case"y":
year=getNumber("y");
break;
case"@":
date=new Date(getNumber("@"));
year=date.getFullYear();
month=date.getMonth()+1;
day=date.getDate();
break;
case"!":
date=new Date((getNumber("!")-this._ticksTo1970)/10000);
year=date.getFullYear();
month=date.getMonth()+1;
day=date.getDate();
break;
case"'":
if(lookAhead("'")){
checkLiteral();
}else{
literal=true;
}
break;
default:
checkLiteral();
}
}
}
if(iValue<h.length){
extra=h.substr(iValue);
if(!/^\s+/.test(extra)){
throw"Extra/unparsed characters found in date: "+extra;
}
}
if(year===-1){
year=new Date().getFullYear();
}else if(year<100){
year+=new Date().getFullYear()-new Date().getFullYear()%100+
(year<=shortYearCutoff?0:-100);
}
if(doy>-1){
month=1;
day=doy;
do{
dim=this._getDaysInMonth(year,month-1);
if(day<=dim){
break;
}
month++;
day-=dim;
}while(true);
}
date=this._daylightSavingAdjust(new Date(year,month-1,day));
if(date.getFullYear()!==year||date.getMonth()+1!==month||date.getDate()!==day){
throw"Invalid date";}
return date;
},

ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",
ISO_8601:"yy-mm-dd",
RFC_822:"D, d M y",
RFC_850:"DD, dd-M-y",
RFC_1036:"D, d M y",
RFC_1123:"D, d M yy",
RFC_2822:"D, d M yy",
RSS:"D, d M y",TICKS:"!",
TIMESTAMP:"@",
W3C:"yy-mm-dd",_ticksTo1970:(((1970-1)*365+Math.floor(1970/4)-Math.floor(1970/100)+
Math.floor(1970/400))*24*60*60*10000000),

formatDate:function(e,f,g){
if(!f){
return"";
}
var h,
dayNamesShort=(g?g.dayNamesShort:null)||this._defaults.dayNamesShort,
dayNames=(g?g.dayNames:null)||this._defaults.dayNames,
monthNamesShort=(g?g.monthNamesShort:null)||this._defaults.monthNamesShort,
monthNames=(g?g.monthNames:null)||this._defaults.monthNames,
lookAhead=function(a){
var b=(h+1<e.length&&e.charAt(h+1)===a);
if(b){
h++;
}
return b;
},
formatNumber=function(a,b,c){
var d=""+b;
if(lookAhead(a)){
while(d.length<c){
d="0"+d;
}
}
return d;
},
formatName=function(a,b,c,d){
return(lookAhead(a)?d[b]:c[b]);
},
output="",
literal=false;
if(f){
for(h=0;h<e.length;h++){
if(literal){
if(e.charAt(h)==="'"&&!lookAhead("'")){
literal=false;
}else{
output+=e.charAt(h);
}
}else{
switch(e.charAt(h)){
case"d":
output+=formatNumber("d",f.getDate(),2);
break;
case"D":
output+=formatName("D",f.getDay(),dayNamesShort,dayNames);
break;
case"o":
output+=formatNumber("o",
Math.round((new Date(f.getFullYear(),f.getMonth(),f.getDate()).getTime()-new Date(f.getFullYear(),0,0).getTime())/86400000),3);
break;
case"m":
output+=formatNumber("m",f.getMonth()+1,2);
break;
case"M":
output+=formatName("M",f.getMonth(),monthNamesShort,monthNames);
break;
case"y":
output+=(lookAhead("y")?f.getFullYear():
(f.getYear()%100<10?"0":"")+f.getYear()%100);
break;
case"@":
output+=f.getTime();
break;
case"!":
output+=f.getTime()*10000+this._ticksTo1970;
break;
case"'":
if(lookAhead("'")){
output+="'";
}else{
literal=true;
}
break;
default:
output+=e.charAt(h);
}
}
}
}
return output;
},

_possibleChars:function(c){
var d,
chars="",
literal=false,
lookAhead=function(a){
var b=(d+1<c.length&&c.charAt(d+1)===a);
if(b){
d++;
}
return b;
};
for(d=0;d<c.length;d++){
if(literal){
if(c.charAt(d)==="'"&&!lookAhead("'")){
literal=false;
}else{
chars+=c.charAt(d);
}
}else{
switch(c.charAt(d)){
case"d":case"m":case"y":case"@":
chars+="0123456789";
break;
case"D":case"M":
return null;case"'":
if(lookAhead("'")){
chars+="'";
}else{
literal=true;
}
break;
default:
chars+=c.charAt(d);
}
}
}
return chars;
},

_get:function(a,b){
return a.settings[b]!==m?
a.settings[b]:this._defaults[b];
},

_setDateFromField:function(a,b){
if(a.input.val()===a.lastVal){
return;
}
var c=this._get(a,"dateFormat"),
dates=a.lastVal=a.input?a.input.val():null,
defaultDate=this._getDefaultDate(a),
date=defaultDate,
settings=this._getFormatConfig(a);
try{
date=this.parseDate(c,dates,settings)||defaultDate;
}catch(event){
dates=(b?"":dates);
}
a.selectedDay=date.getDate();
a.drawMonth=a.selectedMonth=date.getMonth();
a.drawYear=a.selectedYear=date.getFullYear();
a.currentDay=(dates?date.getDate():0);
a.currentMonth=(dates?date.getMonth():0);
a.currentYear=(dates?date.getFullYear():0);
this._adjustInstDate(a);
},

_getDefaultDate:function(a){
return this._restrictMinMax(a,
this._determineDate(a,this._get(a,"defaultDate"),new Date()));
},

_determineDate:function(c,d,f){
var g=function(a){
var b=new Date();
b.setDate(b.getDate()+a);
return b;
},
offsetString=function(a){
try{
return $.datepicker.parseDate($.datepicker._get(c,"dateFormat"),
a,$.datepicker._getFormatConfig(c));
}
catch(e){
}
var b=(a.toLowerCase().match(/^c/)?
$.datepicker._getDate(c):null)||new Date(),
year=b.getFullYear(),
month=b.getMonth(),
day=b.getDate(),
pattern=/([+\-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,
matches=pattern.exec(a);
while(matches){
switch(matches[2]||"d"){
case"d":case"D":
day+=parseInt(matches[1],10);break;
case"w":case"W":
day+=parseInt(matches[1],10)*7;break;
case"m":case"M":
month+=parseInt(matches[1],10);
day=Math.min(day,$.datepicker._getDaysInMonth(year,month));
break;
case"y":case"Y":
year+=parseInt(matches[1],10);
day=Math.min(day,$.datepicker._getDaysInMonth(year,month));
break;
}
matches=pattern.exec(a);
}
return new Date(year,month,day);
},
newDate=(d==null||d===""?f:(typeof d==="string"?offsetString(d):
(typeof d==="number"?(isNaN(d)?f:g(d)):new Date(d.getTime()))));
newDate=(newDate&&newDate.toString()==="Invalid Date"?f:newDate);
if(newDate){
newDate.setHours(0);
newDate.setMinutes(0);
newDate.setSeconds(0);
newDate.setMilliseconds(0);
}
return this._daylightSavingAdjust(newDate);
},

_daylightSavingAdjust:function(a){
if(!a){
return null;
}
a.setHours(a.getHours()>12?a.getHours()+2:0);
return a;
},

_setDate:function(a,b,c){
var d=!b,
origMonth=a.selectedMonth,
origYear=a.selectedYear,
newDate=this._restrictMinMax(a,this._determineDate(a,b,new Date()));
a.selectedDay=a.currentDay=newDate.getDate();
a.drawMonth=a.selectedMonth=a.currentMonth=newDate.getMonth();
a.drawYear=a.selectedYear=a.currentYear=newDate.getFullYear();
if((origMonth!==a.selectedMonth||origYear!==a.selectedYear)&&!c){
this._notifyChange(a);
}
this._adjustInstDate(a);
if(a.input){
a.input.val(d?"":this._formatDate(a));
}
},

_getDate:function(a){
var b=(!a.currentYear||(a.input&&a.input.val()==="")?null:
this._daylightSavingAdjust(new Date(
a.currentYear,a.currentMonth,a.currentDay)));
return b;
},

_attachHandlers:function(b){
var c=this._get(b,"stepMonths"),
id="#"+b.id.replace(/\\\\/g,"\\");
b.dpDiv.find("[data-handler]").map(function(){
var a={
prev:function(){
$.datepicker._adjustDate(id,-c,"M");
},
next:function(){
$.datepicker._adjustDate(id,+c,"M");
},
hide:function(){
$.datepicker._hideDatepicker();
},
today:function(){
$.datepicker._gotoToday(id);
},
selectDay:function(){
$.datepicker._selectDay(id,+this.getAttribute("data-month"),+this.getAttribute("data-year"),this);
return false;
},
selectMonth:function(){
$.datepicker._selectMonthYear(id,this,"M");
return false;
},
selectYear:function(){
$.datepicker._selectMonthYear(id,this,"Y");
return false;
}
};
$(this).bind(this.getAttribute("data-event"),a[this.getAttribute("data-handler")]);
});
},

_generateHTML:function(a){
var b,prevText,prev,nextText,next,currentText,gotoDate,
controls,buttonPanel,firstDay,showWeek,dayNames,dayNamesMin,
monthNames,monthNamesShort,beforeShowDay,showOtherMonths,
selectOtherMonths,defaultDate,html,dow,row,group,col,selectedDate,
cornerClass,calender,thead,day,daysInMonth,leadDays,curRows,numRows,
printDate,dRow,tbody,daySettings,otherMonth,unselectable,
tempDate=new Date(),
today=this._daylightSavingAdjust(
new Date(tempDate.getFullYear(),tempDate.getMonth(),tempDate.getDate())),isRTL=this._get(a,"isRTL"),
showButtonPanel=this._get(a,"showButtonPanel"),
hideIfNoPrevNext=this._get(a,"hideIfNoPrevNext"),
navigationAsDateFormat=this._get(a,"navigationAsDateFormat"),
numMonths=this._getNumberOfMonths(a),
showCurrentAtPos=this._get(a,"showCurrentAtPos"),
stepMonths=this._get(a,"stepMonths"),
isMultiMonth=(numMonths[0]!==1||numMonths[1]!==1),
currentDate=this._daylightSavingAdjust((!a.currentDay?new Date(9999,9,9):
new Date(a.currentYear,a.currentMonth,a.currentDay))),
minDate=this._getMinMaxDate(a,"min"),
maxDate=this._getMinMaxDate(a,"max"),
drawMonth=a.drawMonth-showCurrentAtPos,
drawYear=a.drawYear;
if(drawMonth<0){
drawMonth+=12;
drawYear--;
}
if(maxDate){
b=this._daylightSavingAdjust(new Date(maxDate.getFullYear(),
maxDate.getMonth()-(numMonths[0]*numMonths[1])+1,maxDate.getDate()));
b=(minDate&&b<minDate?minDate:b);
while(this._daylightSavingAdjust(new Date(drawYear,drawMonth,1))>b){
drawMonth--;
if(drawMonth<0){
drawMonth=11;
drawYear--;
}
}
}
a.drawMonth=drawMonth;
a.drawYear=drawYear;
prevText=this._get(a,"prevText");
prevText=(!navigationAsDateFormat?prevText:this.formatDate(prevText,
this._daylightSavingAdjust(new Date(drawYear,drawMonth-stepMonths,1)),
this._getFormatConfig(a)));
prev=(this._canAdjustMonth(a,-1,drawYear,drawMonth)?
"<a class='ui-datepicker-prev ui-corner-all' data-handler='prev' data-event='click'"+
" title='"+prevText+"'><span class='ui-icon ui-icon-circle-triangle-"+(isRTL?"e":"w")+"'>"+prevText+"</span></a>":
(hideIfNoPrevNext?"":"<a class='ui-datepicker-prev ui-corner-all ui-state-disabled' title='"+prevText+"'><span class='ui-icon ui-icon-circle-triangle-"+(isRTL?"e":"w")+"'>"+prevText+"</span></a>"));
nextText=this._get(a,"nextText");
nextText=(!navigationAsDateFormat?nextText:this.formatDate(nextText,
this._daylightSavingAdjust(new Date(drawYear,drawMonth+stepMonths,1)),
this._getFormatConfig(a)));
next=(this._canAdjustMonth(a,+1,drawYear,drawMonth)?
"<a class='ui-datepicker-next ui-corner-all' data-handler='next' data-event='click'"+
" title='"+nextText+"'><span class='ui-icon ui-icon-circle-triangle-"+(isRTL?"w":"e")+"'>"+nextText+"</span></a>":
(hideIfNoPrevNext?"":"<a class='ui-datepicker-next ui-corner-all ui-state-disabled' title='"+nextText+"'><span class='ui-icon ui-icon-circle-triangle-"+(isRTL?"w":"e")+"'>"+nextText+"</span></a>"));
currentText=this._get(a,"currentText");
gotoDate=(this._get(a,"gotoCurrent")&&a.currentDay?currentDate:today);
currentText=(!navigationAsDateFormat?currentText:
this.formatDate(currentText,gotoDate,this._getFormatConfig(a)));
controls=(!a.inline?"<button type='button' class='ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all' data-handler='hide' data-event='click'>"+
this._get(a,"closeText")+"</button>":"");
buttonPanel=(showButtonPanel)?"<div class='ui-datepicker-buttonpane ui-widget-content'>"+(isRTL?controls:"")+
(this._isInRange(a,gotoDate)?"<button type='button' class='ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all' data-handler='today' data-event='click'"+
">"+currentText+"</button>":"")+(isRTL?"":controls)+"</div>":"";
firstDay=parseInt(this._get(a,"firstDay"),10);
firstDay=(isNaN(firstDay)?0:firstDay);
showWeek=this._get(a,"showWeek");
dayNames=this._get(a,"dayNames");
dayNamesMin=this._get(a,"dayNamesMin");
monthNames=this._get(a,"monthNames");
monthNamesShort=this._get(a,"monthNamesShort");
beforeShowDay=this._get(a,"beforeShowDay");
showOtherMonths=this._get(a,"showOtherMonths");
selectOtherMonths=this._get(a,"selectOtherMonths");
defaultDate=this._getDefaultDate(a);
html="";
dow;
for(row=0;row<numMonths[0];row++){
group="";
this.maxRows=4;
for(col=0;col<numMonths[1];col++){
selectedDate=this._daylightSavingAdjust(new Date(drawYear,drawMonth,a.selectedDay));
cornerClass=" ui-corner-all";
calender="";
if(isMultiMonth){
calender+="<div class='ui-datepicker-group";
if(numMonths[1]>1){
switch(col){
case 0:calender+=" ui-datepicker-group-first";
cornerClass=" ui-corner-"+(isRTL?"right":"left");break;
case numMonths[1]-1:calender+=" ui-datepicker-group-last";
cornerClass=" ui-corner-"+(isRTL?"left":"right");break;
default:calender+=" ui-datepicker-group-middle";cornerClass="";break;
}
}
calender+="'>";
}
calender+="<div class='ui-datepicker-header ui-widget-header ui-helper-clearfix"+cornerClass+"'>"+
(/all|left/.test(cornerClass)&&row===0?(isRTL?next:prev):"")+
(/all|right/.test(cornerClass)&&row===0?(isRTL?prev:next):"")+
this._generateMonthYearHeader(a,drawMonth,drawYear,minDate,maxDate,
row>0||col>0,monthNames,monthNamesShort)+"</div><table class='ui-datepicker-calendar'><thead>"+
"<tr>";
thead=(showWeek?"<th class='ui-datepicker-week-col'>"+this._get(a,"weekHeader")+"</th>":"");
for(dow=0;dow<7;dow++){day=(dow+firstDay)%7;
thead+="<th"+((dow+firstDay+6)%7>=5?" class='ui-datepicker-week-end'":"")+">"+
"<span title='"+dayNames[day]+"'>"+dayNamesMin[day]+"</span></th>";
}
calender+=thead+"</tr></thead><tbody>";
daysInMonth=this._getDaysInMonth(drawYear,drawMonth);
if(drawYear===a.selectedYear&&drawMonth===a.selectedMonth){
a.selectedDay=Math.min(a.selectedDay,daysInMonth);
}
leadDays=(this._getFirstDayOfMonth(drawYear,drawMonth)-firstDay+7)%7;
curRows=Math.ceil((leadDays+daysInMonth)/7);numRows=(isMultiMonth?this.maxRows>curRows?this.maxRows:curRows:curRows);this.maxRows=numRows;
printDate=this._daylightSavingAdjust(new Date(drawYear,drawMonth,1-leadDays));
for(dRow=0;dRow<numRows;dRow++){calender+="<tr>";
tbody=(!showWeek?"":"<td class='ui-datepicker-week-col'>"+
this._get(a,"calculateWeek")(printDate)+"</td>");
for(dow=0;dow<7;dow++){daySettings=(beforeShowDay?
beforeShowDay.apply((a.input?a.input[0]:null),[printDate]):[true,""]);
otherMonth=(printDate.getMonth()!==drawMonth);
unselectable=(otherMonth&&!selectOtherMonths)||!daySettings[0]||
(minDate&&printDate<minDate)||(maxDate&&printDate>maxDate);
tbody+="<td class='"+
((dow+firstDay+6)%7>=5?" ui-datepicker-week-end":"")+(otherMonth?" ui-datepicker-other-month":"")+((printDate.getTime()===selectedDate.getTime()&&drawMonth===a.selectedMonth&&a._keyEvent)||(defaultDate.getTime()===printDate.getTime()&&defaultDate.getTime()===selectedDate.getTime())?
" "+this._dayOverClass:"")+(unselectable?" "+this._unselectableClass+" ui-state-disabled":"")+(otherMonth&&!showOtherMonths?"":" "+daySettings[1]+(printDate.getTime()===currentDate.getTime()?" "+this._currentClass:"")+(printDate.getTime()===today.getTime()?" ui-datepicker-today":""))+"'"+((!otherMonth||showOtherMonths)&&daySettings[2]?" title='"+daySettings[2].replace(/'/g,"&#39;")+"'":"")+(unselectable?"":" data-handler='selectDay' data-event='click' data-month='"+printDate.getMonth()+"' data-year='"+printDate.getFullYear()+"'")+">"+(otherMonth&&!showOtherMonths?"&#xa0;":(unselectable?"<span class='ui-state-default'>"+printDate.getDate()+"</span>":"<a class='ui-state-default"+
(printDate.getTime()===today.getTime()?" ui-state-highlight":"")+
(printDate.getTime()===currentDate.getTime()?" ui-state-active":"")+(otherMonth?" ui-priority-secondary":"")+"' href='#'>"+printDate.getDate()+"</a>"))+"</td>";printDate.setDate(printDate.getDate()+1);
printDate=this._daylightSavingAdjust(printDate);
}
calender+=tbody+"</tr>";
}
drawMonth++;
if(drawMonth>11){
drawMonth=0;
drawYear++;
}
calender+="</tbody></table>"+(isMultiMonth?"</div>"+
((numMonths[0]>0&&col===numMonths[1]-1)?"<div class='ui-datepicker-row-break'></div>":""):"");
group+=calender;
}
html+=group;
}
html+=buttonPanel;
a._keyEvent=false;
return html;
},

_generateMonthYearHeader:function(c,d,e,f,g,h,i,j){
var k,inMaxYear,month,years,thisYear,determineYear,year,endYear,
changeMonth=this._get(c,"changeMonth"),
changeYear=this._get(c,"changeYear"),
showMonthAfterYear=this._get(c,"showMonthAfterYear"),
html="<div class='ui-datepicker-title'>",
monthHtml="";
if(secondary||!changeMonth){
monthHtml+="<span class='ui-datepicker-month'>"+i[d]+"</span>";
}else{
k=(f&&f.getFullYear()===e);
inMaxYear=(g&&g.getFullYear()===e);
monthHtml+="<select class='ui-datepicker-month' data-handler='selectMonth' data-event='change'>";
for(month=0;month<12;month++){
if((!k||month>=f.getMonth())&&(!inMaxYear||month<=g.getMonth())){
monthHtml+="<option value='"+month+"'"+
(month===d?" selected='selected'":"")+
">"+j[month]+"</option>";
}
}
monthHtml+="</select>";
}
if(!showMonthAfterYear){
html+=monthHtml+(secondary||!(changeMonth&&changeYear)?"&#xa0;":"");
}
if(!c.yearshtml){
c.yearshtml="";
if(secondary||!changeYear){
html+="<span class='ui-datepicker-year'>"+e+"</span>";
}else{
years=this._get(c,"yearRange").split(":");
thisYear=new Date().getFullYear();
determineYear=function(a){
var b=(a.match(/c[+\-].*/)?e+parseInt(a.substring(1),10):
(a.match(/[+\-].*/)?thisYear+parseInt(a,10):
parseInt(a,10)));
return(isNaN(b)?thisYear:b);
};
year=determineYear(years[0]);
endYear=Math.max(year,determineYear(years[1]||""));
year=(f?Math.max(year,f.getFullYear()):year);
endYear=(g?Math.min(endYear,g.getFullYear()):endYear);
c.yearshtml+="<select class='ui-datepicker-year' data-handler='selectYear' data-event='change'>";
for(;year<=endYear;year++){
c.yearshtml+="<option value='"+year+"'"+
(year===e?" selected='selected'":"")+
">"+year+"</option>";
}
c.yearshtml+="</select>";
html+=c.yearshtml;
c.yearshtml=null;
}
}
html+=this._get(c,"yearSuffix");
if(showMonthAfterYear){
html+=(secondary||!(changeMonth&&changeYear)?"&#xa0;":"")+monthHtml;
}
html+="</div>";return html;
},

_adjustInstDate:function(a,b,c){
var d=a.drawYear+(c==="Y"?b:0),
month=a.drawMonth+(c==="M"?b:0),
day=Math.min(a.selectedDay,this._getDaysInMonth(d,month))+(c==="D"?b:0),
date=this._restrictMinMax(a,this._daylightSavingAdjust(new Date(d,month,day)));
a.selectedDay=date.getDate();
a.drawMonth=a.selectedMonth=date.getMonth();
a.drawYear=a.selectedYear=date.getFullYear();
if(c==="M"||c==="Y"){
this._notifyChange(a);
}
},

_restrictMinMax:function(a,b){
var c=this._getMinMaxDate(a,"min"),
maxDate=this._getMinMaxDate(a,"max"),
newDate=(c&&b<c?c:b);
return(maxDate&&newDate>maxDate?maxDate:newDate);
},

_notifyChange:function(a){
var b=this._get(a,"onChangeMonthYear");
if(b){
b.apply((a.input?a.input[0]:null),
[a.selectedYear,a.selectedMonth+1,a]);
}
},

_getNumberOfMonths:function(a){
var b=this._get(a,"numberOfMonths");
return(b==null?[1,1]:(typeof b==="number"?[1,b]:b));
},

_getMinMaxDate:function(a,b){
return this._determineDate(a,this._get(a,b+"Date"),null);
},

_getDaysInMonth:function(a,b){
return 32-this._daylightSavingAdjust(new Date(a,b,32)).getDate();
},

_getFirstDayOfMonth:function(a,b){
return new Date(a,b,1).getDay();
},

_canAdjustMonth:function(a,b,c,d){
var e=this._getNumberOfMonths(a),
date=this._daylightSavingAdjust(new Date(c,
d+(b<0?b:e[0]*e[1]),1));
if(b<0){
date.setDate(this._getDaysInMonth(date.getFullYear(),date.getMonth()));
}
return this._isInRange(a,date);
},

_isInRange:function(a,b){
var c,currentYear,
minDate=this._getMinMaxDate(a,"min"),
maxDate=this._getMinMaxDate(a,"max"),
minYear=null,
maxYear=null,
years=this._get(a,"yearRange");
if(years){
c=years.split(":");
currentYear=new Date().getFullYear();
minYear=parseInt(c[0],10);
maxYear=parseInt(c[1],10);
if(c[0].match(/[+\-].*/)){
minYear+=currentYear;
}
if(c[1].match(/[+\-].*/)){
maxYear+=currentYear;
}
}
return((!minDate||b.getTime()>=minDate.getTime())&&
(!maxDate||b.getTime()<=maxDate.getTime())&&
(!minYear||b.getFullYear()>=minYear)&&
(!maxYear||b.getFullYear()<=maxYear));
},

_getFormatConfig:function(a){
var b=this._get(a,"shortYearCutoff");
b=(typeof b!=="string"?b:
new Date().getFullYear()%100+parseInt(b,10));
return{shortYearCutoff:b,
dayNamesShort:this._get(a,"dayNamesShort"),dayNames:this._get(a,"dayNames"),
monthNamesShort:this._get(a,"monthNamesShort"),monthNames:this._get(a,"monthNames")};
},

_formatDate:function(a,b,c,d){
if(!b){
a.currentDay=a.selectedDay;
a.currentMonth=a.selectedMonth;
a.currentYear=a.selectedYear;
}
var e=(b?(typeof b==="object"?b:
this._daylightSavingAdjust(new Date(d,c,b))):
this._daylightSavingAdjust(new Date(a.currentYear,a.currentMonth,a.currentDay)));
return this.formatDate(this._get(a,"dateFormat"),e,this._getFormatConfig(a));
}
});

function bindHover(a){
var b="button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a";
return a.delegate(b,"mouseout",function(){
$(this).removeClass("ui-state-hover");
if(this.className.indexOf("ui-datepicker-prev")!==-1){
$(this).removeClass("ui-datepicker-prev-hover");
}
if(this.className.indexOf("ui-datepicker-next")!==-1){
$(this).removeClass("ui-datepicker-next-hover");
}
})
.delegate(b,"mouseover",function(){
if(!$.datepicker._isDisabledDatepicker(instActive.inline?a.parent()[0]:instActive.input[0])){
$(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover");
$(this).addClass("ui-state-hover");
if(this.className.indexOf("ui-datepicker-prev")!==-1){
$(this).addClass("ui-datepicker-prev-hover");
}
if(this.className.indexOf("ui-datepicker-next")!==-1){
$(this).addClass("ui-datepicker-next-hover");
}
}
});
}

function extendRemove(a,b){
$.extend(a,b);
for(var c in b){
if(b[c]==null){
a[c]=b[c];
}
}
return a;
}

$.fn.datepicker=function(a){

if(!this.length){
return this;
}

if(!$.datepicker.initialized){
$(document).mousedown($.datepicker._checkExternalClick);
$.datepicker.initialized=true;
}

if($("#"+$.datepicker._mainDivId).length===0){
$("body").append($.datepicker.dpDiv);
}
var b=Array.prototype.slice.call(arguments,1);
if(typeof a==="string"&&(a==="isDisabled"||a==="getDate"||a==="widget")){
return $.datepicker["_"+a+"Datepicker"].
apply($.datepicker,[this[0]].concat(b));
}
if(a==="option"&&arguments.length===2&&typeof arguments[1]==="string"){
return $.datepicker["_"+a+"Datepicker"].
apply($.datepicker,[this[0]].concat(b));
}
return this.each(function(){
typeof a==="string"?
$.datepicker["_"+a+"Datepicker"].
apply($.datepicker,[this].concat(b)):
$.datepicker._attachDatepicker(this,a);
});
};
$.datepicker=new Datepicker();$.datepicker.initialized=false;
$.datepicker.uuid=new Date().getTime();
$.datepicker.version="1.10.4";
})(jQuery);
(function($,e){
var f={
buttons:true,
height:true,
maxHeight:true,
maxWidth:true,
minHeight:true,
minWidth:true,
width:true
},
resizableRelatedOptions={
maxHeight:true,
maxWidth:true,
minHeight:true,
minWidth:true
};
$.widget("ui.dialog",{
version:"1.10.4",
options:{
appendTo:"body",
autoOpen:true,
buttons:[],
closeOnEscape:true,
closeText:"close",
dialogClass:"",
draggable:true,
hide:null,
height:"auto",
maxHeight:null,
maxWidth:null,
minHeight:150,
minWidth:150,
modal:false,
position:{
my:"center",
at:"center",
of:window,
collision:"fit",
using:function(a){
var b=$(this).css(a).offset().top;
if(b<0){
$(this).css("top",a.top-b);
}
}
},
resizable:true,
show:null,
title:null,
width:300,
beforeClose:null,
close:null,
drag:null,
dragStart:null,
dragStop:null,
focus:null,
open:null,
resize:null,
resizeStart:null,
resizeStop:null
},
_create:function(){
this.originalCss={
display:this.element[0].style.display,
width:this.element[0].style.width,
minHeight:this.element[0].style.minHeight,
maxHeight:this.element[0].style.maxHeight,
height:this.element[0].style.height
};
this.originalPosition={
parent:this.element.parent(),
index:this.element.parent().children().index(this.element)
};
this.originalTitle=this.element.attr("title");
this.options.title=this.options.title||this.originalTitle;
this._createWrapper();
this.element
.show()
.removeAttr("title")
.addClass("ui-dialog-content ui-widget-content")
.appendTo(this.uiDialog);
this._createTitlebar();
this._createButtonPane();
if(this.options.draggable&&$.fn.draggable){
this._makeDraggable();
}
if(this.options.resizable&&$.fn.resizable){
this._makeResizable();
}
this._isOpen=false;
},
_init:function(){
if(this.options.autoOpen){
this.open();
}
},
_appendTo:function(){
var a=this.options.appendTo;
if(a&&(a.jquery||a.nodeType)){
return $(a);
}
return this.document.find(a||"body").eq(0);
},
_destroy:function(){
var a,
originalPosition=this.originalPosition;
this._destroyOverlay();
this.element
.removeUniqueId()
.removeClass("ui-dialog-content ui-widget-content")
.css(this.originalCss)
.detach();
this.uiDialog.stop(true,true).remove();
if(this.originalTitle){
this.element.attr("title",this.originalTitle);
}
a=originalPosition.parent.children().eq(originalPosition.index);
if(a.length&&a[0]!==this.element[0]){
a.before(this.element);
}else{
originalPosition.parent.append(this.element);
}
},
widget:function(){
return this.uiDialog;
},
disable:$.noop,
enable:$.noop,
close:function(a){
var b,
that=this;
if(!this._isOpen||this._trigger("beforeClose",a)===false){
return;
}
this._isOpen=false;
this._destroyOverlay();
if(!this.opener.filter(":focusable").focus().length){
try{
b=this.document[0].activeElement;
if(b&&b.nodeName.toLowerCase()!=="body"){
$(b).blur();
}
}catch(error){}
}
this._hide(this.uiDialog,this.options.hide,function(){
that._trigger("close",a);
});
},
isOpen:function(){
return this._isOpen;
},
moveToTop:function(){
this._moveToTop();
},
_moveToTop:function(a,b){
var c=!!this.uiDialog.nextAll(":visible").insertBefore(this.uiDialog).length;
if(c&&!b){
this._trigger("focus",a);
}
return c;
},
open:function(){
var a=this;
if(this._isOpen){
if(this._moveToTop()){
this._focusTabbable();
}
return;
}
this._isOpen=true;
this.opener=$(this.document[0].activeElement);
this._size();
this._position();
this._createOverlay();
this._moveToTop(null,true);
this._show(this.uiDialog,this.options.show,function(){
a._focusTabbable();
a._trigger("focus");
});
this._trigger("open");
},
_focusTabbable:function(){
var a=this.element.find("[autofocus]");
if(!a.length){
a=this.element.find(":tabbable");
}
if(!a.length){
a=this.uiDialogButtonPane.find(":tabbable");
}
if(!a.length){
a=this.uiDialogTitlebarClose.filter(":tabbable");
}
if(!a.length){
a=this.uiDialog;
}
a.eq(0).focus();
},
_keepFocus:function(b){
function checkFocus(){
var a=this.document[0].activeElement,
isActive=this.uiDialog[0]===a||
$.contains(this.uiDialog[0],a);
if(!isActive){
this._focusTabbable();
}
}
b.preventDefault();
checkFocus.call(this);
this._delay(checkFocus);
},
_createWrapper:function(){
this.uiDialog=$("<div>")
.addClass("ui-dialog ui-widget ui-widget-content ui-corner-all ui-front "+
this.options.dialogClass)
.hide()
.attr({
tabIndex:-1,
role:"dialog"
})
.appendTo(this._appendTo());
this._on(this.uiDialog,{
keydown:function(a){
if(this.options.closeOnEscape&&!a.isDefaultPrevented()&&a.keyCode&&
a.keyCode===$.ui.keyCode.ESCAPE){
a.preventDefault();
this.close(a);
return;
}
if(a.keyCode!==$.ui.keyCode.TAB){
return;
}
var b=this.uiDialog.find(":tabbable"),
first=b.filter(":first"),
last=b.filter(":last");
if((a.target===last[0]||a.target===this.uiDialog[0])&&!a.shiftKey){
first.focus(1);
a.preventDefault();
}else if((a.target===first[0]||a.target===this.uiDialog[0])&&a.shiftKey){
last.focus(1);
a.preventDefault();
}
},
mousedown:function(a){
if(this._moveToTop(a)){
this._focusTabbable();
}
}
});
if(!this.element.find("[aria-describedby]").length){
this.uiDialog.attr({
"aria-describedby":this.element.uniqueId().attr("id")
});
}
},
_createTitlebar:function(){
var b;
this.uiDialogTitlebar=$("<div>")
.addClass("ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix")
.prependTo(this.uiDialog);
this._on(this.uiDialogTitlebar,{
mousedown:function(a){
if(!$(a.target).closest(".ui-dialog-titlebar-close")){
this.uiDialog.focus();
}
}
});
this.uiDialogTitlebarClose=$("<button type='button'></button>")
.button({
label:this.options.closeText,
icons:{
primary:"ui-icon-closethick"
},
text:false
})
.addClass("ui-dialog-titlebar-close")
.appendTo(this.uiDialogTitlebar);
this._on(this.uiDialogTitlebarClose,{
click:function(a){
a.preventDefault();
this.close(a);
}
});
b=$("<span>")
.uniqueId()
.addClass("ui-dialog-title")
.prependTo(this.uiDialogTitlebar);
this._title(b);
this.uiDialog.attr({
"aria-labelledby":b.attr("id")
});
},
_title:function(a){
if(!this.options.title){
a.html("&#160;");
}
a.text(this.options.title);
},
_createButtonPane:function(){
this.uiDialogButtonPane=$("<div>")
.addClass("ui-dialog-buttonpane ui-widget-content ui-helper-clearfix");
this.uiButtonSet=$("<div>")
.addClass("ui-dialog-buttonset")
.appendTo(this.uiDialogButtonPane);
this._createButtons();
},
_createButtons:function(){
var d=this,
buttons=this.options.buttons;
this.uiDialogButtonPane.remove();
this.uiButtonSet.empty();
if($.isEmptyObject(buttons)||($.isArray(buttons)&&!buttons.length)){
this.uiDialog.removeClass("ui-dialog-buttons");
return;
}
$.each(buttons,function(a,b){
var c,buttonOptions;
b=$.isFunction(b)?
{click:b,text:a}:
b;
b=$.extend({type:"button"},b);
c=b.click;
b.click=function(){
c.apply(d.element[0],arguments);
};
buttonOptions={
icons:b.icons,
text:b.showText
};
delete b.icons;
delete b.showText;
$("<button></button>",b)
.button(buttonOptions)
.appendTo(d.uiButtonSet);
});
this.uiDialog.addClass("ui-dialog-buttons");
this.uiDialogButtonPane.appendTo(this.uiDialog);
},
_makeDraggable:function(){
var c=this,
options=this.options;
function filteredUi(a){
return{
position:a.position,
offset:a.offset
};
}
this.uiDialog.draggable({
cancel:".ui-dialog-content, .ui-dialog-titlebar-close",
handle:".ui-dialog-titlebar",
containment:"document",
start:function(a,b){
$(this).addClass("ui-dialog-dragging");
c._blockFrames();
c._trigger("dragStart",a,filteredUi(b));
},
drag:function(a,b){
c._trigger("drag",a,filteredUi(b));
},
stop:function(a,b){
options.position=[
b.position.left-c.document.scrollLeft(),
b.position.top-c.document.scrollTop()
];
$(this).removeClass("ui-dialog-dragging");
c._unblockFrames();
c._trigger("dragStop",a,filteredUi(b));
}
});
},
_makeResizable:function(){
var c=this,
options=this.options,
handles=options.resizable,
position=this.uiDialog.css("position"),
resizeHandles=typeof handles==="string"?
handles:
"n,e,s,w,se,sw,ne,nw";
function filteredUi(a){
return{
originalPosition:a.originalPosition,
originalSize:a.originalSize,
position:a.position,
size:a.size
};
}
this.uiDialog.resizable({
cancel:".ui-dialog-content",
containment:"document",
alsoResize:this.element,
maxWidth:options.maxWidth,
maxHeight:options.maxHeight,
minWidth:options.minWidth,
minHeight:this._minHeight(),
handles:resizeHandles,
start:function(a,b){
$(this).addClass("ui-dialog-resizing");
c._blockFrames();
c._trigger("resizeStart",a,filteredUi(b));
},
resize:function(a,b){
c._trigger("resize",a,filteredUi(b));
},
stop:function(a,b){
options.height=$(this).height();
options.width=$(this).width();
$(this).removeClass("ui-dialog-resizing");
c._unblockFrames();
c._trigger("resizeStop",a,filteredUi(b));
}
})
.css("position",position);
},
_minHeight:function(){
var a=this.options;
return a.height==="auto"?
a.minHeight:
Math.min(a.minHeight,a.height);
},
_position:function(){
var a=this.uiDialog.is(":visible");
if(!a){
this.uiDialog.show();
}
this.uiDialog.position(this.options.position);
if(!a){
this.uiDialog.hide();
}
},
_setOptions:function(c){
var d=this,
resize=false,
resizableOptions={};
$.each(c,function(a,b){
d._setOption(a,b);
if(a in f){
resize=true;
}
if(a in resizableRelatedOptions){
resizableOptions[a]=b;
}
});
if(resize){
this._size();
this._position();
}
if(this.uiDialog.is(":data(ui-resizable)")){
this.uiDialog.resizable("option",resizableOptions);
}
},
_setOption:function(a,b){
var c,isResizable,
uiDialog=this.uiDialog;
if(a==="dialogClass"){
uiDialog
.removeClass(this.options.dialogClass)
.addClass(b);
}
if(a==="disabled"){
return;
}
this._super(a,b);
if(a==="appendTo"){
this.uiDialog.appendTo(this._appendTo());
}
if(a==="buttons"){
this._createButtons();
}
if(a==="closeText"){
this.uiDialogTitlebarClose.button({
label:""+b
});
}
if(a==="draggable"){
c=uiDialog.is(":data(ui-draggable)");
if(c&&!b){
uiDialog.draggable("destroy");
}
if(!c&&b){
this._makeDraggable();
}
}
if(a==="position"){
this._position();
}
if(a==="resizable"){
isResizable=uiDialog.is(":data(ui-resizable)");
if(isResizable&&!b){
uiDialog.resizable("destroy");
}
if(isResizable&&typeof b==="string"){
uiDialog.resizable("option","handles",b);
}
if(!isResizable&&b!==false){
this._makeResizable();
}
}
if(a==="title"){
this._title(this.uiDialogTitlebar.find(".ui-dialog-title"));
}
},
_size:function(){
var a,minContentHeight,maxContentHeight,
options=this.options;
this.element.show().css({
width:"auto",
minHeight:0,
maxHeight:"none",
height:0
});
if(options.minWidth>options.width){
options.width=options.minWidth;
}
a=this.uiDialog.css({
height:"auto",
width:options.width
})
.outerHeight();
minContentHeight=Math.max(0,options.minHeight-a);
maxContentHeight=typeof options.maxHeight==="number"?
Math.max(0,options.maxHeight-a):
"none";
if(options.height==="auto"){
this.element.css({
minHeight:minContentHeight,
maxHeight:maxContentHeight,
height:"auto"
});
}else{
this.element.height(Math.max(0,options.height-a));
}
if(this.uiDialog.is(":data(ui-resizable)")){
this.uiDialog.resizable("option","minHeight",this._minHeight());
}
},
_blockFrames:function(){
this.iframeBlocks=this.document.find("iframe").map(function(){
var a=$(this);
return $("<div>")
.css({
position:"absolute",
width:a.outerWidth(),
height:a.outerHeight()
})
.appendTo(a.parent())
.offset(a.offset())[0];
});
},
_unblockFrames:function(){
if(this.iframeBlocks){
this.iframeBlocks.remove();
delete this.iframeBlocks;
}
},
_allowInteraction:function(a){
if($(a.target).closest(".ui-dialog").length){
return true;
}
return!!$(a.target).closest(".ui-datepicker").length;
},
_createOverlay:function(){
if(!this.options.modal){
return;
}
var b=this,
widgetFullName=this.widgetFullName;
if(!$.ui.dialog.overlayInstances){
this._delay(function(){
if($.ui.dialog.overlayInstances){
this.document.bind("focusin.dialog",function(a){
if(!b._allowInteraction(a)){
a.preventDefault();
$(".ui-dialog:visible:last .ui-dialog-content")
.data(widgetFullName)._focusTabbable();
}
});
}
});
}
this.overlay=$("<div>")
.addClass("ui-widget-overlay ui-front")
.appendTo(this._appendTo());
this._on(this.overlay,{
mousedown:"_keepFocus"
});
$.ui.dialog.overlayInstances++;
},
_destroyOverlay:function(){
if(!this.options.modal){
return;
}
if(this.overlay){
$.ui.dialog.overlayInstances--;
if(!$.ui.dialog.overlayInstances){
this.document.unbind("focusin.dialog");
}
this.overlay.remove();
this.overlay=null;
}
}
});
$.ui.dialog.overlayInstances=0;
if($.uiBackCompat!==false){
$.widget("ui.dialog",$.ui.dialog,{
_position:function(){
var b=this.options.position,
myAt=[],
offset=[0,0],
isVisible;
if(b){
if(typeof b==="string"||(typeof b==="object"&&"0"in b)){
myAt=b.split?b.split(" "):[b[0],b[1]];
if(myAt.length===1){
myAt[1]=myAt[0];
}
$.each(["left","top"],function(i,a){
if(+myAt[i]===myAt[i]){
offset[i]=myAt[i];
myAt[i]=a;
}
});
b={
my:myAt[0]+(offset[0]<0?offset[0]:"+"+offset[0])+" "+
myAt[1]+(offset[1]<0?offset[1]:"+"+offset[1]),
at:myAt.join(" ")
};
}
b=$.extend({},$.ui.dialog.prototype.options.position,b);
}else{
b=$.ui.dialog.prototype.options.position;
}
isVisible=this.uiDialog.is(":visible");
if(!isVisible){
this.uiDialog.show();
}
this.uiDialog.position(b);
if(!isVisible){
this.uiDialog.hide();
}
}
});
}
}(jQuery));
(function($,f){
$.widget("ui.draggable",$.ui.mouse,{
version:"1.10.4",
widgetEventPrefix:"drag",
options:{
addClasses:true,
appendTo:"parent",
axis:false,
connectToSortable:false,
containment:false,
cursor:"auto",
cursorAt:false,
grid:false,
handle:false,
helper:"original",
iframeFix:false,
opacity:false,
refreshPositions:false,
revert:false,
revertDuration:500,
scope:"default",
scroll:true,
scrollSensitivity:20,
scrollSpeed:20,
snap:false,
snapMode:"both",
snapTolerance:20,
stack:false,
zIndex:false,
drag:null,
start:null,
stop:null
},
_create:function(){
if(this.options.helper==="original"&&!(/^(?:r|a|f)/).test(this.element.css("position"))){
this.element[0].style.position="relative";
}
if(this.options.addClasses){
this.element.addClass("ui-draggable");
}
if(this.options.disabled){
this.element.addClass("ui-draggable-disabled");
}
this._mouseInit();
},
_destroy:function(){
this.element.removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled");
this._mouseDestroy();
},
_mouseCapture:function(a){
var o=this.options;
if(this.helper||o.disabled||$(a.target).closest(".ui-resizable-handle").length>0){
return false;
}
this.handle=this._getHandle(a);
if(!this.handle){
return false;
}
$(o.iframeFix===true?"iframe":o.iframeFix).each(function(){
$("<div class='ui-draggable-iframeFix' style='background: #fff;'></div>")
.css({
width:this.offsetWidth+"px",height:this.offsetHeight+"px",
position:"absolute",opacity:"0.001",zIndex:1000
})
.css($(this).offset())
.appendTo("body");
});
return true;
},
_mouseStart:function(a){
var o=this.options;
this.helper=this._createHelper(a);
this.helper.addClass("ui-draggable-dragging");
this._cacheHelperProportions();
if($.ui.ddmanager){
$.ui.ddmanager.current=this;
}

this._cacheMargins();
this.cssPosition=this.helper.css("position");
this.scrollParent=this.helper.scrollParent();
this.offsetParent=this.helper.offsetParent();
this.offsetParentCssPosition=this.offsetParent.css("position");
this.offset=this.positionAbs=this.element.offset();
this.offset={
top:this.offset.top-this.margins.top,
left:this.offset.left-this.margins.left
};
this.offset.scroll=false;
$.extend(this.offset,{
click:{left:a.pageX-this.offset.left,
top:a.pageY-this.offset.top
},
parent:this._getParentOffset(),
relative:this._getRelativeOffset()});
this.originalPosition=this.position=this._generatePosition(a);
this.originalPageX=a.pageX;
this.originalPageY=a.pageY;
(o.cursorAt&&this._adjustOffsetFromHelper(o.cursorAt));
this._setContainment();
if(this._trigger("start",a)===false){
this._clear();
return false;
}
this._cacheHelperProportions();
if($.ui.ddmanager&&!o.dropBehaviour){
$.ui.ddmanager.prepareOffsets(this,a);
}
this._mouseDrag(a,true);if($.ui.ddmanager){
$.ui.ddmanager.dragStart(this,a);
}
return true;
},
_mouseDrag:function(a,b){
if(this.offsetParentCssPosition==="fixed"){
this.offset.parent=this._getParentOffset();
}
this.position=this._generatePosition(a);
this.positionAbs=this._convertPositionTo("absolute");
if(!b){
var c=this._uiHash();
if(this._trigger("drag",a,c)===false){
this._mouseUp({});
return false;
}
this.position=c.position;
}
if(!this.options.axis||this.options.axis!=="y"){
this.helper[0].style.left=this.position.left+"px";
}
if(!this.options.axis||this.options.axis!=="x"){
this.helper[0].style.top=this.position.top+"px";
}
if($.ui.ddmanager){
$.ui.ddmanager.drag(this,a);
}
return false;
},
_mouseStop:function(a){
var b=this,
dropped=false;
if($.ui.ddmanager&&!this.options.dropBehaviour){
dropped=$.ui.ddmanager.drop(this,a);
}
if(this.dropped){
dropped=this.dropped;
this.dropped=false;
}
if(this.options.helper==="original"&&!$.contains(this.element[0].ownerDocument,this.element[0])){
return false;
}
if((this.options.revert==="invalid"&&!dropped)||(this.options.revert==="valid"&&dropped)||this.options.revert===true||($.isFunction(this.options.revert)&&this.options.revert.call(this.element,dropped))){
$(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){
if(b._trigger("stop",a)!==false){
b._clear();
}
});
}else{
if(this._trigger("stop",a)!==false){
this._clear();
}
}
return false;
},
_mouseUp:function(a){
$("div.ui-draggable-iframeFix").each(function(){
this.parentNode.removeChild(this);
});
if($.ui.ddmanager){
$.ui.ddmanager.dragStop(this,a);
}
return $.ui.mouse.prototype._mouseUp.call(this,a);
},
cancel:function(){
if(this.helper.is(".ui-draggable-dragging")){
this._mouseUp({});
}else{
this._clear();
}
return this;
},
_getHandle:function(a){
return this.options.handle?
!!$(a.target).closest(this.element.find(this.options.handle)).length:
true;
},
_createHelper:function(a){
var o=this.options,
helper=$.isFunction(o.helper)?$(o.helper.apply(this.element[0],[a])):(o.helper==="clone"?this.element.clone().removeAttr("id"):this.element);
if(!helper.parents("body").length){
helper.appendTo((o.appendTo==="parent"?this.element[0].parentNode:o.appendTo));
}
if(helper[0]!==this.element[0]&&!(/(fixed|absolute)/).test(helper.css("position"))){
helper.css("position","absolute");
}
return helper;
},
_adjustOffsetFromHelper:function(a){
if(typeof a==="string"){
a=a.split(" ");
}
if($.isArray(a)){
a={left:+a[0],top:+a[1]||0};
}
if("left"in a){
this.offset.click.left=a.left+this.margins.left;
}
if("right"in a){
this.offset.click.left=this.helperProportions.width-a.right+this.margins.left;
}
if("top"in a){
this.offset.click.top=a.top+this.margins.top;
}
if("bottom"in a){
this.offset.click.top=this.helperProportions.height-a.bottom+this.margins.top;
}
},
_getParentOffset:function(){
var a=this.offsetParent.offset();
if(this.cssPosition==="absolute"&&this.scrollParent[0]!==document&&$.contains(this.scrollParent[0],this.offsetParent[0])){
a.left+=this.scrollParent.scrollLeft();
a.top+=this.scrollParent.scrollTop();
}
if((this.offsetParent[0]===document.body)||
(this.offsetParent[0].tagName&&this.offsetParent[0].tagName.toLowerCase()==="html"&&$.ui.ie)){
a={top:0,left:0};
}
return{
top:a.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),
left:a.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)
};
},
_getRelativeOffset:function(){
if(this.cssPosition==="relative"){
var p=this.element.position();
return{
top:p.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),
left:p.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()
};
}else{
return{top:0,left:0};
}
},
_cacheMargins:function(){
this.margins={
left:(parseInt(this.element.css("marginLeft"),10)||0),
top:(parseInt(this.element.css("marginTop"),10)||0),
right:(parseInt(this.element.css("marginRight"),10)||0),
bottom:(parseInt(this.element.css("marginBottom"),10)||0)
};
},
_cacheHelperProportions:function(){
this.helperProportions={
width:this.helper.outerWidth(),
height:this.helper.outerHeight()
};
},
_setContainment:function(){
var a,c,ce,
o=this.options;
if(!o.containment){
this.containment=null;
return;
}
if(o.containment==="window"){
this.containment=[
$(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,
$(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,
$(window).scrollLeft()+$(window).width()-this.helperProportions.width-this.margins.left,
$(window).scrollTop()+($(window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top
];
return;
}
if(o.containment==="document"){
this.containment=[
0,
0,
$(document).width()-this.helperProportions.width-this.margins.left,
($(document).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top
];
return;
}
if(o.containment.constructor===Array){
this.containment=o.containment;
return;
}
if(o.containment==="parent"){
o.containment=this.helper[0].parentNode;
}
c=$(o.containment);
ce=c[0];
if(!ce){
return;
}
a=c.css("overflow")!=="hidden";
this.containment=[
(parseInt(c.css("borderLeftWidth"),10)||0)+(parseInt(c.css("paddingLeft"),10)||0),
(parseInt(c.css("borderTopWidth"),10)||0)+(parseInt(c.css("paddingTop"),10)||0),
(a?Math.max(ce.scrollWidth,ce.offsetWidth):ce.offsetWidth)-(parseInt(c.css("borderRightWidth"),10)||0)-(parseInt(c.css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,
(a?Math.max(ce.scrollHeight,ce.offsetHeight):ce.offsetHeight)-(parseInt(c.css("borderBottomWidth"),10)||0)-(parseInt(c.css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom
];
this.relative_container=c;
},
_convertPositionTo:function(d,a){
if(!a){
a=this.position;
}
var b=d==="absolute"?1:-1,
scroll=this.cssPosition==="absolute"&&!(this.scrollParent[0]!==document&&$.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent;
if(!this.offset.scroll){
this.offset.scroll={top:scroll.scrollTop(),left:scroll.scrollLeft()};
}
return{
top:(
a.top+this.offset.relative.top*b+this.offset.parent.top*b-((this.cssPosition==="fixed"?-this.scrollParent.scrollTop():this.offset.scroll.top)*b)
),
left:(
a.left+this.offset.relative.left*b+this.offset.parent.left*b-((this.cssPosition==="fixed"?-this.scrollParent.scrollLeft():this.offset.scroll.left)*b)
)
};
},
_generatePosition:function(a){
var b,co,top,left,
o=this.options,
scroll=this.cssPosition==="absolute"&&!(this.scrollParent[0]!==document&&$.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,
pageX=a.pageX,
pageY=a.pageY;
if(!this.offset.scroll){
this.offset.scroll={top:scroll.scrollTop(),left:scroll.scrollLeft()};
}

if(this.originalPosition){
if(this.containment){
if(this.relative_container){
co=this.relative_container.offset();
b=[
this.containment[0]+co.left,
this.containment[1]+co.top,
this.containment[2]+co.left,
this.containment[3]+co.top
];
}
else{
b=this.containment;
}
if(a.pageX-this.offset.click.left<b[0]){
pageX=b[0]+this.offset.click.left;
}
if(a.pageY-this.offset.click.top<b[1]){
pageY=b[1]+this.offset.click.top;
}
if(a.pageX-this.offset.click.left>b[2]){
pageX=b[2]+this.offset.click.left;
}
if(a.pageY-this.offset.click.top>b[3]){
pageY=b[3]+this.offset.click.top;
}
}
if(o.grid){
top=o.grid[1]?this.originalPageY+Math.round((pageY-this.originalPageY)/o.grid[1])*o.grid[1]:this.originalPageY;
pageY=b?((top-this.offset.click.top>=b[1]||top-this.offset.click.top>b[3])?top:((top-this.offset.click.top>=b[1])?top-o.grid[1]:top+o.grid[1])):top;
left=o.grid[0]?this.originalPageX+Math.round((pageX-this.originalPageX)/o.grid[0])*o.grid[0]:this.originalPageX;
pageX=b?((left-this.offset.click.left>=b[0]||left-this.offset.click.left>b[2])?left:((left-this.offset.click.left>=b[0])?left-o.grid[0]:left+o.grid[0])):left;
}
}
return{
top:(
pageY-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(this.cssPosition==="fixed"?-this.scrollParent.scrollTop():this.offset.scroll.top)
),
left:(
pageX-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(this.cssPosition==="fixed"?-this.scrollParent.scrollLeft():this.offset.scroll.left)
)
};
},
_clear:function(){
this.helper.removeClass("ui-draggable-dragging");
if(this.helper[0]!==this.element[0]&&!this.cancelHelperRemoval){
this.helper.remove();
}
this.helper=null;
this.cancelHelperRemoval=false;
},
_trigger:function(a,b,c){
c=c||this._uiHash();
$.ui.plugin.call(this,a,[b,c]);
if(a==="drag"){
this.positionAbs=this._convertPositionTo("absolute");
}
return $.Widget.prototype._trigger.call(this,a,b,c);
},
plugins:{},
_uiHash:function(){
return{
helper:this.helper,
position:this.position,
originalPosition:this.originalPosition,
offset:this.positionAbs
};
}
});
$.ui.plugin.add("draggable","connectToSortable",{
start:function(b,c){
var d=$(this).data("ui-draggable"),o=d.options,
uiSortable=$.extend({},c,{item:d.element});
d.sortables=[];
$(o.connectToSortable).each(function(){
var a=$.data(this,"ui-sortable");
if(a&&!a.options.disabled){
d.sortables.push({
instance:a,
shouldRevert:a.options.revert
});
a.refreshPositions();a._trigger("activate",b,uiSortable);
}
});
},
stop:function(a,b){
var c=$(this).data("ui-draggable"),
uiSortable=$.extend({},b,{item:c.element});
$.each(c.sortables,function(){
if(this.instance.isOver){
this.instance.isOver=0;
c.cancelHelperRemoval=true;this.instance.cancelHelperRemoval=false;if(this.shouldRevert){
this.instance.options.revert=this.shouldRevert;
}
this.instance._mouseStop(a);
this.instance.options.helper=this.instance.options._helper;
if(c.options.helper==="original"){
this.instance.currentItem.css({top:"auto",left:"auto"});
}
}else{
this.instance.cancelHelperRemoval=false;this.instance._trigger("deactivate",a,uiSortable);
}
});
},
drag:function(b,c){
var d=$(this).data("ui-draggable"),that=this;
$.each(d.sortables,function(){
var a=false,
thisSortable=this;
this.instance.positionAbs=d.positionAbs;
this.instance.helperProportions=d.helperProportions;
this.instance.offset.click=d.offset.click;
if(this.instance._intersectsWith(this.instance.containerCache)){
a=true;
$.each(d.sortables,function(){
this.instance.positionAbs=d.positionAbs;
this.instance.helperProportions=d.helperProportions;
this.instance.offset.click=d.offset.click;
if(this!==thisSortable&&
this.instance._intersectsWith(this.instance.containerCache)&&
$.contains(thisSortable.instance.element[0],this.instance.element[0])
){
a=false;
}
return a;
});
}
if(a){
if(!this.instance.isOver){
this.instance.isOver=1;
this.instance.currentItem=$(that).clone().removeAttr("id").appendTo(this.instance.element).data("ui-sortable-item",true);
this.instance.options._helper=this.instance.options.helper;this.instance.options.helper=function(){return c.helper[0]};
b.target=this.instance.currentItem[0];
this.instance._mouseCapture(b,true);
this.instance._mouseStart(b,true,true);
this.instance.offset.click.top=d.offset.click.top;
this.instance.offset.click.left=d.offset.click.left;
this.instance.offset.parent.left-=d.offset.parent.left-this.instance.offset.parent.left;
this.instance.offset.parent.top-=d.offset.parent.top-this.instance.offset.parent.top;
d._trigger("toSortable",b);
d.dropped=this.instance.element;d.currentItem=d.element;
this.instance.fromOutside=d;
}
if(this.instance.currentItem){
this.instance._mouseDrag(b);
}
}else{
if(this.instance.isOver){
this.instance.isOver=0;
this.instance.cancelHelperRemoval=true;
this.instance.options.revert=false;
this.instance._trigger("out",b,this.instance._uiHash(this.instance));
this.instance._mouseStop(b,true);
this.instance.options.helper=this.instance.options._helper;
this.instance.currentItem.remove();
if(this.instance.placeholder){
this.instance.placeholder.remove();
}
d._trigger("fromSortable",b);
d.dropped=false}
}
});
}
});
$.ui.plugin.add("draggable","cursor",{
start:function(){
var t=$("body"),o=$(this).data("ui-draggable").options;
if(t.css("cursor")){
o._cursor=t.css("cursor");
}
t.css("cursor",o.cursor);
},
stop:function(){
var o=$(this).data("ui-draggable").options;
if(o._cursor){
$("body").css("cursor",o._cursor);
}
}
});
$.ui.plugin.add("draggable","opacity",{
start:function(a,b){
var t=$(b.helper),o=$(this).data("ui-draggable").options;
if(t.css("opacity")){
o._opacity=t.css("opacity");
}
t.css("opacity",o.opacity);
},
stop:function(a,b){
var o=$(this).data("ui-draggable").options;
if(o._opacity){
$(b.helper).css("opacity",o._opacity);
}
}
});
$.ui.plugin.add("draggable","scroll",{
start:function(){
var i=$(this).data("ui-draggable");
if(i.scrollParent[0]!==document&&i.scrollParent[0].tagName!=="HTML"){
i.overflowOffset=i.scrollParent.offset();
}
},
drag:function(a){
var i=$(this).data("ui-draggable"),o=i.options,scrolled=false;
if(i.scrollParent[0]!==document&&i.scrollParent[0].tagName!=="HTML"){
if(!o.axis||o.axis!=="x"){
if((i.overflowOffset.top+i.scrollParent[0].offsetHeight)-a.pageY<o.scrollSensitivity){
i.scrollParent[0].scrollTop=scrolled=i.scrollParent[0].scrollTop+o.scrollSpeed;
}else if(a.pageY-i.overflowOffset.top<o.scrollSensitivity){
i.scrollParent[0].scrollTop=scrolled=i.scrollParent[0].scrollTop-o.scrollSpeed;
}
}
if(!o.axis||o.axis!=="y"){
if((i.overflowOffset.left+i.scrollParent[0].offsetWidth)-a.pageX<o.scrollSensitivity){
i.scrollParent[0].scrollLeft=scrolled=i.scrollParent[0].scrollLeft+o.scrollSpeed;
}else if(a.pageX-i.overflowOffset.left<o.scrollSensitivity){
i.scrollParent[0].scrollLeft=scrolled=i.scrollParent[0].scrollLeft-o.scrollSpeed;
}
}
}else{
if(!o.axis||o.axis!=="x"){
if(a.pageY-$(document).scrollTop()<o.scrollSensitivity){
scrolled=$(document).scrollTop($(document).scrollTop()-o.scrollSpeed);
}else if($(window).height()-(a.pageY-$(document).scrollTop())<o.scrollSensitivity){
scrolled=$(document).scrollTop($(document).scrollTop()+o.scrollSpeed);
}
}
if(!o.axis||o.axis!=="y"){
if(a.pageX-$(document).scrollLeft()<o.scrollSensitivity){
scrolled=$(document).scrollLeft($(document).scrollLeft()-o.scrollSpeed);
}else if($(window).width()-(a.pageX-$(document).scrollLeft())<o.scrollSensitivity){
scrolled=$(document).scrollLeft($(document).scrollLeft()+o.scrollSpeed);
}
}
}
if(scrolled!==false&&$.ui.ddmanager&&!o.dropBehaviour){
$.ui.ddmanager.prepareOffsets(i,a);
}
}
});
$.ui.plugin.add("draggable","snap",{
start:function(){
var i=$(this).data("ui-draggable"),
o=i.options;
i.snapElements=[];
$(o.snap.constructor!==String?(o.snap.items||":data(ui-draggable)"):o.snap).each(function(){
var a=$(this),
$o=a.offset();
if(this!==i.element[0]){
i.snapElements.push({
item:this,
width:a.outerWidth(),height:a.outerHeight(),
top:$o.top,left:$o.left
});
}
});
},
drag:function(a,c){
var e,bs,ls,rs,l,r,t,b,i,first,
inst=$(this).data("ui-draggable"),
o=inst.options,
d=o.snapTolerance,
x1=c.offset.left,x2=x1+inst.helperProportions.width,
y1=c.offset.top,y2=y1+inst.helperProportions.height;
for(i=inst.snapElements.length-1;i>=0;i--){
l=inst.snapElements[i].left;
r=l+inst.snapElements[i].width;
t=inst.snapElements[i].top;
b=t+inst.snapElements[i].height;
if(x2<l-d||x1>r+d||y2<t-d||y1>b+d||!$.contains(inst.snapElements[i].item.ownerDocument,inst.snapElements[i].item)){
if(inst.snapElements[i].snapping){
(inst.options.snap.release&&inst.options.snap.release.call(inst.element,a,$.extend(inst._uiHash(),{snapItem:inst.snapElements[i].item})));
}
inst.snapElements[i].snapping=false;
continue;
}
if(o.snapMode!=="inner"){
e=Math.abs(t-y2)<=d;
bs=Math.abs(b-y1)<=d;
ls=Math.abs(l-x2)<=d;
rs=Math.abs(r-x1)<=d;
if(e){
c.position.top=inst._convertPositionTo("relative",{top:t-inst.helperProportions.height,left:0}).top-inst.margins.top;
}
if(bs){
c.position.top=inst._convertPositionTo("relative",{top:b,left:0}).top-inst.margins.top;
}
if(ls){
c.position.left=inst._convertPositionTo("relative",{top:0,left:l-inst.helperProportions.width}).left-inst.margins.left;
}
if(rs){
c.position.left=inst._convertPositionTo("relative",{top:0,left:r}).left-inst.margins.left;
}
}
first=(e||bs||ls||rs);
if(o.snapMode!=="outer"){
e=Math.abs(t-y1)<=d;
bs=Math.abs(b-y2)<=d;
ls=Math.abs(l-x1)<=d;
rs=Math.abs(r-x2)<=d;
if(e){
c.position.top=inst._convertPositionTo("relative",{top:t,left:0}).top-inst.margins.top;
}
if(bs){
c.position.top=inst._convertPositionTo("relative",{top:b-inst.helperProportions.height,left:0}).top-inst.margins.top;
}
if(ls){
c.position.left=inst._convertPositionTo("relative",{top:0,left:l}).left-inst.margins.left;
}
if(rs){
c.position.left=inst._convertPositionTo("relative",{top:0,left:r-inst.helperProportions.width}).left-inst.margins.left;
}
}
if(!inst.snapElements[i].snapping&&(e||bs||ls||rs||first)){
(inst.options.snap.snap&&inst.options.snap.snap.call(inst.element,a,$.extend(inst._uiHash(),{snapItem:inst.snapElements[i].item})));
}
inst.snapElements[i].snapping=(e||bs||ls||rs||first);
}
}
});
$.ui.plugin.add("draggable","stack",{
start:function(){
var c,
o=this.data("ui-draggable").options,
group=$.makeArray($(o.stack)).sort(function(a,b){
return(parseInt($(a).css("zIndex"),10)||0)-(parseInt($(b).css("zIndex"),10)||0);
});
if(!group.length){return}
c=parseInt($(group[0]).css("zIndex"),10)||0;
$(group).each(function(i){
$(this).css("zIndex",c+i);
});
this.css("zIndex",(c+group.length));
}
});
$.ui.plugin.add("draggable","zIndex",{
start:function(a,b){
var t=$(b.helper),o=$(this).data("ui-draggable").options;
if(t.css("zIndex")){
o._zIndex=t.css("zIndex");
}
t.css("zIndex",o.zIndex);
},
stop:function(a,b){
var o=$(this).data("ui-draggable").options;
if(o._zIndex){
$(b.helper).css("zIndex",o._zIndex);
}
}
});
})(jQuery);
(function($,f){
function isOverAxis(x,a,b){
return(x>a)&&(x<(a+b));
}
$.widget("ui.droppable",{
version:"1.10.4",
widgetEventPrefix:"drop",
options:{
accept:"*",
activeClass:false,
addClasses:true,
greedy:false,
hoverClass:false,
scope:"default",
tolerance:"intersect",
activate:null,
deactivate:null,
drop:null,
out:null,
over:null
},
_create:function(){
var a,
o=this.options,
accept=o.accept;
this.isover=false;
this.isout=true;
this.accept=$.isFunction(accept)?accept:function(d){
return d.is(accept);
};
this.proportions=function(){
if(arguments.length){
a=arguments[0];
}else{
return a?
a:
a={
width:this.element[0].offsetWidth,
height:this.element[0].offsetHeight
};
}
};
$.ui.ddmanager.droppables[o.scope]=$.ui.ddmanager.droppables[o.scope]||[];
$.ui.ddmanager.droppables[o.scope].push(this);
(o.addClasses&&this.element.addClass("ui-droppable"));
},
_destroy:function(){
var i=0,
drop=$.ui.ddmanager.droppables[this.options.scope];
for(;i<drop.length;i++){
if(drop[i]===this){
drop.splice(i,1);
}
}
this.element.removeClass("ui-droppable ui-droppable-disabled");
},
_setOption:function(a,b){
if(a==="accept"){
this.accept=$.isFunction(b)?b:function(d){
return d.is(b);
};
}
$.Widget.prototype._setOption.apply(this,arguments);
},
_activate:function(a){
var b=$.ui.ddmanager.current;
if(this.options.activeClass){
this.element.addClass(this.options.activeClass);
}
if(b){
this._trigger("activate",a,this.ui(b));
}
},
_deactivate:function(a){
var b=$.ui.ddmanager.current;
if(this.options.activeClass){
this.element.removeClass(this.options.activeClass);
}
if(b){
this._trigger("deactivate",a,this.ui(b));
}
},
_over:function(a){
var b=$.ui.ddmanager.current;
if(!b||(b.currentItem||b.element)[0]===this.element[0]){
return;
}
if(this.accept.call(this.element[0],(b.currentItem||b.element))){
if(this.options.hoverClass){
this.element.addClass(this.options.hoverClass);
}
this._trigger("over",a,this.ui(b));
}
},
_out:function(a){
var b=$.ui.ddmanager.current;
if(!b||(b.currentItem||b.element)[0]===this.element[0]){
return;
}
if(this.accept.call(this.element[0],(b.currentItem||b.element))){
if(this.options.hoverClass){
this.element.removeClass(this.options.hoverClass);
}
this._trigger("out",a,this.ui(b));
}
},
_drop:function(b,c){
var d=c||$.ui.ddmanager.current,
childrenIntersection=false;
if(!d||(d.currentItem||d.element)[0]===this.element[0]){
return false;
}
this.element.find(":data(ui-droppable)").not(".ui-draggable-dragging").each(function(){
var a=$.data(this,"ui-droppable");
if(
a.options.greedy&&
!a.options.disabled&&
a.options.scope===d.options.scope&&
a.accept.call(a.element[0],(d.currentItem||d.element))&&
$.ui.intersect(d,$.extend(a,{offset:a.element.offset()}),a.options.tolerance)
){childrenIntersection=true;return false}
});
if(childrenIntersection){
return false;
}
if(this.accept.call(this.element[0],(d.currentItem||d.element))){
if(this.options.activeClass){
this.element.removeClass(this.options.activeClass);
}
if(this.options.hoverClass){
this.element.removeClass(this.options.hoverClass);
}
this._trigger("drop",b,this.ui(d));
return this.element;
}
return false;
},
ui:function(c){
return{
draggable:(c.currentItem||c.element),
helper:c.helper,
position:c.position,
offset:c.positionAbs
};
}
});
$.ui.intersect=function(a,c,d){
if(!c.offset){
return false;
}
var e,draggableTop,
x1=(a.positionAbs||a.position.absolute).left,
y1=(a.positionAbs||a.position.absolute).top,
x2=x1+a.helperProportions.width,
y2=y1+a.helperProportions.height,
l=c.offset.left,
t=c.offset.top,
r=l+c.proportions().width,
b=t+c.proportions().height;
switch(d){
case"fit":
return(l<=x1&&x2<=r&&t<=y1&&y2<=b);
case"intersect":
return(l<x1+(a.helperProportions.width/2)&&x2-(a.helperProportions.width/2)<r&&t<y1+(a.helperProportions.height/2)&&y2-(a.helperProportions.height/2)<b);case"pointer":
e=((a.positionAbs||a.position.absolute).left+(a.clickOffset||a.offset.click).left);
draggableTop=((a.positionAbs||a.position.absolute).top+(a.clickOffset||a.offset.click).top);
return isOverAxis(draggableTop,t,c.proportions().height)&&isOverAxis(e,l,c.proportions().width);
case"touch":
return(
(y1>=t&&y1<=b)||(y2>=t&&y2<=b)||(y1<t&&y2>b))&&(
(x1>=l&&x1<=r)||(x2>=l&&x2<=r)||(x1<l&&x2>r));
default:
return false;
}
};

$.ui.ddmanager={
current:null,
droppables:{"default":[]},
prepareOffsets:function(t,a){
var i,j,
m=$.ui.ddmanager.droppables[t.options.scope]||[],
type=a?a.type:null,list=(t.currentItem||t.element).find(":data(ui-droppable)").addBack();
droppablesLoop:for(i=0;i<m.length;i++){
if(m[i].options.disabled||(t&&!m[i].accept.call(m[i].element[0],(t.currentItem||t.element)))){
continue;
}
for(j=0;j<list.length;j++){
if(list[j]===m[i].element[0]){
m[i].proportions().height=0;
continue droppablesLoop;
}
}
m[i].visible=m[i].element.css("display")!=="none";
if(!m[i].visible){
continue;
}
if(type==="mousedown"){
m[i]._activate.call(m[i],a);
}
m[i].offset=m[i].element.offset();
m[i].proportions({width:m[i].element[0].offsetWidth,height:m[i].element[0].offsetHeight});
}
},
drop:function(a,b){
var c=false;
$.each(($.ui.ddmanager.droppables[a.options.scope]||[]).slice(),function(){
if(!this.options){
return;
}
if(!this.options.disabled&&this.visible&&$.ui.intersect(a,this,this.options.tolerance)){
c=this._drop.call(this,b)||c;
}
if(!this.options.disabled&&this.visible&&this.accept.call(this.element[0],(a.currentItem||a.element))){
this.isout=true;
this.isover=false;
this._deactivate.call(this,b);
}
});
return c;
},
dragStart:function(a,b){
a.element.parentsUntil("body").bind("scroll.droppable",function(){
if(!a.options.refreshPositions){
$.ui.ddmanager.prepareOffsets(a,b);
}
});
},
drag:function(b,d){
if(b.options.refreshPositions){
$.ui.ddmanager.prepareOffsets(b,d);
}
$.each($.ui.ddmanager.droppables[b.options.scope]||[],function(){
if(this.options.disabled||this.greedyChild||!this.visible){
return;
}
var a,scope,parent,
intersects=$.ui.intersect(b,this,this.options.tolerance),
c=!intersects&&this.isover?"isout":(intersects&&!this.isover?"isover":null);
if(!c){
return;
}
if(this.options.greedy){
scope=this.options.scope;
parent=this.element.parents(":data(ui-droppable)").filter(function(){
return $.data(this,"ui-droppable").options.scope===scope;
});
if(parent.length){
a=$.data(parent[0],"ui-droppable");
a.greedyChild=(c==="isover");
}
}
if(a&&c==="isover"){
a.isover=false;
a.isout=true;
a._out.call(a,d);
}
this[c]=true;
this[c==="isout"?"isover":"isout"]=false;
this[c==="isover"?"_over":"_out"].call(this,d);
if(a&&c==="isout"){
a.isout=false;
a.isover=true;
a._over.call(a,d);
}
});
},
dragStop:function(a,b){
a.element.parentsUntil("body").unbind("scroll.droppable");
if(!a.options.refreshPositions){
$.ui.ddmanager.prepareOffsets(a,b);
}
}
};
})(jQuery);
(function($,t){
var u="ui-effects-";
$.effects={
effect:{}
};

(function(k,m){
var n="backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color columnRuleColor outlineColor textDecorationColor textEmphasisColor",
rplusequals=/^([\-+])=\s*(\d+\.?\d*)/,
stringParsers=[{
re:/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,
parse:function(a){
return[
a[1],
a[2],
a[3],
a[4]
];
}
},{
re:/rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,
parse:function(a){
return[
a[1]*2.55,
a[2]*2.55,
a[3]*2.55,
a[4]
];
}
},{
re:/#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})/,
parse:function(a){
return[
parseInt(a[1],16),
parseInt(a[2],16),
parseInt(a[3],16)
];
}
},{
re:/#([a-f0-9])([a-f0-9])([a-f0-9])/,
parse:function(a){
return[
parseInt(a[1]+a[1],16),
parseInt(a[2]+a[2],16),
parseInt(a[3]+a[3],16)
];
}
},{
re:/hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,
space:"hsla",
parse:function(a){
return[
a[1],
a[2]/100,
a[3]/100,
a[4]
];
}
}],
color=k.Color=function(a,b,c,d){
return new k.Color.fn.parse(a,b,c,d);
},
spaces={
rgba:{
props:{
red:{
idx:0,
type:"byte"
},
green:{
idx:1,
type:"byte"
},
blue:{
idx:2,
type:"byte"
}
}
},
hsla:{
props:{
hue:{
idx:0,
type:"degrees"
},
saturation:{
idx:1,
type:"percent"
},
lightness:{
idx:2,
type:"percent"
}
}
}
},
propTypes={
"byte":{
floor:true,
max:255
},
"percent":{
max:1
},
"degrees":{
mod:360,
floor:true
}
},
support=color.support={},
supportElem=k("<p>")[0],
colors,
each=k.each;
supportElem.style.cssText="background-color:rgba(1,1,1,.5)";
support.rgba=supportElem.style.backgroundColor.indexOf("rgba")>-1;
each(spaces,function(a,b){
b.cache="_"+a;
b.props.alpha={
idx:3,
type:"percent",
def:1
};
});
function clamp(a,b,c){
var d=propTypes[b.type]||{};
if(a==null){
return(c||!b.def)?null:b.def;
}
a=d.floor?~~a:parseFloat(a);
if(isNaN(a)){
return b.def;
}
if(d.mod){
return(a+d.mod)%d.mod;
}
return 0>a?0:d.max<a?d.max:a;
}
function stringParse(c){
var d=color(),
rgba=d._rgba=[];
c=c.toLowerCase();
each(stringParsers,function(i,a){
var b,
match=a.re.exec(c),
values=match&&a.parse(match),
spaceName=a.space||"rgba";
if(values){
b=d[spaceName](values);
d[spaces[spaceName].cache]=b[spaces[spaceName].cache];
rgba=d._rgba=b._rgba;
return false;
}
});
if(rgba.length){
if(rgba.join()==="0,0,0,0"){
k.extend(rgba,colors.transparent);
}
return d;
}
return colors[c];
}
color.fn=k.extend(color.prototype,{
parse:function(f,g,h,i){
if(f===m){
this._rgba=[null,null,null,null];
return this;
}
if(f.jquery||f.nodeType){
f=k(f).css(g);
g=m;
}
var j=this,
type=k.type(f),
rgba=this._rgba=[];
if(g!==m){
f=[f,g,h,i];
type="array";
}
if(type==="string"){
return this.parse(stringParse(f)||colors._default);
}
if(type==="array"){
each(spaces.rgba.props,function(a,b){
rgba[b.idx]=clamp(f[b.idx],b);
});
return this;
}
if(type==="object"){
if(f instanceof color){
each(spaces,function(a,b){
if(f[b.cache]){
j[b.cache]=f[b.cache].slice();
}
});
}else{
each(spaces,function(c,d){
var e=d.cache;
each(d.props,function(a,b){
if(!j[e]&&d.to){
if(a==="alpha"||f[a]==null){
return;
}
j[e]=d.to(j._rgba);
}
j[e][b.idx]=clamp(f[a],b,true);
});
if(j[e]&&k.inArray(null,j[e].slice(0,3))<0){
j[e][3]=1;
if(d.from){
j._rgba=d.from(j[e]);
}
}
});
}
return this;
}
},
is:function(d){
var e=color(d),
same=true,
inst=this;
each(spaces,function(_,b){
var c,
isCache=e[b.cache];
if(isCache){
c=inst[b.cache]||b.to&&b.to(inst._rgba)||[];
each(b.props,function(_,a){
if(isCache[a.idx]!=null){
same=(isCache[a.idx]===c[a.idx]);
return same;
}
});
}
return same;
});
return same;
},
_space:function(){
var c=[],
inst=this;
each(spaces,function(a,b){
if(inst[b.cache]){
c.push(a);
}
});
return c.pop();
},
transition:function(d,e){
var f=color(d),
spaceName=f._space(),
space=spaces[spaceName],
startColor=this.alpha()===0?color("transparent"):this,
start=startColor[space.cache]||space.to(startColor._rgba),
result=start.slice();
f=f[space.cache];
each(space.props,function(a,b){
var c=b.idx,
startValue=start[c],
endValue=f[c],
type=propTypes[b.type]||{};
if(endValue===null){
return;
}
if(startValue===null){
result[c]=endValue;
}else{
if(type.mod){
if(endValue-startValue>type.mod/2){
startValue+=type.mod;
}else if(startValue-endValue>type.mod/2){
startValue-=type.mod;
}
}
result[c]=clamp((endValue-startValue)*e+startValue,b);
}
});
return this[spaceName](result);
},
blend:function(b){
if(this._rgba[3]===1){
return this;
}
var c=this._rgba.slice(),
a=c.pop(),
blend=color(b)._rgba;
return color(k.map(c,function(v,i){
return(1-a)*blend[i]+a*v;
}));
},
toRgbaString:function(){
var a="rgba(",
rgba=k.map(this._rgba,function(v,i){
return v==null?(i>2?1:0):v;
});
if(rgba[3]===1){
rgba.pop();
a="rgb(";
}
return a+rgba.join()+")";
},
toHslaString:function(){
var a="hsla(",
hsla=k.map(this.hsla(),function(v,i){
if(v==null){
v=i>2?1:0;
}
if(i&&i<3){
v=Math.round(v*100)+"%";
}
return v;
});
if(hsla[3]===1){
hsla.pop();
a="hsl(";
}
return a+hsla.join()+")";
},
toHexString:function(a){
var b=this._rgba.slice(),
alpha=b.pop();
if(a){
b.push(~~(alpha*255));
}
return"#"+k.map(b,function(v){
v=(v||0).toString(16);
return v.length===1?"0"+v:v;
}).join("");
},
toString:function(){
return this._rgba[3]===0?"transparent":this.toRgbaString();
}
});
color.fn.parse.prototype=color.fn;
function hue2rgb(p,q,h){
h=(h+1)%1;
if(h*6<1){
return p+(q-p)*h*6;
}
if(h*2<1){
return q;
}
if(h*3<2){
return p+(q-p)*((2/3)-h)*6;
}
return p;
}
spaces.hsla.to=function(c){
if(c[0]==null||c[1]==null||c[2]==null){
return[null,null,null,c[3]];
}
var r=c[0]/255,
g=c[1]/255,
b=c[2]/255,
a=c[3],
max=Math.max(r,g,b),
min=Math.min(r,g,b),
diff=max-min,
add=max+min,
l=add*0.5,
h,s;
if(min===max){
h=0;
}else if(r===max){
h=(60*(g-b)/diff)+360;
}else if(g===max){
h=(60*(b-r)/diff)+120;
}else{
h=(60*(r-g)/diff)+240;
}
if(diff===0){
s=0;
}else if(l<=0.5){
s=diff/add;
}else{
s=diff/(2-add);
}
return[Math.round(h)%360,s,l,a==null?1:a];
};
spaces.hsla.from=function(b){
if(b[0]==null||b[1]==null||b[2]==null){
return[null,null,null,b[3]];
}
var h=b[0]/360,
s=b[1],
l=b[2],
a=b[3],
q=l<=0.5?l*(1+s):l+s-l*s,
p=2*l-q;
return[
Math.round(hue2rgb(p,q,h+(1/3))*255),
Math.round(hue2rgb(p,q,h)*255),
Math.round(hue2rgb(p,q,h-(1/3))*255),
a
];
};
each(spaces,function(f,g){
var h=g.props,
cache=g.cache,
to=g.to,
from=g.from;
color.fn[f]=function(d){
if(to&&!this[cache]){
this[cache]=to(this._rgba);
}
if(d===m){
return this[cache].slice();
}
var e,
type=k.type(d),
arr=(type==="array"||type==="object")?d:arguments,
local=this[cache].slice();
each(h,function(a,b){
var c=arr[type==="object"?a:b.idx];
if(c==null){
c=local[b.idx];
}
local[b.idx]=clamp(c,b);
});
if(from){
e=color(from(local));
e[cache]=local;
return e;
}else{
return color(local);
}
};
each(h,function(c,d){
if(color.fn[c]){
return;
}
color.fn[c]=function(a){
var b=k.type(a),
fn=(c==="alpha"?(this._hsla?"hsla":"rgba"):f),
local=this[fn](),
cur=local[d.idx],
match;
if(b==="undefined"){
return cur;
}
if(b==="function"){
a=a.call(this,cur);
b=k.type(a);
}
if(a==null&&d.empty){
return this;
}
if(b==="string"){
match=rplusequals.exec(a);
if(match){
a=cur+parseFloat(match[2])*(match[1]==="+"?1:-1);
}
}
local[d.idx]=a;
return this[fn](local);
};
});
});
color.hook=function(f){
var g=f.split(" ");
each(g,function(i,d){
k.cssHooks[d]={
set:function(a,b){
var c,curElem,
backgroundColor="";
if(b!=="transparent"&&(k.type(b)!=="string"||(c=stringParse(b)))){
b=color(c||b);
if(!support.rgba&&b._rgba[3]!==1){
curElem=d==="backgroundColor"?a.parentNode:a;
while(
(backgroundColor===""||backgroundColor==="transparent")&&
curElem&&curElem.style
){
try{
backgroundColor=k.css(curElem,"backgroundColor");
curElem=curElem.parentNode;
}catch(e){
}
}
b=b.blend(backgroundColor&&backgroundColor!=="transparent"?
backgroundColor:
"_default");
}
b=b.toRgbaString();
}
try{
a.style[d]=b;
}catch(e){
}
}
};
k.fx.step[d]=function(a){
if(!a.colorInit){
a.start=color(a.elem,d);
a.end=color(a.end);
a.colorInit=true;
}
k.cssHooks[d].set(a.elem,a.start.transition(a.end,a.pos));
};
});
};
color.hook(n);
k.cssHooks.borderColor={
expand:function(b){
var c={};
each(["Top","Right","Bottom","Left"],function(i,a){
c["border"+a+"Color"]=b;
});
return c;
}
};
colors=k.Color.names={
aqua:"#00ffff",
black:"#000000",
blue:"#0000ff",
fuchsia:"#ff00ff",
gray:"#808080",
green:"#008000",
lime:"#00ff00",
maroon:"#800000",
navy:"#000080",
olive:"#808000",
purple:"#800080",
red:"#ff0000",
silver:"#c0c0c0",
teal:"#008080",
white:"#ffffff",
yellow:"#ffff00",
transparent:[null,null,null,0],
_default:"#ffffff"
};
})(jQuery);



(function(){
var h=["add","remove","toggle"],
shorthandStyles={
border:1,
borderBottom:1,
borderColor:1,
borderLeft:1,
borderRight:1,
borderTop:1,
borderWidth:1,
margin:1,
padding:1
};
$.each(["borderLeftStyle","borderRightStyle","borderBottomStyle","borderTopStyle"],function(_,b){
$.fx.step[b]=function(a){
if(a.end!=="none"&&!a.setAttr||a.pos===1&&!a.setAttr){
jQuery.style(a.elem,b,a.end);
a.setAttr=true;
}
};
});
function getElementStyles(a){
var b,len,
style=a.ownerDocument.defaultView?
a.ownerDocument.defaultView.getComputedStyle(a,null):
a.currentStyle,
styles={};
if(style&&style.length&&style[0]&&style[style[0]]){
len=style.length;
while(len--){
b=style[len];
if(typeof style[b]==="string"){
styles[$.camelCase(b)]=style[b];
}
}
}else{
for(b in style){
if(typeof style[b]==="string"){
styles[b]=style[b];
}
}
}
return styles;
}
function styleDifference(a,b){
var c={},
name,value;
for(name in b){
value=b[name];
if(a[name]!==value){
if(!shorthandStyles[name]){
if($.fx.step[name]||!isNaN(parseFloat(value))){
c[name]=value;
}
}
}
}
return c;
}
if(!$.fn.addBack){
$.fn.addBack=function(a){
return this.add(a==null?
this.prevObject:this.prevObject.filter(a)
);
};
}
$.effects.animateClass=function(d,e,f,g){
var o=$.speed(e,f,g);
return this.queue(function(){
var c=$(this),
baseClass=c.attr("class")||"",
applyClassChange,
allAnimations=o.children?c.find("*").addBack():c;
allAnimations=allAnimations.map(function(){
var a=$(this);
return{
a:a,
start:getElementStyles(this)
};
});
applyClassChange=function(){
$.each(h,function(i,a){
if(d[a]){
c[a+"Class"](d[a]);
}
});
};
applyClassChange();
allAnimations=allAnimations.map(function(){
this.end=getElementStyles(this.el[0]);
this.diff=styleDifference(this.start,this.end);
return this;
});
c.attr("class",baseClass);
allAnimations=allAnimations.map(function(){
var a=this,
dfd=$.Deferred(),
opts=$.extend({},o,{
queue:false,
complete:function(){
dfd.resolve(a);
}
});
this.el.animate(this.diff,opts);
return dfd.promise();
});
$.when.apply($,allAnimations.get()).done(function(){
applyClassChange();
$.each(arguments,function(){
var b=this.el;
$.each(this.diff,function(a){
b.css(a,"");
});
});
o.complete.call(c[0]);
});
});
};
$.fn.extend({
addClass:(function(e){
return function(a,b,c,d){
return b?
$.effects.animateClass.call(this,
{add:a},b,c,d):
e.apply(this,arguments);
};
})($.fn.addClass),
removeClass:(function(e){
return function(a,b,c,d){
return arguments.length>1?
$.effects.animateClass.call(this,
{remove:a},b,c,d):
e.apply(this,arguments);
};
})($.fn.removeClass),
toggleClass:(function(f){
return function(a,b,c,d,e){
if(typeof b==="boolean"||b===t){
if(!c){
return f.apply(this,arguments);
}else{
return $.effects.animateClass.call(this,
(b?{add:a}:{remove:a}),
c,d,e);
}
}else{
return $.effects.animateClass.call(this,
{toggle:a},b,c,d);
}
};
})($.fn.toggleClass),
switchClass:function(a,b,c,d,e){
return $.effects.animateClass.call(this,{
b:b,
a:a
},c,d,e);
}
});
})();



(function(){
$.extend($.effects,{
version:"1.10.4",
save:function(a,b){
for(var i=0;i<b.length;i++){
if(b[i]!==null){
a.data(u+b[i],a[0].style[b[i]]);
}
}
},
restore:function(a,b){
var c,i;
for(i=0;i<b.length;i++){
if(b[i]!==null){
c=a.data(u+b[i]);
if(c===t){
c="";
}
a.css(b[i],c);
}
}
},
setMode:function(a,b){
if(b==="toggle"){
b=a.is(":hidden")?"show":"hide";
}
return b;
},
getBaseline:function(a,b){
var y,x;
switch(a[0]){
case"top":y=0;break;
case"middle":y=0.5;break;
case"bottom":y=1;break;
default:y=a[0]/b.height;
}
switch(a[1]){
case"left":x=0;break;
case"center":x=0.5;break;
case"right":x=1;break;
default:x=a[1]/b.width;
}
return{
x:x,
y:y
};
},
createWrapper:function(b){
if(b.parent().is(".ui-effects-wrapper")){
return b.parent();
}
var c={
width:b.outerWidth(true),
height:b.outerHeight(true),
"float":b.css("float")
},
wrapper=$("<div></div>")
.addClass("ui-effects-wrapper")
.css({
fontSize:"100%",
background:"transparent",
border:"none",
margin:0,
padding:0
}),
size={
width:b.width(),
height:b.height()
},
active=document.activeElement;
try{
active.id;
}catch(e){
active=document.body;
}
b.wrap(wrapper);
if(b[0]===active||$.contains(b[0],active)){
$(active).focus();
}
wrapper=b.parent();if(b.css("position")==="static"){
wrapper.css({position:"relative"});
b.css({position:"relative"});
}else{
$.extend(c,{
position:b.css("position"),
zIndex:b.css("z-index")
});
$.each(["top","left","bottom","right"],function(i,a){
c[a]=b.css(a);
if(isNaN(parseInt(c[a],10))){
c[a]="auto";
}
});
b.css({
position:"relative",
top:0,
left:0,
right:"auto",
bottom:"auto"
});
}
b.css(size);
return wrapper.css(c).show();
},
removeWrapper:function(a){
var b=document.activeElement;
if(a.parent().is(".ui-effects-wrapper")){
a.parent().replaceWith(a);
if(a[0]===b||$.contains(a[0],b)){
$(b).focus();
}
}
return a;
},
setTransition:function(b,c,d,e){
e=e||{};
$.each(c,function(i,x){
var a=b.cssUnit(x);
if(a[0]>0){
e[x]=a[0]*d+a[1];
}
});
return e;
}
});
function _normalizeArguments(a,b,c,d){
if($.isPlainObject(a)){
b=a;
a=a.effect;
}
a={effect:a};
if(b==null){
b={};
}
if($.isFunction(b)){
d=b;
c=null;
b={};
}
if(typeof b==="number"||$.fx.speeds[b]){
d=c;
c=b;
b={};
}
if($.isFunction(c)){
d=c;
c=null;
}
if(b){
$.extend(a,b);
}
c=c||b.duration;
a.duration=$.fx.off?0:
typeof c==="number"?c:
c in $.fx.speeds?$.fx.speeds[c]:
$.fx.speeds._default;
a.complete=d||b.complete;
return a;
}
function standardAnimationOption(a){
if(!a||typeof a==="number"||$.fx.speeds[a]){
return true;
}
if(typeof a==="string"&&!$.effects.effect[a]){
return true;
}
if($.isFunction(a)){
return true;
}
if(typeof a==="object"&&!a.effect){
return true;
}
return false;
}
$.fn.extend({
effect:function(){
var c=_normalizeArguments.apply(this,arguments),
mode=c.mode,
queue=c.queue,
effectMethod=$.effects.effect[c.effect];
if($.fx.off||!effectMethod){
if(mode){
return this[mode](c.duration,c.complete);
}else{
return this.each(function(){
if(c.complete){
c.complete.call(this);
}
});
}
}
function run(a){
var b=$(this),
complete=c.complete,
mode=c.mode;
function done(){
if($.isFunction(complete)){
complete.call(b[0]);
}
if($.isFunction(a)){
a();
}
}
if(b.is(":hidden")?mode==="hide":mode==="show"){
b[mode]();
done();
}else{
effectMethod.call(b[0],c,done);
}
}
return queue===false?this.each(run):this.queue(queue||"fx",run);
},
show:(function(c){
return function(a){
if(standardAnimationOption(a)){
return c.apply(this,arguments);
}else{
var b=_normalizeArguments.apply(this,arguments);
b.mode="show";
return this.effect.call(this,b);
}
};
})($.fn.show),
hide:(function(c){
return function(a){
if(standardAnimationOption(a)){
return c.apply(this,arguments);
}else{
var b=_normalizeArguments.apply(this,arguments);
b.mode="hide";
return this.effect.call(this,b);
}
};
})($.fn.hide),
toggle:(function(c){
return function(a){
if(standardAnimationOption(a)||typeof a==="boolean"){
return c.apply(this,arguments);
}else{
var b=_normalizeArguments.apply(this,arguments);
b.mode="toggle";
return this.effect.call(this,b);
}
};
})($.fn.toggle),
cssUnit:function(b){
var c=this.css(b),
val=[];
$.each(["em","px","%","pt"],function(i,a){
if(c.indexOf(a)>0){
val=[parseFloat(c),a];
}
});
return val;
}
});
})();



(function(){
var c={};
$.each(["Quad","Cubic","Quart","Quint","Expo"],function(i,a){
c[a]=function(p){
return Math.pow(p,i+2);
};
});
$.extend(c,{
Sine:function(p){
return 1-Math.cos(p*Math.PI/2);
},
Circ:function(p){
return 1-Math.sqrt(1-p*p);
},
Elastic:function(p){
return p===0||p===1?p:
-Math.pow(2,8*(p-1))*Math.sin(((p-1)*80-7.5)*Math.PI/15);
},
Back:function(p){
return p*p*(3*p-2);
},
Bounce:function(p){
var a,
bounce=4;
while(p<((a=Math.pow(2,--bounce))-1)/11){}
return 1/Math.pow(4,3-bounce)-7.5625*Math.pow((a*3-2)/22-p,2);
}
});
$.each(c,function(a,b){
$.easing["easeIn"+a]=b;
$.easing["easeOut"+a]=function(p){
return 1-b(1-p);
};
$.easing["easeInOut"+a]=function(p){
return p<0.5?
b(p*2)/2:
1-b(p*-2+2)/2;
};
});
})();
})(jQuery);
(function($,c){
var d=/up|down|vertical/,
rpositivemotion=/up|left|vertical|horizontal/;
$.effects.effect.blind=function(o,a){
var b=$(this),
props=["position","top","bottom","left","right","height","width"],
mode=$.effects.setMode(b,o.mode||"hide"),
direction=o.direction||"up",
vertical=d.test(direction),
ref=vertical?"height":"width",
ref2=vertical?"top":"left",
motion=rpositivemotion.test(direction),
animation={},
show=mode==="show",
wrapper,distance,margin;
if(b.parent().is(".ui-effects-wrapper")){
$.effects.save(b.parent(),props);
}else{
$.effects.save(b,props);
}
b.show();
wrapper=$.effects.createWrapper(b).css({
overflow:"hidden"
});
distance=wrapper[ref]();
margin=parseFloat(wrapper.css(ref2))||0;
animation[ref]=show?distance:0;
if(!motion){
b
.css(vertical?"bottom":"right",0)
.css(vertical?"top":"left","auto")
.css({position:"absolute"});
animation[ref2]=show?margin:distance+margin;
}
if(show){
wrapper.css(ref,0);
if(!motion){
wrapper.css(ref2,margin+distance);
}
}
wrapper.animate(animation,{
duration:o.duration,
easing:o.easing,
queue:false,
complete:function(){
if(mode==="hide"){
b.hide();
}
$.effects.restore(b,props);
$.effects.removeWrapper(b);
a();
}
});
};
})(jQuery);
(function($,c){
$.effects.effect.bounce=function(o,a){
var b=$(this),
props=["position","top","bottom","left","right","height","width"],
mode=$.effects.setMode(b,o.mode||"effect"),
hide=mode==="hide",
show=mode==="show",
direction=o.direction||"up",
distance=o.distance,
times=o.times||5,
anims=times*2+(show||hide?1:0),
speed=o.duration/anims,
easing=o.easing,
ref=(direction==="up"||direction==="down")?"top":"left",
motion=(direction==="up"||direction==="left"),
i,
upAnim,
downAnim,
queue=b.queue(),
queuelen=queue.length;
if(show||hide){
props.push("opacity");
}
$.effects.save(b,props);
b.show();
$.effects.createWrapper(b);if(!distance){
distance=b[ref==="top"?"outerHeight":"outerWidth"]()/3;
}
if(show){
downAnim={opacity:1};
downAnim[ref]=0;
b.css("opacity",0)
.css(ref,motion?-distance*2:distance*2)
.animate(downAnim,speed,easing);
}
if(hide){
distance=distance/Math.pow(2,times-1);
}
downAnim={};
downAnim[ref]=0;
for(i=0;i<times;i++){
upAnim={};
upAnim[ref]=(motion?"-=":"+=")+distance;
b.animate(upAnim,speed,easing)
.animate(downAnim,speed,easing);
distance=hide?distance*2:distance/2;
}
if(hide){
upAnim={opacity:0};
upAnim[ref]=(motion?"-=":"+=")+distance;
b.animate(upAnim,speed,easing);
}
b.queue(function(){
if(hide){
b.hide();
}
$.effects.restore(b,props);
$.effects.removeWrapper(b);
a();
});
if(queuelen>1){
queue.splice.apply(queue,
[1,0].concat(queue.splice(queuelen,anims+1)));
}
b.dequeue();
};
})(jQuery);
(function($,c){
$.effects.effect.clip=function(o,a){
var b=$(this),
props=["position","top","bottom","left","right","height","width"],
mode=$.effects.setMode(b,o.mode||"hide"),
show=mode==="show",
direction=o.direction||"vertical",
vert=direction==="vertical",
size=vert?"height":"width",
position=vert?"top":"left",
animation={},
wrapper,animate,distance;
$.effects.save(b,props);
b.show();
wrapper=$.effects.createWrapper(b).css({
overflow:"hidden"
});
animate=(b[0].tagName==="IMG")?wrapper:b;
distance=animate[size]();
if(show){
animate.css(size,0);
animate.css(position,distance/2);
}
animation[size]=show?distance:0;
animation[position]=show?0:distance/2;
animate.animate(animation,{
queue:false,
duration:o.duration,
easing:o.easing,
complete:function(){
if(!show){
b.hide();
}
$.effects.restore(b,props);
$.effects.removeWrapper(b);
a();
}
});
};
})(jQuery);
(function($,c){
$.effects.effect.drop=function(o,a){
var b=$(this),
props=["position","top","bottom","left","right","opacity","height","width"],
mode=$.effects.setMode(b,o.mode||"hide"),
show=mode==="show",
direction=o.direction||"left",
ref=(direction==="up"||direction==="down")?"top":"left",
motion=(direction==="up"||direction==="left")?"pos":"neg",
animation={
opacity:show?1:0
},
distance;
$.effects.save(b,props);
b.show();
$.effects.createWrapper(b);
distance=o.distance||b[ref==="top"?"outerHeight":"outerWidth"](true)/2;
if(show){
b
.css("opacity",0)
.css(ref,motion==="pos"?-distance:distance);
}
animation[ref]=(show?
(motion==="pos"?"+=":"-="):
(motion==="pos"?"-=":"+="))+
distance;
b.animate(animation,{
queue:false,
duration:o.duration,
easing:o.easing,
complete:function(){
if(mode==="hide"){
b.hide();
}
$.effects.restore(b,props);
$.effects.removeWrapper(b);
a();
}
});
};
})(jQuery);
(function($,c){
$.effects.effect.explode=function(o,a){
var b=o.pieces?Math.round(Math.sqrt(o.pieces)):3,
cells=b,
el=$(this),
mode=$.effects.setMode(el,o.mode||"hide"),
show=mode==="show",
offset=el.show().css("visibility","hidden").offset(),
width=Math.ceil(el.outerWidth()/cells),
height=Math.ceil(el.outerHeight()/b),
pieces=[],
i,j,left,top,mx,my;
function childComplete(){
pieces.push(this);
if(pieces.length===b*cells){
animComplete();
}
}
for(i=0;i<b;i++){top=offset.top+i*height;
my=i-(b-1)/2;
for(j=0;j<cells;j++){left=offset.left+j*width;
mx=j-(cells-1)/2;
el
.clone()
.appendTo("body")
.wrap("<div></div>")
.css({
position:"absolute",
visibility:"visible",
left:-j*width,
top:-i*height
})
.parent()
.addClass("ui-effects-explode")
.css({
position:"absolute",
overflow:"hidden",
width:width,
height:height,
left:left+(show?mx*width:0),
top:top+(show?my*height:0),
opacity:show?0:1
}).animate({
left:left+(show?0:mx*width),
top:top+(show?0:my*height),
opacity:show?1:0
},o.duration||500,o.easing,childComplete);
}
}
function animComplete(){
el.css({
visibility:"visible"
});
$(pieces).remove();
if(!show){
el.hide();
}
a();
}
};
})(jQuery);
(function($,c){
$.effects.effect.fade=function(o,a){
var b=$(this),
mode=$.effects.setMode(b,o.mode||"toggle");
b.animate({
opacity:mode
},{
queue:false,
duration:o.duration,
easing:o.easing,
complete:a
});
};
})(jQuery);
(function($,c){
$.effects.effect.fold=function(o,a){
var b=$(this),
props=["position","top","bottom","left","right","height","width"],
mode=$.effects.setMode(b,o.mode||"hide"),
show=mode==="show",
hide=mode==="hide",
size=o.size||15,
percent=/([0-9]+)%/.exec(size),
horizFirst=!!o.horizFirst,
widthFirst=show!==horizFirst,
ref=widthFirst?["width","height"]:["height","width"],
duration=o.duration/2,
wrapper,distance,
animation1={},
animation2={};
$.effects.save(b,props);
b.show();
wrapper=$.effects.createWrapper(b).css({
overflow:"hidden"
});
distance=widthFirst?
[wrapper.width(),wrapper.height()]:
[wrapper.height(),wrapper.width()];
if(percent){
size=parseInt(percent[1],10)/100*distance[hide?0:1];
}
if(show){
wrapper.css(horizFirst?{
height:0,
width:size
}:{
height:size,
width:0
});
}
animation1[ref[0]]=show?distance[0]:size;
animation2[ref[1]]=show?distance[1]:0;
wrapper
.animate(animation1,duration,o.easing)
.animate(animation2,duration,o.easing,function(){
if(hide){
b.hide();
}
$.effects.restore(b,props);
$.effects.removeWrapper(b);
a();
});
};
})(jQuery);
(function($,c){
$.effects.effect.highlight=function(o,a){
var b=$(this),
props=["backgroundImage","backgroundColor","opacity"],
mode=$.effects.setMode(b,o.mode||"show"),
animation={
backgroundColor:b.css("backgroundColor")
};
if(mode==="hide"){
animation.opacity=0;
}
$.effects.save(b,props);
b
.show()
.css({
backgroundImage:"none",
backgroundColor:o.color||"#ffff99"
})
.animate(animation,{
queue:false,
duration:o.duration,
easing:o.easing,
complete:function(){
if(mode==="hide"){
b.hide();
}
$.effects.restore(b,props);
a();
}
});
};
})(jQuery);
(function($,c){
$.effects.effect.pulsate=function(o,a){
var b=$(this),
mode=$.effects.setMode(b,o.mode||"show"),
show=mode==="show",
hide=mode==="hide",
showhide=(show||mode==="hide"),
anims=((o.times||5)*2)+(showhide?1:0),
duration=o.duration/anims,
animateTo=0,
queue=b.queue(),
queuelen=queue.length,
i;
if(show||!b.is(":visible")){
b.css("opacity",0).show();
animateTo=1;
}
for(i=1;i<anims;i++){
b.animate({
opacity:animateTo
},duration,o.easing);
animateTo=1-animateTo;
}
b.animate({
opacity:animateTo
},duration,o.easing);
b.queue(function(){
if(hide){
b.hide();
}
a();
});
if(queuelen>1){
queue.splice.apply(queue,
[1,0].concat(queue.splice(queuelen,anims+1)));
}
b.dequeue();
};
})(jQuery);
(function($,g){
$.effects.effect.puff=function(o,a){
var b=$(this),
mode=$.effects.setMode(b,o.mode||"hide"),
hide=mode==="hide",
percent=parseInt(o.percent,10)||150,
factor=percent/100,
original={
height:b.height(),
width:b.width(),
outerHeight:b.outerHeight(),
outerWidth:b.outerWidth()
};
$.extend(o,{
effect:"scale",
queue:false,
fade:true,
mode:mode,
complete:a,
percent:hide?percent:100,
from:hide?
original:
{
height:original.height*factor,
width:original.width*factor,
outerHeight:original.outerHeight*factor,
outerWidth:original.outerWidth*factor
}
});
b.effect(o);
};
$.effects.effect.scale=function(o,a){
var b=$(this),
options=$.extend(true,{},o),
mode=$.effects.setMode(b,o.mode||"effect"),
percent=parseInt(o.percent,10)||
(parseInt(o.percent,10)===0?0:(mode==="hide"?0:100)),
direction=o.direction||"both",
origin=o.origin,
original={
height:b.height(),
width:b.width(),
outerHeight:b.outerHeight(),
outerWidth:b.outerWidth()
},
factor={
y:direction!=="horizontal"?(percent/100):1,
x:direction!=="vertical"?(percent/100):1
};
options.effect="size";
options.queue=false;
options.complete=a;
if(mode!=="effect"){
options.origin=origin||["middle","center"];
options.restore=true;
}
options.from=o.from||(mode==="show"?{
height:0,
width:0,
outerHeight:0,
outerWidth:0
}:original);
options.to={
height:original.height*factor.y,
width:original.width*factor.x,
outerHeight:original.outerHeight*factor.y,
outerWidth:original.outerWidth*factor.x
};
if(options.fade){
if(mode==="show"){
options.from.opacity=0;
options.to.opacity=1;
}
if(mode==="hide"){
options.from.opacity=1;
options.to.opacity=0;
}
}
b.effect(options);
};
$.effects.effect.size=function(o,e){
var f,baseline,factor,
el=$(this),
props0=["position","top","bottom","left","right","width","height","overflow","opacity"],
props1=["position","top","bottom","left","right","overflow","opacity"],
props2=["width","height","overflow"],
cProps=["fontSize"],
vProps=["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"],
hProps=["borderLeftWidth","borderRightWidth","paddingLeft","paddingRight"],
mode=$.effects.setMode(el,o.mode||"effect"),
restore=o.restore||mode!=="effect",
scale=o.scale||"both",
origin=o.origin||["middle","center"],
position=el.css("position"),
props=restore?props0:props1,
zero={
height:0,
width:0,
outerHeight:0,
outerWidth:0
};
if(mode==="show"){
el.show();
}
f={
height:el.height(),
width:el.width(),
outerHeight:el.outerHeight(),
outerWidth:el.outerWidth()
};
if(o.mode==="toggle"&&mode==="show"){
el.from=o.to||zero;
el.to=o.from||f;
}else{
el.from=o.from||(mode==="show"?zero:f);
el.to=o.to||(mode==="hide"?zero:f);
}
factor={
from:{
y:el.from.height/f.height,
x:el.from.width/f.width
},
to:{
y:el.to.height/f.height,
x:el.to.width/f.width
}
};
if(scale==="box"||scale==="both"){
if(factor.from.y!==factor.to.y){
props=props.concat(vProps);
el.from=$.effects.setTransition(el,vProps,factor.from.y,el.from);
el.to=$.effects.setTransition(el,vProps,factor.to.y,el.to);
}
if(factor.from.x!==factor.to.x){
props=props.concat(hProps);
el.from=$.effects.setTransition(el,hProps,factor.from.x,el.from);
el.to=$.effects.setTransition(el,hProps,factor.to.x,el.to);
}
}
if(scale==="content"||scale==="both"){
if(factor.from.y!==factor.to.y){
props=props.concat(cProps).concat(props2);
el.from=$.effects.setTransition(el,cProps,factor.from.y,el.from);
el.to=$.effects.setTransition(el,cProps,factor.to.y,el.to);
}
}
$.effects.save(el,props);
el.show();
$.effects.createWrapper(el);
el.css("overflow","hidden").css(el.from);
if(origin){baseline=$.effects.getBaseline(origin,f);
el.from.top=(f.outerHeight-el.outerHeight())*baseline.y;
el.from.left=(f.outerWidth-el.outerWidth())*baseline.x;
el.to.top=(f.outerHeight-el.to.outerHeight)*baseline.y;
el.to.left=(f.outerWidth-el.to.outerWidth)*baseline.x;
}
el.css(el.from);if(scale==="content"||scale==="both"){vProps=vProps.concat(["marginTop","marginBottom"]).concat(cProps);
hProps=hProps.concat(["marginLeft","marginRight"]);
props2=props0.concat(vProps).concat(hProps);
el.find("*[width]").each(function(){
var a=$(this),
c_original={
height:a.height(),
width:a.width(),
outerHeight:a.outerHeight(),
outerWidth:a.outerWidth()
};
if(restore){
$.effects.save(a,props2);
}
a.from={
height:c_original.height*factor.from.y,
width:c_original.width*factor.from.x,
outerHeight:c_original.outerHeight*factor.from.y,
outerWidth:c_original.outerWidth*factor.from.x
};
a.to={
height:c_original.height*factor.to.y,
width:c_original.width*factor.to.x,
outerHeight:c_original.height*factor.to.y,
outerWidth:c_original.width*factor.to.x
};
if(factor.from.y!==factor.to.y){
a.from=$.effects.setTransition(a,vProps,factor.from.y,a.from);
a.to=$.effects.setTransition(a,vProps,factor.to.y,a.to);
}
if(factor.from.x!==factor.to.x){
a.from=$.effects.setTransition(a,hProps,factor.from.x,a.from);
a.to=$.effects.setTransition(a,hProps,factor.to.x,a.to);
}
a.css(a.from);
a.animate(a.to,o.duration,o.easing,function(){
if(restore){
$.effects.restore(a,props2);
}
});
});
}
el.animate(el.to,{
queue:false,
duration:o.duration,
easing:o.easing,
complete:function(){
if(el.to.opacity===0){
el.css("opacity",el.from.opacity);
}
if(mode==="hide"){
el.hide();
}
$.effects.restore(el,props);
if(!restore){
if(position==="static"){
el.css({
position:"relative",
top:el.to.top,
left:el.to.left
});
}else{
$.each(["top","left"],function(c,d){
el.css(d,function(_,a){
var b=parseInt(a,10),
toRef=c?el.to.left:el.to.top;
if(a==="auto"){
return toRef+"px";
}
return b+toRef+"px";
});
});
}
}
$.effects.removeWrapper(el);
e();
}
});
};
})(jQuery);
(function($,c){
$.effects.effect.shake=function(o,a){
var b=$(this),
props=["position","top","bottom","left","right","height","width"],
mode=$.effects.setMode(b,o.mode||"effect"),
direction=o.direction||"left",
distance=o.distance||20,
times=o.times||3,
anims=times*2+1,
speed=Math.round(o.duration/anims),
ref=(direction==="up"||direction==="down")?"top":"left",
positiveMotion=(direction==="up"||direction==="left"),
animation={},
animation1={},
animation2={},
i,
queue=b.queue(),
queuelen=queue.length;
$.effects.save(b,props);
b.show();
$.effects.createWrapper(b);
animation[ref]=(positiveMotion?"-=":"+=")+distance;
animation1[ref]=(positiveMotion?"+=":"-=")+distance*2;
animation2[ref]=(positiveMotion?"-=":"+=")+distance*2;
b.animate(animation,speed,o.easing);
for(i=1;i<times;i++){
b.animate(animation1,speed,o.easing).animate(animation2,speed,o.easing);
}
b
.animate(animation1,speed,o.easing)
.animate(animation,speed/2,o.easing)
.queue(function(){
if(mode==="hide"){
b.hide();
}
$.effects.restore(b,props);
$.effects.removeWrapper(b);
a();
});
if(queuelen>1){
queue.splice.apply(queue,
[1,0].concat(queue.splice(queuelen,anims+1)));
}
b.dequeue();
};
})(jQuery);
(function($,c){
$.effects.effect.slide=function(o,a){
var b=$(this),
props=["position","top","bottom","left","right","width","height"],
mode=$.effects.setMode(b,o.mode||"show"),
show=mode==="show",
direction=o.direction||"left",
ref=(direction==="up"||direction==="down")?"top":"left",
positiveMotion=(direction==="up"||direction==="left"),
distance,
animation={};
$.effects.save(b,props);
b.show();
distance=o.distance||b[ref==="top"?"outerHeight":"outerWidth"](true);
$.effects.createWrapper(b).css({
overflow:"hidden"
});
if(show){
b.css(ref,positiveMotion?(isNaN(distance)?"-"+distance:-distance):distance);
}
animation[ref]=(show?
(positiveMotion?"+=":"-="):
(positiveMotion?"-=":"+="))+
distance;
b.animate(animation,{
queue:false,
duration:o.duration,
easing:o.easing,
complete:function(){
if(mode==="hide"){
b.hide();
}
$.effects.restore(b,props);
$.effects.removeWrapper(b);
a();
}
});
};
})(jQuery);
(function($,c){
$.effects.effect.transfer=function(o,a){
var b=$(this),
target=$(o.to),
targetFixed=target.css("position")==="fixed",
body=$("body"),
fixTop=targetFixed?body.scrollTop():0,
fixLeft=targetFixed?body.scrollLeft():0,
endPosition=target.offset(),
animation={
top:endPosition.top-fixTop,
left:endPosition.left-fixLeft,
height:target.innerHeight(),
width:target.innerWidth()
},
startPosition=b.offset(),
transfer=$("<div class='ui-effects-transfer'></div>")
.appendTo(document.body)
.addClass(o.className)
.css({
top:startPosition.top-fixTop,
left:startPosition.left-fixLeft,
height:b.innerHeight(),
width:b.innerWidth(),
position:targetFixed?"fixed":"absolute"
})
.animate(animation,o.duration,o.easing,function(){
transfer.remove();
a();
});
};
})(jQuery);
(function($,e){
$.widget("ui.menu",{
version:"1.10.4",
defaultElement:"<ul>",
delay:300,
options:{
icons:{
submenu:"ui-icon-carat-1-e"
},
menus:"ul",
position:{
my:"left top",
at:"right top"
},
role:"menu",
blur:null,
focus:null,
select:null
},
_create:function(){
this.activeMenu=this.element;
this.mouseHandled=false;
this.element
.uniqueId()
.addClass("ui-menu ui-widget ui-widget-content ui-corner-all")
.toggleClass("ui-menu-icons",!!this.element.find(".ui-icon").length)
.attr({
role:this.options.role,
tabIndex:0
})
.bind("click"+this.eventNamespace,$.proxy(function(a){
if(this.options.disabled){
a.preventDefault();
}
},this));
if(this.options.disabled){
this.element
.addClass("ui-state-disabled")
.attr("aria-disabled","true");
}
this._on({
"mousedown .ui-menu-item > a":function(a){
a.preventDefault();
},
"click .ui-state-disabled > a":function(a){
a.preventDefault();
},
"click .ui-menu-item:has(a)":function(a){
var b=$(a.target).closest(".ui-menu-item");
if(!this.mouseHandled&&b.not(".ui-state-disabled").length){
this.select(a);
if(!a.isPropagationStopped()){
this.mouseHandled=true;
}
if(b.has(".ui-menu").length){
this.expand(a);
}else if(!this.element.is(":focus")&&$(this.document[0].activeElement).closest(".ui-menu").length){
this.element.trigger("focus",[true]);
if(this.active&&this.active.parents(".ui-menu").length===1){
clearTimeout(this.timer);
}
}
}
},
"mouseenter .ui-menu-item":function(a){
var b=$(a.currentTarget);
b.siblings().children(".ui-state-active").removeClass("ui-state-active");
this.focus(a,b);
},
mouseleave:"collapseAll",
"mouseleave .ui-menu":"collapseAll",
focus:function(a,b){
var c=this.active||this.element.children(".ui-menu-item").eq(0);
if(!b){
this.focus(a,c);
}
},
blur:function(a){
this._delay(function(){
if(!$.contains(this.element[0],this.document[0].activeElement)){
this.collapseAll(a);
}
});
},
keydown:"_keydown"
});
this.refresh();
this._on(this.document,{
click:function(a){
if(!$(a.target).closest(".ui-menu").length){
this.collapseAll(a);
}
this.mouseHandled=false;
}
});
},
_destroy:function(){
this.element
.removeAttr("aria-activedescendant")
.find(".ui-menu").addBack()
.removeClass("ui-menu ui-widget ui-widget-content ui-corner-all ui-menu-icons")
.removeAttr("role")
.removeAttr("tabIndex")
.removeAttr("aria-labelledby")
.removeAttr("aria-expanded")
.removeAttr("aria-hidden")
.removeAttr("aria-disabled")
.removeUniqueId()
.show();
this.element.find(".ui-menu-item")
.removeClass("ui-menu-item")
.removeAttr("role")
.removeAttr("aria-disabled")
.children("a")
.removeUniqueId()
.removeClass("ui-corner-all ui-state-hover")
.removeAttr("tabIndex")
.removeAttr("role")
.removeAttr("aria-haspopup")
.children().each(function(){
var a=$(this);
if(a.data("ui-menu-submenu-carat")){
a.remove();
}
});
this.element.find(".ui-menu-divider").removeClass("ui-menu-divider ui-widget-content");
},
_keydown:function(b){
var c,prev,character,skip,regex,
preventDefault=true;
function escape(a){
return a.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&");
}
switch(b.keyCode){
case $.ui.keyCode.PAGE_UP:
this.previousPage(b);
break;
case $.ui.keyCode.PAGE_DOWN:
this.nextPage(b);
break;
case $.ui.keyCode.HOME:
this._move("first","first",b);
break;
case $.ui.keyCode.END:
this._move("last","last",b);
break;
case $.ui.keyCode.UP:
this.previous(b);
break;
case $.ui.keyCode.DOWN:
this.next(b);
break;
case $.ui.keyCode.LEFT:
this.collapse(b);
break;
case $.ui.keyCode.RIGHT:
if(this.active&&!this.active.is(".ui-state-disabled")){
this.expand(b);
}
break;
case $.ui.keyCode.ENTER:
case $.ui.keyCode.SPACE:
this._activate(b);
break;
case $.ui.keyCode.ESCAPE:
this.collapse(b);
break;
default:
preventDefault=false;
prev=this.previousFilter||"";
character=String.fromCharCode(b.keyCode);
skip=false;
clearTimeout(this.filterTimer);
if(character===prev){
skip=true;
}else{
character=prev+character;
}
regex=new RegExp("^"+escape(character),"i");
c=this.activeMenu.children(".ui-menu-item").filter(function(){
return regex.test($(this).children("a").text());
});
c=skip&&c.index(this.active.next())!==-1?
this.active.nextAll(".ui-menu-item"):
c;
if(!c.length){
character=String.fromCharCode(b.keyCode);
regex=new RegExp("^"+escape(character),"i");
c=this.activeMenu.children(".ui-menu-item").filter(function(){
return regex.test($(this).children("a").text());
});
}
if(c.length){
this.focus(b,c);
if(c.length>1){
this.previousFilter=character;
this.filterTimer=this._delay(function(){
delete this.previousFilter;
},1000);
}else{
delete this.previousFilter;
}
}else{
delete this.previousFilter;
}
}
if(preventDefault){
b.preventDefault();
}
},
_activate:function(a){
if(!this.active.is(".ui-state-disabled")){
if(this.active.children("a[aria-haspopup='true']").length){
this.expand(a);
}else{
this.select(a);
}
}
},
refresh:function(){
var b,
icon=this.options.icons.submenu,
submenus=this.element.find(this.options.menus);
this.element.toggleClass("ui-menu-icons",!!this.element.find(".ui-icon").length);
submenus.filter(":not(.ui-menu)")
.addClass("ui-menu ui-widget ui-widget-content ui-corner-all")
.hide()
.attr({
role:this.options.role,
"aria-hidden":"true",
"aria-expanded":"false"
})
.each(function(){
var a=$(this),
item=a.prev("a"),
submenuCarat=$("<span>")
.addClass("ui-menu-icon ui-icon "+icon)
.data("ui-menu-submenu-carat",true);
item
.attr("aria-haspopup","true")
.prepend(submenuCarat);
a.attr("aria-labelledby",item.attr("id"));
});
b=submenus.add(this.element);
b.children(":not(.ui-menu-item):has(a)")
.addClass("ui-menu-item")
.attr("role","presentation")
.children("a")
.uniqueId()
.addClass("ui-corner-all")
.attr({
tabIndex:-1,
role:this._itemRole()
});
b.children(":not(.ui-menu-item)").each(function(){
var a=$(this);
if(!/[^\-\u2014\u2013\s]/.test(a.text())){
a.addClass("ui-widget-content ui-menu-divider");
}
});
b.children(".ui-state-disabled").attr("aria-disabled","true");
if(this.active&&!$.contains(this.element[0],this.active[0])){
this.blur();
}
},
_itemRole:function(){
return{
menu:"menuitem",
listbox:"option"
}[this.options.role];
},
_setOption:function(a,b){
if(a==="icons"){
this.element.find(".ui-menu-icon")
.removeClass(this.options.icons.submenu)
.addClass(b.submenu);
}
this._super(a,b);
},
focus:function(a,b){
var c,focused;
this.blur(a,a&&a.type==="focus");
this._scrollIntoView(b);
this.active=b.first();
focused=this.active.children("a").addClass("ui-state-focus");
if(this.options.role){
this.element.attr("aria-activedescendant",focused.attr("id"));
}
this.active
.parent()
.closest(".ui-menu-item")
.children("a:first")
.addClass("ui-state-active");
if(a&&a.type==="keydown"){
this._close();
}else{
this.timer=this._delay(function(){
this._close();
},this.delay);
}
c=b.children(".ui-menu");
if(c.length&&a&&(/^mouse/.test(a.type))){
this._startOpening(c);
}
this.activeMenu=b.parent();
this._trigger("focus",a,{item:b});
},
_scrollIntoView:function(a){
var b,paddingTop,offset,scroll,elementHeight,itemHeight;
if(this._hasScroll()){
b=parseFloat($.css(this.activeMenu[0],"borderTopWidth"))||0;
paddingTop=parseFloat($.css(this.activeMenu[0],"paddingTop"))||0;
offset=a.offset().top-this.activeMenu.offset().top-b-paddingTop;
scroll=this.activeMenu.scrollTop();
elementHeight=this.activeMenu.height();
itemHeight=a.height();
if(offset<0){
this.activeMenu.scrollTop(scroll+offset);
}else if(offset+itemHeight>elementHeight){
this.activeMenu.scrollTop(scroll+offset-elementHeight+itemHeight);
}
}
},
blur:function(a,b){
if(!b){
clearTimeout(this.timer);
}
if(!this.active){
return;
}
this.active.children("a").removeClass("ui-state-focus");
this.active=null;
this._trigger("blur",a,{item:this.active});
},
_startOpening:function(a){
clearTimeout(this.timer);
if(a.attr("aria-hidden")!=="true"){
return;
}
this.timer=this._delay(function(){
this._close();
this._open(a);
},this.delay);
},
_open:function(a){
var b=$.extend({
of:this.active
},this.options.position);
clearTimeout(this.timer);
this.element.find(".ui-menu").not(a.parents(".ui-menu"))
.hide()
.attr("aria-hidden","true");
a
.show()
.removeAttr("aria-hidden")
.attr("aria-expanded","true")
.position(b);
},
collapseAll:function(b,c){
clearTimeout(this.timer);
this.timer=this._delay(function(){
var a=c?this.element:
$(b&&b.target).closest(this.element.find(".ui-menu"));
if(!a.length){
a=this.element;
}
this._close(a);
this.blur(b);
this.activeMenu=a;
},this.delay);
},
_close:function(a){
if(!a){
a=this.active?this.active.parent():this.element;
}
a
.find(".ui-menu")
.hide()
.attr("aria-hidden","true")
.attr("aria-expanded","false")
.end()
.find("a.ui-state-active")
.removeClass("ui-state-active");
},
collapse:function(a){
var b=this.active&&
this.active.parent().closest(".ui-menu-item",this.element);
if(b&&b.length){
this._close();
this.focus(a,b);
}
},
expand:function(a){
var b=this.active&&
this.active
.children(".ui-menu ")
.children(".ui-menu-item")
.first();
if(b&&b.length){
this._open(b.parent());
this._delay(function(){
this.focus(a,b);
});
}
},
next:function(a){
this._move("next","first",a);
},
previous:function(a){
this._move("prev","last",a);
},
isFirstItem:function(){
return this.active&&!this.active.prevAll(".ui-menu-item").length;
},
isLastItem:function(){
return this.active&&!this.active.nextAll(".ui-menu-item").length;
},
_move:function(a,b,c){
var d;
if(this.active){
if(a==="first"||a==="last"){
d=this.active
[a==="first"?"prevAll":"nextAll"](".ui-menu-item")
.eq(-1);
}else{
d=this.active
[a+"All"](".ui-menu-item")
.eq(0);
}
}
if(!d||!d.length||!this.active){
d=this.activeMenu.children(".ui-menu-item")[b]();
}
this.focus(c,d);
},
nextPage:function(a){
var b,base,height;
if(!this.active){
this.next(a);
return;
}
if(this.isLastItem()){
return;
}
if(this._hasScroll()){
base=this.active.offset().top;
height=this.element.height();
this.active.nextAll(".ui-menu-item").each(function(){
b=$(this);
return b.offset().top-base-height<0;
});
this.focus(a,b);
}else{
this.focus(a,this.activeMenu.children(".ui-menu-item")
[!this.active?"first":"last"]());
}
},
previousPage:function(a){
var b,base,height;
if(!this.active){
this.next(a);
return;
}
if(this.isFirstItem()){
return;
}
if(this._hasScroll()){
base=this.active.offset().top;
height=this.element.height();
this.active.prevAll(".ui-menu-item").each(function(){
b=$(this);
return b.offset().top-base+height>0;
});
this.focus(a,b);
}else{
this.focus(a,this.activeMenu.children(".ui-menu-item").first());
}
},
_hasScroll:function(){
return this.element.outerHeight()<this.element.prop("scrollHeight");
},
select:function(a){
this.active=this.active||$(a.target).closest(".ui-menu-item");
var b={item:this.active};
if(!this.active.has(".ui-menu").length){
this.collapseAll(a,true);
}
this._trigger("select",a,b);
}
});
}(jQuery));
(function($,c){
$.widget("ui.progressbar",{
version:"1.10.4",
options:{
max:100,
value:0,
change:null,
complete:null
},
min:0,
_create:function(){
this.oldValue=this.options.value=this._constrainedValue();
this.element
.addClass("ui-progressbar ui-widget ui-widget-content ui-corner-all")
.attr({
role:"progressbar",
"aria-valuemin":this.min
});
this.valueDiv=$("<div class='ui-progressbar-value ui-widget-header ui-corner-left'></div>")
.appendTo(this.element);
this._refreshValue();
},
_destroy:function(){
this.element
.removeClass("ui-progressbar ui-widget ui-widget-content ui-corner-all")
.removeAttr("role")
.removeAttr("aria-valuemin")
.removeAttr("aria-valuemax")
.removeAttr("aria-valuenow");
this.valueDiv.remove();
},
value:function(a){
if(a===c){
return this.options.value;
}
this.options.value=this._constrainedValue(a);
this._refreshValue();
},
_constrainedValue:function(a){
if(a===c){
a=this.options.value;
}
this.indeterminate=a===false;
if(typeof a!=="number"){
a=0;
}
return this.indeterminate?false:
Math.min(this.options.max,Math.max(this.min,a));
},
_setOptions:function(a){
var b=a.value;
delete a.value;
this._super(a);
this.options.value=this._constrainedValue(b);
this._refreshValue();
},
_setOption:function(a,b){
if(a==="max"){
b=Math.max(this.min,b);
}
this._super(a,b);
},
_percentage:function(){
return this.indeterminate?100:100*(this.options.value-this.min)/(this.options.max-this.min);
},
_refreshValue:function(){
var a=this.options.value,
percentage=this._percentage();
this.valueDiv
.toggle(this.indeterminate||a>this.min)
.toggleClass("ui-corner-right",a===this.options.max)
.width(percentage.toFixed(0)+"%");
this.element.toggleClass("ui-progressbar-indeterminate",this.indeterminate);
if(this.indeterminate){
this.element.removeAttr("aria-valuenow");
if(!this.overlayDiv){
this.overlayDiv=$("<div class='ui-progressbar-overlay'></div>").appendTo(this.valueDiv);
}
}else{
this.element.attr({
"aria-valuemax":this.options.max,
"aria-valuenow":a
});
if(this.overlayDiv){
this.overlayDiv.remove();
this.overlayDiv=null;
}
}
if(this.oldValue!==a){
this.oldValue=a;
this._trigger("change");
}
if(a===this.options.max){
this._trigger("complete");
}
}
});
})(jQuery);
(function($,k){
function num(v){
return parseInt(v,10)||0;
}
function isNumber(a){
return!isNaN(parseInt(a,10));
}
$.widget("ui.resizable",$.ui.mouse,{
version:"1.10.4",
widgetEventPrefix:"resize",
options:{
alsoResize:false,
animate:false,
animateDuration:"slow",
animateEasing:"swing",
aspectRatio:false,
autoHide:false,
containment:false,
ghost:false,
grid:false,
handles:"e,s,se",
helper:false,
maxHeight:null,
maxWidth:null,
minHeight:10,
minWidth:10,
zIndex:90,
resize:null,
start:null,
stop:null
},
_create:function(){
var n,i,handle,axis,hname,
that=this,
o=this.options;
this.element.addClass("ui-resizable");
$.extend(this,{
_aspectRatio:!!(o.aspectRatio),
aspectRatio:o.aspectRatio,
originalElement:this.element,
_proportionallyResizeElements:[],
_helper:o.helper||o.ghost||o.animate?o.helper||"ui-resizable-helper":null
});
if(this.element[0].nodeName.match(/canvas|textarea|input|select|button|img/i)){
this.element.wrap(
$("<div class='ui-wrapper' style='overflow: hidden;'></div>").css({
position:this.element.css("position"),
width:this.element.outerWidth(),
height:this.element.outerHeight(),
top:this.element.css("top"),
left:this.element.css("left")
})
);
this.element=this.element.parent().data(
"ui-resizable",this.element.data("ui-resizable")
);
this.elementIsWrapper=true;
this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")});
this.originalElement.css({marginLeft:0,marginTop:0,marginRight:0,marginBottom:0});
this.originalResizeStyle=this.originalElement.css("resize");
this.originalElement.css("resize","none");
this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"}));
this.originalElement.css({margin:this.originalElement.css("margin")});
this._proportionallyResize();
}
this.handles=o.handles||(!$(".ui-resizable-handle",this.element).length?"e,s,se":{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"});
if(this.handles.constructor===String){
if(this.handles==="all"){
this.handles="n,e,s,w,se,sw,ne,nw";
}
n=this.handles.split(",");
this.handles={};
for(i=0;i<n.length;i++){
handle=$.trim(n[i]);
hname="ui-resizable-"+handle;
axis=$("<div class='ui-resizable-handle "+hname+"'></div>");
axis.css({zIndex:o.zIndex});
if("se"===handle){
axis.addClass("ui-icon ui-icon-gripsmall-diagonal-se");
}
this.handles[handle]=".ui-resizable-"+handle;
this.element.append(axis);
}
}
this._renderAxis=function(a){
var i,axis,padPos,padWrapper;
a=a||this.element;
for(i in this.handles){
if(this.handles[i].constructor===String){
this.handles[i]=$(this.handles[i],this.element).show();
}
if(this.elementIsWrapper&&this.originalElement[0].nodeName.match(/textarea|input|select|button/i)){
axis=$(this.handles[i],this.element);
padWrapper=/sw|ne|nw|se|n|s/.test(i)?axis.outerHeight():axis.outerWidth();
padPos=["padding",
/ne|nw|n/.test(i)?"Top":
/se|sw|s/.test(i)?"Bottom":
/^e$/.test(i)?"Right":"Left"].join("");
a.css(padPos,padWrapper);
this._proportionallyResize();
}
if(!$(this.handles[i]).length){
continue;
}
}
};
this._renderAxis(this.element);
this._handles=$(".ui-resizable-handle",this.element)
.disableSelection();
this._handles.mouseover(function(){
if(!that.resizing){
if(this.className){
axis=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i);
}
that.axis=axis&&axis[1]?axis[1]:"se";
}
});
if(o.autoHide){
this._handles.hide();
$(this.element)
.addClass("ui-resizable-autohide")
.mouseenter(function(){
if(o.disabled){
return;
}
$(this).removeClass("ui-resizable-autohide");
that._handles.show();
})
.mouseleave(function(){
if(o.disabled){
return;
}
if(!that.resizing){
$(this).addClass("ui-resizable-autohide");
that._handles.hide();
}
});
}
this._mouseInit();
},
_destroy:function(){
this._mouseDestroy();
var b,
_destroy=function(a){
$(a).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing")
.removeData("resizable").removeData("ui-resizable").unbind(".resizable").find(".ui-resizable-handle").remove();
};
if(this.elementIsWrapper){
_destroy(this.element);
b=this.element;
this.originalElement.css({
position:b.css("position"),
width:b.outerWidth(),
height:b.outerHeight(),
top:b.css("top"),
left:b.css("left")
}).insertAfter(b);
b.remove();
}
this.originalElement.css("resize",this.originalResizeStyle);
_destroy(this.originalElement);
return this;
},
_mouseCapture:function(a){
var i,handle,
capture=false;
for(i in this.handles){
handle=$(this.handles[i])[0];
if(handle===a.target||$.contains(handle,a.target)){
capture=true;
}
}
return!this.options.disabled&&capture;
},
_mouseStart:function(a){
var b,curtop,cursor,
o=this.options,
iniPos=this.element.position(),
el=this.element;
this.resizing=true;
if((/absolute/).test(el.css("position"))){
el.css({position:"absolute",top:el.css("top"),left:el.css("left")});
}else if(el.is(".ui-draggable")){
el.css({position:"absolute",top:iniPos.top,left:iniPos.left});
}
this._renderProxy();
b=num(this.helper.css("left"));
curtop=num(this.helper.css("top"));
if(o.containment){
b+=$(o.containment).scrollLeft()||0;
curtop+=$(o.containment).scrollTop()||0;
}
this.offset=this.helper.offset();
this.position={left:b,top:curtop};
this.size=this._helper?{width:this.helper.width(),height:this.helper.height()}:{width:el.width(),height:el.height()};
this.originalSize=this._helper?{width:el.outerWidth(),height:el.outerHeight()}:{width:el.width(),height:el.height()};
this.originalPosition={left:b,top:curtop};
this.sizeDiff={width:el.outerWidth()-el.width(),height:el.outerHeight()-el.height()};
this.originalMousePosition={left:a.pageX,top:a.pageY};
this.aspectRatio=(typeof o.aspectRatio==="number")?o.aspectRatio:((this.originalSize.width/this.originalSize.height)||1);
cursor=$(".ui-resizable-"+this.axis).css("cursor");
$("body").css("cursor",cursor==="auto"?this.axis+"-resize":cursor);
el.addClass("ui-resizable-resizing");
this._propagate("start",a);
return true;
},
_mouseDrag:function(b){
var c,
el=this.helper,props={},
smp=this.originalMousePosition,
a=this.axis,
prevTop=this.position.top,
prevLeft=this.position.left,
prevWidth=this.size.width,
prevHeight=this.size.height,
dx=(b.pageX-smp.left)||0,
dy=(b.pageY-smp.top)||0,
trigger=this._change[a];
if(!trigger){
return false;
}
c=trigger.apply(this,[b,dx,dy]);
this._updateVirtualBoundaries(b.shiftKey);
if(this._aspectRatio||b.shiftKey){
c=this._updateRatio(c,b);
}
c=this._respectSize(c,b);
this._updateCache(c);
this._propagate("resize",b);
if(this.position.top!==prevTop){
props.top=this.position.top+"px";
}
if(this.position.left!==prevLeft){
props.left=this.position.left+"px";
}
if(this.size.width!==prevWidth){
props.width=this.size.width+"px";
}
if(this.size.height!==prevHeight){
props.height=this.size.height+"px";
}
el.css(props);
if(!this._helper&&this._proportionallyResizeElements.length){
this._proportionallyResize();
}
if(!$.isEmptyObject(props)){
this._trigger("resize",b,this.ui());
}
return false;
},
_mouseStop:function(a){
this.resizing=false;
var b,ista,soffseth,soffsetw,s,left,top,
o=this.options,that=this;
if(this._helper){
b=this._proportionallyResizeElements;
ista=b.length&&(/textarea/i).test(b[0].nodeName);
soffseth=ista&&$.ui.hasScroll(b[0],"left")?0:that.sizeDiff.height;
soffsetw=ista?0:that.sizeDiff.width;
s={width:(that.helper.width()-soffsetw),height:(that.helper.height()-soffseth)};
left=(parseInt(that.element.css("left"),10)+(that.position.left-that.originalPosition.left))||null;
top=(parseInt(that.element.css("top"),10)+(that.position.top-that.originalPosition.top))||null;
if(!o.animate){
this.element.css($.extend(s,{top:top,left:left}));
}
that.helper.height(that.size.height);
that.helper.width(that.size.width);
if(this._helper&&!o.animate){
this._proportionallyResize();
}
}
$("body").css("cursor","auto");
this.element.removeClass("ui-resizable-resizing");
this._propagate("stop",a);
if(this._helper){
this.helper.remove();
}
return false;
},
_updateVirtualBoundaries:function(a){
var c,pMaxWidth,pMinHeight,pMaxHeight,b,
o=this.options;
b={
minWidth:isNumber(o.minWidth)?o.minWidth:0,
maxWidth:isNumber(o.maxWidth)?o.maxWidth:Infinity,
minHeight:isNumber(o.minHeight)?o.minHeight:0,
maxHeight:isNumber(o.maxHeight)?o.maxHeight:Infinity
};
if(this._aspectRatio||a){
c=b.minHeight*this.aspectRatio;
pMinHeight=b.minWidth/this.aspectRatio;
pMaxWidth=b.maxHeight*this.aspectRatio;
pMaxHeight=b.maxWidth/this.aspectRatio;
if(c>b.minWidth){
b.minWidth=c;
}
if(pMinHeight>b.minHeight){
b.minHeight=pMinHeight;
}
if(pMaxWidth<b.maxWidth){
b.maxWidth=pMaxWidth;
}
if(pMaxHeight<b.maxHeight){
b.maxHeight=pMaxHeight;
}
}
this._vBoundaries=b;
},
_updateCache:function(a){
this.offset=this.helper.offset();
if(isNumber(a.left)){
this.position.left=a.left;
}
if(isNumber(a.top)){
this.position.top=a.top;
}
if(isNumber(a.height)){
this.size.height=a.height;
}
if(isNumber(a.width)){
this.size.width=a.width;
}
},
_updateRatio:function(b){
var c=this.position,
csize=this.size,
a=this.axis;
if(isNumber(b.height)){
b.width=(b.height*this.aspectRatio);
}else if(isNumber(b.width)){
b.height=(b.width/this.aspectRatio);
}
if(a==="sw"){
b.left=c.left+(csize.width-b.width);
b.top=null;
}
if(a==="nw"){
b.top=c.top+(csize.height-b.height);
b.left=c.left+(csize.width-b.width);
}
return b;
},
_respectSize:function(b){
var o=this._vBoundaries,
a=this.axis,
ismaxw=isNumber(b.width)&&o.maxWidth&&(o.maxWidth<b.width),ismaxh=isNumber(b.height)&&o.maxHeight&&(o.maxHeight<b.height),
isminw=isNumber(b.width)&&o.minWidth&&(o.minWidth>b.width),isminh=isNumber(b.height)&&o.minHeight&&(o.minHeight>b.height),
dw=this.originalPosition.left+this.originalSize.width,
dh=this.position.top+this.size.height,
cw=/sw|nw|w/.test(a),ch=/nw|ne|n/.test(a);
if(isminw){
b.width=o.minWidth;
}
if(isminh){
b.height=o.minHeight;
}
if(ismaxw){
b.width=o.maxWidth;
}
if(ismaxh){
b.height=o.maxHeight;
}
if(isminw&&cw){
b.left=dw-o.minWidth;
}
if(ismaxw&&cw){
b.left=dw-o.maxWidth;
}
if(isminh&&ch){
b.top=dh-o.minHeight;
}
if(ismaxh&&ch){
b.top=dh-o.maxHeight;
}
if(!b.width&&!b.height&&!b.left&&b.top){
b.top=null;
}else if(!b.width&&!b.height&&!b.top&&b.left){
b.left=null;
}
return b;
},
_proportionallyResize:function(){
if(!this._proportionallyResizeElements.length){
return;
}
var i,j,borders,paddings,prel,
element=this.helper||this.element;
for(i=0;i<this._proportionallyResizeElements.length;i++){
prel=this._proportionallyResizeElements[i];
if(!this.borderDif){
this.borderDif=[];
borders=[prel.css("borderTopWidth"),prel.css("borderRightWidth"),prel.css("borderBottomWidth"),prel.css("borderLeftWidth")];
paddings=[prel.css("paddingTop"),prel.css("paddingRight"),prel.css("paddingBottom"),prel.css("paddingLeft")];
for(j=0;j<borders.length;j++){
this.borderDif[j]=(parseInt(borders[j],10)||0)+(parseInt(paddings[j],10)||0);
}
}
prel.css({
height:(element.height()-this.borderDif[0]-this.borderDif[2])||0,
width:(element.width()-this.borderDif[1]-this.borderDif[3])||0
});
}
},
_renderProxy:function(){
var a=this.element,o=this.options;
this.elementOffset=a.offset();
if(this._helper){
this.helper=this.helper||$("<div style='overflow:hidden;'></div>");
this.helper.addClass(this._helper).css({
width:this.element.outerWidth()-1,
height:this.element.outerHeight()-1,
position:"absolute",
left:this.elementOffset.left+"px",
top:this.elementOffset.top+"px",
zIndex:++o.zIndex});
this.helper
.appendTo("body")
.disableSelection();
}else{
this.helper=this.element;
}
},
_change:{
e:function(a,b){
return{width:this.originalSize.width+b};
},
w:function(a,b){
var c=this.originalSize,sp=this.originalPosition;
return{left:sp.left+b,width:c.width-b};
},
n:function(a,b,c){
var d=this.originalSize,sp=this.originalPosition;
return{top:sp.top+c,height:d.height-c};
},
s:function(a,b,c){
return{height:this.originalSize.height+c};
},
se:function(a,b,c){
return $.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[a,b,c]));
},
sw:function(a,b,c){
return $.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[a,b,c]));
},
ne:function(a,b,c){
return $.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[a,b,c]));
},
nw:function(a,b,c){
return $.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[a,b,c]));
}
},
_propagate:function(n,a){
$.ui.plugin.call(this,n,[a,this.ui()]);
(n!=="resize"&&this._trigger(n,a,this.ui()));
},
plugins:{},
ui:function(){
return{
originalElement:this.originalElement,
element:this.element,
helper:this.helper,
position:this.position,
size:this.size,
originalSize:this.originalSize,
originalPosition:this.originalPosition
};
}
});

$.ui.plugin.add("resizable","animate",{
stop:function(b){
var c=$(this).data("ui-resizable"),
o=c.options,
pr=c._proportionallyResizeElements,
ista=pr.length&&(/textarea/i).test(pr[0].nodeName),
soffseth=ista&&$.ui.hasScroll(pr[0],"left")?0:c.sizeDiff.height,
soffsetw=ista?0:c.sizeDiff.width,
style={width:(c.size.width-soffsetw),height:(c.size.height-soffseth)},
left=(parseInt(c.element.css("left"),10)+(c.position.left-c.originalPosition.left))||null,
top=(parseInt(c.element.css("top"),10)+(c.position.top-c.originalPosition.top))||null;
c.element.animate(
$.extend(style,top&&left?{top:top,left:left}:{}),{
duration:o.animateDuration,
easing:o.animateEasing,
step:function(){
var a={
width:parseInt(c.element.css("width"),10),
height:parseInt(c.element.css("height"),10),
top:parseInt(c.element.css("top"),10),
left:parseInt(c.element.css("left"),10)
};
if(pr&&pr.length){
$(pr[0]).css({width:a.width,height:a.height});
}
c._updateCache(a);
c._propagate("resize",b);
}
}
);
}
});
$.ui.plugin.add("resizable","containment",{
start:function(){
var b,p,co,ch,cw,width,height,
that=$(this).data("ui-resizable"),
o=that.options,
el=that.element,
oc=o.containment,
ce=(oc instanceof $)?oc.get(0):(/parent/.test(oc))?el.parent().get(0):oc;
if(!ce){
return;
}
that.containerElement=$(ce);
if(/document/.test(oc)||oc===document){
that.containerOffset={left:0,top:0};
that.containerPosition={left:0,top:0};
that.parentData={
b:$(document),left:0,top:0,
width:$(document).width(),height:$(document).height()||document.body.parentNode.scrollHeight
};
}
else{
b=$(ce);
p=[];
$(["Top","Right","Left","Bottom"]).each(function(i,a){p[i]=num(b.css("padding"+a))});
that.containerOffset=b.offset();
that.containerPosition=b.position();
that.containerSize={height:(b.innerHeight()-p[3]),width:(b.innerWidth()-p[1])};
co=that.containerOffset;
ch=that.containerSize.height;
cw=that.containerSize.width;
width=($.ui.hasScroll(ce,"left")?ce.scrollWidth:cw);
height=($.ui.hasScroll(ce)?ce.scrollHeight:ch);
that.parentData={
b:ce,left:co.left,top:co.top,width:width,height:height
};
}
},
resize:function(a){
var b,hoset,isParent,isOffsetRelative,
that=$(this).data("ui-resizable"),
o=that.options,
co=that.containerOffset,cp=that.position,
pRatio=that._aspectRatio||a.shiftKey,
cop={top:0,left:0},ce=that.containerElement;
if(ce[0]!==document&&(/static/).test(ce.css("position"))){
cop=co;
}
if(cp.left<(that._helper?co.left:0)){
that.size.width=that.size.width+(that._helper?(that.position.left-co.left):(that.position.left-cop.left));
if(pRatio){
that.size.height=that.size.width/that.aspectRatio;
}
that.position.left=o.helper?co.left:0;
}
if(cp.top<(that._helper?co.top:0)){
that.size.height=that.size.height+(that._helper?(that.position.top-co.top):that.position.top);
if(pRatio){
that.size.width=that.size.height*that.aspectRatio;
}
that.position.top=that._helper?co.top:0;
}
that.offset.left=that.parentData.left+that.position.left;
that.offset.top=that.parentData.top+that.position.top;
b=Math.abs((that._helper?that.offset.left-cop.left:(that.offset.left-cop.left))+that.sizeDiff.width);
hoset=Math.abs((that._helper?that.offset.top-cop.top:(that.offset.top-co.top))+that.sizeDiff.height);
isParent=that.containerElement.get(0)===that.element.parent().get(0);
isOffsetRelative=/relative|absolute/.test(that.containerElement.css("position"));
if(isParent&&isOffsetRelative){
b-=Math.abs(that.parentData.left);
}
if(b+that.size.width>=that.parentData.width){
that.size.width=that.parentData.width-b;
if(pRatio){
that.size.height=that.size.width/that.aspectRatio;
}
}
if(hoset+that.size.height>=that.parentData.height){
that.size.height=that.parentData.height-hoset;
if(pRatio){
that.size.width=that.size.height*that.aspectRatio;
}
}
},
stop:function(){
var a=$(this).data("ui-resizable"),
o=a.options,
co=a.containerOffset,
cop=a.containerPosition,
ce=a.containerElement,
helper=$(a.helper),
ho=helper.offset(),
w=helper.outerWidth()-a.sizeDiff.width,
h=helper.outerHeight()-a.sizeDiff.height;
if(a._helper&&!o.animate&&(/relative/).test(ce.css("position"))){
$(this).css({left:ho.left-cop.left-co.left,width:w,height:h});
}
if(a._helper&&!o.animate&&(/static/).test(ce.css("position"))){
$(this).css({left:ho.left-cop.left-co.left,width:w,height:h});
}
}
});
$.ui.plugin.add("resizable","alsoResize",{
start:function(){
var c=$(this).data("ui-resizable"),
o=c.options,
_store=function(b){
$(b).each(function(){
var a=$(this);
a.data("ui-resizable-alsoresize",{
width:parseInt(a.width(),10),height:parseInt(a.height(),10),
left:parseInt(a.css("left"),10),top:parseInt(a.css("top"),10)
});
});
};
if(typeof(o.alsoResize)==="object"&&!o.alsoResize.parentNode){
if(o.alsoResize.length){o.alsoResize=o.alsoResize[0];_store(o.alsoResize)}
else{$.each(o.alsoResize,function(a){_store(a)})}
}else{
_store(o.alsoResize);
}
},
resize:function(f,g){
var h=$(this).data("ui-resizable"),
o=h.options,
os=h.originalSize,
op=h.originalPosition,
delta={
height:(h.size.height-os.height)||0,width:(h.size.width-os.width)||0,
top:(h.position.top-op.top)||0,left:(h.position.left-op.left)||0
},
_alsoResize=function(e,c){
$(e).each(function(){
var d=$(this),start=$(this).data("ui-resizable-alsoresize"),style={},
css=c&&c.length?c:d.parents(g.originalElement[0]).length?["width","height"]:["width","height","top","left"];
$.each(css,function(i,a){
var b=(start[a]||0)+(delta[a]||0);
if(b&&b>=0){
style[a]=b||null;
}
});
d.css(style);
});
};
if(typeof(o.alsoResize)==="object"&&!o.alsoResize.nodeType){
$.each(o.alsoResize,function(a,c){_alsoResize(a,c)});
}else{
_alsoResize(o.alsoResize);
}
},
stop:function(){
$(this).removeData("resizable-alsoresize");
}
});
$.ui.plugin.add("resizable","ghost",{
start:function(){
var a=$(this).data("ui-resizable"),o=a.options,cs=a.size;
a.ghost=a.originalElement.clone();
a.ghost
.css({opacity:0.25,display:"block",position:"relative",height:cs.height,width:cs.width,margin:0,left:0,top:0})
.addClass("ui-resizable-ghost")
.addClass(typeof o.ghost==="string"?o.ghost:"");
a.ghost.appendTo(a.helper);
},
resize:function(){
var a=$(this).data("ui-resizable");
if(a.ghost){
a.ghost.css({position:"relative",height:a.size.height,width:a.size.width});
}
},
stop:function(){
var a=$(this).data("ui-resizable");
if(a.ghost&&a.helper){
a.helper.get(0).removeChild(a.ghost.get(0));
}
}
});
$.ui.plugin.add("resizable","grid",{
resize:function(){
var b=$(this).data("ui-resizable"),
o=b.options,
cs=b.size,
os=b.originalSize,
op=b.originalPosition,
a=b.axis,
grid=typeof o.grid==="number"?[o.grid,o.grid]:o.grid,
gridX=(grid[0]||1),
gridY=(grid[1]||1),
ox=Math.round((cs.width-os.width)/gridX)*gridX,
oy=Math.round((cs.height-os.height)/gridY)*gridY,
newWidth=os.width+ox,
newHeight=os.height+oy,
isMaxWidth=o.maxWidth&&(o.maxWidth<newWidth),
isMaxHeight=o.maxHeight&&(o.maxHeight<newHeight),
isMinWidth=o.minWidth&&(o.minWidth>newWidth),
isMinHeight=o.minHeight&&(o.minHeight>newHeight);
o.grid=grid;
if(isMinWidth){
newWidth=newWidth+gridX;
}
if(isMinHeight){
newHeight=newHeight+gridY;
}
if(isMaxWidth){
newWidth=newWidth-gridX;
}
if(isMaxHeight){
newHeight=newHeight-gridY;
}
if(/^(se|s|e)$/.test(a)){
b.size.width=newWidth;
b.size.height=newHeight;
}else if(/^(ne)$/.test(a)){
b.size.width=newWidth;
b.size.height=newHeight;
b.position.top=op.top-oy;
}else if(/^(sw)$/.test(a)){
b.size.width=newWidth;
b.size.height=newHeight;
b.position.left=op.left-ox;
}else{
if(newHeight-gridY>0){
b.size.height=newHeight;
b.position.top=op.top-oy;
}else{
b.size.height=gridY;
b.position.top=op.top+os.height-gridY;
}
if(newWidth-gridX>0){
b.size.width=newWidth;
b.position.left=op.left-ox;
}else{
b.size.width=gridX;
b.position.left=op.left+os.width-gridX;
}
}
}
});
})(jQuery);
(function($,d){
$.widget("ui.selectable",$.ui.mouse,{
version:"1.10.4",
options:{
appendTo:"body",
autoRefresh:true,
distance:0,
filter:"*",
tolerance:"touch",
selected:null,
selecting:null,
start:null,
stop:null,
unselected:null,
unselecting:null
},
_create:function(){
var b,
that=this;
this.element.addClass("ui-selectable");
this.dragged=false;
this.refresh=function(){
b=$(that.options.filter,that.element[0]);
b.addClass("ui-selectee");
b.each(function(){
var a=$(this),
pos=a.offset();
$.data(this,"selectable-item",{
element:this,
$element:a,
left:pos.left,
top:pos.top,
right:pos.left+a.outerWidth(),
bottom:pos.top+a.outerHeight(),
startselected:false,
selected:a.hasClass("ui-selected"),
selecting:a.hasClass("ui-selecting"),
unselecting:a.hasClass("ui-unselecting")
});
});
};
this.refresh();
this.selectees=b.addClass("ui-selectee");
this._mouseInit();
this.helper=$("<div class='ui-selectable-helper'></div>");
},
_destroy:function(){
this.selectees
.removeClass("ui-selectee")
.removeData("selectable-item");
this.element
.removeClass("ui-selectable ui-selectable-disabled");
this._mouseDestroy();
},
_mouseStart:function(b){
var c=this,
options=this.options;
this.opos=[b.pageX,b.pageY];
if(this.options.disabled){
return;
}
this.selectees=$(options.filter,this.element[0]);
this._trigger("start",b);
$(options.appendTo).append(this.helper);
this.helper.css({
"left":b.pageX,
"top":b.pageY,
"width":0,
"height":0
});
if(options.autoRefresh){
this.refresh();
}
this.selectees.filter(".ui-selected").each(function(){
var a=$.data(this,"selectable-item");
a.startselected=true;
if(!b.metaKey&&!b.ctrlKey){
a.$element.removeClass("ui-selected");
a.selected=false;
a.$element.addClass("ui-unselecting");
a.unselecting=true;
c._trigger("unselecting",b,{
unselecting:a.element
});
}
});
$(b.target).parents().addBack().each(function(){
var a,
selectee=$.data(this,"selectable-item");
if(selectee){
a=(!b.metaKey&&!b.ctrlKey)||!selectee.$element.hasClass("ui-selected");
selectee.$element
.removeClass(a?"ui-unselecting":"ui-selected")
.addClass(a?"ui-selecting":"ui-unselecting");
selectee.unselecting=!a;
selectee.selecting=a;
selectee.selected=a;
if(a){
c._trigger("selecting",b,{
selecting:selectee.element
});
}else{
c._trigger("unselecting",b,{
unselecting:selectee.element
});
}
return false;
}
});
},
_mouseDrag:function(b){
this.dragged=true;
if(this.options.disabled){
return;
}
var c,
that=this,
options=this.options,
x1=this.opos[0],
y1=this.opos[1],
x2=b.pageX,
y2=b.pageY;
if(x1>x2){c=x2;x2=x1;x1=c}
if(y1>y2){c=y2;y2=y1;y1=c}
this.helper.css({left:x1,top:y1,width:x2-x1,height:y2-y1});
this.selectees.each(function(){
var a=$.data(this,"selectable-item"),
hit=false;
if(!a||a.element===that.element[0]){
return;
}
if(options.tolerance==="touch"){
hit=(!(a.left>x2||a.right<x1||a.top>y2||a.bottom<y1));
}else if(options.tolerance==="fit"){
hit=(a.left>x1&&a.right<x2&&a.top>y1&&a.bottom<y2);
}
if(hit){
if(a.selected){
a.$element.removeClass("ui-selected");
a.selected=false;
}
if(a.unselecting){
a.$element.removeClass("ui-unselecting");
a.unselecting=false;
}
if(!a.selecting){
a.$element.addClass("ui-selecting");
a.selecting=true;
that._trigger("selecting",b,{
selecting:a.element
});
}
}else{
if(a.selecting){
if((b.metaKey||b.ctrlKey)&&a.startselected){
a.$element.removeClass("ui-selecting");
a.selecting=false;
a.$element.addClass("ui-selected");
a.selected=true;
}else{
a.$element.removeClass("ui-selecting");
a.selecting=false;
if(a.startselected){
a.$element.addClass("ui-unselecting");
a.unselecting=true;
}
that._trigger("unselecting",b,{
unselecting:a.element
});
}
}
if(a.selected){
if(!b.metaKey&&!b.ctrlKey&&!a.startselected){
a.$element.removeClass("ui-selected");
a.selected=false;
a.$element.addClass("ui-unselecting");
a.unselecting=true;
that._trigger("unselecting",b,{
unselecting:a.element
});
}
}
}
});
return false;
},
_mouseStop:function(b){
var c=this;
this.dragged=false;
$(".ui-unselecting",this.element[0]).each(function(){
var a=$.data(this,"selectable-item");
a.$element.removeClass("ui-unselecting");
a.unselecting=false;
a.startselected=false;
c._trigger("unselected",b,{
unselected:a.element
});
});
$(".ui-selecting",this.element[0]).each(function(){
var a=$.data(this,"selectable-item");
a.$element.removeClass("ui-selecting").addClass("ui-selected");
a.selecting=false;
a.selected=true;
a.startselected=true;
c._trigger("selected",b,{
selected:a.element
});
});
this._trigger("stop",b);
this.helper.remove();
return false;
}
});
})(jQuery);
(function($,e){
var f=5;
$.widget("ui.slider",$.ui.mouse,{
version:"1.10.4",
widgetEventPrefix:"slide",
options:{
animate:false,
distance:0,
max:100,
min:0,
orientation:"horizontal",
range:false,
step:1,
value:0,
values:null,
change:null,
slide:null,
start:null,
stop:null
},
_create:function(){
this._keySliding=false;
this._mouseSliding=false;
this._animateOff=true;
this._handleIndex=null;
this._detectOrientation();
this._mouseInit();
this.element
.addClass("ui-slider"+
" ui-slider-"+this.orientation+
" ui-widget"+
" ui-widget-content"+
" ui-corner-all");
this._refresh();
this._setOption("disabled",this.options.disabled);
this._animateOff=false;
},
_refresh:function(){
this._createRange();
this._createHandles();
this._setupEvents();
this._refreshValue();
},
_createHandles:function(){
var i,handleCount,
options=this.options,
existingHandles=this.element.find(".ui-slider-handle").addClass("ui-state-default ui-corner-all"),
handle="<a class='ui-slider-handle ui-state-default ui-corner-all' href='#'></a>",
handles=[];
handleCount=(options.values&&options.values.length)||1;
if(existingHandles.length>handleCount){
existingHandles.slice(handleCount).remove();
existingHandles=existingHandles.slice(0,handleCount);
}
for(i=existingHandles.length;i<handleCount;i++){
handles.push(handle);
}
this.handles=existingHandles.add($(handles.join("")).appendTo(this.element));
this.handle=this.handles.eq(0);
this.handles.each(function(i){
$(this).data("ui-slider-handle-index",i);
});
},
_createRange:function(){
var a=this.options,
classes="";
if(a.range){
if(a.range===true){
if(!a.values){
a.values=[this._valueMin(),this._valueMin()];
}else if(a.values.length&&a.values.length!==2){
a.values=[a.values[0],a.values[0]];
}else if($.isArray(a.values)){
a.values=a.values.slice(0);
}
}
if(!this.range||!this.range.length){
this.range=$("<div></div>")
.appendTo(this.element);
classes="ui-slider-range"+
" ui-widget-header ui-corner-all";
}else{
this.range.removeClass("ui-slider-range-min ui-slider-range-max")
.css({
"left":"",
"bottom":""
});
}
this.range.addClass(classes+
((a.range==="min"||a.range==="max")?" ui-slider-range-"+a.range:""));
}else{
if(this.range){
this.range.remove();
}
this.range=null;
}
},
_setupEvents:function(){
var a=this.handles.add(this.range).filter("a");
this._off(a);
this._on(a,this._handleEvents);
this._hoverable(a);
this._focusable(a);
},
_destroy:function(){
this.handles.remove();
if(this.range){
this.range.remove();
}
this.element
.removeClass("ui-slider"+
" ui-slider-horizontal"+
" ui-slider-vertical"+
" ui-widget"+
" ui-widget-content"+
" ui-corner-all");
this._mouseDestroy();
},
_mouseCapture:function(b){
var c,normValue,distance,closestHandle,index,allowed,offset,mouseOverHandle,
that=this,
o=this.options;
if(o.disabled){
return false;
}
this.elementSize={
width:this.element.outerWidth(),
height:this.element.outerHeight()
};
this.elementOffset=this.element.offset();
c={x:b.pageX,y:b.pageY};
normValue=this._normValueFromMouse(c);
distance=this._valueMax()-this._valueMin()+1;
this.handles.each(function(i){
var a=Math.abs(normValue-that.values(i));
if((distance>a)||
(distance===a&&
(i===that._lastChangedValue||that.values(i)===o.min))){
distance=a;
closestHandle=$(this);
index=i;
}
});
allowed=this._start(b,index);
if(allowed===false){
return false;
}
this._mouseSliding=true;
this._handleIndex=index;
closestHandle
.addClass("ui-state-active")
.focus();
offset=closestHandle.offset();
mouseOverHandle=!$(b.target).parents().addBack().is(".ui-slider-handle");
this._clickOffset=mouseOverHandle?{left:0,top:0}:{
left:b.pageX-offset.left-(closestHandle.width()/2),
top:b.pageY-offset.top-
(closestHandle.height()/2)-
(parseInt(closestHandle.css("borderTopWidth"),10)||0)-
(parseInt(closestHandle.css("borderBottomWidth"),10)||0)+
(parseInt(closestHandle.css("marginTop"),10)||0)
};
if(!this.handles.hasClass("ui-state-hover")){
this._slide(b,index,normValue);
}
this._animateOff=true;
return true;
},
_mouseStart:function(){
return true;
},
_mouseDrag:function(a){
var b={x:a.pageX,y:a.pageY},
normValue=this._normValueFromMouse(b);
this._slide(a,this._handleIndex,normValue);
return false;
},
_mouseStop:function(a){
this.handles.removeClass("ui-state-active");
this._mouseSliding=false;
this._stop(a,this._handleIndex);
this._change(a,this._handleIndex);
this._handleIndex=null;
this._clickOffset=null;
this._animateOff=false;
return false;
},
_detectOrientation:function(){
this.orientation=(this.options.orientation==="vertical")?"vertical":"horizontal";
},
_normValueFromMouse:function(a){
var b,
pixelMouse,
percentMouse,
valueTotal,
valueMouse;
if(this.orientation==="horizontal"){
b=this.elementSize.width;
pixelMouse=a.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0);
}else{
b=this.elementSize.height;
pixelMouse=a.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0);
}
percentMouse=(pixelMouse/b);
if(percentMouse>1){
percentMouse=1;
}
if(percentMouse<0){
percentMouse=0;
}
if(this.orientation==="vertical"){
percentMouse=1-percentMouse;
}
valueTotal=this._valueMax()-this._valueMin();
valueMouse=this._valueMin()+percentMouse*valueTotal;
return this._trimAlignValue(valueMouse);
},
_start:function(a,b){
var c={
handle:this.handles[b],
value:this.value()
};
if(this.options.values&&this.options.values.length){
c.value=this.values(b);
c.values=this.values();
}
return this._trigger("start",a,c);
},
_slide:function(a,b,c){
var d,
newValues,
allowed;
if(this.options.values&&this.options.values.length){
d=this.values(b?0:1);
if((this.options.values.length===2&&this.options.range===true)&&
((b===0&&c>d)||(b===1&&c<d))
){
c=d;
}
if(c!==this.values(b)){
newValues=this.values();
newValues[b]=c;
allowed=this._trigger("slide",a,{
handle:this.handles[b],
value:c,
values:newValues
});
d=this.values(b?0:1);
if(allowed!==false){
this.values(b,c);
}
}
}else{
if(c!==this.value()){
allowed=this._trigger("slide",a,{
handle:this.handles[b],
value:c
});
if(allowed!==false){
this.value(c);
}
}
}
},
_stop:function(a,b){
var c={
handle:this.handles[b],
value:this.value()
};
if(this.options.values&&this.options.values.length){
c.value=this.values(b);
c.values=this.values();
}
this._trigger("stop",a,c);
},
_change:function(a,b){
if(!this._keySliding&&!this._mouseSliding){
var c={
handle:this.handles[b],
value:this.value()
};
if(this.options.values&&this.options.values.length){
c.value=this.values(b);
c.values=this.values();
}
this._lastChangedValue=b;
this._trigger("change",a,c);
}
},
value:function(a){
if(arguments.length){
this.options.value=this._trimAlignValue(a);
this._refreshValue();
this._change(null,0);
return;
}
return this._value();
},
values:function(a,b){
var c,
newValues,
i;
if(arguments.length>1){
this.options.values[a]=this._trimAlignValue(b);
this._refreshValue();
this._change(null,a);
return;
}
if(arguments.length){
if($.isArray(arguments[0])){
c=this.options.values;
newValues=arguments[0];
for(i=0;i<c.length;i+=1){
c[i]=this._trimAlignValue(newValues[i]);
this._change(null,i);
}
this._refreshValue();
}else{
if(this.options.values&&this.options.values.length){
return this._values(a);
}else{
return this.value();
}
}
}else{
return this._values();
}
},
_setOption:function(a,b){
var i,
valsLength=0;
if(a==="range"&&this.options.range===true){
if(b==="min"){
this.options.value=this._values(0);
this.options.values=null;
}else if(b==="max"){
this.options.value=this._values(this.options.values.length-1);
this.options.values=null;
}
}
if($.isArray(this.options.values)){
valsLength=this.options.values.length;
}
$.Widget.prototype._setOption.apply(this,arguments);
switch(a){
case"orientation":
this._detectOrientation();
this.element
.removeClass("ui-slider-horizontal ui-slider-vertical")
.addClass("ui-slider-"+this.orientation);
this._refreshValue();
break;
case"value":
this._animateOff=true;
this._refreshValue();
this._change(null,0);
this._animateOff=false;
break;
case"values":
this._animateOff=true;
this._refreshValue();
for(i=0;i<valsLength;i+=1){
this._change(null,i);
}
this._animateOff=false;
break;
case"min":
case"max":
this._animateOff=true;
this._refreshValue();
this._animateOff=false;
break;
case"range":
this._animateOff=true;
this._refresh();
this._animateOff=false;
break;
}
},
_value:function(){
var a=this.options.value;
a=this._trimAlignValue(a);
return a;
},
_values:function(a){
var b,
vals,
i;
if(arguments.length){
b=this.options.values[a];
b=this._trimAlignValue(b);
return b;
}else if(this.options.values&&this.options.values.length){
vals=this.options.values.slice();
for(i=0;i<vals.length;i+=1){
vals[i]=this._trimAlignValue(vals[i]);
}
return vals;
}else{
return[];
}
},
_trimAlignValue:function(a){
if(a<=this._valueMin()){
return this._valueMin();
}
if(a>=this._valueMax()){
return this._valueMax();
}
var b=(this.options.step>0)?this.options.step:1,
valModStep=(a-this._valueMin())%b,
alignValue=a-valModStep;
if(Math.abs(valModStep)*2>=b){
alignValue+=(valModStep>0)?b:(-b);
}
return parseFloat(alignValue.toFixed(5));
},
_valueMin:function(){
return this.options.min;
},
_valueMax:function(){
return this.options.max;
},
_refreshValue:function(){
var a,valPercent,value,valueMin,valueMax,
oRange=this.options.range,
o=this.options,
that=this,
animate=(!this._animateOff)?o.animate:false,
_set={};
if(this.options.values&&this.options.values.length){
this.handles.each(function(i){
valPercent=(that.values(i)-that._valueMin())/(that._valueMax()-that._valueMin())*100;
_set[that.orientation==="horizontal"?"left":"bottom"]=valPercent+"%";
$(this).stop(1,1)[animate?"animate":"css"](_set,o.animate);
if(that.options.range===true){
if(that.orientation==="horizontal"){
if(i===0){
that.range.stop(1,1)[animate?"animate":"css"]({left:valPercent+"%"},o.animate);
}
if(i===1){
that.range[animate?"animate":"css"]({width:(valPercent-a)+"%"},{queue:false,duration:o.animate});
}
}else{
if(i===0){
that.range.stop(1,1)[animate?"animate":"css"]({bottom:(valPercent)+"%"},o.animate);
}
if(i===1){
that.range[animate?"animate":"css"]({height:(valPercent-a)+"%"},{queue:false,duration:o.animate});
}
}
}
a=valPercent;
});
}else{
value=this.value();
valueMin=this._valueMin();
valueMax=this._valueMax();
valPercent=(valueMax!==valueMin)?
(value-valueMin)/(valueMax-valueMin)*100:
0;
_set[this.orientation==="horizontal"?"left":"bottom"]=valPercent+"%";
this.handle.stop(1,1)[animate?"animate":"css"](_set,o.animate);
if(oRange==="min"&&this.orientation==="horizontal"){
this.range.stop(1,1)[animate?"animate":"css"]({width:valPercent+"%"},o.animate);
}
if(oRange==="max"&&this.orientation==="horizontal"){
this.range[animate?"animate":"css"]({width:(100-valPercent)+"%"},{queue:false,duration:o.animate});
}
if(oRange==="min"&&this.orientation==="vertical"){
this.range.stop(1,1)[animate?"animate":"css"]({height:valPercent+"%"},o.animate);
}
if(oRange==="max"&&this.orientation==="vertical"){
this.range[animate?"animate":"css"]({height:(100-valPercent)+"%"},{queue:false,duration:o.animate});
}
}
},
_handleEvents:{
keydown:function(a){
var b,curVal,newVal,step,
index=$(a.target).data("ui-slider-handle-index");
switch(a.keyCode){
case $.ui.keyCode.HOME:
case $.ui.keyCode.END:
case $.ui.keyCode.PAGE_UP:
case $.ui.keyCode.PAGE_DOWN:
case $.ui.keyCode.UP:
case $.ui.keyCode.RIGHT:
case $.ui.keyCode.DOWN:
case $.ui.keyCode.LEFT:
a.preventDefault();
if(!this._keySliding){
this._keySliding=true;
$(a.target).addClass("ui-state-active");
b=this._start(a,index);
if(b===false){
return;
}
}
break;
}
step=this.options.step;
if(this.options.values&&this.options.values.length){
curVal=newVal=this.values(index);
}else{
curVal=newVal=this.value();
}
switch(a.keyCode){
case $.ui.keyCode.HOME:
newVal=this._valueMin();
break;
case $.ui.keyCode.END:
newVal=this._valueMax();
break;
case $.ui.keyCode.PAGE_UP:
newVal=this._trimAlignValue(curVal+((this._valueMax()-this._valueMin())/f));
break;
case $.ui.keyCode.PAGE_DOWN:
newVal=this._trimAlignValue(curVal-((this._valueMax()-this._valueMin())/f));
break;
case $.ui.keyCode.UP:
case $.ui.keyCode.RIGHT:
if(curVal===this._valueMax()){
return;
}
newVal=this._trimAlignValue(curVal+step);
break;
case $.ui.keyCode.DOWN:
case $.ui.keyCode.LEFT:
if(curVal===this._valueMin()){
return;
}
newVal=this._trimAlignValue(curVal-step);
break;
}
this._slide(a,index,newVal);
},
click:function(a){
a.preventDefault();
},
keyup:function(a){
var b=$(a.target).data("ui-slider-handle-index");
if(this._keySliding){
this._keySliding=false;
this._stop(a,b);
this._change(a,b);
$(a.target).removeClass("ui-state-active");
}
}
}
});
}(jQuery));
(function($,g){
function isOverAxis(x,a,b){
return(x>a)&&(x<(a+b));
}
function isFloating(a){
return(/left|right/).test(a.css("float"))||(/inline|table-cell/).test(a.css("display"));
}
$.widget("ui.sortable",$.ui.mouse,{
version:"1.10.4",
widgetEventPrefix:"sort",
ready:false,
options:{
appendTo:"parent",
axis:false,
connectWith:false,
containment:false,
cursor:"auto",
cursorAt:false,
dropOnEmpty:true,
forcePlaceholderSize:false,
forceHelperSize:false,
grid:false,
handle:false,
helper:"original",
items:"> *",
opacity:false,
placeholder:false,
revert:false,
scroll:true,
scrollSensitivity:20,
scrollSpeed:20,
scope:"default",
tolerance:"intersect",
zIndex:1000,
activate:null,
beforeStop:null,
change:null,
deactivate:null,
out:null,
over:null,
receive:null,
remove:null,
sort:null,
start:null,
stop:null,
update:null
},
_create:function(){
var o=this.options;
this.containerCache={};
this.element.addClass("ui-sortable");
this.refresh();
this.floating=this.items.length?o.axis==="x"||isFloating(this.items[0].item):false;
this.offset=this.element.offset();
this._mouseInit();
this.ready=true;
},
_destroy:function(){
this.element
.removeClass("ui-sortable ui-sortable-disabled");
this._mouseDestroy();
for(var i=this.items.length-1;i>=0;i--){
this.items[i].item.removeData(this.widgetName+"-item");
}
return this;
},
_setOption:function(a,b){
if(a==="disabled"){
this.options[a]=b;
this.widget().toggleClass("ui-sortable-disabled",!!b);
}else{
$.Widget.prototype._setOption.apply(this,arguments);
}
},
_mouseCapture:function(a,b){
var c=null,
validHandle=false,
that=this;
if(this.reverting){
return false;
}
if(this.options.disabled||this.options.type==="static"){
return false;
}
this._refreshItems(a);
$(a.target).parents().each(function(){
if($.data(this,that.widgetName+"-item")===that){
c=$(this);
return false;
}
});
if($.data(a.target,that.widgetName+"-item")===that){
c=$(a.target);
}
if(!c){
return false;
}
if(this.options.handle&&!b){
$(this.options.handle,c).find("*").addBack().each(function(){
if(this===a.target){
validHandle=true;
}
});
if(!validHandle){
return false;
}
}
this.currentItem=c;
this._removeCurrentsFromItems();
return true;
},
_mouseStart:function(a,b,c){
var i,body,
o=this.options;
this.currentContainer=this;
this.refreshPositions();
this.helper=this._createHelper(a);
this._cacheHelperProportions();

this._cacheMargins();
this.scrollParent=this.helper.scrollParent();
this.offset=this.currentItem.offset();
this.offset={
top:this.offset.top-this.margins.top,
left:this.offset.left-this.margins.left
};
$.extend(this.offset,{
click:{left:a.pageX-this.offset.left,
top:a.pageY-this.offset.top
},
parent:this._getParentOffset(),
relative:this._getRelativeOffset()});
this.helper.css("position","absolute");
this.cssPosition=this.helper.css("position");
this.originalPosition=this._generatePosition(a);
this.originalPageX=a.pageX;
this.originalPageY=a.pageY;
(o.cursorAt&&this._adjustOffsetFromHelper(o.cursorAt));
this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]};
if(this.helper[0]!==this.currentItem[0]){
this.currentItem.hide();
}
this._createPlaceholder();
if(o.containment){
this._setContainment();
}
if(o.cursor&&o.cursor!=="auto"){body=this.document.find("body");
this.storedCursor=body.css("cursor");
body.css("cursor",o.cursor);
this.storedStylesheet=$("<style>*{ cursor: "+o.cursor+" !important; }</style>").appendTo(body);
}
if(o.opacity){if(this.helper.css("opacity")){
this._storedOpacity=this.helper.css("opacity");
}
this.helper.css("opacity",o.opacity);
}
if(o.zIndex){if(this.helper.css("zIndex")){
this._storedZIndex=this.helper.css("zIndex");
}
this.helper.css("zIndex",o.zIndex);
}
if(this.scrollParent[0]!==document&&this.scrollParent[0].tagName!=="HTML"){
this.overflowOffset=this.scrollParent.offset();
}
this._trigger("start",a,this._uiHash());
if(!this._preserveHelperProportions){
this._cacheHelperProportions();
}
if(!c){
for(i=this.containers.length-1;i>=0;i--){
this.containers[i]._trigger("activate",a,this._uiHash(this));
}
}
if($.ui.ddmanager){
$.ui.ddmanager.current=this;
}
if($.ui.ddmanager&&!o.dropBehaviour){
$.ui.ddmanager.prepareOffsets(this,a);
}
this.dragging=true;
this.helper.addClass("ui-sortable-helper");
this._mouseDrag(a);return true;
},
_mouseDrag:function(a){
var i,item,itemElement,intersection,
o=this.options,
scrolled=false;
this.position=this._generatePosition(a);
this.positionAbs=this._convertPositionTo("absolute");
if(!this.lastPositionAbs){
this.lastPositionAbs=this.positionAbs;
}
if(this.options.scroll){
if(this.scrollParent[0]!==document&&this.scrollParent[0].tagName!=="HTML"){
if((this.overflowOffset.top+this.scrollParent[0].offsetHeight)-a.pageY<o.scrollSensitivity){
this.scrollParent[0].scrollTop=scrolled=this.scrollParent[0].scrollTop+o.scrollSpeed;
}else if(a.pageY-this.overflowOffset.top<o.scrollSensitivity){
this.scrollParent[0].scrollTop=scrolled=this.scrollParent[0].scrollTop-o.scrollSpeed;
}
if((this.overflowOffset.left+this.scrollParent[0].offsetWidth)-a.pageX<o.scrollSensitivity){
this.scrollParent[0].scrollLeft=scrolled=this.scrollParent[0].scrollLeft+o.scrollSpeed;
}else if(a.pageX-this.overflowOffset.left<o.scrollSensitivity){
this.scrollParent[0].scrollLeft=scrolled=this.scrollParent[0].scrollLeft-o.scrollSpeed;
}
}else{
if(a.pageY-$(document).scrollTop()<o.scrollSensitivity){
scrolled=$(document).scrollTop($(document).scrollTop()-o.scrollSpeed);
}else if($(window).height()-(a.pageY-$(document).scrollTop())<o.scrollSensitivity){
scrolled=$(document).scrollTop($(document).scrollTop()+o.scrollSpeed);
}
if(a.pageX-$(document).scrollLeft()<o.scrollSensitivity){
scrolled=$(document).scrollLeft($(document).scrollLeft()-o.scrollSpeed);
}else if($(window).width()-(a.pageX-$(document).scrollLeft())<o.scrollSensitivity){
scrolled=$(document).scrollLeft($(document).scrollLeft()+o.scrollSpeed);
}
}
if(scrolled!==false&&$.ui.ddmanager&&!o.dropBehaviour){
$.ui.ddmanager.prepareOffsets(this,a);
}
}
this.positionAbs=this._convertPositionTo("absolute");
if(!this.options.axis||this.options.axis!=="y"){
this.helper[0].style.left=this.position.left+"px";
}
if(!this.options.axis||this.options.axis!=="x"){
this.helper[0].style.top=this.position.top+"px";
}
for(i=this.items.length-1;i>=0;i--){
item=this.items[i];
itemElement=item.item[0];
intersection=this._intersectsWithPointer(item);
if(!intersection){
continue;
}
if(item.instance!==this.currentContainer){
continue;
}
if(itemElement!==this.currentItem[0]&&
this.placeholder[intersection===1?"next":"prev"]()[0]!==itemElement&&
!$.contains(this.placeholder[0],itemElement)&&
(this.options.type==="semi-dynamic"?!$.contains(this.element[0],itemElement):true)
){
this.direction=intersection===1?"down":"up";
if(this.options.tolerance==="pointer"||this._intersectsWithSides(item)){
this._rearrange(a,item);
}else{
break;
}
this._trigger("change",a,this._uiHash());
break;
}
}
this._contactContainers(a);
if($.ui.ddmanager){
$.ui.ddmanager.drag(this,a);
}
this._trigger("sort",a,this._uiHash());
this.lastPositionAbs=this.positionAbs;
return false;
},
_mouseStop:function(a,b){
if(!a){
return;
}
if($.ui.ddmanager&&!this.options.dropBehaviour){
$.ui.ddmanager.drop(this,a);
}
if(this.options.revert){
var c=this,
cur=this.placeholder.offset(),
axis=this.options.axis,
animation={};
if(!axis||axis==="x"){
animation.left=cur.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]===document.body?0:this.offsetParent[0].scrollLeft);
}
if(!axis||axis==="y"){
animation.top=cur.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]===document.body?0:this.offsetParent[0].scrollTop);
}
this.reverting=true;
$(this.helper).animate(animation,parseInt(this.options.revert,10)||500,function(){
c._clear(a);
});
}else{
this._clear(a,b);
}
return false;
},
cancel:function(){
if(this.dragging){
this._mouseUp({target:null});
if(this.options.helper==="original"){
this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper");
}else{
this.currentItem.show();
}
for(var i=this.containers.length-1;i>=0;i--){
this.containers[i]._trigger("deactivate",null,this._uiHash(this));
if(this.containers[i].containerCache.over){
this.containers[i]._trigger("out",null,this._uiHash(this));
this.containers[i].containerCache.over=0;
}
}
}
if(this.placeholder){
if(this.placeholder[0].parentNode){
this.placeholder[0].parentNode.removeChild(this.placeholder[0]);
}
if(this.options.helper!=="original"&&this.helper&&this.helper[0].parentNode){
this.helper.remove();
}
$.extend(this,{
helper:null,
dragging:false,
reverting:false,
_noFinalSort:null
});
if(this.domPosition.prev){
$(this.domPosition.prev).after(this.currentItem);
}else{
$(this.domPosition.parent).prepend(this.currentItem);
}
}
return this;
},
serialize:function(o){
var b=this._getItemsAsjQuery(o&&o.connected),
str=[];
o=o||{};
$(b).each(function(){
var a=($(o.item||this).attr(o.attribute||"id")||"").match(o.expression||(/(.+)[\-=_](.+)/));
if(a){
str.push((o.key||a[1]+"[]")+"="+(o.key&&o.expression?a[1]:a[2]));
}
});
if(!str.length&&o.key){
str.push(o.key+"=");
}
return str.join("&");
},
toArray:function(o){
var a=this._getItemsAsjQuery(o&&o.connected),
ret=[];
o=o||{};
a.each(function(){ret.push($(o.item||this).attr(o.attribute||"id")||"")});
return ret;
},

_intersectsWith:function(a){
var c=this.positionAbs.left,
x2=c+this.helperProportions.width,
y1=this.positionAbs.top,
y2=y1+this.helperProportions.height,
l=a.left,
r=l+a.width,
t=a.top,
b=t+a.height,
dyClick=this.offset.click.top,
dxClick=this.offset.click.left,
isOverElementHeight=(this.options.axis==="x")||((y1+dyClick)>t&&(y1+dyClick)<b),
isOverElementWidth=(this.options.axis==="y")||((c+dxClick)>l&&(c+dxClick)<r),
isOverElement=isOverElementHeight&&isOverElementWidth;
if(this.options.tolerance==="pointer"||
this.options.forcePointerForContainers||
(this.options.tolerance!=="pointer"&&this.helperProportions[this.floating?"width":"height"]>a[this.floating?"width":"height"])
){
return isOverElement;
}else{
return(l<c+(this.helperProportions.width/2)&&x2-(this.helperProportions.width/2)<r&&t<y1+(this.helperProportions.height/2)&&y2-(this.helperProportions.height/2)<b)}
},
_intersectsWithPointer:function(a){
var b=(this.options.axis==="x")||isOverAxis(this.positionAbs.top+this.offset.click.top,a.top,a.height),
isOverElementWidth=(this.options.axis==="y")||isOverAxis(this.positionAbs.left+this.offset.click.left,a.left,a.width),
isOverElement=b&&isOverElementWidth,
verticalDirection=this._getDragVerticalDirection(),
horizontalDirection=this._getDragHorizontalDirection();
if(!isOverElement){
return false;
}
return this.floating?
(((horizontalDirection&&horizontalDirection==="right")||verticalDirection==="down")?2:1)
:(verticalDirection&&(verticalDirection==="down"?2:1));
},
_intersectsWithSides:function(a){
var b=isOverAxis(this.positionAbs.top+this.offset.click.top,a.top+(a.height/2),a.height),
isOverRightHalf=isOverAxis(this.positionAbs.left+this.offset.click.left,a.left+(a.width/2),a.width),
verticalDirection=this._getDragVerticalDirection(),
horizontalDirection=this._getDragHorizontalDirection();
if(this.floating&&horizontalDirection){
return((horizontalDirection==="right"&&isOverRightHalf)||(horizontalDirection==="left"&&!isOverRightHalf));
}else{
return verticalDirection&&((verticalDirection==="down"&&b)||(verticalDirection==="up"&&!b));
}
},
_getDragVerticalDirection:function(){
var a=this.positionAbs.top-this.lastPositionAbs.top;
return a!==0&&(a>0?"down":"up");
},
_getDragHorizontalDirection:function(){
var a=this.positionAbs.left-this.lastPositionAbs.left;
return a!==0&&(a>0?"right":"left");
},
refresh:function(a){
this._refreshItems(a);
this.refreshPositions();
return this;
},
_connectWith:function(){
var a=this.options;
return a.connectWith.constructor===String?[a.connectWith]:a.connectWith;
},
_getItemsAsjQuery:function(a){
var i,j,cur,inst,
items=[],
queries=[],
connectWith=this._connectWith();
if(connectWith&&a){
for(i=connectWith.length-1;i>=0;i--){
cur=$(connectWith[i]);
for(j=cur.length-1;j>=0;j--){
inst=$.data(cur[j],this.widgetFullName);
if(inst&&inst!==this&&!inst.options.disabled){
queries.push([$.isFunction(inst.options.items)?inst.options.items.call(inst.element):$(inst.options.items,inst.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),inst]);
}
}
}
}
queries.push([$.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):$(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]);
function addItems(){
items.push(this);
}
for(i=queries.length-1;i>=0;i--){
queries[i][0].each(addItems);
}
return $(items);
},
_removeCurrentsFromItems:function(){
var b=this.currentItem.find(":data("+this.widgetName+"-item)");
this.items=$.grep(this.items,function(a){
for(var j=0;j<b.length;j++){
if(b[j]===a.item[0]){
return false;
}
}
return true;
});
},
_refreshItems:function(a){
this.items=[];
this.containers=[this];
var i,j,cur,inst,targetData,_queries,item,queriesLength,
items=this.items,
queries=[[$.isFunction(this.options.items)?this.options.items.call(this.element[0],a,{item:this.currentItem}):$(this.options.items,this.element),this]],
connectWith=this._connectWith();
if(connectWith&&this.ready){for(i=connectWith.length-1;i>=0;i--){
cur=$(connectWith[i]);
for(j=cur.length-1;j>=0;j--){
inst=$.data(cur[j],this.widgetFullName);
if(inst&&inst!==this&&!inst.options.disabled){
queries.push([$.isFunction(inst.options.items)?inst.options.items.call(inst.element[0],a,{item:this.currentItem}):$(inst.options.items,inst.element),inst]);
this.containers.push(inst);
}
}
}
}
for(i=queries.length-1;i>=0;i--){
targetData=queries[i][1];
_queries=queries[i][0];
for(j=0,queriesLength=_queries.length;j<queriesLength;j++){
item=$(_queries[j]);
item.data(this.widgetName+"-item",targetData);items.push({
item:item,
instance:targetData,
width:0,height:0,
left:0,top:0
});
}
}
},
refreshPositions:function(a){
if(this.offsetParent&&this.helper){
this.offset.parent=this._getParentOffset();
}
var i,item,t,p;
for(i=this.items.length-1;i>=0;i--){
item=this.items[i];
if(item.instance!==this.currentContainer&&this.currentContainer&&item.item[0]!==this.currentItem[0]){
continue;
}
t=this.options.toleranceElement?$(this.options.toleranceElement,item.item):item.item;
if(!a){
item.width=t.outerWidth();
item.height=t.outerHeight();
}
p=t.offset();
item.left=p.left;
item.top=p.top;
}
if(this.options.custom&&this.options.custom.refreshContainers){
this.options.custom.refreshContainers.call(this);
}else{
for(i=this.containers.length-1;i>=0;i--){
p=this.containers[i].element.offset();
this.containers[i].containerCache.left=p.left;
this.containers[i].containerCache.top=p.top;
this.containers[i].containerCache.width=this.containers[i].element.outerWidth();
this.containers[i].containerCache.height=this.containers[i].element.outerHeight();
}
}
return this;
},
_createPlaceholder:function(b){
b=b||this;
var c,
o=b.options;
if(!o.placeholder||o.placeholder.constructor===String){
c=o.placeholder;
o.placeholder={
element:function(){
var a=b.currentItem[0].nodeName.toLowerCase(),
element=$("<"+a+">",b.document[0])
.addClass(c||b.currentItem[0].className+" ui-sortable-placeholder")
.removeClass("ui-sortable-helper");
if(a==="tr"){
b.currentItem.children().each(function(){
$("<td>&#160;</td>",b.document[0])
.attr("colspan",$(this).attr("colspan")||1)
.appendTo(element);
});
}else if(a==="img"){
element.attr("src",b.currentItem.attr("src"));
}
if(!c){
element.css("visibility","hidden");
}
return element;
},
update:function(a,p){
if(c&&!o.forcePlaceholderSize){
return;
}
if(!p.height()){p.height(b.currentItem.innerHeight()-parseInt(b.currentItem.css("paddingTop")||0,10)-parseInt(b.currentItem.css("paddingBottom")||0,10))}
if(!p.width()){p.width(b.currentItem.innerWidth()-parseInt(b.currentItem.css("paddingLeft")||0,10)-parseInt(b.currentItem.css("paddingRight")||0,10))}
}
};
}
b.placeholder=$(o.placeholder.element.call(b.element,b.currentItem));
b.currentItem.after(b.placeholder);
o.placeholder.update(b,b.placeholder);
},
_contactContainers:function(a){
var i,j,dist,itemWithLeastDistance,posProperty,sizeProperty,base,cur,nearBottom,floating,
innermostContainer=null,
innermostIndex=null;
for(i=this.containers.length-1;i>=0;i--){
if($.contains(this.currentItem[0],this.containers[i].element[0])){
continue;
}
if(this._intersectsWith(this.containers[i].containerCache)){
if(innermostContainer&&$.contains(this.containers[i].element[0],innermostContainer.element[0])){
continue;
}
innermostContainer=this.containers[i];
innermostIndex=i;
}else{
if(this.containers[i].containerCache.over){
this.containers[i]._trigger("out",a,this._uiHash(this));
this.containers[i].containerCache.over=0;
}
}
}
if(!innermostContainer){
return;
}
if(this.containers.length===1){
if(!this.containers[innermostIndex].containerCache.over){
this.containers[innermostIndex]._trigger("over",a,this._uiHash(this));
this.containers[innermostIndex].containerCache.over=1;
}
}else{
dist=10000;
itemWithLeastDistance=null;
floating=innermostContainer.floating||isFloating(this.currentItem);
posProperty=floating?"left":"top";
sizeProperty=floating?"width":"height";
base=this.positionAbs[posProperty]+this.offset.click[posProperty];
for(j=this.items.length-1;j>=0;j--){
if(!$.contains(this.containers[innermostIndex].element[0],this.items[j].item[0])){
continue;
}
if(this.items[j].item[0]===this.currentItem[0]){
continue;
}
if(floating&&!isOverAxis(this.positionAbs.top+this.offset.click.top,this.items[j].top,this.items[j].height)){
continue;
}
cur=this.items[j].item.offset()[posProperty];
nearBottom=false;
if(Math.abs(cur-base)>Math.abs(cur+this.items[j][sizeProperty]-base)){
nearBottom=true;
cur+=this.items[j][sizeProperty];
}
if(Math.abs(cur-base)<dist){
dist=Math.abs(cur-base);itemWithLeastDistance=this.items[j];
this.direction=nearBottom?"up":"down";
}
}
if(!itemWithLeastDistance&&!this.options.dropOnEmpty){
return;
}
if(this.currentContainer===this.containers[innermostIndex]){
return;
}
itemWithLeastDistance?this._rearrange(a,itemWithLeastDistance,null,true):this._rearrange(a,null,this.containers[innermostIndex].element,true);
this._trigger("change",a,this._uiHash());
this.containers[innermostIndex]._trigger("change",a,this._uiHash(this));
this.currentContainer=this.containers[innermostIndex];
this.options.placeholder.update(this.currentContainer,this.placeholder);
this.containers[innermostIndex]._trigger("over",a,this._uiHash(this));
this.containers[innermostIndex].containerCache.over=1;
}
},
_createHelper:function(a){
var o=this.options,
helper=$.isFunction(o.helper)?$(o.helper.apply(this.element[0],[a,this.currentItem])):(o.helper==="clone"?this.currentItem.clone():this.currentItem);
if(!helper.parents("body").length){
$(o.appendTo!=="parent"?o.appendTo:this.currentItem[0].parentNode)[0].appendChild(helper[0]);
}
if(helper[0]===this.currentItem[0]){
this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")};
}
if(!helper[0].style.width||o.forceHelperSize){
helper.width(this.currentItem.width());
}
if(!helper[0].style.height||o.forceHelperSize){
helper.height(this.currentItem.height());
}
return helper;
},
_adjustOffsetFromHelper:function(a){
if(typeof a==="string"){
a=a.split(" ");
}
if($.isArray(a)){
a={left:+a[0],top:+a[1]||0};
}
if("left"in a){
this.offset.click.left=a.left+this.margins.left;
}
if("right"in a){
this.offset.click.left=this.helperProportions.width-a.right+this.margins.left;
}
if("top"in a){
this.offset.click.top=a.top+this.margins.top;
}
if("bottom"in a){
this.offset.click.top=this.helperProportions.height-a.bottom+this.margins.top;
}
},
_getParentOffset:function(){
this.offsetParent=this.helper.offsetParent();
var a=this.offsetParent.offset();
if(this.cssPosition==="absolute"&&this.scrollParent[0]!==document&&$.contains(this.scrollParent[0],this.offsetParent[0])){
a.left+=this.scrollParent.scrollLeft();
a.top+=this.scrollParent.scrollTop();
}
if(this.offsetParent[0]===document.body||(this.offsetParent[0].tagName&&this.offsetParent[0].tagName.toLowerCase()==="html"&&$.ui.ie)){
a={top:0,left:0};
}
return{
top:a.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),
left:a.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)
};
},
_getRelativeOffset:function(){
if(this.cssPosition==="relative"){
var p=this.currentItem.position();
return{
top:p.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),
left:p.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()
};
}else{
return{top:0,left:0};
}
},
_cacheMargins:function(){
this.margins={
left:(parseInt(this.currentItem.css("marginLeft"),10)||0),
top:(parseInt(this.currentItem.css("marginTop"),10)||0)
};
},
_cacheHelperProportions:function(){
this.helperProportions={
width:this.helper.outerWidth(),
height:this.helper.outerHeight()
};
},
_setContainment:function(){
var a,co,over,
o=this.options;
if(o.containment==="parent"){
o.containment=this.helper[0].parentNode;
}
if(o.containment==="document"||o.containment==="window"){
this.containment=[
0-this.offset.relative.left-this.offset.parent.left,
0-this.offset.relative.top-this.offset.parent.top,
$(o.containment==="document"?document:window).width()-this.helperProportions.width-this.margins.left,
($(o.containment==="document"?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top
];
}
if(!(/^(document|window|parent)$/).test(o.containment)){
a=$(o.containment)[0];
co=$(o.containment).offset();
over=($(a).css("overflow")!=="hidden");
this.containment=[
co.left+(parseInt($(a).css("borderLeftWidth"),10)||0)+(parseInt($(a).css("paddingLeft"),10)||0)-this.margins.left,
co.top+(parseInt($(a).css("borderTopWidth"),10)||0)+(parseInt($(a).css("paddingTop"),10)||0)-this.margins.top,
co.left+(over?Math.max(a.scrollWidth,a.offsetWidth):a.offsetWidth)-(parseInt($(a).css("borderLeftWidth"),10)||0)-(parseInt($(a).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,
co.top+(over?Math.max(a.scrollHeight,a.offsetHeight):a.offsetHeight)-(parseInt($(a).css("borderTopWidth"),10)||0)-(parseInt($(a).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top
];
}
},
_convertPositionTo:function(d,a){
if(!a){
a=this.position;
}
var b=d==="absolute"?1:-1,
scroll=this.cssPosition==="absolute"&&!(this.scrollParent[0]!==document&&$.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,
scrollIsRootNode=(/(html|body)/i).test(scroll[0].tagName);
return{
top:(
a.top+this.offset.relative.top*b+this.offset.parent.top*b-((this.cssPosition==="fixed"?-this.scrollParent.scrollTop():(scrollIsRootNode?0:scroll.scrollTop()))*b)
),
left:(
a.left+this.offset.relative.left*b+this.offset.parent.left*b-((this.cssPosition==="fixed"?-this.scrollParent.scrollLeft():scrollIsRootNode?0:scroll.scrollLeft())*b)
)
};
},
_generatePosition:function(a){
var b,left,
o=this.options,
pageX=a.pageX,
pageY=a.pageY,
scroll=this.cssPosition==="absolute"&&!(this.scrollParent[0]!==document&&$.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,scrollIsRootNode=(/(html|body)/i).test(scroll[0].tagName);
if(this.cssPosition==="relative"&&!(this.scrollParent[0]!==document&&this.scrollParent[0]!==this.offsetParent[0])){
this.offset.relative=this._getRelativeOffset();
}

if(this.originalPosition){if(this.containment){
if(a.pageX-this.offset.click.left<this.containment[0]){
pageX=this.containment[0]+this.offset.click.left;
}
if(a.pageY-this.offset.click.top<this.containment[1]){
pageY=this.containment[1]+this.offset.click.top;
}
if(a.pageX-this.offset.click.left>this.containment[2]){
pageX=this.containment[2]+this.offset.click.left;
}
if(a.pageY-this.offset.click.top>this.containment[3]){
pageY=this.containment[3]+this.offset.click.top;
}
}
if(o.grid){
b=this.originalPageY+Math.round((pageY-this.originalPageY)/o.grid[1])*o.grid[1];
pageY=this.containment?((b-this.offset.click.top>=this.containment[1]&&b-this.offset.click.top<=this.containment[3])?b:((b-this.offset.click.top>=this.containment[1])?b-o.grid[1]:b+o.grid[1])):b;
left=this.originalPageX+Math.round((pageX-this.originalPageX)/o.grid[0])*o.grid[0];
pageX=this.containment?((left-this.offset.click.left>=this.containment[0]&&left-this.offset.click.left<=this.containment[2])?left:((left-this.offset.click.left>=this.containment[0])?left-o.grid[0]:left+o.grid[0])):left;
}
}
return{
b:(
pageY-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+((this.cssPosition==="fixed"?-this.scrollParent.scrollTop():(scrollIsRootNode?0:scroll.scrollTop())))
),
left:(
pageX-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+((this.cssPosition==="fixed"?-this.scrollParent.scrollLeft():scrollIsRootNode?0:scroll.scrollLeft()))
)
};
},
_rearrange:function(b,i,a,c){
a?a[0].appendChild(this.placeholder[0]):i.item[0].parentNode.insertBefore(this.placeholder[0],(this.direction==="down"?i.item[0]:i.item[0].nextSibling));
this.counter=this.counter?++this.counter:1;
var d=this.counter;
this._delay(function(){
if(d===this.counter){
this.refreshPositions(!c)}
});
},
_clear:function(e,f){

this.reverting=false;
var i,
delayedTriggers=[];
if(!this._noFinalSort&&this.currentItem.parent().length){
this.placeholder.before(this.currentItem);
}
this._noFinalSort=null;
if(this.helper[0]===this.currentItem[0]){
for(i in this._storedCSS){
if(this._storedCSS[i]==="auto"||this._storedCSS[i]==="static"){
this._storedCSS[i]="";
}
}
this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper");
}else{
this.currentItem.show();
}
if(this.fromOutside&&!f){
delayedTriggers.push(function(a){this._trigger("receive",a,this._uiHash(this.fromOutside))});
}
if((this.fromOutside||this.domPosition.prev!==this.currentItem.prev().not(".ui-sortable-helper")[0]||this.domPosition.parent!==this.currentItem.parent()[0])&&!f){
delayedTriggers.push(function(a){this._trigger("update",a,this._uiHash())})}
if(this!==this.currentContainer){
if(!f){
delayedTriggers.push(function(a){this._trigger("remove",a,this._uiHash())});
delayedTriggers.push((function(c){return function(a){c._trigger("receive",a,this._uiHash(this))}}).call(this,this.currentContainer));
delayedTriggers.push((function(c){return function(a){c._trigger("update",a,this._uiHash(this))}}).call(this,this.currentContainer));
}
}
function delayEvent(b,c,d){
return function(a){
d._trigger(b,a,c._uiHash(c));
};
}
for(i=this.containers.length-1;i>=0;i--){
if(!f){
delayedTriggers.push(delayEvent("deactivate",this,this.containers[i]));
}
if(this.containers[i].containerCache.over){
delayedTriggers.push(delayEvent("out",this,this.containers[i]));
this.containers[i].containerCache.over=0;
}
}
if(this.storedCursor){
this.document.find("body").css("cursor",this.storedCursor);
this.storedStylesheet.remove();
}
if(this._storedOpacity){
this.helper.css("opacity",this._storedOpacity);
}
if(this._storedZIndex){
this.helper.css("zIndex",this._storedZIndex==="auto"?"":this._storedZIndex);
}
this.dragging=false;
if(this.cancelHelperRemoval){
if(!f){
this._trigger("beforeStop",e,this._uiHash());
for(i=0;i<delayedTriggers.length;i++){
delayedTriggers[i].call(this,e);
}this._trigger("stop",e,this._uiHash());
}
this.fromOutside=false;
return false;
}
if(!f){
this._trigger("beforeStop",e,this._uiHash());
}
this.placeholder[0].parentNode.removeChild(this.placeholder[0]);
if(this.helper[0]!==this.currentItem[0]){
this.helper.remove();
}
this.helper=null;
if(!f){
for(i=0;i<delayedTriggers.length;i++){
delayedTriggers[i].call(this,e);
}this._trigger("stop",e,this._uiHash());
}
this.fromOutside=false;
return true;
},
_trigger:function(){
if($.Widget.prototype._trigger.apply(this,arguments)===false){
this.cancel();
}
},
_uiHash:function(a){
var b=a||this;
return{
helper:b.helper,
placeholder:b.placeholder||$([]),
position:b.position,
originalPosition:b.originalPosition,
offset:b.positionAbs,
item:b.currentItem,
sender:a?a.element:null
};
}
});
})(jQuery);
(function($){
function modifier(b){
return function(){
var a=this.element.val();
b.apply(this,arguments);
this._refresh();
if(a!==this.element.val()){
this._trigger("change");
}
};
}
$.widget("ui.spinner",{
version:"1.10.4",
defaultElement:"<input>",
widgetEventPrefix:"spin",
options:{
culture:null,
icons:{
down:"ui-icon-triangle-1-s",
up:"ui-icon-triangle-1-n"
},
incremental:true,
max:null,
min:null,
numberFormat:null,
page:10,
step:1,
change:null,
spin:null,
start:null,
stop:null
},
_create:function(){
this._setOption("max",this.options.max);
this._setOption("min",this.options.min);
this._setOption("step",this.options.step);
if(this.value()!==""){
this._value(this.element.val(),true);
}
this._draw();
this._on(this._events);
this._refresh();
this._on(this.window,{
beforeunload:function(){
this.element.removeAttr("autocomplete");
}
});
},
_getCreateOptions:function(){
var c={},
element=this.element;
$.each(["min","max","step"],function(i,a){
var b=element.attr(a);
if(b!==undefined&&b.length){
c[a]=b;
}
});
return c;
},
_events:{
keydown:function(a){
if(this._start(a)&&this._keydown(a)){
a.preventDefault();
}
},
keyup:"_stop",
focus:function(){
this.previous=this.element.val();
},
blur:function(a){
if(this.cancelBlur){
delete this.cancelBlur;
return;
}
this._stop();
this._refresh();
if(this.previous!==this.element.val()){
this._trigger("change",a);
}
},
mousewheel:function(a,b){
if(!b){
return;
}
if(!this.spinning&&!this._start(a)){
return false;
}
this._spin((b>0?1:-1)*this.options.step,a);
clearTimeout(this.mousewheelTimer);
this.mousewheelTimer=this._delay(function(){
if(this.spinning){
this._stop(a);
}
},100);
a.preventDefault();
},
"mousedown .ui-spinner-button":function(b){
var c;
c=this.element[0]===this.document[0].activeElement?
this.previous:this.element.val();
function checkFocus(){
var a=this.element[0]===this.document[0].activeElement;
if(!a){
this.element.focus();
this.previous=c;
this._delay(function(){
this.previous=c;
});
}
}
b.preventDefault();
checkFocus.call(this);
this.cancelBlur=true;
this._delay(function(){
delete this.cancelBlur;
checkFocus.call(this);
});
if(this._start(b)===false){
return;
}
this._repeat(null,$(b.currentTarget).hasClass("ui-spinner-up")?1:-1,b);
},
"mouseup .ui-spinner-button":"_stop",
"mouseenter .ui-spinner-button":function(a){
if(!$(a.currentTarget).hasClass("ui-state-active")){
return;
}
if(this._start(a)===false){
return false;
}
this._repeat(null,$(a.currentTarget).hasClass("ui-spinner-up")?1:-1,a);
},
"mouseleave .ui-spinner-button":"_stop"
},
_draw:function(){
var a=this.uiSpinner=this.element
.addClass("ui-spinner-input")
.attr("autocomplete","off")
.wrap(this._uiSpinnerHtml())
.parent()
.append(this._buttonHtml());
this.element.attr("role","spinbutton");
this.buttons=a.find(".ui-spinner-button")
.attr("tabIndex",-1)
.button()
.removeClass("ui-corner-all");
if(this.buttons.height()>Math.ceil(a.height()*0.5)&&
a.height()>0){
a.height(a.height());
}
if(this.options.disabled){
this.disable();
}
},
_keydown:function(a){
var b=this.options,
keyCode=$.ui.keyCode;
switch(a.keyCode){
case keyCode.UP:
this._repeat(null,1,a);
return true;
case keyCode.DOWN:
this._repeat(null,-1,a);
return true;
case keyCode.PAGE_UP:
this._repeat(null,b.page,a);
return true;
case keyCode.PAGE_DOWN:
this._repeat(null,-b.page,a);
return true;
}
return false;
},
_uiSpinnerHtml:function(){
return"<span class='ui-spinner ui-widget ui-widget-content ui-corner-all'></span>";
},
_buttonHtml:function(){
return""+
"<a class='ui-spinner-button ui-spinner-up ui-corner-tr'>"+
"<span class='ui-icon "+this.options.icons.up+"'>&#9650;</span>"+
"</a>"+
"<a class='ui-spinner-button ui-spinner-down ui-corner-br'>"+
"<span class='ui-icon "+this.options.icons.down+"'>&#9660;</span>"+
"</a>";
},
_start:function(a){
if(!this.spinning&&this._trigger("start",a)===false){
return false;
}
if(!this.counter){
this.counter=1;
}
this.spinning=true;
return true;
},
_repeat:function(i,a,b){
i=i||500;
clearTimeout(this.timer);
this.timer=this._delay(function(){
this._repeat(40,a,b);
},i);
this._spin(a*this.options.step,b);
},
_spin:function(a,b){
var c=this.value()||0;
if(!this.counter){
this.counter=1;
}
c=this._adjustValue(c+a*this._increment(this.counter));
if(!this.spinning||this._trigger("spin",b,{value:c})!==false){
this._value(c);
this.counter++;
}
},
_increment:function(i){
var a=this.options.incremental;
if(a){
return $.isFunction(a)?
a(i):
Math.floor(i*i*i/50000-i*i/500+17*i/200+1);
}
return 1;
},
_precision:function(){
var a=this._precisionOf(this.options.step);
if(this.options.min!==null){
a=Math.max(a,this._precisionOf(this.options.min));
}
return a;
},
_precisionOf:function(a){
var b=a.toString(),
decimal=b.indexOf(".");
return decimal===-1?0:b.length-decimal-1;
},
_adjustValue:function(a){
var b,aboveMin,
options=this.options;
b=options.min!==null?options.min:0;
aboveMin=a-b;
aboveMin=Math.round(aboveMin/options.step)*options.step;
a=b+aboveMin;
a=parseFloat(a.toFixed(this._precision()));
if(options.max!==null&&a>options.max){
return options.max;
}
if(options.min!==null&&a<options.min){
return options.min;
}
return a;
},
_stop:function(a){
if(!this.spinning){
return;
}
clearTimeout(this.timer);
clearTimeout(this.mousewheelTimer);
this.counter=0;
this.spinning=false;
this._trigger("stop",a);
},
_setOption:function(a,b){
if(a==="culture"||a==="numberFormat"){
var c=this._parse(this.element.val());
this.options[a]=b;
this.element.val(this._format(c));
return;
}
if(a==="max"||a==="min"||a==="step"){
if(typeof b==="string"){
b=this._parse(b);
}
}
if(a==="icons"){
this.buttons.first().find(".ui-icon")
.removeClass(this.options.icons.up)
.addClass(b.up);
this.buttons.last().find(".ui-icon")
.removeClass(this.options.icons.down)
.addClass(b.down);
}
this._super(a,b);
if(a==="disabled"){
if(b){
this.element.prop("disabled",true);
this.buttons.button("disable");
}else{
this.element.prop("disabled",false);
this.buttons.button("enable");
}
}
},
_setOptions:modifier(function(a){
this._super(a);
this._value(this.element.val());
}),
_parse:function(a){
if(typeof a==="string"&&a!==""){
a=window.Globalize&&this.options.numberFormat?
Globalize.parseFloat(a,10,this.options.culture):+a;
}
return a===""||isNaN(a)?null:a;
},
_format:function(a){
if(a===""){
return"";
}
return window.Globalize&&this.options.numberFormat?
Globalize.format(a,this.options.numberFormat,this.options.culture):
a;
},
_refresh:function(){
this.element.attr({
"aria-valuemin":this.options.min,
"aria-valuemax":this.options.max,
"aria-valuenow":this._parse(this.element.val())
});
},
_value:function(a,b){
var c;
if(a!==""){
c=this._parse(a);
if(c!==null){
if(!b){
c=this._adjustValue(c);
}
a=this._format(c);
}
}
this.element.val(a);
this._refresh();
},
_destroy:function(){
this.element
.removeClass("ui-spinner-input")
.prop("disabled",false)
.removeAttr("autocomplete")
.removeAttr("role")
.removeAttr("aria-valuemin")
.removeAttr("aria-valuemax")
.removeAttr("aria-valuenow");
this.uiSpinner.replaceWith(this.element);
},
stepUp:modifier(function(a){
this._stepUp(a);
}),
_stepUp:function(a){
if(this._start()){
this._spin((a||1)*this.options.step);
this._stop();
}
},
stepDown:modifier(function(a){
this._stepDown(a);
}),
_stepDown:function(a){
if(this._start()){
this._spin((a||1)*-this.options.step);
this._stop();
}
},
pageUp:modifier(function(a){
this._stepUp((a||1)*this.options.page);
}),
pageDown:modifier(function(a){
this._stepDown((a||1)*this.options.page);
}),
value:function(a){
if(!arguments.length){
return this._parse(this.element.val());
}
modifier(this._value).call(this,a);
},
widget:function(){
return this.uiSpinner;
}
});
}(jQuery));
(function($,g){
var h=0,
rhash=/#.*$/;
function getNextTabId(){
return++h;
}
function isLocal(a){
a=a.cloneNode(false);
return a.hash.length>1&&
decodeURIComponent(a.href.replace(rhash,""))===
decodeURIComponent(location.href.replace(rhash,""));
}
$.widget("ui.tabs",{
version:"1.10.4",
delay:300,
options:{
active:null,
collapsible:false,
event:"click",
heightStyle:"content",
hide:null,
show:null,
activate:null,
beforeActivate:null,
beforeLoad:null,
load:null
},
_create:function(){
var b=this,
options=this.options;
this.running=false;
this.element
.addClass("ui-tabs ui-widget ui-widget-content ui-corner-all")
.toggleClass("ui-tabs-collapsible",options.collapsible)
.delegate(".ui-tabs-nav > li","mousedown"+this.eventNamespace,function(a){
if($(this).is(".ui-state-disabled")){
a.preventDefault();
}
})
.delegate(".ui-tabs-anchor","focus"+this.eventNamespace,function(){
if($(this).closest("li").is(".ui-state-disabled")){
this.blur();
}
});
this._processTabs();
options.active=this._initialActive();
if($.isArray(options.disabled)){
options.disabled=$.unique(options.disabled.concat(
$.map(this.tabs.filter(".ui-state-disabled"),function(a){
return b.tabs.index(a);
})
)).sort();
}
if(this.options.active!==false&&this.anchors.length){
this.active=this._findActive(options.active);
}else{
this.active=$();
}
this._refresh();
if(this.active.length){
this.load(options.active);
}
},
_initialActive:function(){
var b=this.options.active,
collapsible=this.options.collapsible,
locationHash=location.hash.substring(1);
if(b===null){
if(locationHash){
this.tabs.each(function(i,a){
if($(a).attr("aria-controls")===locationHash){
b=i;
return false;
}
});
}
if(b===null){
b=this.tabs.index(this.tabs.filter(".ui-tabs-active"));
}
if(b===null||b===-1){
b=this.tabs.length?0:false;
}
}
if(b!==false){
b=this.tabs.index(this.tabs.eq(b));
if(b===-1){
b=collapsible?false:0;
}
}
if(!collapsible&&b===false&&this.anchors.length){
b=0;
}
return b;
},
_getCreateEventData:function(){
return{
tab:this.active,
panel:!this.active.length?$():this._getPanelForTab(this.active)
};
},
_tabKeydown:function(a){
var b=$(this.document[0].activeElement).closest("li"),
selectedIndex=this.tabs.index(b),
goingForward=true;
if(this._handlePageNav(a)){
return;
}
switch(a.keyCode){
case $.ui.keyCode.RIGHT:
case $.ui.keyCode.DOWN:
selectedIndex++;
break;
case $.ui.keyCode.UP:
case $.ui.keyCode.LEFT:
goingForward=false;
selectedIndex--;
break;
case $.ui.keyCode.END:
selectedIndex=this.anchors.length-1;
break;
case $.ui.keyCode.HOME:
selectedIndex=0;
break;
case $.ui.keyCode.SPACE:
a.preventDefault();
clearTimeout(this.activating);
this._activate(selectedIndex);
return;
case $.ui.keyCode.ENTER:
a.preventDefault();
clearTimeout(this.activating);
this._activate(selectedIndex===this.options.active?false:selectedIndex);
return;
default:
return;
}
a.preventDefault();
clearTimeout(this.activating);
selectedIndex=this._focusNextTab(selectedIndex,goingForward);
if(!a.ctrlKey){
b.attr("aria-selected","false");
this.tabs.eq(selectedIndex).attr("aria-selected","true");
this.activating=this._delay(function(){
this.option("active",selectedIndex);
},this.delay);
}
},
_panelKeydown:function(a){
if(this._handlePageNav(a)){
return;
}
if(a.ctrlKey&&a.keyCode===$.ui.keyCode.UP){
a.preventDefault();
this.active.focus();
}
},
_handlePageNav:function(a){
if(a.altKey&&a.keyCode===$.ui.keyCode.PAGE_UP){
this._activate(this._focusNextTab(this.options.active-1,false));
return true;
}
if(a.altKey&&a.keyCode===$.ui.keyCode.PAGE_DOWN){
this._activate(this._focusNextTab(this.options.active+1,true));
return true;
}
},
_findNextTab:function(a,b){
var c=this.tabs.length-1;
function constrain(){
if(a>c){
a=0;
}
if(a<0){
a=c;
}
return a;
}
while($.inArray(constrain(),this.options.disabled)!==-1){
a=b?a+1:a-1;
}
return a;
},
_focusNextTab:function(a,b){
a=this._findNextTab(a,b);
this.tabs.eq(a).focus();
return a;
},
_setOption:function(a,b){
if(a==="active"){
this._activate(b);
return;
}
if(a==="disabled"){
this._setupDisabled(b);
return;
}
this._super(a,b);
if(a==="collapsible"){
this.element.toggleClass("ui-tabs-collapsible",b);
if(!b&&this.options.active===false){
this._activate(0);
}
}
if(a==="event"){
this._setupEvents(b);
}
if(a==="heightStyle"){
this._setupHeightStyle(b);
}
},
_tabId:function(a){
return a.attr("aria-controls")||"ui-tabs-"+getNextTabId();
},
_sanitizeSelector:function(a){
return a?a.replace(/[!"$%&'()*+,.\/:;<=>?@\[\]\^`{|}~]/g,"\\$&"):"";
},
refresh:function(){
var b=this.options,
lis=this.tablist.children(":has(a[href])");
b.disabled=$.map(lis.filter(".ui-state-disabled"),function(a){
return lis.index(a);
});
this._processTabs();
if(b.active===false||!this.anchors.length){
b.active=false;
this.active=$();
}else if(this.active.length&&!$.contains(this.tablist[0],this.active[0])){
if(this.tabs.length===b.disabled.length){
b.active=false;
this.active=$();
}else{
this._activate(this._findNextTab(Math.max(0,b.active-1),false));
}
}else{
b.active=this.tabs.index(this.active);
}
this._refresh();
},
_refresh:function(){
this._setupDisabled(this.options.disabled);
this._setupEvents(this.options.event);
this._setupHeightStyle(this.options.heightStyle);
this.tabs.not(this.active).attr({
"aria-selected":"false",
tabIndex:-1
});
this.panels.not(this._getPanelForTab(this.active))
.hide()
.attr({
"aria-expanded":"false",
"aria-hidden":"true"
});
if(!this.active.length){
this.tabs.eq(0).attr("tabIndex",0);
}else{
this.active
.addClass("ui-tabs-active ui-state-active")
.attr({
"aria-selected":"true",
tabIndex:0
});
this._getPanelForTab(this.active)
.show()
.attr({
"aria-expanded":"true",
"aria-hidden":"false"
});
}
},
_processTabs:function(){
var c=this;
this.tablist=this._getList()
.addClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all")
.attr("role","tablist");
this.tabs=this.tablist.find("> li:has(a[href])")
.addClass("ui-state-default ui-corner-top")
.attr({
role:"tab",
tabIndex:-1
});
this.anchors=this.tabs.map(function(){
return $("a",this)[0];
})
.addClass("ui-tabs-anchor")
.attr({
role:"presentation",
tabIndex:-1
});
this.panels=$();
this.anchors.each(function(i,a){
var b,panel,panelId,
anchorId=$(a).uniqueId().attr("id"),
tab=$(a).closest("li"),
originalAriaControls=tab.attr("aria-controls");
if(isLocal(a)){
b=a.hash;
panel=c.element.find(c._sanitizeSelector(b));
}else{
panelId=c._tabId(tab);
b="#"+panelId;
panel=c.element.find(b);
if(!panel.length){
panel=c._createPanel(panelId);
panel.insertAfter(c.panels[i-1]||c.tablist);
}
panel.attr("aria-live","polite");
}
if(panel.length){
c.panels=c.panels.add(panel);
}
if(originalAriaControls){
tab.data("ui-tabs-aria-controls",originalAriaControls);
}
tab.attr({
"aria-controls":b.substring(1),
"aria-labelledby":anchorId
});
panel.attr("aria-labelledby",anchorId);
});
this.panels
.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom")
.attr("role","tabpanel");
},
_getList:function(){
return this.tablist||this.element.find("ol,ul").eq(0);
},
_createPanel:function(a){
return $("<div>")
.attr("id",a)
.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom")
.data("ui-tabs-destroy",true);
},
_setupDisabled:function(a){
if($.isArray(a)){
if(!a.length){
a=false;
}else if(a.length===this.anchors.length){
a=true;
}
}
for(var i=0,li;(li=this.tabs[i]);i++){
if(a===true||$.inArray(i,a)!==-1){
$(li)
.addClass("ui-state-disabled")
.attr("aria-disabled","true");
}else{
$(li)
.removeClass("ui-state-disabled")
.removeAttr("aria-disabled");
}
}
this.options.disabled=a;
},
_setupEvents:function(c){
var d={
click:function(a){
a.preventDefault();
}
};
if(c){
$.each(c.split(" "),function(a,b){
d[b]="_eventHandler";
});
}
this._off(this.anchors.add(this.tabs).add(this.panels));
this._on(this.anchors,d);
this._on(this.tabs,{keydown:"_tabKeydown"});
this._on(this.panels,{keydown:"_panelKeydown"});
this._focusable(this.tabs);
this._hoverable(this.tabs);
},
_setupHeightStyle:function(b){
var c,
parent=this.element.parent();
if(b==="fill"){
c=parent.height();
c-=this.element.outerHeight()-this.element.height();
this.element.siblings(":visible").each(function(){
var a=$(this),
position=a.css("position");
if(position==="absolute"||position==="fixed"){
return;
}
c-=a.outerHeight(true);
});
this.element.children().not(this.panels).each(function(){
c-=$(this).outerHeight(true);
});
this.panels.each(function(){
$(this).height(Math.max(0,c-
$(this).innerHeight()+$(this).height()));
})
.css("overflow","auto");
}else if(b==="auto"){
c=0;
this.panels.each(function(){
c=Math.max(c,$(this).height("").height());
}).height(c);
}
},
_eventHandler:function(a){
var b=this.options,
active=this.active,
anchor=$(a.currentTarget),
tab=anchor.closest("li"),
clickedIsActive=tab[0]===active[0],
collapsing=clickedIsActive&&b.collapsible,
toShow=collapsing?$():this._getPanelForTab(tab),
toHide=!active.length?$():this._getPanelForTab(active),
eventData={
oldTab:active,
oldPanel:toHide,
newTab:collapsing?$():tab,
newPanel:toShow
};
a.preventDefault();
if(tab.hasClass("ui-state-disabled")||
tab.hasClass("ui-tabs-loading")||
this.running||
(clickedIsActive&&!b.collapsible)||
(this._trigger("beforeActivate",a,eventData)===false)){
return;
}
b.active=collapsing?false:this.tabs.index(tab);
this.active=clickedIsActive?$():tab;
if(this.xhr){
this.xhr.abort();
}
if(!toHide.length&&!toShow.length){
$.error("jQuery UI Tabs: Mismatching fragment identifier.");
}
if(toShow.length){
this.load(this.tabs.index(tab),a);
}
this._toggle(a,eventData);
},
_toggle:function(a,b){
var c=this,
toShow=b.newPanel,
toHide=b.oldPanel;
this.running=true;
function complete(){
c.running=false;
c._trigger("activate",a,b);
}
function show(){
b.newTab.closest("li").addClass("ui-tabs-active ui-state-active");
if(toShow.length&&c.options.show){
c._show(toShow,c.options.show,complete);
}else{
toShow.show();
complete();
}
}
if(toHide.length&&this.options.hide){
this._hide(toHide,this.options.hide,function(){
b.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active");
show();
});
}else{
b.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active");
toHide.hide();
show();
}
toHide.attr({
"aria-expanded":"false",
"aria-hidden":"true"
});
b.oldTab.attr("aria-selected","false");
if(toShow.length&&toHide.length){
b.oldTab.attr("tabIndex",-1);
}else if(toShow.length){
this.tabs.filter(function(){
return $(this).attr("tabIndex")===0;
})
.attr("tabIndex",-1);
}
toShow.attr({
"aria-expanded":"true",
"aria-hidden":"false"
});
b.newTab.attr({
"aria-selected":"true",
tabIndex:0
});
},
_activate:function(a){
var b,
active=this._findActive(a);
if(active[0]===this.active[0]){
return;
}
if(!active.length){
active=this.active;
}
b=active.find(".ui-tabs-anchor")[0];
this._eventHandler({
target:b,
currentTarget:b,
preventDefault:$.noop
});
},
_findActive:function(a){
return a===false?$():this.tabs.eq(a);
},
_getIndex:function(a){
if(typeof a==="string"){
a=this.anchors.index(this.anchors.filter("[href$='"+a+"']"));
}
return a;
},
_destroy:function(){
if(this.xhr){
this.xhr.abort();
}
this.element.removeClass("ui-tabs ui-widget ui-widget-content ui-corner-all ui-tabs-collapsible");
this.tablist
.removeClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all")
.removeAttr("role");
this.anchors
.removeClass("ui-tabs-anchor")
.removeAttr("role")
.removeAttr("tabIndex")
.removeUniqueId();
this.tabs.add(this.panels).each(function(){
if($.data(this,"ui-tabs-destroy")){
$(this).remove();
}else{
$(this)
.removeClass("ui-state-default ui-state-active ui-state-disabled "+
"ui-corner-top ui-corner-bottom ui-widget-content ui-tabs-active ui-tabs-panel")
.removeAttr("tabIndex")
.removeAttr("aria-live")
.removeAttr("aria-busy")
.removeAttr("aria-selected")
.removeAttr("aria-labelledby")
.removeAttr("aria-hidden")
.removeAttr("aria-expanded")
.removeAttr("role");
}
});
this.tabs.each(function(){
var a=$(this),
prev=a.data("ui-tabs-aria-controls");
if(prev){
a
.attr("aria-controls",prev)
.removeData("ui-tabs-aria-controls");
}else{
a.removeAttr("aria-controls");
}
});
this.panels.show();
if(this.options.heightStyle!=="content"){
this.panels.css("height","");
}
},
enable:function(c){
var d=this.options.disabled;
if(d===false){
return;
}
if(c===g){
d=false;
}else{
c=this._getIndex(c);
if($.isArray(d)){
d=$.map(d,function(a){
return a!==c?a:null;
});
}else{
d=$.map(this.tabs,function(a,b){
return b!==c?b:null;
});
}
}
this._setupDisabled(d);
},
disable:function(a){
var b=this.options.disabled;
if(b===true){
return;
}
if(a===g){
b=true;
}else{
a=this._getIndex(a);
if($.inArray(a,b)!==-1){
return;
}
if($.isArray(b)){
b=$.merge([a],b).sort();
}else{
b=[a];
}
}
this._setupDisabled(b);
},
load:function(c,d){
c=this._getIndex(c);
var e=this,
tab=this.tabs.eq(c),
anchor=tab.find(".ui-tabs-anchor"),
panel=this._getPanelForTab(tab),
eventData={
tab:tab,
panel:panel
};
if(isLocal(anchor[0])){
return;
}
this.xhr=$.ajax(this._ajaxSettings(anchor,d,eventData));
if(this.xhr&&this.xhr.statusText!=="canceled"){
tab.addClass("ui-tabs-loading");
panel.attr("aria-busy","true");
this.xhr
.success(function(a){
setTimeout(function(){
panel.html(a);
e._trigger("load",d,eventData);
},1);
})
.complete(function(a,b){
setTimeout(function(){
if(b==="abort"){
e.panels.stop(false,true);
}
tab.removeClass("ui-tabs-loading");
panel.removeAttr("aria-busy");
if(a===e.xhr){
delete e.xhr;
}
},1);
});
}
},
_ajaxSettings:function(c,d,e){
var f=this;
return{
url:c.attr("href"),
beforeSend:function(a,b){
return f._trigger("beforeLoad",d,
$.extend({jqXHR:a,ajaxSettings:b},e));
}
};
},
_getPanelForTab:function(a){
var b=$(a).attr("aria-controls");
return this.element.find(this._sanitizeSelector("#"+b));
}
});
})(jQuery);
(function($){
var g=0;
function addDescribedBy(a,b){
var c=(a.attr("aria-describedby")||"").split(/\s+/);
c.push(b);
a
.data("ui-tooltip-id",b)
.attr("aria-describedby",$.trim(c.join(" ")));
}
function removeDescribedBy(a){
var b=a.data("ui-tooltip-id"),
describedby=(a.attr("aria-describedby")||"").split(/\s+/),
index=$.inArray(b,describedby);
if(index!==-1){
describedby.splice(index,1);
}
a.removeData("ui-tooltip-id");
describedby=$.trim(describedby.join(" "));
if(describedby){
a.attr("aria-describedby",describedby);
}else{
a.removeAttr("aria-describedby");
}
}
$.widget("ui.tooltip",{
version:"1.10.4",
options:{
content:function(){
var a=$(this).attr("title")||"";
return $("<a>").text(a).html();
},
hide:true,
items:"[title]:not([disabled])",
position:{
my:"left top+15",
at:"left bottom",
collision:"flipfit flip"
},
show:true,
tooltipClass:null,
track:false,
close:null,
open:null
},
_create:function(){
this._on({
mouseover:"open",
focusin:"open"
});
this.tooltips={};
this.parents={};
if(this.options.disabled){
this._disable();
}
},
_setOption:function(c,d){
var e=this;
if(c==="disabled"){
this[d?"_disable":"_enable"]();
this.options[c]=d;
return;
}
this._super(c,d);
if(c==="content"){
$.each(this.tooltips,function(a,b){
e._updateContent(b);
});
}
},
_disable:function(){
var d=this;
$.each(this.tooltips,function(a,b){
var c=$.Event("blur");
c.target=c.currentTarget=b[0];
d.close(c,true);
});
this.element.find(this.options.items).addBack().each(function(){
var a=$(this);
if(a.is("[title]")){
a
.data("ui-tooltip-title",a.attr("title"))
.attr("title","");
}
});
},
_enable:function(){
this.element.find(this.options.items).addBack().each(function(){
var a=$(this);
if(a.data("ui-tooltip-title")){
a.attr("title",a.data("ui-tooltip-title"));
}
});
},
open:function(b){
var c=this,
target=$(b?b.target:this.element)
.closest(this.options.items);
if(!target.length||target.data("ui-tooltip-id")){
return;
}
if(target.attr("title")){
target.data("ui-tooltip-title",target.attr("title"));
}
target.data("ui-tooltip-open",true);
if(b&&b.type==="mouseover"){
target.parents().each(function(){
var a=$(this),
blurEvent;
if(a.data("ui-tooltip-open")){
blurEvent=$.Event("blur");
blurEvent.target=blurEvent.currentTarget=this;
c.close(blurEvent,true);
}
if(a.attr("title")){
a.uniqueId();
c.parents[this.id]={
element:this,
title:a.attr("title")
};
a.attr("title","");
}
});
}
this._updateContent(target,b);
},
_updateContent:function(b,c){
var d,
contentOption=this.options.content,
that=this,
eventType=c?c.type:null;
if(typeof contentOption==="string"){
return this._open(c,b,contentOption);
}
d=contentOption.call(b[0],function(a){
if(!b.data("ui-tooltip-open")){
return;
}
that._delay(function(){
if(c){
c.type=eventType;
}
this._open(c,b,a);
});
});
if(d){
this._open(c,b,d);
}
},
_open:function(c,d,e){
var f,events,delayedShow,
positionOption=$.extend({},this.options.position);
if(!e){
return;
}
f=this._find(d);
if(f.length){
f.find(".ui-tooltip-content").html(e);
return;
}
if(d.is("[title]")){
if(c&&c.type==="mouseover"){
d.attr("title","");
}else{
d.removeAttr("title");
}
}
f=this._tooltip(d);
addDescribedBy(d,f.attr("id"));
f.find(".ui-tooltip-content").html(e);
function position(a){
positionOption.of=a;
if(f.is(":hidden")){
return;
}
f.position(positionOption);
}
if(this.options.track&&c&&/^mouse/.test(c.type)){
this._on(this.document,{
mousemove:position
});
position(c);
}else{
f.position($.extend({
of:d
},this.options.position));
}
f.hide();
this._show(f,this.options.show);
if(this.options.show&&this.options.show.delay){
delayedShow=this.delayedShow=setInterval(function(){
if(f.is(":visible")){
position(positionOption.of);
clearInterval(delayedShow);
}
},$.fx.interval);
}
this._trigger("open",c,{tooltip:f});
events={
keyup:function(a){
if(a.keyCode===$.ui.keyCode.ESCAPE){
var b=$.Event(a);
b.currentTarget=d[0];
this.close(b,true);
}
},
remove:function(){
this._removeTooltip(f);
}
};
if(!c||c.type==="mouseover"){
events.mouseleave="close";
}
if(!c||c.type==="focusin"){
events.focusout="close";
}
this._on(true,d,events);
},
close:function(c){
var d=this,
target=$(c?c.currentTarget:this.element),
tooltip=this._find(target);
if(this.closing){
return;
}
clearInterval(this.delayedShow);
if(target.data("ui-tooltip-title")){
target.attr("title",target.data("ui-tooltip-title"));
}
removeDescribedBy(target);
tooltip.stop(true);
this._hide(tooltip,this.options.hide,function(){
d._removeTooltip($(this));
});
target.removeData("ui-tooltip-open");
this._off(target,"mouseleave focusout keyup");
if(target[0]!==this.element[0]){
this._off(target,"remove");
}
this._off(this.document,"mousemove");
if(c&&c.type==="mouseleave"){
$.each(this.parents,function(a,b){
$(b.element).attr("title",b.title);
delete d.parents[a];
});
}
this.closing=true;
this._trigger("close",c,{tooltip:tooltip});
this.closing=false;
},
_tooltip:function(a){
var b="ui-tooltip-"+g++,
tooltip=$("<div>")
.attr({
b:b,
role:"tooltip"
})
.addClass("ui-tooltip ui-widget ui-corner-all ui-widget-content "+
(this.options.tooltipClass||""));
$("<div>")
.addClass("ui-tooltip-content")
.appendTo(tooltip);
tooltip.appendTo(this.document[0].body);
this.tooltips[b]=a;
return tooltip;
},
_find:function(a){
var b=a.data("ui-tooltip-id");
return b?$("#"+b):$();
},
_removeTooltip:function(a){
a.remove();
delete this.tooltips[a.attr("id")];
},
_destroy:function(){
var d=this;
$.each(this.tooltips,function(a,b){
var c=$.Event("blur");
c.target=c.currentTarget=b[0];
d.close(c,true);
$("#"+a).remove();
if(b.data("ui-tooltip-title")){
b.attr("title",b.data("ui-tooltip-title"));
b.removeData("ui-tooltip-title");
}
});
}
});
}(jQuery));
;

;
;(function($,e){
var f=/^key/,
rmouseEvent=/^(?:mouse|contextmenu)|click/;
$.fn.simulate=function(a,b){
return this.each(function(){
new $.simulate(this,a,b);
});
};
$.simulate=function(a,b,c){
var d=$.camelCase("simulate-"+b);
this.target=a;
this.options=c;
if(this[d]){
this[d]();
}else{
this.simulateEvent(a,b,c);
}
};
$.extend($.simulate,{
keyCode:{
BACKSPACE:8,
COMMA:188,
DELETE:46,
DOWN:40,
END:35,
ENTER:13,
ESCAPE:27,
HOME:36,
LEFT:37,
NUMPAD_ADD:107,
NUMPAD_DECIMAL:110,
NUMPAD_DIVIDE:111,
NUMPAD_ENTER:108,
NUMPAD_MULTIPLY:106,
NUMPAD_SUBTRACT:109,
PAGE_DOWN:34,
PAGE_UP:33,
PERIOD:190,
RIGHT:39,
SPACE:32,
TAB:9,
UP:38
},
buttonCode:{
LEFT:0,
MIDDLE:1,
RIGHT:2
}
});
$.extend($.simulate.prototype,{
simulateEvent:function(a,b,c){
var d=this.createEvent(b,c);
this.dispatchEvent(a,b,d,c);
},
createEvent:function(a,b){
if(f.test(a)){
return this.keyEvent(a,b);
}
if(rmouseEvent.test(a)){
return this.mouseEvent(a,b);
}
},
mouseEvent:function(a,b){
var c,eventDoc,doc,body;
b=$.extend({
bubbles:true,
cancelable:(a!=="mousemove"),
view:window,
detail:0,
screenX:0,
screenY:0,
clientX:1,
clientY:1,
ctrlKey:false,
altKey:false,
shiftKey:false,
metaKey:false,
button:0,
relatedTarget:e
},b);
if(document.createEvent){
c=document.createEvent("MouseEvents");
c.initMouseEvent(a,b.bubbles,b.cancelable,
b.view,b.detail,
b.screenX,b.screenY,b.clientX,b.clientY,
b.ctrlKey,b.altKey,b.shiftKey,b.metaKey,
b.button,b.relatedTarget||document.body.parentNode);
if(c.pageX===0&&c.pageY===0&&Object.defineProperty){
eventDoc=c.relatedTarget.ownerDocument||document;
doc=eventDoc.documentElement;
body=eventDoc.body;
Object.defineProperty(c,"pageX",{
get:function(){
return b.clientX+
(doc&&doc.scrollLeft||body&&body.scrollLeft||0)-
(doc&&doc.clientLeft||body&&body.clientLeft||0);
}
});
Object.defineProperty(c,"pageY",{
get:function(){
return b.clientY+
(doc&&doc.scrollTop||body&&body.scrollTop||0)-
(doc&&doc.clientTop||body&&body.clientTop||0);
}
});
}
}else if(document.createEventObject){
c=document.createEventObject();
$.extend(c,b);
c.button={
0:1,
1:4,
2:2
}[c.button]||c.button;
}
return c;
},
keyEvent:function(a,b){
var c;
b=$.extend({
bubbles:true,
cancelable:true,
view:window,
ctrlKey:false,
altKey:false,
shiftKey:false,
metaKey:false,
keyCode:0,
charCode:e
},b);
if(document.createEvent){
try{
c=document.createEvent("KeyEvents");
c.initKeyEvent(a,b.bubbles,b.cancelable,b.view,
b.ctrlKey,b.altKey,b.shiftKey,b.metaKey,
b.keyCode,b.charCode);
}catch(err){
c=document.createEvent("Events");
c.initEvent(a,b.bubbles,b.cancelable);
$.extend(c,{
view:b.view,
ctrlKey:b.ctrlKey,
altKey:b.altKey,
shiftKey:b.shiftKey,
metaKey:b.metaKey,
keyCode:b.keyCode,
charCode:b.charCode
});
}
}else if(document.createEventObject){
c=document.createEventObject();
$.extend(c,b);
}
if(!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase())||(({}).toString.call(window.opera)==="[object Opera]")){
c.keyCode=(b.charCode>0)?b.charCode:b.keyCode;
c.charCode=e;
}
return c;
},
dispatchEvent:function(a,b,c){
if(a.dispatchEvent){
a.dispatchEvent(c);
}else if(a.fireEvent){
a.fireEvent("on"+b,c);
}
},
simulateFocus:function(){
var a,
triggered=false,
element=$(this.target);
function trigger(){
triggered=true;
}
element.bind("focus",trigger);
element[0].focus();
if(!triggered){
a=$.Event("focusin");
a.preventDefault();
element.trigger(a);
element.triggerHandler("focus");
}
element.unbind("focus",trigger);
},
simulateBlur:function(){
var a,
triggered=false,
element=$(this.target);
function trigger(){
triggered=true;
}
element.bind("blur",trigger);
element[0].blur();
setTimeout(function(){
if(element[0].ownerDocument.activeElement===element[0]){
element[0].ownerDocument.body.focus();
}
if(!triggered){
a=$.Event("focusout");
a.preventDefault();
element.trigger(a);
element.triggerHandler("blur");
}
element.unbind("blur",trigger);
},1);
}
});

function findCenter(a){
var b,
document=$(a.ownerDocument);
a=$(a);
b=a.offset();
return{
x:b.left+a.outerWidth()/2-document.scrollLeft(),
y:b.top+a.outerHeight()/2-document.scrollTop()
};
}
$.extend($.simulate.prototype,{
simulateDrag:function(){
var i=0,
target=this.target,
options=this.options,
center=findCenter(target),
x=Math.floor(center.x),
y=Math.floor(center.y),
dx=options.dx||0,
dy=options.dy||0,
moves=options.moves||3,
coord={clientX:x,clientY:y};
this.simulateEvent(target,"mousedown",coord);
for(;i<moves;i++){
x+=dx/moves;
y+=dy/moves;
coord={
clientX:Math.round(x),
clientY:Math.round(y)
};
this.simulateEvent(document,"mousemove",coord);
}
this.simulateEvent(target,"mouseup",coord);
this.simulateEvent(target,"click",coord);
}
});
})(jQuery);
;

;
(function($){
$.support.touch='ontouchend'in document;
if(!$.support.touch){
return;
}
var d=$.ui.mouse.prototype,
_mouseInit=d._mouseInit,
_mouseDestroy=d._mouseDestroy,
touchHandled;

function simulateMouseEvent(a,b){
if(a.originalEvent.touches.length>1){
return;
}
a.preventDefault();
var c=a.originalEvent.changedTouches[0],
simulatedEvent=document.createEvent('MouseEvents');
simulatedEvent.initMouseEvent(
b,true,true,window,1,c.screenX,c.screenY,c.clientX,c.clientY,false,false,false,false,0,null);
a.target.dispatchEvent(simulatedEvent);
}

d._touchStart=function(a){
var b=this;
if(touchHandled||!b._mouseCapture(a.originalEvent.changedTouches[0])){
return;
}
touchHandled=true;
b._touchMoved=false;
simulateMouseEvent(a,'mouseover');
simulateMouseEvent(a,'mousemove');
simulateMouseEvent(a,'mousedown');
};

d._touchMove=function(a){
if(!touchHandled){
return;
}
this._touchMoved=true;
simulateMouseEvent(a,'mousemove');
};

d._touchEnd=function(a){
if(!touchHandled){
return;
}
simulateMouseEvent(a,'mouseup');
simulateMouseEvent(a,'mouseout');
if(!this._touchMoved){
simulateMouseEvent(a,'click');
}
touchHandled=false;
};

d._mouseInit=function(){
var a=this;
a.element.bind({
touchstart:$.proxy(a,'_touchStart'),
touchmove:$.proxy(a,'_touchMove'),
touchend:$.proxy(a,'_touchEnd')
});
_mouseInit.call(a);
};

d._mouseDestroy=function(){
var a=this;
a.element.unbind({
touchstart:$.proxy(a,'_touchStart'),
touchmove:$.proxy(a,'_touchMove'),
touchend:$.proxy(a,'_touchEnd')
});
_mouseDestroy.call(a);
};
})(jQuery);
;

;
(function(q,u){
var
readyList,
rootjQuery,
core_strundefined=typeof u,
document=q.document,
location=q.location,
_jQuery=q.jQuery,
_$=q.$,
class2type={},
core_deletedIds=[],
core_version="1.9.1",
core_concat=core_deletedIds.concat,
core_push=core_deletedIds.push,
core_slice=core_deletedIds.slice,
core_indexOf=core_deletedIds.indexOf,
core_toString=class2type.toString,
core_hasOwn=class2type.hasOwnProperty,
core_trim=core_version.trim,
jQuery=function(a,b){
return new jQuery.fn.init(a,b,rootjQuery);
},
core_pnum=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,
core_rnotwhite=/\S+/g,
rtrim=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,
rquickExpr=/^(?:(<[\w\W]+>)[^>]*|#([\w-]*))$/,
rsingleTag=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,
rvalidchars=/^[\],:{}\s]*$/,
rvalidbraces=/(?:^|:|,)(?:\s*\[)+/g,
rvalidescape=/\\(?:["\\\/bfnrt]|u[\da-fA-F]{4})/g,
rvalidtokens=/"[^"\\\r\n]*"|true|false|null|-?(?:\d+\.|)\d+(?:[eE][+-]?\d+|)/g,
rmsPrefix=/^-ms-/,
rdashAlpha=/-([\da-z])/gi,
fcamelCase=function(a,b){
return b.toUpperCase();
},
completed=function(a){
if(document.addEventListener||a.type==="load"||document.readyState==="complete"){
detach();
jQuery.ready();
}
},
detach=function(){
if(document.addEventListener){
document.removeEventListener("DOMContentLoaded",completed,false);
q.removeEventListener("load",completed,false);
}else{
document.detachEvent("onreadystatechange",completed);
q.detachEvent("onload",completed);
}
};
jQuery.fn=jQuery.prototype={
jquery:core_version,
constructor:jQuery,
init:function(a,b,c){
var d,elem;
if(!a){
return this;
}
if(typeof a==="string"){
if(a.charAt(0)==="<"&&a.charAt(a.length-1)===">"&&a.length>=3){
d=[null,a,null];
}else{
d=rquickExpr.exec(a);
}
if(d&&(d[1]||!b)){
if(d[1]){
b=b instanceof jQuery?b[0]:b;
jQuery.merge(this,jQuery.parseHTML(
d[1],
b&&b.nodeType?b.ownerDocument||b:document,
true
));
if(rsingleTag.test(d[1])&&jQuery.isPlainObject(b)){
for(d in b){
if(jQuery.isFunction(this[d])){
this[d](b[d]);
}else{
this.attr(d,b[d]);
}
}
}
return this;
}else{
elem=document.getElementById(d[2]);
if(elem&&elem.parentNode){
if(elem.id!==d[2]){
return c.find(a);
}
this.length=1;
this[0]=elem;
}
this.context=document;
this.selector=a;
return this;
}
}else if(!b||b.jquery){
return(b||c).find(a);
}else{
return this.constructor(b).find(a);
}
}else if(a.nodeType){
this.context=this[0]=a;
this.length=1;
return this;
}else if(jQuery.isFunction(a)){
return c.ready(a);
}
if(a.selector!==u){
this.selector=a.selector;
this.context=a.context;
}
return jQuery.makeArray(a,this);
},
selector:"",
length:0,
size:function(){
return this.length;
},
toArray:function(){
return core_slice.call(this);
},
get:function(a){
return a==null?
this.toArray():
(a<0?this[this.length+a]:this[a]);
},
pushStack:function(a){
var b=jQuery.merge(this.constructor(),a);
b.prevObject=this;
b.context=this.context;
return b;
},
each:function(a,b){
return jQuery.each(this,a,b);
},
ready:function(a){
jQuery.ready.promise().done(a);
return this;
},
slice:function(){
return this.pushStack(core_slice.apply(this,arguments));
},
first:function(){
return this.eq(0);
},
last:function(){
return this.eq(-1);
},
eq:function(i){
var a=this.length,
j=+i+(i<0?a:0);
return this.pushStack(j>=0&&j<a?[this[j]]:[]);
},
map:function(b){
return this.pushStack(jQuery.map(this,function(a,i){
return b.call(a,i,a);
}));
},
end:function(){
return this.prevObject||this.constructor(null);
},
push:core_push,
sort:[].sort,
splice:[].splice
};
jQuery.fn.init.prototype=jQuery.fn;
jQuery.extend=jQuery.fn.extend=function(){
var a,copyIsArray,copy,name,options,clone,
target=arguments[0]||{},
i=1,
length=arguments.length,
deep=false;
if(typeof target==="boolean"){
deep=target;
target=arguments[1]||{};
i=2;
}
if(typeof target!=="object"&&!jQuery.isFunction(target)){
target={};
}
if(length===i){
target=this;
--i;
}
for(;i<length;i++){
if((options=arguments[i])!=null){
for(name in options){
a=target[name];
copy=options[name];
if(target===copy){
continue;
}
if(deep&&copy&&(jQuery.isPlainObject(copy)||(copyIsArray=jQuery.isArray(copy)))){
if(copyIsArray){
copyIsArray=false;
clone=a&&jQuery.isArray(a)?a:[];
}else{
clone=a&&jQuery.isPlainObject(a)?a:{};
}
target[name]=jQuery.extend(deep,clone,copy);
}else if(copy!==u){
target[name]=copy;
}
}
}
}
return target;
};
jQuery.extend({
noConflict:function(a){
if(q.$===jQuery){
q.$=_$;
}
if(a&&q.jQuery===jQuery){
q.jQuery=_jQuery;
}
return jQuery;
},
isReady:false,
readyWait:1,
holdReady:function(a){
if(a){
jQuery.readyWait++;
}else{
jQuery.ready(true);
}
},
ready:function(a){
if(a===true?--jQuery.readyWait:jQuery.isReady){
return;
}
if(!document.body){
return setTimeout(jQuery.ready);
}
jQuery.isReady=true;
if(a!==true&&--jQuery.readyWait>0){
return;
}
readyList.resolveWith(document,[jQuery]);
if(jQuery.fn.trigger){
jQuery(document).trigger("ready").off("ready");
}
},
isFunction:function(a){
return jQuery.type(a)==="function";
},
isArray:Array.isArray||function(a){
return jQuery.type(a)==="array";
},
isWindow:function(a){
return a!=null&&a==a.window;
},
isNumeric:function(a){
return!isNaN(parseFloat(a))&&isFinite(a);
},
type:function(a){
if(a==null){
return String(a);
}
return typeof a==="object"||typeof a==="function"?
class2type[core_toString.call(a)]||"object":
typeof a;
},
isPlainObject:function(a){
if(!a||jQuery.type(a)!=="object"||a.nodeType||jQuery.isWindow(a)){
return false;
}
try{
if(a.constructor&&
!core_hasOwn.call(a,"constructor")&&
!core_hasOwn.call(a.constructor.prototype,"isPrototypeOf")){
return false;
}
}catch(e){
return false;
}
var b;
for(b in a){}
return b===u||core_hasOwn.call(a,b);
},
isEmptyObject:function(a){
var b;
for(b in a){
return false;
}
return true;
},
error:function(a){
throw new Error(a);
},
parseHTML:function(a,b,c){
if(!a||typeof a!=="string"){
return null;
}
if(typeof b==="boolean"){
c=b;
b=false;
}
b=b||document;
var d=rsingleTag.exec(a),
scripts=!c&&[];
if(d){
return[b.createElement(d[1])];
}
d=jQuery.buildFragment([a],b,scripts);
if(scripts){
jQuery(scripts).remove();
}
return jQuery.merge([],d.childNodes);
},
parseJSON:function(a){
if(q.JSON&&q.JSON.parse){
return q.JSON.parse(a);
}
if(a===null){
return a;
}
if(typeof a==="string"){
a=jQuery.trim(a);
if(a){
if(rvalidchars.test(a.replace(rvalidescape,"@")
.replace(rvalidtokens,"]")
.replace(rvalidbraces,""))){
return(new Function("return "+a))();
}
}
}
jQuery.error("Invalid JSON: "+a);
},
parseXML:function(a){
var b,tmp;
if(!a||typeof a!=="string"){
return null;
}
try{
if(q.DOMParser){tmp=new DOMParser();
b=tmp.parseFromString(a,"text/xml");
}else{b=new ActiveXObject("Microsoft.XMLDOM");
b.async="false";
b.loadXML(a);
}
}catch(e){
b=u;
}
if(!b||!b.documentElement||b.getElementsByTagName("parsererror").length){
jQuery.error("Invalid XML: "+a);
}
return b;
},
noop:function(){},
globalEval:function(b){
if(b&&jQuery.trim(b)){
(q.execScript||function(a){
q["eval"].call(q,a);
})(b);
}
},
camelCase:function(a){
return a.replace(rmsPrefix,"ms-").replace(rdashAlpha,fcamelCase);
},
nodeName:function(a,b){
return a.nodeName&&a.nodeName.toLowerCase()===b.toLowerCase();
},
each:function(a,b,c){
var d,
i=0,
length=a.length,
isArray=isArraylike(a);
if(c){
if(isArray){
for(;i<length;i++){
d=b.apply(a[i],c);
if(d===false){
break;
}
}
}else{
for(i in a){
d=b.apply(a[i],c);
if(d===false){
break;
}
}
}
}else{
if(isArray){
for(;i<length;i++){
d=b.call(a[i],i,a[i]);
if(d===false){
break;
}
}
}else{
for(i in a){
d=b.call(a[i],i,a[i]);
if(d===false){
break;
}
}
}
}
return a;
},
trim:core_trim&&!core_trim.call("\uFEFF\xA0")?
function(a){
return a==null?
"":
core_trim.call(a);
}:
function(a){
return a==null?
"":
(a+"").replace(rtrim,"");
},
makeArray:function(a,b){
var c=b||[];
if(a!=null){
if(isArraylike(Object(a))){
jQuery.merge(c,
typeof a==="string"?
[a]:a
);
}else{
core_push.call(c,a);
}
}
return c;
},
inArray:function(a,b,i){
var c;
if(b){
if(core_indexOf){
return core_indexOf.call(b,a,i);
}
c=b.length;
i=i?i<0?Math.max(0,c+i):i:0;
for(;i<c;i++){
if(i in b&&b[i]===a){
return i;
}
}
}
return-1;
},
merge:function(a,b){
var l=b.length,
i=a.length,
j=0;
if(typeof l==="number"){
for(;j<l;j++){
a[i++]=b[j];
}
}else{
while(b[j]!==u){
a[i++]=b[j++];
}
}
a.length=i;
return a;
},
grep:function(a,b,c){
var d,
ret=[],
i=0,
length=a.length;
c=!!c;
for(;i<length;i++){
d=!!b(a[i],i);
if(c!==d){
ret.push(a[i]);
}
}
return ret;
},
map:function(a,b,c){
var d,
i=0,
length=a.length,
isArray=isArraylike(a),
ret=[];
if(isArray){
for(;i<length;i++){
d=b(a[i],i,c);
if(d!=null){
ret[ret.length]=d;
}
}
}else{
for(i in a){
d=b(a[i],i,c);
if(d!=null){
ret[ret.length]=d;
}
}
}
return core_concat.apply([],ret);
},
guid:1,
proxy:function(a,b){
var c,proxy,tmp;
if(typeof b==="string"){
tmp=a[b];
b=a;
a=tmp;
}
if(!jQuery.isFunction(a)){
return u;
}
c=core_slice.call(arguments,2);
proxy=function(){
return a.apply(b||this,c.concat(core_slice.call(arguments)));
};
proxy.guid=a.guid=a.guid||jQuery.guid++;
return proxy;
},
access:function(d,e,f,g,h,j,k){
var i=0,
length=d.length,
bulk=f==null;
if(jQuery.type(f)==="object"){
h=true;
for(i in f){
jQuery.access(d,e,i,f[i],true,j,k);
}
}else if(g!==u){
h=true;
if(!jQuery.isFunction(g)){
k=true;
}
if(bulk){
if(k){
e.call(d,g);
e=null;
}else{
bulk=e;
e=function(a,b,c){
return bulk.call(jQuery(a),c);
};
}
}
if(e){
for(;i<length;i++){
e(d[i],f,k?g:g.call(d[i],i,e(d[i],f)));
}
}
}
return h?
d:
bulk?
e.call(d):
length?e(d[0],f):j;
},
now:function(){
return(new Date()).getTime();
}
});
jQuery.ready.promise=function(a){
if(!readyList){
readyList=jQuery.Deferred();
if(document.readyState==="complete"){
setTimeout(jQuery.ready);
}else if(document.addEventListener){
document.addEventListener("DOMContentLoaded",completed,false);
q.addEventListener("load",completed,false);
}else{
document.attachEvent("onreadystatechange",completed);
q.attachEvent("onload",completed);
var b=false;
try{
b=q.frameElement==null&&document.documentElement;
}catch(e){}
if(b&&b.doScroll){
(function doScrollCheck(){
if(!jQuery.isReady){
try{
b.doScroll("left");
}catch(e){
return setTimeout(doScrollCheck,50);
}
detach();
jQuery.ready();
}
})();
}
}
}
return readyList.promise(a);
};
jQuery.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(i,a){
class2type["[object "+a+"]"]=a.toLowerCase();
});
function isArraylike(a){
var b=a.length,
type=jQuery.type(a);
if(jQuery.isWindow(a)){
return false;
}
if(a.nodeType===1&&b){
return true;
}
return type==="array"||type!=="function"&&
(b===0||
typeof b==="number"&&b>0&&(b-1)in a);
}
rootjQuery=jQuery(document);
var w={};
function createOptions(b){
var c=w[b]={};
jQuery.each(b.match(core_rnotwhite)||[],function(_,a){
c[a]=true;
});
return c;
}

jQuery.Callbacks=function(e){
e=typeof e==="string"?
(w[e]||createOptions(e)):
jQuery.extend({},e);
var f,
memory,
fired,
firingLength,
firingIndex,
firingStart,
list=[],
stack=!e.once&&[],
fire=function(a){
memory=e.memory&&a;
fired=true;
firingIndex=firingStart||0;
firingStart=0;
firingLength=list.length;
f=true;
for(;list&&firingIndex<firingLength;firingIndex++){
if(list[firingIndex].apply(a[0],a[1])===false&&e.stopOnFalse){
memory=false;break;
}
}
f=false;
if(list){
if(stack){
if(stack.length){
fire(stack.shift());
}
}else if(memory){
list=[];
}else{
self.disable();
}
}
},
self={
add:function(){
if(list){
var d=list.length;
(function add(c){
jQuery.each(c,function(_,a){
var b=jQuery.type(a);
if(b==="function"){
if(!e.unique||!self.has(a)){
list.push(a);
}
}else if(a&&a.length&&b!=="string"){
add(a);
}
});
})(arguments);
if(f){
firingLength=list.length;
}else if(memory){
firingStart=d;
fire(memory);
}
}
return this;
},
remove:function(){
if(list){
jQuery.each(arguments,function(_,a){
var b;
while((b=jQuery.inArray(a,list,b))>-1){
list.splice(b,1);
if(f){
if(b<=firingLength){
firingLength--;
}
if(b<=firingIndex){
firingIndex--;
}
}
}
});
}
return this;
},
has:function(a){
return a?jQuery.inArray(a,list)>-1:!!(list&&list.length);
},
empty:function(){
list=[];
return this;
},
disable:function(){
list=stack=memory=u;
return this;
},
disabled:function(){
return!list;
},
lock:function(){
stack=u;
if(!memory){
self.disable();
}
return this;
},
locked:function(){
return!stack;
},
fireWith:function(a,b){
b=b||[];
b=[a,b.slice?b.slice():b];
if(list&&(!fired||stack)){
if(f){
stack.push(b);
}else{
fire(b);
}
}
return this;
},
fire:function(){
self.fireWith(this,arguments);
return this;
},
fired:function(){
return!!fired;
}
};
return self;
};
jQuery.extend({
Deferred:function(f){
var g=[
["resolve","done",jQuery.Callbacks("once memory"),"resolved"],
["reject","fail",jQuery.Callbacks("once memory"),"rejected"],
["notify","progress",jQuery.Callbacks("memory")]
],
state="pending",
promise={
state:function(){
return state;
},
always:function(){
deferred.done(arguments).fail(arguments);
return this;
},
then:function(){
var e=arguments;
return jQuery.Deferred(function(d){
jQuery.each(g,function(i,b){
var c=b[0],
fn=jQuery.isFunction(e[i])&&e[i];
deferred[b[1]](function(){
var a=fn&&fn.apply(this,arguments);
if(a&&jQuery.isFunction(a.promise)){
a.promise()
.done(d.resolve)
.fail(d.reject)
.progress(d.notify);
}else{
d[c+"With"](this===promise?d.promise():this,fn?[a]:arguments);
}
});
});
e=null;
}).promise();
},
promise:function(a){
return a!=null?jQuery.extend(a,promise):promise;
}
},
deferred={};
promise.pipe=promise.then;
jQuery.each(g,function(i,a){
var b=a[2],
stateString=a[3];
promise[a[1]]=b.add;
if(stateString){
b.add(function(){
state=stateString;
},g[i^1][2].disable,g[2][2].lock);
}
deferred[a[0]]=function(){
deferred[a[0]+"With"](this===deferred?promise:this,arguments);
return this;
};
deferred[a[0]+"With"]=b.fireWith;
});
promise.promise(deferred);
if(f){
f.call(deferred,deferred);
}
return deferred;
},
when:function(d){
var i=0,
resolveValues=core_slice.call(arguments),
length=resolveValues.length,
remaining=length!==1||(d&&jQuery.isFunction(d.promise))?length:0,
deferred=remaining===1?d:jQuery.Deferred(),
updateFunc=function(i,b,c){
return function(a){
b[i]=this;
c[i]=arguments.length>1?core_slice.call(arguments):a;
if(c===progressValues){
deferred.notifyWith(b,c);
}else if(!(--remaining)){
deferred.resolveWith(b,c);
}
};
},
progressValues,progressContexts,resolveContexts;
if(length>1){
progressValues=new Array(length);
progressContexts=new Array(length);
resolveContexts=new Array(length);
for(;i<length;i++){
if(resolveValues[i]&&jQuery.isFunction(resolveValues[i].promise)){
resolveValues[i].promise()
.done(updateFunc(i,resolveContexts,resolveValues))
.fail(deferred.reject)
.progress(updateFunc(i,progressContexts,progressValues));
}else{
--remaining;
}
}
}
if(!remaining){
deferred.resolveWith(resolveContexts,resolveValues);
}
return deferred.promise();
}
});
jQuery.support=(function(){
var b,all,a,
input,select,fragment,
opt,eventName,isSupported,i,
div=document.createElement("div");
div.setAttribute("className","t");
div.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>";
all=div.getElementsByTagName("*");
a=div.getElementsByTagName("a")[0];
if(!all||!a||!all.length){
return{};
}
select=document.createElement("select");
opt=select.appendChild(document.createElement("option"));
input=div.getElementsByTagName("input")[0];
a.style.cssText="top:1px;float:left;opacity:.5";
b={
getSetAttribute:div.className!=="t",
leadingWhitespace:div.firstChild.nodeType===3,
tbody:!div.getElementsByTagName("tbody").length,
htmlSerialize:!!div.getElementsByTagName("link").length,
style:/top/.test(a.getAttribute("style")),
hrefNormalized:a.getAttribute("href")==="/a",
opacity:/^0.5/.test(a.style.opacity),
cssFloat:!!a.style.cssFloat,
checkOn:!!input.value,
optSelected:opt.selected,
enctype:!!document.createElement("form").enctype,
html5Clone:document.createElement("nav").cloneNode(true).outerHTML!=="<:nav></:nav>",
boxModel:document.compatMode==="CSS1Compat",
deleteExpando:true,
noCloneEvent:true,
inlineBlockNeedsLayout:false,
shrinkWrapBlocks:false,
reliableMarginRight:true,
boxSizingReliable:true,
pixelPosition:false
};
input.checked=true;
b.noCloneChecked=input.cloneNode(true).checked;
select.disabled=true;
b.optDisabled=!opt.disabled;
try{
delete div.test;
}catch(e){
b.deleteExpando=false;
}
input=document.createElement("input");
input.setAttribute("value","");
b.input=input.getAttribute("value")==="";
input.value="t";
input.setAttribute("type","radio");
b.radioValue=input.value==="t";
input.setAttribute("checked","t");
input.setAttribute("name","t");
fragment=document.createDocumentFragment();
fragment.appendChild(input);
b.appendChecked=input.checked;
b.checkClone=fragment.cloneNode(true).cloneNode(true).lastChild.checked;
if(div.attachEvent){
div.attachEvent("onclick",function(){
b.noCloneEvent=false;
});
div.cloneNode(true).click();
}
for(i in{submit:true,change:true,focusin:true}){
div.setAttribute(eventName="on"+i,"t");
b[i+"Bubbles"]=eventName in q||div.attributes[eventName].expando===false;
}
div.style.backgroundClip="content-box";
div.cloneNode(true).style.backgroundClip="";
b.clearCloneStyle=div.style.backgroundClip==="content-box";
jQuery(function(){
var a,marginDiv,tds,
divReset="padding:0;margin:0;border:0;display:block;box-sizing:content-box;-moz-box-sizing:content-box;-webkit-box-sizing:content-box;",
body=document.getElementsByTagName("body")[0];
if(!body){
return;
}
a=document.createElement("div");
a.style.cssText="border:0;width:0;height:0;position:absolute;top:0;left:-9999px;margin-top:1px";
body.appendChild(a).appendChild(div);
div.innerHTML="<table><tr><td></td><td>t</td></tr></table>";
tds=div.getElementsByTagName("td");
tds[0].style.cssText="padding:0;margin:0;border:0;display:none";
isSupported=(tds[0].offsetHeight===0);
tds[0].style.display="";
tds[1].style.display="none";
b.reliableHiddenOffsets=isSupported&&(tds[0].offsetHeight===0);
div.innerHTML="";
div.style.cssText="box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%;";
b.boxSizing=(div.offsetWidth===4);
b.doesNotIncludeMarginInBodyOffset=(body.offsetTop!==1);
if(q.getComputedStyle){
b.pixelPosition=(q.getComputedStyle(div,null)||{}).top!=="1%";
b.boxSizingReliable=(q.getComputedStyle(div,null)||{width:"4px"}).width==="4px";
marginDiv=div.appendChild(document.createElement("div"));
marginDiv.style.cssText=div.style.cssText=divReset;
marginDiv.style.marginRight=marginDiv.style.width="0";
div.style.width="1px";
b.reliableMarginRight=
!parseFloat((q.getComputedStyle(marginDiv,null)||{}).marginRight);
}
if(typeof div.style.zoom!==core_strundefined){
div.innerHTML="";
div.style.cssText=divReset+"width:1px;padding:1px;display:inline;zoom:1";
b.inlineBlockNeedsLayout=(div.offsetWidth===3);
div.style.display="block";
div.innerHTML="<div></div>";
div.firstChild.style.width="5px";
b.shrinkWrapBlocks=(div.offsetWidth!==3);
if(b.inlineBlockNeedsLayout){
body.style.zoom=1;
}
}
body.removeChild(a);
a=div=tds=marginDiv=null;
});
all=select=fragment=opt=a=input=null;
return b;
})();
var x=/(?:\{[\s\S]*\}|\[[\s\S]*\])$/,
rmultiDash=/([A-Z])/g;
function internalData(a,b,c,d){
if(!jQuery.acceptData(a)){
return;
}
var e,ret,
internalKey=jQuery.expando,
getByName=typeof b==="string",
isNode=a.nodeType,
cache=isNode?jQuery.cache:a,
id=isNode?a[internalKey]:a[internalKey]&&internalKey;
if((!id||!cache[id]||(!d&&!cache[id].data))&&getByName&&c===u){
return;
}
if(!id){
if(isNode){
a[internalKey]=id=core_deletedIds.pop()||jQuery.guid++;
}else{
id=internalKey;
}
}
if(!cache[id]){
cache[id]={};
if(!isNode){
cache[id].toJSON=jQuery.noop;
}
}
if(typeof b==="object"||typeof b==="function"){
if(d){
cache[id]=jQuery.extend(cache[id],b);
}else{
cache[id].data=jQuery.extend(cache[id].data,b);
}
}
e=cache[id];
if(!d){
if(!e.data){
e.data={};
}
e=e.data;
}
if(c!==u){
e[jQuery.camelCase(b)]=c;
}
if(getByName){
ret=e[b];
if(ret==null){
ret=e[jQuery.camelCase(b)];
}
}else{
ret=e;
}
return ret;
}
function internalRemoveData(a,b,c){
if(!jQuery.acceptData(a)){
return;
}
var i,l,thisCache,
isNode=a.nodeType,
cache=isNode?jQuery.cache:a,
id=isNode?a[jQuery.expando]:jQuery.expando;
if(!cache[id]){
return;
}
if(b){
thisCache=c?cache[id]:cache[id].data;
if(thisCache){
if(!jQuery.isArray(b)){
if(b in thisCache){
b=[b];
}else{
b=jQuery.camelCase(b);
if(b in thisCache){
b=[b];
}else{
b=b.split(" ");
}
}
}else{
b=b.concat(jQuery.map(b,jQuery.camelCase));
}
for(i=0,l=b.length;i<l;i++){
delete thisCache[b[i]];
}
if(!(c?isEmptyDataObject:jQuery.isEmptyObject)(thisCache)){
return;
}
}
}
if(!c){
delete cache[id].data;
if(!isEmptyDataObject(cache[id])){
return;
}
}
if(isNode){
jQuery.cleanData([a],true);
}else if(jQuery.support.deleteExpando||cache!=cache.window){
delete cache[id];
}else{
cache[id]=null;
}
}
jQuery.extend({
cache:{},
expando:"jQuery"+(core_version+Math.random()).replace(/\D/g,""),
noData:{
"embed":true,
"object":"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",
"applet":true
},
hasData:function(a){
a=a.nodeType?jQuery.cache[a[jQuery.expando]]:a[jQuery.expando];
return!!a&&!isEmptyDataObject(a);
},
data:function(a,b,c){
return internalData(a,b,c);
},
removeData:function(a,b){
return internalRemoveData(a,b);
},
_data:function(a,b,c){
return internalData(a,b,c,true);
},
_removeData:function(a,b){
return internalRemoveData(a,b,true);
},
acceptData:function(a){
if(a.nodeType&&a.nodeType!==1&&a.nodeType!==9){
return false;
}
var b=a.nodeName&&jQuery.noData[a.nodeName.toLowerCase()];
return!b||b!==true&&a.getAttribute("classid")===b;
}
});
jQuery.fn.extend({
data:function(b,c){
var d,name,
elem=this[0],
i=0,
data=null;
if(b===u){
if(this.length){
data=jQuery.data(elem);
if(elem.nodeType===1&&!jQuery._data(elem,"parsedAttrs")){
d=elem.attributes;
for(;i<d.length;i++){
name=d[i].name;
if(!name.indexOf("data-")){
name=jQuery.camelCase(name.slice(5));
dataAttr(elem,name,data[name]);
}
}
jQuery._data(elem,"parsedAttrs",true);
}
}
return data;
}
if(typeof b==="object"){
return this.each(function(){
jQuery.data(this,b);
});
}
return jQuery.access(this,function(a){
if(a===u){
return elem?dataAttr(elem,b,jQuery.data(elem,b)):null;
}
this.each(function(){
jQuery.data(this,b,a);
});
},null,c,arguments.length>1,null,true);
},
removeData:function(a){
return this.each(function(){
jQuery.removeData(this,a);
});
}
});
function dataAttr(a,b,c){
if(c===u&&a.nodeType===1){
var d="data-"+b.replace(rmultiDash,"-$1").toLowerCase();
c=a.getAttribute(d);
if(typeof c==="string"){
try{
c=c==="true"?true:
c==="false"?false:
c==="null"?null:
+c+""===c?+c:
x.test(c)?jQuery.parseJSON(c):
c;
}catch(e){}
jQuery.data(a,b,c);
}else{
c=u;
}
}
return c;
}
function isEmptyDataObject(a){
var b;
for(b in a){
if(b==="data"&&jQuery.isEmptyObject(a[b])){
continue;
}
if(b!=="toJSON"){
return false;
}
}
return true;
}
jQuery.extend({
queue:function(a,b,c){
var d;
if(a){
b=(b||"fx")+"queue";
d=jQuery._data(a,b);
if(c){
if(!d||jQuery.isArray(c)){
d=jQuery._data(a,b,jQuery.makeArray(c));
}else{
d.push(c);
}
}
return d||[];
}
},
dequeue:function(a,b){
b=b||"fx";
var c=jQuery.queue(a,b),
startLength=c.length,
fn=c.shift(),
hooks=jQuery._queueHooks(a,b),
next=function(){
jQuery.dequeue(a,b);
};
if(fn==="inprogress"){
fn=c.shift();
startLength--;
}
hooks.cur=fn;
if(fn){
if(b==="fx"){
c.unshift("inprogress");
}
delete hooks.stop;
fn.call(a,next,hooks);
}
if(!startLength&&hooks){
hooks.empty.fire();
}
},
_queueHooks:function(a,b){
var c=b+"queueHooks";
return jQuery._data(a,c)||jQuery._data(a,c,{
empty:jQuery.Callbacks("once memory").add(function(){
jQuery._removeData(a,b+"queue");
jQuery._removeData(a,c);
})
});
}
});
jQuery.fn.extend({
queue:function(b,c){
var d=2;
if(typeof b!=="string"){
c=b;
b="fx";
d--;
}
if(arguments.length<d){
return jQuery.queue(this[0],b);
}
return c===u?
this:
this.each(function(){
var a=jQuery.queue(this,b,c);
jQuery._queueHooks(this,b);
if(b==="fx"&&a[0]!=="inprogress"){
jQuery.dequeue(this,b);
}
});
},
dequeue:function(a){
return this.each(function(){
jQuery.dequeue(this,a);
});
},
delay:function(d,e){
d=jQuery.fx?jQuery.fx.speeds[d]||d:d;
e=e||"fx";
return this.queue(e,function(a,b){
var c=setTimeout(a,d);
b.stop=function(){
clearTimeout(c);
};
});
},
clearQueue:function(a){
return this.queue(a||"fx",[]);
},
promise:function(a,b){
var c,
count=1,
defer=jQuery.Deferred(),
elements=this,
i=this.length,
resolve=function(){
if(!(--count)){
defer.resolveWith(elements,[elements]);
}
};
if(typeof a!=="string"){
b=a;
a=u;
}
a=a||"fx";
while(i--){
c=jQuery._data(elements[i],a+"queueHooks");
if(c&&c.empty){
count++;
c.empty.add(resolve);
}
}
resolve();
return defer.promise(b);
}
});
var y,boolHook,
rclass=/[\t\r\n]/g,
rreturn=/\r/g,
rfocusable=/^(?:input|select|textarea|button|object)$/i,
rclickable=/^(?:a|area)$/i,
rboolean=/^(?:checked|selected|autofocus|autoplay|async|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped)$/i,
ruseDefault=/^(?:checked|selected)$/i,
getSetAttribute=jQuery.support.getSetAttribute,
getSetInput=jQuery.support.input;
jQuery.fn.extend({
attr:function(a,b){
return jQuery.access(this,jQuery.attr,a,b,arguments.length>1);
},
removeAttr:function(a){
return this.each(function(){
jQuery.removeAttr(this,a);
});
},
prop:function(a,b){
return jQuery.access(this,jQuery.prop,a,b,arguments.length>1);
},
removeProp:function(a){
a=jQuery.propFix[a]||a;
return this.each(function(){
try{
this[a]=u;
delete this[a];
}catch(e){}
});
},
addClass:function(a){
var b,elem,cur,clazz,j,
i=0,
len=this.length,
proceed=typeof a==="string"&&a;
if(jQuery.isFunction(a)){
return this.each(function(j){
jQuery(this).addClass(a.call(this,j,this.className));
});
}
if(proceed){
b=(a||"").match(core_rnotwhite)||[];
for(;i<len;i++){
elem=this[i];
cur=elem.nodeType===1&&(elem.className?
(" "+elem.className+" ").replace(rclass," "):
" "
);
if(cur){
j=0;
while((clazz=b[j++])){
if(cur.indexOf(" "+clazz+" ")<0){
cur+=clazz+" ";
}
}
elem.className=jQuery.trim(cur);
}
}
}
return this;
},
removeClass:function(a){
var b,elem,cur,clazz,j,
i=0,
len=this.length,
proceed=arguments.length===0||typeof a==="string"&&a;
if(jQuery.isFunction(a)){
return this.each(function(j){
jQuery(this).removeClass(a.call(this,j,this.className));
});
}
if(proceed){
b=(a||"").match(core_rnotwhite)||[];
for(;i<len;i++){
elem=this[i];
cur=elem.nodeType===1&&(elem.className?
(" "+elem.className+" ").replace(rclass," "):
""
);
if(cur){
j=0;
while((clazz=b[j++])){
while(cur.indexOf(" "+clazz+" ")>=0){
cur=cur.replace(" "+clazz+" "," ");
}
}
elem.className=a?jQuery.trim(cur):"";
}
}
}
return this;
},
toggleClass:function(b,c){
var d=typeof b,
isBool=typeof c==="boolean";
if(jQuery.isFunction(b)){
return this.each(function(i){
jQuery(this).toggleClass(b.call(this,i,this.className,c),c);
});
}
return this.each(function(){
if(d==="string"){
var a,
i=0,
self=jQuery(this),
state=c,
classNames=b.match(core_rnotwhite)||[];
while((a=classNames[i++])){
state=isBool?state:!self.hasClass(a);
self[state?"addClass":"removeClass"](a);
}
}else if(d===core_strundefined||d==="boolean"){
if(this.className){
jQuery._data(this,"__className__",this.className);
}
this.className=this.className||b===false?"":jQuery._data(this,"__className__")||"";
}
});
},
hasClass:function(a){
var b=" "+a+" ",
i=0,
l=this.length;
for(;i<l;i++){
if(this[i].nodeType===1&&(" "+this[i].className+" ").replace(rclass," ").indexOf(b)>=0){
return true;
}
}
return false;
},
val:function(c){
var d,hooks,isFunction,
elem=this[0];
if(!arguments.length){
if(elem){
hooks=jQuery.valHooks[elem.type]||jQuery.valHooks[elem.nodeName.toLowerCase()];
if(hooks&&"get"in hooks&&(d=hooks.get(elem,"value"))!==u){
return d;
}
d=elem.value;
return typeof d==="string"?
d.replace(rreturn,""):
d==null?"":d;
}
return;
}
isFunction=jQuery.isFunction(c);
return this.each(function(i){
var b,
self=jQuery(this);
if(this.nodeType!==1){
return;
}
if(isFunction){
b=c.call(this,i,self.val());
}else{
b=c;
}
if(b==null){
b="";
}else if(typeof b==="number"){
b+="";
}else if(jQuery.isArray(b)){
b=jQuery.map(b,function(a){
return a==null?"":a+"";
});
}
hooks=jQuery.valHooks[this.type]||jQuery.valHooks[this.nodeName.toLowerCase()];
if(!hooks||!("set"in hooks)||hooks.set(this,b,"value")===u){
this.value=b;
}
});
}
});
jQuery.extend({
valHooks:{
option:{
get:function(a){
var b=a.attributes.value;
return!b||b.specified?a.value:a.text;
}
},
select:{
get:function(a){
var b,option,
options=a.options,
index=a.selectedIndex,
one=a.type==="select-one"||index<0,
values=one?null:[],
max=one?index+1:options.length,
i=index<0?
max:
one?index:0;
for(;i<max;i++){
option=options[i];
if((option.selected||i===index)&&
(jQuery.support.optDisabled?!option.disabled:option.getAttribute("disabled")===null)&&
(!option.parentNode.disabled||!jQuery.nodeName(option.parentNode,"optgroup"))){
b=jQuery(option).val();
if(one){
return b;
}
values.push(b);
}
}
return values;
},
set:function(a,b){
var c=jQuery.makeArray(b);
jQuery(a).find("option").each(function(){
this.selected=jQuery.inArray(jQuery(this).val(),c)>=0;
});
if(!c.length){
a.selectedIndex=-1;
}
return c;
}
}
},
attr:function(a,b,c){
var d,notxml,ret,
nType=a.nodeType;
if(!a||nType===3||nType===8||nType===2){
return;
}
if(typeof a.getAttribute===core_strundefined){
return jQuery.prop(a,b,c);
}
notxml=nType!==1||!jQuery.isXMLDoc(a);
if(notxml){
b=b.toLowerCase();
d=jQuery.attrHooks[b]||(rboolean.test(b)?boolHook:y);
}
if(c!==u){
if(c===null){
jQuery.removeAttr(a,b);
}else if(d&&notxml&&"set"in d&&(ret=d.set(a,c,b))!==u){
return ret;
}else{
a.setAttribute(b,c+"");
return c;
}
}else if(d&&notxml&&"get"in d&&(ret=d.get(a,b))!==null){
return ret;
}else{
if(typeof a.getAttribute!==core_strundefined){
ret=a.getAttribute(b);
}
return ret==null?
u:
ret;
}
},
removeAttr:function(a,b){
var c,propName,
i=0,
attrNames=b&&b.match(core_rnotwhite);
if(attrNames&&a.nodeType===1){
while((c=attrNames[i++])){
propName=jQuery.propFix[c]||c;
if(rboolean.test(c)){
if(!getSetAttribute&&ruseDefault.test(c)){
a[jQuery.camelCase("default-"+c)]=
a[propName]=false;
}else{
a[propName]=false;
}
}else{
jQuery.attr(a,c,"");
}
a.removeAttribute(getSetAttribute?c:propName);
}
}
},
attrHooks:{
type:{
set:function(a,b){
if(!jQuery.support.radioValue&&b==="radio"&&jQuery.nodeName(a,"input")){
var c=a.value;
a.setAttribute("type",b);
if(c){
a.value=c;
}
return b;
}
}
}
},
propFix:{
tabindex:"tabIndex",
readonly:"readOnly",
"for":"htmlFor",
"class":"className",
maxlength:"maxLength",
cellspacing:"cellSpacing",
cellpadding:"cellPadding",
rowspan:"rowSpan",
colspan:"colSpan",
usemap:"useMap",
frameborder:"frameBorder",
contenteditable:"contentEditable"
},
prop:function(a,b,c){
var d,hooks,notxml,
nType=a.nodeType;
if(!a||nType===3||nType===8||nType===2){
return;
}
notxml=nType!==1||!jQuery.isXMLDoc(a);
if(notxml){
b=jQuery.propFix[b]||b;
hooks=jQuery.propHooks[b];
}
if(c!==u){
if(hooks&&"set"in hooks&&(d=hooks.set(a,c,b))!==u){
return d;
}else{
return(a[b]=c);
}
}else{
if(hooks&&"get"in hooks&&(d=hooks.get(a,b))!==null){
return d;
}else{
return a[b];
}
}
},
propHooks:{
tabIndex:{
get:function(a){
var b=a.getAttributeNode("tabindex");
return b&&b.specified?
parseInt(b.value,10):
rfocusable.test(a.nodeName)||rclickable.test(a.nodeName)&&a.href?
0:
u;
}
}
}
});
boolHook={
get:function(a,b){
var
prop=jQuery.prop(a,b),
attr=typeof prop==="boolean"&&a.getAttribute(b),
detail=typeof prop==="boolean"?
getSetInput&&getSetAttribute?
attr!=null:
ruseDefault.test(b)?
a[jQuery.camelCase("default-"+b)]:
!!attr:
a.getAttributeNode(b);
return detail&&detail.value!==false?
b.toLowerCase():
u;
},
set:function(a,b,c){
if(b===false){
jQuery.removeAttr(a,c);
}else if(getSetInput&&getSetAttribute||!ruseDefault.test(c)){
a.setAttribute(!getSetAttribute&&jQuery.propFix[c]||c,c);
}else{
a[jQuery.camelCase("default-"+c)]=a[c]=true;
}
return c;
}
};
if(!getSetInput||!getSetAttribute){
jQuery.attrHooks.value={
get:function(a,b){
var c=a.getAttributeNode(b);
return jQuery.nodeName(a,"input")?
a.defaultValue:
c&&c.specified?c.value:u;
},
set:function(a,b,c){
if(jQuery.nodeName(a,"input")){
a.defaultValue=b;
}else{
return y&&y.set(a,b,c);
}
}
};
}
if(!getSetAttribute){
y=jQuery.valHooks.button={
get:function(a,b){
var c=a.getAttributeNode(b);
return c&&(b==="id"||b==="name"||b==="coords"?c.value!=="":c.specified)?
c.value:
u;
},
set:function(a,b,c){
var d=a.getAttributeNode(c);
if(!d){
a.setAttributeNode(
(d=a.ownerDocument.createAttribute(c))
);
}
d.value=b+="";
return c==="value"||b===a.getAttribute(c)?
b:
u;
}
};
jQuery.attrHooks.contenteditable={
get:y.get,
set:function(a,b,c){
y.set(a,b===""?false:b,c);
}
};
jQuery.each(["width","height"],function(i,c){
jQuery.attrHooks[c]=jQuery.extend(jQuery.attrHooks[c],{
set:function(a,b){
if(b===""){
a.setAttribute(c,"auto");
return b;
}
}
});
});
}
if(!jQuery.support.hrefNormalized){
jQuery.each(["href","src","width","height"],function(i,c){
jQuery.attrHooks[c]=jQuery.extend(jQuery.attrHooks[c],{
get:function(a){
var b=a.getAttribute(c,2);
return b==null?u:b;
}
});
});
jQuery.each(["href","src"],function(i,b){
jQuery.propHooks[b]={
get:function(a){
return a.getAttribute(b,4);
}
};
});
}
if(!jQuery.support.style){
jQuery.attrHooks.style={
get:function(a){
return a.style.cssText||u;
},
set:function(a,b){
return(a.style.cssText=b+"");
}
};
}
if(!jQuery.support.optSelected){
jQuery.propHooks.selected=jQuery.extend(jQuery.propHooks.selected,{
get:function(a){
var b=a.parentNode;
if(b){
b.selectedIndex;
if(b.parentNode){
b.parentNode.selectedIndex;
}
}
return null;
}
});
}
if(!jQuery.support.enctype){
jQuery.propFix.enctype="encoding";
}
if(!jQuery.support.checkOn){
jQuery.each(["radio","checkbox"],function(){
jQuery.valHooks[this]={
get:function(a){
return a.getAttribute("value")===null?"on":a.value;
}
};
});
}
jQuery.each(["radio","checkbox"],function(){
jQuery.valHooks[this]=jQuery.extend(jQuery.valHooks[this],{
set:function(a,b){
if(jQuery.isArray(b)){
return(a.checked=jQuery.inArray(jQuery(a).val(),b)>=0);
}
}
});
});
var z=/^(?:input|select|textarea)$/i,
rkeyEvent=/^key/,
rmouseEvent=/^(?:mouse|contextmenu)|click/,
rfocusMorph=/^(?:focusinfocus|focusoutblur)$/,
rtypenamespace=/^([^.]*)(?:\.(.+)|)$/;
function returnTrue(){
return true;
}
function returnFalse(){
return false;
}

jQuery.event={
global:{},
add:function(a,b,c,d,f){
var g,events,t,handleObjIn,
special,eventHandle,handleObj,
handlers,type,namespaces,origType,
elemData=jQuery._data(a);
if(!elemData){
return;
}
if(c.handler){
handleObjIn=c;
c=handleObjIn.handler;
f=handleObjIn.selector;
}
if(!c.guid){
c.guid=jQuery.guid++;
}
if(!(events=elemData.events)){
events=elemData.events={};
}
if(!(eventHandle=elemData.handle)){
eventHandle=elemData.handle=function(e){
return typeof jQuery!==core_strundefined&&(!e||jQuery.event.triggered!==e.type)?
jQuery.event.dispatch.apply(eventHandle.elem,arguments):
u;
};
eventHandle.elem=a;
}
b=(b||"").match(core_rnotwhite)||[""];
t=b.length;
while(t--){
g=rtypenamespace.exec(b[t])||[];
type=origType=g[1];
namespaces=(g[2]||"").split(".").sort();
special=jQuery.event.special[type]||{};
type=(f?special.delegateType:special.bindType)||type;
special=jQuery.event.special[type]||{};
handleObj=jQuery.extend({
type:type,
origType:origType,
d:d,
c:c,
guid:c.guid,
f:f,
needsContext:f&&jQuery.expr.match.needsContext.test(f),
namespace:namespaces.join(".")
},handleObjIn);
if(!(handlers=events[type])){
handlers=events[type]=[];
handlers.delegateCount=0;
if(!special.setup||special.setup.call(a,d,namespaces,eventHandle)===false){
if(a.addEventListener){
a.addEventListener(type,eventHandle,false);
}else if(a.attachEvent){
a.attachEvent("on"+type,eventHandle);
}
}
}
if(special.add){
special.add.call(a,handleObj);
if(!handleObj.handler.guid){
handleObj.handler.guid=c.guid;
}
}
if(f){
handlers.splice(handlers.delegateCount++,0,handleObj);
}else{
handlers.push(handleObj);
}
jQuery.event.global[type]=true;
}
a=null;
},
remove:function(a,b,c,d,e){
var j,handleObj,tmp,
origCount,t,events,
special,handlers,type,
namespaces,origType,
elemData=jQuery.hasData(a)&&jQuery._data(a);
if(!elemData||!(events=elemData.events)){
return;
}
b=(b||"").match(core_rnotwhite)||[""];
t=b.length;
while(t--){
tmp=rtypenamespace.exec(b[t])||[];
type=origType=tmp[1];
namespaces=(tmp[2]||"").split(".").sort();
if(!type){
for(type in events){
jQuery.event.remove(a,type+b[t],c,d,true);
}
continue;
}
special=jQuery.event.special[type]||{};
type=(d?special.delegateType:special.bindType)||type;
handlers=events[type]||[];
tmp=tmp[2]&&new RegExp("(^|\\.)"+namespaces.join("\\.(?:.*\\.|)")+"(\\.|$)");
origCount=j=handlers.length;
while(j--){
handleObj=handlers[j];
if((e||origType===handleObj.origType)&&
(!c||c.guid===handleObj.guid)&&
(!tmp||tmp.test(handleObj.namespace))&&
(!d||d===handleObj.selector||d==="**"&&handleObj.selector)){
handlers.splice(j,1);
if(handleObj.selector){
handlers.delegateCount--;
}
if(special.remove){
special.remove.call(a,handleObj);
}
}
}
if(origCount&&!handlers.length){
if(!special.teardown||special.teardown.call(a,namespaces,elemData.handle)===false){
jQuery.removeEvent(a,type,elemData.handle);
}
delete events[type];
}
}
if(jQuery.isEmptyObject(events)){
delete elemData.handle;
jQuery._removeData(a,"events");
}
},
trigger:function(a,b,c,d){
var f,ontype,cur,
bubbleType,special,tmp,i,
eventPath=[c||document],
type=core_hasOwn.call(a,"type")?a.type:a,
namespaces=core_hasOwn.call(a,"namespace")?a.namespace.split("."):[];
cur=tmp=c=c||document;
if(c.nodeType===3||c.nodeType===8){
return;
}
if(rfocusMorph.test(type+jQuery.event.triggered)){
return;
}
if(type.indexOf(".")>=0){
namespaces=type.split(".");
type=namespaces.shift();
namespaces.sort();
}
ontype=type.indexOf(":")<0&&"on"+type;
a=a[jQuery.expando]?
a:
new jQuery.Event(type,typeof a==="object"&&a);
a.isTrigger=true;
a.namespace=namespaces.join(".");
a.namespace_re=a.namespace?
new RegExp("(^|\\.)"+namespaces.join("\\.(?:.*\\.|)")+"(\\.|$)"):
null;
a.result=u;
if(!a.target){
a.target=c;
}
b=b==null?
[a]:
jQuery.makeArray(b,[a]);
special=jQuery.event.special[type]||{};
if(!d&&special.trigger&&special.trigger.apply(c,b)===false){
return;
}
if(!d&&!special.noBubble&&!jQuery.isWindow(c)){
bubbleType=special.delegateType||type;
if(!rfocusMorph.test(bubbleType+type)){
cur=cur.parentNode;
}
for(;cur;cur=cur.parentNode){
eventPath.push(cur);
tmp=cur;
}
if(tmp===(c.ownerDocument||document)){
eventPath.push(tmp.defaultView||tmp.parentWindow||q);
}
}
i=0;
while((cur=eventPath[i++])&&!a.isPropagationStopped()){
a.type=i>1?
bubbleType:
special.bindType||type;
f=(jQuery._data(cur,"events")||{})[a.type]&&jQuery._data(cur,"handle");
if(f){
f.apply(cur,b);
}
f=ontype&&cur[ontype];
if(f&&jQuery.acceptData(cur)&&f.apply&&f.apply(cur,b)===false){
a.preventDefault();
}
}
a.type=type;
if(!d&&!a.isDefaultPrevented()){
if((!special._default||special._default.apply(c.ownerDocument,b)===false)&&
!(type==="click"&&jQuery.nodeName(c,"a"))&&jQuery.acceptData(c)){
if(ontype&&c[type]&&!jQuery.isWindow(c)){
tmp=c[ontype];
if(tmp){
c[ontype]=null;
}
jQuery.event.triggered=type;
try{
c[type]();
}catch(e){
}
jQuery.event.triggered=u;
if(tmp){
c[ontype]=tmp;
}
}
}
}
return a.result;
},
dispatch:function(a){
a=jQuery.event.fix(a);
var i,ret,handleObj,matched,j,
handlerQueue=[],
args=core_slice.call(arguments),
handlers=(jQuery._data(this,"events")||{})[a.type]||[],
special=jQuery.event.special[a.type]||{};
args[0]=a;
a.delegateTarget=this;
if(special.preDispatch&&special.preDispatch.call(this,a)===false){
return;
}
handlerQueue=jQuery.event.handlers.call(this,a,handlers);
i=0;
while((matched=handlerQueue[i++])&&!a.isPropagationStopped()){
a.currentTarget=matched.elem;
j=0;
while((handleObj=matched.handlers[j++])&&!a.isImmediatePropagationStopped()){
if(!a.namespace_re||a.namespace_re.test(handleObj.namespace)){
a.handleObj=handleObj;
a.data=handleObj.data;
ret=((jQuery.event.special[handleObj.origType]||{}).handle||handleObj.handler)
.apply(matched.elem,args);
if(ret!==u){
if((a.result=ret)===false){
a.preventDefault();
a.stopPropagation();
}
}
}
}
}
if(special.postDispatch){
special.postDispatch.call(this,a);
}
return a.result;
},
handlers:function(a,b){
var c,handleObj,matches,i,
handlerQueue=[],
delegateCount=b.delegateCount,
cur=a.target;
if(delegateCount&&cur.nodeType&&(!a.button||a.type!=="click")){
for(;cur!=this;cur=cur.parentNode||this){
if(cur.nodeType===1&&(cur.disabled!==true||a.type!=="click")){
matches=[];
for(i=0;i<delegateCount;i++){
handleObj=b[i];
c=handleObj.selector+" ";
if(matches[c]===u){
matches[c]=handleObj.needsContext?
jQuery(c,this).index(cur)>=0:
jQuery.find(c,this,null,[cur]).length;
}
if(matches[c]){
matches.push(handleObj);
}
}
if(matches.length){
handlerQueue.push({elem:cur,handlers:matches});
}
}
}
}
if(delegateCount<b.length){
handlerQueue.push({elem:this,handlers:b.slice(delegateCount)});
}
return handlerQueue;
},
fix:function(a){
if(a[jQuery.expando]){
return a;
}
var i,prop,copy,
type=a.type,
originalEvent=a,
fixHook=this.fixHooks[type];
if(!fixHook){
this.fixHooks[type]=fixHook=
rmouseEvent.test(type)?this.mouseHooks:
rkeyEvent.test(type)?this.keyHooks:
{};
}
copy=fixHook.props?this.props.concat(fixHook.props):this.props;
a=new jQuery.Event(originalEvent);
i=copy.length;
while(i--){
prop=copy[i];
a[prop]=originalEvent[prop];
}
if(!a.target){
a.target=originalEvent.srcElement||document;
}
if(a.target.nodeType===3){
a.target=a.target.parentNode;
}
a.metaKey=!!a.metaKey;
return fixHook.filter?fixHook.filter(a,originalEvent):a;
},
props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),
fixHooks:{},
keyHooks:{
props:"char charCode key keyCode".split(" "),
filter:function(a,b){
if(a.which==null){
a.which=b.charCode!=null?b.charCode:b.keyCode;
}
return a;
}
},
mouseHooks:{
props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),
filter:function(a,b){
var c,eventDoc,doc,
button=b.button,
fromElement=b.fromElement;
if(a.pageX==null&&b.clientX!=null){
eventDoc=a.target.ownerDocument||document;
doc=eventDoc.documentElement;
c=eventDoc.body;
a.pageX=b.clientX+(doc&&doc.scrollLeft||c&&c.scrollLeft||0)-(doc&&doc.clientLeft||c&&c.clientLeft||0);
a.pageY=b.clientY+(doc&&doc.scrollTop||c&&c.scrollTop||0)-(doc&&doc.clientTop||c&&c.clientTop||0);
}
if(!a.relatedTarget&&fromElement){
a.relatedTarget=fromElement===a.target?b.toElement:fromElement;
}
if(!a.which&&button!==u){
a.which=(button&1?1:(button&2?3:(button&4?2:0)));
}
return a;
}
},
special:{
load:{
noBubble:true
},
click:{
trigger:function(){
if(jQuery.nodeName(this,"input")&&this.type==="checkbox"&&this.click){
this.click();
return false;
}
}
},
focus:{
trigger:function(){
if(this!==document.activeElement&&this.focus){
try{
this.focus();
return false;
}catch(e){
}
}
},
delegateType:"focusin"
},
blur:{
trigger:function(){
if(this===document.activeElement&&this.blur){
this.blur();
return false;
}
},
delegateType:"focusout"
},
beforeunload:{
postDispatch:function(a){
if(a.result!==u){
a.originalEvent.returnValue=a.result;
}
}
}
},
simulate:function(a,b,c,d){
var e=jQuery.extend(
new jQuery.Event(),
c,
{type:a,
isSimulated:true,
originalEvent:{}
}
);
if(d){
jQuery.event.trigger(e,null,b);
}else{
jQuery.event.dispatch.call(b,e);
}
if(e.isDefaultPrevented()){
c.preventDefault();
}
}
};
jQuery.removeEvent=document.removeEventListener?
function(a,b,c){
if(a.removeEventListener){
a.removeEventListener(b,c,false);
}
}:
function(a,b,c){
var d="on"+b;
if(a.detachEvent){
if(typeof a[d]===core_strundefined){
a[d]=null;
}
a.detachEvent(d,c);
}
};
jQuery.Event=function(a,b){
if(!(this instanceof jQuery.Event)){
return new jQuery.Event(a,b);
}
if(a&&a.type){
this.originalEvent=a;
this.type=a.type;
this.isDefaultPrevented=(a.defaultPrevented||a.returnValue===false||
a.getPreventDefault&&a.getPreventDefault())?returnTrue:returnFalse;
}else{
this.type=a;
}
if(b){
jQuery.extend(this,b);
}
this.timeStamp=a&&a.timeStamp||jQuery.now();
this[jQuery.expando]=true;
};
jQuery.Event.prototype={
isDefaultPrevented:returnFalse,
isPropagationStopped:returnFalse,
isImmediatePropagationStopped:returnFalse,
preventDefault:function(){
var e=this.originalEvent;
this.isDefaultPrevented=returnTrue;
if(!e){
return;
}
if(e.preventDefault){
e.preventDefault();
}else{
e.returnValue=false;
}
},
stopPropagation:function(){
var e=this.originalEvent;
this.isPropagationStopped=returnTrue;
if(!e){
return;
}
if(e.stopPropagation){
e.stopPropagation();
}
e.cancelBubble=true;
},
stopImmediatePropagation:function(){
this.isImmediatePropagationStopped=returnTrue;
this.stopPropagation();
}
};
jQuery.each({
mouseenter:"mouseover",
mouseleave:"mouseout"
},function(c,d){
jQuery.event.special[c]={
delegateType:d,
bindType:d,
handle:function(a){
var b,
target=this,
related=a.relatedTarget,
handleObj=a.handleObj;
if(!related||(related!==target&&!jQuery.contains(target,related))){
a.type=handleObj.origType;
b=handleObj.handler.apply(this,arguments);
a.type=d;
}
return b;
}
};
});
if(!jQuery.support.submitBubbles){
jQuery.event.special.submit={
setup:function(){
if(jQuery.nodeName(this,"form")){
return false;
}
jQuery.event.add(this,"click._submit keypress._submit",function(e){
var b=e.target,
form=jQuery.nodeName(b,"input")||jQuery.nodeName(b,"button")?b.form:u;
if(form&&!jQuery._data(form,"submitBubbles")){
jQuery.event.add(form,"submit._submit",function(a){
a._submit_bubble=true;
});
jQuery._data(form,"submitBubbles",true);
}
});
},
postDispatch:function(a){
if(a._submit_bubble){
delete a._submit_bubble;
if(this.parentNode&&!a.isTrigger){
jQuery.event.simulate("submit",this.parentNode,a,true);
}
}
},
teardown:function(){
if(jQuery.nodeName(this,"form")){
return false;
}
jQuery.event.remove(this,"._submit");
}
};
}
if(!jQuery.support.changeBubbles){
jQuery.event.special.change={
setup:function(){
if(z.test(this.nodeName)){
if(this.type==="checkbox"||this.type==="radio"){
jQuery.event.add(this,"propertychange._change",function(a){
if(a.originalEvent.propertyName==="checked"){
this._just_changed=true;
}
});
jQuery.event.add(this,"click._change",function(a){
if(this._just_changed&&!a.isTrigger){
this._just_changed=false;
}
jQuery.event.simulate("change",this,a,true);
});
}
return false;
}
jQuery.event.add(this,"beforeactivate._change",function(e){
var b=e.target;
if(z.test(b.nodeName)&&!jQuery._data(b,"changeBubbles")){
jQuery.event.add(b,"change._change",function(a){
if(this.parentNode&&!a.isSimulated&&!a.isTrigger){
jQuery.event.simulate("change",this.parentNode,a,true);
}
});
jQuery._data(b,"changeBubbles",true);
}
});
},
handle:function(a){
var b=a.target;
if(this!==b||a.isSimulated||a.isTrigger||(b.type!=="radio"&&b.type!=="checkbox")){
return a.handleObj.handler.apply(this,arguments);
}
},
teardown:function(){
jQuery.event.remove(this,"._change");
return!z.test(this.nodeName);
}
};
}
if(!jQuery.support.focusinBubbles){
jQuery.each({focus:"focusin",blur:"focusout"},function(b,c){
var d=0,
handler=function(a){
jQuery.event.simulate(c,a.target,jQuery.event.fix(a),true);
};
jQuery.event.special[c]={
setup:function(){
if(d++===0){
document.addEventListener(b,handler,true);
}
},
teardown:function(){
if(--d===0){
document.removeEventListener(b,handler,true);
}
}
};
});
}
jQuery.fn.extend({
on:function(b,c,d,e,f){
var g,origFn;
if(typeof b==="object"){
if(typeof c!=="string"){
d=d||c;
c=u;
}
for(g in b){
this.on(g,c,d,b[g],f);
}
return this;
}
if(d==null&&e==null){
e=c;
d=c=u;
}else if(e==null){
if(typeof c==="string"){
e=d;
d=u;
}else{
e=d;
d=c;
c=u;
}
}
if(e===false){
e=returnFalse;
}else if(!e){
return this;
}
if(f===1){
origFn=e;
e=function(a){
jQuery().off(a);
return origFn.apply(this,arguments);
};
e.guid=origFn.guid||(origFn.guid=jQuery.guid++);
}
return this.each(function(){
jQuery.event.add(this,b,e,d,c);
});
},
one:function(a,b,c,d){
return this.on(a,b,c,d,1);
},
off:function(a,b,c){
var d,type;
if(a&&a.preventDefault&&a.handleObj){
d=a.handleObj;
jQuery(a.delegateTarget).off(
d.namespace?d.origType+"."+d.namespace:d.origType,
d.selector,
d.handler
);
return this;
}
if(typeof a==="object"){
for(type in a){
this.off(type,b,a[type]);
}
return this;
}
if(b===false||typeof b==="function"){
c=b;
b=u;
}
if(c===false){
c=returnFalse;
}
return this.each(function(){
jQuery.event.remove(this,a,c,b);
});
},
bind:function(a,b,c){
return this.on(a,null,b,c);
},
unbind:function(a,b){
return this.off(a,null,b);
},
delegate:function(a,b,c,d){
return this.on(b,a,c,d);
},
undelegate:function(a,b,c){
return arguments.length===1?this.off(a,"**"):this.off(b,a||"**",c);
},
trigger:function(a,b){
return this.each(function(){
jQuery.event.trigger(a,b,this);
});
},
triggerHandler:function(a,b){
var c=this[0];
if(c){
return jQuery.event.trigger(a,b,c,true);
}
}
});

(function(n,o){
var i,
cachedruns,
Expr,
getText,
isXML,
compile,
hasDuplicate,
outermostContext,
setDocument,
document,
docElem,
documentIsXML,
rbuggyQSA,
rbuggyMatches,
matches,
contains,
sortOrder,
expando="sizzle"+ -(new Date()),
preferredDoc=n.document,
support={},
dirruns=0,
done=0,
classCache=createCache(),
tokenCache=createCache(),
compilerCache=createCache(),
strundefined=typeof o,
MAX_NEGATIVE=1<<31,
arr=[],
pop=arr.pop,
push=arr.push,
slice=arr.slice,
indexOf=arr.indexOf||function(a){
var i=0,
len=this.length;
for(;i<len;i++){
if(this[i]===a){
return i;
}
}
return-1;
},
whitespace="[\\x20\\t\\r\\n\\f]",
characterEncoding="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",
identifier=characterEncoding.replace("w","w#"),
operators="([*^$|!~]?=)",
attributes="\\["+whitespace+"*("+characterEncoding+")"+whitespace+
"*(?:"+operators+whitespace+"*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+identifier+")|)|)"+whitespace+"*\\]",
pseudos=":("+characterEncoding+")(?:\\(((['\"])((?:\\\\.|[^\\\\])*?)\\3|((?:\\\\.|[^\\\\()[\\]]|"+attributes.replace(3,8)+")*)|.*)\\)|)",
rtrim=new RegExp("^"+whitespace+"+|((?:^|[^\\\\])(?:\\\\.)*)"+whitespace+"+$","g"),
rcomma=new RegExp("^"+whitespace+"*,"+whitespace+"*"),
rcombinators=new RegExp("^"+whitespace+"*([\\x20\\t\\r\\n\\f>+~])"+whitespace+"*"),
rpseudo=new RegExp(pseudos),
ridentifier=new RegExp("^"+identifier+"$"),
matchExpr={
"ID":new RegExp("^#("+characterEncoding+")"),
"CLASS":new RegExp("^\\.("+characterEncoding+")"),
"NAME":new RegExp("^\\[name=['\"]?("+characterEncoding+")['\"]?\\]"),
"TAG":new RegExp("^("+characterEncoding.replace("w","w*")+")"),
"ATTR":new RegExp("^"+attributes),
"PSEUDO":new RegExp("^"+pseudos),
"CHILD":new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+whitespace+
"*(even|odd|(([+-]|)(\\d*)n|)"+whitespace+"*(?:([+-]|)"+whitespace+
"*(\\d+)|))"+whitespace+"*\\)|)","i"),
"needsContext":new RegExp("^"+whitespace+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+
whitespace+"*((?:-\\d)?\\d*)"+whitespace+"*\\)|)(?=[^-]|$)","i")
},
rsibling=/[\x20\t\r\n\f]*[+~]/,
rnative=/^[^{]+\{\s*\[native code/,
rquickExpr=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,
rinputs=/^(?:input|select|textarea|button)$/i,
rheader=/^h\d$/i,
rescape=/'|\\/g,
rattributeQuotes=/\=[\x20\t\r\n\f]*([^'"\]]*)[\x20\t\r\n\f]*\]/g,
runescape=/\\([\da-fA-F]{1,6}[\x20\t\r\n\f]?|.)/g,
funescape=function(_,a){
var b="0x"+a-0x10000;
return b!==b?
a:
b<0?
String.fromCharCode(b+0x10000):
String.fromCharCode(b>>10|0xD800,b&0x3FF|0xDC00);
};
try{
slice.call(preferredDoc.documentElement.childNodes,0)[0].nodeType;
}catch(e){
slice=function(i){
var a,
results=[];
while((a=this[i++])){
results.push(a);
}
return results;
};
}

function isNative(a){
return rnative.test(a+"");
}

function createCache(){
var c,
keys=[];
return(c=function(a,b){
if(keys.push(a+=" ")>Expr.cacheLength){
delete c[keys.shift()];
}
return(c[a]=b);
});
}

function markFunction(a){
a[expando]=true;
return a;
}

function assert(a){
var b=document.createElement("div");
try{
return a(b);
}catch(e){
return false;
}finally{
b=null;
}
}
function Sizzle(a,b,c,d){
var e,elem,m,nodeType,
i,groups,old,nid,newContext,newSelector;
if((b?b.ownerDocument||b:preferredDoc)!==document){
setDocument(b);
}
b=b||document;
c=c||[];
if(!a||typeof a!=="string"){
return c;
}
if((nodeType=b.nodeType)!==1&&nodeType!==9){
return[];
}
if(!documentIsXML&&!d){
if((e=rquickExpr.exec(a))){
if((m=e[1])){
if(nodeType===9){
elem=b.getElementById(m);
if(elem&&elem.parentNode){
if(elem.id===m){
c.push(elem);
return c;
}
}else{
return c;
}
}else{
if(b.ownerDocument&&(elem=b.ownerDocument.getElementById(m))&&
contains(b,elem)&&elem.id===m){
c.push(elem);
return c;
}
}
}else if(e[2]){
push.apply(c,slice.call(b.getElementsByTagName(a),0));
return c;
}else if((m=e[3])&&support.getByClassName&&b.getElementsByClassName){
push.apply(c,slice.call(b.getElementsByClassName(m),0));
return c;
}
}
if(support.qsa&&!rbuggyQSA.test(a)){
old=true;
nid=expando;
newContext=b;
newSelector=nodeType===9&&a;
if(nodeType===1&&b.nodeName.toLowerCase()!=="object"){
groups=tokenize(a);
if((old=b.getAttribute("id"))){
nid=old.replace(rescape,"\\$&");
}else{
b.setAttribute("id",nid);
}
nid="[id='"+nid+"'] ";
i=groups.length;
while(i--){
groups[i]=nid+toSelector(groups[i]);
}
newContext=rsibling.test(a)&&b.parentNode||b;
newSelector=groups.join(",");
}
if(newSelector){
try{
push.apply(c,slice.call(newContext.querySelectorAll(
newSelector
),0));
return c;
}catch(qsaError){
}finally{
if(!old){
b.removeAttribute("id");
}
}
}
}
}
return select(a.replace(rtrim,"$1"),b,c,d);
}

isXML=Sizzle.isXML=function(a){
var b=a&&(a.ownerDocument||a).documentElement;
return b?b.nodeName!=="HTML":false;
};

setDocument=Sizzle.setDocument=function(e){
var f=e?e.ownerDocument||e:preferredDoc;
if(f===document||f.nodeType!==9||!f.documentElement){
return document;
}
document=f;
docElem=f.documentElement;
documentIsXML=isXML(f);
support.tagNameNoComments=assert(function(a){
a.appendChild(f.createComment(""));
return!a.getElementsByTagName("*").length;
});
support.attributes=assert(function(a){
a.innerHTML="<select></select>";
var b=typeof a.lastChild.getAttribute("multiple");
return b!=="boolean"&&b!=="string";
});
support.getByClassName=assert(function(a){
a.innerHTML="<div class='hidden e'></div><div class='hidden'></div>";
if(!a.getElementsByClassName||!a.getElementsByClassName("e").length){
return false;
}
a.lastChild.className="e";
return a.getElementsByClassName("e").length===2;
});
support.getByName=assert(function(a){
a.id=expando+0;
a.innerHTML="<a name='"+expando+"'></a><div name='"+expando+"'></div>";
docElem.insertBefore(a,docElem.firstChild);
var b=f.getElementsByName&&
f.getElementsByName(expando).length===2+
f.getElementsByName(expando+0).length;
support.getIdNotName=!f.getElementById(expando);
docElem.removeChild(a);
return b;
});
Expr.attrHandle=assert(function(a){
a.innerHTML="<a href='#'></a>";
return a.firstChild&&typeof a.firstChild.getAttribute!==strundefined&&
a.firstChild.getAttribute("href")==="#";
})?
{}:
{
"href":function(a){
return a.getAttribute("href",2);
},
"type":function(a){
return a.getAttribute("type");
}
};
if(support.getIdNotName){
Expr.find["ID"]=function(a,b){
if(typeof b.getElementById!==strundefined&&!documentIsXML){
var m=b.getElementById(a);
return m&&m.parentNode?[m]:[];
}
};
Expr.filter["ID"]=function(b){
var c=b.replace(runescape,funescape);
return function(a){
return a.getAttribute("id")===c;
};
};
}else{
Expr.find["ID"]=function(a,b){
if(typeof b.getElementById!==strundefined&&!documentIsXML){
var m=b.getElementById(a);
return m?
m.id===a||typeof m.getAttributeNode!==strundefined&&m.getAttributeNode("id").value===a?
[m]:
o:
[];
}
};
Expr.filter["ID"]=function(c){
var d=c.replace(runescape,funescape);
return function(a){
var b=typeof a.getAttributeNode!==strundefined&&a.getAttributeNode("id");
return b&&b.value===d;
};
};
}
Expr.find["TAG"]=support.tagNameNoComments?
function(a,b){
if(typeof b.getElementsByTagName!==strundefined){
return b.getElementsByTagName(a);
}
}:
function(a,b){
var c,
tmp=[],
i=0,
results=b.getElementsByTagName(a);
if(a==="*"){
while((c=results[i++])){
if(c.nodeType===1){
tmp.push(c);
}
}
return tmp;
}
return results;
};
Expr.find["NAME"]=support.getByName&&function(a,b){
if(typeof b.getElementsByName!==strundefined){
return b.getElementsByName(name);
}
};
Expr.find["CLASS"]=support.getByClassName&&function(a,b){
if(typeof b.getElementsByClassName!==strundefined&&!documentIsXML){
return b.getElementsByClassName(a);
}
};
rbuggyMatches=[];
rbuggyQSA=[":focus"];
if((support.qsa=isNative(f.querySelectorAll))){
assert(function(a){
a.innerHTML="<select><option selected=''></option></select>";
if(!a.querySelectorAll("[selected]").length){
rbuggyQSA.push("\\["+whitespace+"*(?:checked|disabled|ismap|multiple|readonly|selected|value)");
}
if(!a.querySelectorAll(":checked").length){
rbuggyQSA.push(":checked");
}
});
assert(function(a){
a.innerHTML="<input type='hidden' i=''/>";
if(a.querySelectorAll("[i^='']").length){
rbuggyQSA.push("[*^$]="+whitespace+"*(?:\"\"|'')");
}
if(!a.querySelectorAll(":enabled").length){
rbuggyQSA.push(":enabled",":disabled");
}
a.querySelectorAll("*,:x");
rbuggyQSA.push(",.*:");
});
}
if((support.matchesSelector=isNative((matches=docElem.matchesSelector||
docElem.mozMatchesSelector||
docElem.webkitMatchesSelector||
docElem.oMatchesSelector||
docElem.msMatchesSelector)))){
assert(function(a){
support.disconnectedMatch=matches.call(a,"div");
matches.call(a,"[s!='']:x");
rbuggyMatches.push("!=",pseudos);
});
}
rbuggyQSA=new RegExp(rbuggyQSA.join("|"));
rbuggyMatches=new RegExp(rbuggyMatches.join("|"));
contains=isNative(docElem.contains)||docElem.compareDocumentPosition?
function(a,b){
var c=a.nodeType===9?a.documentElement:a,
bup=b&&b.parentNode;
return a===bup||!!(bup&&bup.nodeType===1&&(
c.contains?
c.contains(bup):
a.compareDocumentPosition&&a.compareDocumentPosition(bup)&16
));
}:
function(a,b){
if(b){
while((b=b.parentNode)){
if(b===a){
return true;
}
}
}
return false;
};
sortOrder=docElem.compareDocumentPosition?
function(a,b){
var c;
if(a===b){
hasDuplicate=true;
return 0;
}
if((c=b.compareDocumentPosition&&a.compareDocumentPosition&&a.compareDocumentPosition(b))){
if(c&1||a.parentNode&&a.parentNode.nodeType===11){
if(a===f||contains(preferredDoc,a)){
return-1;
}
if(b===f||contains(preferredDoc,b)){
return 1;
}
return 0;
}
return c&4?-1:1;
}
return a.compareDocumentPosition?-1:1;
}:
function(a,b){
var c,
i=0,
aup=a.parentNode,
bup=b.parentNode,
ap=[a],
bp=[b];
if(a===b){
hasDuplicate=true;
return 0;
}else if(!aup||!bup){
return a===f?-1:
b===f?1:
aup?-1:
bup?1:
0;
}else if(aup===bup){
return siblingCheck(a,b);
}
c=a;
while((c=c.parentNode)){
ap.unshift(c);
}
c=b;
while((c=c.parentNode)){
bp.unshift(c);
}
while(ap[i]===bp[i]){
i++;
}
return i?
siblingCheck(ap[i],bp[i]):
ap[i]===preferredDoc?-1:
bp[i]===preferredDoc?1:
0;
};
hasDuplicate=false;
[0,0].sort(sortOrder);
support.detectDuplicates=hasDuplicate;
return document;
};
Sizzle.matches=function(a,b){
return Sizzle(a,null,null,b);
};
Sizzle.matchesSelector=function(a,b){
if((a.ownerDocument||a)!==document){
setDocument(a);
}
b=b.replace(rattributeQuotes,"='$1']");
if(support.matchesSelector&&!documentIsXML&&(!rbuggyMatches||!rbuggyMatches.test(b))&&!rbuggyQSA.test(b)){
try{
var c=matches.call(a,b);
if(c||support.disconnectedMatch||
a.document&&a.document.nodeType!==11){
return c;
}
}catch(e){}
}
return Sizzle(b,document,null,[a]).length>0;
};
Sizzle.contains=function(a,b){
if((a.ownerDocument||a)!==document){
setDocument(a);
}
return contains(a,b);
};
Sizzle.attr=function(a,b){
var c;
if((a.ownerDocument||a)!==document){
setDocument(a);
}
if(!documentIsXML){
b=b.toLowerCase();
}
if((c=Expr.attrHandle[b])){
return c(a);
}
if(documentIsXML||support.attributes){
return a.getAttribute(b);
}
return((c=a.getAttributeNode(b))||a.getAttribute(b))&&a[b]===true?
b:
c&&c.specified?c.value:null;
};
Sizzle.error=function(a){
throw new Error("Syntax error, unrecognized expression: "+a);
};
Sizzle.uniqueSort=function(a){
var b,
duplicates=[],
i=1,
j=0;
hasDuplicate=!support.detectDuplicates;
a.sort(sortOrder);
if(hasDuplicate){
for(;(b=a[i]);i++){
if(b===a[i-1]){
j=duplicates.push(i);
}
}
while(j--){
a.splice(duplicates[j],1);
}
}
return a;
};
function siblingCheck(a,b){
var c=b&&a,
diff=c&&(~b.sourceIndex||MAX_NEGATIVE)-(~a.sourceIndex||MAX_NEGATIVE);
if(diff){
return diff;
}
if(c){
while((c=c.nextSibling)){
if(c===b){
return-1;
}
}
}
return a?1:-1;
}
function createInputPseudo(c){
return function(a){
var b=a.nodeName.toLowerCase();
return b==="input"&&a.type===c;
};
}
function createButtonPseudo(c){
return function(a){
var b=a.nodeName.toLowerCase();
return(b==="input"||b==="button")&&a.type===c;
};
}
function createPositionalPseudo(d){
return markFunction(function(c){
c=+c;
return markFunction(function(a,b){
var j,
matchIndexes=d([],a.length,c),
i=matchIndexes.length;
while(i--){
if(a[(j=matchIndexes[i])]){
a[j]=!(b[j]=a[j]);
}
}
});
});
}

getText=Sizzle.getText=function(a){
var b,
ret="",
i=0,
nodeType=a.nodeType;
if(!nodeType){
for(;(b=a[i]);i++){
ret+=getText(b);
}
}else if(nodeType===1||nodeType===9||nodeType===11){
if(typeof a.textContent==="string"){
return a.textContent;
}else{
for(a=a.firstChild;a;a=a.nextSibling){
ret+=getText(a);
}
}
}else if(nodeType===3||nodeType===4){
return a.nodeValue;
}
return ret;
};
Expr=Sizzle.selectors={
cacheLength:50,
createPseudo:markFunction,
match:matchExpr,
find:{},
relative:{
">":{dir:"parentNode",first:true},
" ":{dir:"parentNode"},
"+":{dir:"previousSibling",first:true},
"~":{dir:"previousSibling"}
},
preFilter:{
"ATTR":function(a){
a[1]=a[1].replace(runescape,funescape);
a[3]=(a[4]||a[5]||"").replace(runescape,funescape);
if(a[2]==="~="){
a[3]=" "+a[3]+" ";
}
return a.slice(0,4);
},
"CHILD":function(a){

a[1]=a[1].toLowerCase();
if(a[1].slice(0,3)==="nth"){
if(!a[3]){
Sizzle.error(a[0]);
}
a[4]=+(a[4]?a[5]+(a[6]||1):2*(a[3]==="even"||a[3]==="odd"));
a[5]=+((a[7]+a[8])||a[3]==="odd");
}else if(a[3]){
Sizzle.error(a[0]);
}
return a;
},
"PSEUDO":function(a){
var b,
unquoted=!a[5]&&a[2];
if(matchExpr["CHILD"].test(a[0])){
return null;
}
if(a[4]){
a[2]=a[4];
}else if(unquoted&&rpseudo.test(unquoted)&&
(b=tokenize(unquoted,true))&&
(b=unquoted.indexOf(")",unquoted.length-b)-unquoted.length)){
a[0]=a[0].slice(0,b);
a[2]=unquoted.slice(0,b);
}
return a.slice(0,3);
}
},
filter:{
"TAG":function(b){
if(b==="*"){
return function(){return true};
}
b=b.replace(runescape,funescape).toLowerCase();
return function(a){
return a.nodeName&&a.nodeName.toLowerCase()===b;
};
},
"CLASS":function(b){
var c=classCache[b+" "];
return c||
(c=new RegExp("(^|"+whitespace+")"+b+"("+whitespace+"|$)"))&&
classCache(b,function(a){
return c.test(a.className||(typeof a.getAttribute!==strundefined&&a.getAttribute("class"))||"");
});
},
"ATTR":function(c,d,e){
return function(a){
var b=Sizzle.attr(a,c);
if(b==null){
return d==="!=";
}
if(!d){
return true;
}
b+="";
return d==="="?b===e:
d==="!="?b!==e:
d==="^="?e&&b.indexOf(e)===0:
d==="*="?e&&b.indexOf(e)>-1:
d==="$="?e&&b.slice(-e.length)===e:
d==="~="?(" "+b+" ").indexOf(e)>-1:
d==="|="?b===e||b.slice(0,e.length+1)===e+"-":
false;
};
},
"CHILD":function(e,f,g,h,i){
var j=e.slice(0,3)!=="nth",
forward=e.slice(-4)!=="last",
ofType=f==="of-type";
return h===1&&i===0?
function(a){
return!!a.parentNode;
}:
function(a,b,c){
var d,outerCache,node,diff,nodeIndex,start,
dir=j!==forward?"nextSibling":"previousSibling",
parent=a.parentNode,
name=ofType&&a.nodeName.toLowerCase(),
useCache=!c&&!ofType;
if(parent){
if(j){
while(dir){
node=a;
while((node=node[dir])){
if(ofType?node.nodeName.toLowerCase()===name:node.nodeType===1){
return false;
}
}
start=dir=e==="only"&&!start&&"nextSibling";
}
return true;
}
start=[forward?parent.firstChild:parent.lastChild];
if(forward&&useCache){
outerCache=parent[expando]||(parent[expando]={});
d=outerCache[e]||[];
nodeIndex=d[0]===dirruns&&d[1];
diff=d[0]===dirruns&&d[2];
node=nodeIndex&&parent.childNodes[nodeIndex];
while((node=++nodeIndex&&node&&node[dir]||
(diff=nodeIndex=0)||start.pop())){
if(node.nodeType===1&&++diff&&node===a){
outerCache[e]=[dirruns,nodeIndex,diff];
break;
}
}
}else if(useCache&&(d=(a[expando]||(a[expando]={}))[e])&&d[0]===dirruns){
diff=d[1];
}else{
while((node=++nodeIndex&&node&&node[dir]||
(diff=nodeIndex=0)||start.pop())){
if((ofType?node.nodeName.toLowerCase()===name:node.nodeType===1)&&++diff){
if(useCache){
(node[expando]||(node[expando]={}))[e]=[dirruns,diff];
}
if(node===a){
break;
}
}
}
}
diff-=i;
return diff===h||(diff%h===0&&diff/h>=0);
}
};
},
"PSEUDO":function(d,e){
var f,
fn=Expr.pseudos[d]||Expr.setFilters[d.toLowerCase()]||
Sizzle.error("unsupported pseudo: "+d);
if(fn[expando]){
return fn(e);
}
if(fn.length>1){
f=[d,d,"",e];
return Expr.setFilters.hasOwnProperty(d.toLowerCase())?
markFunction(function(a,b){
var c,
matched=fn(a,e),
i=matched.length;
while(i--){
c=indexOf.call(a,matched[i]);
a[c]=!(b[c]=matched[i]);
}
}):
function(a){
return fn(a,0,f);
};
}
return fn;
}
},
pseudos:{
"not":markFunction(function(f){
var g=[],
results=[],
matcher=compile(f.replace(rtrim,"$1"));
return matcher[expando]?
markFunction(function(a,b,c,d){
var e,
unmatched=matcher(a,null,d,[]),
i=a.length;
while(i--){
if((e=unmatched[i])){
a[i]=!(b[i]=e);
}
}
}):
function(a,b,c){
g[0]=a;
matcher(g,null,c,results);
return!results.pop();
};
}),
"has":markFunction(function(b){
return function(a){
return Sizzle(b,a).length>0;
};
}),
"contains":markFunction(function(b){
return function(a){
return(a.textContent||a.innerText||getText(a)).indexOf(b)>-1;
};
}),
"lang":markFunction(function(c){
if(!ridentifier.test(c||"")){
Sizzle.error("unsupported lang: "+c);
}
c=c.replace(runescape,funescape).toLowerCase();
return function(a){
var b;
do{
if((b=documentIsXML?
a.getAttribute("xml:lang")||a.getAttribute("lang"):
a.lang)){
b=b.toLowerCase();
return b===c||b.indexOf(c+"-")===0;
}
}while((a=a.parentNode)&&a.nodeType===1);
return false;
};
}),
"target":function(a){
var b=n.location&&n.location.hash;
return b&&b.slice(1)===a.id;
},
"root":function(a){
return a===docElem;
},
"focus":function(a){
return a===document.activeElement&&(!document.hasFocus||document.hasFocus())&&!!(a.type||a.href||~a.tabIndex);
},
"enabled":function(a){
return a.disabled===false;
},
"disabled":function(a){
return a.disabled===true;
},
"checked":function(a){
var b=a.nodeName.toLowerCase();
return(b==="input"&&!!a.checked)||(b==="option"&&!!a.selected);
},
"selected":function(a){
if(a.parentNode){
a.parentNode.selectedIndex;
}
return a.selected===true;
},
"empty":function(a){
for(a=a.firstChild;a;a=a.nextSibling){
if(a.nodeName>"@"||a.nodeType===3||a.nodeType===4){
return false;
}
}
return true;
},
"parent":function(a){
return!Expr.pseudos["empty"](a);
},
"header":function(a){
return rheader.test(a.nodeName);
},
"input":function(a){
return rinputs.test(a.nodeName);
},
"button":function(a){
var b=a.nodeName.toLowerCase();
return b==="input"&&a.type==="button"||b==="button";
},
"text":function(a){
var b;
return a.nodeName.toLowerCase()==="input"&&
a.type==="text"&&
((b=a.getAttribute("type"))==null||b.toLowerCase()===a.type);
},
"first":createPositionalPseudo(function(){
return[0];
}),
"last":createPositionalPseudo(function(a,b){
return[b-1];
}),
"eq":createPositionalPseudo(function(a,b,c){
return[c<0?c+b:c];
}),
"even":createPositionalPseudo(function(a,b){
var i=0;
for(;i<b;i+=2){
a.push(i);
}
return a;
}),
"odd":createPositionalPseudo(function(a,b){
var i=1;
for(;i<b;i+=2){
a.push(i);
}
return a;
}),
"lt":createPositionalPseudo(function(a,b,c){
var i=c<0?c+b:c;
for(;--i>=0;){
a.push(i);
}
return a;
}),
"gt":createPositionalPseudo(function(a,b,c){
var i=c<0?c+b:c;
for(;++i<b;){
a.push(i);
}
return a;
})
}
};
for(i in{radio:true,checkbox:true,file:true,password:true,image:true}){
Expr.pseudos[i]=createInputPseudo(i);
}
for(i in{submit:true,reset:true}){
Expr.pseudos[i]=createButtonPseudo(i);
}
function tokenize(a,b){
var c,match,tokens,type,
soFar,groups,preFilters,
cached=tokenCache[a+" "];
if(cached){
return b?0:cached.slice(0);
}
soFar=a;
groups=[];
preFilters=Expr.preFilter;
while(soFar){
if(!c||(match=rcomma.exec(soFar))){
if(match){
soFar=soFar.slice(match[0].length)||soFar;
}
groups.push(tokens=[]);
}
c=false;
if((match=rcombinators.exec(soFar))){
c=match.shift();
tokens.push({
value:c,
type:match[0].replace(rtrim," ")
});
soFar=soFar.slice(c.length);
}
for(type in Expr.filter){
if((match=matchExpr[type].exec(soFar))&&(!preFilters[type]||
(match=preFilters[type](match)))){
c=match.shift();
tokens.push({
value:c,
type:type,
matches:match
});
soFar=soFar.slice(c.length);
}
}
if(!c){
break;
}
}
return b?
soFar.length:
soFar?
Sizzle.error(a):
tokenCache(a,groups).slice(0);
}
function toSelector(a){
var i=0,
len=a.length,
selector="";
for(;i<len;i++){
selector+=a[i].value;
}
return selector;
}
function addCombinator(e,f,g){
var h=f.dir,
checkNonElements=g&&h==="parentNode",
doneName=done++;
return f.first?
function(a,b,c){
while((a=a[h])){
if(a.nodeType===1||checkNonElements){
return e(a,b,c);
}
}
}:
function(a,b,c){
var d,cache,outerCache,
dirkey=dirruns+" "+doneName;
if(c){
while((a=a[h])){
if(a.nodeType===1||checkNonElements){
if(e(a,b,c)){
return true;
}
}
}
}else{
while((a=a[h])){
if(a.nodeType===1||checkNonElements){
outerCache=a[expando]||(a[expando]={});
if((cache=outerCache[h])&&cache[0]===dirkey){
if((d=cache[1])===true||d===cachedruns){
return d===true;
}
}else{
cache=outerCache[h]=[dirkey];
cache[1]=e(a,b,c)||cachedruns;
if(cache[1]===true){
return true;
}
}
}
}
}
};
}
function elementMatcher(d){
return d.length>1?
function(a,b,c){
var i=d.length;
while(i--){
if(!d[i](a,b,c)){
return false;
}
}
return true;
}:
d[0];
}
function condense(a,b,c,d,e){
var f,
newUnmatched=[],
i=0,
len=a.length,
mapped=b!=null;
for(;i<len;i++){
if((f=a[i])){
if(!c||c(f,d,e)){
newUnmatched.push(f);
if(mapped){
b.push(i);
}
}
}
}
return newUnmatched;
}
function setMatcher(f,g,h,j,k,l){
if(j&&!j[expando]){
j=setMatcher(j);
}
if(k&&!k[expando]){
k=setMatcher(k,l);
}
return markFunction(function(a,b,c,d){
var e,i,elem,
preMap=[],
postMap=[],
preexisting=b.length,
elems=a||multipleContexts(g||"*",c.nodeType?[c]:c,[]),
matcherIn=f&&(a||!g)?
condense(elems,preMap,f,c,d):
elems,
matcherOut=h?
k||(a?f:preexisting||j)?
[]:
b:
matcherIn;
if(h){
h(matcherIn,matcherOut,c,d);
}
if(j){
e=condense(matcherOut,postMap);
j(e,[],c,d);
i=e.length;
while(i--){
if((elem=e[i])){
matcherOut[postMap[i]]=!(matcherIn[postMap[i]]=elem);
}
}
}
if(a){
if(k||f){
if(k){
e=[];
i=matcherOut.length;
while(i--){
if((elem=matcherOut[i])){
e.push((matcherIn[i]=elem));
}
}
k(null,(matcherOut=[]),e,d);
}
i=matcherOut.length;
while(i--){
if((elem=matcherOut[i])&&
(e=k?indexOf.call(a,elem):preMap[i])>-1){
a[e]=!(b[e]=elem);
}
}
}
}else{
matcherOut=condense(
matcherOut===b?
matcherOut.splice(preexisting,matcherOut.length):
matcherOut
);
if(k){
k(null,b,matcherOut,d);
}else{
push.apply(b,matcherOut);
}
}
});
}
function matcherFromTokens(d){
var e,matcher,j,
len=d.length,
leadingRelative=Expr.relative[d[0].type],
implicitRelative=leadingRelative||Expr.relative[" "],
i=leadingRelative?1:0,
matchContext=addCombinator(function(a){
return a===e;
},implicitRelative,true),
matchAnyContext=addCombinator(function(a){
return indexOf.call(e,a)>-1;
},implicitRelative,true),
matchers=[function(a,b,c){
return(!leadingRelative&&(c||b!==outermostContext))||(
(e=b).nodeType?
matchContext(a,b,c):
matchAnyContext(a,b,c));
}];
for(;i<len;i++){
if((matcher=Expr.relative[d[i].type])){
matchers=[addCombinator(elementMatcher(matchers),matcher)];
}else{
matcher=Expr.filter[d[i].type].apply(null,d[i].matches);
if(matcher[expando]){
j=++i;
for(;j<len;j++){
if(Expr.relative[d[j].type]){
break;
}
}
return setMatcher(
i>1&&elementMatcher(matchers),
i>1&&toSelector(d.slice(0,i-1)).replace(rtrim,"$1"),
matcher,
i<j&&matcherFromTokens(d.slice(i,j)),
j<len&&matcherFromTokens((d=d.slice(j))),
j<len&&toSelector(d)
);
}
matchers.push(matcher);
}
}
return elementMatcher(matchers);
}
function matcherFromGroupMatchers(g,h){
var k=0,
bySet=h.length>0,
byElement=g.length>0,
superMatcher=function(a,b,c,d,e){
var f,j,matcher,
setMatched=[],
matchedCount=0,
i="0",
unmatched=a&&[],
outermost=e!=null,
contextBackup=outermostContext,
elems=a||byElement&&Expr.find["TAG"]("*",e&&b.parentNode||b),
dirrunsUnique=(dirruns+=contextBackup==null?1:Math.random()||0.1);
if(outermost){
outermostContext=b!==document&&b;
cachedruns=k;
}
for(;(f=elems[i])!=null;i++){
if(byElement&&f){
j=0;
while((matcher=g[j++])){
if(matcher(f,b,c)){
d.push(f);
break;
}
}
if(outermost){
dirruns=dirrunsUnique;
cachedruns=++k;
}
}
if(bySet){
if((f=!matcher&&f)){
matchedCount--;
}
if(a){
unmatched.push(f);
}
}
}
matchedCount+=i;
if(bySet&&i!==matchedCount){
j=0;
while((matcher=h[j++])){
matcher(unmatched,setMatched,b,c);
}
if(a){
if(matchedCount>0){
while(i--){
if(!(unmatched[i]||setMatched[i])){
setMatched[i]=pop.call(d);
}
}
}
setMatched=condense(setMatched);
}
push.apply(d,setMatched);
if(outermost&&!a&&setMatched.length>0&&
(matchedCount+h.length)>1){
Sizzle.uniqueSort(d);
}
}
if(outermost){
dirruns=dirrunsUnique;
outermostContext=contextBackup;
}
return unmatched;
};
return bySet?
markFunction(superMatcher):
superMatcher;
}
compile=Sizzle.compile=function(a,b){
var i,
setMatchers=[],
elementMatchers=[],
cached=compilerCache[a+" "];
if(!cached){
if(!b){
b=tokenize(a);
}
i=b.length;
while(i--){
cached=matcherFromTokens(b[i]);
if(cached[expando]){
setMatchers.push(cached);
}else{
elementMatchers.push(cached);
}
}
cached=compilerCache(a,matcherFromGroupMatchers(elementMatchers,setMatchers));
}
return cached;
};
function multipleContexts(a,b,c){
var i=0,
len=b.length;
for(;i<len;i++){
Sizzle(a,b[i],c);
}
return c;
}
function select(a,b,c,d){
var i,tokens,token,type,find,
match=tokenize(a);
if(!d){
if(match.length===1){
tokens=match[0]=match[0].slice(0);
if(tokens.length>2&&(token=tokens[0]).type==="ID"&&
b.nodeType===9&&!documentIsXML&&
Expr.relative[tokens[1].type]){
b=Expr.find["ID"](token.matches[0].replace(runescape,funescape),b)[0];
if(!b){
return c;
}
a=a.slice(tokens.shift().value.length);
}
i=matchExpr["needsContext"].test(a)?0:tokens.length;
while(i--){
token=tokens[i];
if(Expr.relative[(type=token.type)]){
break;
}
if((find=Expr.find[type])){
if((d=find(
token.matches[0].replace(runescape,funescape),
rsibling.test(tokens[0].type)&&b.parentNode||b
))){
tokens.splice(i,1);
a=d.length&&toSelector(tokens);
if(!a){
push.apply(c,slice.call(d,0));
return c;
}
break;
}
}
}
}
}
compile(a,match)(
d,
b,
documentIsXML,
c,
rsibling.test(a)
);
return c;
}
Expr.pseudos["nth"]=Expr.pseudos["eq"];
function setFilters(){}
Expr.filters=setFilters.prototype=Expr.pseudos;
Expr.setFilters=new setFilters();
setDocument();
Sizzle.attr=jQuery.attr;
jQuery.find=Sizzle;
jQuery.expr=Sizzle.selectors;
jQuery.expr[":"]=jQuery.expr.pseudos;
jQuery.unique=Sizzle.uniqueSort;
jQuery.text=Sizzle.getText;
jQuery.isXMLDoc=Sizzle.isXML;
jQuery.contains=Sizzle.contains;
})(q);
var A=/Until$/,
rparentsprev=/^(?:parents|prev(?:Until|All))/,
isSimple=/^.[^:#\[\.,]*$/,
rneedsContext=jQuery.expr.match.needsContext,
guaranteedUnique={
children:true,
contents:true,
next:true,
prev:true
};
jQuery.fn.extend({
find:function(a){
var i,ret,self,
len=this.length;
if(typeof a!=="string"){
self=this;
return this.pushStack(jQuery(a).filter(function(){
for(i=0;i<len;i++){
if(jQuery.contains(self[i],this)){
return true;
}
}
}));
}
ret=[];
for(i=0;i<len;i++){
jQuery.find(a,this[i],ret);
}
ret=this.pushStack(len>1?jQuery.unique(ret):ret);
ret.selector=(this.selector?this.selector+" ":"")+a;
return ret;
},
has:function(a){
var i,
targets=jQuery(a,this),
len=targets.length;
return this.filter(function(){
for(i=0;i<len;i++){
if(jQuery.contains(this,targets[i])){
return true;
}
}
});
},
not:function(a){
return this.pushStack(winnow(this,a,false));
},
filter:function(a){
return this.pushStack(winnow(this,a,true));
},
is:function(a){
return!!a&&(
typeof a==="string"?
rneedsContext.test(a)?
jQuery(a,this.context).index(this[0])>=0:
jQuery.filter(a,this).length>0:
this.filter(a).length>0);
},
closest:function(a,b){
var c,
i=0,
l=this.length,
ret=[],
pos=rneedsContext.test(a)||typeof a!=="string"?
jQuery(a,b||this.context):
0;
for(;i<l;i++){
c=this[i];
while(c&&c.ownerDocument&&c!==b&&c.nodeType!==11){
if(pos?pos.index(c)>-1:jQuery.find.matchesSelector(c,a)){
ret.push(c);
break;
}
c=c.parentNode;
}
}
return this.pushStack(ret.length>1?jQuery.unique(ret):ret);
},
index:function(a){
if(!a){
return(this[0]&&this[0].parentNode)?this.first().prevAll().length:-1;
}
if(typeof a==="string"){
return jQuery.inArray(this[0],jQuery(a));
}
return jQuery.inArray(
a.jquery?a[0]:a,this);
},
add:function(a,b){
var c=typeof a==="string"?
jQuery(a,b):
jQuery.makeArray(a&&a.nodeType?[a]:a),
all=jQuery.merge(this.get(),c);
return this.pushStack(jQuery.unique(all));
},
addBack:function(a){
return this.add(a==null?
this.prevObject:this.prevObject.filter(a)
);
}
});
jQuery.fn.andSelf=jQuery.fn.addBack;
function sibling(a,b){
do{
a=a[b];
}while(a&&a.nodeType!==1);
return a;
}
jQuery.each({
parent:function(a){
var b=a.parentNode;
return b&&b.nodeType!==11?b:null;
},
parents:function(a){
return jQuery.dir(a,"parentNode");
},
parentsUntil:function(a,i,b){
return jQuery.dir(a,"parentNode",b);
},
next:function(a){
return sibling(a,"nextSibling");
},
prev:function(a){
return sibling(a,"previousSibling");
},
nextAll:function(a){
return jQuery.dir(a,"nextSibling");
},
prevAll:function(a){
return jQuery.dir(a,"previousSibling");
},
nextUntil:function(a,i,b){
return jQuery.dir(a,"nextSibling",b);
},
prevUntil:function(a,i,b){
return jQuery.dir(a,"previousSibling",b);
},
siblings:function(a){
return jQuery.sibling((a.parentNode||{}).firstChild,a);
},
children:function(a){
return jQuery.sibling(a.firstChild);
},
contents:function(a){
return jQuery.nodeName(a,"iframe")?
a.contentDocument||a.contentWindow.document:
jQuery.merge([],a.childNodes);
}
},function(d,e){
jQuery.fn[d]=function(a,b){
var c=jQuery.map(this,e,a);
if(!A.test(d)){
b=a;
}
if(b&&typeof b==="string"){
c=jQuery.filter(b,c);
}
c=this.length>1&&!guaranteedUnique[d]?jQuery.unique(c):c;
if(this.length>1&&rparentsprev.test(d)){
c=c.reverse();
}
return this.pushStack(c);
};
});
jQuery.extend({
filter:function(a,b,c){
if(c){
a=":not("+a+")";
}
return b.length===1?
jQuery.find.matchesSelector(b[0],a)?[b[0]]:[]:
jQuery.find.matches(a,b);
},
dir:function(a,b,c){
var d=[],
cur=a[b];
while(cur&&cur.nodeType!==9&&(c===u||cur.nodeType!==1||!jQuery(cur).is(c))){
if(cur.nodeType===1){
d.push(cur);
}
cur=cur[b];
}
return d;
},
sibling:function(n,a){
var r=[];
for(;n;n=n.nextSibling){
if(n.nodeType===1&&n!==a){
r.push(n);
}
}
return r;
}
});
function winnow(c,d,e){
d=d||0;
if(jQuery.isFunction(d)){
return jQuery.grep(c,function(a,i){
var b=!!d.call(a,i,a);
return b===e;
});
}else if(d.nodeType){
return jQuery.grep(c,function(a){
return(a===d)===e;
});
}else if(typeof d==="string"){
var f=jQuery.grep(c,function(a){
return a.nodeType===1;
});
if(isSimple.test(d)){
return jQuery.filter(d,f,!e);
}else{
d=jQuery.filter(d,f);
}
}
return jQuery.grep(c,function(a){
return(jQuery.inArray(a,d)>=0)===e;
});
}
function createSafeFragment(a){
var b=B.split("|"),
safeFrag=a.createDocumentFragment();
if(safeFrag.createElement){
while(b.length){
safeFrag.createElement(
b.pop()
);
}
}
return safeFrag;
}
var B="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|"+
"header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",
rinlinejQuery=/ jQuery\d+="(?:null|\d+)"/g,
rnoshimcache=new RegExp("<(?:"+B+")[\\s/>]","i"),
rleadingWhitespace=/^\s+/,
rxhtmlTag=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,
rtagName=/<([\w:]+)/,
rtbody=/<tbody/i,
rhtml=/<|&#?\w+;/,
rnoInnerhtml=/<(?:script|style|link)/i,
manipulation_rcheckableType=/^(?:checkbox|radio)$/i,
rchecked=/checked\s*(?:[^=]|=\s*.checked.)/i,
rscriptType=/^$|\/(?:java|ecma)script/i,
rscriptTypeMasked=/^true\/(.*)/,
rcleanScript=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,
wrapMap={
option:[1,"<select multiple='multiple'>","</select>"],
legend:[1,"<fieldset>","</fieldset>"],
area:[1,"<map>","</map>"],
param:[1,"<object>","</object>"],
thead:[1,"<table>","</table>"],
tr:[2,"<table><tbody>","</tbody></table>"],
col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],
td:[3,"<table><tbody><tr>","</tr></tbody></table>"],
_default:jQuery.support.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]
},
safeFragment=createSafeFragment(document),
fragmentDiv=safeFragment.appendChild(document.createElement("div"));
wrapMap.optgroup=wrapMap.option;
wrapMap.tbody=wrapMap.tfoot=wrapMap.colgroup=wrapMap.caption=wrapMap.thead;
wrapMap.th=wrapMap.td;
jQuery.fn.extend({
text:function(b){
return jQuery.access(this,function(a){
return a===u?
jQuery.text(this):
this.empty().append((this[0]&&this[0].ownerDocument||document).createTextNode(a));
},null,b,arguments.length);
},
wrapAll:function(b){
if(jQuery.isFunction(b)){
return this.each(function(i){
jQuery(this).wrapAll(b.call(this,i));
});
}
if(this[0]){
var c=jQuery(b,this[0].ownerDocument).eq(0).clone(true);
if(this[0].parentNode){
c.insertBefore(this[0]);
}
c.map(function(){
var a=this;
while(a.firstChild&&a.firstChild.nodeType===1){
a=a.firstChild;
}
return a;
}).append(this);
}
return this;
},
wrapInner:function(b){
if(jQuery.isFunction(b)){
return this.each(function(i){
jQuery(this).wrapInner(b.call(this,i));
});
}
return this.each(function(){
var a=jQuery(this),
contents=a.contents();
if(contents.length){
contents.wrapAll(b);
}else{
a.append(b);
}
});
},
wrap:function(a){
var b=jQuery.isFunction(a);
return this.each(function(i){
jQuery(this).wrapAll(b?a.call(this,i):a);
});
},
unwrap:function(){
return this.parent().each(function(){
if(!jQuery.nodeName(this,"body")){
jQuery(this).replaceWith(this.childNodes);
}
}).end();
},
append:function(){
return this.domManip(arguments,true,function(a){
if(this.nodeType===1||this.nodeType===11||this.nodeType===9){
this.appendChild(a);
}
});
},
prepend:function(){
return this.domManip(arguments,true,function(a){
if(this.nodeType===1||this.nodeType===11||this.nodeType===9){
this.insertBefore(a,this.firstChild);
}
});
},
before:function(){
return this.domManip(arguments,false,function(a){
if(this.parentNode){
this.parentNode.insertBefore(a,this);
}
});
},
after:function(){
return this.domManip(arguments,false,function(a){
if(this.parentNode){
this.parentNode.insertBefore(a,this.nextSibling);
}
});
},
remove:function(a,b){
var c,
i=0;
for(;(c=this[i])!=null;i++){
if(!a||jQuery.filter(a,[c]).length>0){
if(!b&&c.nodeType===1){
jQuery.cleanData(getAll(c));
}
if(c.parentNode){
if(b&&jQuery.contains(c.ownerDocument,c)){
setGlobalEval(getAll(c,"script"));
}
c.parentNode.removeChild(c);
}
}
}
return this;
},
empty:function(){
var a,
i=0;
for(;(a=this[i])!=null;i++){
if(a.nodeType===1){
jQuery.cleanData(getAll(a,false));
}
while(a.firstChild){
a.removeChild(a.firstChild);
}
if(a.options&&jQuery.nodeName(a,"select")){
a.options.length=0;
}
}
return this;
},
clone:function(a,b){
a=a==null?false:a;
b=b==null?a:b;
return this.map(function(){
return jQuery.clone(this,a,b);
});
},
html:function(c){
return jQuery.access(this,function(a){
var b=this[0]||{},
i=0,
l=this.length;
if(a===u){
return b.nodeType===1?
b.innerHTML.replace(rinlinejQuery,""):
u;
}
if(typeof a==="string"&&!rnoInnerhtml.test(a)&&
(jQuery.support.htmlSerialize||!rnoshimcache.test(a))&&
(jQuery.support.leadingWhitespace||!rleadingWhitespace.test(a))&&
!wrapMap[(rtagName.exec(a)||["",""])[1].toLowerCase()]){
a=a.replace(rxhtmlTag,"<$1></$2>");
try{
for(;i<l;i++){
b=this[i]||{};
if(b.nodeType===1){
jQuery.cleanData(getAll(b,false));
b.innerHTML=a;
}
}
b=0;
}catch(e){}
}
if(b){
this.empty().append(a);
}
},null,c,arguments.length);
},
replaceWith:function(c){
var d=jQuery.isFunction(c);
if(!d&&typeof c!=="string"){
c=jQuery(c).not(this).detach();
}
return this.domManip([c],true,function(a){
var b=this.nextSibling,
parent=this.parentNode;
if(parent){
jQuery(this).remove();
parent.insertBefore(a,b);
}
});
},
detach:function(a){
return this.remove(a,true);
},
domManip:function(c,d,e){
c=core_concat.apply([],c);
var f,node,hasScripts,
scripts,doc,fragment,
i=0,
l=this.length,
set=this,
iNoClone=l-1,
value=c[0],
isFunction=jQuery.isFunction(value);
if(isFunction||!(l<=1||typeof value!=="string"||jQuery.support.checkClone||!rchecked.test(value))){
return this.each(function(a){
var b=set.eq(a);
if(isFunction){
c[0]=value.call(this,a,d?b.html():u);
}
b.domManip(c,d,e);
});
}
if(l){
fragment=jQuery.buildFragment(c,this[0].ownerDocument,false,this);
f=fragment.firstChild;
if(fragment.childNodes.length===1){
fragment=f;
}
if(f){
d=d&&jQuery.nodeName(f,"tr");
scripts=jQuery.map(getAll(fragment,"script"),disableScript);
hasScripts=scripts.length;
for(;i<l;i++){
node=fragment;
if(i!==iNoClone){
node=jQuery.clone(node,true,true);
if(hasScripts){
jQuery.merge(scripts,getAll(node,"script"));
}
}
e.call(
d&&jQuery.nodeName(this[i],"table")?
findOrAppend(this[i],"tbody"):
this[i],
node,
i
);
}
if(hasScripts){
doc=scripts[scripts.length-1].ownerDocument;
jQuery.map(scripts,restoreScript);
for(i=0;i<hasScripts;i++){
node=scripts[i];
if(rscriptType.test(node.type||"")&&
!jQuery._data(node,"globalEval")&&jQuery.contains(doc,node)){
if(node.src){
jQuery.ajax({
url:node.src,
type:"GET",
dataType:"script",
async:false,
global:false,
"throws":true
});
}else{
jQuery.globalEval((node.text||node.textContent||node.innerHTML||"").replace(rcleanScript,""));
}
}
}
}
fragment=f=null;
}
}
return this;
}
});
function findOrAppend(a,b){
return a.getElementsByTagName(b)[0]||a.appendChild(a.ownerDocument.createElement(b));
}
function disableScript(a){
var b=a.getAttributeNode("type");
a.type=(b&&b.specified)+"/"+a.type;
return a;
}
function restoreScript(a){
var b=rscriptTypeMasked.exec(a.type);
if(b){
a.type=b[1];
}else{
a.removeAttribute("type");
}
return a;
}
function setGlobalEval(a,b){
var c,
i=0;
for(;(c=a[i])!=null;i++){
jQuery._data(c,"globalEval",!b||jQuery._data(b[i],"globalEval"));
}
}
function cloneCopyEvent(a,b){
if(b.nodeType!==1||!jQuery.hasData(a)){
return;
}
var c,i,l,
oldData=jQuery._data(a),
curData=jQuery._data(b,oldData),
events=oldData.events;
if(events){
delete curData.handle;
curData.events={};
for(c in events){
for(i=0,l=events[c].length;i<l;i++){
jQuery.event.add(b,c,events[c][i]);
}
}
}
if(curData.data){
curData.data=jQuery.extend({},curData.data);
}
}
function fixCloneNodeIssues(a,b){
var c,e,data;
if(b.nodeType!==1){
return;
}
c=b.nodeName.toLowerCase();
if(!jQuery.support.noCloneEvent&&b[jQuery.expando]){
data=jQuery._data(b);
for(e in data.events){
jQuery.removeEvent(b,e,data.handle);
}
b.removeAttribute(jQuery.expando);
}
if(c==="script"&&b.text!==a.text){
disableScript(b).text=a.text;
restoreScript(b);
}else if(c==="object"){
if(b.parentNode){
b.outerHTML=a.outerHTML;
}
if(jQuery.support.html5Clone&&(a.innerHTML&&!jQuery.trim(b.innerHTML))){
b.innerHTML=a.innerHTML;
}
}else if(c==="input"&&manipulation_rcheckableType.test(a.type)){
b.defaultChecked=b.checked=a.checked;
if(b.value!==a.value){
b.value=a.value;
}
}else if(c==="option"){
b.defaultSelected=b.selected=a.defaultSelected;
}else if(c==="input"||c==="textarea"){
b.defaultValue=a.defaultValue;
}
}
jQuery.each({
appendTo:"append",
prependTo:"prepend",
insertBefore:"before",
insertAfter:"after",
replaceAll:"replaceWith"
},function(c,d){
jQuery.fn[c]=function(a){
var b,
i=0,
ret=[],
insert=jQuery(a),
last=insert.length-1;
for(;i<=last;i++){
b=i===last?this:this.clone(true);
jQuery(insert[i])[d](b);
core_push.apply(ret,b.get());
}
return this.pushStack(ret);
};
});
function getAll(a,b){
var c,elem,
i=0,
found=typeof a.getElementsByTagName!==core_strundefined?a.getElementsByTagName(b||"*"):
typeof a.querySelectorAll!==core_strundefined?a.querySelectorAll(b||"*"):
u;
if(!found){
for(found=[],c=a.childNodes||a;(elem=c[i])!=null;i++){
if(!b||jQuery.nodeName(elem,b)){
found.push(elem);
}else{
jQuery.merge(found,getAll(elem,b));
}
}
}
return b===u||b&&jQuery.nodeName(a,b)?
jQuery.merge([a],found):
found;
}
function fixDefaultChecked(a){
if(manipulation_rcheckableType.test(a.type)){
a.defaultChecked=a.checked;
}
}
jQuery.extend({
clone:function(a,b,c){
var d,node,clone,i,srcElements,
inPage=jQuery.contains(a.ownerDocument,a);
if(jQuery.support.html5Clone||jQuery.isXMLDoc(a)||!rnoshimcache.test("<"+a.nodeName+">")){
clone=a.cloneNode(true);
}else{
fragmentDiv.innerHTML=a.outerHTML;
fragmentDiv.removeChild(clone=fragmentDiv.firstChild);
}
if((!jQuery.support.noCloneEvent||!jQuery.support.noCloneChecked)&&
(a.nodeType===1||a.nodeType===11)&&!jQuery.isXMLDoc(a)){
d=getAll(clone);
srcElements=getAll(a);
for(i=0;(node=srcElements[i])!=null;++i){
if(d[i]){
fixCloneNodeIssues(node,d[i]);
}
}
}
if(b){
if(c){
srcElements=srcElements||getAll(a);
d=d||getAll(clone);
for(i=0;(node=srcElements[i])!=null;i++){
cloneCopyEvent(node,d[i]);
}
}else{
cloneCopyEvent(a,clone);
}
}
d=getAll(clone,"script");
if(d.length>0){
setGlobalEval(d,!inPage&&getAll(a,"script"));
}
d=srcElements=node=null;
return clone;
},
buildFragment:function(a,b,c,d){
var j,elem,contains,
tmp,tag,tbody,wrap,
l=a.length,
safe=createSafeFragment(b),
nodes=[],
i=0;
for(;i<l;i++){
elem=a[i];
if(elem||elem===0){
if(jQuery.type(elem)==="object"){
jQuery.merge(nodes,elem.nodeType?[elem]:elem);
}else if(!rhtml.test(elem)){
nodes.push(b.createTextNode(elem));
}else{
tmp=tmp||safe.appendChild(b.createElement("div"));
tag=(rtagName.exec(elem)||["",""])[1].toLowerCase();
wrap=wrapMap[tag]||wrapMap._default;
tmp.innerHTML=wrap[1]+elem.replace(rxhtmlTag,"<$1></$2>")+wrap[2];
j=wrap[0];
while(j--){
tmp=tmp.lastChild;
}
if(!jQuery.support.leadingWhitespace&&rleadingWhitespace.test(elem)){
nodes.push(b.createTextNode(rleadingWhitespace.exec(elem)[0]));
}
if(!jQuery.support.tbody){
elem=tag==="table"&&!rtbody.test(elem)?
tmp.firstChild:
wrap[1]==="<table>"&&!rtbody.test(elem)?
tmp:
0;
j=elem&&elem.childNodes.length;
while(j--){
if(jQuery.nodeName((tbody=elem.childNodes[j]),"tbody")&&!tbody.childNodes.length){
elem.removeChild(tbody);
}
}
}
jQuery.merge(nodes,tmp.childNodes);
tmp.textContent="";
while(tmp.firstChild){
tmp.removeChild(tmp.firstChild);
}
tmp=safe.lastChild;
}
}
}
if(tmp){
safe.removeChild(tmp);
}
if(!jQuery.support.appendChecked){
jQuery.grep(getAll(nodes,"input"),fixDefaultChecked);
}
i=0;
while((elem=nodes[i++])){
if(d&&jQuery.inArray(elem,d)!==-1){
continue;
}
contains=jQuery.contains(elem.ownerDocument,elem);
tmp=getAll(safe.appendChild(elem),"script");
if(contains){
setGlobalEval(tmp);
}
if(c){
j=0;
while((elem=tmp[j++])){
if(rscriptType.test(elem.type||"")){
c.push(elem);
}
}
}
}
tmp=null;
return safe;
},
cleanData:function(a,b){
var c,type,id,data,
i=0,
internalKey=jQuery.expando,
cache=jQuery.cache,
deleteExpando=jQuery.support.deleteExpando,
special=jQuery.event.special;
for(;(c=a[i])!=null;i++){
if(b||jQuery.acceptData(c)){
id=c[internalKey];
data=id&&cache[id];
if(data){
if(data.events){
for(type in data.events){
if(special[type]){
jQuery.event.remove(c,type);
}else{
jQuery.removeEvent(c,type,data.handle);
}
}
}
if(cache[id]){
delete cache[id];
if(deleteExpando){
delete c[internalKey];
}else if(typeof c.removeAttribute!==core_strundefined){
c.removeAttribute(internalKey);
}else{
c[internalKey]=null;
}
core_deletedIds.push(id);
}
}
}
}
}
});
var C,getStyles,curCSS,
ralpha=/alpha\([^)]*\)/i,
ropacity=/opacity\s*=\s*([^)]*)/,
rposition=/^(top|right|bottom|left)$/,
rdisplayswap=/^(none|table(?!-c[ea]).+)/,
rmargin=/^margin/,
rnumsplit=new RegExp("^("+core_pnum+")(.*)$","i"),
rnumnonpx=new RegExp("^("+core_pnum+")(?!px)[a-z%]+$","i"),
rrelNum=new RegExp("^([+-])=("+core_pnum+")","i"),
elemdisplay={BODY:"block"},
cssShow={position:"absolute",visibility:"hidden",display:"block"},
cssNormalTransform={
letterSpacing:0,
fontWeight:400
},
cssExpand=["Top","Right","Bottom","Left"],
cssPrefixes=["Webkit","O","Moz","ms"];
function vendorPropName(a,b){
if(b in a){
return b;
}
var c=b.charAt(0).toUpperCase()+b.slice(1),
origName=b,
i=cssPrefixes.length;
while(i--){
b=cssPrefixes[i]+c;
if(b in a){
return b;
}
}
return origName;
}
function isHidden(a,b){
a=b||a;
return jQuery.css(a,"display")==="none"||!jQuery.contains(a.ownerDocument,a);
}
function showHide(a,b){
var c,elem,hidden,
values=[],
index=0,
length=a.length;
for(;index<length;index++){
elem=a[index];
if(!elem.style){
continue;
}
values[index]=jQuery._data(elem,"olddisplay");
c=elem.style.display;
if(b){
if(!values[index]&&c==="none"){
elem.style.display="";
}
if(elem.style.display===""&&isHidden(elem)){
values[index]=jQuery._data(elem,"olddisplay",css_defaultDisplay(elem.nodeName));
}
}else{
if(!values[index]){
hidden=isHidden(elem);
if(c&&c!=="none"||!hidden){
jQuery._data(elem,"olddisplay",hidden?c:jQuery.css(elem,"display"));
}
}
}
}
for(index=0;index<length;index++){
elem=a[index];
if(!elem.style){
continue;
}
if(!b||elem.style.display==="none"||elem.style.display===""){
elem.style.display=b?values[index]||"":"none";
}
}
return a;
}
jQuery.fn.extend({
css:function(e,f){
return jQuery.access(this,function(a,b,c){
var d,styles,
map={},
i=0;
if(jQuery.isArray(b)){
styles=getStyles(a);
d=b.length;
for(;i<d;i++){
map[b[i]]=jQuery.css(a,b[i],false,styles);
}
return map;
}
return c!==u?
jQuery.style(a,b,c):
jQuery.css(a,b);
},e,f,arguments.length>1);
},
show:function(){
return showHide(this,true);
},
hide:function(){
return showHide(this);
},
toggle:function(a){
var b=typeof a==="boolean";
return this.each(function(){
if(b?a:isHidden(this)){
jQuery(this).show();
}else{
jQuery(this).hide();
}
});
}
});
jQuery.extend({
cssHooks:{
opacity:{
get:function(a,b){
if(b){
var c=curCSS(a,"opacity");
return c===""?"1":c;
}
}
}
},
cssNumber:{
"columnCount":true,
"fillOpacity":true,
"fontWeight":true,
"lineHeight":true,
"opacity":true,
"orphans":true,
"widows":true,
"zIndex":true,
"zoom":true
},
cssProps:{
"float":jQuery.support.cssFloat?"cssFloat":"styleFloat"
},
style:function(a,b,c,d){
if(!a||a.nodeType===3||a.nodeType===8||!a.style){
return;
}
var f,type,hooks,
origName=jQuery.camelCase(b),
style=a.style;
b=jQuery.cssProps[origName]||(jQuery.cssProps[origName]=vendorPropName(style,origName));
hooks=jQuery.cssHooks[b]||jQuery.cssHooks[origName];
if(c!==u){
type=typeof c;
if(type==="string"&&(f=rrelNum.exec(c))){
c=(f[1]+1)*f[2]+parseFloat(jQuery.css(a,b));
type="number";
}
if(c==null||type==="number"&&isNaN(c)){
return;
}
if(type==="number"&&!jQuery.cssNumber[origName]){
c+="px";
}
if(!jQuery.support.clearCloneStyle&&c===""&&b.indexOf("background")===0){
style[b]="inherit";
}
if(!hooks||!("set"in hooks)||(c=hooks.set(a,c,d))!==u){
try{
style[b]=c;
}catch(e){}
}
}else{
if(hooks&&"get"in hooks&&(f=hooks.get(a,false,d))!==u){
return f;
}
return style[b];
}
},
css:function(a,b,c,d){
var e,val,hooks,
origName=jQuery.camelCase(b);
b=jQuery.cssProps[origName]||(jQuery.cssProps[origName]=vendorPropName(a.style,origName));
hooks=jQuery.cssHooks[b]||jQuery.cssHooks[origName];
if(hooks&&"get"in hooks){
val=hooks.get(a,true,c);
}
if(val===u){
val=curCSS(a,b,d);
}
if(val==="normal"&&b in cssNormalTransform){
val=cssNormalTransform[b];
}
if(c===""||c){
e=parseFloat(val);
return c===true||jQuery.isNumeric(e)?e||0:val;
}
return val;
},
swap:function(a,b,c,d){
var e,name,
old={};
for(name in b){
old[name]=a.style[name];
a.style[name]=b[name];
}
e=c.apply(a,d||[]);
for(name in b){
a.style[name]=old[name];
}
return e;
}
});
if(q.getComputedStyle){
getStyles=function(a){
return q.getComputedStyle(a,null);
};
curCSS=function(a,b,c){
var d,minWidth,maxWidth,
computed=c||getStyles(a),
ret=computed?computed.getPropertyValue(b)||computed[b]:u,
style=a.style;
if(computed){
if(ret===""&&!jQuery.contains(a.ownerDocument,a)){
ret=jQuery.style(a,b);
}
if(rnumnonpx.test(ret)&&rmargin.test(b)){
d=style.width;
minWidth=style.minWidth;
maxWidth=style.maxWidth;
style.minWidth=style.maxWidth=style.width=ret;
ret=computed.width;
style.width=d;
style.minWidth=minWidth;
style.maxWidth=maxWidth;
}
}
return ret;
};
}else if(document.documentElement.currentStyle){
getStyles=function(a){
return a.currentStyle;
};
curCSS=function(a,b,c){
var d,rs,rsLeft,
computed=c||getStyles(a),
ret=computed?computed[b]:u,
style=a.style;
if(ret==null&&style&&style[b]){
ret=style[b];
}
if(rnumnonpx.test(ret)&&!rposition.test(b)){
d=style.left;
rs=a.runtimeStyle;
rsLeft=rs&&rs.left;
if(rsLeft){
rs.left=a.currentStyle.left;
}
style.left=b==="fontSize"?"1em":ret;
ret=style.pixelLeft+"px";
style.left=d;
if(rsLeft){
rs.left=rsLeft;
}
}
return ret===""?"auto":ret;
};
}
function setPositiveNumber(a,b,c){
var d=rnumsplit.exec(b);
return d?
Math.max(0,d[1]-(c||0))+(d[2]||"px"):
b;
}
function augmentWidthOrHeight(a,b,c,d,e){
var i=c===(d?"border":"content")?
4:
b==="width"?1:0,
val=0;
for(;i<4;i+=2){
if(c==="margin"){
val+=jQuery.css(a,c+cssExpand[i],true,e);
}
if(d){
if(c==="content"){
val-=jQuery.css(a,"padding"+cssExpand[i],true,e);
}
if(c!=="margin"){
val-=jQuery.css(a,"border"+cssExpand[i]+"Width",true,e);
}
}else{
val+=jQuery.css(a,"padding"+cssExpand[i],true,e);
if(c!=="padding"){
val+=jQuery.css(a,"border"+cssExpand[i]+"Width",true,e);
}
}
}
return val;
}
function getWidthOrHeight(a,b,c){
var d=true,
val=b==="width"?a.offsetWidth:a.offsetHeight,
styles=getStyles(a),
isBorderBox=jQuery.support.boxSizing&&jQuery.css(a,"boxSizing",false,styles)==="border-box";
if(val<=0||val==null){
val=curCSS(a,b,styles);
if(val<0||val==null){
val=a.style[b];
}
if(rnumnonpx.test(val)){
return val;
}
d=isBorderBox&&(jQuery.support.boxSizingReliable||val===a.style[b]);
val=parseFloat(val)||0;
}
return(val+
augmentWidthOrHeight(
a,
b,
c||(isBorderBox?"border":"content"),
d,
styles
)
)+"px";
}
function css_defaultDisplay(a){
var b=document,
display=elemdisplay[a];
if(!display){
display=actualDisplay(a,b);
if(display==="none"||!display){
C=(C||
jQuery("<iframe frameborder='0' width='0' height='0'/>")
.css("cssText","display:block !important")
).appendTo(b.documentElement);
b=(C[0].contentWindow||C[0].contentDocument).document;
b.write("<!doctype html><html><body>");
b.close();
display=actualDisplay(a,b);
C.detach();
}
elemdisplay[a]=display;
}
return display;
}
function actualDisplay(a,b){
var c=jQuery(b.createElement(a)).appendTo(b.body),
display=jQuery.css(c[0],"display");
c.remove();
return display;
}
jQuery.each(["height","width"],function(i,e){
jQuery.cssHooks[e]={
get:function(a,b,c){
if(b){
return a.offsetWidth===0&&rdisplayswap.test(jQuery.css(a,"display"))?
jQuery.swap(a,cssShow,function(){
return getWidthOrHeight(a,e,c);
}):
getWidthOrHeight(a,e,c);
}
},
set:function(a,b,c){
var d=c&&getStyles(a);
return setPositiveNumber(a,b,c?
augmentWidthOrHeight(
a,
e,
c,
jQuery.support.boxSizing&&jQuery.css(a,"boxSizing",false,d)==="border-box",
d
):0
);
}
};
});
if(!jQuery.support.opacity){
jQuery.cssHooks.opacity={
get:function(a,b){
return ropacity.test((b&&a.currentStyle?a.currentStyle.filter:a.style.filter)||"")?
(0.01*parseFloat(RegExp.$1))+"":
b?"1":"";
},
set:function(a,b){
var c=a.style,
currentStyle=a.currentStyle,
opacity=jQuery.isNumeric(b)?"alpha(opacity="+b*100+")":"",
filter=currentStyle&&currentStyle.filter||c.filter||"";
c.zoom=1;
if((b>=1||b==="")&&
jQuery.trim(filter.replace(ralpha,""))===""&&
c.removeAttribute){
c.removeAttribute("filter");
if(b===""||currentStyle&&!currentStyle.filter){
return;
}
}
c.filter=ralpha.test(filter)?
filter.replace(ralpha,opacity):
filter+" "+opacity;
}
};
}
jQuery(function(){
if(!jQuery.support.reliableMarginRight){
jQuery.cssHooks.marginRight={
get:function(a,b){
if(b){
return jQuery.swap(a,{"display":"inline-block"},
curCSS,[a,"marginRight"]);
}
}
};
}
if(!jQuery.support.pixelPosition&&jQuery.fn.position){
jQuery.each(["top","left"],function(i,c){
jQuery.cssHooks[c]={
get:function(a,b){
if(b){
b=curCSS(a,c);
return rnumnonpx.test(b)?
jQuery(a).position()[c]+"px":
b;
}
}
};
});
}
});
if(jQuery.expr&&jQuery.expr.filters){
jQuery.expr.filters.hidden=function(a){
return a.offsetWidth<=0&&a.offsetHeight<=0||
(!jQuery.support.reliableHiddenOffsets&&((a.style&&a.style.display)||jQuery.css(a,"display"))==="none");
};
jQuery.expr.filters.visible=function(a){
return!jQuery.expr.filters.hidden(a);
};
}
jQuery.each({
margin:"",
padding:"",
border:"Width"
},function(b,c){
jQuery.cssHooks[b+c]={
expand:function(a){
var i=0,
expanded={},
parts=typeof a==="string"?a.split(" "):[a];
for(;i<4;i++){
expanded[b+cssExpand[i]+c]=
parts[i]||parts[i-2]||parts[0];
}
return expanded;
}
};
if(!rmargin.test(b)){
jQuery.cssHooks[b+c].set=setPositiveNumber;
}
});
var D=/%20/g,
rbracket=/\[\]$/,
rCRLF=/\r?\n/g,
rsubmitterTypes=/^(?:submit|button|image|reset|file)$/i,
rsubmittable=/^(?:input|select|textarea|keygen)/i;
jQuery.fn.extend({
serialize:function(){
return jQuery.param(this.serializeArray());
},
serializeArray:function(){
return this.map(function(){
var a=jQuery.prop(this,"elements");
return a?jQuery.makeArray(a):this;
})
.filter(function(){
var a=this.type;
return this.name&&!jQuery(this).is(":disabled")&&
rsubmittable.test(this.nodeName)&&!rsubmitterTypes.test(a)&&
(this.checked||!manipulation_rcheckableType.test(a));
})
.map(function(i,b){
var c=jQuery(this).val();
return c==null?
null:
jQuery.isArray(c)?
jQuery.map(c,function(a){
return{name:b.name,value:a.replace(rCRLF,"\r\n")};
}):
{name:b.name,value:c.replace(rCRLF,"\r\n")};
}).get();
}
});
jQuery.param=function(a,c){
var d,
s=[],
add=function(a,b){
b=jQuery.isFunction(b)?b():(b==null?"":b);
s[s.length]=encodeURIComponent(a)+"="+encodeURIComponent(b);
};
if(c===u){
c=jQuery.ajaxSettings&&jQuery.ajaxSettings.traditional;
}
if(jQuery.isArray(a)||(a.jquery&&!jQuery.isPlainObject(a))){
jQuery.each(a,function(){
add(this.name,this.value);
});
}else{
for(d in a){
buildParams(d,a[d],c,add);
}
}
return s.join("&").replace(D,"+");
};
function buildParams(a,b,c,d){
var e;
if(jQuery.isArray(b)){
jQuery.each(b,function(i,v){
if(c||rbracket.test(a)){
d(a,v);
}else{
buildParams(a+"["+(typeof v==="object"?i:"")+"]",v,c,d);
}
});
}else if(!c&&jQuery.type(b)==="object"){
for(e in b){
buildParams(a+"["+e+"]",b[e],c,d);
}
}else{
d(a,b);
}
}
jQuery.each(("blur focus focusin focusout load resize scroll unload click dblclick "+
"mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave "+
"change select submit keydown keypress keyup error contextmenu").split(" "),function(i,c){
jQuery.fn[c]=function(a,b){
return arguments.length>0?
this.on(c,null,a,b):
this.trigger(c);
};
});
jQuery.fn.hover=function(a,b){
return this.mouseenter(a).mouseleave(b||a);
};
var
ajaxLocParts,
ajaxLocation,
ajax_nonce=jQuery.now(),
ajax_rquery=/\?/,
rhash=/#.*$/,
rts=/([?&])_=[^&]*/,
rheaders=/^(.*?):[ \t]*([^\r\n]*)\r?$/mg,rlocalProtocol=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,
rnoContent=/^(?:GET|HEAD)$/,
rprotocol=/^\/\//,
rurl=/^([\w.+-]+:)(?:\/\/([^\/?#:]*)(?::(\d+)|)|)/,
_load=jQuery.fn.load,

prefilters={},

transports={},
allTypes="*/".concat("*");
try{
ajaxLocation=location.href;
}catch(e){
ajaxLocation=document.createElement("a");
ajaxLocation.href="";
ajaxLocation=ajaxLocation.href;
}
ajaxLocParts=rurl.exec(ajaxLocation.toLowerCase())||[];
function addToPrefiltersOrTransports(d){
return function(a,b){
if(typeof a!=="string"){
b=a;
a="*";
}
var c,
i=0,
dataTypes=a.toLowerCase().match(core_rnotwhite)||[];
if(jQuery.isFunction(b)){
while((c=dataTypes[i++])){
if(c[0]==="+"){
c=c.slice(1)||"*";
(d[c]=d[c]||[]).unshift(b);
}else{
(d[c]=d[c]||[]).push(b);
}
}
}
};
}
function inspectPrefiltersOrTransports(e,f,g,h){
var i={},
seekingTransport=(e===transports);
function inspect(c){
var d;
i[c]=true;
jQuery.each(e[c]||[],function(_,a){
var b=a(f,g,h);
if(typeof b==="string"&&!seekingTransport&&!i[b]){
f.dataTypes.unshift(b);
inspect(b);
return false;
}else if(seekingTransport){
return!(d=b);
}
});
return d;
}
return inspect(f.dataTypes[0])||!i["*"]&&inspect("*");
}
function ajaxExtend(a,b){
var c,key,
flatOptions=jQuery.ajaxSettings.flatOptions||{};
for(key in b){
if(b[key]!==u){
(flatOptions[key]?a:(c||(c={})))[key]=b[key];
}
}
if(c){
jQuery.extend(true,a,c);
}
return a;
}
jQuery.fn.load=function(c,d,e){
if(typeof c!=="string"&&_load){
return _load.apply(this,arguments);
}
var f,response,type,
self=this,
off=c.indexOf(" ");
if(off>=0){
f=c.slice(off,c.length);
c=c.slice(0,off);
}
if(jQuery.isFunction(d)){
e=d;
d=u;
}else if(d&&typeof d==="object"){
type="POST";
}
if(self.length>0){
jQuery.ajax({
c:c,
type:type,
dataType:"html",
data:d
}).done(function(a){
response=arguments;
self.html(f?
jQuery("<div>").append(jQuery.parseHTML(a)).find(f):
a);
}).complete(e&&function(a,b){
self.each(e,response||[a.responseText,b,a]);
});
}
return this;
};
jQuery.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(i,b){
jQuery.fn[b]=function(a){
return this.on(b,a);
};
});
jQuery.each(["get","post"],function(i,e){
jQuery[e]=function(a,b,c,d){
if(jQuery.isFunction(b)){
d=d||c;
c=b;
b=u;
}
return jQuery.ajax({
a:a,
d:e,
dataType:d,
b:b,
success:c
});
};
});
jQuery.extend({
active:0,
lastModified:{},
etag:{},
ajaxSettings:{
url:ajaxLocation,
type:"GET",
isLocal:rlocalProtocol.test(ajaxLocParts[1]),
global:true,
processData:true,
async:true,
contentType:"application/x-www-form-urlencoded; charset=UTF-8",

accepts:{
"*":allTypes,
text:"text/plain",
html:"text/html",
xml:"application/xml, text/xml",
json:"application/json, text/javascript"
},
contents:{
xml:/xml/,
html:/html/,
json:/json/
},
responseFields:{
xml:"responseXML",
text:"responseText"
},
converters:{
"* text":q.String,
"text html":true,
"text json":jQuery.parseJSON,
"text xml":jQuery.parseXML
},
flatOptions:{
url:true,
context:true
}
},
ajaxSetup:function(a,b){
return b?
ajaxExtend(ajaxExtend(a,jQuery.ajaxSettings),b):
ajaxExtend(jQuery.ajaxSettings,a);
},
ajaxPrefilter:addToPrefiltersOrTransports(prefilters),
ajaxTransport:addToPrefiltersOrTransports(transports),
ajax:function(f,g){
if(typeof f==="object"){
g=f;
f=u;
}
g=g||{};
var h,
i,
cacheURL,
responseHeadersString,
timeoutTimer,
fireGlobals,
transport,
responseHeaders,
s=jQuery.ajaxSetup({},g),
callbackContext=s.context||s,
globalEventContext=s.context&&(callbackContext.nodeType||callbackContext.jquery)?
jQuery(callbackContext):
jQuery.event,
deferred=jQuery.Deferred(),
completeDeferred=jQuery.Callbacks("once memory"),
statusCode=s.statusCode||{},
requestHeaders={},
requestHeadersNames={},
state=0,
strAbort="canceled",
jqXHR={
readyState:0,
getResponseHeader:function(a){
var b;
if(state===2){
if(!responseHeaders){
responseHeaders={};
while((b=rheaders.exec(responseHeadersString))){
responseHeaders[b[1].toLowerCase()]=b[2];
}
}
b=responseHeaders[a.toLowerCase()];
}
return b==null?null:b;
},
getAllResponseHeaders:function(){
return state===2?responseHeadersString:null;
},
setRequestHeader:function(a,b){
var c=a.toLowerCase();
if(!state){
a=requestHeadersNames[c]=requestHeadersNames[c]||a;
requestHeaders[a]=b;
}
return this;
},
overrideMimeType:function(a){
if(!state){
s.mimeType=a;
}
return this;
},
statusCode:function(a){
var b;
if(a){
if(state<2){
for(b in a){
statusCode[b]=[statusCode[b],a[b]];
}
}else{
jqXHR.always(a[jqXHR.status]);
}
}
return this;
},
abort:function(a){
var b=a||strAbort;
if(transport){
transport.abort(b);
}
done(0,b);
return this;
}
};
deferred.promise(jqXHR).complete=completeDeferred.add;
jqXHR.success=jqXHR.done;
jqXHR.error=jqXHR.fail;
s.url=((f||s.url||ajaxLocation)+"").replace(rhash,"").replace(rprotocol,ajaxLocParts[1]+"//");
s.type=g.method||g.type||s.method||s.type;
s.dataTypes=jQuery.trim(s.dataType||"*").toLowerCase().match(core_rnotwhite)||[""];
if(s.crossDomain==null){
h=rurl.exec(s.url.toLowerCase());
s.crossDomain=!!(h&&
(h[1]!==ajaxLocParts[1]||h[2]!==ajaxLocParts[2]||
(h[3]||(h[1]==="http:"?80:443))!=
(ajaxLocParts[3]||(ajaxLocParts[1]==="http:"?80:443)))
);
}
if(s.data&&s.processData&&typeof s.data!=="string"){
s.data=jQuery.param(s.data,s.traditional);
}
inspectPrefiltersOrTransports(prefilters,s,g,jqXHR);
if(state===2){
return jqXHR;
}
fireGlobals=s.global;
if(fireGlobals&&jQuery.active++===0){
jQuery.event.trigger("ajaxStart");
}
s.type=s.type.toUpperCase();
s.hasContent=!rnoContent.test(s.type);
cacheURL=s.url;
if(!s.hasContent){
if(s.data){
cacheURL=(s.url+=(ajax_rquery.test(cacheURL)?"&":"?")+s.data);
delete s.data;
}
if(s.cache===false){
s.url=rts.test(cacheURL)?
cacheURL.replace(rts,"$1_="+ajax_nonce++):
cacheURL+(ajax_rquery.test(cacheURL)?"&":"?")+"_="+ajax_nonce++;
}
}
if(s.ifModified){
if(jQuery.lastModified[cacheURL]){
jqXHR.setRequestHeader("If-Modified-Since",jQuery.lastModified[cacheURL]);
}
if(jQuery.etag[cacheURL]){
jqXHR.setRequestHeader("If-None-Match",jQuery.etag[cacheURL]);
}
}
if(s.data&&s.hasContent&&s.contentType!==false||g.contentType){
jqXHR.setRequestHeader("Content-Type",s.contentType);
}
jqXHR.setRequestHeader(
"Accept",
s.dataTypes[0]&&s.accepts[s.dataTypes[0]]?
s.accepts[s.dataTypes[0]]+(s.dataTypes[0]!=="*"?", "+allTypes+"; q=0.01":""):
s.accepts["*"]
);
for(i in s.headers){
jqXHR.setRequestHeader(i,s.headers[i]);
}
if(s.beforeSend&&(s.beforeSend.call(callbackContext,jqXHR,s)===false||state===2)){
return jqXHR.abort();
}
strAbort="abort";
for(i in{success:1,error:1,complete:1}){
jqXHR[i](s[i]);
}
transport=inspectPrefiltersOrTransports(transports,s,g,jqXHR);
if(!transport){
done(-1,"No Transport");
}else{
jqXHR.readyState=1;
if(fireGlobals){
globalEventContext.trigger("ajaxSend",[jqXHR,s]);
}
if(s.async&&s.timeout>0){
timeoutTimer=setTimeout(function(){
jqXHR.abort("timeout");
},s.timeout);
}
try{
state=1;
transport.send(requestHeaders,done);
}catch(e){
if(state<2){
done(-1,e);
}else{
throw e;
}
}
}
function done(a,b,c,d){
var e,success,error,response,modified,
statusText=b;
if(state===2){
return;
}
state=2;
if(timeoutTimer){
clearTimeout(timeoutTimer);
}
transport=u;
responseHeadersString=d||"";
jqXHR.readyState=a>0?4:0;
if(c){
response=ajaxHandleResponses(s,jqXHR,c);
}
if(a>=200&&a<300||a===304){
if(s.ifModified){
modified=jqXHR.getResponseHeader("Last-Modified");
if(modified){
jQuery.lastModified[cacheURL]=modified;
}
modified=jqXHR.getResponseHeader("etag");
if(modified){
jQuery.etag[cacheURL]=modified;
}
}
if(a===204){
e=true;
statusText="nocontent";
}else if(a===304){
e=true;
statusText="notmodified";
}else{
e=ajaxConvert(s,response);
statusText=e.state;
success=e.data;
error=e.error;
e=!error;
}
}else{
error=statusText;
if(a||!statusText){
statusText="error";
if(a<0){
a=0;
}
}
}
jqXHR.status=a;
jqXHR.statusText=(b||statusText)+"";
if(e){
deferred.resolveWith(callbackContext,[success,statusText,jqXHR]);
}else{
deferred.rejectWith(callbackContext,[jqXHR,statusText,error]);
}
jqXHR.statusCode(statusCode);
statusCode=u;
if(fireGlobals){
globalEventContext.trigger(e?"ajaxSuccess":"ajaxError",
[jqXHR,s,e?success:error]);
}
completeDeferred.fireWith(callbackContext,[jqXHR,statusText]);
if(fireGlobals){
globalEventContext.trigger("ajaxComplete",[jqXHR,s]);
if(!(--jQuery.active)){
jQuery.event.trigger("ajaxStop");
}
}
}
return jqXHR;
},
getScript:function(a,b){
return jQuery.get(a,u,b,"script");
},
getJSON:function(a,b,c){
return jQuery.get(a,b,c,"json");
}
});

function ajaxHandleResponses(s,a,b){
var c,ct,finalDataType,type,
contents=s.contents,
dataTypes=s.dataTypes,
responseFields=s.responseFields;
for(type in responseFields){
if(type in b){
a[responseFields[type]]=b[type];
}
}
while(dataTypes[0]==="*"){
dataTypes.shift();
if(ct===u){
ct=s.mimeType||a.getResponseHeader("Content-Type");
}
}
if(ct){
for(type in contents){
if(contents[type]&&contents[type].test(ct)){
dataTypes.unshift(type);
break;
}
}
}
if(dataTypes[0]in b){
finalDataType=dataTypes[0];
}else{
for(type in b){
if(!dataTypes[0]||s.converters[type+" "+dataTypes[0]]){
finalDataType=type;
break;
}
if(!c){
c=type;
}
}
finalDataType=finalDataType||c;
}
if(finalDataType){
if(finalDataType!==dataTypes[0]){
dataTypes.unshift(finalDataType);
}
return b[finalDataType];
}
}
function ajaxConvert(s,a){
var b,current,conv,tmp,
converters={},
i=0,
dataTypes=s.dataTypes.slice(),
prev=dataTypes[0];
if(s.dataFilter){
a=s.dataFilter(a,s.dataType);
}
if(dataTypes[1]){
for(conv in s.converters){
converters[conv.toLowerCase()]=s.converters[conv];
}
}
for(;(current=dataTypes[++i]);){
if(current!=="*"){
if(prev!=="*"&&prev!==current){
conv=converters[prev+" "+current]||converters["* "+current];
if(!conv){
for(b in converters){
tmp=b.split(" ");
if(tmp[1]===current){
conv=converters[prev+" "+tmp[0]]||
converters["* "+tmp[0]];
if(conv){
if(conv===true){
conv=converters[b];
}else if(converters[b]!==true){
current=tmp[0];
dataTypes.splice(i--,0,current);
}
break;
}
}
}
}
if(conv!==true){
if(conv&&s["throws"]){
a=conv(a);
}else{
try{
a=conv(a);
}catch(e){
return{state:"parsererror",error:conv?e:"No conversion from "+prev+" to "+current};
}
}
}
}
prev=current;
}
}
return{state:"success",data:a};
}
jQuery.ajaxSetup({
accepts:{
script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"
},
contents:{
script:/(?:java|ecma)script/
},
converters:{
"text script":function(a){
jQuery.globalEval(a);
return a;
}
}
});
jQuery.ajaxPrefilter("script",function(s){
if(s.cache===u){
s.cache=false;
}
if(s.crossDomain){
s.type="GET";
s.global=false;
}
});
jQuery.ajaxTransport("script",function(s){
if(s.crossDomain){
var c,
head=document.head||jQuery("head")[0]||document.documentElement;
return{
send:function(_,b){
c=document.createElement("script");
c.async=true;
if(s.scriptCharset){
c.charset=s.scriptCharset;
}
c.src=s.url;
c.onload=c.onreadystatechange=function(_,a){
if(a||!c.readyState||/loaded|complete/.test(c.readyState)){
c.onload=c.onreadystatechange=null;
if(c.parentNode){
c.parentNode.removeChild(c);
}
c=null;
if(!a){
b(200,"success");
}
}
};
head.insertBefore(c,head.firstChild);
},
abort:function(){
if(c){
c.onload(u,true);
}
}
};
}
});
var E=[],
rjsonp=/(=)\?(?=&|$)|\?\?/;
jQuery.ajaxSetup({
jsonp:"callback",
jsonpCallback:function(){
var a=E.pop()||(jQuery.expando+"_"+(ajax_nonce++));
this[a]=true;
return a;
}
});
jQuery.ajaxPrefilter("json jsonp",function(s,a,b){
var c,overwritten,responseContainer,
jsonProp=s.jsonp!==false&&(rjsonp.test(s.url)?
"url":
typeof s.data==="string"&&!(s.contentType||"").indexOf("application/x-www-form-urlencoded")&&rjsonp.test(s.data)&&"data"
);
if(jsonProp||s.dataTypes[0]==="jsonp"){
c=s.jsonpCallback=jQuery.isFunction(s.jsonpCallback)?
s.jsonpCallback():
s.jsonpCallback;
if(jsonProp){
s[jsonProp]=s[jsonProp].replace(rjsonp,"$1"+c);
}else if(s.jsonp!==false){
s.url+=(ajax_rquery.test(s.url)?"&":"?")+s.jsonp+"="+c;
}
s.converters["script json"]=function(){
if(!responseContainer){
jQuery.error(c+" was not called");
}
return responseContainer[0];
};
s.dataTypes[0]="json";
overwritten=q[c];
q[c]=function(){
responseContainer=arguments;
};
b.always(function(){
q[c]=overwritten;
if(s[c]){
s.jsonpCallback=a.jsonpCallback;
E.push(c);
}
if(responseContainer&&jQuery.isFunction(overwritten)){
overwritten(responseContainer[0]);
}
responseContainer=overwritten=u;
});
return"script";
}
});
var F,xhrSupported,
xhrId=0,
xhrOnUnloadAbort=q.ActiveXObject&&function(){
var a;
for(a in F){
F[a](u,true);
}
};
function createStandardXHR(){
try{
return new q.XMLHttpRequest();
}catch(e){}
}
function createActiveXHR(){
try{
return new q.ActiveXObject("Microsoft.XMLHTTP");
}catch(e){}
}
jQuery.ajaxSettings.xhr=q.ActiveXObject?

function(){
return!this.isLocal&&createStandardXHR()||createActiveXHR();
}:
createStandardXHR;
xhrSupported=jQuery.ajaxSettings.xhr();
jQuery.support.cors=!!xhrSupported&&("withCredentials"in xhrSupported);
xhrSupported=jQuery.support.ajax=!!xhrSupported;
if(xhrSupported){
jQuery.ajaxTransport(function(s){
if(!s.crossDomain||jQuery.support.cors){
var g;
return{
send:function(c,d){
var f,i,
xhr=s.xhr();
if(s.username){
xhr.open(s.type,s.url,s.async,s.username,s.password);
}else{
xhr.open(s.type,s.url,s.async);
}
if(s.xhrFields){
for(i in s.xhrFields){
xhr[i]=s.xhrFields[i];
}
}
if(s.mimeType&&xhr.overrideMimeType){
xhr.overrideMimeType(s.mimeType);
}
if(!s.crossDomain&&!c["X-Requested-With"]){
c["X-Requested-With"]="XMLHttpRequest";
}
try{
for(i in c){
xhr.setRequestHeader(i,c[i]);
}
}catch(err){}
xhr.send((s.hasContent&&s.data)||null);
g=function(_,a){
var b,responseHeaders,statusText,responses;
try{
if(g&&(a||xhr.readyState===4)){
g=u;
if(f){
xhr.onreadystatechange=jQuery.noop;
if(xhrOnUnloadAbort){
delete F[f];
}
}
if(a){
if(xhr.readyState!==4){
xhr.abort();
}
}else{
responses={};
b=xhr.status;
responseHeaders=xhr.getAllResponseHeaders();
if(typeof xhr.responseText==="string"){
responses.text=xhr.responseText;
}
try{
statusText=xhr.statusText;
}catch(e){
statusText="";
}
if(!b&&s.isLocal&&!s.crossDomain){
b=responses.text?200:404;
}else if(b===1223){
b=204;
}
}
}
}catch(firefoxAccessException){
if(!a){
d(-1,firefoxAccessException);
}
}
if(responses){
d(b,statusText,responses,responseHeaders);
}
};
if(!s.async){
g();
}else if(xhr.readyState===4){
setTimeout(g);
}else{
f=++xhrId;
if(xhrOnUnloadAbort){
if(!F){
F={};
jQuery(q).unload(xhrOnUnloadAbort);
}
F[f]=g;
}
xhr.onreadystatechange=g;
}
},
abort:function(){
if(g){
g(u,true);
}
}
};
}
});
}
var G,timerId,
rfxtypes=/^(?:toggle|show|hide)$/,
rfxnum=new RegExp("^(?:([+-])=|)("+core_pnum+")([a-z%]*)$","i"),
rrun=/queueHooks$/,
animationPrefilters=[defaultPrefilter],
tweeners={
"*":[function(a,b){
var c,unit,
tween=this.createTween(a,b),
parts=rfxnum.exec(b),
target=tween.cur(),
start=+target||0,
scale=1,
maxIterations=20;
if(parts){
c=+parts[2];
unit=parts[3]||(jQuery.cssNumber[a]?"":"px");
if(unit!=="px"&&start){
start=jQuery.css(tween.elem,a,true)||c||1;
do{
scale=scale||".5";
start=start/scale;
jQuery.style(tween.elem,a,start+unit);
}while(scale!==(scale=tween.cur()/target)&&scale!==1&&--maxIterations);
}
tween.unit=unit;
tween.start=start;
tween.end=parts[1]?start+(parts[1]+1)*c:c;
}
return tween;
}]
};
function createFxNow(){
setTimeout(function(){
G=u;
});
return(G=jQuery.now());
}
function createTweens(d,e){
jQuery.each(e,function(a,b){
var c=(tweeners[a]||[]).concat(tweeners["*"]),
index=0,
length=c.length;
for(;index<length;index++){
if(c[index].call(d,a,b)){
return;
}
}
});
}
function Animation(d,e,f){
var g,
stopped,
index=0,
length=animationPrefilters.length,
deferred=jQuery.Deferred().always(function(){
delete tick.elem;
}),
tick=function(){
if(stopped){
return false;
}
var a=G||createFxNow(),
remaining=Math.max(0,animation.startTime+animation.duration-a),
temp=remaining/animation.duration||0,
percent=1-temp,
index=0,
length=animation.tweens.length;
for(;index<length;index++){
animation.tweens[index].run(percent);
}
deferred.notifyWith(d,[animation,percent,remaining]);
if(percent<1&&length){
return remaining;
}else{
deferred.resolveWith(d,[animation]);
return false;
}
},
animation=deferred.promise({
d:d,
props:jQuery.extend({},e),
opts:jQuery.extend(true,{specialEasing:{}},f),
originalProperties:e,
originalOptions:f,
startTime:G||createFxNow(),
duration:f.duration,
tweens:[],
createTween:function(a,b){
var c=jQuery.Tween(d,animation.opts,a,b,
animation.opts.specialEasing[a]||animation.opts.easing);
animation.tweens.push(c);
return c;
},
stop:function(a){
var b=0,
length=a?animation.tweens.length:0;
if(stopped){
return this;
}
stopped=true;
for(;b<length;b++){
animation.tweens[b].run(1);
}
if(a){
deferred.resolveWith(d,[animation,a]);
}else{
deferred.rejectWith(d,[animation,a]);
}
return this;
}
}),
props=animation.props;
propFilter(props,animation.opts.specialEasing);
for(;index<length;index++){
g=animationPrefilters[index].call(animation,d,props,animation.opts);
if(g){
return g;
}
}
createTweens(animation,props);
if(jQuery.isFunction(animation.opts.start)){
animation.opts.start.call(d,animation);
}
jQuery.fx.timer(
jQuery.extend(tick,{
d:d,
anim:animation,
queue:animation.opts.queue
})
);
return animation.progress(animation.opts.progress)
.done(animation.opts.done,animation.opts.complete)
.fail(animation.opts.fail)
.always(animation.opts.always);
}
function propFilter(a,b){
var c,name,index,easing,hooks;
for(index in a){
name=jQuery.camelCase(index);
easing=b[name];
c=a[index];
if(jQuery.isArray(c)){
easing=c[1];
c=a[index]=c[0];
}
if(index!==name){
a[name]=c;
delete a[index];
}
hooks=jQuery.cssHooks[name];
if(hooks&&"expand"in hooks){
c=hooks.expand(c);
delete a[name];
for(index in c){
if(!(index in a)){
a[index]=c[index];
b[index]=easing;
}
}
}else{
b[name]=easing;
}
}
}
jQuery.Animation=jQuery.extend(Animation,{
tweener:function(a,b){
if(jQuery.isFunction(a)){
b=a;
a=["*"];
}else{
a=a.split(" ");
}
var c,
index=0,
length=a.length;
for(;index<length;index++){
c=a[index];
tweeners[c]=tweeners[c]||[];
tweeners[c].unshift(b);
}
},
prefilter:function(a,b){
if(b){
animationPrefilters.unshift(a);
}else{
animationPrefilters.push(a);
}
}
});
function defaultPrefilter(b,c,d){

var e,index,length,
value,dataShow,toggle,
tween,hooks,oldfire,
anim=this,
style=b.style,
orig={},
handled=[],
hidden=b.nodeType&&isHidden(b);
if(!d.queue){
hooks=jQuery._queueHooks(b,"fx");
if(hooks.unqueued==null){
hooks.unqueued=0;
oldfire=hooks.empty.fire;
hooks.empty.fire=function(){
if(!hooks.unqueued){
oldfire();
}
};
}
hooks.unqueued++;
anim.always(function(){
anim.always(function(){
hooks.unqueued--;
if(!jQuery.queue(b,"fx").length){
hooks.empty.fire();
}
});
});
}
if(b.nodeType===1&&("height"in c||"width"in c)){
d.overflow=[style.overflow,style.overflowX,style.overflowY];
if(jQuery.css(b,"display")==="inline"&&
jQuery.css(b,"float")==="none"){
if(!jQuery.support.inlineBlockNeedsLayout||css_defaultDisplay(b.nodeName)==="inline"){
style.display="inline-block";
}else{
style.zoom=1;
}
}
}
if(d.overflow){
style.overflow="hidden";
if(!jQuery.support.shrinkWrapBlocks){
anim.always(function(){
style.overflow=d.overflow[0];
style.overflowX=d.overflow[1];
style.overflowY=d.overflow[2];
});
}
}
for(index in c){
value=c[index];
if(rfxtypes.exec(value)){
delete c[index];
toggle=toggle||value==="toggle";
if(value===(hidden?"hide":"show")){
continue;
}
handled.push(index);
}
}
length=handled.length;
if(length){
dataShow=jQuery._data(b,"fxshow")||jQuery._data(b,"fxshow",{});
if("hidden"in dataShow){
hidden=dataShow.hidden;
}
if(toggle){
dataShow.hidden=!hidden;
}
if(hidden){
jQuery(b).show();
}else{
anim.done(function(){
jQuery(b).hide();
});
}
anim.done(function(){
var a;
jQuery._removeData(b,"fxshow");
for(a in orig){
jQuery.style(b,a,orig[a]);
}
});
for(index=0;index<length;index++){
e=handled[index];
tween=anim.createTween(e,hidden?dataShow[e]:0);
orig[e]=dataShow[e]||jQuery.style(b,e);
if(!(e in dataShow)){
dataShow[e]=tween.start;
if(hidden){
tween.end=tween.start;
tween.start=e==="width"||e==="height"?1:0;
}
}
}
}
}
function Tween(a,b,c,d,e){
return new Tween.prototype.init(a,b,c,d,e);
}
jQuery.Tween=Tween;
Tween.prototype={
constructor:Tween,
init:function(a,b,c,d,e,f){
this.elem=a;
this.prop=c;
this.easing=e||"swing";
this.options=b;
this.start=this.now=this.cur();
this.end=d;
this.unit=f||(jQuery.cssNumber[c]?"":"px");
},
cur:function(){
var a=Tween.propHooks[this.prop];
return a&&a.get?
a.get(this):
Tween.propHooks._default.get(this);
},
run:function(a){
var b,
hooks=Tween.propHooks[this.prop];
if(this.options.duration){
this.pos=b=jQuery.easing[this.easing](
a,this.options.duration*a,0,1,this.options.duration
);
}else{
this.pos=b=a;
}
this.now=(this.end-this.start)*b+this.start;
if(this.options.step){
this.options.step.call(this.elem,this.now,this);
}
if(hooks&&hooks.set){
hooks.set(this);
}else{
Tween.propHooks._default.set(this);
}
return this;
}
};
Tween.prototype.init.prototype=Tween.prototype;
Tween.propHooks={
_default:{
get:function(a){
var b;
if(a.elem[a.prop]!=null&&
(!a.elem.style||a.elem.style[a.prop]==null)){
return a.elem[a.prop];
}
b=jQuery.css(a.elem,a.prop,"");
return!b||b==="auto"?0:b;
},
set:function(a){
if(jQuery.fx.step[a.prop]){
jQuery.fx.step[a.prop](a);
}else if(a.elem.style&&(a.elem.style[jQuery.cssProps[a.prop]]!=null||jQuery.cssHooks[a.prop])){
jQuery.style(a.elem,a.prop,a.now+a.unit);
}else{
a.elem[a.prop]=a.now;
}
}
}
};
Tween.propHooks.scrollTop=Tween.propHooks.scrollLeft={
set:function(a){
if(a.elem.nodeType&&a.elem.parentNode){
a.elem[a.prop]=a.now;
}
}
};
jQuery.each(["toggle","show","hide"],function(i,d){
var e=jQuery.fn[d];
jQuery.fn[d]=function(a,b,c){
return a==null||typeof a==="boolean"?
e.apply(this,arguments):
this.animate(genFx(d,true),a,b,c);
};
});
jQuery.fn.extend({
fadeTo:function(a,b,c,d){
return this.filter(isHidden).css("opacity",0).show()
.end().animate({opacity:b},a,c,d);
},
animate:function(b,c,d,e){
var f=jQuery.isEmptyObject(b),
optall=jQuery.speed(c,d,e),
doAnimation=function(){
var a=Animation(this,jQuery.extend({},b),optall);
doAnimation.finish=function(){
a.stop(true);
};
if(f||jQuery._data(this,"finish")){
a.stop(true);
}
};
doAnimation.finish=doAnimation;
return f||optall.queue===false?
this.each(doAnimation):
this.queue(optall.queue,doAnimation);
},
stop:function(c,d,e){
var f=function(a){
var b=a.stop;
delete a.stop;
b(e);
};
if(typeof c!=="string"){
e=d;
d=c;
c=u;
}
if(d&&c!==false){
this.queue(c||"fx",[]);
}
return this.each(function(){
var a=true,
index=c!=null&&c+"queueHooks",
timers=jQuery.timers,
data=jQuery._data(this);
if(index){
if(data[index]&&data[index].stop){
f(data[index]);
}
}else{
for(index in data){
if(data[index]&&data[index].stop&&rrun.test(index)){
f(data[index]);
}
}
}
for(index=timers.length;index--;){
if(timers[index].elem===this&&(c==null||timers[index].queue===c)){
timers[index].anim.stop(e);
a=false;
timers.splice(index,1);
}
}
if(a||!e){
jQuery.dequeue(this,c);
}
});
},
finish:function(b){
if(b!==false){
b=b||"fx";
}
return this.each(function(){
var a,
data=jQuery._data(this),
queue=data[b+"queue"],
hooks=data[b+"queueHooks"],
timers=jQuery.timers,
length=queue?queue.length:0;
data.finish=true;
jQuery.queue(this,b,[]);
if(hooks&&hooks.cur&&hooks.cur.finish){
hooks.cur.finish.call(this);
}
for(a=timers.length;a--;){
if(timers[a].elem===this&&timers[a].queue===b){
timers[a].anim.stop(true);
timers.splice(a,1);
}
}
for(a=0;a<length;a++){
if(queue[a]&&queue[a].finish){
queue[a].finish.call(this);
}
}
delete data.finish;
});
}
});
function genFx(a,b){
var c,
attrs={height:a},
i=0;
b=b?1:0;
for(;i<4;i+=2-b){
c=cssExpand[i];
attrs["margin"+c]=attrs["padding"+c]=a;
}
if(b){
attrs.opacity=attrs.width=a;
}
return attrs;
}
jQuery.each({
slideDown:genFx("show"),
slideUp:genFx("hide"),
slideToggle:genFx("toggle"),
fadeIn:{opacity:"show"},
fadeOut:{opacity:"hide"},
fadeToggle:{opacity:"toggle"}
},function(d,e){
jQuery.fn[d]=function(a,b,c){
return this.animate(e,a,b,c);
};
});
jQuery.speed=function(a,b,c){
var d=a&&typeof a==="object"?jQuery.extend({},a):{
complete:c||!c&&b||
jQuery.isFunction(a)&&a,
duration:a,
b:c&&b||b&&!jQuery.isFunction(b)&&b
};
d.duration=jQuery.fx.off?0:typeof d.duration==="number"?d.duration:
d.duration in jQuery.fx.speeds?jQuery.fx.speeds[d.duration]:jQuery.fx.speeds._default;
if(d.queue==null||d.queue===true){
d.queue="fx";
}
d.old=d.complete;
d.complete=function(){
if(jQuery.isFunction(d.old)){
d.old.call(this);
}
if(d.queue){
jQuery.dequeue(this,d.queue);
}
};
return d;
};
jQuery.easing={
linear:function(p){
return p;
},
swing:function(p){
return 0.5-Math.cos(p*Math.PI)/2;
}
};
jQuery.timers=[];
jQuery.fx=Tween.prototype.init;
jQuery.fx.tick=function(){
var a,
timers=jQuery.timers,
i=0;
G=jQuery.now();
for(;i<timers.length;i++){
a=timers[i];
if(!a()&&timers[i]===a){
timers.splice(i--,1);
}
}
if(!timers.length){
jQuery.fx.stop();
}
G=u;
};
jQuery.fx.timer=function(a){
if(a()&&jQuery.timers.push(a)){
jQuery.fx.start();
}
};
jQuery.fx.interval=13;
jQuery.fx.start=function(){
if(!timerId){
timerId=setInterval(jQuery.fx.tick,jQuery.fx.interval);
}
};
jQuery.fx.stop=function(){
clearInterval(timerId);
timerId=null;
};
jQuery.fx.speeds={
slow:600,
fast:200,
_default:400
};
jQuery.fx.step={};
if(jQuery.expr&&jQuery.expr.filters){
jQuery.expr.filters.animated=function(b){
return jQuery.grep(jQuery.timers,function(a){
return b===a.elem;
}).length;
};
}
jQuery.fn.offset=function(a){
if(arguments.length){
return a===u?
this:
this.each(function(i){
jQuery.offset.setOffset(this,a,i);
});
}
var b,win,
box={top:0,left:0},
elem=this[0],
doc=elem&&elem.ownerDocument;
if(!doc){
return;
}
b=doc.documentElement;
if(!jQuery.contains(b,elem)){
return box;
}
if(typeof elem.getBoundingClientRect!==core_strundefined){
box=elem.getBoundingClientRect();
}
win=getWindow(doc);
return{
top:box.top+(win.pageYOffset||b.scrollTop)-(b.clientTop||0),
left:box.left+(win.pageXOffset||b.scrollLeft)-(b.clientLeft||0)
};
};
jQuery.offset={
setOffset:function(a,b,i){
var c=jQuery.css(a,"position");
if(c==="static"){
a.style.position="relative";
}
var d=jQuery(a),
curOffset=d.offset(),
curCSSTop=jQuery.css(a,"top"),
curCSSLeft=jQuery.css(a,"left"),
calculatePosition=(c==="absolute"||c==="fixed")&&jQuery.inArray("auto",[curCSSTop,curCSSLeft])>-1,
props={},curPosition={},curTop,curLeft;
if(calculatePosition){
curPosition=d.position();
curTop=curPosition.top;
curLeft=curPosition.left;
}else{
curTop=parseFloat(curCSSTop)||0;
curLeft=parseFloat(curCSSLeft)||0;
}
if(jQuery.isFunction(b)){
b=b.call(a,i,curOffset);
}
if(b.top!=null){
props.top=(b.top-curOffset.top)+curTop;
}
if(b.left!=null){
props.left=(b.left-curOffset.left)+curLeft;
}
if("using"in b){
b.using.call(a,props);
}else{
d.css(props);
}
}
};
jQuery.fn.extend({
position:function(){
if(!this[0]){
return;
}
var a,offset,
parentOffset={top:0,left:0},
elem=this[0];
if(jQuery.css(elem,"position")==="fixed"){
offset=elem.getBoundingClientRect();
}else{
a=this.offsetParent();
offset=this.offset();
if(!jQuery.nodeName(a[0],"html")){
parentOffset=a.offset();
}
parentOffset.top+=jQuery.css(a[0],"borderTopWidth",true);
parentOffset.left+=jQuery.css(a[0],"borderLeftWidth",true);
}
return{
top:offset.top-parentOffset.top-jQuery.css(elem,"marginTop",true),
left:offset.left-parentOffset.left-jQuery.css(elem,"marginLeft",true)
};
},
offsetParent:function(){
return this.map(function(){
var a=this.offsetParent||document.documentElement;
while(a&&(!jQuery.nodeName(a,"html")&&jQuery.css(a,"position")==="static")){
a=a.offsetParent;
}
return a||document.documentElement;
});
}
});
jQuery.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(f,g){
var h=/Y/.test(g);
jQuery.fn[f]=function(e){
return jQuery.access(this,function(a,b,c){
var d=getWindow(a);
if(c===u){
return d?(g in d)?d[g]:
d.document.documentElement[b]:
a[b];
}
if(d){
d.scrollTo(
!h?c:jQuery(d).scrollLeft(),
h?c:jQuery(d).scrollTop()
);
}else{
a[b]=c;
}
},f,e,arguments.length,null);
};
});
function getWindow(a){
return jQuery.isWindow(a)?
a:
a.nodeType===9?
a.defaultView||a.parentWindow:
false;
}
jQuery.each({Height:"height",Width:"width"},function(j,k){
jQuery.each({padding:"inner"+j,content:k,"":"outer"+j},function(h,i){
jQuery.fn[i]=function(e,f){
var g=arguments.length&&(h||typeof e!=="boolean"),
extra=h||(e===true||f===true?"margin":"border");
return jQuery.access(this,function(a,b,c){
var d;
if(jQuery.isWindow(a)){
return a.document.documentElement["client"+j];
}
if(a.nodeType===9){
d=a.documentElement;
return Math.max(
a.body["scroll"+j],d["scroll"+j],
a.body["offset"+j],d["offset"+j],
d["client"+j]
);
}
return c===u?
jQuery.css(a,b,extra):
jQuery.style(a,b,c,extra);
},k,g?e:u,g,null);
};
});
});
q.jQuery=q.$=jQuery;
if(typeof define==="function"&&define.amd&&define.amd.jQuery){
define("jquery",[],function(){return jQuery});
}
})(window);
;

;
var mejs=mejs||{};
mejs.version='2.13.2';
mejs.meIndex=0;
mejs.plugins={
silverlight:[
{version:[3,0],types:['video/mp4','video/m4v','video/mov','video/wmv','audio/wma','audio/m4a','audio/mp3','audio/wav','audio/mpeg']}
],
flash:[
{version:[9,0,124],types:['video/mp4','video/m4v','video/mov','video/flv','video/rtmp','video/x-flv','audio/flv','audio/x-flv','audio/mp3','audio/m4a','audio/mpeg','video/youtube','video/x-youtube']}
],
youtube:[
{version:null,types:['video/youtube','video/x-youtube','audio/youtube','audio/x-youtube']}
],
vimeo:[
{version:null,types:['video/vimeo','video/x-vimeo']}
]
};

mejs.Utility={
encodeUrl:function(a){
return encodeURIComponent(a)},
escapeHTML:function(s){
return s.toString().split('&').join('&amp;').split('<').join('&lt;').split('"').join('&quot;');
},
absolutizeUrl:function(a){
var b=document.createElement('div');
b.innerHTML='<a href="'+this.escapeHTML(a)+'">x</a>';
return b.firstChild.href;
},
getScriptPath:function(a){
var
i=0,
j,
codePath='',
testname='',
slashPos,
filenamePos,
scriptUrl,
scriptPath,
scriptFilename,
scripts=document.getElementsByTagName('script'),
il=scripts.length,
jl=a.length;
for(;i<il;i++){
scriptUrl=scripts[i].src;
slashPos=scriptUrl.lastIndexOf('/');
if(slashPos>-1){
scriptFilename=scriptUrl.substring(slashPos+1);
scriptPath=scriptUrl.substring(0,slashPos+1);
}else{
scriptFilename=scriptUrl;
scriptPath='';
}
for(j=0;j<jl;j++){
testname=a[j];
filenamePos=scriptFilename.indexOf(testname);
if(filenamePos>-1){
codePath=scriptPath;
break;
}
}
if(codePath!==''){
break;
}
}
return codePath;
},
secondsToTimeCode:function(a,b,c,d){
if(typeof c=='undefined'){
c=false;
}else if(typeof d=='undefined'){
d=25;
}
var e=Math.floor(a/3600)%24,
minutes=Math.floor(a/60)%60,
seconds=Math.floor(a%60),
frames=Math.floor(((a%1)*d).toFixed(3)),
result=
((b||e>0)?(e<10?'0'+e:e)+':':'')
+(minutes<10?'0'+minutes:minutes)+':'
+(seconds<10?'0'+seconds:seconds)
+((c)?':'+(frames<10?'0'+frames:frames):'');
return result;
},
timeCodeToSeconds:function(a,b,c,d){
if(typeof c=='undefined'){
c=false;
}else if(typeof d=='undefined'){
d=25;
}
var e=a.split(":"),
tc_hh=parseInt(e[0],10),
tc_mm=parseInt(e[1],10),
tc_ss=parseInt(e[2],10),
tc_ff=0,
tc_in_seconds=0;
if(c){
tc_ff=parseInt(e[3])/d;
}
tc_in_seconds=(tc_hh*3600)+(tc_mm*60)+tc_ss+tc_ff;
return tc_in_seconds;
},
convertSMPTEtoSeconds:function(a){
if(typeof a!='string')
return false;
a=a.replace(',','.');
var b=0,
decimalLen=(a.indexOf('.')!=-1)?a.split('.')[1].length:0,
multiplier=1;
a=a.split(':').reverse();
for(var i=0;i<a.length;i++){
multiplier=1;
if(i>0){
multiplier=Math.pow(60,i);
}
b+=Number(a[i])*multiplier;
}
return Number(b.toFixed(decimalLen));
},

removeSwf:function(a){
var b=document.getElementById(a);
if(b&&/object|embed/i.test(b.nodeName)){
if(mejs.MediaFeatures.isIE){
b.style.display="none";
(function(){
if(b.readyState==4){
mejs.Utility.removeObjectInIE(a);
}else{
setTimeout(arguments.callee,10);
}
})();
}else{
b.parentNode.removeChild(b);
}
}
},
removeObjectInIE:function(a){
var b=document.getElementById(a);
if(b){
for(var i in b){
if(typeof b[i]=="function"){
b[i]=null;
}
}
b.parentNode.removeChild(b);
}
}
};
mejs.PluginDetector={
hasPluginVersion:function(a,v){
var b=this.plugins[a];
v[1]=v[1]||0;
v[2]=v[2]||0;
return(b[0]>v[0]||(b[0]==v[0]&&b[1]>v[1])||(b[0]==v[0]&&b[1]==v[1]&&b[2]>=v[2]))?true:false;
},
nav:window.navigator,
ua:window.navigator.userAgent.toLowerCase(),
plugins:[],
addPlugin:function(p,a,b,c,d){
this.plugins[p]=this.detectPlugin(a,b,c,d);
},
detectPlugin:function(a,b,c,d){
var f=[0,0,0],
description,
i,
ax;
if(typeof(this.nav.plugins)!='undefined'&&typeof this.nav.plugins[a]=='object'){
description=this.nav.plugins[a].description;
if(description&&!(typeof this.nav.mimeTypes!='undefined'&&this.nav.mimeTypes[b]&&!this.nav.mimeTypes[b].enabledPlugin)){
f=description.replace(a,'').replace(/^\s+/,'').replace(/\sr/gi,'.').split('.');
for(i=0;i<f.length;i++){
f[i]=parseInt(f[i].match(/\d+/),10);
}
}
}else if(typeof(window.ActiveXObject)!='undefined'){
try{
ax=new ActiveXObject(c);
if(ax){
f=d(ax);
}
}
catch(e){}
}
return f;
}
};
mejs.PluginDetector.addPlugin('flash','Shockwave Flash','application/x-shockwave-flash','ShockwaveFlash.ShockwaveFlash',function(a){
var b=[],
d=a.GetVariable("$version");
if(d){
d=d.split(" ")[1].split(",");
b=[parseInt(d[0],10),parseInt(d[1],10),parseInt(d[2],10)];
}
return b;
});
mejs.PluginDetector.addPlugin('silverlight','Silverlight Plug-In','application/x-silverlight-2','AgControl.AgControl',function(b){
var v=[0,0,0,0],
loopMatch=function(a,v,i,n){
while(a.isVersionSupported(v[0]+"."+v[1]+"."+v[2]+"."+v[3])){
v[i]+=n;
}
v[i]-=n;
};
loopMatch(b,v,0,1);
loopMatch(b,v,1,1);
loopMatch(b,v,2,10000);loopMatch(b,v,2,1000);
loopMatch(b,v,2,100);
loopMatch(b,v,2,10);
loopMatch(b,v,2,1);
loopMatch(b,v,3,1);
return v;
});

mejs.MediaFeatures={
init:function(){
var
t=this,
d=document,
nav=mejs.PluginDetector.nav,
ua=mejs.PluginDetector.ua.toLowerCase(),
i,
v,
html5Elements=['source','track','audio','video'];
t.isiPad=(ua.match(/ipad/i)!==null);
t.isiPhone=(ua.match(/iphone/i)!==null);
t.isiOS=t.isiPhone||t.isiPad;
t.isAndroid=(ua.match(/android/i)!==null);
t.isBustedAndroid=(ua.match(/android 2\.[12]/)!==null);
t.isBustedNativeHTTPS=(location.protocol==='https:'&&(ua.match(/android [12]\./)!==null||ua.match(/macintosh.* version.* safari/)!==null));
t.isIE=(nav.appName.toLowerCase().indexOf("microsoft")!=-1||nav.appName.toLowerCase().match(/trident/gi)!==null);
t.isChrome=(ua.match(/chrome/gi)!==null);
t.isFirefox=(ua.match(/firefox/gi)!==null);
t.isWebkit=(ua.match(/webkit/gi)!==null);
t.isGecko=(ua.match(/gecko/gi)!==null)&&!t.isWebkit&&!t.isIE;
t.isOpera=(ua.match(/opera/gi)!==null);
t.hasTouch=('ontouchstart'in window);t.svg=!!document.createElementNS&&
!!document.createElementNS('http://www.w3.org/2000/svg','svg').createSVGRect;
for(i=0;i<html5Elements.length;i++){
v=document.createElement(html5Elements[i]);
}
t.supportsMediaTag=(typeof v.canPlayType!=='undefined'||t.isBustedAndroid);
try{
v.canPlayType("video/mp4");
}catch(e){
t.supportsMediaTag=false;
}
t.hasSemiNativeFullScreen=(typeof v.webkitEnterFullscreen!=='undefined');
t.hasNativeFullscreen=(typeof v.requestFullscreen!=='undefined');
t.hasWebkitNativeFullScreen=(typeof v.webkitRequestFullScreen!=='undefined');
t.hasMozNativeFullScreen=(typeof v.mozRequestFullScreen!=='undefined');
t.hasMsNativeFullScreen=(typeof v.msRequestFullscreen!=='undefined');
t.hasTrueNativeFullScreen=(t.hasWebkitNativeFullScreen||t.hasMozNativeFullScreen||t.hasMsNativeFullScreen);
t.nativeFullScreenEnabled=t.hasTrueNativeFullScreen;
if(t.hasMozNativeFullScreen){
t.nativeFullScreenEnabled=document.mozFullScreenEnabled;
}else if(t.hasMsNativeFullScreen){
t.nativeFullScreenEnabled=document.msFullscreenEnabled;
}
if(t.isChrome){
t.hasSemiNativeFullScreen=false;
}
if(t.hasTrueNativeFullScreen){
t.fullScreenEventName='';
if(t.hasWebkitNativeFullScreen){
t.fullScreenEventName='webkitfullscreenchange';
}else if(t.hasMozNativeFullScreen){
t.fullScreenEventName='mozfullscreenchange';
}else if(t.hasMsNativeFullScreen){
t.fullScreenEventName='MSFullscreenChange';
}
t.isFullScreen=function(){
if(v.mozRequestFullScreen){
return d.mozFullScreen;
}else if(v.webkitRequestFullScreen){
return d.webkitIsFullScreen;
}else if(v.hasMsNativeFullScreen){
return d.msFullscreenElement!==null;
}
}
t.requestFullScreen=function(a){
if(t.hasWebkitNativeFullScreen){
a.webkitRequestFullScreen();
}else if(t.hasMozNativeFullScreen){
a.mozRequestFullScreen();
}else if(t.hasMsNativeFullScreen){
a.msRequestFullscreen();
}
}
t.cancelFullScreen=function(){
if(t.hasWebkitNativeFullScreen){
document.webkitCancelFullScreen();
}else if(t.hasMozNativeFullScreen){
document.mozCancelFullScreen();
}else if(t.hasMsNativeFullScreen){
document.msExitFullscreen();
}
}
}
if(t.hasSemiNativeFullScreen&&ua.match(/mac os x 10_5/i)){
t.hasNativeFullScreen=false;
t.hasSemiNativeFullScreen=false;
}
}
};
mejs.MediaFeatures.init();

mejs.HtmlMediaElement={
pluginType:'native',
isFullScreen:false,
setCurrentTime:function(a){
this.currentTime=a;
},
setMuted:function(a){
this.muted=a;
},
setVolume:function(a){
this.volume=a;
},
stop:function(){
this.pause();
},
setSrc:function(a){
var b=this.getElementsByTagName('source');
while(b.length>0){
this.removeChild(b[0]);
}
var b=this.getElementsByTagName('object');
while(b.length>0){
this.removeChild(b[0]);
}
this.pause();
if(typeof a=='string'){
this.src=a;
}else{
var i,media;
for(i=0;i<a.length;i++){
media=a[i];
if(this.canPlayType(media.type)){
this.src=media.src;
break;
}
}
}
$(this).load()},
setVideoSize:function(a,b){
this.width=a;
this.height=b;
}
};

mejs.PluginMediaElement=function(a,b,c){
this.id=a;
this.pluginType=b;
this.src=c;
this.events={};
this.attributes={};
};
mejs.PluginMediaElement.prototype={
pluginElement:null,
pluginType:'',
isFullScreen:false,
playbackRate:-1,
defaultPlaybackRate:-1,
seekable:[],
played:[],
paused:true,
ended:false,
seeking:false,
duration:0,
error:null,
tagName:'',
muted:false,
volume:1,
currentTime:0,
play:function(){
if(this.pluginApi!=null){
if(this.pluginType=='youtube'){
this.pluginApi.playSong();
}else{
this.pluginApi.playMedia();
}
this.paused=false;
}
},
load:function(){
if(this.pluginApi!=null){
if(this.pluginType=='youtube'){
}else{
this.pluginApi.loadMedia();
}
this.paused=false;
}
},
pause:function(){
if(this.pluginApi!=null){
if(this.pluginType=='youtube'){
this.pluginApi.pauseSong();
}else{
this.pluginApi.pauseMedia();
}
this.paused=true;
}
},
stop:function(){
if(this.pluginApi!=null){
if(this.pluginType=='youtube'){
this.pluginApi.stopVideo();
}else{
this.pluginApi.stopMedia();
}
this.paused=true;
}
},
canPlayType:function(a){
var i,
j,
pluginInfo,
pluginVersions=mejs.plugins[this.pluginType];
for(i=0;i<pluginVersions.length;i++){
pluginInfo=pluginVersions[i];
if(mejs.PluginDetector.hasPluginVersion(this.pluginType,pluginInfo.version)){
for(j=0;j<pluginInfo.types.length;j++){
if(a==pluginInfo.types[j]){
return'probably';
}
}
}
}
return'';
},
positionFullscreenButton:function(x,y,a){
if(this.pluginApi!=null&&this.pluginApi.positionFullscreenButton){
this.pluginApi.positionFullscreenButton(Math.floor(x),Math.floor(y),a);
}
},
hideFullscreenButton:function(){
if(this.pluginApi!=null&&this.pluginApi.hideFullscreenButton){
this.pluginApi.hideFullscreenButton();
}
},
setSrc:function(a){
if(typeof a=='string'){
this.pluginApi.setSrc(mejs.Utility.absolutizeUrl(a));
this.src=mejs.Utility.absolutizeUrl(a);
}else{
var i,media;
for(i=0;i<a.length;i++){
media=a[i];
if(this.canPlayType(media.type)){
this.pluginApi.setSrc(mejs.Utility.absolutizeUrl(media.src));
this.src=mejs.Utility.absolutizeUrl(a);
break;
}
}
}
},
setCurrentTime:function(a){
if(this.pluginApi!=null){
if(this.pluginType=='youtube'){
this.pluginApi.seekTo(a);
}else{
this.pluginApi.setCurrentTime(a);
}
this.currentTime=a;
}
},
setVolume:function(a){
if(this.pluginApi!=null){
if(this.pluginType=='youtube'){
this.pluginApi.setVolume(a*100);
}else{
this.pluginApi.setVolume(a);
}
this.volume=a;
}
},
setMuted:function(a){
if(this.pluginApi!=null){
if(this.pluginType=='youtube'){
if(a){
this.pluginApi.mute();
}else{
this.pluginApi.unMute();
}
this.muted=a;
this.dispatchEvent('volumechange');
}else{
this.pluginApi.setMuted(a);
}
this.muted=a;
}
},
setVideoSize:function(a,b){
if(this.pluginElement.style){
this.pluginElement.style.width=a+'px';
this.pluginElement.style.height=b+'px';
}
if(this.pluginApi!=null&&this.pluginApi.setVideoSize){
this.pluginApi.setVideoSize(a,b);
}
},
setFullscreen:function(a){
if(this.pluginApi!=null&&this.pluginApi.setFullscreen){
this.pluginApi.setFullscreen(a);
}
},
enterFullScreen:function(){
if(this.pluginApi!=null&&this.pluginApi.setFullscreen){
this.setFullscreen(true);
}
},
exitFullScreen:function(){
if(this.pluginApi!=null&&this.pluginApi.setFullscreen){
this.setFullscreen(false);
}
},
addEventListener:function(a,b,c){
this.events[a]=this.events[a]||[];
this.events[a].push(b);
},
removeEventListener:function(a,b){
if(!a){this.events={};return true}
var c=this.events[a];
if(!c)return true;
if(!b){this.events[a]=[];return true}
for(i=0;i<c.length;i++){
if(c[i]===b){
this.events[a].splice(i,1);
return true;
}
}
return false;
},
dispatchEvent:function(a){
var i,
args,
callbacks=this.events[a];
if(callbacks){
args=Array.prototype.slice.call(arguments,1);
for(i=0;i<callbacks.length;i++){
callbacks[i].apply(null,args);
}
}
},
hasAttribute:function(a){
return(a in this.attributes);
},
removeAttribute:function(a){
delete this.attributes[a];
},
getAttribute:function(a){
if(this.hasAttribute(a)){
return this.attributes[a];
}
return'';
},
setAttribute:function(a,b){
this.attributes[a]=b;
},
remove:function(){
mejs.Utility.removeSwf(this.pluginElement.id);
mejs.MediaPluginBridge.unregisterPluginElement(this.pluginElement.id);
}
};
mejs.MediaPluginBridge={
pluginMediaElements:{},
htmlMediaElements:{},
registerPluginElement:function(a,b,c){
this.pluginMediaElements[a]=b;
this.htmlMediaElements[a]=c;
},
unregisterPluginElement:function(a){
delete this.pluginMediaElements[a];
delete this.htmlMediaElements[a];
},
initPlugin:function(a){
var b=this.pluginMediaElements[a],
htmlMediaElement=this.htmlMediaElements[a];
if(b){
switch(b.pluginType){
case"flash":
b.pluginElement=b.pluginApi=document.getElementById(a);
break;
case"silverlight":
b.pluginElement=document.getElementById(b.id);
b.pluginApi=b.pluginElement.Content.MediaElementJS;
break;
}
if(b.pluginApi!=null&&b.success){
b.success(b,htmlMediaElement);
}
}
},
fireEvent:function(b,c,d){
var
e,
i,
bufferedTime,
pluginMediaElement=this.pluginMediaElements[b];
if(!pluginMediaElement){
return;
}
e={
type:c,
target:pluginMediaElement
};
for(i in d){
pluginMediaElement[i]=d[i];
e[i]=d[i];
}
bufferedTime=d.bufferedTime||0;
e.target.buffered=e.buffered={
start:function(a){
return 0;
},
end:function(a){
return bufferedTime;
},
length:1
};
pluginMediaElement.dispatchEvent(e.type,e);
}
};

mejs.MediaElementDefaults={
mode:'auto',
plugins:['flash','silverlight','youtube','vimeo'],
enablePluginDebug:false,
httpsBasicAuthSite:false,
type:'',
pluginPath:mejs.Utility.getScriptPath(['mediaelement.js','mediaelement.min.js','mediaelement-and-player.js','mediaelement-and-player.min.js']),
flashName:'flashmediaelement.swf',
flashStreamer:'',
enablePluginSmoothing:false,
enablePseudoStreaming:false,
pseudoStreamingStartQueryParam:'start',
silverlightName:'silverlightmediaelement.xap',
defaultVideoWidth:480,
defaultVideoHeight:270,
pluginWidth:-1,
pluginHeight:-1,
pluginVars:[],
timerRate:250,
startVolume:0.8,
success:function(){},
error:function(){}
};

mejs.MediaElement=function(a,o){
return mejs.HtmlMediaElementShim.create(a,o);
};
mejs.HtmlMediaElementShim={
create:function(a,o){
var
options=mejs.MediaElementDefaults,
htmlMediaElement=(typeof(a)=='string')?document.getElementById(a):a,
tagName=htmlMediaElement.tagName.toLowerCase(),
isMediaTag=(tagName==='audio'||tagName==='video'),
src=(isMediaTag)?htmlMediaElement.getAttribute('src'):htmlMediaElement.getAttribute('href'),
poster=htmlMediaElement.getAttribute('poster'),
autoplay=htmlMediaElement.getAttribute('autoplay'),
preload=htmlMediaElement.getAttribute('preload'),
controls=htmlMediaElement.getAttribute('controls'),
playback,
prop;
for(prop in o){
options[prop]=o[prop];
}
src=(typeof src=='undefined'||src===null||src=='')?null:src;
poster=(typeof poster=='undefined'||poster===null)?'':poster;
preload=(typeof preload=='undefined'||preload===null||preload==='false')?'none':preload;
autoplay=!(typeof autoplay=='undefined'||autoplay===null||autoplay==='false');
controls=!(typeof controls=='undefined'||controls===null||controls==='false');
playback=this.determinePlayback(htmlMediaElement,options,mejs.MediaFeatures.supportsMediaTag,isMediaTag,src);
playback.url=(playback.url!==null)?mejs.Utility.absolutizeUrl(playback.url):'';
if(playback.method=='native'){
if(mejs.MediaFeatures.isBustedAndroid){
htmlMediaElement.src=playback.url;
htmlMediaElement.addEventListener('click',function(){
htmlMediaElement.play();
},false);
}
return this.updateNative(playback,options,autoplay,preload);
}else if(playback.method!==''){
return this.createPlugin(playback,options,poster,autoplay,preload,controls);
}else{
this.createErrorMessage(playback,options,poster);
return this;
}
},
determinePlayback:function(b,c,d,e,f){
var
mediaFiles=[],
i,
j,
k,
l,
n,
type,
result={method:'',url:'',htmlMediaElement:b,isVideo:(b.tagName.toLowerCase()!='audio')},
pluginName,
pluginVersions,
pluginInfo,
dummy,
media;
if(typeof c.type!='undefined'&&c.type!==''){
if(typeof c.type=='string'){
mediaFiles.push({type:c.type,url:f});
}else{
for(i=0;i<c.type.length;i++){
mediaFiles.push({type:c.type[i],url:f});
}
}
}else if(f!==null){
type=this.formatType(f,b.getAttribute('type'));
mediaFiles.push({type:type,url:f});
}else{
for(i=0;i<b.childNodes.length;i++){
n=b.childNodes[i];
if(n.nodeType==1&&n.tagName.toLowerCase()=='source'){
f=n.getAttribute('src');
type=this.formatType(f,n.getAttribute('type'));
media=n.getAttribute('media');
if(!media||!window.matchMedia||(window.matchMedia&&window.matchMedia(media).matches)){
mediaFiles.push({type:type,url:f});
}
}
}
}
if(!e&&mediaFiles.length>0&&mediaFiles[0].url!==null&&this.getTypeFromFile(mediaFiles[0].url).indexOf('audio')>-1){
result.isVideo=false;
}
if(mejs.MediaFeatures.isBustedAndroid){
b.canPlayType=function(a){
return(a.match(/video\/(mp4|m4v)/gi)!==null)?'maybe':'';
};
}
if(d&&(c.mode==='auto'||c.mode==='auto_plugin'||c.mode==='native')&&!(mejs.MediaFeatures.isBustedNativeHTTPS&&c.httpsBasicAuthSite===true)){
if(!e){
dummy=document.createElement(result.isVideo?'video':'audio');
b.parentNode.insertBefore(dummy,b);
b.style.display='none';
result.htmlMediaElement=b=dummy;
}
for(i=0;i<mediaFiles.length;i++){
if(b.canPlayType(mediaFiles[i].type).replace(/no/,'')!==''
||b.canPlayType(mediaFiles[i].type.replace(/mp3/,'mpeg')).replace(/no/,'')!==''){
result.method='native';
result.url=mediaFiles[i].url;
break;
}
}
if(result.method==='native'){
if(result.url!==null){
b.src=result.url;
}
if(c.mode!=='auto_plugin'){
return result;
}
}
}
if(c.mode==='auto'||c.mode==='auto_plugin'||c.mode==='shim'){
for(i=0;i<mediaFiles.length;i++){
type=mediaFiles[i].type;
for(j=0;j<c.plugins.length;j++){
pluginName=c.plugins[j];
pluginVersions=mejs.plugins[pluginName];
for(k=0;k<pluginVersions.length;k++){
pluginInfo=pluginVersions[k];
if(pluginInfo.version==null||
mejs.PluginDetector.hasPluginVersion(pluginName,pluginInfo.version)){
for(l=0;l<pluginInfo.types.length;l++){
if(type==pluginInfo.types[l]){
result.method=pluginName;
result.url=mediaFiles[i].url;
return result;
}
}
}
}
}
}
}
if(c.mode==='auto_plugin'&&result.method==='native'){
return result;
}
if(result.method===''&&mediaFiles.length>0){
result.url=mediaFiles[0].url;
}
return result;
},
formatType:function(a,b){
var c;
if(a&&!b){
return this.getTypeFromFile(a);
}else{
if(b&&~b.indexOf(';')){
return b.substr(0,b.indexOf(';'));
}else{
return b;
}
}
},
getTypeFromFile:function(a){
a=a.split('?')[0];
var b=a.substring(a.lastIndexOf('.')+1).toLowerCase();
return(/(mp4|m4v|ogg|ogv|webm|webmv|flv|wmv|mpeg|mov)/gi.test(b)?'video':'audio')+'/'+this.getTypeFromExtension(b);
},
getTypeFromExtension:function(a){
switch(a){
case'mp4':
case'm4v':
return'mp4';
case'webm':
case'webma':
case'webmv':
return'webm';
case'ogg':
case'oga':
case'ogv':
return'ogg';
default:
return a;
}
},
createErrorMessage:function(a,b,c){
var
htmlMediaElement=a.htmlMediaElement,
errorContainer=document.createElement('div');
errorContainer.className='me-cannotplay';
try{
errorContainer.style.width=htmlMediaElement.width+'px';
errorContainer.style.height=htmlMediaElement.height+'px';
}catch(e){}
if(b.customError){
errorContainer.innerHTML=b.customError;
}else{
errorContainer.innerHTML=(c!=='')?
'<a href="'+a.url+'"><img src="'+c+'" width="100%" height="100%" /></a>':
'<a href="'+a.url+'"><span>'+mejs.i18n.t('Download File')+'</span></a>';
}
htmlMediaElement.parentNode.insertBefore(errorContainer,htmlMediaElement);
htmlMediaElement.style.display='none';
b.error(htmlMediaElement);
},
createPlugin:function(a,b,c,d,e,f){
var
htmlMediaElement=a.htmlMediaElement,
width=1,
height=1,
pluginid='me_'+a.method+'_'+(mejs.meIndex++),
pluginMediaElement=new mejs.PluginMediaElement(pluginid,a.method,a.url),
container=document.createElement('div'),
specialIEContainer,
node,
initVars;
pluginMediaElement.tagName=htmlMediaElement.tagName
for(var i=0;i<htmlMediaElement.attributes.length;i++){
var g=htmlMediaElement.attributes[i];
if(g.specified==true){
pluginMediaElement.setAttribute(g.name,g.value);
}
}
node=htmlMediaElement.parentNode;
while(node!==null&&node.tagName.toLowerCase()!='body'){
if(node.parentNode.tagName.toLowerCase()=='p'){
node.parentNode.parentNode.insertBefore(node,node.parentNode);
break;
}
node=node.parentNode;
}
if(a.isVideo){
width=(b.pluginWidth>0)?b.pluginWidth:(b.videoWidth>0)?b.videoWidth:(htmlMediaElement.getAttribute('width')!==null)?htmlMediaElement.getAttribute('width'):b.defaultVideoWidth;
height=(b.pluginHeight>0)?b.pluginHeight:(b.videoHeight>0)?b.videoHeight:(htmlMediaElement.getAttribute('height')!==null)?htmlMediaElement.getAttribute('height'):b.defaultVideoHeight;
width=mejs.Utility.encodeUrl(width);
height=mejs.Utility.encodeUrl(height);
}else{
if(b.enablePluginDebug){
width=320;
height=240;
}
}
pluginMediaElement.success=b.success;
mejs.MediaPluginBridge.registerPluginElement(pluginid,pluginMediaElement,htmlMediaElement);
container.className='me-plugin';
container.id=pluginid+'_container';
if(a.isVideo){
htmlMediaElement.parentNode.insertBefore(container,htmlMediaElement);
}else{
document.body.insertBefore(container,document.body.childNodes[0]);
}
initVars=[
'id='+pluginid,
'isvideo='+((a.isVideo)?"true":"false"),
'autoplay='+((d)?"true":"false"),
'preload='+e,
'width='+width,
'startvolume='+b.startVolume,
'timerrate='+b.timerRate,
'flashstreamer='+b.flashStreamer,
'height='+height,
'pseudostreamstart='+b.pseudoStreamingStartQueryParam];
if(a.url!==null){
if(a.method=='flash'){
initVars.push('file='+mejs.Utility.encodeUrl(a.url));
}else{
initVars.push('file='+a.url);
}
}
if(b.enablePluginDebug){
initVars.push('debug=true');
}
if(b.enablePluginSmoothing){
initVars.push('smoothing=true');
}
if(b.enablePseudoStreaming){
initVars.push('pseudostreaming=true');
}
if(f){
initVars.push('controls=true')}
if(b.pluginVars){
initVars=initVars.concat(b.pluginVars);
}
switch(a.method){
case'silverlight':
container.innerHTML=
'<object data="data:application/x-silverlight-2," type="application/x-silverlight-2" id="'+pluginid+'" name="'+pluginid+'" width="'+width+'" height="'+height+'" class="mejs-shim">'+
'<param name="initParams" value="'+initVars.join(',')+'" />'+
'<param name="windowless" value="true" />'+
'<param name="background" value="black" />'+
'<param name="minRuntimeVersion" value="3.0.0.0" />'+
'<param name="autoUpgrade" value="true" />'+
'<param name="source" value="'+b.pluginPath+b.silverlightName+'" />'+
'</object>';
break;
case'flash':
if(mejs.MediaFeatures.isIE){
specialIEContainer=document.createElement('div');
container.appendChild(specialIEContainer);
specialIEContainer.outerHTML=
'<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" codebase="//download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab" '+
'id="'+pluginid+'" width="'+width+'" height="'+height+'" class="mejs-shim">'+
'<param name="movie" value="'+b.pluginPath+b.flashName+'?x='+(new Date())+'" />'+
'<param name="flashvars" value="'+initVars.join('&amp;')+'" />'+
'<param name="quality" value="high" />'+
'<param name="bgcolor" value="#000000" />'+
'<param name="wmode" value="transparent" />'+
'<param name="allowScriptAccess" value="always" />'+
'<param name="allowFullScreen" value="true" />'+
'<param name="scale" value="default" />'+
'</object>';
}else{
container.innerHTML=
'<embed id="'+pluginid+'" name="'+pluginid+'" '+
'play="true" '+
'loop="false" '+
'quality="high" '+
'bgcolor="#000000" '+
'wmode="transparent" '+
'allowScriptAccess="always" '+
'allowFullScreen="true" '+
'type="application/x-shockwave-flash" pluginspage="//www.macromedia.com/go/getflashplayer" '+
'src="'+b.pluginPath+b.flashName+'" '+
'flashvars="'+initVars.join('&')+'" '+
'width="'+width+'" '+
'height="'+height+'" '+
'scale="default"'+
'class="mejs-shim"></embed>';
}
break;
case'youtube':
var
videoId=a.url.substr(a.url.lastIndexOf('=')+1);
youtubeSettings={
container:container,
containerId:container.id,
pluginMediaElement:pluginMediaElement,
pluginId:pluginid,
videoId:videoId,
height:height,
width:width
};
if(mejs.PluginDetector.hasPluginVersion('flash',[10,0,0])){
mejs.YouTubeApi.createFlash(youtubeSettings);
}else{
mejs.YouTubeApi.enqueueIframe(youtubeSettings);
}
break;
case'vimeo':
pluginMediaElement.vimeoid=a.url.substr(a.url.lastIndexOf('/')+1);
container.innerHTML='<iframe src="http://player.vimeo.com/video/'+pluginMediaElement.vimeoid+'?portrait=0&byline=0&title=0" width="'+width+'" height="'+height+'" frameborder="0" class="mejs-shim"></iframe>';

break;
}
htmlMediaElement.style.display='none';
htmlMediaElement.removeAttribute('autoplay');
return pluginMediaElement;
},
updateNative:function(a,b,c,d){
var e=a.htmlMediaElement,
m;
for(m in mejs.HtmlMediaElement){
e[m]=mejs.HtmlMediaElement[m];
}

b.success(e,e);
return e;
}
};

mejs.YouTubeApi={
isIframeStarted:false,
isIframeLoaded:false,
loadIframeApi:function(){
if(!this.isIframeStarted){
var a=document.createElement('script');
a.src="//www.youtube.com/player_api";
var b=document.getElementsByTagName('script')[0];
b.parentNode.insertBefore(a,b);
this.isIframeStarted=true;
}
},
iframeQueue:[],
enqueueIframe:function(a){
if(this.isLoaded){
this.createIframe(a);
}else{
this.loadIframeApi();
this.iframeQueue.push(a);
}
},
createIframe:function(a){
var
pluginMediaElement=a.pluginMediaElement,
player=new YT.Player(a.containerId,{
height:a.height,
width:a.width,
videoId:a.videoId,
playerVars:{controls:0},
events:{
'onReady':function(){
a.pluginMediaElement.pluginApi=player;
mejs.MediaPluginBridge.initPlugin(a.pluginId);
setInterval(function(){
mejs.YouTubeApi.createEvent(player,pluginMediaElement,'timeupdate');
},250);
},
'onStateChange':function(e){
mejs.YouTubeApi.handleStateChange(e.data,player,pluginMediaElement);
}
}
});
},
createEvent:function(b,c,d){
var e={
type:d,
target:c
};
if(b&&b.getDuration){
c.currentTime=e.currentTime=b.getCurrentTime();
c.duration=e.duration=b.getDuration();
e.paused=c.paused;
e.ended=c.ended;
e.muted=b.isMuted();
e.volume=b.getVolume()/100;
e.bytesTotal=b.getVideoBytesTotal();
e.bufferedBytes=b.getVideoBytesLoaded();
var f=e.bufferedBytes/e.bytesTotal*e.duration;
e.target.buffered=e.buffered={
start:function(a){
return 0;
},
end:function(a){
return f;
},
length:1
};
}
c.dispatchEvent(e.type,e);
},
iFrameReady:function(){
this.isLoaded=true;
this.isIframeLoaded=true;
while(this.iframeQueue.length>0){
var a=this.iframeQueue.pop();
this.createIframe(a);
}
},
flashPlayers:{},
createFlash:function(a){
this.flashPlayers[a.pluginId]=a;

var b,
youtubeUrl='//www.youtube.com/apiplayer?enablejsapi=1&amp;playerapiid='+a.pluginId+'&amp;version=3&amp;autoplay=0&amp;controls=0&amp;modestbranding=1&loop=0';
if(mejs.MediaFeatures.isIE){
b=document.createElement('div');
a.container.appendChild(b);
b.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" codebase="//download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab" '+
'id="'+a.pluginId+'" width="'+a.width+'" height="'+a.height+'" class="mejs-shim">'+
'<param name="movie" value="'+youtubeUrl+'" />'+
'<param name="wmode" value="transparent" />'+
'<param name="allowScriptAccess" value="always" />'+
'<param name="allowFullScreen" value="true" />'+
'</object>';
}else{
a.container.innerHTML=
'<object type="application/x-shockwave-flash" id="'+a.pluginId+'" data="'+youtubeUrl+'" '+
'width="'+a.width+'" height="'+a.height+'" style="visibility: visible; " class="mejs-shim">'+
'<param name="allowScriptAccess" value="always">'+
'<param name="wmode" value="transparent">'+
'</object>';
}
},
flashReady:function(a){
var
settings=this.flashPlayers[a],
player=document.getElementById(a),
pluginMediaElement=settings.pluginMediaElement;
pluginMediaElement.pluginApi=
pluginMediaElement.pluginElement=player;
mejs.MediaPluginBridge.initPlugin(a);
player.cueVideoById(settings.videoId);
var b=settings.containerId+'_callback';
window[b]=function(e){
mejs.YouTubeApi.handleStateChange(e,player,pluginMediaElement);
}
player.addEventListener('onStateChange',b);
setInterval(function(){
mejs.YouTubeApi.createEvent(player,pluginMediaElement,'timeupdate');
},250);
},
handleStateChange:function(a,b,c){
switch(a){
case-1:c.paused=true;
c.ended=true;
mejs.YouTubeApi.createEvent(b,c,'loadedmetadata');
break;
case 0:
c.paused=false;
c.ended=true;
mejs.YouTubeApi.createEvent(b,c,'ended');
break;
case 1:
c.paused=false;
c.ended=false;
mejs.YouTubeApi.createEvent(b,c,'play');
mejs.YouTubeApi.createEvent(b,c,'playing');
break;
case 2:
c.paused=true;
c.ended=false;
mejs.YouTubeApi.createEvent(b,c,'pause');
break;
case 3:mejs.YouTubeApi.createEvent(b,c,'progress');
break;
case 5:
break;
}
}
}
function onYouTubePlayerAPIReady(){
mejs.YouTubeApi.iFrameReady();
}
function onYouTubePlayerReady(a){
mejs.YouTubeApi.flashReady(a);
}
window.mejs=mejs;
window.MediaElement=mejs.MediaElement;

;(function(d,e,f){
"use strict";
var g={
"locale":{
"language":'',
"strings":{}
},
"methods":{}
};

g.getLanguage=function(){
var a=g.locale.language||window.navigator.userLanguage||window.navigator.language;
return a.substr(0,2).toLowerCase();
};
if(typeof mejsL10n!='undefined'){
g.locale.language=mejsL10n.language;
}

g.methods.checkPlain=function(a){
var b,regex,
replace={
'&':'&amp;',
'"':'&quot;',
'<':'&lt;',
'>':'&gt;'
};
a=String(a);
for(b in replace){
if(replace.hasOwnProperty(b)){
regex=new RegExp(b,'g');
a=a.replace(regex,replace[b]);
}
}
return a;
};

g.methods.t=function(a,b){
if(g.locale.strings&&g.locale.strings[b.context]&&g.locale.strings[b.context][a]){
a=g.locale.strings[b.context][a];
}
return g.methods.checkPlain(a);
};

g.t=function(a,b){
if(typeof a==='string'&&a.length>0){
var c=g.getLanguage();
b=b||{
"context":c
};
return g.methods.t(a,b);
}
else{
throw{
"name":'InvalidArgumentException',
"message":'First argument is either not a string or empty.'
};
}
};
e.i18n=g;
}(document,mejs));
;(function(a,b){
"use strict";
if(typeof mejsL10n!='undefined'){
a[mejsL10n.language]=mejsL10n.strings;
}
}(mejs.i18n.locale.strings));

;(function(a,b){
"use strict";
if(typeof a.de==='undefined'){
a.de={
"Fullscreen":"Fullscreen",
"Go Fullscreen":"Fullscreen on",
"Turn off Fullscreen":"Fullscreen off",
"Close":"Schließen"
};
}
}(mejs.i18n.locale.strings));

;(function(a,b){
"use strict";
if(typeof a.zh==='undefined'){
a.zh={
"Fullscreen":"全螢幕",
"Go Fullscreen":"全屏模式",
"Turn off Fullscreen":"退出全屏模式",
"Close":"關閉"
};
}
}(mejs.i18n.locale.strings));

if(typeof jQuery!='undefined'){
mejs.$=jQuery;
}else if(typeof ender!='undefined'){
mejs.$=ender;
}
(function($){
mejs.MepDefaults={
poster:'',
showPosterWhenEnded:false,
defaultVideoWidth:480,
defaultVideoHeight:270,
videoWidth:-1,
videoHeight:-1,
defaultAudioWidth:400,
defaultAudioHeight:30,
defaultSeekBackwardInterval:function(a){
return(a.duration*0.05);
},
defaultSeekForwardInterval:function(a){
return(a.duration*0.05);
},
audioWidth:-1,
audioHeight:-1,
startVolume:0.8,
loop:false,
autoRewind:true,
enableAutosize:true,
alwaysShowHours:false,
showTimecodeFrameCount:false,
framesPerSecond:25,
autosizeProgress:true,
alwaysShowControls:false,
hideVideoControlsOnLoad:false,
clickToPlayPause:true,
iPadUseNativeControls:false,
iPhoneUseNativeControls:false,
AndroidUseNativeControls:false,
features:['playpause','current','progress','duration','tracks','volume','fullscreen'],
isVideo:true,
enableKeyboard:true,
pauseOtherPlayers:true,
keyActions:[
{
keys:[
32,179],
action:function(a,b){
if(b.paused||b.ended){
a.play();
}else{
a.pause();
}
}
},
{
keys:[38],action:function(a,b){
var c=Math.min(b.volume+0.1,1);
b.setVolume(c);
}
},
{
keys:[40],action:function(a,b){
var c=Math.max(b.volume-0.1,0);
b.setVolume(c);
}
},
{
keys:[
37,227],
action:function(a,b){
if(!isNaN(b.duration)&&b.duration>0){
if(a.isVideo){
a.showControls();
a.startControlsTimer();
}
var c=Math.max(b.currentTime-a.options.defaultSeekBackwardInterval(b),0);
b.setCurrentTime(c);
}
}
},
{
keys:[
39,228],
action:function(a,b){
if(!isNaN(b.duration)&&b.duration>0){
if(a.isVideo){
a.showControls();
a.startControlsTimer();
}
var c=Math.min(b.currentTime+a.options.defaultSeekForwardInterval(b),b.duration);
b.setCurrentTime(c);
}
}
},
{
keys:[70],action:function(a,b){
if(typeof a.enterFullScreen!='undefined'){
if(a.isFullScreen){
a.exitFullScreen();
}else{
a.enterFullScreen();
}
}
}
}
]
};
mejs.mepIndex=0;
mejs.players={};
mejs.MediaElementPlayer=function(a,o){
if(!(this instanceof mejs.MediaElementPlayer)){
return new mejs.MediaElementPlayer(a,o);
}
var t=this;
t.$media=t.$node=$(a);
t.node=t.media=t.$media[0];
if(typeof t.node.player!='undefined'){
return t.node.player;
}else{
t.node.player=t;
}
if(typeof o=='undefined'){
o=t.$node.data('mejsoptions');
}
t.options=$.extend({},mejs.MepDefaults,o);
t.id='mep_'+mejs.mepIndex++;
mejs.players[t.id]=t;
t.init();
return t;
};
mejs.MediaElementPlayer.prototype={
hasFocus:false,
controlsAreVisible:true,
init:function(){
var
t=this,
mf=mejs.MediaFeatures,
meOptions=$.extend(true,{},t.options,{
success:function(a,b){t.meReady(a,b)},
error:function(e){t.handleError(e)}
}),
tagName=t.media.tagName.toLowerCase();
t.isDynamic=(tagName!=='audio'&&tagName!=='video');
if(t.isDynamic){
t.isVideo=t.options.isVideo;
}else{
t.isVideo=(tagName!=='audio'&&t.options.isVideo);
}
if((mf.isiPad&&t.options.iPadUseNativeControls)||(mf.isiPhone&&t.options.iPhoneUseNativeControls)){
t.$media.attr('controls','controls');
if(mf.isiPad&&t.media.getAttribute('autoplay')!==null){
t.play();
}
}else if(mf.isAndroid&&t.options.AndroidUseNativeControls){
}else{
t.$media.removeAttr('controls');
t.container=
$('<div id="'+t.id+'" class="mejs-container '+(mejs.MediaFeatures.svg?'svg':'no-svg')+'">'+
'<div class="mejs-inner">'+
'<div class="mejs-mediaelement"></div>'+
'<div class="mejs-layers"></div>'+
'<div class="mejs-controls"></div>'+
'<div class="mejs-clear"></div>'+
'</div>'+
'</div>')
.addClass(t.$media[0].className)
.insertBefore(t.$media);
t.container.addClass(
(mf.isAndroid?'mejs-android ':'')+
(mf.isiOS?'mejs-ios ':'')+
(mf.isiPad?'mejs-ipad ':'')+
(mf.isiPhone?'mejs-iphone ':'')+
(t.isVideo?'mejs-video ':'mejs-audio ')
);
if(mf.isiOS){
var c=t.$media.clone();
t.container.find('.mejs-mediaelement').append(c);
t.$media.remove();
t.$node=t.$media=c;
t.node=t.media=c[0]
}else{
t.container.find('.mejs-mediaelement').append(t.$media);
}
t.controls=t.container.find('.mejs-controls');
t.layers=t.container.find('.mejs-layers');

var d=(t.isVideo?'video':'audio'),
capsTagName=d.substring(0,1).toUpperCase()+d.substring(1);
if(t.options[d+'Width']>0||t.options[d+'Width'].toString().indexOf('%')>-1){
t.width=t.options[d+'Width'];
}else if(t.media.style.width!==''&&t.media.style.width!==null){
t.width=t.media.style.width;
}else if(t.media.getAttribute('width')!==null){
t.width=t.$media.attr('width');
}else{
t.width=t.options['default'+capsTagName+'Width'];
}
if(t.options[d+'Height']>0||t.options[d+'Height'].toString().indexOf('%')>-1){
t.height=t.options[d+'Height'];
}else if(t.media.style.height!==''&&t.media.style.height!==null){
t.height=t.media.style.height;
}else if(t.$media[0].getAttribute('height')!==null){
t.height=t.$media.attr('height');
}else{
t.height=t.options['default'+capsTagName+'Height'];
}
t.setPlayerSize(t.width,t.height);
meOptions.pluginWidth=t.width;
meOptions.pluginHeight=t.height;
}
mejs.MediaElement(t.$media[0],meOptions);
if(typeof(t.container)!='undefined'&&t.controlsAreVisible){
t.container.trigger('controlsshown');
}
},
showControls:function(a){
var t=this;
a=typeof a=='undefined'||a;
if(t.controlsAreVisible)
return;
if(a){
t.controls
.css('visibility','visible')
.stop(true,true).fadeIn(200,function(){
t.controlsAreVisible=true;
t.container.trigger('controlsshown');
});
t.container.find('.mejs-control')
.css('visibility','visible')
.stop(true,true).fadeIn(200,function(){t.controlsAreVisible=true});
}else{
t.controls
.css('visibility','visible')
.css('display','block');
t.container.find('.mejs-control')
.css('visibility','visible')
.css('display','block');
t.controlsAreVisible=true;
t.container.trigger('controlsshown');
}
t.setControlsSize();
},
hideControls:function(a){
var t=this;
a=typeof a=='undefined'||a;
if(!t.controlsAreVisible||t.options.alwaysShowControls)
return;
if(a){
t.controls.stop(true,true).fadeOut(200,function(){
$(this)
.css('visibility','hidden')
.css('display','block');
t.controlsAreVisible=false;
t.container.trigger('controlshidden');
});
t.container.find('.mejs-control').stop(true,true).fadeOut(200,function(){
$(this)
.css('visibility','hidden')
.css('display','block');
});
}else{
t.controls
.css('visibility','hidden')
.css('display','block');
t.container.find('.mejs-control')
.css('visibility','hidden')
.css('display','block');
t.controlsAreVisible=false;
t.container.trigger('controlshidden');
}
},
controlsTimer:null,
startControlsTimer:function(a){
var t=this;
a=typeof a!='undefined'?a:1500;
t.killControlsTimer('start');
t.controlsTimer=setTimeout(function(){
t.hideControls();
t.killControlsTimer('hide');
},a);
},
killControlsTimer:function(a){
var t=this;
if(t.controlsTimer!==null){
clearTimeout(t.controlsTimer);
delete t.controlsTimer;
t.controlsTimer=null;
}
},
controlsEnabled:true,
disableControls:function(){
var t=this;
t.killControlsTimer();
t.hideControls(false);
this.controlsEnabled=false;
},
enableControls:function(){
var t=this;
t.showControls(false);
t.controlsEnabled=true;
},
meReady:function(b,c){
var t=this,
mf=mejs.MediaFeatures,
autoplayAttr=c.getAttribute('autoplay'),
autoplay=!(typeof autoplayAttr=='undefined'||autoplayAttr===null||autoplayAttr==='false'),
featureIndex,
feature;
if(t.created){
return;
}else{
t.created=true;
}
t.media=b;
t.domNode=c;
if(!(mf.isAndroid&&t.options.AndroidUseNativeControls)&&!(mf.isiPad&&t.options.iPadUseNativeControls)&&!(mf.isiPhone&&t.options.iPhoneUseNativeControls)){
t.buildposter(t,t.controls,t.layers,t.media);
t.buildkeyboard(t,t.controls,t.layers,t.media);
t.buildoverlays(t,t.controls,t.layers,t.media);
t.findTracks();
for(featureIndex in t.options.features){
feature=t.options.features[featureIndex];
if(t['build'+feature]){
try{
t['build'+feature](t,t.controls,t.layers,t.media);
}catch(e){
}
}
}
t.container.trigger('controlsready');
t.setPlayerSize(t.width,t.height);
t.setControlsSize();
if(t.isVideo){
if(mejs.MediaFeatures.hasTouch){
t.$media.bind('touchstart',function(){
if(t.controlsAreVisible){
t.hideControls(false);
}else{
if(t.controlsEnabled){
t.showControls(false);
}
}
});
}else{
mejs.MediaElementPlayer.prototype.clickToPlayPauseCallback=function(){
if(t.options.clickToPlayPause){
if(t.media.paused){
t.play();
}else{
t.pause();
}
}
};
t.media.addEventListener('click',t.clickToPlayPauseCallback,false);
t.container
.bind('mouseenter mouseover',function(){
if(t.controlsEnabled){
if(!t.options.alwaysShowControls){
t.killControlsTimer('enter');
t.showControls();
t.startControlsTimer(2500);
}
}
})
.bind('mousemove',function(){
if(t.controlsEnabled){
if(!t.controlsAreVisible){
t.showControls();
}
if(!t.options.alwaysShowControls){
t.startControlsTimer(2500);
}
}
})
.bind('mouseleave',function(){
if(t.controlsEnabled){
if(!t.media.paused&&!t.options.alwaysShowControls){
t.startControlsTimer(1000);
}
}
});
}
if(t.options.hideVideoControlsOnLoad){
t.hideControls(false);
}
if(autoplay&&!t.options.alwaysShowControls){
t.hideControls();
}
if(t.options.enableAutosize){
t.media.addEventListener('loadedmetadata',function(e){
if(t.options.videoHeight<=0&&t.domNode.getAttribute('height')===null&&!isNaN(e.target.videoHeight)){
t.setPlayerSize(e.target.videoWidth,e.target.videoHeight);
t.setControlsSize();
t.media.setVideoSize(e.target.videoWidth,e.target.videoHeight);
}
},false);
}
}
b.addEventListener('play',function(){
var a;
for(a in mejs.players){
var p=mejs.players[a];
if(p.id!=t.id&&t.options.pauseOtherPlayers&&!p.paused&&!p.ended){
p.pause();
}
p.hasFocus=false;
}
t.hasFocus=true;
},false);
t.media.addEventListener('ended',function(e){
if(t.options.autoRewind){
try{
t.media.setCurrentTime(0);
}catch(exp){
}
}
t.media.pause();
if(t.setProgressRail){
t.setProgressRail();
}
if(t.setCurrentRail){
t.setCurrentRail();
}
if(t.options.loop){
t.play();
}else if(!t.options.alwaysShowControls&&t.controlsEnabled){
t.showControls();
}
},false);
t.media.addEventListener('loadedmetadata',function(e){
if(t.updateDuration){
t.updateDuration();
}
if(t.updateCurrent){
t.updateCurrent();
}
if(!t.isFullScreen){
t.setPlayerSize(t.width,t.height);
t.setControlsSize();
}
},false);
setTimeout(function(){
t.setPlayerSize(t.width,t.height);
t.setControlsSize();
},50);
t.globalBind('resize',function(){
if(!(t.isFullScreen||(mejs.MediaFeatures.hasTrueNativeFullScreen&&document.webkitIsFullScreen))){
t.setPlayerSize(t.width,t.height);
}
t.setControlsSize();
});
if(t.media.pluginType=='youtube'){
t.container.find('.mejs-overlay-play').hide();
}
}
if(autoplay&&b.pluginType=='native'){
t.play();
}
if(t.options.success){
if(typeof t.options.success=='string'){
window[t.options.success](t.media,t.domNode,t);
}else{
t.options.success(t.media,t.domNode,t);
}
}
},
handleError:function(e){
var t=this;
t.controls.hide();
if(t.options.error){
t.options.error(e);
}
},
setPlayerSize:function(a,b){
var t=this;
if(typeof a!='undefined'){
t.width=a;
}
if(typeof b!='undefined'){
t.height=b;
}
if(t.height.toString().indexOf('%')>0||t.$node.css('max-width')==='100%'||parseInt(t.$node.css('max-width').replace(/px/,''),10)/t.$node.offsetParent().width()===1||(t.$node[0].currentStyle&&t.$node[0].currentStyle.maxWidth==='100%')){
var
nativeWidth=t.isVideo?((t.media.videoWidth&&t.media.videoWidth>0)?t.media.videoWidth:t.options.defaultVideoWidth):t.options.defaultAudioWidth,
nativeHeight=t.isVideo?((t.media.videoHeight&&t.media.videoHeight>0)?t.media.videoHeight:t.options.defaultVideoHeight):t.options.defaultAudioHeight,
parentWidth=t.container.parent().closest(':visible').width(),
newHeight=t.isVideo||!t.options.autosizeProgress?parseInt(parentWidth*nativeHeight/nativeWidth,10):nativeHeight;
if(t.container.parent()[0].tagName.toLowerCase()==='body'){parentWidth=$(window).width();
newHeight=$(window).height();
}
if(newHeight!=0&&parentWidth!=0){
t.container
.width(parentWidth)
.height(newHeight);
t.$media.add(t.container.find('.mejs-shim'))
.width('100%')
.height('100%');
if(t.isVideo){
if(t.media.setVideoSize){
t.media.setVideoSize(parentWidth,newHeight);
}
}
t.layers.children('.mejs-layer')
.width('100%')
.height('100%');
}
}else{
t.container
.width(t.width)
.height(t.height);
t.layers.children('.mejs-layer')
.width(t.width)
.height(t.height);
}
var c=t.layers.find('.mejs-overlay-play'),
playButton=c.find('.mejs-overlay-button');
c.height(t.container.height()-t.controls.height());
playButton.css('margin-top','-'+(playButton.height()/2-t.controls.height()/2).toString()+'px');
},
setControlsSize:function(){
var t=this,
usedWidth=0,
railWidth=0,
rail=t.controls.find('.mejs-time-rail'),
total=t.controls.find('.mejs-time-total'),
current=t.controls.find('.mejs-time-current'),
loaded=t.controls.find('.mejs-time-loaded'),
others=rail.siblings();
if(t.options&&!t.options.autosizeProgress){
railWidth=parseInt(rail.css('width'));
}
if(railWidth===0||!railWidth){
others.each(function(){
var a=$(this);
if(a.css('position')!='absolute'&&a.is(':visible')){
usedWidth+=$(this).outerWidth(true);
}
});
railWidth=t.controls.width()-usedWidth-(rail.outerWidth(true)-rail.width());
}
rail.width(railWidth);
total.width(railWidth-(total.outerWidth(true)-total.width()));
if(t.setProgressRail)
t.setProgressRail();
if(t.setCurrentRail)
t.setCurrentRail();
},
buildposter:function(a,b,c,d){
var t=this,
poster=
$('<div class="mejs-poster mejs-layer">'+
'</div>')
.appendTo(c),
posterUrl=a.$media.attr('poster');
if(a.options.poster!==''){
posterUrl=a.options.poster;
}
if(posterUrl!==''&&posterUrl!=null){
t.setPoster(posterUrl);
}else{
poster.hide();
}
d.addEventListener('play',function(){
poster.hide();
},false);
if(a.options.showPosterWhenEnded&&a.options.autoRewind){
d.addEventListener('ended',function(){
poster.show();
},false);
}
},
setPoster:function(a){
var t=this,
posterDiv=t.container.find('.mejs-poster'),
posterImg=posterDiv.find('img');
if(posterImg.length==0){
posterImg=$('<img width="100%" height="100%" />').appendTo(posterDiv);
}
posterImg.attr('src',a);
posterDiv.css({'background-image':'url('+a+')'});
},
buildoverlays:function(a,b,c,d){
var t=this;
if(!a.isVideo)
return;
var
loading=
$('<div class="mejs-overlay mejs-layer">'+
'<div class="mejs-overlay-loading"><span></span></div>'+
'</div>')
.hide().appendTo(c),
error=
$('<div class="mejs-overlay mejs-layer">'+
'<div class="mejs-overlay-error"></div>'+
'</div>')
.hide().appendTo(c),
bigPlay=
$('<div class="mejs-overlay mejs-layer mejs-overlay-play">'+
'<div class="mejs-overlay-button"></div>'+
'</div>')
.appendTo(c)
.bind('click touchstart',function(){
if(t.options.clickToPlayPause){
if(d.paused){
t.play();
}
}
});

d.addEventListener('play',function(){
bigPlay.hide();
loading.hide();
b.find('.mejs-time-buffering').hide();
error.hide();
},false);
d.addEventListener('playing',function(){
bigPlay.hide();
loading.hide();
b.find('.mejs-time-buffering').hide();
error.hide();
},false);
d.addEventListener('seeking',function(){
loading.show();
b.find('.mejs-time-buffering').show();
},false);
d.addEventListener('seeked',function(){
loading.hide();
b.find('.mejs-time-buffering').hide();
},false);
d.addEventListener('pause',function(){
if(!mejs.MediaFeatures.isiPhone){
bigPlay.show();
}
},false);
d.addEventListener('waiting',function(){
loading.show();
b.find('.mejs-time-buffering').show();
},false);
d.addEventListener('loadeddata',function(){
loading.show();
b.find('.mejs-time-buffering').show();
},false);
d.addEventListener('canplay',function(){
loading.hide();
b.find('.mejs-time-buffering').hide();
},false);
d.addEventListener('error',function(){
loading.hide();
b.find('.mejs-time-buffering').hide();
error.show();
error.find('mejs-overlay-error').html("Error loading this resource");
},false);
},
buildkeyboard:function(b,c,d,f){
var t=this;
t.globalBind('keydown',function(e){
if(b.hasFocus&&b.options.enableKeyboard){
for(var i=0,il=b.options.keyActions.length;i<il;i++){
var a=b.options.keyActions[i];
for(var j=0,jl=a.keys.length;j<jl;j++){
if(e.keyCode==a.keys[j]){
e.preventDefault();
a.action(b,f,e.keyCode);
return false;
}
}
}
}
return true;
});
t.globalBind('click',function(a){
if($(a.target).closest('.mejs-container').length==0){
b.hasFocus=false;
}
});
},
findTracks:function(){
var t=this,
tracktags=t.$media.find('track');
t.tracks=[];
tracktags.each(function(a,b){
b=$(b);
t.tracks.push({
srclang:(b.attr('srclang'))?b.attr('srclang').toLowerCase():'',
src:b.attr('src'),
kind:b.attr('kind'),
label:b.attr('label')||'',
entries:[],
isLoaded:false
});
});
},
changeSkin:function(a){
this.container[0].className='mejs-container '+a;
this.setPlayerSize(this.width,this.height);
this.setControlsSize();
},
play:function(){
this.load();
this.media.play();
},
pause:function(){
try{
this.media.pause();
}catch(e){}
},
load:function(){
if(!this.isLoaded){
this.media.load();
}
this.isLoaded=true;
},
setMuted:function(a){
this.media.setMuted(a);
},
setCurrentTime:function(a){
this.media.setCurrentTime(a);
},
getCurrentTime:function(){
return this.media.currentTime;
},
setVolume:function(a){
this.media.setVolume(a);
},
getVolume:function(){
return this.media.volume;
},
setSrc:function(a){
this.media.setSrc(a);
},
remove:function(){
var t=this,featureIndex,feature;
for(featureIndex in t.options.features){
feature=t.options.features[featureIndex];
if(t['clean'+feature]){
try{
t['clean'+feature](t);
}catch(e){
}
}
}
if(!t.isDynamic){
t.$media.prop('controls',true);
t.$node.clone().show().insertBefore(t.container);
t.$node.remove();
}else{
t.$node.insertBefore(t.container);
}
if(t.media.pluginType!=='native'){
t.media.remove();
}
delete mejs.players[t.id];
t.container.remove();
t.globalUnbind();
delete t.node.player;
}
};
(function(){
var e=/^((after|before)print|(before)?unload|hashchange|message|o(ff|n)line|page(hide|show)|popstate|resize|storage)\b/;
function splitEvents(b,c){
var d={d:[],w:[]};
$.each((b||'').split(' '),function(k,v){
var a=v+'.'+c;
if(a.indexOf('.')===0){
d.d.push(a);
d.w.push(a);
}
else{
d[e.test(v)?'w':'d'].push(a);
}
});
d.d=d.d.join(' ');
d.w=d.w.join(' ');
return d;
}
mejs.MediaElementPlayer.prototype.globalBind=function(a,b,c){
var t=this;
a=splitEvents(a,t.id);
if(a.d)$(document).bind(a.d,b,c);
if(a.w)$(window).bind(a.w,b,c);
};
mejs.MediaElementPlayer.prototype.globalUnbind=function(a,b){
var t=this;
a=splitEvents(a,t.id);
if(a.d)$(document).unbind(a.d,b);
if(a.w)$(window).unbind(a.w,b);
};
})();
if(typeof jQuery!='undefined'){
jQuery.fn.mediaelementplayer=function(b){
if(b===false){
this.each(function(){
var a=jQuery(this).data('mediaelementplayer');
if(a){
a.remove();
}
jQuery(this).removeData('mediaelementplayer');
});
}
else{
this.each(function(){
jQuery(this).data('mediaelementplayer',new mejs.MediaElementPlayer(this,b));
});
}
return this;
};
}
$(document).ready(function(){
$('.mejs-player').mediaelementplayer();
});
window.MediaElementPlayer=mejs.MediaElementPlayer;
})(mejs.$);
(function($){
$.extend(mejs.MepDefaults,{
playpauseText:mejs.i18n.t('Play/Pause')
});
$.extend(MediaElementPlayer.prototype,{
buildplaypause:function(a,b,c,d){
var
t=this,
play=
$('<div class="mejs-button mejs-playpause-button mejs-play" >'+
'<button type="button" aria-controls="'+t.id+'" title="'+t.options.playpauseText+'" aria-label="'+t.options.playpauseText+'"></button>'+
'</div>')
.appendTo(b)
.click(function(e){
if($(this).find("button").css("opacity")!=1){return}e.preventDefault();
if(d.paused){
d.play();
}else{
d.pause();
}
return false;
});
d.addEventListener('play',function(){
play.removeClass('mejs-play').addClass('mejs-pause');
},false);
d.addEventListener('playing',function(){
play.removeClass('mejs-play').addClass('mejs-pause');
},false);
d.addEventListener('pause',function(){
play.removeClass('mejs-pause').addClass('mejs-play');
},false);
d.addEventListener('paused',function(){
play.removeClass('mejs-pause').addClass('mejs-play');
},false);
}
});
})(mejs.$);
(function($){
$.extend(mejs.MepDefaults,{
stopText:'Stop'
});
$.extend(MediaElementPlayer.prototype,{
buildstop:function(a,b,c,d){
var t=this,
stop=
$('<div class="mejs-button mejs-stop-button mejs-stop">'+
'<button type="button" aria-controls="'+t.id+'" title="'+t.options.stopText+'" aria-label="'+t.options.stopText+'"></button>'+
'</div>')
.appendTo(b)
.click(function(){
if(!d.paused){
d.pause();
}
if(d.currentTime>0){
d.setCurrentTime(0);
d.pause();
b.find('.mejs-time-current').width('0px');
b.find('.mejs-time-handle').css('left','0px');
b.find('.mejs-time-float-current').html(mejs.Utility.secondsToTimeCode(0));
b.find('.mejs-currenttime').html(mejs.Utility.secondsToTimeCode(0));
c.find('.mejs-poster').show();
}
});
}
});
})(mejs.$);
(function($){
$.extend(MediaElementPlayer.prototype,{
buildprogress:function(a,b,c,d){
$('<div class="mejs-time-rail">'+
'<span class="mejs-time-total">'+
'<span class="mejs-time-buffering"></span>'+
'<span class="mejs-time-loaded"></span>'+
'<span class="mejs-time-current"></span>'+
'<span class="mejs-time-handle"></span>'+
'<span class="mejs-time-float">'+
'<span class="mejs-time-float-current">00:00</span>'+
'<span class="mejs-time-float-corner"></span>'+
'</span>'+
'</span>'+
'</div>')
.appendTo(b);
b.find('.mejs-time-buffering').hide();
var
t=this,
total=b.find('.mejs-time-total'),
loaded=b.find('.mejs-time-loaded'),
current=b.find('.mejs-time-current'),
handle=b.find('.mejs-time-handle'),
timefloat=b.find('.mejs-time-float'),
timefloatcurrent=b.find('.mejs-time-float-current'),
handleMouseMove=function(e){
var x=e.pageX,
offset=total.offset(),
width=total.outerWidth(true)*MediaElementPlayer.prototype.extoptions.scale/1.023,percentage=0,
newTime=0,
pos=0;
if(d.duration){
if(x<offset.left){
x=offset.left;
}else if(x>width+offset.left){
x=width+offset.left;
}
pos=x-offset.left;
percentage=(pos/width);
newTime=(percentage<=0.02)?0:percentage*d.duration;
if(mouseIsDown&&newTime!==d.currentTime){
d.setCurrentTime(newTime);
}
if(MediaElementPlayer.prototype.extoptions.displayBox&&!mejs.MediaFeatures.hasTouch){timefloat.css('left',pos);
timefloatcurrent.html(mejs.Utility.secondsToTimeCode(newTime));
timefloat.show();
}
}
},
mouseIsDown=false,
mouseIsOver=false;
total
.bind('mousedown',function(e){
if(e.which===1){
mouseIsDown=true;
handleMouseMove(e);
t.globalBind('mousemove.dur',function(e){
handleMouseMove(e);
});
t.globalBind('mouseup.dur',function(e){
mouseIsDown=false;
timefloat.hide();
t.globalUnbind('.dur');
});
return false;
}
})
.bind('mouseenter',function(e){
mouseIsOver=true;
t.globalBind('mousemove.dur',function(e){
handleMouseMove(e);
});
if(MediaElementPlayer.prototype.extoptions.displayBox&&!mejs.MediaFeatures.hasTouch){timefloat.show();
}
})
.bind('mouseleave',function(e){
mouseIsOver=false;
if(!mouseIsDown){
t.globalUnbind('.dur');
timefloat.hide();
}
});
d.addEventListener('progress',function(e){
a.setProgressRail(e);
a.setCurrentRail(e);
},false);
d.addEventListener('timeupdate',function(e){
a.setProgressRail(e);
a.setCurrentRail(e);
},false);
t.loaded=loaded;
t.total=total;
t.current=current;
t.handle=handle;
},
setProgressRail:function(e){
var
t=this,
target=(e!=undefined)?e.target:t.media,
percent=null;
if(target&&target.buffered&&target.buffered.length>0&&target.buffered.end&&target.duration){
percent=target.buffered.end(0)/target.duration;
}
else if(target&&target.bytesTotal!=undefined&&target.bytesTotal>0&&target.bufferedBytes!=undefined){
percent=target.bufferedBytes/target.bytesTotal;
}
else if(e&&e.lengthComputable&&e.total!=0){
percent=e.loaded/e.total;
}
if(percent!==null){
percent=Math.min(1,Math.max(0,percent));
if(t.loaded&&t.total){
t.loaded.width(t.total.width()*percent);
}
}
return percent},
setCurrentRail:function(){
var t=this;
if(t.media.currentTime!=undefined&&t.media.duration){
if(t.total&&t.handle){
var
newWidth=Math.round(t.total.width()*t.media.currentTime/t.media.duration),
handlePos=newWidth-Math.round(t.handle.outerWidth(true)/2);
t.current.width(newWidth);
t.handle.css('left',handlePos);
}
}
}
});
})(mejs.$);
(function($){
$.extend(mejs.MepDefaults,{
duration:-1,
timeAndDurationSeparator:'<span> | </span>'
});
$.extend(MediaElementPlayer.prototype,{
buildcurrent:function(a,b,c,d){
var t=this;
$('<div class="mejs-time">'+
'<span class="mejs-currenttime">'+(a.options.alwaysShowHours?'00:':'')
+(a.options.showTimecodeFrameCount?'00:00:00':'00:00')+'</span>'+
'</div>')
.appendTo(b);
t.currenttime=t.controls.find('.mejs-currenttime');
d.addEventListener('timeupdate',function(){
a.updateCurrent();
},false);
},
buildduration:function(a,b,c,d){
var t=this;
if(b.children().last().find('.mejs-currenttime').length>0){
$(t.options.timeAndDurationSeparator+
'<span class="mejs-duration">'+
(t.options.duration>0?
mejs.Utility.secondsToTimeCode(t.options.duration,t.options.alwaysShowHours||t.media.duration>3600,t.options.showTimecodeFrameCount,t.options.framesPerSecond||25):
((a.options.alwaysShowHours?'00:':'')+(a.options.showTimecodeFrameCount?'00:00:00':'00:00'))
)+
'</span>')
.appendTo(b.find('.mejs-time'));
}else{
b.find('.mejs-currenttime').parent().addClass('mejs-currenttime-container');
$('<div class="mejs-time mejs-duration-container">'+
'<span class="mejs-duration">'+
(t.options.duration>0?
mejs.Utility.secondsToTimeCode(t.options.duration,t.options.alwaysShowHours||t.media.duration>3600,t.options.showTimecodeFrameCount,t.options.framesPerSecond||25):
((a.options.alwaysShowHours?'00:':'')+(a.options.showTimecodeFrameCount?'00:00:00':'00:00'))
)+
'</span>'+
'</div>')
.appendTo(b);
}
t.durationD=t.controls.find('.mejs-duration');
d.addEventListener('timeupdate',function(){
a.updateDuration();
},false);
},
updateCurrent:function(){
var t=this;
if(t.currenttime){
t.currenttime.html(mejs.Utility.secondsToTimeCode(t.media.currentTime,t.options.alwaysShowHours||t.media.duration>3600,t.options.showTimecodeFrameCount,t.options.framesPerSecond||25));
}
},
updateDuration:function(){
var t=this;
t.container.toggleClass("mejs-long-video",t.media.duration>3600);
if(t.durationD&&(t.options.duration>0||t.media.duration)){
t.durationD.html(mejs.Utility.secondsToTimeCode(t.options.duration>0?t.options.duration:t.media.duration,t.options.alwaysShowHours,t.options.showTimecodeFrameCount,t.options.framesPerSecond||25));
}
}
});
})(mejs.$);
(function($){
$.extend(mejs.MepDefaults,{
muteText:mejs.i18n.t('Mute Toggle'),
hideVolumeOnTouchDevices:true,
audioVolume:'horizontal',
videoVolume:'vertical'
});
$.extend(MediaElementPlayer.prototype,{
buildvolume:function(c,d,f,g){
var h=""
if(mejs.MediaFeatures.hasTouch&&this.options.hideVolumeOnTouchDevices)
h='style="opacity:0.6;"';
var t=this,
mode=(t.isVideo)?t.options.videoVolume:t.options.audioVolume,
mute=(mode=='horizontal')?
$('<div class="mejs-button mejs-volume-button mejs-mute" '+h+'>'+
'<button type="button" aria-controls="'+t.id+'" title="'+t.options.muteText+'" aria-label="'+t.options.muteText+'"></button>'+
'</div>'+
'<div class="mejs-horizontal-volume-slider">'+'<div class="mejs-horizontal-volume-total"></div>'+'<div class="mejs-horizontal-volume-current"></div>'+'<div class="mejs-horizontal-volume-handle"></div>'+'</div>'
)
.appendTo(d):
$('<div class="mejs-button mejs-volume-button mejs-mute" '+h+'>'+
'<button type="button" aria-controls="'+t.id+'" title="'+t.options.muteText+'" aria-label="'+t.options.muteText+'"></button>'+
'<div class="mejs-volume-slider">'+'<div class="mejs-volume-total"></div>'+'<div class="mejs-volume-current"></div>'+'<div class="mejs-volume-handle"></div>'+'</div>'+
'</div>')
.appendTo(d),
volumeSlider=t.container.find('.mejs-volume-slider, .mejs-horizontal-volume-slider'),
volumeTotal=t.container.find('.mejs-volume-total, .mejs-horizontal-volume-total'),
volumeCurrent=t.container.find('.mejs-volume-current, .mejs-horizontal-volume-current'),
volumeHandle=t.container.find('.mejs-volume-handle, .mejs-horizontal-volume-handle'),
positionVolumeHandle=function(a,b){
if(!volumeSlider.is(':visible')&&typeof b=='undefined'){
volumeSlider.show();
positionVolumeHandle(a,true);
volumeSlider.hide()
return;
}
a=Math.max(0,a);
a=Math.min(a,1);
if(a==0){
mute.removeClass('mejs-mute').addClass('mejs-unmute');
}else{
mute.removeClass('mejs-unmute').addClass('mejs-mute');
}
if(mode=='vertical'){
var
totalHeight=volumeTotal.height(),
totalPosition=volumeTotal.position(),
newTop=totalHeight-(totalHeight*a);
volumeHandle.css('top',Math.round(totalPosition.top+newTop-(volumeHandle.height()/2)));
volumeCurrent.height(totalHeight-newTop);
volumeCurrent.css('top',totalPosition.top+newTop);
}else{
var
totalWidth=volumeTotal.width(),
totalPosition=volumeTotal.position(),
newLeft=totalWidth*a;
volumeHandle.css('left',Math.round(totalPosition.left+newLeft-(volumeHandle.width()/2)));
volumeCurrent.width(Math.round(newLeft));
}
},
handleVolumeMove=function(e){
var a=null,
totalOffset=volumeTotal.offset();
if(mode=='vertical'){
var
railHeight=volumeTotal.height()*MediaElementPlayer.prototype.extoptions.scale/1.023,totalTop=parseInt(volumeTotal.css('top').replace(/px/,''),10),
newY=e.pageY-totalOffset.top;
a=(railHeight-newY)/railHeight;
if(totalOffset.top==0||totalOffset.left==0)
return;
}else{
var
railWidth=volumeTotal.width(),
newX=e.pageX-totalOffset.left;
a=newX/railWidth;
}
a=Math.max(0,a);
a=Math.min(a,1);
positionVolumeHandle(a);
if(a==0){
g.setMuted(true);
}else{
g.setMuted(false);
}
g.setVolume(a);
},
mouseIsDown=false,
mouseIsOver=false;
mute
.hover(function(){
volumeSlider.show();
mouseIsOver=true;
},function(){
mouseIsOver=false;
if(!mouseIsDown&&mode=='vertical'){
volumeSlider.hide();
}
});
volumeSlider
.bind('mouseover',function(){
mouseIsOver=true;
})
.bind('mousedown',function(e){
handleVolumeMove(e);
t.globalBind('mousemove.vol',function(e){
handleVolumeMove(e);
});
t.globalBind('mouseup.vol',function(){
mouseIsDown=false;
t.globalUnbind('.vol');
if(!mouseIsOver&&mode=='vertical'){
volumeSlider.hide();
}
});
mouseIsDown=true;
return false;
});
mute.find('button').click(function(){
g.setMuted(!g.muted);
});
g.addEventListener('volumechange',function(e){
if(!mouseIsDown){
if(g.muted){
positionVolumeHandle(0);
mute.removeClass('mejs-mute').addClass('mejs-unmute');
}else{
positionVolumeHandle(g.volume);
mute.removeClass('mejs-unmute').addClass('mejs-mute');
}
}
},false);
if(t.container.is(':visible')){
positionVolumeHandle(c.options.startVolume);
if(c.options.startVolume===0){
g.setMuted(true);
}
if(g.pluginType==='native'){
g.setVolume(c.options.startVolume);
}
}
}
});
})(mejs.$);
(function($){
$.extend(mejs.MepDefaults,{
usePluginFullScreen:true,
newWindowCallback:function(){return''},
fullscreenText:mejs.i18n.t('Fullscreen')
});
$.extend(MediaElementPlayer.prototype,{
isFullScreen:false,
isNativeFullScreen:false,
isInIframe:false,
buildfullscreen:function(b,c,d,f){
if(!b.isVideo)
return;
b.isInIframe=(window.location!=window.parent.location);
if(mejs.MediaFeatures.hasTrueNativeFullScreen){
var g=function(e){
if(b.isFullScreen){
if(mejs.MediaFeatures.isFullScreen()){
b.isNativeFullScreen=true;
b.setControlsSize();
}else{
b.isNativeFullScreen=false;
b.exitFullScreen();
}
}
};
if(mejs.MediaFeatures.hasMozNativeFullScreen){
b.globalBind(mejs.MediaFeatures.fullScreenEventName,g);
}else{
b.container.bind(mejs.MediaFeatures.fullScreenEventName,g);
}
}
var t=this,
normalHeight=0,
normalWidth=0,
container=b.container,
fullscreenBtn=
$('<div class="mejs-button mejs-fullscreen-button">'+
'<button type="button" aria-controls="'+t.id+'" title="'+t.options.fullscreenText+'" aria-label="'+t.options.fullscreenText+'"></button>'+
'</div>')
.appendTo(c);
if(t.media.pluginType==='native'||(!t.options.usePluginFullScreen&&!mejs.MediaFeatures.isFirefox)){
fullscreenBtn.click(function(){
var a=(mejs.MediaFeatures.hasTrueNativeFullScreen&&mejs.MediaFeatures.isFullScreen())||b.isFullScreen;
if(a){
b.exitFullScreen();
}else{
b.enterFullScreen();
}
});
}else{
var h=null,
supportsPointerEvents=(function(){
var a=document.createElement('x'),
documentElement=document.documentElement,
getComputedStyle=window.getComputedStyle,
supports;
if(!('pointerEvents'in a.style)){
return false;
}
a.style.pointerEvents='auto';
a.style.pointerEvents='x';
documentElement.appendChild(a);
supports=getComputedStyle&&
getComputedStyle(a,'').pointerEvents==='auto';
documentElement.removeChild(a);
return!!supports;
})();
if(supportsPointerEvents&&!mejs.MediaFeatures.isOpera){
var j=false,
restoreControls=function(){
if(j){
for(var i in hoverDivs){
hoverDivs[i].hide();
}
fullscreenBtn.css('pointer-events','');
t.controls.css('pointer-events','');
t.media.removeEventListener('click',t.clickToPlayPauseCallback);
j=false;
}
},
hoverDivs={},
hoverDivNames=['top','left','right','bottom'],
i,len,
positionHoverDivs=function(){
var a=fullscreenBtn.offset().left-t.container.offset().left,
fullScreenBtnOffsetTop=fullscreenBtn.offset().top-t.container.offset().top,
fullScreenBtnWidth=fullscreenBtn.outerWidth(true),
fullScreenBtnHeight=fullscreenBtn.outerHeight(true),
containerWidth=t.container.width(),
containerHeight=t.container.height();
for(i in hoverDivs){
hoverDivs[i].css({position:'absolute',top:0,left:0})}
hoverDivs['top']
.width(containerWidth)
.height(fullScreenBtnOffsetTop);
hoverDivs['left']
.width(a)
.height(fullScreenBtnHeight)
.css({top:fullScreenBtnOffsetTop});
hoverDivs['right']
.width(containerWidth-a-fullScreenBtnWidth)
.height(fullScreenBtnHeight)
.css({top:fullScreenBtnOffsetTop,
left:a+fullScreenBtnWidth});
hoverDivs['bottom']
.width(containerWidth)
.height(containerHeight-fullScreenBtnHeight-fullScreenBtnOffsetTop)
.css({top:fullScreenBtnOffsetTop+fullScreenBtnHeight});
};
t.globalBind('resize',function(){
positionHoverDivs();
});
for(i=0,len=hoverDivNames.length;i<len;i++){
hoverDivs[hoverDivNames[i]]=$('<div class="mejs-fullscreen-hover" />').appendTo(t.container).mouseover(restoreControls).hide();
}
fullscreenBtn.on('mouseover',function(){
if(!t.isFullScreen){
var a=fullscreenBtn.offset(),
containerPos=b.container.offset();
f.positionFullscreenButton(a.left-containerPos.left,a.top-containerPos.top,false);
fullscreenBtn.css('pointer-events','none');
t.controls.css('pointer-events','none');
t.media.addEventListener('click',t.clickToPlayPauseCallback);
for(i in hoverDivs){
hoverDivs[i].show();
}
positionHoverDivs();
j=true;
}
});
f.addEventListener('fullscreenchange',function(e){
t.isFullScreen=!t.isFullScreen;
if(t.isFullScreen){
t.media.removeEventListener('click',t.clickToPlayPauseCallback);
}else{
t.media.addEventListener('click',t.clickToPlayPauseCallback);
}
restoreControls();
});
t.globalBind('mousemove',function(e){
if(j){
var a=fullscreenBtn.offset();
if(e.pageY<a.top||e.pageY>a.top+fullscreenBtn.outerHeight(true)||
e.pageX<a.left||e.pageX>a.left+fullscreenBtn.outerWidth(true)
){
fullscreenBtn.css('pointer-events','');
t.controls.css('pointer-events','');
j=false;
}
}
});
}else{
fullscreenBtn
.on('mouseover',function(){
if(h!==null){
clearTimeout(h);
delete h;
}
var a=fullscreenBtn.offset(),
containerPos=b.container.offset();
f.positionFullscreenButton(a.left-containerPos.left,a.top-containerPos.top,true);
})
.on('mouseout',function(){
if(h!==null){
clearTimeout(h);
delete h;
}
h=setTimeout(function(){
f.hideFullscreenButton();
},1500);
});
}
}
b.fullscreenBtn=fullscreenBtn;
t.globalBind('keydown',function(e){
if(((mejs.MediaFeatures.hasTrueNativeFullScreen&&mejs.MediaFeatures.isFullScreen())||t.isFullScreen)&&e.keyCode==27){
b.exitFullScreen();
}
});
},
cleanfullscreen:function(a){
a.exitFullScreen();
},
containerSizeTimeout:null,
enterFullScreen:function(){
var t=this;
if(t.media.pluginType!=='native'&&(mejs.MediaFeatures.isFirefox||t.options.usePluginFullScreen)){
return;
}
$(document.documentElement).addClass('mejs-fullscreen');
normalHeight=t.container.height();
normalWidth=t.container.width();
if(t.media.pluginType==='native'){
if(mejs.MediaFeatures.hasTrueNativeFullScreen){
mejs.MediaFeatures.requestFullScreen(t.container[0]);
if(t.isInIframe){
setTimeout(function checkFullscreen(){
if(t.isNativeFullScreen){
if($(window).width()!==screen.width){
t.exitFullScreen();
}else{
setTimeout(checkFullscreen,500);
}
}
},500);
}
}else if(mejs.MediaFeatures.hasSemiNativeFullScreen){
t.media.webkitEnterFullscreen();
return;
}
}
if(t.isInIframe){
var a=t.options.newWindowCallback(this);
if(a!==''){
if(!mejs.MediaFeatures.hasTrueNativeFullScreen){
t.pause();
window.open(a,t.id,'top=0,left=0,width='+screen.availWidth+',height='+screen.availHeight+',resizable=yes,scrollbars=no,status=no,toolbar=no');
return;
}else{
setTimeout(function(){
if(!t.isNativeFullScreen){
t.pause();
window.open(a,t.id,'top=0,left=0,width='+screen.availWidth+',height='+screen.availHeight+',resizable=yes,scrollbars=no,status=no,toolbar=no');
}
},250);
}
}
}
t.container
.addClass('mejs-container-fullscreen')
.width('100%')
.height('100%');
t.containerSizeTimeout=setTimeout(function(){
t.container.css({width:'100%',height:'100%'});
t.setControlsSize();
},500);
if(t.media.pluginType==='native'){
t.$media
.width('100%')
.height('100%');
}else{
t.container.find('.mejs-shim')
.width('100%')
.height('100%');
t.media.setVideoSize($(window).width(),$(window).height());
}
t.layers.children('div')
.width('100%')
.height('100%');
if(t.fullscreenBtn){
t.fullscreenBtn
.removeClass('mejs-fullscreen')
.addClass('mejs-unfullscreen');
}
t.setControlsSize();
t.isFullScreen=true;
},
exitFullScreen:function(){
var t=this;
clearTimeout(t.containerSizeTimeout);
if(t.media.pluginType!=='native'&&mejs.MediaFeatures.isFirefox){
t.media.setFullscreen(false);
return;
}
if(mejs.MediaFeatures.hasTrueNativeFullScreen&&(mejs.MediaFeatures.isFullScreen()||t.isFullScreen)){
mejs.MediaFeatures.cancelFullScreen();
}
$(document.documentElement).removeClass('mejs-fullscreen');
t.container
.removeClass('mejs-container-fullscreen')
.width(normalWidth)
.height(normalHeight);
if(t.media.pluginType==='native'){
t.$media
.width(normalWidth)
.height(normalHeight);
}else{
t.container.find('.mejs-shim')
.width(normalWidth)
.height(normalHeight);
t.media.setVideoSize(normalWidth,normalHeight);
}
t.layers.children('div')
.width(normalWidth)
.height(normalHeight);
t.fullscreenBtn
.removeClass('mejs-unfullscreen')
.addClass('mejs-fullscreen');
t.setControlsSize();
t.isFullScreen=false;
}
});
})(mejs.$);
(function($){
$.extend(mejs.MepDefaults,{
startLanguage:'',
tracksText:mejs.i18n.t('Captions/Subtitles'),
hideCaptionsButtonWhenEmpty:true,
toggleCaptionsButtonWhenOnlyOne:false,
slidesSelector:''
});
$.extend(MediaElementPlayer.prototype,{
hasChapters:false,
buildtracks:function(b,c,d,f){
if(b.tracks.length==0)
return;
var t=this,
i,
options='';
if(t.domNode.textTracks){for(var i=t.domNode.textTracks.length-1;i>=0;i--){
t.domNode.textTracks[i].mode="hidden";
}
}
b.chapters=
$('<div class="mejs-chapters mejs-layer"></div>')
.prependTo(d).hide();
b.captions=
$('<div class="mejs-captions-layer mejs-layer"><div class="mejs-captions-position mejs-captions-position-hover"><span class="mejs-captions-text"></span></div></div>')
.prependTo(d).hide();
b.captionsText=b.captions.find('.mejs-captions-text');
b.captionsButton=
$('<div class="mejs-button mejs-captions-button">'+
'<button type="button" aria-controls="'+t.id+'" title="'+t.options.tracksText+'" aria-label="'+t.options.tracksText+'"></button>'+
'<div class="mejs-captions-selector">'+
'<ul>'+
'<li>'+
'<input type="radio" name="'+b.id+'_captions" id="'+b.id+'_captions_none" value="none" checked="checked" />'+
'<label for="'+b.id+'_captions_none">'+mejs.i18n.t('None')+'</label>'+
'</li>'+
'</ul>'+
'</div>'+
'</div>')
.appendTo(c);
var g=0;
for(i=0;i<b.tracks.length;i++){
if(b.tracks[i].kind=='subtitles'){
g++;
}
}
if(t.options.toggleCaptionsButtonWhenOnlyOne&&g==1){
b.captionsButton.on('click',function(){
if(b.selectedTrack==null){
var a=b.tracks[0].srclang;
}else{
var a='none';
}
b.setTrack(a);
});
}else{
b.captionsButton.hover(function(){
$(this).find('.mejs-captions-selector').css('visibility','visible');
},function(){
$(this).find('.mejs-captions-selector').css('visibility','hidden');
})
.on('click','input[type=radio]',function(){
lang=this.value;
b.setTrack(lang);
});
}
if(!b.options.alwaysShowControls){
b.container
.bind('controlsshown',function(){
b.container.find('.mejs-captions-position').addClass('mejs-captions-position-hover');
})
.bind('controlshidden',function(){
if(!f.paused){
b.container.find('.mejs-captions-position').removeClass('mejs-captions-position-hover');
}
});
}else{
b.container.find('.mejs-captions-position').addClass('mejs-captions-position-hover');
}
b.trackToLoad=-1;
b.selectedTrack=null;
b.isLoadingTrack=false;
for(i=0;i<b.tracks.length;i++){
if(b.tracks[i].kind=='subtitles'){
b.addTrackButton(b.tracks[i].srclang,b.tracks[i].label);
}
}
b.loadNextTrack();
f.addEventListener('timeupdate',function(e){
b.displayCaptions();
},false);
if(b.options.slidesSelector!=''){
b.slidesContainer=$(b.options.slidesSelector);
f.addEventListener('timeupdate',function(e){
b.displaySlides();
},false);
}
f.addEventListener('loadedmetadata',function(e){
b.displayChapters();
},false);
b.container.hover(
function(){
if(b.hasChapters){
b.chapters.css('visibility','visible');
b.chapters.fadeIn(200).height(b.chapters.find('.mejs-chapter').outerHeight());
}
},
function(){
if(b.hasChapters&&!f.paused){
b.chapters.fadeOut(200,function(){
$(this).css('visibility','hidden');
$(this).css('display','block');
});
}
});
if(b.node.getAttribute('autoplay')!==null){
b.chapters.css('visibility','hidden');
}
},
setTrack:function(a){
var t=this,
i;
if(a=='none'){
t.selectedTrack=null;
t.captionsButton.removeClass('mejs-captions-enabled');
}else{
for(i=0;i<t.tracks.length;i++){
if(t.tracks[i].srclang==a){
if(t.selectedTrack==null)
t.captionsButton.addClass('mejs-captions-enabled');
t.selectedTrack=t.tracks[i];
t.captions.attr('lang',t.selectedTrack.srclang);
t.displayCaptions();
break;
}
}
}
},
loadNextTrack:function(){
var t=this;
t.trackToLoad++;
if(t.trackToLoad<t.tracks.length){
t.isLoadingTrack=true;
t.loadTrack(t.trackToLoad);
}else{
t.isLoadingTrack=false;
t.checkForTracks();
}
},
loadTrack:function(a){
var
t=this,
track=t.tracks[a],
after=function(){
track.isLoaded=true;
t.enableTrackButton(track.srclang,track.label);
t.loadNextTrack();
};
$.ajax({
url:track.src,
dataType:"text",
success:function(d){
if(typeof d=="string"&&(/<tt\s+xml/ig).exec(d)){
track.entries=mejs.TrackFormatParser.dfxp.parse(d);
}else{
track.entries=mejs.TrackFormatParser.webvvt.parse(d);
}
after();
if(track.kind=='chapters'){
t.media.addEventListener('play',function(e){
if(t.media.duration>0){
t.displayChapters(track);
}
},false);
}
if(track.kind=='slides'){
t.setupSlides(track);
}
},
error:function(){
t.loadNextTrack();
}
});
},
enableTrackButton:function(a,b){
var t=this;
if(b===''){
b=mejs.language.codes[a]||a;
}
t.captionsButton
.find('input[value='+a+']')
.prop('disabled',false)
.siblings('label')
.html(b);
if(t.options.startLanguage==a){
$('#'+t.id+'_captions_'+a).click();
}
t.adjustLanguageBox();
},
addTrackButton:function(a,b){
var t=this;
if(b===''){
b=mejs.language.codes[a]||a;
}
t.captionsButton.find('ul').append(
$('<li>'+
'<input type="radio" name="'+t.id+'_captions" id="'+t.id+'_captions_'+a+'" value="'+a+'" disabled="disabled" />'+
'<label for="'+t.id+'_captions_'+a+'">'+b+' (loading)'+'</label>'+
'</li>')
);
t.adjustLanguageBox();
t.container.find('.mejs-captions-translations option[value='+a+']').remove();
},
adjustLanguageBox:function(){
var t=this;
t.captionsButton.find('.mejs-captions-selector').height(
t.captionsButton.find('.mejs-captions-selector ul').outerHeight(true)+
t.captionsButton.find('.mejs-captions-translations').outerHeight(true)
);
},
checkForTracks:function(){
var
t=this,
hasSubtitles=false;
if(t.options.hideCaptionsButtonWhenEmpty){
for(i=0;i<t.tracks.length;i++){
if(t.tracks[i].kind=='subtitles'){
hasSubtitles=true;
break;
}
}
if(!hasSubtitles){
t.captionsButton.hide();
t.setControlsSize();
}
}
},
displayCaptions:function(){
if(typeof this.tracks=='undefined')
return;
var
t=this,
i,
track=t.selectedTrack;
if(track!=null&&track.isLoaded){
for(i=0;i<track.entries.times.length;i++){
if(t.media.currentTime>=track.entries.times[i].start&&t.media.currentTime<=track.entries.times[i].stop){
t.captionsText.html(track.entries.text[i]);
t.captions.show().height(0);
return}
}
t.captions.hide();
}else{
t.captions.hide();
}
},
setupSlides:function(a){
var t=this;
t.slides=a;
t.slides.entries.imgs=[t.slides.entries.text.length];
t.showSlide(0);
},
showSlide:function(a){
if(typeof this.tracks=='undefined'||typeof this.slidesContainer=='undefined'){
return;
}
var t=this,
url=t.slides.entries.text[a],
img=t.slides.entries.imgs[a];
if(typeof img=='undefined'||typeof img.fadeIn=='undefined'){
t.slides.entries.imgs[a]=img=$('<img src="'+url+'">')
.on('load',function(){
img.appendTo(t.slidesContainer)
.hide()
.fadeIn()
.siblings(':visible')
.fadeOut();
});
}else{
if(!img.is(':visible')&&!img.is(':animated')){
img.fadeIn()
.siblings(':visible')
.fadeOut();
}
}
},
displaySlides:function(){
if(typeof this.slides=='undefined')
return;
var
t=this,
slides=t.slides,
i;
for(i=0;i<slides.entries.times.length;i++){
if(t.media.currentTime>=slides.entries.times[i].start&&t.media.currentTime<=slides.entries.times[i].stop){
t.showSlide(i);
return}
}
},
displayChapters:function(){
var
t=this,
i;
for(i=0;i<t.tracks.length;i++){
if(t.tracks[i].kind=='chapters'&&t.tracks[i].isLoaded){
t.drawChapters(t.tracks[i]);
t.hasChapters=true;
break;
}
}
},
drawChapters:function(a){
var
t=this,
i,
dur,
percent=0,
usedPercent=0;
t.chapters.empty();
for(i=0;i<a.entries.times.length;i++){
dur=a.entries.times[i].stop-a.entries.times[i].start;
percent=Math.floor(dur/t.media.duration*100);
if(percent+usedPercent>100||i==a.entries.times.length-1&&percent+usedPercent<100){
percent=100-usedPercent;
}
t.chapters.append($(
'<div class="mejs-chapter" rel="'+a.entries.times[i].start+'" style="left: '+usedPercent.toString()+'%;width: '+percent.toString()+'%;">'+
'<div class="mejs-chapter-block'+((i==a.entries.times.length-1)?' mejs-chapter-block-last':'')+'">'+
'<span class="ch-title">'+a.entries.text[i]+'</span>'+
'<span class="ch-time">'+mejs.Utility.secondsToTimeCode(a.entries.times[i].start)+'&ndash;'+mejs.Utility.secondsToTimeCode(a.entries.times[i].stop)+'</span>'+
'</div>'+
'</div>'));
usedPercent+=percent;
}
t.chapters.find('div.mejs-chapter').click(function(){
t.media.setCurrentTime(parseFloat($(this).attr('rel')));
if(t.media.paused){
t.media.play();
}
});
t.chapters.show();
}
});
mejs.language={
codes:{
af:'Afrikaans',
sq:'Albanian',
ar:'Arabic',
be:'Belarusian',
bg:'Bulgarian',
ca:'Catalan',
zh:'Chinese',
'zh-cn':'Chinese Simplified',
'zh-tw':'Chinese Traditional',
hr:'Croatian',
cs:'Czech',
da:'Danish',
nl:'Dutch',
en:'English',
et:'Estonian',
tl:'Filipino',
fi:'Finnish',
fr:'French',
gl:'Galician',
de:'German',
el:'Greek',
ht:'Haitian Creole',
iw:'Hebrew',
hi:'Hindi',
hu:'Hungarian',
is:'Icelandic',
id:'Indonesian',
ga:'Irish',
it:'Italian',
ja:'Japanese',
ko:'Korean',
lv:'Latvian',
lt:'Lithuanian',
mk:'Macedonian',
ms:'Malay',
mt:'Maltese',
no:'Norwegian',
fa:'Persian',
pl:'Polish',
pt:'Portuguese',
ro:'Romanian',
ru:'Russian',
sr:'Serbian',
sk:'Slovak',
sl:'Slovenian',
es:'Spanish',
sw:'Swahili',
sv:'Swedish',
tl:'Tagalog',
th:'Thai',
tr:'Turkish',
uk:'Ukrainian',
vi:'Vietnamese',
cy:'Welsh',
yi:'Yiddish'
}
};

mejs.TrackFormatParser={
webvvt:{
pattern_identifier:/^([a-zA-z]+-)?[0-9]+$/,
pattern_timecode:/^([0-9]{2}:[0-9]{2}:[0-9]{2}([,.][0-9]{1,3})?) --\> ([0-9]{2}:[0-9]{2}:[0-9]{2}([,.][0-9]{3})?)(.*)$/,
parse:function(a){
var
i=0,
lines=mejs.TrackFormatParser.split2(a,/\r?\n/),
entries={text:[],times:[]},
timecode,
text;
for(;i<lines.length;i++){
if(this.pattern_identifier.exec(lines[i])){
i++;
timecode=this.pattern_timecode.exec(lines[i]);
if(timecode&&i<lines.length){
i++;
text=lines[i];
i++;
while(lines[i]!==''&&i<lines.length){
text=text+'\n'+lines[i];
i++;
}
text=$.trim(text).replace(/(\b(https?|ftp|file):\/\/[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|])/ig,"<a href='$1' target='_blank'>$1</a>");
entries.text.push(text);
entries.times.push(
{
start:(mejs.Utility.convertSMPTEtoSeconds(timecode[1])==0)?0.200:mejs.Utility.convertSMPTEtoSeconds(timecode[1]),
stop:mejs.Utility.convertSMPTEtoSeconds(timecode[3]),
settings:timecode[5]
});
}
}
}
return entries;
}
},
dfxp:{
parse:function(a){
a=$(a).filter("tt");
var
i=0,
container=a.children("div").eq(0),
lines=container.find("p"),
styleNode=a.find("#"+container.attr("style")),
styles,
begin,
end,
text,
entries={text:[],times:[]};
if(styleNode.length){
var b=styleNode.removeAttr("id").get(0).attributes;
if(b.length){
styles={};
for(i=0;i<b.length;i++){
styles[b[i].name.split(":")[1]]=b[i].value;
}
}
}
for(i=0;i<lines.length;i++){
var c;
var d={
start:null,
stop:null,
c:null
};
if(lines.eq(i).attr("begin"))d.start=mejs.Utility.convertSMPTEtoSeconds(lines.eq(i).attr("begin"));
if(!d.start&&lines.eq(i-1).attr("end"))d.start=mejs.Utility.convertSMPTEtoSeconds(lines.eq(i-1).attr("end"));
if(lines.eq(i).attr("end"))d.stop=mejs.Utility.convertSMPTEtoSeconds(lines.eq(i).attr("end"));
if(!d.stop&&lines.eq(i+1).attr("begin"))d.stop=mejs.Utility.convertSMPTEtoSeconds(lines.eq(i+1).attr("begin"));
if(styles){
c="";
for(var e in styles){
c+=e+":"+styles[e]+";";
}
}
if(c)d.style=c;
if(d.start==0)d.start=0.200;
entries.times.push(d);
text=$.trim(lines.eq(i).html()).replace(/(\b(https?|ftp|file):\/\/[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|])/ig,"<a href='$1' target='_blank'>$1</a>");
entries.text.push(text);
if(entries.times.start==0)entries.times.start=2;
}
return entries;
}
},
split2:function(a,b){
return a.split(b);
}
};
if('x\n\ny'.split(/\n/gi).length!=3){
mejs.TrackFormatParser.split2=function(a,b){
var
parts=[],
chunk='',
i;
for(i=0;i<a.length;i++){
chunk+=a.substring(i,i+1);
if(b.test(chunk)){
parts.push(chunk.replace(b,''));
chunk='';
}
}
parts.push(chunk);
return parts;
}
}
})(mejs.$);

(function($){
$.extend(mejs.MepDefaults,
{'contextMenuItems':[
{
render:function(a){
if(typeof a.enterFullScreen=='undefined')
return null;
if(a.isFullScreen){
return mejs.i18n.t('Turn off Fullscreen');
}else{
return mejs.i18n.t('Go Fullscreen');
}
},
click:function(a){
if(a.isFullScreen){
a.exitFullScreen();
}else{
a.enterFullScreen();
}
}
}
,
{
render:function(a){
if(a.media.muted){
return mejs.i18n.t('Unmute');
}else{
return mejs.i18n.t('Mute');
}
},
click:function(a){
if(a.media.muted){
a.setMuted(false);
}else{
a.setMuted(true);
}
}
},
{
isSeparator:true
}
,
{
render:function(a){
return mejs.i18n.t('Download Video');
},
click:function(a){
window.location.href=a.media.currentSrc;
}
}
]}
);
$.extend(MediaElementPlayer.prototype,{
buildcontextmenu:function(a,b,c,d){
a.contextMenu=$('<div class="mejs-contextmenu"></div>')
.appendTo($('body'))
.hide();
a.container.bind('contextmenu',function(e){
if(a.isContextMenuEnabled){
e.preventDefault();
a.renderContextMenu(e.clientX-1,e.clientY-1);
return false;
}
});
a.container.bind('click',function(){
a.contextMenu.hide();
});
a.contextMenu.bind('mouseleave',function(){
a.startContextMenuTimer();
});
},
cleancontextmenu:function(a){
a.contextMenu.remove();
},
isContextMenuEnabled:true,
enableContextMenu:function(){
this.isContextMenuEnabled=true;
},
disableContextMenu:function(){
this.isContextMenuEnabled=false;
},
contextMenuTimeout:null,
startContextMenuTimer:function(){
var t=this;
t.killContextMenuTimer();
t.contextMenuTimer=setTimeout(function(){
t.hideContextMenu();
t.killContextMenuTimer();
},750);
},
killContextMenuTimer:function(){
var a=this.contextMenuTimer;
if(a!=null){
clearTimeout(a);
delete a;
a=null;
}
},
hideContextMenu:function(){
this.contextMenu.hide();
},
renderContextMenu:function(x,y){
var t=this,
html='',
items=t.options.contextMenuItems;
for(var i=0,il=items.length;i<il;i++){
if(items[i].isSeparator){
html+='<div class="mejs-contextmenu-separator"></div>';
}else{
var b=items[i].render(t);
if(b!=null){
html+='<div class="mejs-contextmenu-item" data-itemindex="'+i+'" id="element-'+(Math.random()*1000000)+'">'+b+'</div>';
}
}
}
t.contextMenu
.empty()
.append($(html))
.css({top:y,left:x})
.show();
t.contextMenu.find('.mejs-contextmenu-item').each(function(){
var a=$(this),
itemIndex=parseInt(a.data('itemindex'),10),
item=t.options.contextMenuItems[itemIndex];
if(typeof item.show!='undefined')
item.show(a,t);
a.click(function(){
if(typeof item.click!='undefined')
item.click(t);
t.contextMenu.hide();
});
});
setTimeout(function(){
t.killControlsTimer('rev3');
},100);
}
});
})(mejs.$);

(function($){
$.extend(mejs.MepDefaults,{
postrollCloseText:mejs.i18n.t('Close')
});
$.extend(MediaElementPlayer.prototype,{
buildpostroll:function(c,d,f,g){
var
t=this,
postrollLink=t.container.find('link[rel="postroll"]').attr('href');
if(typeof postrollLink!=='undefined'){
c.postroll=
$('<div class="mejs-postroll-layer mejs-layer"><a class="mejs-postroll-close" onclick="$(this).parent().hide();return false;">'+t.options.postrollCloseText+'</a><div class="mejs-postroll-layer-content"></div></div>').prependTo(f).hide();
t.media.addEventListener('ended',function(e){
$.ajax({
dataType:'html',
url:postrollLink,
success:function(a,b){
f.find('.mejs-postroll-layer-content').html(a);
}
});
c.postroll.show();
},false);
}
}
});
})(mejs.$);

;

;
if(typeof jQuery!='undefined'){
mejs.$=jQuery;
}else if(typeof ender!='undefined'){
mejs.$=ender;
}
(function($){
mejs.MepDefaults={
poster:'',
showPosterWhenEnded:false,
defaultVideoWidth:480,
defaultVideoHeight:270,
videoWidth:-1,
videoHeight:-1,
defaultAudioWidth:400,
defaultAudioHeight:30,
defaultSeekBackwardInterval:function(a){
return(a.duration*0.05);
},
defaultSeekForwardInterval:function(a){
return(a.duration*0.05);
},
audioWidth:-1,
audioHeight:-1,
startVolume:0.8,
loop:false,
autoRewind:true,
enableAutosize:true,
alwaysShowHours:false,
showTimecodeFrameCount:false,
framesPerSecond:25,
autosizeProgress:true,
alwaysShowControls:false,
hideVideoControlsOnLoad:false,
clickToPlayPause:true,
iPadUseNativeControls:false,
iPhoneUseNativeControls:false,
AndroidUseNativeControls:false,
features:['playpause','current','progress','duration','tracks','volume','fullscreen'],
isVideo:true,
enableKeyboard:true,
pauseOtherPlayers:true,
keyActions:[
{
keys:[
32,179],
action:function(a,b){
if(b.paused||b.ended){
a.play();
}else{
a.pause();
}
}
},
{
keys:[38],action:function(a,b){
var c=Math.min(b.volume+0.1,1);
b.setVolume(c);
}
},
{
keys:[40],action:function(a,b){
var c=Math.max(b.volume-0.1,0);
b.setVolume(c);
}
},
{
keys:[
37,227],
action:function(a,b){
if(!isNaN(b.duration)&&b.duration>0){
if(a.isVideo){
a.showControls();
a.startControlsTimer();
}
var c=Math.max(b.currentTime-a.options.defaultSeekBackwardInterval(b),0);
b.setCurrentTime(c);
}
}
},
{
keys:[
39,228],
action:function(a,b){
if(!isNaN(b.duration)&&b.duration>0){
if(a.isVideo){
a.showControls();
a.startControlsTimer();
}
var c=Math.min(b.currentTime+a.options.defaultSeekForwardInterval(b),b.duration);
b.setCurrentTime(c);
}
}
},
{
keys:[70],action:function(a,b){
if(typeof a.enterFullScreen!='undefined'){
if(a.isFullScreen){
a.exitFullScreen();
}else{
a.enterFullScreen();
}
}
}
}
]
};
mejs.mepIndex=0;
mejs.players={};
mejs.MediaElementPlayer=function(a,o){
if(!(this instanceof mejs.MediaElementPlayer)){
return new mejs.MediaElementPlayer(a,o);
}
var t=this;
t.$media=t.$node=$(a);
t.node=t.media=t.$media[0];
if(typeof t.node.player!='undefined'){
return t.node.player;
}else{
t.node.player=t;
}
if(typeof o=='undefined'){
o=t.$node.data('mejsoptions');
}
t.options=$.extend({},mejs.MepDefaults,o);
t.id='mep_'+mejs.mepIndex++;
mejs.players[t.id]=t;
t.init();
return t;
};
mejs.MediaElementPlayer.prototype={
hasFocus:false,
controlsAreVisible:true,
init:function(){
var
t=this,
mf=mejs.MediaFeatures,
meOptions=$.extend(true,{},t.options,{
success:function(a,b){t.meReady(a,b)},
error:function(e){t.handleError(e)}
}),
tagName=t.media.tagName.toLowerCase();
t.isDynamic=(tagName!=='audio'&&tagName!=='video');
if(t.isDynamic){
t.isVideo=t.options.isVideo;
}else{
t.isVideo=(tagName!=='audio'&&t.options.isVideo);
}
if((mf.isiPad&&t.options.iPadUseNativeControls)||(mf.isiPhone&&t.options.iPhoneUseNativeControls)){
t.$media.attr('controls','controls');
if(mf.isiPad&&t.media.getAttribute('autoplay')!==null){
t.play();
}
}else if(mf.isAndroid&&t.options.AndroidUseNativeControls){
}else{
t.$media.removeAttr('controls');
t.container=
$('<div id="'+t.id+'" class="mejs-container '+(mejs.MediaFeatures.svg?'svg':'no-svg')+'">'+
'<div class="mejs-inner">'+
'<div class="mejs-mediaelement"></div>'+
'<div class="mejs-layers"></div>'+
'<div class="mejs-controls"></div>'+
'<div class="mejs-clear"></div>'+
'</div>'+
'</div>')
.addClass(t.$media[0].className)
.insertBefore(t.$media);
t.container.addClass(
(mf.isAndroid?'mejs-android ':'')+
(mf.isiOS?'mejs-ios ':'')+
(mf.isiPad?'mejs-ipad ':'')+
(mf.isiPhone?'mejs-iphone ':'')+
(t.isVideo?'mejs-video ':'mejs-audio ')
);
if(mf.isiOS){
var c=t.$media.clone();
t.container.find('.mejs-mediaelement').append(c);
t.$media.remove();
t.$node=t.$media=c;
t.node=t.media=c[0]
}else{
t.container.find('.mejs-mediaelement').append(t.$media);
}
t.controls=t.container.find('.mejs-controls');
t.layers=t.container.find('.mejs-layers');

var d=(t.isVideo?'video':'audio'),
capsTagName=d.substring(0,1).toUpperCase()+d.substring(1);
if(t.options[d+'Width']>0||t.options[d+'Width'].toString().indexOf('%')>-1){
t.width=t.options[d+'Width'];
}else if(t.media.style.width!==''&&t.media.style.width!==null){
t.width=t.media.style.width;
}else if(t.media.getAttribute('width')!==null){
t.width=t.$media.attr('width');
}else{
t.width=t.options['default'+capsTagName+'Width'];
}
if(t.options[d+'Height']>0||t.options[d+'Height'].toString().indexOf('%')>-1){
t.height=t.options[d+'Height'];
}else if(t.media.style.height!==''&&t.media.style.height!==null){
t.height=t.media.style.height;
}else if(t.$media[0].getAttribute('height')!==null){
t.height=t.$media.attr('height');
}else{
t.height=t.options['default'+capsTagName+'Height'];
}
t.setPlayerSize(t.width,t.height);
meOptions.pluginWidth=t.width;
meOptions.pluginHeight=t.height;
}
mejs.MediaElement(t.$media[0],meOptions);
if(typeof(t.container)!='undefined'&&t.controlsAreVisible){
t.container.trigger('controlsshown');
}
},
showControls:function(a){
var t=this;
a=typeof a=='undefined'||a;
if(t.controlsAreVisible)
return;
if(a){
t.controls
.css('visibility','visible')
.stop(true,true).fadeIn(200,function(){
t.controlsAreVisible=true;
t.container.trigger('controlsshown');
});
t.container.find('.mejs-control')
.css('visibility','visible')
.stop(true,true).fadeIn(200,function(){t.controlsAreVisible=true});
}else{
t.controls
.css('visibility','visible')
.css('display','block');
t.container.find('.mejs-control')
.css('visibility','visible')
.css('display','block');
t.controlsAreVisible=true;
t.container.trigger('controlsshown');
}
t.setControlsSize();
},
hideControls:function(a){
var t=this;
a=typeof a=='undefined'||a;
if(!t.controlsAreVisible||t.options.alwaysShowControls)
return;
if(a){
t.controls.stop(true,true).fadeOut(200,function(){
$(this)
.css('visibility','hidden')
.css('display','block');
t.controlsAreVisible=false;
t.container.trigger('controlshidden');
});
t.container.find('.mejs-control').stop(true,true).fadeOut(200,function(){
$(this)
.css('visibility','hidden')
.css('display','block');
});
}else{
t.controls
.css('visibility','hidden')
.css('display','block');
t.container.find('.mejs-control')
.css('visibility','hidden')
.css('display','block');
t.controlsAreVisible=false;
t.container.trigger('controlshidden');
}
},
controlsTimer:null,
startControlsTimer:function(a){
var t=this;
a=typeof a!='undefined'?a:1500;
t.killControlsTimer('start');
t.controlsTimer=setTimeout(function(){
t.hideControls();
t.killControlsTimer('hide');
},a);
},
killControlsTimer:function(a){
var t=this;
if(t.controlsTimer!==null){
clearTimeout(t.controlsTimer);
delete t.controlsTimer;
t.controlsTimer=null;
}
},
controlsEnabled:true,
disableControls:function(){
var t=this;
t.killControlsTimer();
t.hideControls(false);
this.controlsEnabled=false;
},
enableControls:function(){
var t=this;
t.showControls(false);
t.controlsEnabled=true;
},
meReady:function(b,c){
var t=this,
mf=mejs.MediaFeatures,
autoplayAttr=c.getAttribute('autoplay'),
autoplay=!(typeof autoplayAttr=='undefined'||autoplayAttr===null||autoplayAttr==='false'),
featureIndex,
feature;
if(t.created){
return;
}else{
t.created=true;
}
t.media=b;
t.domNode=c;
if(!(mf.isAndroid&&t.options.AndroidUseNativeControls)&&!(mf.isiPad&&t.options.iPadUseNativeControls)&&!(mf.isiPhone&&t.options.iPhoneUseNativeControls)){
t.buildposter(t,t.controls,t.layers,t.media);
t.buildkeyboard(t,t.controls,t.layers,t.media);
t.buildoverlays(t,t.controls,t.layers,t.media);
t.findTracks();
for(featureIndex in t.options.features){
feature=t.options.features[featureIndex];
if(t['build'+feature]){
try{
t['build'+feature](t,t.controls,t.layers,t.media);
}catch(e){
}
}
}
t.container.trigger('controlsready');
t.setPlayerSize(t.width,t.height);
t.setControlsSize();
if(t.isVideo){
if(mejs.MediaFeatures.hasTouch){
t.$media.bind('touchstart',function(){
if(t.controlsAreVisible){
t.hideControls(false);
}else{
if(t.controlsEnabled){
t.showControls(false);
}
}
});
}else{
mejs.MediaElementPlayer.prototype.clickToPlayPauseCallback=function(){
if(t.options.clickToPlayPause){
if(t.media.paused){
t.play();
}else{
t.pause();
}
}
};
t.media.addEventListener('click',t.clickToPlayPauseCallback,false);
t.container
.bind('mouseenter mouseover',function(){
if(t.controlsEnabled){
if(!t.options.alwaysShowControls){
t.killControlsTimer('enter');
t.showControls();
t.startControlsTimer(2500);
}
}
})
.bind('mousemove',function(){
if(t.controlsEnabled){
if(!t.controlsAreVisible){
t.showControls();
}
if(!t.options.alwaysShowControls){
t.startControlsTimer(2500);
}
}
})
.bind('mouseleave',function(){
if(t.controlsEnabled){
if(!t.media.paused&&!t.options.alwaysShowControls){
t.startControlsTimer(1000);
}
}
});
}
if(t.options.hideVideoControlsOnLoad){
t.hideControls(false);
}
if(autoplay&&!t.options.alwaysShowControls){
t.hideControls();
}
if(t.options.enableAutosize){
t.media.addEventListener('loadedmetadata',function(e){
if(t.options.videoHeight<=0&&t.domNode.getAttribute('height')===null&&!isNaN(e.target.videoHeight)){
t.setPlayerSize(e.target.videoWidth,e.target.videoHeight);
t.setControlsSize();
t.media.setVideoSize(e.target.videoWidth,e.target.videoHeight);
}
},false);
}
}
b.addEventListener('play',function(){
var a;
for(a in mejs.players){
var p=mejs.players[a];
if(p.id!=t.id&&t.options.pauseOtherPlayers&&!p.paused&&!p.ended){
p.pause();
}
p.hasFocus=false;
}
t.hasFocus=true;
},false);
t.media.addEventListener('ended',function(e){
if(t.options.autoRewind){
try{
t.media.setCurrentTime(0);
}catch(exp){
}
}
t.media.pause();
if(t.setProgressRail){
t.setProgressRail();
}
if(t.setCurrentRail){
t.setCurrentRail();
}
if(t.options.loop){
t.play();
}else if(!t.options.alwaysShowControls&&t.controlsEnabled){
t.showControls();
}
},false);
t.media.addEventListener('loadedmetadata',function(e){
if(t.updateDuration){
t.updateDuration();
}
if(t.updateCurrent){
t.updateCurrent();
}
if(!t.isFullScreen){
t.setPlayerSize(t.width,t.height);
t.setControlsSize();
}
},false);
setTimeout(function(){
t.setPlayerSize(t.width,t.height);
t.setControlsSize();
},50);
t.globalBind('resize',function(){
if(!(t.isFullScreen||(mejs.MediaFeatures.hasTrueNativeFullScreen&&document.webkitIsFullScreen))){
t.setPlayerSize(t.width,t.height);
}
t.setControlsSize();
});
if(t.media.pluginType=='youtube'){
t.container.find('.mejs-overlay-play').hide();
}
}
if(autoplay&&b.pluginType=='native'){
t.play();
}
if(t.options.success){
if(typeof t.options.success=='string'){
window[t.options.success](t.media,t.domNode,t);
}else{
t.options.success(t.media,t.domNode,t);
}
}
},
handleError:function(e){
var t=this;
t.controls.hide();
if(t.options.error){
t.options.error(e);
}
},
setPlayerSize:function(a,b){
var t=this;
if(typeof a!='undefined'){
t.width=a;
}
if(typeof b!='undefined'){
t.height=b;
}
if(t.height.toString().indexOf('%')>0||t.$node.css('max-width')==='100%'||parseInt(t.$node.css('max-width').replace(/px/,''),10)/t.$node.offsetParent().width()===1||(t.$node[0].currentStyle&&t.$node[0].currentStyle.maxWidth==='100%')){
var
nativeWidth=t.isVideo?((t.media.videoWidth&&t.media.videoWidth>0)?t.media.videoWidth:t.options.defaultVideoWidth):t.options.defaultAudioWidth,
nativeHeight=t.isVideo?((t.media.videoHeight&&t.media.videoHeight>0)?t.media.videoHeight:t.options.defaultVideoHeight):t.options.defaultAudioHeight,
parentWidth=t.container.parent().closest(':visible').width(),
newHeight=t.isVideo||!t.options.autosizeProgress?parseInt(parentWidth*nativeHeight/nativeWidth,10):nativeHeight;
if(t.container.parent()[0].tagName.toLowerCase()==='body'){parentWidth=$(window).width();
newHeight=$(window).height();
}
if(newHeight!=0&&parentWidth!=0){
t.container
.width(parentWidth)
.height(newHeight);
t.$media.add(t.container.find('.mejs-shim'))
.width('100%')
.height('100%');
if(t.isVideo){
if(t.media.setVideoSize){
t.media.setVideoSize(parentWidth,newHeight);
}
}
t.layers.children('.mejs-layer')
.width('100%')
.height('100%');
}
}else{
t.container
.width(t.width)
.height(t.height);
t.layers.children('.mejs-layer')
.width(t.width)
.height(t.height);
}
var c=t.layers.find('.mejs-overlay-play'),
playButton=c.find('.mejs-overlay-button');
c.height(t.container.height()-t.controls.height());
playButton.css('margin-top','-'+(playButton.height()/2-t.controls.height()/2).toString()+'px');
},
setControlsSize:function(){
var t=this,
usedWidth=0,
railWidth=0,
rail=t.controls.find('.mejs-time-rail'),
total=t.controls.find('.mejs-time-total'),
current=t.controls.find('.mejs-time-current'),
loaded=t.controls.find('.mejs-time-loaded'),
others=rail.siblings();
alert("!!ddf!")
if(t.options&&!t.options.autosizeProgress){
railWidth=parseInt(rail.css('width'));
alert("!!!")
}
if(railWidth===0||!railWidth){
others.each(function(){
var a=$(this);
if(a.css('position')!='absolute'&&a.is(':visible')){
usedWidth+=$(this).outerWidth(true);
}
});
railWidth=t.controls.width()-usedWidth-(rail.outerWidth(true)-rail.width());
}
rail.width(railWidth);
total.width(railWidth-(total.outerWidth(true)-total.width()));
if(t.setProgressRail)
t.setProgressRail();
if(t.setCurrentRail)
t.setCurrentRail();
},
buildposter:function(a,b,c,d){
var t=this,
poster=
$('<div class="mejs-poster mejs-layer">'+
'</div>')
.appendTo(c),
posterUrl=a.$media.attr('poster');
if(a.options.poster!==''){
posterUrl=a.options.poster;
}
if(posterUrl!==''&&posterUrl!=null){
t.setPoster(posterUrl);
}else{
poster.hide();
}
d.addEventListener('play',function(){
poster.hide();
},false);
if(a.options.showPosterWhenEnded&&a.options.autoRewind){
d.addEventListener('ended',function(){
poster.show();
},false);
}
},
setPoster:function(a){
var t=this,
posterDiv=t.container.find('.mejs-poster'),
posterImg=posterDiv.find('img');
if(posterImg.length==0){
posterImg=$('<img width="100%" height="100%" />').appendTo(posterDiv);
}
posterImg.attr('src',a);
posterDiv.css({'background-image':'url('+a+')'});
},
buildoverlays:function(a,b,c,d){
var t=this;
if(!a.isVideo)
return;
var
loading=
$('<div class="mejs-overlay mejs-layer">'+
'<div class="mejs-overlay-loading"><span></span></div>'+
'</div>')
.hide().appendTo(c),
error=
$('<div class="mejs-overlay mejs-layer">'+
'<div class="mejs-overlay-error"></div>'+
'</div>')
.hide().appendTo(c),
bigPlay=
$('<div class="mejs-overlay mejs-layer mejs-overlay-play">'+
'<div class="mejs-overlay-button"></div>'+
'</div>')
.appendTo(c)
.bind('click touchstart',function(){
if(t.options.clickToPlayPause){
if(d.paused){
t.play();
}
}
});

d.addEventListener('play',function(){
bigPlay.hide();
loading.hide();
b.find('.mejs-time-buffering').hide();
error.hide();
},false);
d.addEventListener('playing',function(){
bigPlay.hide();
loading.hide();
b.find('.mejs-time-buffering').hide();
error.hide();
},false);
d.addEventListener('seeking',function(){
loading.show();
b.find('.mejs-time-buffering').show();
},false);
d.addEventListener('seeked',function(){
loading.hide();
b.find('.mejs-time-buffering').hide();
},false);
d.addEventListener('pause',function(){
if(!mejs.MediaFeatures.isiPhone){
bigPlay.show();
}
},false);
d.addEventListener('waiting',function(){
loading.show();
b.find('.mejs-time-buffering').show();
},false);
d.addEventListener('loadeddata',function(){
loading.show();
b.find('.mejs-time-buffering').show();
},false);
d.addEventListener('canplay',function(){
loading.hide();
b.find('.mejs-time-buffering').hide();
},false);
d.addEventListener('error',function(){
loading.hide();
b.find('.mejs-time-buffering').hide();
error.show();
error.find('mejs-overlay-error').html("Error loading this resource");
},false);
},
buildkeyboard:function(b,c,d,f){
var t=this;
t.globalBind('keydown',function(e){
if(b.hasFocus&&b.options.enableKeyboard){
for(var i=0,il=b.options.keyActions.length;i<il;i++){
var a=b.options.keyActions[i];
for(var j=0,jl=a.keys.length;j<jl;j++){
if(e.keyCode==a.keys[j]){
e.preventDefault();
a.action(b,f,e.keyCode);
return false;
}
}
}
}
return true;
});
t.globalBind('click',function(a){
if($(a.target).closest('.mejs-container').length==0){
b.hasFocus=false;
}
});
},
findTracks:function(){
var t=this,
tracktags=t.$media.find('track');
t.tracks=[];
tracktags.each(function(a,b){
b=$(b);
t.tracks.push({
srclang:(b.attr('srclang'))?b.attr('srclang').toLowerCase():'',
src:b.attr('src'),
kind:b.attr('kind'),
label:b.attr('label')||'',
entries:[],
isLoaded:false
});
});
},
changeSkin:function(a){
this.container[0].className='mejs-container '+a;
this.setPlayerSize(this.width,this.height);
this.setControlsSize();
},
play:function(){
this.load();
this.media.play();
},
pause:function(){
try{
this.media.pause();
}catch(e){}
},
load:function(){
if(!this.isLoaded){
this.media.load();
}
this.isLoaded=true;
},
setMuted:function(a){
this.media.setMuted(a);
},
setCurrentTime:function(a){
this.media.setCurrentTime(a);
},
getCurrentTime:function(){
return this.media.currentTime;
},
setVolume:function(a){
this.media.setVolume(a);
},
getVolume:function(){
return this.media.volume;
},
setSrc:function(a){
this.media.setSrc(a);
},
remove:function(){
var t=this,featureIndex,feature;
for(featureIndex in t.options.features){
feature=t.options.features[featureIndex];
if(t['clean'+feature]){
try{
t['clean'+feature](t);
}catch(e){
}
}
}
if(!t.isDynamic){
t.$media.prop('controls',true);
t.$node.clone().show().insertBefore(t.container);
t.$node.remove();
}else{
t.$node.insertBefore(t.container);
}
if(t.media.pluginType!=='native'){
t.media.remove();
}
delete mejs.players[t.id];
t.container.remove();
t.globalUnbind();
delete t.node.player;
}
};
(function(){
var e=/^((after|before)print|(before)?unload|hashchange|message|o(ff|n)line|page(hide|show)|popstate|resize|storage)\b/;
function splitEvents(b,c){
var d={d:[],w:[]};
$.each((b||'').split(' '),function(k,v){
var a=v+'.'+c;
if(a.indexOf('.')===0){
d.d.push(a);
d.w.push(a);
}
else{
d[e.test(v)?'w':'d'].push(a);
}
});
d.d=d.d.join(' ');
d.w=d.w.join(' ');
return d;
}
mejs.MediaElementPlayer.prototype.globalBind=function(a,b,c){
var t=this;
a=splitEvents(a,t.id);
if(a.d)$(document).bind(a.d,b,c);
if(a.w)$(window).bind(a.w,b,c);
};
mejs.MediaElementPlayer.prototype.globalUnbind=function(a,b){
var t=this;
a=splitEvents(a,t.id);
if(a.d)$(document).unbind(a.d,b);
if(a.w)$(window).unbind(a.w,b);
};
})();
if(typeof jQuery!='undefined'){
jQuery.fn.mediaelementplayer=function(b){
if(b===false){
this.each(function(){
var a=jQuery(this).data('mediaelementplayer');
if(a){
a.remove();
}
jQuery(this).removeData('mediaelementplayer');
});
}
else{
this.each(function(){
jQuery(this).data('mediaelementplayer',new mejs.MediaElementPlayer(this,b));
});
}
return this;
};
}
$(document).ready(function(){
$('.mejs-player').mediaelementplayer();
});
window.MediaElementPlayer=mejs.MediaElementPlayer;
})(mejs.$);
(function($){
$.extend(mejs.MepDefaults,{
playpauseText:mejs.i18n.t('Play/Pause')
});
$.extend(MediaElementPlayer.prototype,{
buildplaypause:function(a,b,c,d){
var
t=this,
play=
$('<div class="mejs-button mejs-playpause-button mejs-play" >'+
'<button type="button" aria-controls="'+t.id+'" title="'+t.options.playpauseText+'" aria-label="'+t.options.playpauseText+'"></button>'+
'</div>')
.appendTo(b)
.click(function(e){
e.preventDefault();
if(d.paused){
d.play();
}else{
d.pause();
}
return false;
});
d.addEventListener('play',function(){
play.removeClass('mejs-play').addClass('mejs-pause');
},false);
d.addEventListener('playing',function(){
play.removeClass('mejs-play').addClass('mejs-pause');
},false);
d.addEventListener('pause',function(){
play.removeClass('mejs-pause').addClass('mejs-play');
},false);
d.addEventListener('paused',function(){
play.removeClass('mejs-pause').addClass('mejs-play');
},false);
}
});
})(mejs.$);
(function($){
$.extend(mejs.MepDefaults,{
stopText:'Stop'
});
$.extend(MediaElementPlayer.prototype,{
buildstop:function(a,b,c,d){
var t=this,
stop=
$('<div class="mejs-button mejs-stop-button mejs-stop">'+
'<button type="button" aria-controls="'+t.id+'" title="'+t.options.stopText+'" aria-label="'+t.options.stopText+'"></button>'+
'</div>')
.appendTo(b)
.click(function(){
if(!d.paused){
d.pause();
}
if(d.currentTime>0){
d.setCurrentTime(0);
d.pause();
b.find('.mejs-time-current').width('0px');
b.find('.mejs-time-handle').css('left','0px');
b.find('.mejs-time-float-current').html(mejs.Utility.secondsToTimeCode(0));
b.find('.mejs-currenttime').html(mejs.Utility.secondsToTimeCode(0));
c.find('.mejs-poster').show();
}
});
}
});
})(mejs.$);
(function($){
$.extend(MediaElementPlayer.prototype,{
buildprogress:function(a,b,c,d){
$('<div class="mejs-time-rail">'+
'<span class="mejs-time-total">'+
'<span class="mejs-time-buffering"></span>'+
'<span class="mejs-time-loaded"></span>'+
'<span class="mejs-time-current"></span>'+
'<span class="mejs-time-handle"></span>'+
'<span class="mejs-time-float">'+
'<span class="mejs-time-float-current">00:00</span>'+
'<span class="mejs-time-float-corner"></span>'+
'</span>'+
'</span>'+
'</div>')
.appendTo(b);
b.find('.mejs-time-buffering').hide();
var
t=this,
total=b.find('.mejs-time-total'),
loaded=b.find('.mejs-time-loaded'),
current=b.find('.mejs-time-current'),
handle=b.find('.mejs-time-handle'),
timefloat=b.find('.mejs-time-float'),
timefloatcurrent=b.find('.mejs-time-float-current'),
handleMouseMove=function(e){
var x=e.pageX,
offset=total.offset(),
width=total.outerWidth(true),
percentage=0,
newTime=0,
pos=0;
if(d.duration){
if(x<offset.left){
x=offset.left;
}else if(x>width+offset.left){
x=width+offset.left;
}
pos=x-offset.left;
percentage=(pos/width);
newTime=(percentage<=0.02)?0:percentage*d.duration;
if(mouseIsDown&&newTime!==d.currentTime){
d.setCurrentTime(newTime);
}
if(!mejs.MediaFeatures.hasTouch){
timefloat.css('left',pos);
timefloatcurrent.html(mejs.Utility.secondsToTimeCode(newTime));
timefloat.show();
}
}
},
mouseIsDown=false,
mouseIsOver=false;
total
.bind('mousedown',function(e){
if(e.which===1){
mouseIsDown=true;
handleMouseMove(e);
t.globalBind('mousemove.dur',function(e){
handleMouseMove(e);
});
t.globalBind('mouseup.dur',function(e){
mouseIsDown=false;
timefloat.hide();
t.globalUnbind('.dur');
});
return false;
}
})
.bind('mouseenter',function(e){
mouseIsOver=true;
t.globalBind('mousemove.dur',function(e){
handleMouseMove(e);
});
if(!mejs.MediaFeatures.hasTouch){
timefloat.show();
}
})
.bind('mouseleave',function(e){
mouseIsOver=false;
if(!mouseIsDown){
t.globalUnbind('.dur');
timefloat.hide();
}
});
d.addEventListener('progress',function(e){
a.setProgressRail(e);
a.setCurrentRail(e);
},false);
d.addEventListener('timeupdate',function(e){
a.setProgressRail(e);
a.setCurrentRail(e);
},false);
t.loaded=loaded;
t.total=total;
t.current=current;
t.handle=handle;
},
setProgressRail:function(e){
var
t=this,
target=(e!=undefined)?e.target:t.media,
percent=null;
if(target&&target.buffered&&target.buffered.length>0&&target.buffered.end&&target.duration){
percent=target.buffered.end(0)/target.duration;
}
else if(target&&target.bytesTotal!=undefined&&target.bytesTotal>0&&target.bufferedBytes!=undefined){
percent=target.bufferedBytes/target.bytesTotal;
}
else if(e&&e.lengthComputable&&e.total!=0){
percent=e.loaded/e.total;
}
if(percent!==null){
percent=Math.min(1,Math.max(0,percent));
if(t.loaded&&t.total){
t.loaded.width(t.total.width()*percent);
}
}
},
setCurrentRail:function(){
var t=this;
if(t.media.currentTime!=undefined&&t.media.duration){
if(t.total&&t.handle){
var
newWidth=Math.round(t.total.width()*t.media.currentTime/t.media.duration),
handlePos=newWidth-Math.round(t.handle.outerWidth(true)/2);
t.current.width(newWidth);
t.handle.css('left',handlePos);
}
}
}
});
})(mejs.$);
(function($){
$.extend(mejs.MepDefaults,{
duration:-1,
timeAndDurationSeparator:'<span> | </span>'
});
$.extend(MediaElementPlayer.prototype,{
buildcurrent:function(a,b,c,d){
var t=this;
$('<div class="mejs-time">'+
'<span class="mejs-currenttime">'+(a.options.alwaysShowHours?'00:':'')
+(a.options.showTimecodeFrameCount?'00:00:00':'00:00')+'</span>'+
'</div>')
.appendTo(b);
t.currenttime=t.controls.find('.mejs-currenttime');
d.addEventListener('timeupdate',function(){
a.updateCurrent();
},false);
},
buildduration:function(a,b,c,d){
var t=this;
if(b.children().last().find('.mejs-currenttime').length>0){
$(t.options.timeAndDurationSeparator+
'<span class="mejs-duration">'+
(t.options.duration>0?
mejs.Utility.secondsToTimeCode(t.options.duration,t.options.alwaysShowHours||t.media.duration>3600,t.options.showTimecodeFrameCount,t.options.framesPerSecond||25):
((a.options.alwaysShowHours?'00:':'')+(a.options.showTimecodeFrameCount?'00:00:00':'00:00'))
)+
'</span>')
.appendTo(b.find('.mejs-time'));
}else{
b.find('.mejs-currenttime').parent().addClass('mejs-currenttime-container');
$('<div class="mejs-time mejs-duration-container">'+
'<span class="mejs-duration">'+
(t.options.duration>0?
mejs.Utility.secondsToTimeCode(t.options.duration,t.options.alwaysShowHours||t.media.duration>3600,t.options.showTimecodeFrameCount,t.options.framesPerSecond||25):
((a.options.alwaysShowHours?'00:':'')+(a.options.showTimecodeFrameCount?'00:00:00':'00:00'))
)+
'</span>'+
'</div>')
.appendTo(b);
}
t.durationD=t.controls.find('.mejs-duration');
d.addEventListener('timeupdate',function(){
a.updateDuration();
},false);
},
updateCurrent:function(){
var t=this;
if(t.currenttime){
t.currenttime.html(mejs.Utility.secondsToTimeCode(t.media.currentTime,t.options.alwaysShowHours||t.media.duration>3600,t.options.showTimecodeFrameCount,t.options.framesPerSecond||25));
}
},
updateDuration:function(){
var t=this;
t.container.toggleClass("mejs-long-video",t.media.duration>3600);
if(t.durationD&&(t.options.duration>0||t.media.duration)){
t.durationD.html(mejs.Utility.secondsToTimeCode(t.options.duration>0?t.options.duration:t.media.duration,t.options.alwaysShowHours,t.options.showTimecodeFrameCount,t.options.framesPerSecond||25));
}
}
});
})(mejs.$);
(function($){
$.extend(mejs.MepDefaults,{
muteText:mejs.i18n.t('Mute Toggle'),
hideVolumeOnTouchDevices:true,
audioVolume:'horizontal',
videoVolume:'vertical'
});
$.extend(MediaElementPlayer.prototype,{
buildvolume:function(c,d,f,g){
if(mejs.MediaFeatures.hasTouch&&this.options.hideVolumeOnTouchDevices)
return;
var t=this,
mode=(t.isVideo)?t.options.videoVolume:t.options.audioVolume,
mute=(mode=='horizontal')?
$('<div class="mejs-button mejs-volume-button mejs-mute">'+
'<button type="button" aria-controls="'+t.id+'" title="'+t.options.muteText+'" aria-label="'+t.options.muteText+'"></button>'+
'</div>'+
'<div class="mejs-horizontal-volume-slider">'+'<div class="mejs-horizontal-volume-total"></div>'+'<div class="mejs-horizontal-volume-current"></div>'+'<div class="mejs-horizontal-volume-handle"></div>'+'</div>'
)
.appendTo(d):
$('<div class="mejs-button mejs-volume-button mejs-mute">'+
'<button type="button" aria-controls="'+t.id+'" title="'+t.options.muteText+'" aria-label="'+t.options.muteText+'"></button>'+
'<div class="mejs-volume-slider">'+'<div class="mejs-volume-total"></div>'+'<div class="mejs-volume-current"></div>'+'<div class="mejs-volume-handle"></div>'+'</div>'+
'</div>')
.appendTo(d),
volumeSlider=t.container.find('.mejs-volume-slider, .mejs-horizontal-volume-slider'),
volumeTotal=t.container.find('.mejs-volume-total, .mejs-horizontal-volume-total'),
volumeCurrent=t.container.find('.mejs-volume-current, .mejs-horizontal-volume-current'),
volumeHandle=t.container.find('.mejs-volume-handle, .mejs-horizontal-volume-handle'),
positionVolumeHandle=function(a,b){
if(!volumeSlider.is(':visible')&&typeof b=='undefined'){
volumeSlider.show();
positionVolumeHandle(a,true);
volumeSlider.hide()
return;
}
a=Math.max(0,a);
a=Math.min(a,1);
if(a==0){
mute.removeClass('mejs-mute').addClass('mejs-unmute');
}else{
mute.removeClass('mejs-unmute').addClass('mejs-mute');
}
if(mode=='vertical'){
var
totalHeight=volumeTotal.height(),
totalPosition=volumeTotal.position(),
newTop=totalHeight-(totalHeight*a);
volumeHandle.css('top',Math.round(totalPosition.top+newTop-(volumeHandle.height()/2)));
volumeCurrent.height(totalHeight-newTop);
volumeCurrent.css('top',totalPosition.top+newTop);
}else{
var
totalWidth=volumeTotal.width(),
totalPosition=volumeTotal.position(),
newLeft=totalWidth*a;
volumeHandle.css('left',Math.round(totalPosition.left+newLeft-(volumeHandle.width()/2)));
volumeCurrent.width(Math.round(newLeft));
}
},
handleVolumeMove=function(e){
var a=null,
totalOffset=volumeTotal.offset();
if(mode=='vertical'){
var
railHeight=volumeTotal.height(),
totalTop=parseInt(volumeTotal.css('top').replace(/px/,''),10),
newY=e.pageY-totalOffset.top;
a=(railHeight-newY)/railHeight;
if(totalOffset.top==0||totalOffset.left==0)
return;
}else{
var
railWidth=volumeTotal.width(),
newX=e.pageX-totalOffset.left;
a=newX/railWidth;
}
a=Math.max(0,a);
a=Math.min(a,1);
positionVolumeHandle(a);
if(a==0){
g.setMuted(true);
}else{
g.setMuted(false);
}
g.setVolume(a);
},
mouseIsDown=false,
mouseIsOver=false;
mute
.hover(function(){
volumeSlider.show();
mouseIsOver=true;
},function(){
mouseIsOver=false;
if(!mouseIsDown&&mode=='vertical'){
volumeSlider.hide();
}
});
volumeSlider
.bind('mouseover',function(){
mouseIsOver=true;
})
.bind('mousedown',function(e){
handleVolumeMove(e);
t.globalBind('mousemove.vol',function(e){
handleVolumeMove(e);
});
t.globalBind('mouseup.vol',function(){
mouseIsDown=false;
t.globalUnbind('.vol');
if(!mouseIsOver&&mode=='vertical'){
volumeSlider.hide();
}
});
mouseIsDown=true;
return false;
});
mute.find('button').click(function(){
g.setMuted(!g.muted);
});
g.addEventListener('volumechange',function(e){
if(!mouseIsDown){
if(g.muted){
positionVolumeHandle(0);
mute.removeClass('mejs-mute').addClass('mejs-unmute');
}else{
positionVolumeHandle(g.volume);
mute.removeClass('mejs-unmute').addClass('mejs-mute');
}
}
},false);
if(t.container.is(':visible')){
positionVolumeHandle(c.options.startVolume);
if(c.options.startVolume===0){
g.setMuted(true);
}
if(g.pluginType==='native'){
g.setVolume(c.options.startVolume);
}
}
}
});
})(mejs.$);
(function($){
$.extend(mejs.MepDefaults,{
usePluginFullScreen:true,
newWindowCallback:function(){return''},
fullscreenText:mejs.i18n.t('Fullscreen')
});
$.extend(MediaElementPlayer.prototype,{
isFullScreen:false,
isNativeFullScreen:false,
isInIframe:false,
buildfullscreen:function(b,c,d,f){
if(!b.isVideo)
return;
b.isInIframe=(window.location!=window.parent.location);
if(mejs.MediaFeatures.hasTrueNativeFullScreen){
var g=function(e){
if(b.isFullScreen){
if(mejs.MediaFeatures.isFullScreen()){
b.isNativeFullScreen=true;
b.setControlsSize();
}else{
b.isNativeFullScreen=false;
b.exitFullScreen();
}
}
};
if(mejs.MediaFeatures.hasMozNativeFullScreen){
b.globalBind(mejs.MediaFeatures.fullScreenEventName,g);
}else{
b.container.bind(mejs.MediaFeatures.fullScreenEventName,g);
}
}
var t=this,
normalHeight=0,
normalWidth=0,
container=b.container,
fullscreenBtn=
$('<div class="mejs-button mejs-fullscreen-button">'+
'<button type="button" aria-controls="'+t.id+'" title="'+t.options.fullscreenText+'" aria-label="'+t.options.fullscreenText+'"></button>'+
'</div>')
.appendTo(c);
if(t.media.pluginType==='native'||(!t.options.usePluginFullScreen&&!mejs.MediaFeatures.isFirefox)){
fullscreenBtn.click(function(){
var a=(mejs.MediaFeatures.hasTrueNativeFullScreen&&mejs.MediaFeatures.isFullScreen())||b.isFullScreen;
if(a){
b.exitFullScreen();
}else{
b.enterFullScreen();
}
});
}else{
var h=null,
supportsPointerEvents=(function(){
var a=document.createElement('x'),
documentElement=document.documentElement,
getComputedStyle=window.getComputedStyle,
supports;
if(!('pointerEvents'in a.style)){
return false;
}
a.style.pointerEvents='auto';
a.style.pointerEvents='x';
documentElement.appendChild(a);
supports=getComputedStyle&&
getComputedStyle(a,'').pointerEvents==='auto';
documentElement.removeChild(a);
return!!supports;
})();
if(supportsPointerEvents&&!mejs.MediaFeatures.isOpera){
var j=false,
restoreControls=function(){
if(j){
for(var i in hoverDivs){
hoverDivs[i].hide();
}
fullscreenBtn.css('pointer-events','');
t.controls.css('pointer-events','');
t.media.removeEventListener('click',t.clickToPlayPauseCallback);
j=false;
}
},
hoverDivs={},
hoverDivNames=['top','left','right','bottom'],
i,len,
positionHoverDivs=function(){
var a=fullscreenBtn.offset().left-t.container.offset().left,
fullScreenBtnOffsetTop=fullscreenBtn.offset().top-t.container.offset().top,
fullScreenBtnWidth=fullscreenBtn.outerWidth(true),
fullScreenBtnHeight=fullscreenBtn.outerHeight(true),
containerWidth=t.container.width(),
containerHeight=t.container.height();
for(i in hoverDivs){
hoverDivs[i].css({position:'absolute',top:0,left:0})}
hoverDivs['top']
.width(containerWidth)
.height(fullScreenBtnOffsetTop);
hoverDivs['left']
.width(a)
.height(fullScreenBtnHeight)
.css({top:fullScreenBtnOffsetTop});
hoverDivs['right']
.width(containerWidth-a-fullScreenBtnWidth)
.height(fullScreenBtnHeight)
.css({top:fullScreenBtnOffsetTop,
left:a+fullScreenBtnWidth});
hoverDivs['bottom']
.width(containerWidth)
.height(containerHeight-fullScreenBtnHeight-fullScreenBtnOffsetTop)
.css({top:fullScreenBtnOffsetTop+fullScreenBtnHeight});
};
t.globalBind('resize',function(){
positionHoverDivs();
});
for(i=0,len=hoverDivNames.length;i<len;i++){
hoverDivs[hoverDivNames[i]]=$('<div class="mejs-fullscreen-hover" />').appendTo(t.container).mouseover(restoreControls).hide();
}
fullscreenBtn.on('mouseover',function(){
if(!t.isFullScreen){
var a=fullscreenBtn.offset(),
containerPos=b.container.offset();
f.positionFullscreenButton(a.left-containerPos.left,a.top-containerPos.top,false);
fullscreenBtn.css('pointer-events','none');
t.controls.css('pointer-events','none');
t.media.addEventListener('click',t.clickToPlayPauseCallback);
for(i in hoverDivs){
hoverDivs[i].show();
}
positionHoverDivs();
j=true;
}
});
f.addEventListener('fullscreenchange',function(e){
t.isFullScreen=!t.isFullScreen;
if(t.isFullScreen){
t.media.removeEventListener('click',t.clickToPlayPauseCallback);
}else{
t.media.addEventListener('click',t.clickToPlayPauseCallback);
}
restoreControls();
});
t.globalBind('mousemove',function(e){
if(j){
var a=fullscreenBtn.offset();
if(e.pageY<a.top||e.pageY>a.top+fullscreenBtn.outerHeight(true)||
e.pageX<a.left||e.pageX>a.left+fullscreenBtn.outerWidth(true)
){
fullscreenBtn.css('pointer-events','');
t.controls.css('pointer-events','');
j=false;
}
}
});
}else{
fullscreenBtn
.on('mouseover',function(){
if(h!==null){
clearTimeout(h);
delete h;
}
var a=fullscreenBtn.offset(),
containerPos=b.container.offset();
f.positionFullscreenButton(a.left-containerPos.left,a.top-containerPos.top,true);
})
.on('mouseout',function(){
if(h!==null){
clearTimeout(h);
delete h;
}
h=setTimeout(function(){
f.hideFullscreenButton();
},1500);
});
}
}
b.fullscreenBtn=fullscreenBtn;
t.globalBind('keydown',function(e){
if(((mejs.MediaFeatures.hasTrueNativeFullScreen&&mejs.MediaFeatures.isFullScreen())||t.isFullScreen)&&e.keyCode==27){
b.exitFullScreen();
}
});
},
cleanfullscreen:function(a){
a.exitFullScreen();
},
containerSizeTimeout:null,
enterFullScreen:function(){
var t=this;
if(t.media.pluginType!=='native'&&(mejs.MediaFeatures.isFirefox||t.options.usePluginFullScreen)){
return;
}
$(document.documentElement).addClass('mejs-fullscreen');
normalHeight=t.container.height();
normalWidth=t.container.width();
if(t.media.pluginType==='native'){
if(mejs.MediaFeatures.hasTrueNativeFullScreen){
mejs.MediaFeatures.requestFullScreen(t.container[0]);
if(t.isInIframe){
setTimeout(function checkFullscreen(){
if(t.isNativeFullScreen){
if($(window).width()!==screen.width){
t.exitFullScreen();
}else{
setTimeout(checkFullscreen,500);
}
}
},500);
}
}else if(mejs.MediaFeatures.hasSemiNativeFullScreen){
t.media.webkitEnterFullscreen();
return;
}
}
if(t.isInIframe){
var a=t.options.newWindowCallback(this);
if(a!==''){
if(!mejs.MediaFeatures.hasTrueNativeFullScreen){
t.pause();
window.open(a,t.id,'top=0,left=0,width='+screen.availWidth+',height='+screen.availHeight+',resizable=yes,scrollbars=no,status=no,toolbar=no');
return;
}else{
setTimeout(function(){
if(!t.isNativeFullScreen){
t.pause();
window.open(a,t.id,'top=0,left=0,width='+screen.availWidth+',height='+screen.availHeight+',resizable=yes,scrollbars=no,status=no,toolbar=no');
}
},250);
}
}
}
t.container
.addClass('mejs-container-fullscreen')
.width('100%')
.height('100%');
t.containerSizeTimeout=setTimeout(function(){
t.container.css({width:'100%',height:'100%'});
t.setControlsSize();
},500);
if(t.media.pluginType==='native'){
t.$media
.width('100%')
.height('100%');
}else{
t.container.find('.mejs-shim')
.width('100%')
.height('100%');
t.media.setVideoSize($(window).width(),$(window).height());
}
t.layers.children('div')
.width('100%')
.height('100%');
if(t.fullscreenBtn){
t.fullscreenBtn
.removeClass('mejs-fullscreen')
.addClass('mejs-unfullscreen');
}
t.setControlsSize();
t.isFullScreen=true;
},
exitFullScreen:function(){
var t=this;
clearTimeout(t.containerSizeTimeout);
if(t.media.pluginType!=='native'&&mejs.MediaFeatures.isFirefox){
t.media.setFullscreen(false);
return;
}
if(mejs.MediaFeatures.hasTrueNativeFullScreen&&(mejs.MediaFeatures.isFullScreen()||t.isFullScreen)){
mejs.MediaFeatures.cancelFullScreen();
}
$(document.documentElement).removeClass('mejs-fullscreen');
t.container
.removeClass('mejs-container-fullscreen')
.width(normalWidth)
.height(normalHeight);
if(t.media.pluginType==='native'){
t.$media
.width(normalWidth)
.height(normalHeight);
}else{
t.container.find('.mejs-shim')
.width(normalWidth)
.height(normalHeight);
t.media.setVideoSize(normalWidth,normalHeight);
}
t.layers.children('div')
.width(normalWidth)
.height(normalHeight);
t.fullscreenBtn
.removeClass('mejs-unfullscreen')
.addClass('mejs-fullscreen');
t.setControlsSize();
t.isFullScreen=false;
}
});
})(mejs.$);
(function($){
$.extend(mejs.MepDefaults,{
startLanguage:'',
tracksText:mejs.i18n.t('Captions/Subtitles'),
hideCaptionsButtonWhenEmpty:true,
toggleCaptionsButtonWhenOnlyOne:false,
slidesSelector:''
});
$.extend(MediaElementPlayer.prototype,{
hasChapters:false,
buildtracks:function(b,c,d,f){
if(b.tracks.length==0)
return;
var t=this,
i,
options='';
if(t.domNode.textTracks){for(var i=t.domNode.textTracks.length-1;i>=0;i--){
t.domNode.textTracks[i].mode="hidden";
}
}
b.chapters=
$('<div class="mejs-chapters mejs-layer"></div>')
.prependTo(d).hide();
b.captions=
$('<div class="mejs-captions-layer mejs-layer"><div class="mejs-captions-position mejs-captions-position-hover"><span class="mejs-captions-text"></span></div></div>')
.prependTo(d).hide();
b.captionsText=b.captions.find('.mejs-captions-text');
b.captionsButton=
$('<div class="mejs-button mejs-captions-button">'+
'<button type="button" aria-controls="'+t.id+'" title="'+t.options.tracksText+'" aria-label="'+t.options.tracksText+'"></button>'+
'<div class="mejs-captions-selector">'+
'<ul>'+
'<li>'+
'<input type="radio" name="'+b.id+'_captions" id="'+b.id+'_captions_none" value="none" checked="checked" />'+
'<label for="'+b.id+'_captions_none">'+mejs.i18n.t('None')+'</label>'+
'</li>'+
'</ul>'+
'</div>'+
'</div>')
.appendTo(c);
var g=0;
for(i=0;i<b.tracks.length;i++){
if(b.tracks[i].kind=='subtitles'){
g++;
}
}
if(t.options.toggleCaptionsButtonWhenOnlyOne&&g==1){
b.captionsButton.on('click',function(){
if(b.selectedTrack==null){
var a=b.tracks[0].srclang;
}else{
var a='none';
}
b.setTrack(a);
});
}else{
b.captionsButton.hover(function(){
$(this).find('.mejs-captions-selector').css('visibility','visible');
},function(){
$(this).find('.mejs-captions-selector').css('visibility','hidden');
})
.on('click','input[type=radio]',function(){
lang=this.value;
b.setTrack(lang);
});
}
if(!b.options.alwaysShowControls){
b.container
.bind('controlsshown',function(){
b.container.find('.mejs-captions-position').addClass('mejs-captions-position-hover');
})
.bind('controlshidden',function(){
if(!f.paused){
b.container.find('.mejs-captions-position').removeClass('mejs-captions-position-hover');
}
});
}else{
b.container.find('.mejs-captions-position').addClass('mejs-captions-position-hover');
}
b.trackToLoad=-1;
b.selectedTrack=null;
b.isLoadingTrack=false;
for(i=0;i<b.tracks.length;i++){
if(b.tracks[i].kind=='subtitles'){
b.addTrackButton(b.tracks[i].srclang,b.tracks[i].label);
}
}
b.loadNextTrack();
f.addEventListener('timeupdate',function(e){
b.displayCaptions();
},false);
if(b.options.slidesSelector!=''){
b.slidesContainer=$(b.options.slidesSelector);
f.addEventListener('timeupdate',function(e){
b.displaySlides();
},false);
}
f.addEventListener('loadedmetadata',function(e){
b.displayChapters();
},false);
b.container.hover(
function(){
if(b.hasChapters){
b.chapters.css('visibility','visible');
b.chapters.fadeIn(200).height(b.chapters.find('.mejs-chapter').outerHeight());
}
},
function(){
if(b.hasChapters&&!f.paused){
b.chapters.fadeOut(200,function(){
$(this).css('visibility','hidden');
$(this).css('display','block');
});
}
});
if(b.node.getAttribute('autoplay')!==null){
b.chapters.css('visibility','hidden');
}
},
setTrack:function(a){
var t=this,
i;
if(a=='none'){
t.selectedTrack=null;
t.captionsButton.removeClass('mejs-captions-enabled');
}else{
for(i=0;i<t.tracks.length;i++){
if(t.tracks[i].srclang==a){
if(t.selectedTrack==null)
t.captionsButton.addClass('mejs-captions-enabled');
t.selectedTrack=t.tracks[i];
t.captions.attr('lang',t.selectedTrack.srclang);
t.displayCaptions();
break;
}
}
}
},
loadNextTrack:function(){
var t=this;
t.trackToLoad++;
if(t.trackToLoad<t.tracks.length){
t.isLoadingTrack=true;
t.loadTrack(t.trackToLoad);
}else{
t.isLoadingTrack=false;
t.checkForTracks();
}
},
loadTrack:function(a){
var
t=this,
track=t.tracks[a],
after=function(){
track.isLoaded=true;
t.enableTrackButton(track.srclang,track.label);
t.loadNextTrack();
};
$.ajax({
url:track.src,
dataType:"text",
success:function(d){
if(typeof d=="string"&&(/<tt\s+xml/ig).exec(d)){
track.entries=mejs.TrackFormatParser.dfxp.parse(d);
}else{
track.entries=mejs.TrackFormatParser.webvvt.parse(d);
}
after();
if(track.kind=='chapters'){
t.media.addEventListener('play',function(e){
if(t.media.duration>0){
t.displayChapters(track);
}
},false);
}
if(track.kind=='slides'){
t.setupSlides(track);
}
},
error:function(){
t.loadNextTrack();
}
});
},
enableTrackButton:function(a,b){
var t=this;
if(b===''){
b=mejs.language.codes[a]||a;
}
t.captionsButton
.find('input[value='+a+']')
.prop('disabled',false)
.siblings('label')
.html(b);
if(t.options.startLanguage==a){
$('#'+t.id+'_captions_'+a).click();
}
t.adjustLanguageBox();
},
addTrackButton:function(a,b){
var t=this;
if(b===''){
b=mejs.language.codes[a]||a;
}
t.captionsButton.find('ul').append(
$('<li>'+
'<input type="radio" name="'+t.id+'_captions" id="'+t.id+'_captions_'+a+'" value="'+a+'" disabled="disabled" />'+
'<label for="'+t.id+'_captions_'+a+'">'+b+' (loading)'+'</label>'+
'</li>')
);
t.adjustLanguageBox();
t.container.find('.mejs-captions-translations option[value='+a+']').remove();
},
adjustLanguageBox:function(){
var t=this;
t.captionsButton.find('.mejs-captions-selector').height(
t.captionsButton.find('.mejs-captions-selector ul').outerHeight(true)+
t.captionsButton.find('.mejs-captions-translations').outerHeight(true)
);
},
checkForTracks:function(){
var
t=this,
hasSubtitles=false;
if(t.options.hideCaptionsButtonWhenEmpty){
for(i=0;i<t.tracks.length;i++){
if(t.tracks[i].kind=='subtitles'){
hasSubtitles=true;
break;
}
}
if(!hasSubtitles){
t.captionsButton.hide();
t.setControlsSize();
}
}
},
displayCaptions:function(){
if(typeof this.tracks=='undefined')
return;
var
t=this,
i,
track=t.selectedTrack;
if(track!=null&&track.isLoaded){
for(i=0;i<track.entries.times.length;i++){
if(t.media.currentTime>=track.entries.times[i].start&&t.media.currentTime<=track.entries.times[i].stop){
t.captionsText.html(track.entries.text[i]);
t.captions.show().height(0);
return}
}
t.captions.hide();
}else{
t.captions.hide();
}
},
setupSlides:function(a){
var t=this;
t.slides=a;
t.slides.entries.imgs=[t.slides.entries.text.length];
t.showSlide(0);
},
showSlide:function(a){
if(typeof this.tracks=='undefined'||typeof this.slidesContainer=='undefined'){
return;
}
var t=this,
url=t.slides.entries.text[a],
img=t.slides.entries.imgs[a];
if(typeof img=='undefined'||typeof img.fadeIn=='undefined'){
t.slides.entries.imgs[a]=img=$('<img src="'+url+'">')
.on('load',function(){
img.appendTo(t.slidesContainer)
.hide()
.fadeIn()
.siblings(':visible')
.fadeOut();
});
}else{
if(!img.is(':visible')&&!img.is(':animated')){
img.fadeIn()
.siblings(':visible')
.fadeOut();
}
}
},
displaySlides:function(){
if(typeof this.slides=='undefined')
return;
var
t=this,
slides=t.slides,
i;
for(i=0;i<slides.entries.times.length;i++){
if(t.media.currentTime>=slides.entries.times[i].start&&t.media.currentTime<=slides.entries.times[i].stop){
t.showSlide(i);
return}
}
},
displayChapters:function(){
var
t=this,
i;
for(i=0;i<t.tracks.length;i++){
if(t.tracks[i].kind=='chapters'&&t.tracks[i].isLoaded){
t.drawChapters(t.tracks[i]);
t.hasChapters=true;
break;
}
}
},
drawChapters:function(a){
var
t=this,
i,
dur,
percent=0,
usedPercent=0;
t.chapters.empty();
for(i=0;i<a.entries.times.length;i++){
dur=a.entries.times[i].stop-a.entries.times[i].start;
percent=Math.floor(dur/t.media.duration*100);
if(percent+usedPercent>100||i==a.entries.times.length-1&&percent+usedPercent<100){
percent=100-usedPercent;
}
t.chapters.append($(
'<div class="mejs-chapter" rel="'+a.entries.times[i].start+'" style="left: '+usedPercent.toString()+'%;width: '+percent.toString()+'%;">'+
'<div class="mejs-chapter-block'+((i==a.entries.times.length-1)?' mejs-chapter-block-last':'')+'">'+
'<span class="ch-title">'+a.entries.text[i]+'</span>'+
'<span class="ch-time">'+mejs.Utility.secondsToTimeCode(a.entries.times[i].start)+'&ndash;'+mejs.Utility.secondsToTimeCode(a.entries.times[i].stop)+'</span>'+
'</div>'+
'</div>'));
usedPercent+=percent;
}
t.chapters.find('div.mejs-chapter').click(function(){
t.media.setCurrentTime(parseFloat($(this).attr('rel')));
if(t.media.paused){
t.media.play();
}
});
t.chapters.show();
}
});
mejs.language={
codes:{
af:'Afrikaans',
sq:'Albanian',
ar:'Arabic',
be:'Belarusian',
bg:'Bulgarian',
ca:'Catalan',
zh:'Chinese',
'zh-cn':'Chinese Simplified',
'zh-tw':'Chinese Traditional',
hr:'Croatian',
cs:'Czech',
da:'Danish',
nl:'Dutch',
en:'English',
et:'Estonian',
tl:'Filipino',
fi:'Finnish',
fr:'French',
gl:'Galician',
de:'German',
el:'Greek',
ht:'Haitian Creole',
iw:'Hebrew',
hi:'Hindi',
hu:'Hungarian',
is:'Icelandic',
id:'Indonesian',
ga:'Irish',
it:'Italian',
ja:'Japanese',
ko:'Korean',
lv:'Latvian',
lt:'Lithuanian',
mk:'Macedonian',
ms:'Malay',
mt:'Maltese',
no:'Norwegian',
fa:'Persian',
pl:'Polish',
pt:'Portuguese',
ro:'Romanian',
ru:'Russian',
sr:'Serbian',
sk:'Slovak',
sl:'Slovenian',
es:'Spanish',
sw:'Swahili',
sv:'Swedish',
tl:'Tagalog',
th:'Thai',
tr:'Turkish',
uk:'Ukrainian',
vi:'Vietnamese',
cy:'Welsh',
yi:'Yiddish'
}
};

mejs.TrackFormatParser={
webvvt:{
pattern_identifier:/^([a-zA-z]+-)?[0-9]+$/,
pattern_timecode:/^([0-9]{2}:[0-9]{2}:[0-9]{2}([,.][0-9]{1,3})?) --\> ([0-9]{2}:[0-9]{2}:[0-9]{2}([,.][0-9]{3})?)(.*)$/,
parse:function(a){
var
i=0,
lines=mejs.TrackFormatParser.split2(a,/\r?\n/),
entries={text:[],times:[]},
timecode,
text;
for(;i<lines.length;i++){
if(this.pattern_identifier.exec(lines[i])){
i++;
timecode=this.pattern_timecode.exec(lines[i]);
if(timecode&&i<lines.length){
i++;
text=lines[i];
i++;
while(lines[i]!==''&&i<lines.length){
text=text+'\n'+lines[i];
i++;
}
text=$.trim(text).replace(/(\b(https?|ftp|file):\/\/[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|])/ig,"<a href='$1' target='_blank'>$1</a>");
entries.text.push(text);
entries.times.push(
{
start:(mejs.Utility.convertSMPTEtoSeconds(timecode[1])==0)?0.200:mejs.Utility.convertSMPTEtoSeconds(timecode[1]),
stop:mejs.Utility.convertSMPTEtoSeconds(timecode[3]),
settings:timecode[5]
});
}
}
}
return entries;
}
},
dfxp:{
parse:function(a){
a=$(a).filter("tt");
var
i=0,
container=a.children("div").eq(0),
lines=container.find("p"),
styleNode=a.find("#"+container.attr("style")),
styles,
begin,
end,
text,
entries={text:[],times:[]};
if(styleNode.length){
var b=styleNode.removeAttr("id").get(0).attributes;
if(b.length){
styles={};
for(i=0;i<b.length;i++){
styles[b[i].name.split(":")[1]]=b[i].value;
}
}
}
for(i=0;i<lines.length;i++){
var c;
var d={
start:null,
stop:null,
c:null
};
if(lines.eq(i).attr("begin"))d.start=mejs.Utility.convertSMPTEtoSeconds(lines.eq(i).attr("begin"));
if(!d.start&&lines.eq(i-1).attr("end"))d.start=mejs.Utility.convertSMPTEtoSeconds(lines.eq(i-1).attr("end"));
if(lines.eq(i).attr("end"))d.stop=mejs.Utility.convertSMPTEtoSeconds(lines.eq(i).attr("end"));
if(!d.stop&&lines.eq(i+1).attr("begin"))d.stop=mejs.Utility.convertSMPTEtoSeconds(lines.eq(i+1).attr("begin"));
if(styles){
c="";
for(var e in styles){
c+=e+":"+styles[e]+";";
}
}
if(c)d.style=c;
if(d.start==0)d.start=0.200;
entries.times.push(d);
text=$.trim(lines.eq(i).html()).replace(/(\b(https?|ftp|file):\/\/[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|])/ig,"<a href='$1' target='_blank'>$1</a>");
entries.text.push(text);
if(entries.times.start==0)entries.times.start=2;
}
return entries;
}
},
split2:function(a,b){
return a.split(b);
}
};
if('x\n\ny'.split(/\n/gi).length!=3){
mejs.TrackFormatParser.split2=function(a,b){
var
parts=[],
chunk='',
i;
for(i=0;i<a.length;i++){
chunk+=a.substring(i,i+1);
if(b.test(chunk)){
parts.push(chunk.replace(b,''));
chunk='';
}
}
parts.push(chunk);
return parts;
}
}
})(mejs.$);

(function($){
$.extend(mejs.MepDefaults,
{'contextMenuItems':[
{
render:function(a){
if(typeof a.enterFullScreen=='undefined')
return null;
if(a.isFullScreen){
return mejs.i18n.t('Turn off Fullscreen');
}else{
return mejs.i18n.t('Go Fullscreen');
}
},
click:function(a){
if(a.isFullScreen){
a.exitFullScreen();
}else{
a.enterFullScreen();
}
}
}
,
{
render:function(a){
if(a.media.muted){
return mejs.i18n.t('Unmute');
}else{
return mejs.i18n.t('Mute');
}
},
click:function(a){
if(a.media.muted){
a.setMuted(false);
}else{
a.setMuted(true);
}
}
},
{
isSeparator:true
}
,
{
render:function(a){
return mejs.i18n.t('Download Video');
},
click:function(a){
window.location.href=a.media.currentSrc;
}
}
]}
);
$.extend(MediaElementPlayer.prototype,{
buildcontextmenu:function(a,b,c,d){
a.contextMenu=$('<div class="mejs-contextmenu"></div>')
.appendTo($('body'))
.hide();
a.container.bind('contextmenu',function(e){
if(a.isContextMenuEnabled){
e.preventDefault();
a.renderContextMenu(e.clientX-1,e.clientY-1);
return false;
}
});
a.container.bind('click',function(){
a.contextMenu.hide();
});
a.contextMenu.bind('mouseleave',function(){
a.startContextMenuTimer();
});
},
cleancontextmenu:function(a){
a.contextMenu.remove();
},
isContextMenuEnabled:true,
enableContextMenu:function(){
this.isContextMenuEnabled=true;
},
disableContextMenu:function(){
this.isContextMenuEnabled=false;
},
contextMenuTimeout:null,
startContextMenuTimer:function(){
var t=this;
t.killContextMenuTimer();
t.contextMenuTimer=setTimeout(function(){
t.hideContextMenu();
t.killContextMenuTimer();
},750);
},
killContextMenuTimer:function(){
var a=this.contextMenuTimer;
if(a!=null){
clearTimeout(a);
delete a;
a=null;
}
},
hideContextMenu:function(){
this.contextMenu.hide();
},
renderContextMenu:function(x,y){
var t=this,
html='',
items=t.options.contextMenuItems;
for(var i=0,il=items.length;i<il;i++){
if(items[i].isSeparator){
html+='<div class="mejs-contextmenu-separator"></div>';
}else{
var b=items[i].render(t);
if(b!=null){
html+='<div class="mejs-contextmenu-item" data-itemindex="'+i+'" id="element-'+(Math.random()*1000000)+'">'+b+'</div>';
}
}
}
t.contextMenu
.empty()
.append($(html))
.css({top:y,left:x})
.show();
t.contextMenu.find('.mejs-contextmenu-item').each(function(){
var a=$(this),
itemIndex=parseInt(a.data('itemindex'),10),
item=t.options.contextMenuItems[itemIndex];
if(typeof item.show!='undefined')
item.show(a,t);
a.click(function(){
if(typeof item.click!='undefined')
item.click(t);
t.contextMenu.hide();
});
});
setTimeout(function(){
t.killControlsTimer('rev3');
},100);
}
});
})(mejs.$);

(function($){
$.extend(mejs.MepDefaults,{
postrollCloseText:mejs.i18n.t('Close')
});
$.extend(MediaElementPlayer.prototype,{
buildpostroll:function(c,d,f,g){
var
t=this,
postrollLink=t.container.find('link[rel="postroll"]').attr('href');
if(typeof postrollLink!=='undefined'){
c.postroll=
$('<div class="mejs-postroll-layer mejs-layer"><a class="mejs-postroll-close" onclick="$(this).parent().hide();return false;">'+t.options.postrollCloseText+'</a><div class="mejs-postroll-layer-content"></div></div>').prependTo(f).hide();
t.media.addEventListener('ended',function(e){
$.ajax({
dataType:'html',
url:postrollLink,
success:function(a,b){
f.find('.mejs-postroll-layer-content').html(a);
}
});
c.postroll.show();
},false);
}
}
});
})(mejs.$);
;

;
(function($){
$.extend(mejs.MepDefaults,{
loopText:'Repeat On/Off',
shuffleText:'Shuffle On/Off',
nextText:'Next Track',
prevText:'Previous Track',
playlistText:'Show/Hide Playlist'
});
$.extend(MediaElementPlayer.prototype,{
buildloop:function(a,b,c,d){
var t=this;
var f=$('<div class="mejs-button mejs-loop-button '+((a.options.loop)?'mejs-loop-on':'mejs-loop-off')+'">'+
'<button type="button" aria-controls="'+a.id+'" title="'+a.options.loopText+'"></button>'+
'</div>')
.appendTo(b)
.click(function(e){
a.options.loop=!a.options.loop;
$(d).trigger('mep-looptoggle',[a.options.loop]);
if(a.options.loop){
f.removeClass('mejs-loop-off').addClass('mejs-loop-on');
}
else{
f.removeClass('mejs-loop-on').addClass('mejs-loop-off');
}
});
t.loopToggle=t.controls.find('.mejs-loop-button');
},
loopToggleClick:function(){
var t=this;
t.loopToggle.trigger('click');
},
buildshuffle:function(a,b,c,d){
var t=this;
var f=$('<div class="mejs-button mejs-shuffle-button '+((a.options.shuffle)?'mejs-shuffle-on':'mejs-shuffle-off')+'">'+
'<button type="button" aria-controls="'+a.id+'" title="'+a.options.shuffleText+'"></button>'+
'</div>')
.appendTo(b)
.click(function(e){
a.options.shuffle=!a.options.shuffle;
$(d).trigger('mep-shuffletoggle',[a.options.shuffle]);
if(a.options.shuffle){
f.removeClass('mejs-shuffle-off').addClass('mejs-shuffle-on');
}
else{
f.removeClass('mejs-shuffle-on').addClass('mejs-shuffle-off');
}
});
t.shuffleToggle=t.controls.find('.mejs-shuffle-button');
},
shuffleToggleClick:function(){
var t=this;
t.shuffleToggle.trigger('click');
},
buildprevtrack:function(a,b,c,d){
var t=this;
var f=$('<div class="mejs-button mejs-prevtrack-button mejs-prevtrack">'+
'<button type="button" aria-controls="'+a.id+'" title="'+a.options.prevText+'"></button>'+
'</div>')
.appendTo(b)
.click(function(e){
$(d).trigger('mep-playprevtrack');
a.playPrevTrack();
});
t.prevTrack=t.controls.find('.mejs-prevtrack-button');
},
prevTrackClick:function(){
var t=this;
t.prevTrack.trigger('click');
},
buildnexttrack:function(a,b,c,d){
var t=this;
var f=$('<div class="mejs-button mejs-nexttrack-button mejs-nexttrack">'+
'<button type="button" aria-controls="'+a.id+'" title="'+a.options.nextText+'"></button>'+
'</div>')
.appendTo(b)
.click(function(e){
$(d).trigger('mep-playnexttrack');
a.playNextTrack();
});
t.nextTrack=t.controls.find('.mejs-nexttrack-button');
},
nextTrackClick:function(){
var t=this;
t.nextTrack.trigger('click');
},
buildplaylist:function(a,b,c,d){
var t=this;
var f=$('<div class="mejs-button mejs-playlist-button '+((a.options.playlist)?'mejs-hide-playlist':'mejs-show-playlist')+'">'+
'<button type="button" aria-controls="'+a.id+'" title="'+a.options.playlistText+'"></button>'+
'</div>')
.appendTo(b)
.click(function(e){
a.options.playlist=!a.options.playlist;
$(d).trigger('mep-playlisttoggle',[a.options.playlist]);
if(a.options.playlist){
c.children('.mejs-playlist').show();
f.removeClass('mejs-show-playlist').addClass('mejs-hide-playlist');
}
else{
c.children('.mejs-playlist').hide();
f.removeClass('mejs-hide-playlist').addClass('mejs-show-playlist');
}
});
t.playlistToggle=t.controls.find('.mejs-playlist-button');
},
playlistToggleClick:function(){
var t=this;
t.playlistToggle.trigger('click');
},
buildplaylistfeature:function(d,f,g,h){
var i=$('<div class="mejs-playlist mejs-layer">'+
'<ul class="mejs"></ul>'+
'</div>')
.appendTo(g);
if(!d.options.playlist){
i.hide();
}
if(d.options.playlistposition=='bottom'){
i.css('top',d.options.audioHeight+'px');
}
else{
i.css('bottom',d.options.audioHeight+'px');
}
var j=function(a){
var b=a.split("/");
if(b.length>0){
return decodeURIComponent(b[b.length-1]);
}
else{
return'';
}
};
var k=[];
$('#'+d.id).find('.mejs-mediaelement source').each(function(a,b){
if($.trim(this.src)!=''){
var c={};
c.source=$.trim(this.src);
if($.trim(this.title)!=''){
c.name=$.trim(this.title);
}
else{
c.name=j(c.source);
}
k.push(c);
}
});
for(var l in k){
g.find('.mejs-playlist > ul').append('<li data-url="'+k[l].source+'" title="'+k[l].name+'">'+k[l].name+'</li>');
}
g.find('li:first').addClass('current played');
g.find('.mejs-playlist > ul li').click(function(e){
if(!$(this).hasClass('current')){
$(this).addClass('played');
d.playTrack($(this));
}
else{
d.play();
}
});
h.addEventListener('ended',function(e){
d.playNextTrack();
},false);
},
playNextTrack:function(){
var t=this;
var a=t.layers.find('.mejs-playlist > ul > li');
var b=a.filter('.current');
var c=a.not('.played');
if(c.length<1){
b.removeClass('played').siblings().removeClass('played');
c=a.not('.current');
}
if(t.options.shuffle){
var d=Math.floor(Math.random()*c.length);
var e=c.eq(d);
}
else{
var e=b.next();
if(e.length<1&&t.options.loop){
e=b.siblings().first();
}
}
if(e.length==1){
e.addClass('played');
t.playTrack(e);
}
},
playPrevTrack:function(){
var t=this;
var a=t.layers.find('.mejs-playlist > ul > li');
var b=a.filter('.current');
var c=a.filter('.played').not('.current');
if(c.length<1){
b.removeClass('played');
c=a.not('.current');
}
if(t.options.shuffle){
var d=Math.floor(Math.random()*c.length);
var e=c.eq(d);
}
else{
var e=b.prev();
if(e.length<1&&t.options.loop){
e=b.siblings().last();
}
}
if(e.length==1){
b.removeClass('played');
t.playTrack(e);
}
},
playTrack:function(a){
var t=this;
t.pause();
t.setSrc(a.attr('data-url'));
t.load();
t.play();
a.addClass('current').siblings().removeClass('current');
},
playTrackURL:function(a){
var t=this;
var b=t.layers.find('.mejs-playlist > ul > li');
var c=b.filter('[data-url="'+a+'"]');
t.playTrack(c);
}
});
})(mejs.$);
;

;
(function($){
$.extend(mejs.MepDefaults,{
loopText:'Repeat On/Off',
shuffleText:'Shuffle On/Off',
nextText:'Next Track',
prevText:'Previous Track',
playlistText:'Show/Hide Playlist'
});
$.extend(MediaElementPlayer.prototype,{
buildloop:function(a,b,c,d){
var t=this;
var f=$('<div class="mejs-button mejs-loop-button '+((a.options.loop)?'mejs-loop-on':'mejs-loop-off')+'">'+
'<button type="button" aria-controls="'+a.id+'" title="'+a.options.loopText+'"></button>'+
'</div>')
.appendTo(b)
.click(function(e){
a.options.loop=!a.options.loop;
$(d).trigger('mep-looptoggle',[a.options.loop]);
if(a.options.loop){
f.removeClass('mejs-loop-off').addClass('mejs-loop-on');
}
else{
f.removeClass('mejs-loop-on').addClass('mejs-loop-off');
}
});
t.loopToggle=t.controls.find('.mejs-loop-button');
},
loopToggleClick:function(){
var t=this;
t.loopToggle.trigger('click');
},
buildshuffle:function(a,b,c,d){
var t=this;
var f=$('<div class="mejs-button mejs-shuffle-button '+((a.options.shuffle)?'mejs-shuffle-on':'mejs-shuffle-off')+'">'+
'<button type="button" aria-controls="'+a.id+'" title="'+a.options.shuffleText+'"></button>'+
'</div>')
.appendTo(b)
.click(function(e){
a.options.shuffle=!a.options.shuffle;
$(d).trigger('mep-shuffletoggle',[a.options.shuffle]);
if(a.options.shuffle){
f.removeClass('mejs-shuffle-off').addClass('mejs-shuffle-on');
}
else{
f.removeClass('mejs-shuffle-on').addClass('mejs-shuffle-off');
}
});
t.shuffleToggle=t.controls.find('.mejs-shuffle-button');
},
shuffleToggleClick:function(){
var t=this;
t.shuffleToggle.trigger('click');
},
buildprevtrack:function(a,b,c,d){
var t=this;
var f=$('<div class="mejs-button mejs-prevtrack-button mejs-prevtrack">'+
'<button type="button" aria-controls="'+a.id+'" title="'+a.options.prevText+'"></button>'+
'</div>')
.appendTo(b)
.click(function(e){
$(d).trigger('mep-playprevtrack');
a.playPrevTrack();
});
t.prevTrack=t.controls.find('.mejs-prevtrack-button');
},
prevTrackClick:function(){
var t=this;
t.prevTrack.trigger('click');
},
buildnexttrack:function(a,b,c,d){
var t=this;
var f=$('<div class="mejs-button mejs-nexttrack-button mejs-nexttrack">'+
'<button type="button" aria-controls="'+a.id+'" title="'+a.options.nextText+'"></button>'+
'</div>')
.appendTo(b)
.click(function(e){
$(d).trigger('mep-playnexttrack');
a.playNextTrack();
});
t.nextTrack=t.controls.find('.mejs-nexttrack-button');
},
nextTrackClick:function(){
var t=this;
t.nextTrack.trigger('click');
},
buildplaylist:function(a,b,c,d){
var t=this;
var f=$('<div class="mejs-button mejs-playlist-button '+((a.options.playlist)?'mejs-hide-playlist':'mejs-show-playlist')+'">'+
'<button type="button" aria-controls="'+a.id+'" title="'+a.options.playlistText+'"></button>'+
'</div>')
.appendTo(b)
.click(function(e){
a.options.playlist=!a.options.playlist;
$(d).trigger('mep-playlisttoggle',[a.options.playlist]);
if(a.options.playlist){
c.children('.mejs-playlist').show();
f.removeClass('mejs-show-playlist').addClass('mejs-hide-playlist');
}
else{
c.children('.mejs-playlist').hide();
f.removeClass('mejs-hide-playlist').addClass('mejs-show-playlist');
}
});
t.playlistToggle=t.controls.find('.mejs-playlist-button');
},
playlistToggleClick:function(){
var t=this;
t.playlistToggle.trigger('click');
},
buildplaylistfeature:function(d,f,g,h){
var i=$('<div class="mejs-playlist mejs-layer">'+
'<ul class="mejs"></ul>'+
'</div>')
.appendTo(g);
if(!d.options.playlist){
i.hide();
}
if(d.options.playlistposition=='bottom'){
i.css('top',d.options.audioHeight+'px');
}
else{
i.css('bottom',d.options.audioHeight+'px');
}
var j=function(a){
var b=a.split("/");
if(b.length>0){
return decodeURIComponent(b[b.length-1]);
}
else{
return'';
}
};
var k=[];
$('#'+d.id).find('.mejs-mediaelement source').each(function(a,b){
if($.trim(this.src)!=''){
var c={};
c.source=$.trim(this.src);
if($.trim(this.title)!=''){
c.name=$.trim(this.title);
}
else{
c.name=j(c.source);
}
k.push(c);
}
});
for(var l in k){
g.find('.mejs-playlist > ul').append('<li data-url="'+k[l].source+'" title="'+k[l].name+'">'+k[l].name+'</li>');
}
g.find('li:first').addClass('current played');
g.find('.mejs-playlist > ul li').click(function(e){
if(!$(this).hasClass('current')){
$(this).addClass('played');
d.playTrack($(this));
}
else{
d.play();
}
});
h.addEventListener('ended',function(e){
d.playNextTrack();
},false);
},
playNextTrack:function(){
var t=this;
var a=t.layers.find('.mejs-playlist > ul > li');
var b=a.filter('.current');
var c=a.not('.played');
if(c.length<1){
b.removeClass('played').siblings().removeClass('played');
c=a.not('.current');
}
if(t.options.shuffle){
var d=Math.floor(Math.random()*c.length);
var e=c.eq(d);
}
else{
var e=b.next();
if(e.length<1&&t.options.loop){
e=b.siblings().first();
}
}
if(e.length==1){
e.addClass('played');
t.playTrack(e);
}
},
playPrevTrack:function(){
var t=this;
var a=t.layers.find('.mejs-playlist > ul > li');
var b=a.filter('.current');
var c=a.filter('.played').not('.current');
if(c.length<1){
b.removeClass('played');
c=a.not('.current');
}
if(t.options.shuffle){
var d=Math.floor(Math.random()*c.length);
var e=c.eq(d);
}
else{
var e=b.prev();
if(e.length<1&&t.options.loop){
e=b.siblings().last();
}
}
if(e.length==1){
b.removeClass('played');
t.playTrack(e);
}
},
playTrack:function(a){
var t=this;
t.pause();
t.setSrc(a.attr('data-url'));
t.load();
t.play();
a.addClass('current').siblings().removeClass('current');
},
playTrackURL:function(a){
var t=this;
var b=t.layers.find('.mejs-playlist > ul > li');
var c=b.filter('[data-url="'+a+'"]');
t.playTrack(c);
}
});
})(mejs.$);
;

;
angular
.module('ng-context-menu',[])
.factory('ContextMenuService',function(){
return{
menuElement:null
};
})
.directive('contextMenu',['$window','$parse','ContextMenuService',function(f,g,h){
return{
restrict:'A',
link:function(b,c,d){
var e=false,
openTarget,
disabled=b.$eval(d.contextMenuDisabled),
win=angular.element(f),
fn=g(d.contextMenu);
c.bind('contextmenu',function(a){
if(!disabled){
if(h.menuElement!==null){
close(h.menuElement);
}
h.menuElement=angular.element(document.getElementById(d.target));
openTarget=a.target;
a.preventDefault();
a.stopPropagation();
b.$apply(function(){
fn(b,{$event:a});
});
}
});
}
};
}]);
;

;var dbits;
var canary=0xdeadbeefcafe;
var j_lm=((canary&0xffffff)==0xefcafe);
function BigInteger(a,b,c){
if(a!=null)
if("number"==typeof a)this.fromNumber(a,b,c);
else if(b==null&&"string"!=typeof a)this.fromString(a,256);
else this.fromString(a,b);
}
function nbi(){return new BigInteger(null)}
function am1(i,x,w,j,c,n){
while(--n>=0){
var v=x*this[i++]+w[j]+c;
c=Math.floor(v/0x4000000);
w[j++]=v&0x3ffffff;
}
return c;
}
function am2(i,x,w,j,c,n){
var a=x&0x7fff,xh=x>>15;
while(--n>=0){
var l=this[i]&0x7fff;
var h=this[i++]>>15;
var m=xh*l+h*a;
l=a*l+((m&0x7fff)<<15)+w[j]+(c&0x3fffffff);
c=(l>>>30)+(m>>>15)+xh*h+(c>>>30);
w[j++]=l&0x3fffffff;
}
return c;
}
function am3(i,x,w,j,c,n){
var a=x&0x3fff,xh=x>>14;
while(--n>=0){
var l=this[i]&0x3fff;
var h=this[i++]>>14;
var m=xh*l+h*a;
l=a*l+((m&0x3fff)<<14)+w[j]+c;
c=(l>>28)+(m>>14)+xh*h;
w[j++]=l&0xfffffff;
}
return c;
}
if(j_lm&&(navigator.appName=="Microsoft Internet Explorer")){
BigInteger.prototype.am=am2;
dbits=30;
}
else if(j_lm&&(navigator.appName!="Netscape")){
BigInteger.prototype.am=am1;
dbits=26;
}
else{BigInteger.prototype.am=am3;
dbits=28;
}
BigInteger.prototype.DB=dbits;
BigInteger.prototype.DM=((1<<dbits)-1);
BigInteger.prototype.DV=(1<<dbits);
var BI_FP=52;
BigInteger.prototype.FV=Math.pow(2,BI_FP);
BigInteger.prototype.F1=BI_FP-dbits;
BigInteger.prototype.F2=2*dbits-BI_FP;
var BI_RM="0123456789abcdefghijklmnopqrstuvwxyz";
var BI_RC=new Array();
var rr,vv;
rr="0".charCodeAt(0);
for(vv=0;vv<=9;++vv)BI_RC[rr++]=vv;
rr="a".charCodeAt(0);
for(vv=10;vv<36;++vv)BI_RC[rr++]=vv;
rr="A".charCodeAt(0);
for(vv=10;vv<36;++vv)BI_RC[rr++]=vv;
function int2char(n){return BI_RM.charAt(n)}
function intAt(s,i){
var c=BI_RC[s.charCodeAt(i)];
return(c==null)?-1:c;
}
function bnpCopyTo(r){
for(var i=this.t-1;i>=0;--i)r[i]=this[i];
r.t=this.t;
r.s=this.s;
}
function bnpFromInt(x){
this.t=1;
this.s=(x<0)?-1:0;
if(x>0)this[0]=x;
else if(x<-1)this[0]=x+this.DV;
else this.t=0;
}
function nbv(i){var r=nbi();r.fromInt(i);return r}
function bnpFromString(s,b){
var k;
if(b==16)k=4;
else if(b==8)k=3;
else if(b==256)k=8;else if(b==2)k=1;
else if(b==32)k=5;
else if(b==4)k=2;
else{this.fromRadix(s,b);return}
this.t=0;
this.s=0;
var i=s.length,mi=false,sh=0;
while(--i>=0){
var x=(k==8)?s[i]&0xff:intAt(s,i);
if(x<0){
if(s.charAt(i)=="-")mi=true;
continue;
}
mi=false;
if(sh==0)
this[this.t++]=x;
else if(sh+k>this.DB){
this[this.t-1]|=(x&((1<<(this.DB-sh))-1))<<sh;
this[this.t++]=(x>>(this.DB-sh));
}
else
this[this.t-1]|=x<<sh;
sh+=k;
if(sh>=this.DB)sh-=this.DB;
}
if(k==8&&(s[0]&0x80)!=0){
this.s=-1;
if(sh>0)this[this.t-1]|=((1<<(this.DB-sh))-1)<<sh;
}
this.clamp();
if(mi)BigInteger.ZERO.subTo(this,this);
}
function bnpClamp(){
var c=this.s&this.DM;
while(this.t>0&&this[this.t-1]==c)--this.t;
}
function bnToString(b){
if(this.s<0)return"-"+this.negate().toString(b);
var k;
if(b==16)k=4;
else if(b==8)k=3;
else if(b==2)k=1;
else if(b==32)k=5;
else if(b==4)k=2;
else return this.toRadix(b);
var a=(1<<k)-1,d,m=false,r="",i=this.t;
var p=this.DB-(i*this.DB)%k;
if(i-->0){
if(p<this.DB&&(d=this[i]>>p)>0){m=true;r=int2char(d)}
while(i>=0){
if(p<k){
d=(this[i]&((1<<p)-1))<<(k-p);
d|=this[--i]>>(p+=this.DB-k);
}
else{
d=(this[i]>>(p-=k))&a;
if(p<=0){p+=this.DB;--i}
}
if(d>0)m=true;
if(m)r+=int2char(d);
}
}
return m?r:"0";
}
function bnNegate(){var r=nbi();BigInteger.ZERO.subTo(this,r);return r}
function bnAbs(){return(this.s<0)?this.negate():this}
function bnCompareTo(a){
var r=this.s-a.s;
if(r!=0)return r;
var i=this.t;
r=i-a.t;
if(r!=0)return(this.s<0)?-r:r;
while(--i>=0)if((r=this[i]-a[i])!=0)return r;
return 0;
}
function nbits(x){
var r=1,t;
if((t=x>>>16)!=0){x=t;r+=16}
if((t=x>>8)!=0){x=t;r+=8}
if((t=x>>4)!=0){x=t;r+=4}
if((t=x>>2)!=0){x=t;r+=2}
if((t=x>>1)!=0){x=t;r+=1}
return r;
}
function bnBitLength(){
if(this.t<=0)return 0;
return this.DB*(this.t-1)+nbits(this[this.t-1]^(this.s&this.DM));
}
function bnpDLShiftTo(n,r){
var i;
for(i=this.t-1;i>=0;--i)r[i+n]=this[i];
for(i=n-1;i>=0;--i)r[i]=0;
r.t=this.t+n;
r.s=this.s;
}
function bnpDRShiftTo(n,r){
for(var i=n;i<this.t;++i)r[i-n]=this[i];
r.t=Math.max(this.t-n,0);
r.s=this.s;
}
function bnpLShiftTo(n,r){
var a=n%this.DB;
var b=this.DB-a;
var d=(1<<b)-1;
var e=Math.floor(n/this.DB),c=(this.s<<a)&this.DM,i;
for(i=this.t-1;i>=0;--i){
r[i+e+1]=(this[i]>>b)|c;
c=(this[i]&d)<<a;
}
for(i=e-1;i>=0;--i)r[i]=0;
r[e]=c;
r.t=this.t+e+1;
r.s=this.s;
r.clamp();
}
function bnpRShiftTo(n,r){
r.s=this.s;
var a=Math.floor(n/this.DB);
if(a>=this.t){r.t=0;return}
var b=n%this.DB;
var c=this.DB-b;
var d=(1<<b)-1;
r[0]=this[a]>>b;
for(var i=a+1;i<this.t;++i){
r[i-a-1]|=(this[i]&d)<<c;
r[i-a]=this[i]>>b;
}
if(b>0)r[this.t-a-1]|=(this.s&d)<<c;
r.t=this.t-a;
r.clamp();
}
function bnpSubTo(a,r){
var i=0,c=0,m=Math.min(a.t,this.t);
while(i<m){
c+=this[i]-a[i];
r[i++]=c&this.DM;
c>>=this.DB;
}
if(a.t<this.t){
c-=a.s;
while(i<this.t){
c+=this[i];
r[i++]=c&this.DM;
c>>=this.DB;
}
c+=this.s;
}
else{
c+=this.s;
while(i<a.t){
c-=a[i];
r[i++]=c&this.DM;
c>>=this.DB;
}
c-=a.s;
}
r.s=(c<0)?-1:0;
if(c<-1)r[i++]=this.DV+c;
else if(c>0)r[i++]=c;
r.t=i;
r.clamp();
}
function bnpMultiplyTo(a,r){
var x=this.abs(),y=a.abs();
var i=x.t;
r.t=i+y.t;
while(--i>=0)r[i]=0;
for(i=0;i<y.t;++i)r[i+x.t]=x.am(0,y[i],r,i,0,x.t);
r.s=0;
r.clamp();
if(this.s!=a.s)BigInteger.ZERO.subTo(r,r);
}
function bnpSquareTo(r){
var x=this.abs();
var i=r.t=2*x.t;
while(--i>=0)r[i]=0;
for(i=0;i<x.t-1;++i){
var c=x.am(i,x[i],r,2*i,0,1);
if((r[i+x.t]+=x.am(i+1,2*x[i],r,2*i+1,c,x.t-i-1))>=x.DV){
r[i+x.t]-=x.DV;
r[i+x.t+1]=1;
}
}
if(r.t>0)r[r.t-1]+=x.am(i,x[i],r,2*i,0,1);
r.s=0;
r.clamp();
}
function bnpDivRemTo(m,q,r){
var a=m.abs();
if(a.t<=0)return;
var b=this.abs();
if(b.t<a.t){
if(q!=null)q.fromInt(0);
if(r!=null)this.copyTo(r);
return;
}
if(r==null)r=nbi();
var y=nbi(),ts=this.s,ms=m.s;
var c=this.DB-nbits(a[a.t-1]);if(c>0){a.lShiftTo(c,y);b.lShiftTo(c,r)}
else{a.copyTo(y);b.copyTo(r)}
var d=y.t;
var f=y[d-1];
if(f==0)return;
var g=f*(1<<this.F1)+((d>1)?y[d-2]>>this.F2:0);
var h=this.FV/g,d2=(1<<this.F1)/g,e=1<<this.F2;
var i=r.t,j=i-d,t=(q==null)?nbi():q;
y.dlShiftTo(j,t);
if(r.compareTo(t)>=0){
r[r.t++]=1;
r.subTo(t,r);
}
BigInteger.ONE.dlShiftTo(d,t);
t.subTo(y,y);while(y.t<d)y[y.t++]=0;
while(--j>=0){
var k=(r[--i]==f)?this.DM:Math.floor(r[i]*h+(r[i-1]+e)*d2);
if((r[i]+=y.am(0,k,r,j,0,d))<k){y.dlShiftTo(j,t);
r.subTo(t,r);
while(r[i]<--k)r.subTo(t,r);
}
}
if(q!=null){
r.drShiftTo(d,q);
if(ts!=ms)BigInteger.ZERO.subTo(q,q);
}
r.t=d;
r.clamp();
if(c>0)r.rShiftTo(c,r);if(ts<0)BigInteger.ZERO.subTo(r,r);
}
function bnMod(a){
var r=nbi();
this.abs().divRemTo(a,null,r);
if(this.s<0&&r.compareTo(BigInteger.ZERO)>0)a.subTo(r,r);
return r;
}
function Classic(m){this.m=m}
function cConvert(x){
if(x.s<0||x.compareTo(this.m)>=0)return x.mod(this.m);
else return x;
}
function cRevert(x){return x}
function cReduce(x){x.divRemTo(this.m,null,x)}
function cMulTo(x,y,r){x.multiplyTo(y,r);this.reduce(r)}
function cSqrTo(x,r){x.squareTo(r);this.reduce(r)}
Classic.prototype.convert=cConvert;
Classic.prototype.revert=cRevert;
Classic.prototype.reduce=cReduce;
Classic.prototype.mulTo=cMulTo;
Classic.prototype.sqrTo=cSqrTo;
function bnpInvDigit(){
if(this.t<1)return 0;
var x=this[0];
if((x&1)==0)return 0;
var y=x&3;y=(y*(2-(x&0xf)*y))&0xf;y=(y*(2-(x&0xff)*y))&0xff;y=(y*(2-(((x&0xffff)*y)&0xffff)))&0xffff;y=(y*(2-x*y%this.DV))%this.DV;return(y>0)?this.DV-y:-y;
}
function Montgomery(m){
this.m=m;
this.mp=m.invDigit();
this.mpl=this.mp&0x7fff;
this.mph=this.mp>>15;
this.um=(1<<(m.DB-15))-1;
this.mt2=2*m.t;
}
function montConvert(x){
var r=nbi();
x.abs().dlShiftTo(this.m.t,r);
r.divRemTo(this.m,null,r);
if(x.s<0&&r.compareTo(BigInteger.ZERO)>0)this.m.subTo(r,r);
return r;
}
function montRevert(x){
var r=nbi();
x.copyTo(r);
this.reduce(r);
return r;
}
function montReduce(x){
while(x.t<=this.mt2)x[x.t++]=0;
for(var i=0;i<this.m.t;++i){
var j=x[i]&0x7fff;
var a=(j*this.mpl+(((j*this.mph+(x[i]>>15)*this.mpl)&this.um)<<15))&x.DM;
j=i+this.m.t;
x[j]+=this.m.am(0,a,x,i,0,this.m.t);
while(x[j]>=x.DV){x[j]-=x.DV;x[++j]++}
}
x.clamp();
x.drShiftTo(this.m.t,x);
if(x.compareTo(this.m)>=0)x.subTo(this.m,x);
}
function montSqrTo(x,r){x.squareTo(r);this.reduce(r)}
function montMulTo(x,y,r){x.multiplyTo(y,r);this.reduce(r)}
Montgomery.prototype.convert=montConvert;
Montgomery.prototype.revert=montRevert;
Montgomery.prototype.reduce=montReduce;
Montgomery.prototype.mulTo=montMulTo;
Montgomery.prototype.sqrTo=montSqrTo;
function bnpIsEven(){return((this.t>0)?(this[0]&1):this.s)==0}
function bnpExp(e,z){
if(e>0xffffffff||e<1)return BigInteger.ONE;
var r=nbi(),r2=nbi(),g=z.convert(this),i=nbits(e)-1;
g.copyTo(r);
while(--i>=0){
z.sqrTo(r,r2);
if((e&(1<<i))>0)z.mulTo(r2,g,r);
else{var t=r;r=r2;r2=t}
}
return z.revert(r);
}
function bnModPowInt(e,m){
var z;
if(e<256||m.isEven())z=new Classic(m);else z=new Montgomery(m);
return this.exp(e,z);
}
BigInteger.prototype.copyTo=bnpCopyTo;
BigInteger.prototype.fromInt=bnpFromInt;
BigInteger.prototype.fromString=bnpFromString;
BigInteger.prototype.clamp=bnpClamp;
BigInteger.prototype.dlShiftTo=bnpDLShiftTo;
BigInteger.prototype.drShiftTo=bnpDRShiftTo;
BigInteger.prototype.lShiftTo=bnpLShiftTo;
BigInteger.prototype.rShiftTo=bnpRShiftTo;
BigInteger.prototype.subTo=bnpSubTo;
BigInteger.prototype.multiplyTo=bnpMultiplyTo;
BigInteger.prototype.squareTo=bnpSquareTo;
BigInteger.prototype.divRemTo=bnpDivRemTo;
BigInteger.prototype.invDigit=bnpInvDigit;
BigInteger.prototype.isEven=bnpIsEven;
BigInteger.prototype.exp=bnpExp;
BigInteger.prototype.toString=bnToString;
BigInteger.prototype.negate=bnNegate;
BigInteger.prototype.abs=bnAbs;
BigInteger.prototype.compareTo=bnCompareTo;
BigInteger.prototype.bitLength=bnBitLength;
BigInteger.prototype.mod=bnMod;
BigInteger.prototype.modPowInt=bnModPowInt;
BigInteger.ZERO=nbv(0);
BigInteger.ONE=nbv(1);
;

;function bnClone(){var r=nbi();this.copyTo(r);return r}
function bnIntValue(){
if(this.s<0){
if(this.t==1)return this[0]-this.DV;
else if(this.t==0)return-1;
}
else if(this.t==1)return this[0];
else if(this.t==0)return 0;
return((this[1]&((1<<(32-this.DB))-1))<<this.DB)|this[0];
}
function bnByteValue(){return(this.t==0)?this.s:(this[0]<<24)>>24}
function bnShortValue(){return(this.t==0)?this.s:(this[0]<<16)>>16}
function bnpChunkSize(r){return Math.floor(Math.LN2*this.DB/Math.log(r))}
function bnSigNum(){
if(this.s<0)return-1;
else if(this.t<=0||(this.t==1&&this[0]<=0))return 0;
else return 1;
}
function bnpToRadix(b){
if(b==null)b=10;
if(this.signum()==0||b<2||b>36)return"0";
var c=this.chunkSize(b);
var a=Math.pow(b,c);
var d=nbv(a),y=nbi(),z=nbi(),r="";
this.divRemTo(d,y,z);
while(y.signum()>0){
r=(a+z.intValue()).toString(b).substr(1)+r;
y.divRemTo(d,y,z);
}
return z.intValue().toString(b)+r;
}
function bnpFromRadix(s,b){
this.fromInt(0);
if(b==null)b=10;
var a=this.chunkSize(b);
var d=Math.pow(b,a),mi=false,j=0,w=0;
for(var i=0;i<s.length;++i){
var x=intAt(s,i);
if(x<0){
if(s.charAt(i)=="-"&&this.signum()==0)mi=true;
continue;
}
w=b*w+x;
if(++j>=a){
this.dMultiply(d);
this.dAddOffset(w,0);
j=0;
w=0;
}
}
if(j>0){
this.dMultiply(Math.pow(b,j));
this.dAddOffset(w,0);
}
if(mi)BigInteger.ZERO.subTo(this,this);
}
function bnpFromNumber(a,b,c){
if("number"==typeof b){
if(a<2)this.fromInt(1);
else{
this.fromNumber(a,c);
if(!this.testBit(a-1))this.bitwiseTo(BigInteger.ONE.shiftLeft(a-1),op_or,this);
if(this.isEven())this.dAddOffset(1,0);while(!this.isProbablePrime(b)){
this.dAddOffset(2,0);
if(this.bitLength()>a)this.subTo(BigInteger.ONE.shiftLeft(a-1),this);
}
}
}
else{
var x=new Array(),t=a&7;
x.length=(a>>3)+1;
b.nextBytes(x);
if(t>0)x[0]&=((1<<t)-1);else x[0]=0;
this.fromString(x,256);
}
}
function bnToByteArray(){
var i=this.t,r=new Array();
r[0]=this.s;
var p=this.DB-(i*this.DB)%8,d,k=0;
if(i-->0){
if(p<this.DB&&(d=this[i]>>p)!=(this.s&this.DM)>>p)
r[k++]=d|(this.s<<(this.DB-p));
while(i>=0){
if(p<8){
d=(this[i]&((1<<p)-1))<<(8-p);
d|=this[--i]>>(p+=this.DB-8);
}
else{
d=(this[i]>>(p-=8))&0xff;
if(p<=0){p+=this.DB;--i}
}
if((d&0x80)!=0)d|=-256;
if(k==0&&(this.s&0x80)!=(d&0x80))++k;
if(k>0||d!=this.s)r[k++]=d;
}
}
return r;
}
function bnEquals(a){return(this.compareTo(a)==0)}
function bnMin(a){return(this.compareTo(a)<0)?this:a}
function bnMax(a){return(this.compareTo(a)>0)?this:a}
function bnpBitwiseTo(a,b,r){
var i,f,m=Math.min(a.t,this.t);
for(i=0;i<m;++i)r[i]=b(this[i],a[i]);
if(a.t<this.t){
f=a.s&this.DM;
for(i=m;i<this.t;++i)r[i]=b(this[i],f);
r.t=this.t;
}
else{
f=this.s&this.DM;
for(i=m;i<a.t;++i)r[i]=b(f,a[i]);
r.t=a.t;
}
r.s=b(this.s,a.s);
r.clamp();
}
function op_and(x,y){return x&y}
function bnAnd(a){var r=nbi();this.bitwiseTo(a,op_and,r);return r}
function op_or(x,y){return x|y}
function bnOr(a){var r=nbi();this.bitwiseTo(a,op_or,r);return r}
function op_xor(x,y){return x^y}
function bnXor(a){var r=nbi();this.bitwiseTo(a,op_xor,r);return r}
function op_andnot(x,y){return x&~y}
function bnAndNot(a){var r=nbi();this.bitwiseTo(a,op_andnot,r);return r}
function bnNot(){
var r=nbi();
for(var i=0;i<this.t;++i)r[i]=this.DM&~this[i];
r.t=this.t;
r.s=~this.s;
return r;
}
function bnShiftLeft(n){
var r=nbi();
if(n<0)this.rShiftTo(-n,r);else this.lShiftTo(n,r);
return r;
}
function bnShiftRight(n){
var r=nbi();
if(n<0)this.lShiftTo(-n,r);else this.rShiftTo(n,r);
return r;
}
function lbit(x){
if(x==0)return-1;
var r=0;
if((x&0xffff)==0){x>>=16;r+=16}
if((x&0xff)==0){x>>=8;r+=8}
if((x&0xf)==0){x>>=4;r+=4}
if((x&3)==0){x>>=2;r+=2}
if((x&1)==0)++r;
return r;
}
function bnGetLowestSetBit(){
for(var i=0;i<this.t;++i)
if(this[i]!=0)return i*this.DB+lbit(this[i]);
if(this.s<0)return this.t*this.DB;
return-1;
}
function cbit(x){
var r=0;
while(x!=0){x&=x-1;++r}
return r;
}
function bnBitCount(){
var r=0,x=this.s&this.DM;
for(var i=0;i<this.t;++i)r+=cbit(this[i]^x);
return r;
}
function bnTestBit(n){
var j=Math.floor(n/this.DB);
if(j>=this.t)return(this.s!=0);
return((this[j]&(1<<(n%this.DB)))!=0);
}
function bnpChangeBit(n,a){
var r=BigInteger.ONE.shiftLeft(n);
this.bitwiseTo(r,a,r);
return r;
}
function bnSetBit(n){return this.changeBit(n,op_or)}
function bnClearBit(n){return this.changeBit(n,op_andnot)}
function bnFlipBit(n){return this.changeBit(n,op_xor)}
function bnpAddTo(a,r){
var i=0,c=0,m=Math.min(a.t,this.t);
while(i<m){
c+=this[i]+a[i];
r[i++]=c&this.DM;
c>>=this.DB;
}
if(a.t<this.t){
c+=a.s;
while(i<this.t){
c+=this[i];
r[i++]=c&this.DM;
c>>=this.DB;
}
c+=this.s;
}
else{
c+=this.s;
while(i<a.t){
c+=a[i];
r[i++]=c&this.DM;
c>>=this.DB;
}
c+=a.s;
}
r.s=(c<0)?-1:0;
if(c>0)r[i++]=c;
else if(c<-1)r[i++]=this.DV+c;
r.t=i;
r.clamp();
}
function bnAdd(a){var r=nbi();this.addTo(a,r);return r}
function bnSubtract(a){var r=nbi();this.subTo(a,r);return r}
function bnMultiply(a){var r=nbi();this.multiplyTo(a,r);return r}
function bnSquare(){var r=nbi();this.squareTo(r);return r}
function bnDivide(a){var r=nbi();this.divRemTo(a,r,null);return r}
function bnRemainder(a){var r=nbi();this.divRemTo(a,null,r);return r}
function bnDivideAndRemainder(a){
var q=nbi(),r=nbi();
this.divRemTo(a,q,r);
return new Array(q,r);
}
function bnpDMultiply(n){
this[this.t]=this.am(0,n-1,this,0,0,this.t);
++this.t;
this.clamp();
}
function bnpDAddOffset(n,w){
if(n==0)return;
while(this.t<=w)this[this.t++]=0;
this[w]+=n;
while(this[w]>=this.DV){
this[w]-=this.DV;
if(++w>=this.t)this[this.t++]=0;
++this[w];
}
}
function NullExp(){}
function nNop(x){return x}
function nMulTo(x,y,r){x.multiplyTo(y,r)}
function nSqrTo(x,r){x.squareTo(r)}
NullExp.prototype.convert=nNop;
NullExp.prototype.revert=nNop;
NullExp.prototype.mulTo=nMulTo;
NullExp.prototype.sqrTo=nSqrTo;
function bnPow(e){return this.exp(e,new NullExp())}
function bnpMultiplyLowerTo(a,n,r){
var i=Math.min(this.t+a.t,n);
r.s=0;r.t=i;
while(i>0)r[--i]=0;
var j;
for(j=r.t-this.t;i<j;++i)r[i+this.t]=this.am(0,a[i],r,i,0,this.t);
for(j=Math.min(a.t,n);i<j;++i)this.am(0,a[i],r,i,0,n-i);
r.clamp();
}
function bnpMultiplyUpperTo(a,n,r){
--n;
var i=r.t=this.t+a.t-n;
r.s=0;while(--i>=0)r[i]=0;
for(i=Math.max(n-this.t,0);i<a.t;++i)
r[this.t+i-n]=this.am(n-i,a[i],r,0,0,this.t+i-n);
r.clamp();
r.drShiftTo(1,r);
}
function Barrett(m){
this.r2=nbi();
this.q3=nbi();
BigInteger.ONE.dlShiftTo(2*m.t,this.r2);
this.mu=this.r2.divide(m);
this.m=m;
}
function barrettConvert(x){
if(x.s<0||x.t>2*this.m.t)return x.mod(this.m);
else if(x.compareTo(this.m)<0)return x;
else{var r=nbi();x.copyTo(r);this.reduce(r);return r}
}
function barrettRevert(x){return x}
function barrettReduce(x){
x.drShiftTo(this.m.t-1,this.r2);
if(x.t>this.m.t+1){x.t=this.m.t+1;x.clamp()}
this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3);
this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);
while(x.compareTo(this.r2)<0)x.dAddOffset(1,this.m.t+1);
x.subTo(this.r2,x);
while(x.compareTo(this.m)>=0)x.subTo(this.m,x);
}
function barrettSqrTo(x,r){x.squareTo(r);this.reduce(r)}
function barrettMulTo(x,y,r){x.multiplyTo(y,r);this.reduce(r)}
Barrett.prototype.convert=barrettConvert;
Barrett.prototype.revert=barrettRevert;
Barrett.prototype.reduce=barrettReduce;
Barrett.prototype.mulTo=barrettMulTo;
Barrett.prototype.sqrTo=barrettSqrTo;
function bnModPow(e,m){
var i=e.bitLength(),k,r=nbv(1),z;
if(i<=0)return r;
else if(i<18)k=1;
else if(i<48)k=3;
else if(i<144)k=4;
else if(i<768)k=5;
else k=6;
if(i<8)
z=new Classic(m);
else if(m.isEven())
z=new Barrett(m);
else
z=new Montgomery(m);
var g=new Array(),n=3,k1=k-1,km=(1<<k)-1;
g[1]=z.convert(this);
if(k>1){
var a=nbi();
z.sqrTo(g[1],a);
while(n<=km){
g[n]=nbi();
z.mulTo(a,g[n-2],g[n]);
n+=2;
}
}
var j=e.t-1,w,is1=true,r2=nbi(),t;
i=nbits(e[j])-1;
while(j>=0){
if(i>=k1)w=(e[j]>>(i-k1))&km;
else{
w=(e[j]&((1<<(i+1))-1))<<(k1-i);
if(j>0)w|=e[j-1]>>(this.DB+i-k1);
}
n=k;
while((w&1)==0){w>>=1;--n}
if((i-=n)<0){i+=this.DB;--j}
if(is1){g[w].copyTo(r);
is1=false;
}
else{
while(n>1){z.sqrTo(r,r2);z.sqrTo(r2,r);n-=2}
if(n>0)z.sqrTo(r,r2);else{t=r;r=r2;r2=t}
z.mulTo(r2,g[w],r);
}
while(j>=0&&(e[j]&(1<<i))==0){
z.sqrTo(r,r2);t=r;r=r2;r2=t;
if(--i<0){i=this.DB-1;--j}
}
}
return z.revert(r);
}
function bnGCD(a){
var x=(this.s<0)?this.negate():this.clone();
var y=(a.s<0)?a.negate():a.clone();
if(x.compareTo(y)<0){var t=x;x=y;y=t}
var i=x.getLowestSetBit(),g=y.getLowestSetBit();
if(g<0)return x;
if(i<g)g=i;
if(g>0){
x.rShiftTo(g,x);
y.rShiftTo(g,y);
}
while(x.signum()>0){
if((i=x.getLowestSetBit())>0)x.rShiftTo(i,x);
if((i=y.getLowestSetBit())>0)y.rShiftTo(i,y);
if(x.compareTo(y)>=0){
x.subTo(y,x);
x.rShiftTo(1,x);
}
else{
y.subTo(x,y);
y.rShiftTo(1,y);
}
}
if(g>0)y.lShiftTo(g,y);
return y;
}
function bnpModInt(n){
if(n<=0)return 0;
var d=this.DV%n,r=(this.s<0)?n-1:0;
if(this.t>0)
if(d==0)r=this[0]%n;
else for(var i=this.t-1;i>=0;--i)r=(d*r+this[i])%n;
return r;
}
function bnModInverse(m){
var e=m.isEven();
if((this.isEven()&&e)||m.signum()==0)return BigInteger.ZERO;
var u=m.clone(),v=this.clone();
var a=nbv(1),b=nbv(0),c=nbv(0),d=nbv(1);
while(u.signum()!=0){
while(u.isEven()){
u.rShiftTo(1,u);
if(e){
if(!a.isEven()||!b.isEven()){a.addTo(this,a);b.subTo(m,b)}
a.rShiftTo(1,a);
}
else if(!b.isEven())b.subTo(m,b);
b.rShiftTo(1,b);
}
while(v.isEven()){
v.rShiftTo(1,v);
if(e){
if(!c.isEven()||!d.isEven()){c.addTo(this,c);d.subTo(m,d)}
c.rShiftTo(1,c);
}
else if(!d.isEven())d.subTo(m,d);
d.rShiftTo(1,d);
}
if(u.compareTo(v)>=0){
u.subTo(v,u);
if(e)a.subTo(c,a);
b.subTo(d,b);
}
else{
v.subTo(u,v);
if(e)c.subTo(a,c);
d.subTo(b,d);
}
}
if(v.compareTo(BigInteger.ONE)!=0)return BigInteger.ZERO;
if(d.compareTo(m)>=0)return d.subtract(m);
if(d.signum()<0)d.addTo(m,d);else return d;
if(d.signum()<0)return d.add(m);else return d;
}
var lowprimes=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997];
var lplim=(1<<26)/lowprimes[lowprimes.length-1];
function bnIsProbablePrime(t){
var i,x=this.abs();
if(x.t==1&&x[0]<=lowprimes[lowprimes.length-1]){
for(i=0;i<lowprimes.length;++i)
if(x[0]==lowprimes[i])return true;
return false;
}
if(x.isEven())return false;
i=1;
while(i<lowprimes.length){
var m=lowprimes[i],j=i+1;
while(j<lowprimes.length&&m<lplim)m*=lowprimes[j++];
m=x.modInt(m);
while(i<j)if(m%lowprimes[i++]==0)return false;
}
return x.millerRabin(t);
}
function bnpMillerRabin(t){
var b=this.subtract(BigInteger.ONE);
var k=b.getLowestSetBit();
if(k<=0)return false;
var r=b.shiftRight(k);
t=(t+1)>>1;
if(t>lowprimes.length)t=lowprimes.length;
var a=nbi();
for(var i=0;i<t;++i){
a.fromInt(lowprimes[Math.floor(Math.random()*lowprimes.length)]);
var y=a.modPow(r,this);
if(y.compareTo(BigInteger.ONE)!=0&&y.compareTo(b)!=0){
var j=1;
while(j++<k&&y.compareTo(b)!=0){
y=y.modPowInt(2,this);
if(y.compareTo(BigInteger.ONE)==0)return false;
}
if(y.compareTo(b)!=0)return false;
}
}
return true;
}
BigInteger.prototype.chunkSize=bnpChunkSize;
BigInteger.prototype.toRadix=bnpToRadix;
BigInteger.prototype.fromRadix=bnpFromRadix;
BigInteger.prototype.fromNumber=bnpFromNumber;
BigInteger.prototype.bitwiseTo=bnpBitwiseTo;
BigInteger.prototype.changeBit=bnpChangeBit;
BigInteger.prototype.addTo=bnpAddTo;
BigInteger.prototype.dMultiply=bnpDMultiply;
BigInteger.prototype.dAddOffset=bnpDAddOffset;
BigInteger.prototype.multiplyLowerTo=bnpMultiplyLowerTo;
BigInteger.prototype.multiplyUpperTo=bnpMultiplyUpperTo;
BigInteger.prototype.modInt=bnpModInt;
BigInteger.prototype.millerRabin=bnpMillerRabin;
BigInteger.prototype.clone=bnClone;
BigInteger.prototype.intValue=bnIntValue;
BigInteger.prototype.byteValue=bnByteValue;
BigInteger.prototype.shortValue=bnShortValue;
BigInteger.prototype.signum=bnSigNum;
BigInteger.prototype.toByteArray=bnToByteArray;
BigInteger.prototype.equals=bnEquals;
BigInteger.prototype.min=bnMin;
BigInteger.prototype.max=bnMax;
BigInteger.prototype.and=bnAnd;
BigInteger.prototype.or=bnOr;
BigInteger.prototype.xor=bnXor;
BigInteger.prototype.andNot=bnAndNot;
BigInteger.prototype.not=bnNot;
BigInteger.prototype.shiftLeft=bnShiftLeft;
BigInteger.prototype.shiftRight=bnShiftRight;
BigInteger.prototype.getLowestSetBit=bnGetLowestSetBit;
BigInteger.prototype.bitCount=bnBitCount;
BigInteger.prototype.testBit=bnTestBit;
BigInteger.prototype.setBit=bnSetBit;
BigInteger.prototype.clearBit=bnClearBit;
BigInteger.prototype.flipBit=bnFlipBit;
BigInteger.prototype.add=bnAdd;
BigInteger.prototype.subtract=bnSubtract;
BigInteger.prototype.multiply=bnMultiply;
BigInteger.prototype.divide=bnDivide;
BigInteger.prototype.remainder=bnRemainder;
BigInteger.prototype.divideAndRemainder=bnDivideAndRemainder;
BigInteger.prototype.modPow=bnModPow;
BigInteger.prototype.modInverse=bnModInverse;
BigInteger.prototype.pow=bnPow;
BigInteger.prototype.gcd=bnGCD;
BigInteger.prototype.isProbablePrime=bnIsProbablePrime;
BigInteger.prototype.square=bnSquare;
;

;function Arcfour(){
this.i=0;
this.j=0;
this.S=new Array();
}
function ARC4init(a){
var i,j,t;
for(i=0;i<256;++i)
this.S[i]=i;
j=0;
for(i=0;i<256;++i){
j=(j+this.S[i]+a[i%a.length])&255;
t=this.S[i];
this.S[i]=this.S[j];
this.S[j]=t;
}
this.i=0;
this.j=0;
}
function ARC4next(){
var t;
this.i=(this.i+1)&255;
this.j=(this.j+this.S[this.i])&255;
t=this.S[this.i];
this.S[this.i]=this.S[this.j];
this.S[this.j]=t;
return this.S[(t+this.S[this.i])&255];
}
Arcfour.prototype.init=ARC4init;
Arcfour.prototype.next=ARC4next;
function prng_newstate(){
return new Arcfour();
}
var rng_psize=256;
;

;var rng_state;
var rng_pool;
var rng_pptr;
function rng_seed_int(x){
rng_pool[rng_pptr++]^=x&255;
rng_pool[rng_pptr++]^=(x>>8)&255;
rng_pool[rng_pptr++]^=(x>>16)&255;
rng_pool[rng_pptr++]^=(x>>24)&255;
if(rng_pptr>=rng_psize)rng_pptr-=rng_psize;
}
function rng_seed_time(){
rng_seed_int(new Date().getTime());
}
if(rng_pool==null){
rng_pool=new Array();
rng_pptr=0;
var t;
if(window.crypto&&window.crypto.getRandomValues){
var ua=new Uint8Array(32);
window.crypto.getRandomValues(ua);
for(t=0;t<32;++t)
rng_pool[rng_pptr++]=ua[t];
}
if(navigator.appName=="Netscape"&&navigator.appVersion<"5"&&window.crypto){
var z=window.crypto.random(32);
for(t=0;t<z.length;++t)
rng_pool[rng_pptr++]=z.charCodeAt(t)&255;
}
while(rng_pptr<rng_psize){t=Math.floor(65536*Math.random());
rng_pool[rng_pptr++]=t>>>8;
rng_pool[rng_pptr++]=t&255;
}
rng_pptr=0;
rng_seed_time();
}
function rng_get_byte(){
if(rng_state==null){
rng_seed_time();
rng_state=prng_newstate();
rng_state.init(rng_pool);
for(rng_pptr=0;rng_pptr<rng_pool.length;++rng_pptr)
rng_pool[rng_pptr]=0;
rng_pptr=0;
}
return rng_state.next();
}
function rng_get_bytes(a){
var i;
for(i=0;i<a.length;++i)a[i]=rng_get_byte();
}
function SecureRandom(){}
SecureRandom.prototype.nextBytes=rng_get_bytes;
;

;function parseBigInt(a,r){
return new BigInteger(a,r);
}
function linebrk(s,n){
var a="";
var i=0;
while(i+n<s.length){
a+=s.substring(i,i+n)+"\n";
i+=n;
}
return a+s.substring(i,s.length);
}
function byte2Hex(b){
if(b<0x10)
return"0"+b.toString(16);
else
return b.toString(16);
}
function pkcs1pad2(s,n){
if(n<s.length+11){alert("Message too long for RSA");
return null;
}
var a=new Array();
var i=s.length-1;
while(i>=0&&n>0){
var c=s.charCodeAt(i--);
if(c<128){a[--n]=c;
}
else if((c>127)&&(c<2048)){
a[--n]=(c&63)|128;
a[--n]=(c>>6)|192;
}
else{
a[--n]=(c&63)|128;
a[--n]=((c>>6)&63)|128;
a[--n]=(c>>12)|224;
}
}
a[--n]=0;
var b=new SecureRandom();
var x=new Array();
while(n>2){x[0]=0;
while(x[0]==0)b.nextBytes(x);
a[--n]=x[0];
}
a[--n]=2;
a[--n]=0;
return new BigInteger(a);
}
function RSAKey(){
this.n=null;
this.e=0;
this.d=null;
this.p=null;
this.q=null;
this.dmp1=null;
this.dmq1=null;
this.coeff=null;
}
function RSASetPublic(N,E){
if(N!=null&&E!=null&&N.length>0&&E.length>0){
this.n=parseBigInt(N,16);
this.e=parseInt(E,16);
}
else
alert("Invalid RSA public key");
}
function RSADoPublic(x){
return x.modPowInt(this.e,this.n);
}
function RSAEncrypt(a){
var m=pkcs1pad2(a,(this.n.bitLength()+7)>>3);
if(m==null)return null;
var c=this.doPublic(m);
if(c==null)return null;
var h=c.toString(16);
if((h.length&1)==0)return h;else return"0"+h;
}
RSAKey.prototype.doPublic=RSADoPublic;
RSAKey.prototype.setPublic=RSASetPublic;
RSAKey.prototype.encrypt=RSAEncrypt;
;

;function pkcs1unpad2(d,n){
var b=d.toByteArray();
var i=0;
while(i<b.length&&b[i]==0)++i;
if(b.length-i!=n-1||b[i]!=2)
return null;
++i;
while(b[i]!=0)
if(++i>=b.length)return null;
var a="";
while(++i<b.length){
var c=b[i]&255;
if(c<128){a+=String.fromCharCode(c);
}
else if((c>191)&&(c<224)){
a+=String.fromCharCode(((c&31)<<6)|(b[i+1]&63));
++i;
}
else{
a+=String.fromCharCode(((c&15)<<12)|((b[i+1]&63)<<6)|(b[i+2]&63));
i+=2;
}
}
return a;
}
function RSASetPrivate(N,E,D){
if(N!=null&&E!=null&&N.length>0&&E.length>0){
this.n=parseBigInt(N,16);
this.e=parseInt(E,16);
this.d=parseBigInt(D,16);
}
else
alert("Invalid RSA private key");
}
function RSASetPrivateEx(N,E,D,P,Q,a,b,C){
if(N!=null&&E!=null&&N.length>0&&E.length>0){
this.n=parseBigInt(N,16);
this.e=parseInt(E,16);
this.d=parseBigInt(D,16);
this.p=parseBigInt(P,16);
this.q=parseBigInt(Q,16);
this.dmp1=parseBigInt(a,16);
this.dmq1=parseBigInt(b,16);
this.coeff=parseBigInt(C,16);
}
else
alert("Invalid RSA private key");
}
function RSAGenerate(B,E){
var a=new SecureRandom();
var b=B>>1;
this.e=parseInt(E,16);
var c=new BigInteger(E,16);
for(;;){
for(;;){
this.p=new BigInteger(B-b,1,a);
if(this.p.subtract(BigInteger.ONE).gcd(c).compareTo(BigInteger.ONE)==0&&this.p.isProbablePrime(10))break;
}
for(;;){
this.q=new BigInteger(b,1,a);
if(this.q.subtract(BigInteger.ONE).gcd(c).compareTo(BigInteger.ONE)==0&&this.q.isProbablePrime(10))break;
}
if(this.p.compareTo(this.q)<=0){
var t=this.p;
this.p=this.q;
this.q=t;
}
var d=this.p.subtract(BigInteger.ONE);
var e=this.q.subtract(BigInteger.ONE);
var f=d.multiply(e);
if(f.gcd(c).compareTo(BigInteger.ONE)==0){
this.n=this.p.multiply(this.q);
this.d=c.modInverse(f);
this.dmp1=this.d.mod(d);
this.dmq1=this.d.mod(e);
this.coeff=this.q.modInverse(this.p);
break;
}
}
}
function RSADoPrivate(x){
if(this.p==null||this.q==null)
return x.modPow(this.d,this.n);
var a=x.mod(this.p).modPow(this.dmp1,this.p);
var b=x.mod(this.q).modPow(this.dmq1,this.q);
while(a.compareTo(b)<0)
a=a.add(this.p);
return a.subtract(b).multiply(this.coeff).mod(this.p).multiply(this.q).add(b);
}
function RSADecrypt(a){
var c=parseBigInt(a,16);
var m=this.doPrivate(c);
if(m==null)return null;
return pkcs1unpad2(m,(this.n.bitLength()+7)>>3);
}
RSAKey.prototype.doPrivate=RSADoPrivate;
RSAKey.prototype.setPrivate=RSASetPrivate;
RSAKey.prototype.setPrivateEx=RSASetPrivateEx;
RSAKey.prototype.generate=RSAGenerate;
RSAKey.prototype.decrypt=RSADecrypt;
;

;
(function(d,f){
'use strict';
var g=typeof Element!=='undefined'&&'ALLOW_KEYBOARD_INPUT'in Element,fn=(function(){
var a,valLength;
var b=[
[
'requestFullscreen',
'exitFullscreen',
'fullscreenElement',
'fullscreenEnabled',
'fullscreenchange',
'fullscreenerror'
],
[
'webkitRequestFullscreen',
'webkitExitFullscreen',
'webkitFullscreenElement',
'webkitFullscreenEnabled',
'webkitfullscreenchange',
'webkitfullscreenerror'
],
[
'webkitRequestFullScreen',
'webkitCancelFullScreen',
'webkitCurrentFullScreenElement',
'webkitCancelFullScreen',
'webkitfullscreenchange',
'webkitfullscreenerror'
],
[
'mozRequestFullScreen',
'mozCancelFullScreen',
'mozFullScreenElement',
'mozFullScreenEnabled',
'mozfullscreenchange',
'mozfullscreenerror'
],
[
'msRequestFullscreen',
'msExitFullscreen',
'msFullscreenElement',
'msFullscreenEnabled',
'MSFullscreenChange',
'MSFullscreenError'
]
];
var i=0;
var l=b.length;
var c={};
for(;i<l;i++){
a=b[i];
if(a&&a[1]in f){
for(i=0,valLength=a.length;i<valLength;i++){
c[b[0][i]]=a[i];
}
return c;
}
}
return false;
})(),
screenfull={
request:function(a){
var b=fn.requestFullscreen;
a=a||f.documentElement;
if(/5\.1[\.\d]* Safari/.test(navigator.userAgent)){
a[b]();
}else{
a[b](g&&Element.ALLOW_KEYBOARD_INPUT);
}
},
exit:function(){
f[fn.exitFullscreen]();
},
toggle:function(a){
if(this.isFullscreen){
this.exit();
}else{
this.request(a);
}
},
onchange:function(){},
onerror:function(){},
raw:fn
};
if(!fn){
d.screenfull=false;
return;
}
Object.defineProperties(screenfull,{
isFullscreen:{
get:function(){
return!!f[fn.fullscreenElement];
}
},
element:{
enumerable:true,
get:function(){
return f[fn.fullscreenElement];
}
},
enabled:{
enumerable:true,
get:function(){
return!!f[fn.fullscreenEnabled];
}
}
});
f.addEventListener(fn.fullscreenchange,function(e){
screenfull.onchange.call(screenfull,e);
});
f.addEventListener(fn.fullscreenerror,function(e){
screenfull.onerror.call(screenfull,e);
});
d.screenfull=screenfull;
})(window,document);
;

;

function MainController(b,c){
window.$scope=b;
window.$compile=c;
b.appTitle="Songbase.fm";
b.safeApply=function(){
var a=this.$root.$$phase;
if(a!='$apply'&&a!='$digest'){
this.$apply();
}
};
b.debugObj=function(a){

return a;
}
b.alert=function(a){
alert("NG : "+a);
}
b.mediaController=mediaController;
b.uiController=uiController;
b.viewController=viewController;
b.searchController=searchController;
b.exploreController=exploreController;
b.myBaseController=myBaseController;
b.playlistController=playlistController;
b.playbackController=playbackController;
b.accountController=accountController;
b.optionsMenu=optionsMenu;

b.loaded=true;
}

;

;

var mainApp=angular.module('mainApp',['ng-context-menu']);

;

;
var mediaController=function(){
};
mediaController.unknownData="Unknown";
mediaController.playCounter=0;
mediaController.versionList=[];
mediaController.startVersionIndex=-1;
mediaController.versionListSong=null;
mediaController.currentStreamURL="";
mediaController.currentvideoURL="";
mediaController.noClick=false;
mediaController.seekTime=0;
mediaController.seekTimeDuration=0;
mediaController.retrySongCounter=0;
mediaController.shareLinkURL="";
mediaController.showChooseVersionHint=true;
mediaController.buySong=function(){
var a=playbackController.getPlayingSong();
if(a){
var b=mediaController.getSongArtist(a)+" - "+a.name;
var c=window.navigator.userLanguage||window.navigator.language;
if(c=="de"||c=="de-at"||c=="de-li"){
mywindow=window.open("http://www.amazon.de/s/?_encoding=UTF8&ajr=0&camp=1638&creative=19454&field-keywords="+b+"&linkCode=ur2&rh=n%3A77195031%2Ck%3A"+b+"&site-redirect=de&tag=iggels-21&url=search-alias%3Ddigital-music","Amazon","");
}
else{
mywindow=window.open("http://www.amazon.com/mn/search/?_encoding=UTF8&camp=1789&creative=390957&field-keywords="+b+"&linkCode=ur2&linkId=MYPSR6WWIWMTB2LT&tag=songbasefm-20&url=search-alias%3Daps&linkId=D6BN5D5GAFQZOEN3","Amazon","");
}
mywindow.focus();
mediaController.getPrice();
}
}
mediaController.downloadWindowsApp=function(){
mywindow=window.open("/download/SongBase.fm.exe","Download Songbase.fm - App","");
mywindow.focus();
$('#popupDownloadApp').popup('close');
}
mediaController.getPrice=function(){
var a=playbackController.getPlayingSong();
var b=mediaController.getSongArtist(a)+" - "+a.name;

}
mediaController.init=function(){
$("#popupShareLink").popup({
afteropen:function(a,b){
$('#popupShareLink input').focus();
$('#popupShareLink input').select();
}
});
}
mediaController.visitSongWebPage=function(){
if(mediaController.currentvideoURL!=""){
console.dir(mediaController.currentvideoURL);
mywindow=window.open(mediaController.currentvideoURL,"","");
mywindow.focus();
}
}
mediaController.mediaEnded=function(){
mediaController.sendRating("2");
document.title=$scope.appTitle;
videoController.isPlaying=false;
videoController.disableStopControl(true);
videoController.setBufferedPercentage(0);
$(".mejs-playpause-button button").addClass("looped");
uiController.updateUI();
if(!playbackController.isLoading)
playbackController.playNextSong();
}
mediaController.loadPreviewSafeApplyTimer=null;
mediaController.loadPreview=function(b){
console.dir("loadpreview ajax!!!!");
var c=mediaController.getSongArtist(b);
var d=b.name
$.ajax({
url:"http://ws.audioscrobbler.com/2.0/?method=track.getInfo&api_key=019c7bcfc5d37775d1e7f651d4c08e6f&artist="+encodeURIComponent(c)+"&track="+encodeURIComponent(d)+"&format=json",
success:function(a){
if(a){
if(a.track){
if(a.track.album){
b.image=a.track.album.image;
if(mediaController.loadPreviewSafeApplyTimer){
clearTimeout(mediaController.loadPreviewSafeApplyTimer)
mediaController.loadPreviewSafeApplyTimer=null;
}
mediaController.loadPreviewSafeApplyTimer=setTimeout(function(){
mediaController.loadPreviewSafeApplyTimer=null;
$scope.safeApply();
},500)
}
}
}
}
})
}
mediaController.setNoClickTomeout=function(){
mediaController.noClick=true;
setTimeout(function(){mediaController.noClick=false},500)
}
mediaController.clickRateSong=function(e,a){
console.dir("mediaController.clickRateSong!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!");
console.dir(e);
var b=$(e.target).offset();
var c=e.clientX-b.left;
if(c<25){
if(a.rated==1){
a.rated=0;
mediaController.sendURLRating(a.url,-5);
}
else{
a.rated=1;
mediaController.sendURLRating(a.url,5);
}
}
else{
if(a.rated==-1){
a.rated=0;
mediaController.sendURLRating(a.url,5);
}
else{
a.rated=-1;
mediaController.sendURLRating(a.url,-5);
}
}
}
mediaController.getRateImage=function(a){
if(!a.rated)
a.rated=0;
if(a.rated==0){
return"public/img/ratebutton.png";
}else if(a.rated==1){
return"public/img/likedbutton.png";
}else{
return"public/img/dislikedbutton.png";
}
}
mediaController.sendURLRating=function(f,g){
var h=function(b,c){
if(mediaController.currentvideoURL!=""&&b){
var d=encodeURIComponent(mediaController.getSongArtist(b));
var e=encodeURIComponent(b.name);
$.ajax({
f:preferences.serverURL+"?ratingURL="+c+"&rating="+g+"&artist="+d+"&title="+e+"&auth="+authController.ip_token,
success:function(a){
authController.ensureAuthenticated(a,function(){
mediaController.sendRating(g);
})
}
})
}
}
if(authController.ip_token!="auth"&&authController.ip_token!=""){
var i=escape(f);
var j=playbackController.getPlayingSong();
setTimeout(function(){h(j,i)},4000);
}
}
mediaController.sendRating=function(f){
var g=function(b,c){
if(mediaController.currentvideoURL!=""&&b){
var d=encodeURIComponent(mediaController.getSongArtist(b));
var e=encodeURIComponent(b.name);
$.ajax({
url:preferences.serverURL+"?ratingURL="+c+"&rating="+f+"&artist="+d+"&title="+e+"&auth="+authController.ip_token,
success:function(a){
authController.ensureAuthenticated(a,function(){
mediaController.sendRating(f);
})
}
})
}
}
if(authController.ip_token!="auth"&&authController.ip_token!=""){
var h=escape(mediaController.currentvideoURL);
var i=playbackController.getPlayingSong();
setTimeout(function(){g(i,h)},4000);
}
}
mediaController.showDuration=function(a){
var b=parseInt(a.duration);
myDate=new Date();
myDate.setMinutes(0,b,0);
var c=myDate.getMinutes().toString();
if(c.length<2){
c="0"+c;
}
var d=myDate.getSeconds().toString();
if(d.length<2){
d="0"+d;
}
return c+":"+d;
}
mediaController.getSiteLogo=function(){
if(mediaController.currentvideoURL.toLowerCase().search(".dailymotion.com")>-1||mediaController.currentvideoURL.toLowerCase().search("/dailymotion.com")>-1){
return"dailymotion.png"
}else if(mediaController.currentvideoURL.toLowerCase().search(".youtube.")>-1||mediaController.currentvideoURL.toLowerCase().search("/youtube.")>-1){
return"youtube.png"
}else if(mediaController.currentvideoURL.toLowerCase().search(".muzu.tv")>-1||mediaController.currentvideoURL.toLowerCase().search("/muzu.tv")>-1){
return"muzu.png"
}else if(mediaController.currentvideoURL.toLowerCase().search(".vimeo.")>-1||mediaController.currentvideoURL.toLowerCase().search("/vimeo.")>-1){
return"vimeo.png"
}else if(mediaController.currentvideoURL.toLowerCase().search(".photobucket.")>-1||mediaController.currentvideoURL.toLowerCase().search("/photobucket.")>-1){
return"photobucket.png"
}else if(mediaController.currentvideoURL.toLowerCase().search(".metacafe.")>-1||mediaController.currentvideoURL.toLowerCase().search("/metacafe.")>-1){
return"metacafe.png"
}else if(mediaController.currentvideoURL.toLowerCase().search(".veoh.")>-1||mediaController.currentvideoURL.toLowerCase().search("/veoh.")>-1){
return"veoh.png"
}else if(mediaController.currentvideoURL.toLowerCase().search(".blip.")>-1||mediaController.currentvideoURL.toLowerCase().search("/blip.")>-1){
return"blip.png"
}else if(mediaController.currentvideoURL.toLowerCase().search(".myvideo.")>-1||mediaController.currentvideoURL.toLowerCase().search("/myvideo.")>-1){
return"myvideo.png"
}else if(mediaController.currentvideoURL.toLowerCase().search(".clipfish.")>-1||mediaController.currentvideoURL.toLowerCase().search("/clipfish.")>-1){
return"clipfish.png"
}
alert(mediaController.currentvideoURL.toLowerCase())
return"empty.png"
}
mediaController.getSiteName=function(a,b){
if(a.toLowerCase().search(".dailymotion.com")>-1||a.toLowerCase().search("/dailymotion.com")>-1){
return b+"Dailymotion";
}else if(a.toLowerCase().search(".youtube.")>-1||a.toLowerCase().search("/youtube.")>-1){
return b+"Youtube";
}else if(a.toLowerCase().search(".muzu.tv")>-1||a.toLowerCase().search("/muzu.tv")>-1){
return b+"Muzu";
}else if(a.toLowerCase().search(".vimeo.")>-1||a.toLowerCase().search("/vimeo.")>-1){
return b+"Vimeo";
}else if(a.toLowerCase().search(".photobucket.")>-1||a.toLowerCase().search("/photobucket.")>-1){
return b+"Photobucket";
}else if(a.toLowerCase().search(".metacafe.")>-1||a.toLowerCase().search("/metacafe.")>-1){
return b+"Metacafe";
}else if(a.toLowerCase().search(".veoh.")>-1||a.toLowerCase().search("/veoh.")>-1){
return b+"Veoh";
}else if(a.toLowerCase().search(".blip.")>-1||a.toLowerCase().search("/blip.")>-1){
return b+"Blip";
}else if(a.toLowerCase().search(".myvideo.")>-1||a.toLowerCase().search("/myvideo.")>-1){
return b+"Myvideo";
}else if(a.toLowerCase().search(".clipfish.")>-1||a.toLowerCase().search("/clipfish.")>-1){
return b+"Clipfish";
}
return""
}
mediaController.playSong=function(a,b){
console.dir("PLAYSONG!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!")
mediaController.currentStreamURL="";
mediaController.currentvideoURL="";
videoController.loadSongInSuitablePlayer(a,b);
mediaController.currentStreamURL=a;
mediaController.currentvideoURL=b;
videoController.playSong();
$scope.safeApply();
if(mediaController.showChooseVersionHint){
mediaController.showChooseVersionHint=false;
setTimeout(function(){
$('#popupChooseVersionHint').popup('open',{positionTo:'#chooseversionbutton'});
setTimeout(function(){
$('#popupChooseVersionHint').popup('close');
},5000
)
},3000)
}
}
mediaController.PlayingSongError=function(){
console.dir("PLAYINGSONG ERROR: "+mediaController.currentvideoURL)
if(mediaController.currentvideoURL!=""){
if(mediaController.retrySongCounter<5){
if(videoController.isEmbedVideo(mediaController.currentvideoURL)){
mediaController.sendRating("-1");
mediaController.playNextVersion();
}
else
{
if(mediaController.retrySongCounter>0){
mediaController.sendRating("-1");
mediaController.playNextVersion();
}
else{
mediaController.playStream(mediaController.getSongArtist(playbackController.playingSong),playbackController.playingSong.name,0,0);
}
}
mediaController.retrySongCounter+1;
}
}
}
mediaController.shareMediaEnabled=function(){
var a=false;
var b=playbackController.getPlayingSong();
if(b&&b.name!=""){
a=true;
}
if(!a){
for(var i=0;i<playlistController.playlists.length;i++){
if(!playlistController.playlists[i].isCurrentQueue&&!playlistController.playlists[i].isSimilarSongs){
a=true;
break;
}
else if(playlistController.playlists[i].isCurrentQueue){
if(playlistController.playlists[i].tracks.length>0){
a=true;
break;
}
}
}
}
if(a){
return true;
}
else
{
return false;
}
}
mediaController.shareMediaStyle=function(){
if(mediaController.shareMediaEnabled()){
return"opacity:1;";
}
else
{
return"opacity:0.5;";
}
}
mediaController.shareMedia=function(){
var a=false;
var b=playbackController.getPlayingSong();
if(b&&b.name!=""){
$('#shareCurrentSongButton').show();
a=true;
}
else
{
$('#shareCurrentSongButton').hide();
}
var c=false;
var d=false;
for(var i=0;i<playlistController.playlists.length;i++){
if(!playlistController.playlists[i].isCurrentQueue&&!playlistController.playlists[i].isSimilarSongs){
c=true;
}
else if(playlistController.playlists[i].isCurrentQueue){
if(playlistController.playlists[i].tracks.length>0){
d=true;
}
}
}
if(c){
$('#sharePlaylistButton').show();
a=true;
}
else
{
$('#sharePlaylistButton').hide();
}
if(d){
$('#SharePlayQueueButton').show();
a=true;
}
else
{
$('#SharePlayQueueButton').hide();
}
if(a){
$scope.safeApply();
$('#popupShareMenu').popup('open',{positionTo:'#sharebutton'});
}
}
mediaController.shareCurrentSong=function(){
var a=playbackController.getPlayingSong();
if(a&&a.name!=""){
var b=encodeURIComponent(mediaController.getSongArtist(a));
var c=encodeURIComponent(a.name);
mediaController.shareLinkURL="http://www.songbase.fm/?artist="+b+"&title="+c
$scope.safeApply();
setTimeout(function(){
$("#popupShareLink").popup('open',{transition:'pop'});
},200);
}
$('#popupShareMenu').popup('close');
}
mediaController.sharePlayQueue=function(){
var b=playlistController.currentQueue;
var c=JSON.stringify(b.tracks)
var d=escape(c);
$.mobile.loading("show");
$.ajax({
type:"POST",
data:{shareplaylist:escape(b.name),gid:b.gid,data:d,auth:authController.ip_token},
timeout:30000,
url:preferences.serverURL,success:function(a){
if(authController.ensureAuthenticated(a,function(){mediaController.shareSelectedPlaylist(b)})){
if(a.hash&&a.hash!=""){
mediaController.shareLinkURL="http://www.songbase.fm/?playlistid="+a.hash
$scope.safeApply();
setTimeout(function(){
$("#popupShareLink").popup('open',{transition:'pop'});
},200);
$('#popupShareMenu').popup('close');
}
}
},
complete:function(){
$.mobile.loading("hide");
}
})
}
mediaController.sharePlaylist=function(){
$scope.safeApply();
setTimeout(function(){
optionsMenu.openSharePlaylistOptions($('#sharebutton'));
},200);
$('#popupShareMenu').popup('close');
}
mediaController.shareSelectedPlaylist=function(b){
var c=JSON.stringify(b.tracks)
var d=escape(c);
$.mobile.loading("show");
$.ajax({
type:"POST",
data:{shareplaylist:escape(b.name),gid:b.gid,data:d,auth:authController.ip_token},
timeout:30000,
url:preferences.serverURL,success:function(a){
if(authController.ensureAuthenticated(a,function(){mediaController.shareSelectedPlaylist(b)})){
if(a.hash&&a.hash!=""){
mediaController.shareLinkURL="http://www.songbase.fm/?playlistid="+a.hash
$scope.safeApply();
setTimeout(function(){
$("#popupShareLink").popup('open',{transition:'pop'});
},200);
$('#popupShareMenu').popup('close');
}
}
},
complete:function(){
$.mobile.loading("hide");
}
})
}
mediaController.getVersions=function(j,k){
if(authController.ip_token!="auth"&&authController.ip_token!=""){
var l=playbackController.getPlayingSong();
if(mediaController.currentStreamURL!=""){
if(mediaController.versionListSong!=l){
mediaController.versionList=[];
$scope.safeApply();
$('#reloadVersionButton').hide();
$("#searchviewVersions").listview('refresh');
$('#popupVideoSettings').popup('open',{positionTo:'#chooseversionbutton'});
$('#loadversionimg').css("opacity","1");
var m=function(d){
if($(".mejs-button-choose-version button").css("opacity")<1&&d>2)
return;
var f=playbackController.getPlayingSong();
var g=encodeURIComponent(mediaController.getSongArtist(f));
var h=encodeURIComponent(f.name);
if(g==j&&h==k){
$.ajax({
url:preferences.serverURL+"?getversions=8&artist="+g+"&title="+h+"&auth="+authController.ip_token,
success:function(a){
if(authController.ensureAuthenticated(a,function(){
m(d);
})){
var b=false;
if(a.track){
if(a.track.length>0){
if(playbackController.getPlayingSong()==f){
for(var i=0;i<a.track.length;i++){
try{
a.track[i].title=decodeURIComponent(a.track[i].title);
}
catch(e){
a.track[i].title=unescape(a.track[i].title);
}
try{
a.track[i].url=decodeURIComponent(a.track[i].url);
}
catch(e){
a.track[i].url=unescape(a.track[i].url);
}
a.track[i].rated=0;
}
mediaController.versionListSong=f;
mediaController.versionList=a.track;
mediaController.startVersionIndex=-1;
$('#reloadVersionButton').show();
$scope.safeApply();
$('#loadversionimg').css("opacity","0");
$("#searchviewVersions").listview('refresh');
$("#popupVideoSettings-popup").css("margin-left","");
$('#popupVideoSettings').popup("reposition",{positionTo:'#chooseversionbutton'});
$("#popupVideoSettings-popup").css("margin-left","1px");
}
b=true;
}
}
if(b==false){
if(d<120){
if(playbackController.getPlayingSong()==f){
setTimeout(function(){
m(d+1)
},2000);
}
}
}
}
},
error:function(a,b,c){
if(d<120){
if(playbackController.getPlayingSong()==f){
setTimeout(function(){
m(d+2)
},2000);
}
}
}
})
}
}
m(0);
}
else{
$("#searchviewVersions").listview('refresh');
$('#popupVideoSettings').popup('open',{positionTo:'#chooseversionbutton'});
$scope.safeApply();
$('#popupVideoSettings').popup("reposition",{positionTo:'#chooseversionbutton'});
}
}
}
}
mediaController.getReloadedVersions=function(k,l){
if(authController.ip_token!="auth"&&authController.ip_token!=""){
var m=playbackController.getPlayingSong();
if(mediaController.currentStreamURL!=""){
$scope.safeApply();
$("#searchviewVersions").listview('refresh');
$('#loadversionimg').css("opacity","1");
var n=function(d){
if($(".mejs-button-choose-version button").css("opacity")<1&&d>2)
return;
var f=m;
var g=encodeURIComponent(mediaController.getSongArtist(f));
var h=encodeURIComponent(f.name);
if(g==k&&h==l){
$.ajax({
url:preferences.serverURL+"?getversions=8&artist="+g+"&title="+h+"&auth="+authController.ip_token,
success:function(a){
if(authController.ensureAuthenticated(a,function(){
n(d);
})){
var b=false;
if(a.track){
if(a.track.length>0){
if(playbackController.getPlayingSong()==f){
for(var i=0;i<a.track.length;i++){
try{
a.track[i].title=decodeURIComponent(a.track[i].title);
}
catch(e){
a.track[i].title=unescape(a.track[i].title);
}
try{
a.track[i].url=decodeURIComponent(a.track[i].url);
}
catch(e){
a.track[i].url=unescape(a.track[i].url);
}
a.track[i].rated=0;
}
var c=true;
for(var i in a.track){
c=true;
for(var j in mediaController.versionList){
if(a.track[i].url==mediaController.versionList[j].url){
c=false;
break;
}
}
if(c==true)
{
break;
}
}
mediaController.versionListSong=f;
if(c==true){
mediaController.versionList=a.track;
mediaController.startVersionIndex=-1;
$scope.safeApply();
$('#loadversionimg').css("opacity","0");
$("#searchviewVersions").listview('refresh');
$("#popupVideoSettings-popup").css("margin-left","");
$('#popupVideoSettings').popup("reposition",{positionTo:'#chooseversionbutton'});
$("#popupVideoSettings-popup").css("margin-left","1px");
b=true;
}
}
}
}
if(b==false){
if(d<120){
if(playbackController.getPlayingSong()==f){
setTimeout(function(){
n(d+1)
},3000);
}
}
}
}
},
error:function(a,b,c){
console.dir("error "+d);
console.fir(a.responseText);
if(d<120){
if(playbackController.getPlayingSong()==f){
setTimeout(function(){
n(d+2)
},3000);
}
}
}
})
}
}
n(0);
}
}
}
mediaController.reloadVersions=function(){
$('#loadversionimg').css("opacity","1");
$('#reloadVersionButton').hide();
var f=playbackController.getPlayingSong();
var g=function(b,c,d){
$.ajax({
timeout:30000,
url:preferences.serverURL+"?reloadversions="+b+"&title="+c+"&duration="+d+"&auth="+authController.ip_token,
complete:function(a){
setTimeout(function(){mediaController.getReloadedVersions(b,c)},2000);
}
})
}
var h=function(d,e){
$.ajax({
url:"http://ws.audioscrobbler.com/2.0/?method=track.getInfo&api_key=019c7bcfc5d37775d1e7f651d4c08e6f&artist="+d+"&track="+e+"&format=json",
success:function(a){
var b=200000;
if(a.track){
if(a.track.duration){
b=a.track.duration;
}
}
if(authController.ip_token!="auth"&&authController.ip_token!=""){
var c=false;
g(d,e,b);
}
}
})
}
var i=encodeURIComponent(mediaController.getSongArtist(f));
var j=encodeURIComponent(f.name);
h(i,j);
}
mediaController.playVersion=function(f,g,h){
if(!mediaController.noClick){
console.dir("PLAY VERSION!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!");
var i=false;
$('#loadversionimg').css("opacity","1");
mediaController.playCounter++;
var j=mediaController.playCounter;
var k=f.url
var l=function(c,d){
var e=playbackController.getPlayingSong();
if(d!=mediaController.currentvideoURL){
if(videoController.isEmbedVideo(d)){
if(g==1){
mediaController.sendRating("-1");
}
mediaController.playStreamURLSeek(d,d,true,g);
$('#loadversionimg').css("opacity","0");
setTimeout(function(){
videoController.showBuffering(false);
},500);
}
else{
if(authController.ip_token!="auth"&&authController.ip_token!=""){
$.ajax({
timeout:30000,
url:preferences.serverURL+"?playurl="+encodeURIComponent(d)+"&artist="+encodeURIComponent(mediaController.getSongArtist(e))+"&title="+encodeURIComponent(e.name)+"&auth="+authController.ip_token,
success:function(a){
if(authController.ensureAuthenticated(a,function(){
l(c,d);
})){
if(c==mediaController.playCounter){
if(a.streamURL){
var b=a.streamURL;
if(a.videoURL){
d=a.videoURL;
}
d=unescape(d);
b=unescape(b);
if(b){
if(g==1){
mediaController.sendRating("-1");
}
if(h==1){
mediaController.startVersionIndex=-1;
}
mediaController.seekTime=videoController.progressTime; mediaController.seekTimeDuration=videoController.maxTime;mediaController.versionListSong=e;
mediaController.playStreamURLSeek(b,d,true,g);
}else
i=true;
}else
i=true;
}else
i=true;
}
},
error:function(){
i=true;
},
complete:function(){
$('#loadversionimg').css("opacity","0");
setTimeout(function(){
videoController.showBuffering(false);
},500);
}
})
}
}
}
else{
$('#loadversionimg').css("opacity","0");
setTimeout(function(){
videoController.showBuffering(false);
},500);
}
}
l(j,k);
}
}
mediaController.loadStreamURL=function(d,e,f,g,h,i,j,k){
var l=false;
$.ajax({
timeout:60000,
url:preferences.serverURL+"?play="+encodeURIComponent(e)+"&force1="+encodeURIComponent(f)+"&force2="+encodeURIComponent(g)+"&duration="+i+"&fromCache="+k+"&auth="+authController.ip_token,
success:function(a){
console.dir(" mediaController.loadStreamURL success")
if(d==mediaController.playCounter){
if(authController.ensureAuthenticated(a,function(){
console.dir("authController.ensureAuthenticated")
mediaController.loadStreamURL(d,e,f,g,h,i,j,k);
})){
mediaController.playCounter++;
var b="";
if(a.videoURL){
b=a.videoURL;
}
b=unescape(b);
console.dir("videoURL: "+b)
if(videoController.isEmbedVideo(b)){
h=b;
mediaController.playStreamURL(h,b,true);
if(playbackController.playedSongs.length>100){
playbackController.playedSongs.splice(playbackController.playedSongs.length-100,100)
}
}
else if(a.streamURL){
h=a.streamURL;
h=unescape(h);
console.dir("streamURL: "+h)
console.dir(a);
if(h){
mediaController.playStreamURL(h,b,true);
if(playbackController.playedSongs.length>100){
playbackController.playedSongs.splice(playbackController.playedSongs.length-100,100)
}
}
}else
l=true;
}
}
},
error:function(a,b,c){
console.dir(" mediaController.loadStreamURL error: "+a.responseText)
l=true;

},
complete:function(){
console.dir(" mediaController.loadStreamURL complete")
if(l){
mediaController.onLoadingError(d,j);
}
}
})
}
mediaController.onLoadingError=function(a,b){
if(a==mediaController.playCounter){
setTimeout(function(){
videoController.showBuffering(false);
},500);
uiController.toast("Sorry, this song is not available at the moment.",1500);
if(!b)
playbackController.resetPlayingSong();
else
playbackController.playNextSong();
mediaController.songError();
}
}
mediaController.playStream=function(j,k,l,m){
console.dir("playStream "+j+" "+k)
if(m=="1"||m==1){
console.dir(" mediaController.retrySongCounter = 0;")
mediaController.retrySongCounter=0;
}
videoController.setLoopButton(false);
mediaController.playCounter++;
var n=mediaController.playCounter;
var o=j;
var p=k;
o=o.replace("?","");
p=p.replace("?","");
var q=""
if(j!="")
q=j+" - "+k;
else
q=k;
var r="";
var s=function(d,e,f,g,h,i){
$.ajax({
url:"http://ws.audioscrobbler.com/2.0/?method=track.getInfo&api_key=019c7bcfc5d37775d1e7f651d4c08e6f&artist="+encodeURIComponent(f)+"&track="+encodeURIComponent(g)+"&format=json",
success:function(a){
console.dir("mediaController.playStream sucess!")
if(d==mediaController.playCounter){
var b=200000;
if(a.track){
if(a.track.duration){
b=a.track.duration;
}
}
if(authController.ip_token!="auth"&&authController.ip_token!=""){
var c=false;
console.dir("mediaController.loadStreamURL: "+f+" "+g)
mediaController.loadStreamURL(d,e,f,g,h,b,l,i);
}
}
},
error:function(){
console.dir("mediaController.playStream error!")
var a=200000;
mediaController.loadStreamURL(d,e,f,g,h,a,l,i);
}
})
}
s(n,q,o,p,r,m);
}
mediaController.playStreamURLSeek=function(a,b,c,d){
console.dir("playStreamURLSeek!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!");
setTimeout(function(){
playbackController.playingOldSong=playbackController.playingSong;
playbackController.setNewTitle(playbackController.playingSong.name,mediaController.getSongCover(playbackController.playingSong),true);
mediaController.playSong(a,b)
if(d==1){
mediaController.sendRating("1");
}
if(c){
videoController.disableVersionControl(false);

}else
videoController.disableVersionControl(true);
},200)
}
mediaController.songError=function(){
setTimeout(function(){
videoController.showBuffering(false);
},500);
uiController.toast("Sorry, this song is not available at the moment.",1500);
playbackController.resetPlayingSong();
}
mediaController.playNextVersion=function(){
console.dir("playNextVersion!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!");
if(!videoController.versionsEnabled)
return;
var g=playbackController.getPlayingSong();
if(g.name!=""){
if(mediaController.versionListSong!=g){
var h=function(d){
if(d<120){
if(authController.ip_token!="auth"&&authController.ip_token!=""){
var f=g;
$.ajax({
url:preferences.serverURL+"?getversions=8&artist="+encodeURIComponent(mediaController.getSongArtist(f))+"&title="+encodeURIComponent(f.name)+"&auth="+authController.ip_token,
success:function(a){
if(authController.ensureAuthenticated(a,function(){
h(d);
})){
if(a.track){
if(playbackController.getPlayingSong()==f){
mediaController.startVersionIndex=-1;
var b=-1
for(var i=0;i<a.track.length;i++){
try{
a.track[i].title=decodeURIComponent(a.track[i].title);
}
catch(e){
a.track[i].title=unescape(a.track[i].title);
}
try{
a.track[i].url=decodeURIComponent(a.track[i].url);
}
catch(e){
a.track[i].url=unescape(a.track[i].url);
}
if(a.track[i].url==mediaController.currentvideoURL){
b=i;
}
a.track[i].rated=0;
}
b=b+1;
if(b>=a.track.length){
b=0;
}
mediaController.playVersion(a.track[b],1,0);
}
}
else{
if(playbackController.getPlayingSong()==f){
setTimeout(function(){
h(d+1)
},1500);
}
}
}
},
error:function(a,b,c){
if(playbackController.getPlayingSong()==f){
setTimeout(function(){
h(d+2)
},5000);
}
}
})
}
}
}
h(0);
}
else{
var j=-1
for(var i=0;i<mediaController.versionList.length;i++){
if(mediaController.versionList[i].url==mediaController.currentvideoURL){
j=i;
}
}
j=j+1;
if(j>=mediaController.versionList.length){
j=0;
}
console.log("nextIndex: "+j);
console.log("startVersionIndex: "+mediaController.startVersionIndex);
if(mediaController.startVersionIndex!=j){
if(mediaController.startVersionIndex==-1){
mediaController.startVersionIndex=j;
}
mediaController.playVersion(mediaController.versionList[j],1,0)
}
else{
mediaController.songError();
}
}
}
}
mediaController.playStreamURL=function(e,f,g){
console.dir("playStreamURL!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!");
$(".songlist li.oldloadedsong").removeClass("oldloadedsong loadedsong playing pausing");
uiController.swipeTimer=Date.now();setTimeout(function(){
var a=playbackController.getListElementFromElement(playbackController.playingSong);
if(a.length==0||(a.length>0&&a.hasClass("loadedsong"))){
uiController.dontRemark=true;
var b=Date.now()-playbackController.startedLoadingTime;

a.addClass("firstplay");
var c=a.find("img.ui-li-icon");
var d=a.find(".loadingSongImg");
c.addClass("fadeout");
d.addClass("fadeout");
uiController.swipeTimer=Date.now();setTimeout(function(){
if(a.hasClass("stillloading")){
a.addClass("playing");
a.removeClass("stillloading")
}
a.find("img.ui-li-icon").css("opacity","0.001")
a.find(".loadingSongImg").css("opacity","0")
a.find(".loadingSongImg").removeClass("fadeout")
a.find("img.ui-li-icon").removeClass("fadeout");
setTimeout(function(){
a.find("img.ui-li-icon").addClass("fadeincomplete")
a.removeClass("firstplay");
setTimeout(function(){
a.find(".loadingSongImg").css("opacity","")
a.find("img.ui-li-icon").css("opacity","1")
a.find("img.ui-li-icon").removeClass("fadeincomplete");
uiController.dontRemark=false;
},1000)
},500)
},50)
playbackController.playingOldSong=playbackController.playingSong;
playbackController.setNewTitle(playbackController.playingSong.name,mediaController.getSongCover(playbackController.playingSong),true);
mediaController.playSong(e,f);
console.dir(e);
if(g){
videoController.disableVersionControl(false);

}else
videoController.disableVersionControl(true);
}
},100)
}
mediaController.toggleLyrics=function(){
var a=$('#lyricsiframe');

mediaController.showLyrics=!mediaController.showLyrics;
if(mediaController.showLyrics){
if(playbackController.playingSong){
var b="http://lyrics.wikia.com/"+mediaController.getSongArtist(playbackController.playingSong)+":"+playbackController.playingSong.name+"?useskin=wikiamobile";
if($("#lyricsifrm").attr("src")!=b)
$("#lyricsifrm").attr("src",b);
a.show();
setTimeout(function(){
a.css("left","").css("opacity","").css("pointer-events","auto");
},0)
}
}else{
a.css("left","-50px").css("opacity","0").css("pointer-events","none");
setTimeout(function(){
a.hide();
},1500)
}
}

mediaController.getSongCoverForLoadedPlaylist=function(){
if(playlistController.loadedPlaylists[0]&&playbackController.playingSong){
return mediaController.getSongCover(playbackController.playingSong);
}else
return"public/img/playlist.png";
}

mediaController.getImage=function(a,b){
if(!b)
var c="public/img/playlist.png";
else
c=b
if(a.image){
if(a.image[1])
c=a.image[1]['#text'];
else
c=a.image[0]['#text']
}else
c="public/img/playlist.png";
if(!c||$.trim(c)=="")
c="public/img/playlist.png";
return c;
}

mediaController.getPlaylistCoverSong=function(a,b,c,d){
if(c.isPlaylist){
if(d&&playbackController.playingSong)
return"background-image:url("+mediaController.getSongCover(playbackController.playingSong,(a!=0))+")";
var e=c.tracks.length-1-a;
if(c.tracks&&c.tracks[e]){
if(c.tracks[e].isGoogleDrive){
return"background-image:url(public/img/playlistgdrive.png)";
}else{
return"background-image:url("+mediaController.getSongCover(c.tracks[e],(a!=0))+")";
}
}
else{
return"background-image:url(public/img/playlist.png);opacity:0.9;";
}
}else
return"display:none";
}
mediaController.getSongCover=function(a,b){
var c="";
if(!a)
c="public/img/playlist.png";
else if(a.isPlaylist){
c="public/img/empty.png";
}else{
if(a.image){
if(a.image[1]&&!b)
c=a.image[1]['#text'];
else
c=a.image[0]['#text']
}else
c="public/img/playlist.png";
}
if(!c||$.trim(c)=="")
c="public/img/playlist.png";
return c;
}
mediaController.getSongDisplayName=function(a){
if(!a)
return mediaController.unknownData;
var b=mediaController.getSongArtist(a);
if(b==""){
if(a.name)
return a.name
else
return mediaController.unknownData;
}else{
if(a.name)
return b+" - "+a.name;
else
return b+" - "+mediaController.unknownData;
}
}

mediaController.getElementTitle=function(a){
var b=a.name;
if(a.artist&&a.artist.name)
var c=a.artist.name;
else
c=mediaController.unknownData;
if(a.isPlaylist){
return"Playlist: "+b+" - "+c;
}else{
return"Song: "+b+" - "+c;
}
}
mediaController.getSongArtist=function(a){
if(!a)
return mediaController.unknownData;
var b=mediaController.unknownData;
if(a.artist){
if(a.artist.name)
b=a.artist.name;
else if(a.artist)
b=a.artist;
}
return b;
}
mediaController.openExternalSite=function(){
window.open(mediaController.currentvideoURL,'_blank');
if(videoController.isPlaying){
videoController.pauseSong();
}
}
mediaController.showNewMedia=function(){
}
cryptauth=function(a){
return SHA1(a+mediaController.randomseed+mediaController.ipaddress+mediaController.clientid);
}

;

;
var mediaelementPlayer=function(l){

this.container=null;this.containerVideo=null;this.videoSelector=l;
this.videoElement=$(l);

this.init=function(){
var k=this;
MediaElementPlayer.prototype.extoptions={scale:1.5,displayBox:false};

this.mediaElementPlayer=new MediaElementPlayer(l,{
features:['prevtrack','playpause','stop','nexttrack','shuffle','current','progress','duration','volume','fullscreen'],
pauseOtherPlayers:true,
enableKeyboard:false,
alwaysShowControls:true,
autosizeProgress:false,
success:function(g,h){
k.container=$(l).parents(".mejs-container");
k.containerVideo=$(l).parents(".mejs-mediaelement");
setTimeout(function(){
var f=k.mediaElementPlayer.setProgressRail;
k.mediaElementPlayer.setProgressRail=function(){
var a=f();
var b=k.mediaElementPlayer.media;
if(b&&b.buffered&&b.buffered.length>0&&b.buffered.end&&b.duration){
var c=b.duration;
var d=0;
for(var i=0;i<b.buffered.length;i++){
var e=b.buffered.end(i)-b.currentTime;
if(e>=0&&e<c){
c=e;
d=b.buffered.end(i);
}
}
a=d/b.duration;
}
else if(b&&b.bytesTotal!=undefined&&b.bytesTotal>0&&b.bufferedBytes!=undefined){
a=b.bufferedBytes/b.bytesTotal;
}
if(a!==null){
a=Math.min(1,Math.max(0,a));
videoController.setBufferedPercentage(a)
}
}
},0);
var j=$(".mejs-overlay-play").clone();
j.removeClass("mejs-overlay-play").addClass("mejs-overlay-resize");
j.insertAfter(".mejs-overlay-play");
k.container.find(".mejs-overlay-play").remove();
k.container.find(".mejs-overlay-resize").click(function(){
setTimeout(function(){
if(Date.now()-uiController.noVideoClickTimer>600){
videoController.playPauseSong();
}
},500)
})
k.container.find(".mejs-overlay-resize").dblclick(function(){
uiController.noVideoClickTimer=Date.now();
if(!uiController.isMaxVideoSizeFaktor(uiController.sizeVideo))
uiController.sizeVideo=uiController.sizeVideo*1.5;
else
uiController.sizeVideo=1/1.5;
uiController.styleVideo();
})
g.addEventListener("canplay",function(e){
k.mediaElementPlayer.media.setVolume(videoController.volume);
k.canplay=true;
if(k.startplay){
k.play();
}
else if(k.startplause)
k.pause();
k.startplause=false;
k.startplay=false;
k.startplay=false;
})
g.addEventListener("playing",function(e){
videoController.playingSong();
k.updateTime.call(k);
});
g.addEventListener("ended",function(e){
videoController.endedSong();
k.stopUpdateTime();
});
g.addEventListener("error",function(e){if(mediaController.currentvideoURL!=""){
if(!videoController.isEmbedVideo(mediaController.currentvideoURL)){
console.log("MEDIAELEMENT ERROR!")
mediaController.PlayingSongError();
}
}

});
g.addEventListener('loadeddata',function(e){
videoController.setMaxTime(g.duration)
});
},
error:function(){
console.log("Error creating mediaelementjs!");
}
});
};

this.load=function(a){
videoController.setProgressPercentage(0);
this.mediaElementPlayer.setSrc(a);
this.mediaElementPlayer.load();
this.containerVideo.addClass("backgroundVideo").appendTo("#backgroundVideo");
this.canplay=false;
this.startplay=false;
this.startplause=false;
console.log("LOAD"+Date.now())
}

this.unload=function(a){
this.stop();
this.stopUpdateTime();
this.containerVideo.addClass("backgroundVideo").insertAfter($(this.container).find(".mejs-inner"));
this.containerVideo.find("video").first().attr('src','')
}
this.updateTime=function(){
var a=this;
if(a.updateTimeTimeout){
clearTimeout(a.updateTimeTimeout)
a.updateTimeTimeout=null;
}
if(a.mediaElementPlayer){
videoController.setProgressTime(a.mediaElementPlayer.media.currentTime);
}
this.updateTimeTimeout=setTimeout(function(){
a.updateTime.call(a)
},100);
}
this.stopUpdateTime=function(){
if(this.updateTimeTimeout){
clearTimeout(this.updateTimeTimeout)
this.updateTimeTimeout=null;
}
}
this.play=function(){
if(this.canplay){
this.mediaElementPlayer.play();
}
else{
this.startplay=true;
this.startplause=false;
}
};
this.pause=function(){
if(this.canplay){
this.mediaElementPlayer.pause();
this.stopUpdateTime();
}else{
this.startplay=false;
this.startplause=true;
}
};
this.stop=function(){
this.container.find(".mejs-stop-button").click()};

this.setProgressPercentage=function(a){
if(!this.mediaElementPlayer.media)
return;
var b=a*this.mediaElementPlayer.media.duration;
if(b&&b!==this.mediaElementPlayer.media.currentTime){
this.mediaElementPlayer.media.setCurrentTime(b);
}
videoController.setProgressPercentage(a,false)
}
this.setVolume=function(a){
if(this.mediaElementPlayer&&this.mediaElementPlayer.media)
this.mediaElementPlayer.media.setVolume(a);
};
}

;

;
var myBaseController=function(){
};
myBaseController.usesSearchList=false;
myBaseController.index=2;
myBaseController.inputText="Filter MyBase";

myBaseController.onInput=function(){
}

myBaseController.onClear=function(){
}

myBaseController.showView=function(){
myBaseController.visible=true;
$("#explorearea").show();
}

myBaseController.hideView=function(){
myBaseController.visible=false;
$("#explorearea").hide();
}
;

;
var optionsMenu=function(){
};
optionsMenu.options=[
{text:"",callback:null}
]
optionsMenu.openPlaylistOptions=function(b,c){
if(b)
b.stopPropagation();
optionsMenu.options=[
{text:"Play",callback:function(){
optionsMenu.closePopup();
setTimeout(function(){
var a=playlistController.getLoadedPlaylist();
if(a&&a.tracks.length>0)
playlistController.playSongList(a.tracks);
},150)
}},
{text:"Play next",callback:function(){
optionsMenu.closePopup();
setTimeout(function(){
var a=playlistController.getLoadedPlaylist();
if(a&&a.tracks.length>0)
playlistController.playSongListNext(a.tracks);
},150)
}},
{text:"Add to Playlist",callback:function(){
optionsMenu.closePopup();
setTimeout(function(){
var a=playlistController.getLoadedPlaylist();
if(a&&a.tracks.length>0)
playlistController.addSongListElementsToPlaylist(c,a.tracks,"r");
},150)
}},
{text:"Duplicate Playlist",callback:function(){
optionsMenu.closePopup();
var a=playlistController.loadedPlaylistSongs||[];
setTimeout(function(){
if(a&&a.length>0)
playlistController.loadNewPlaylistWithSongs(a)
},150)
}}
]
if(!playlistController.getLoadedPlaylist().isSimilarSongs){
optionsMenu.options.push({text:"Rename",callback:function(){
optionsMenu.closePopup();
$("#popupOptions").popup({
afterclose:function(){
$("#popupOptions").popup({afterclose:null});
setTimeout(function(){
$("#popupTextInput").popup('open',{positionTo:"window",transition:'pop'});
},100)
}
});
playlistController.editedPlaylistTitle="Rename Playlist";
playlistController.editedPlaylist=jQuery.extend(true,{},playlistController.getLoadedPlaylist());
$scope.safeApply();
}});
}
$scope.safeApply();
$("#popupOptionsList").listview("refresh");
$("#popupOptions").popup("option","arrow","r");
$("#popupOptions").popup('open',{positionTo:c,transition:'pop'});
$("#popupOptions-popup").css("margin-top","3px").css("margin-left","-10px");
}
optionsMenu.openQueueOptions=function(b,c){
if(b)
b.stopPropagation();
optionsMenu.options=[
{text:"Create new Playlist",callback:function(){
optionsMenu.closePopup();
var a=playlistController.loadedPlaylistSongs||[];
setTimeout(function(){
if(a&&a.length>0)
playlistController.loadNewPlaylistWithSongs(a)
},150)
}},
{text:"Clear Queue",callback:function(){
optionsMenu.closePopup();
playlistController.clearQueue();
}}
]
$scope.safeApply();
$("#popupOptionsList").listview("refresh");
$("#popupOptions").popup("option","arrow","r");
$("#popupOptions").popup('open',{positionTo:c,transition:'pop'});
$("#popupOptions-popup").css("margin-top","3px").css("margin-left","-10px");
}

optionsMenu.openSearchListSelectionOptions=function(a,b){
if(a)
a.stopPropagation();
optionsMenu.options=[
{text:"Play next",callback:function(){
optionsMenu.closePopup();
setTimeout(function(){
playlistController.playSelectionNext();
},150)
}},
{text:"Create new Playlist",callback:function(){
optionsMenu.closePopup();
setTimeout(function(){
playlistController.loadNewPlaylistWithSelectedSongs();
},150)
}},
{text:"Add to Playlist",callback:function(){
optionsMenu.closePopup();
setTimeout(function(){
playlistController.addSelectedElementsToPlaylist(b);
},150)
}}
]
$scope.safeApply();
$("#popupOptionsList").listview("refresh");
$("#popupOptions").popup("option","arrow","l");
$("#popupOptions").popup('open',{positionTo:b,transition:'pop'});
$("#popupOptions-popup").css("margin-top","7px").css("margin-left","15px");
}
optionsMenu.openPlayListSelectionPlaylistOptions=function(a,b){
if(a)
a.stopPropagation();
optionsMenu.options=[
{text:"Play next",callback:function(){
optionsMenu.closePopup();
setTimeout(function(){
playlistController.playSelectionNext();
},150)
}},
{text:"Create new Playlist",callback:function(){
optionsMenu.closePopup();
setTimeout(function(){
playlistController.loadNewPlaylistWithSelectedSongs();
},150)
}},
{text:"Add to Playlist",callback:function(){
optionsMenu.closePopup();
setTimeout(function(){
playlistController.addSelectedElementsToPlaylist(b);
},150)
}}
]
if(playlistController.selectedSongs.length==1){
optionsMenu.options.push(
{text:"Rename",callback:function(){
$("#popupOptions").popup({
afterclose:function(){
$("#popupOptions").popup({afterclose:null});
setTimeout(function(){
$("#popupTextInput").popup('open',{positionTo:"window",transition:'pop'});
},100)
}
});
optionsMenu.closePopup();
playlistController.editedPlaylistTitle="Rename Playlist";
playlistController.editedPlaylist=jQuery.extend(true,{},playlistController.selectedSongs[0].song);
$scope.safeApply();
}}
)
}
$scope.safeApply();
$("#popupOptionsList").listview("refresh");
$("#popupOptions").popup("option","arrow","l");
$("#popupOptions").popup('open',{positionTo:b,transition:'pop'});
$("#popupOptions-popup").css("margin-top","7px").css("margin-left","15px");
}
optionsMenu.openPlayListSelectionSongOptions=function(a,b){
if(a)
a.stopPropagation();
optionsMenu.options=[
{text:"Play next",callback:function(){
optionsMenu.closePopup();
setTimeout(function(){
playlistController.playSelectionNext();
},150)
}},
{text:"Create new Playlist",callback:function(){
optionsMenu.closePopup();
setTimeout(function(){
playlistController.loadNewPlaylistWithSelectedSongs();
},150)
}},
{text:"Add to Playlist",callback:function(){
optionsMenu.closePopup();
setTimeout(function(){
playlistController.addSelectedElementsToPlaylist(b);
},150)
}}

]
$scope.safeApply();
$("#popupOptionsList").listview("refresh");
$("#popupOptions").popup("option","arrow","l");
$("#popupOptions").popup('open',{positionTo:b,transition:'pop'});
$("#popupOptions-popup").css("margin-top","7px").css("margin-left","15px");
}

optionsMenu.openSharePlaylistOptions=function(b){
if(event)
event.stopPropagation();
var c=function(a){
return function(){
jqmAllowPopUpClosing=true;
$("#popupSharePlaylistOptions").popup('close');
setTimeout(function(){
mediaController.shareSelectedPlaylist(playlistController.playlists[a]);
},150);
}
};
optionsMenu.options=[];
for(var i=0;i<playlistController.playlists.length;i++){
if(!playlistController.playlists[i].isCurrentQueue&&!playlistController.playlists[i].isSimilarSongs){
var d=c(i);
optionsMenu.options.push({text:playlistController.playlists[i].name,callback:d})
}
}
$scope.safeApply();
$("#popupSharePlaylistOptionsList").listview("refresh");
$('#popupSharePlaylistOptions').popup('open',{positionTo:b});
}

optionsMenu.openChoosePlaylist=function(b,c,d){
if(event)
event.stopPropagation();
var e=function(a){
return function(){
optionsMenu.closePopup();
setTimeout(function(){
playlistController.addSongsToPlaylist(playlistController.playlists[a],c)
playlistController.deselectSongs();
},150);
}
};
optionsMenu.options=[];
for(var i=0;i<playlistController.playlists.length;i++){
if(!playlistController.playlists[i].isCurrentQueue&&!playlistController.playlists[i].isSimilarSongs){
var f=e(i);
optionsMenu.options.push({text:playlistController.playlists[i].name,callback:f})
}
}
f=e(playlistController.getPlaylistIndexFromId(playlistController.currentQueue.gid));
optionsMenu.options.push({text:playlistController.currentQueue.name,callback:f,currentQueue:true})
$scope.safeApply();
$("#popupOptionsList").listview("refresh");
$("#popupOptions").popup("option","arrow",d);
$("#popupOptions").popup('open',{positionTo:b,transition:'pop'});
if(d=="r")
$("#popupOptions-popup").css("margin-top","3px").css("margin-left","-10px");
else
$("#popupOptions-popup").css("margin-top","").css("margin-left","18px");
}
optionsMenu.openArtistResultsOptions=function(a,b){
if(a)
a.stopPropagation();
optionsMenu.options=[
{text:"Play",callback:null},
{text:"Add Songs to Playlist",callback:null},
{text:"Create new Playlist",callback:null}
]
$scope.safeApply();
$("#popupOptionsList").listview("refresh");
$("#popupOptions").popup("option","arrow",true);
$("#popupOptions").popup('open',{positionTo:b,transition:'pop'});
$("#popupOptions-popup").css("margin-top","").css("margin-left","1px");
}

optionsMenu.openPlaylistResultsOptions=function(g,h){
if(g)
g.stopPropagation();
optionsMenu.options=[
{text:"Play",callback:function(){
optionsMenu.closePopup();
if(searchController.playlists.searchResults&&searchController.playlists.searchResults.length>0){
setTimeout(function(){
uiController.disableUI(true);
var d=searchController.playlists.searchResults.concat();
var e=function(a,b,c){
if(b>0&&a[b-1]&&a[b-1].tracks&&a[b-1].tracks.length){
c=c+a[b-1].tracks.length;
if(c>0){
if(b==1)
playlistController.playSongList(a[b-1].tracks.concat());
else
playlistController.addSongsToPlaylist(playlistController.currentQueue,a[b-1].tracks.concat());
}
}
if(b<a.length&&c<searchController.maxResults){
searchController.loadPlaylistTracks(a[b],function(){
e(a,b+1,c);
},false)
}else{
uiController.disableUI(false);
}
}
e(d,0,0)
},150)
}
}},
{text:"Play next",callback:function(){
optionsMenu.closePopup();
if(searchController.playlists.searchResults&&searchController.playlists.searchResults.length>0){
setTimeout(function(){
uiController.disableUI(true);
var d=searchController.playlists.searchResults.concat();
var e=function(a,b,c){
if(b>0&&a[b-1]&&a[b-1].tracks&&a[b-1].tracks.length){
c=c+a[b-1].tracks.length;
if(c>0){
playlistController.addSongsToPlaylist(playlistController.currentQueue,a[b-1].tracks.concat());
}
}
if(b<a.length&&c<searchController.maxResults){
searchController.loadPlaylistTracks(a[b],function(){
e(a,b+1,c);
},false)
}else{
uiController.disableUI(false);
}
}
e(d,0,0)
},150)
}
}}
,
{text:"Create new Playlist",callback:function(){
optionsMenu.closePopup();
if(searchController.playlists.searchResults&&searchController.playlists.searchResults.length>0){
setTimeout(function(){
uiController.disableUI(true);
var e=searchController.playlists.searchResults.concat();
var f=function(a,b,c){
if(b>0&&a[b-1]&&a[b-1].tracks&&a[b-1].tracks.length){
c=c+a[b-1].tracks.length;
}
if(b<a.length&&c<searchController.maxResults){
searchController.loadPlaylistTracks(a[b],function(){
f(a,b+1,c);
},false)
}else{
if(c>0){
var d=[];
for(var i=0;i<a.length;i++){
d=d.concat(a[i].tracks);
}
if(d&&d.length>0)
playlistController.loadNewPlaylistWithSongs(d)
}
uiController.disableUI(false);
}
}
f(e,0,0)
},150)
}
}},
{text:"Add to Playlist",callback:function(){
optionsMenu.closePopup();
if(searchController.playlists.searchResults&&searchController.playlists.searchResults.length>0){
setTimeout(function(){
var a=searchController.playlists.searchResults.concat();
playlistController.addSongListElementsToPlaylist(h,a,"l");
},150)
}
}}
]
if(!searchController.isOnlyTypeDisplayed(2)){
optionsMenu.options.unshift({text:"Show all results",callback:function(){
optionsMenu.closePopup();
setTimeout(function(){
searchController.setShowMode(2)
},150)
}})
}
$scope.safeApply();
$("#popupOptionsList").listview("refresh");
$("#popupOptions").popup("option","arrow",true);
$("#popupOptions").popup('open',{positionTo:h,transition:'pop'});
$("#popupOptions-popup").css("margin-top","").css("margin-left","1px");
}

optionsMenu.openPlaylistSingleResultsOptions=function(a,b){
if(searchController.showedPlaylist&&searchController.showedPlaylist.tracks){
var c=searchController.showedPlaylist.tracks;
var d=searchController.showedPlaylist.name;
}
else{
c=[];
d=null;
}
optionsMenu.openSongListOptions(a,c,b,true,d)
}

optionsMenu.openSongListOptions=function(b,c,d,e,f){
if(b)
b.stopPropagation();
optionsMenu.options=[
{text:"Play",callback:function(){
optionsMenu.closePopup();
setTimeout(function(){
var a=c;
if(a&&a.length>0)
playlistController.playSongList(a.slice(0,searchController.maxResults));
},150)
}},
{text:"Play next",callback:function(){
optionsMenu.closePopup();
setTimeout(function(){
var a=c;
if(a&&a.length>0)
playlistController.playSongListNext(a.slice(0,searchController.maxResults));
},150)
}},
{text:"Add to Playlist",callback:function(){
optionsMenu.closePopup();
setTimeout(function(){
var a=c;
if(a&&a.length>0)
playlistController.addSongListElementsToPlaylist(d,a.slice(0,searchController.maxResults),"l");
},150)
}},
{text:"Create new Playlist",callback:function(){
optionsMenu.closePopup();
var a=c||[];
setTimeout(function(){
if(a&&a.length>0)
playlistController.loadNewPlaylistWithSongs(a.slice(0,searchController.maxResults),f)
},150)
}}
]
if(!e){
if(!searchController.isOnlyTypeDisplayed(1)){
optionsMenu.options.unshift({text:"Show all results",callback:function(){
optionsMenu.closePopup();
setTimeout(function(){
searchController.setShowMode(1)
},150)
}})
}
}
$scope.safeApply();
$("#popupOptionsList").listview("refresh");
$("#popupOptions").popup("option","arrow",true);
$("#popupOptions").popup('open',{positionTo:d,transition:'pop'});
$("#popupOptions-popup").css("margin-top","").css("margin-left","1px");
}

optionsMenu.openSongExploreOptions=function(a,b){
optionsMenu.openSongListOptions(a,exploreController.songs.searchResults,b,true)
}

optionsMenu.openSongResultsOptions=function(a,b){
optionsMenu.openSongListOptions(a,searchController.songs.searchResults,b)
}
optionsMenu.openUserResultsOptions=function(a,b){
if(a)
a.stopPropagation();
optionsMenu.options=[
{text:"Show All Results",callback:function(){
optionsMenu.closePopup();
setTimeout(function(){
searchController.setShowMode(4);
},150)
}
}
]
$scope.safeApply();
$("#popupOptionsList").listview("refresh");
$("#popupOptions").popup("option","arrow",true);
$("#popupOptions").popup('open',{positionTo:b,transition:'pop'});
$("#popupOptions-popup").css("margin-top","").css("margin-left","1px");
}
optionsMenu.closePopup=function(){
jqmAllowPopUpClosing=true;
$("#popupOptions").popup('close');
}
;

;
var playbackController=function(){
};

playbackController.doubleClickedElement=function(a){
a.stopPropagation();
}
playbackController.touchedElement=function(a,b){
if($(a.target).is("li"))
var c=$(a.target);
else
c=$(a.target).parents("li");
var d=c.data("song");
playbackController.clickedElement(a,d,b);
}

playbackController.clickedElement=function(a,b,c){
if(uiController.swipeTimer&&Date.now()-uiController.swipeTimer<100)
return;
var d=$(a.target).parents("li")
if(d.length>0&&(a.clientX-d.offset().left)<65){
playlistController.selectSong(b)
return;
}
if(b.isPlaylist){
if(b.gid){
playlistController.showPlaylist(b);
}else{
searchController.showPlaylist(b);
}
}else{
playbackController.playSong(b,c,false,true);
}
a.stopPropagation();
}

playbackController.playSong=function(a,b,c,d){
if(playbackController.playSongTimer&&Date.now()-playbackController.playSongTimer<100){
playbackController.playSongTimer=Date.now();
return;
}else
playbackController.playSongTimer=Date.now();
mediaController.versionListSong=null;
var e=playbackController.getListElementFromElement(a);
if(!b){
var f=e.hasClass("oldloadedsong")||(e.hasClass("loadedsong")&&playbackController.playingSong&&(((!a.gid)||(playbackController.playingSong.gid==a.gid))&&playbackController.playingSong.name==a.name)&&(mediaController.getSongArtist(playbackController.playingSong)==mediaController.getSongArtist(a)));
if(f){
if(playbackController.isLoading){
playbackController.resetPlayingSong();
return;
}
else if(playbackController.playingSong){
if(!e.hasClass("stillloading")){
setTimeout(function(){
videoController.playPauseSong();
},50);
}
return;
}
}
}
if(!playbackController.isLoading&&playbackController.playingSong){
playbackController.playingOldSong=playbackController.playingSong;
}
playbackController.updatePlayingSongIndex();
playbackController.playingSong=jQuery.extend(true,{},a);
if(playlistController.getLoadedPlaylist().isSimilarSongs)
playlistController.getSimilarSongs(playbackController.playingSong);
$(".songlist li.loadedsong.stillloading").removeClass("loadedsong stillloading");
$(".songlist li.loadedsong").addClass("oldloadedsong").removeClass("loadedsong");e.removeClass("playing pausing oldloadedsong");
e.addClass("loadedsong");
var g=false;
if(!b){
if(!f){
playbackController.setNewTitle(playbackController.playingSong.name,mediaController.getSongCover(playbackController.playingSong));
if(d){
if(playbackController.playingSong.playlistgid!=playlistController.currentQueue.gid){
var h=jQuery.extend(true,{},a);
h.playlistgid=playlistController.currentQueue.gid;
var i=[h];
playlistController.prepareGIDsToInsertSongsIntoPlaylist(playlistController.currentQueue,i)
playbackController.playingSong.gid=h.gid;playbackController.playingSong=i[0];
setTimeout(function(){
playlistController.insertSongsIntoQueue(i);
playbackController.updatePlayingSongIndex();
},0);
if(playlistController.loadedPlaylists["0"])
g=true;
}else
playbackController.updatePlayingSongIndex();
if(!c&&playlistController.playlistMode){
setTimeout(function(){
playlistController.animateAddedToList($(".currentqueue"));
},300)
}
}else
playbackController.updatePlayingSongIndex();
playbackController.isLoading=true;
playbackController.playingSongTimer=null;
playbackController.startedLoadingTime=Date.now();
if(playbackController.playingSong.streamURL)
mediaController.playStreamURL(playbackController.playingSong.streamURL);
else
mediaController.playStream(mediaController.getSongArtist(playbackController.playingSong),playbackController.playingSong.name,c,1);
playbackController.playedSongs.push(playbackController.playingSong);
}
}
$scope.safeApply();
if(!g){
playbackController.remarkSong();
}
setTimeout(function(){
$("#playingSongInfoLink").css("opacity","1");
$("#buySongLink").css("opacity","1");
},500)
setTimeout(function(){
if(mediaController.showLyrics)
$("#lyricsifrm").attr("src","http://lyrics.wikia.com/"+mediaController.getSongArtist(playbackController.playingSong)+":"+playbackController.playingSong.name);
videoController.disableLyricsControl(false);
videoController.disableShareSocialControl(false);
if(!playbackController.playingOldSong)
videoController.disableStopControl(false);
videoController.disableControls(false);
},0)
}

playbackController.resetPlayingSong=function(){
console.log("RESETTTTT")
playbackController.isLoading=false;
mediaController.playCounter=mediaController.playCounter+1;
$(".videoControlElements-controls").find('.videoControlElements-time-loaded').show();
videoController.showBuffering(false);
playbackController.playingSong=playbackController.playingOldSong;
$(".songlist li").removeClass("loadedsong playing stillloading pausing");
if(playbackController.playingSong){
playbackController.playSongTimer=0;
playbackController.playSong(playbackController.playingSong,true);playbackController.setNewTitle(playbackController.playingSong.name,mediaController.getSongCover(playbackController.playingSong),true);
}
else{
$(".songlist li.loadedsong.stillloading .loadingSongImg").hide();
videoController.disableControls(true);
videoController.disableStopControl(true);
$(".iScrollPlayIndicator").hide();
playbackController.setNewTitle("","",true);
$(".videoControlElements-button-lyrics button").css("opacity","0.5");
}
}

playbackController.updatePlayingSongIndex=function(){
playbackController.playingSongIndex=0;
if(playbackController.playingSong){
for(var i=playlistController.currentQueue.tracks.length-1;i>=0;i--){
if(playlistController.currentQueue.tracks[i].gid==playbackController.playingSong.gid){
playbackController.playingSongIndex=i;
console.log("........ "+i)
break;
}
}
}else if(playlistController.currentQueue.tracks&&playlistController.currentQueue.tracks.length>0){
playbackController.playingSongIndex=playlistController.currentQueue.tracks.length-1;
}
};

playbackController.setNewTitle=function(c,d,e){
if(!e){
facebookHandler.updateSongFBButtons();
$("#playingSongCover").removeClass("fadeincomplete")
$("#playingSongTitle").removeClass("fadeincomplete");
$("#playingSongTitle").hide();
$("#playingSongTitleLoading").hide();
$("#playingSongCover").hide();
}
setTimeout(function(){
$("#playingSongTitleLoading").removeClass("fadeincomplete").removeClass("fadeoutcomplete");
if(c&&c!="")
document.title=$scope.appTitle+" : "+c;
else
document.title=$scope.appTitle;
var a="";
if($("#searchinput").val()){
a=$("#searchinput").val()
}

if(!e){
d="public/img/loadertitle.gif";
$("#playingSongInfoStyle").remove();
var b=$('<style id="playingSongInfoStyle">'+
'.playingSongInfo.ui-icon-custom:after  {'+
' background-image: url('+d+')'+
'}'+
'#popupArtist-popup::before{'+
'  background-color:rgba(255,255,255,.5)!important'+
'}'+
'</style>');
$('html > head').append(b);
}
else{
$("#playingSongInfoStyle").remove();
b=$('<style id="playingSongInfoStyle">'+
'.playingSongInfo.ui-icon-custom:after  {'+
' background-image: url('+d+')'+
'}'+
'#popupArtist-popup::before{'+
'  background: url('+d+');'+
'  background-size:cover;!important'+
'}'+
'</style>');
$('html > head').append(b);
}
$scope.safeApply();
setTimeout(function(){
if(e){
$("#playingSongTitleLoading").addClass("fadeoutcomplete")
$("#playingSongTitleLoading").show();
}
else{
$("#playingSongCover").addClass("fadeincomplete")
$("#playingSongCover").show();
$("#playingSongTitleLoading").addClass("fadeincomplete")
$("#playingSongTitleLoading").show();
$("#playingSongTitle").addClass("fadeincomplete")
$("#playingSongTitle").show();
}
},50)
},150)
}

playbackController.playPrevSong=function(){
if(playlistController.currentQueue.tracks.length==1){
videoController.setProgressPercentage(0);
videoController.setProgressTime(0);
videoController.videoPlayer.setProgressPercentage(0);
setTimeout(function(){
videoController.playSong();
},0)
}else{
var a=false;
var b=playbackController.getIndexOfSong(playbackController.playingSong,playlistController.currentQueue.tracks);
if(b==-1){
if(playbackController.playedSongs.length==0){
b=1;
}
a=true;
}
if(playbackController.playedSongs.length>0){
var c=playbackController.playedSongs[playbackController.playedSongs.length-1];
playbackController.playedSongs.splice(playbackController.playedSongs.length-1,1);
var d=((!c.gid||(c.gid==playbackController.playingSong.gid))&&c.name==playbackController.playingSong.name&&mediaController.getSongArtist(c)==mediaController.getSongArtist(playbackController.playingSong));
if(d){
if(playbackController.playedSongs.length>=1){
c=playbackController.playedSongs[playbackController.playedSongs.length-1];
playbackController.playedSongs.splice(playbackController.playedSongs.length-1,1);
}
else
c=null;
}
}
if(!c){
if(a){
if(playlistController.currentQueue.tracks.length==0){
videoController.disablePositionControls(true);
return;
}
else
b=0;
}
else
b=b-1;
if(b<=-1)
b=playlistController.currentQueue.tracks.length-1;
playbackController.playSong(playlistController.currentQueue.tracks[b])

}else{
playbackController.playSong(c)
}
}
}

playbackController.playNextSong=function(){
if(playlistController.currentQueue.tracks.length==1){
videoController.setProgressPercentage(0);
videoController.setProgressTime(0);
videoController.videoPlayer.setProgressPercentage(0);
setTimeout(function(){
videoController.playSong();
},0)
}else{
var a=playbackController.getIndexOfSong(playbackController.playingSong,playlistController.currentQueue.tracks);
if(a>=0){
if(!videoController.shuffleMode){
a=a+1;
if(a==playlistController.currentQueue.tracks.length)
a=0;
}else if(playlistController.currentQueue.tracks.length>1){
var b=a;
do{
a=Math.round(Math.random()*(playlistController.currentQueue.tracks.length-1))
}
while(a==b)
}
playbackController.playSong(playlistController.currentQueue.tracks[a],false,true)
}else if(playlistController.currentQueue.tracks.length>0){
playbackController.playSong(playlistController.currentQueue.tracks[0],false,true)
}else
videoController.disablePositionControls(true);
}
}

playbackController.positionPlayIndicator=function(){
var a=playbackController.getListElementFromElement(playbackController.playingSong);
if(!a||a.length==0){
$("#searchlist .iScrollPlayIndicator").hide();
$("#playlistInner .iScrollPlayIndicator").hide();
}else{
if(a.parents("#playlistInner").length>0){
var b=$("#playlistInner .iScrollVerticalScrollbar").height();
var c=a.filter(':noparents(#playlistInner)');
var d=$("#playlistInner .othertopheight.songlisttitlebutton:visible").length*10;
var e=$("#playlistInner .othertopheight:visible");
for(var i=0;i<e.length;i++){
d=d+$(e.get(i)).height();
}
d=d/($("#playlistInner ul").outerHeight()-65)*b;
var f=$("#playlistInner .otherbottomheight.songlisttitlebutton:visible").length*10;
var g=$("#playlistInner .otherbottomheight:visible");
for(i=0;i<g.length;i++){
f=f+$(g.get(i)).height();
}
f=f/($("#playlistInner ul").outerHeight()-65)*b;
var h=c.get(0).dataset.index;
var y=5+parseInt(h)/(Math.min(playlistController.getDisplayLimit(),playlistController.loadedPlaylistSongs.length)-1)*(b-d-f)+d;
if(y>b)
y=b;
$("#playlistInner .iScrollPlayIndicator").css('-webkit-transform','translate(0px,'+y+'px)').css('-moz-transform','translate(0px, '+y+'px)').css('-ms-transform','translate(0px, '+y+'px)').css('transform','translate(0px, '+y+'px)')
$("#playlistInner .iScrollPlayIndicator").show();
}else
$("#playlistInner .iScrollPlayIndicator").hide();
if(a.parents("#searchlist").length>0){
b=$("#searchlist .iScrollVerticalScrollbar").height();
var j=a.filter(':noparents(#searchlist)');
d=$("#searchlist .othertopheight.songlisttitlebutton:visible").length*10;
e=$("#searchlist .othertopheight:visible");
for(var i=0;i<e.length;i++){
d=d+$(e.get(i)).height();
}
d=d/($("#searchlist ul").outerHeight()-65)*b;
f=$("#searchlist .otherbottomheight.songlisttitlebutton:visible").length*10;
g=$("#searchlist .otherbottomheight:visible");
for(i=0;i<g.length;i++){
f=f+$(g.get(i)).height();
}
f=f/($("#searchlist ul").outerHeight()-65)*b;
h=j.get(0).dataset.index;
y=5+parseInt(h)/(Math.min(searchController.getShowModeLimit(1),searchController.songs.searchResults.length)-1)*(b-d-f)+d;
if(y>b)
y=b;
$("#searchlist .iScrollPlayIndicator").css('-webkit-transform','translate(0px,'+y+'px)').css('-moz-transform','translate(0px, '+y+'px)').css('-ms-transform','translate(0px, '+y+'px)').css('transform','translate(0px, '+y+'px)')
if($("#searchlist .iScrollPlayIndicator:visible").length==0){
$("#searchlist .iScrollPlayIndicator").show();
}
}else
$("#searchlist .iScrollPlayIndicator").hide();
}
}

playbackController.positionPlayIndicatorAtTop=function(a){
var y=0;
if(playbackController.playingSong){
if(playbackController.playingSong.gid&&!a){
$("#playlistInner .iScrollPlayIndicator").css('-webkit-transform','translate(0px,'+y+'px)').css('-moz-transform','translate(0px, '+y+'px)').css('-ms-transform','translate(0px, '+y+'px)').css('transform','translate(0px, '+y+'px)')
}
else{
$("#searchlist .iScrollPlayIndicator").css('-webkit-transform','translate(0px,'+y+'px)').css('-moz-transform','translate(0px, '+y+'px)').css('-ms-transform','translate(0px, '+y+'px)').css('transform','translate(0px, '+y+'px)')
}
}
}

playbackController.getListElementFromElement=function(a,b){
if(!a)
return $([]);
var c=[],searchListElements=[];
if(!b||b==1)
searchListElements=$("#searchlist li[data-elementtitle='"+mediaController.getElementTitle(a)+"'] ");
if(!b||b==2)
c=$("#playlistInner li[data-songgid='playlistsong"+a.gid+"']");
return $(searchListElements).add(c);
}

playbackController.isPlayingSong=function(a){
if(playbackController.playingSong&&a)
return a.gid==playbackController.playingSong.gid||(mediaController.getSongDisplayName(a)==mediaController.getSongDisplayName(playbackController.playingSong))
else
return false;
}

playbackController.isLoadingSong=function(a){
return playbackController.isPlayingSong(a)&&playbackController.isLoading;
}

playbackController.remarkSong=function(){
if(uiController.dontRemark){
setTimeout(function(){
playbackController.remarkSong();
},150)
}
else{
var a;
a=playbackController.getListElementFromElement(playbackController.playingSong);
$(".songlist .loadedsong").not(a).removeClass("loadedsong");
var b=$(".songlist .oldloadedsong.playing")
$(".songlist .playing").not(a).removeClass("playing");
b.addClass("playing")
b=$(".songlist .oldloadedsong.pausing")
$(".songlist .pausing").removeClass("pausing");
b.addClass("pausing")
$(".songlist .stillloading").not(a).removeClass("stillloading");
if(playbackController.playingSong){
if(a.length>0){
playbackController.positionPlayIndicator();
a.addClass("loadedsong");
if(playbackController.isLoading){
a.addClass("stillloading");
}else if(videoController.isPlaying){
a.addClass("playing");
a.removeClass("pausing");
}
else{
a.addClass("pausing");
a.removeClass("playing");
}
}
}
}
}

playbackController.getPlayingTitle=function(){
if(playbackController.playingSong){
return mediaController.getSongDisplayName(playbackController.playingSong);
}
else
return"";
}

playbackController.getPlayingSong=function(){
if(playbackController.playingSong)
return playbackController.playingSong;
else
return{name:""};
}

playbackController.getIndexOfSong=function(a,b){
for(var c=0;c<b.length;c++){
if((!a.gid||(a.gid==b[c].gid))&&a.name==b[c].name&&mediaController.getSongArtist(a)==mediaController.getSongArtist(b[c])){
return c;
}
}
return-1;
}

;

;
var playlistController=function(){
};
playlistController.sortPlaylist=false;
playlistController.selectedSongs=[];
playbackController.playingSongIndex=0;
playlistController.similarSongsMaxResults=100;
playlistController.globalId="";playlistController.editedPlaylist={name:""};
playbackController.playedSongs=[];
playlistController.globalIdPlaylist="";playlistController.playlistMode=true;
playlistController.displayLimit=0;
playlistController.currentShowID=0;
playlistController.selectPlaylistsPlaceholder="Search your Playlists";
playlistController.loadedPlaylistSongs=[];
playlistController.currentQueue={gid:0,id:0,name:"Current Play Queue",isPlaylist:true,isCurrentQueue:true,tracks:[]};
playlistController.similarSongs={gid:1,id:1,name:"Similar Songs",isPlaylist:true,isSimilarSongs:true,tracks:[],song:{}};
playlistController.playlists=[playlistController.currentQueue,playlistController.similarSongs];playlistController.playlistHelp={playlist:"Drag and Drop your favorite Songs<br>to add them to this Playlist.",queue:"Drag and Drop your favorite Songs<br>to add them to the Play Queue."};
playlistController.loadedPlaylists={};
playlistController.counterGlobalId=0;
playlistController.init=function(){
setTimeout(function(){
$("#playlist").addClass("fadeincomplete").css("opacity","");
},0);
playlistController.makePlayListScrollable();
$(".iScrollIndicator").hide();
playlistController.chosenElement=$("#playlistselectverticalform").chosen({disable_search_threshold:2})
playlistController.chosenObject=$("#playlistselectverticalform").data("chosen")
$(".chosen-choices").addClass("ui-input ui-body-a ui-corner-all ui-shadow-inset");
$(".chosen-choices").css("min-height","2.2em");
$(".chosen-choices input").css("margin-top","5px")
$(".chosen-container").css("margin-top","-3px")
playlistController.chosenElement.change(function(a,b){
playlistController.onLoadedPlaylistsChanged();
});
$("#clearChoosenPlaylists").hide();
$scope.safeApply();
$("#searchlistview").listview('refresh');
uiController.updateUI();
setTimeout(function(){
playlistController.makePlayListSortable();
setTimeout(function(){
uiController.playListScroll.refresh();
setTimeout(function(){
uiController.playListScroll.refresh();
},1000)
},150)
},0)
playlistController.chosenElement.on("chosen:hiding_dropdown",function(){
setTimeout(function(){
$("#playlistselectvertical .chosen-drop").removeClass("visible")},0)
})
$("#playlistselectvertical .chosen-container").click(function(a){
if($('#playlistselectvertical #clearChoosenPlaylists:hover, #playlistselectvertical .search-choice:hover').length==0){
$("#playlistselectvertical .chosen-with-drop .chosen-drop").addClass("visible")
}
else
setTimeout(function(){
$("#playlistselectvertical .chosen-container").removeClass("chosen-with-drop");
},0)
});
$('#playlistselectvertical #clearChoosenPlaylists').click(function(a){
uiController.showPlaylists();
});
$('.chosen-container input').blur(function(){
setTimeout(uiController.updateUI,100);
});
playlistController.makePlayListSortable();
$(".sortable").sortable("disable");
$("#playlistselectvertical .ui-input-clear").appendTo("#playlistselectvertical .ui-input");
$("#playlistselectvertical .search-field input").attr("placeholder",playlistController.selectPlaylistsPlaceholder)
$("#playlistselectvertical .search-field input").on("focus",function(){
if($('#playlistselectvertical #clearChoosenPlaylists:hover, #playlistselectvertical .search-choice:hover').length==0)
setTimeout(function(){
$("#playlistselectvertical .chosen-with-drop .chosen-drop").addClass("visible")
$("#playlistselectvertical .chosen-container").addClass("chosen-with-drop");
},0)
})
$("#popupTextInput").popup({
beforeposition:function(a,b){
$.mobile.loading("hide");
},
afteropen:function(a,b){
$('#popupTextInput input').focus();
$('#popupTextInput input').select();
},
afterclose:function(){
$("#popupTextInput input").css("background-color","#fff").css("color","#000");
}
});
$('#popupTextInput input').keyup(function(e){
if(e.keyCode==13){
playlistController.renamePlaylist(playlistController.editedPlaylist,$("#popupTextInput input").val());
}else
playlistController.validateRenamePlaylist(playlistController.editedPlaylist,$("#popupTextInput input").val());
});
setTimeout(function(){
playlistController.createScrollIndicators();
},150)
}
playlistController.createScrollIndicators=function(){
uiController.playListScroll.refresh();
setTimeout(function(){
uiController.playListScroll.refresh();
},1000)
playlistController.scrollUpIndicator=$('<div class="iScrollScrollUpIndicator fadeincomplete" style="display:none;"></div>');
$("#playlistInner .iScrollVerticalScrollbar").prepend(playlistController.scrollUpIndicator);
playlistController.scrollUpIndicator.click(function(){
uiController.playListScroll.scrollTo(0,0,200);
});
uiController.playListScroll.on('scrollEnd',function(){
if(uiController.playListScroll.y==0){
$("#playlistInner .iScrollScrollUpIndicator").hide();
}else{
$("#playlistInner .iScrollScrollUpIndicator").show();
}
});
playlistController.playIndicator=$('<div class="iScrollPlayIndicator fadeincomplete5s" style="display:none;"></div>');
playlistController.playIndicator.appendTo("#playlistInner .iScrollVerticalScrollbar");
playlistController.playIndicator.click(function(){
uiController.playListScroll.scrollToElement(".loadedsong",700);
});
$(".iScrollIndicator").addClass("fadeincomplete");
}
playlistController.getNewID=function(){
var a=new Date();
playlistController.counterGlobalId++;
var b=MD5(a.getTime()+"."+Math.random()+"."+playlistController.counterGlobalId);
return"id_"+b;
}
playlistController.getDisplayLimit=function(){
var a;
if(playlistController.loadedPlaylistSongs.length<playlistController.displayLimit)
a=playlistController.loadedPlaylistSongs.length;
else
a=playlistController.displayLimit;
return a;
}
playlistController.applySongList=function(){
playlistController.displayLimit=0;
var j=function(b){
console.log("-------------------------------------")
$(".specialplaylistbutton").removeClass("fadeincompletefaster");
$("#playlistInner .iScrollIndicator").hide();
var c=10;
var d=50;
var e=playlistController.loadedPlaylistSongs.length;
var f=(Math.ceil(e/c));
if(f==0)
f=1;
console.log("SONGLIST APPLY")
console.log(f)
console.log(e+"  "+c)
var g=playlistController.isSongInList(playbackController.playingSong);
$("#playlistview").addClass("disablecoveranim");
for(var i=1;i<=f;i++){
var h=function(a){
setTimeout(function(){
if(playlistController.currentShowID==b){

playlistController.displayLimit=e*a/f;
console.log("safeapply")
$scope.safeApply();
console.dirx(JSON.parse(JSON.stringify(playlistController.loadedPlaylistSongs)));
$("#playlistview").listview('refresh');
if((g&&$("#playlistInner .loadedsong").length==0)||a==1)
playbackController.remarkSong();
if(a==1){
uiController.updateUI();
if(g)
playbackController.positionPlayIndicator();
playlistController.updateDeselectedSong();
$(".specialplaylistbutton").addClass("fadeincompletefaster");
$("#playlistview").css("opacity","1")
$("#playlistview").show();
$("#playlisthelp").show();
setTimeout(function(){
$("#playlistview").removeClass("disablecoveranim");
$("#playlistInner .iScrollIndicator").show();
},500)
$("#playlistInner .songlist").removeClass("hidden").removeClass("avoidhiding");
}
if(a==f){
if(g)
playbackController.positionPlayIndicator();
setTimeout(function(){
uiController.playListScroll.refresh();
},500)
setTimeout(function(){
uiController.playListScroll.refresh();
},2000)
playlistController.makePlayListSortable();
}else if(a%3==0){
uiController.playListScroll.refresh();
if(g)
playbackController.positionPlayIndicator();
}
}
},d*(a-1))
}
h(i)
}
}
playlistController.currentShowID=playlistController.currentShowID+1;
j(playlistController.currentShowID);
}

playlistController.isSongInList=function(a){
if(a){
var b=mediaController.getSongDisplayName(a)
for(var i=0;i<playlistController.loadedPlaylistSongs.length;i++){
if(b==mediaController.getSongDisplayName(playlistController.loadedPlaylistSongs[i])){
return true;
}
}
}
return false;
}

playlistController.showPlaylist=function(a){
if(playlistController.playlistMode){
$("#playlistInner .iScrollIndicator").hide();
$("#playlistInner .iScrollScrollUpIndicator").hide();
$("#playlistview").css("opacity","0")
}
if(Object.keys(playlistController.loadedPlaylists).length!=0){
if(playlistController.loadedPlaylists[0])
playlistController.playlistsQueueScrollY=uiController.playListScroll.y;
playlistController.loadedPlaylists={};
playlistController.loadedPlaylistSongs=[];
$('#playlistselectverticalform option').prop('selected',false);
}
$('#playlistselectverticalform option[value="'+a.gid+'"]').prop('selected',true);
$('#playlistselectverticalform').trigger('chosen:updated');
setTimeout(function(){
$('#playlistselectverticalform').trigger('chosen:close');
if($('#playlistselectverticalform option:selected').size()>1)
$("#clearChoosenPlaylists").show();
else
$("#clearChoosenPlaylists").hide();
playlistController.chosenElement.trigger('change');
uiController.updateUI();
$("#playlistselectvertical .chosen-container").removeClass("chosen-with-drop");
},0)
}
playlistController.updateDeselectedSong=function(){
for(var i=0;i<playlistController.selectedSongs.length;i++){
if(playlistController.selectedSongs[i].ele.closest("html").length==0||!playlistController.selectedSongs[i].ele.hasClass("selected")){
playlistController.selectedSongs.splice(i,1);
i--;
}
}
}

playlistController.selectSong=function(a){
if(!uiController.swipeTimer||Date.now()-uiController.swipeTimer>500){

var b=null;
if(a.gid){
b=playbackController.getListElementFromElement(a,2)
}
else{
b=playbackController.getListElementFromElement(a,1)
}
if(b)
b.toggleClass("selected");
var c=false;
if(b.hasClass("selected")){
playlistController.selectedSongs.push({ele:b,song:a})
c=true;
playlistController.hideSongOptions();
playlistController.showSongOptions(b,a);
}else if(playlistController.selectedSongs.length>0&&playlistController.selectedSongs[playlistController.selectedSongs.length-1].song==a){
while(playlistController.selectedSongs.length>0){
playlistController.selectedSongs.splice(playlistController.selectedSongs.length-1,1);
if(playlistController.selectedSongs.length>0&&playlistController.selectedSongs[playlistController.selectedSongs.length-1].ele.hasClass("selected")){
c=true;
playlistController.hideSongOptions();
playlistController.showSongOptions(playlistController.selectedSongs[playlistController.selectedSongs.length-1].ele,playlistController.selectedSongs[playlistController.selectedSongs.length-1].song);
break;
}
}
}
if(playlistController.selectedSongs.length==0||(!c&&playlistController.selectedSongs.length>0&&playlistController.selectedSongs[playlistController.selectedSongs.length-1].song==a)){
playlistController.hideSongOptions();
}
}
}

playlistController.positionSongOptions=function(){
if(playlistController.selectedSongs.length>0&&$(".songOptions").length>0){
var a=playlistController.selectedSongs[playlistController.selectedSongs.length-1].song
var b=$("<h3 id='textMeasuring' style='opacity:0;z-index:10000000;top:80px;left:0;font-size: 1em;font-weight: bold;position:absolute'>"+a.name+"</h3>").appendTo("body").width()
var c=$("<div id='textMeasuring2' style='opacity:0;z-index:10000000;top:110px;left:0;font-size: .75em;position:absolute'>"+mediaController.getSongArtist(a)+"</div>").appendTo("body").width()
$("#textMeasuring").remove();
$("#textMeasuring2").remove();
if(b<c)
b=c;
b=b+35;
if(63+b+150>playlistController.selectedSongs[playlistController.selectedSongs.length-1].ele.outerWidth()-50)
b=playlistController.selectedSongs[playlistController.selectedSongs.length-1].ele.outerWidth()-150-63-50;
$(".songOptions").css("left",(63+b)+"px");
}
}

playlistController.showSongOptions=function(e,f){
setTimeout(function(){
if(playlistController.selectedSongs.length>0&&playlistController.selectedSongs[playlistController.selectedSongs.length-1].song==f&&e.hasClass("selected")){
var a=$("<h3 id='textMeasuring' style='opacity:0;z-index:10000000;top:80px;left:0;font-size: 1em;font-weight: bold;position:absolute'>"+f.name+"</h3>").appendTo("body").width()
var b=$("<div id='textMeasuring2' style='opacity:0;z-index:10000000;top:110px;left:0;font-size: .75em;position:absolute'>"+mediaController.getSongArtist(f)+'<span ng-if ="song.playcount !== undefined && song.playcount"><span  style="font-style: normal;font-size: .83em;margin-left:2px;"> ?</span><span class="songPlayCount" style="font-style: italic;font-size: .93em;margin-left:2px;">'+f.playcount+'</span></span> </div>').appendTo("body").width()
$("#textMeasuring").remove();
$("#textMeasuring2").remove();
if(a<b)
a=b;
a=a+35;
if(63+a+150>e.outerWidth()-50)
a=e.outerWidth()-150-63-50;
var c=Date.now();
$("#songOptionsOriginal").clone(true,true).attr("id","").addClass("songOptions songOptions"+c).appendTo(e)
var d=$(".songOptions"+c)
d.css("opacity","0");
d.css("left",(63+a+20)+"px");
d.addClass("noanim").hide();
d.removeClass("noanim").show();
setTimeout(function(){
d.css("left",(63+a)+"px");
d.css("opacity","0.83");
},0)
}
},0)
}

playlistController.hideSongOptions=function(){
var a=$(".songOptions")
if(a.length>0){
a.css("opacity","0");
a.css("width","0px");
a.css("left",(parseInt($(".songOptions").css("left").replace("px",""))-5)+"px");
setTimeout(function(){
a.remove();
},200)
}
}

playlistController.getSongListFromSelection=function(){
var a=[];
for(var i=0;i<playlistController.selectedSongs.length;i++){
var b=playlistController.selectedSongs[i].song;
if(b.isPlaylist){
if(b.tracks&&b.tracks.length>0){
for(var j=0;j<b.tracks.length;j++){
a.push(b.tracks[j])
}
}
}else
a.push(b)
}
return a;
}

playlistController.playSongList=function(a){
a=jQuery.extend(true,[],a);
if(a.length>0){
playlistController.prepareGIDsToInsertSongsIntoPlaylist(playlistController.currentQueue,a);
console.log("!!!!!!!!!!")
console.dir(a)
playlistController.insertSongsIntoQueue(a);
playbackController.playSong(a[0],false,false,false);
playbackController.playingSong=a[0];
if(playlistController.playlistMode){
setTimeout(function(){
playlistController.animateAddedToList($(".currentqueue"));
},300
)
}
}
}

playlistController.playSelection=function(a){
a.stopPropagation();
playlistController.playSongList(playlistController.getSongListFromSelection());
playlistController.deselectSongs();
}

playlistController.prepareGIDsToInsertSongsIntoPlaylist=function(a,b){
for(var i=0;i<b.length;i++){
var c=jQuery.extend(true,{},b[i]);
c.playlistgid=a.gid;
if(!c.gid){
c.gid=playlistController.getNewID();
}else{
for(var j=0;j<a.tracks.length;j++){
var d=a.tracks[j];
if(c.gid==d.gid){
var e=playlistController.getNewID();
if(playbackController.playingSong&&playbackController.playingSong.gid==d.gid){
playbackController.playingSong.gid=e;
}
d.gid=e;
}
}
}
b[i]=c;
}
}

playlistController.playSongListNext=function(a){
a=jQuery.extend(true,[],a);
if(a.length>0){
playlistController.prepareGIDsToInsertSongsIntoPlaylist(playlistController.currentQueue,a);
playlistController.insertSongsIntoQueue(a);
if(!playbackController.playingSong)
playbackController.playSong(a[0],false,false,false);
if(playlistController.playlistMode){
setTimeout(function(){
playlistController.animateAddedToList($(".currentqueue"));
},300
)
}
}
}

playlistController.playSelectionNext=function(){
playlistController.playSongListNext(playlistController.getSongListFromSelection());
playlistController.deselectSongs();
}

playlistController.loadNewPlaylistWithSelectedSongs=function(){
var a=playlistController.getSongListFromSelection();
if(a.length>0){
playlistController.loadNewPlaylistWithSongs(a)
}
playlistController.deselectSongs();
}

playlistController.animateAddedToList=function(a){
a.addClass("addedsongs").removeClass("hoverable")
setTimeout(function(){
a.removeClass("addedsongs")
setTimeout(function(){
a.addClass("hoverable")
},200)
},2000)
}

playlistController.playlistChanged=function(a,b){
if(!b)
b=playlistController.getPlaylistPosition(a.gid);
if(b>-1){
accountController.savePlaylist(a.gid,a.name,a.tracks,b);
}
}

playlistController.showMoreSelectionOptions=function(a,b){
a.stopPropagation();
if($(b).parents("#searchlist").length>0)
optionsMenu.openSearchListSelectionOptions(a,$(a.target))
else{
if(playlistController.playlistMode)
optionsMenu.openPlayListSelectionPlaylistOptions(a,$(a.target))
else
optionsMenu.openPlayListSelectionSongOptions(a,$(a.target))
}
}

playlistController.clearQueue=function(){
if(playbackController.playingSong)
playlistController.loadedPlaylistSongs=[jQuery.extend(true,{},playbackController.playingSong)];
else
playlistController.loadedPlaylistSongs=[];
playlistController.currentQueue.tracks=playlistController.loadedPlaylistSongs;
playbackController.updatePlayingSongIndex();
accountController.savePlaylist(playlistController.currentQueue.gid,null,playlistController.currentQueue.tracks);
$("#playlistInner .iScrollPlayIndicator").hide();
$("#playlistInner .songlist").addClass("hidden");
playlistController.applySongList();
}

playlistController.insertSongsIntoQueue=function(a){
var b=playlistController.currentQueue.tracks.slice(0,playbackController.playingSongIndex+1).concat(a);
playlistController.currentQueue.tracks=b.concat(playlistController.currentQueue.tracks.slice(playbackController.playingSongIndex+1));
for(var j=playbackController.playingSongIndex;j<playbackController.playingSongIndex+a.length&&j<playlistController.currentQueue.tracks.length;j++){
if(!playlistController.currentQueue.tracks[j].image){
setTimeout(mediaController.loadPreview(playlistController.currentQueue.tracks[j]),j*300);
}
}
if(playlistController.loadedPlaylists["0"]){
if(Object.keys(playlistController.loadedPlaylists).length==1){
playlistController.loadedPlaylistSongs=playlistController.currentQueue.tracks;
}
playlistController.displayLimit=playlistController.loadedPlaylistSongs.length;
$scope.safeApply();
$("#playlistview").listview('refresh');
setTimeout(function(){
$("#playlistview").listview('refresh');
uiController.updateUI();
playbackController.remarkSong();
setTimeout(function(){
uiController.playListScroll.refresh();
setTimeout(function(){
uiController.playListScroll.refresh();
},1000)
},150)
},0)
}
}

playlistController.addSongListElementsToPlaylist=function(a,b,c){
b=jQuery.extend(true,[],b);
setTimeout(function(){
optionsMenu.openChoosePlaylist(a,b,c);
},300)
}

playlistController.loadSharedPlaylist=function(d){
$.mobile.loading("show");
$.ajax({
timeout:30000,
url:preferences.serverURL+"?loadplaylist="+d+"&auth="+authController.ip_token,
success:function(a){
if(authController.ensureAuthenticated(a,function(){
playlistController.loadSharedPlaylist(d);
})){
if(a.data){
var b=a.data;
playlistController.prepareGIDsToInsertSongsIntoPlaylist(playlistController.currentQueue,b);
playlistController.insertSongsIntoQueue(b);
if(playlistController.currentQueue.tracks&&playlistController.currentQueue.tracks[0]){
playbackController.playSong(playlistController.currentQueue.tracks[0]);
}
setTimeout(function(){
playlistController.loadCurrentQueue();
},4500);
}
}
},
error:function(a,b,c){
console.dir(a.responseText);
},
complete:function(){
$.mobile.loading("hide");
}
})
}

playlistController.addSelectedElementsToPlaylist=function(a){
playlistController.addSongListElementsToPlaylist(a,playlistController.getSongListFromSelection(),"l");
}

playlistController.addSongsToPlaylist=function(h,i){
var k=function(a,b){
playlistController.prepareGIDsToInsertSongsIntoPlaylist(a,b);
var c=a.tracks.length;
a.tracks=a.tracks.concat(b);
for(var j=c;j<a.tracks.length;j++){
if(!a.tracks[j].image){
setTimeout(mediaController.loadPreview(a.tracks[j]),j*300);
}
}
setTimeout(function(){
accountController.savePlaylist(a.gid,a.name,a.tracks);
},0);
$scope.safeApply();
if(playlistController.playlistMode){
if(a.gid==playlistController.currentQueue.gid)
playlistController.animateAddedToList($(".currentqueue"));
else
playlistController.animateAddedToList(playbackController.getListElementFromElement(a));
}else if(playlistController.getLoadedPlaylist().gid==a.gid){
if(Object.keys(playlistController.loadedPlaylists).length==1){
playlistController.loadedPlaylistSongs=a.tracks;
}
playlistController.displayLimit=playlistController.loadedPlaylistSongs.length;
$scope.safeApply();
playbackController.remarkSong();
$("#playlistview").listview('refresh');
setTimeout(function(){
$("#playlistview").listview('refresh');
uiController.updateUI();
setTimeout(function(){
playbackController.remarkSong();
uiController.playListScroll.refresh();
setTimeout(function(){
uiController.playListScroll.refresh();
},1000)
},150)
},0)
}
}
var l=function(d,e){
var f=function(a){
if(a.length>0){
k(d,a);
}
}
uiController.disableUI(true);
var g=function(a,b,c){
if(b>0&&a[b-1]){
if(a[b-1].isPlaylist){
if(a[b-1].tracks&&a[b-1].tracks.length){
c=c.concat(a[b-1].tracks);
}
}else{c=c.concat([a[b-1]]);
}
}
if(b<a.length&&c.length<searchController.maxResults){
if(a[b].isPlaylist&&!a[b].tracks){
searchController.loadPlaylistTracks(a[b],function(){
g(a,b+1,c);
},false)
}else g(a,b+1,c);
}else{
f(c.concat());
uiController.disableUI(false);
}
}
g(e,0,[])
}
l(h,i)
}

playlistController.addSelectedElementsToQueue=function(a){
a.stopPropagation();
var b=playlistController.getSongListFromSelection();
playlistController.addSongsToPlaylist(playlistController.currentQueue,b);
playlistController.deselectSongs();
}

playlistController.removeSelectedElementsFromPlaylist=function(d,e){
d.stopPropagation();
var f=function(){
var a=false;
for(var i=0;i<playlistController.selectedSongs.length;i++){
var b=playlistController.selectedSongs[i].song;
if(b.gid){
if(b.isPlaylist){
for(var j=0;j<playlistController.playlists.length;j++){
if(playlistController.playlists[j].gid==playlistController.selectedSongs[i].song.gid){
accountController.deletePlaylist(playlistController.playlists[j].gid);
playlistController.playlists.splice(j,1);
a=true;
j--;
}
}
}else{
var c=playlistController.getLoadedPlaylist();
for(var j=0;j<c.tracks.length;j++){
if(c.tracks[j].gid==playlistController.selectedSongs[i].song.gid){
c.tracks.splice(j,1);
j--;
accountController.savePlaylist(c.gid,c.name,c.tracks);
}
}
for(var j=0;j<playlistController.loadedPlaylistSongs.length;j++){
if(playlistController.loadedPlaylistSongs[j].gid==playlistController.selectedSongs[i].song.gid){
playlistController.loadedPlaylistSongs.splice(j,1);
j--;
}
}
}
}
}
console.log(":::::::::::::::::::::::::::: "+a)
if(a){
accountController.savePlaylistsPosition();
}
$scope.safeApply();
playbackController.remarkSong();
$("#playlistview").listview('refresh');
setTimeout(function(){
$("#playlistview").listview('refresh');
uiController.updateUI();
setTimeout(function(){
playbackController.remarkSong();
uiController.playListScroll.refresh();
setTimeout(function(){
uiController.playListScroll.refresh();
},1000)
},150)
},0)
playlistController.deselectSongs();
}
var g=false;
if(!e){
for(var i=0;i<playlistController.selectedSongs.length;i++){
var h=playlistController.selectedSongs[i].song;
if(h.gid&&h.isPlaylist){
g=true;
break;
}
}
}
if(g){
$("#popupConfirm").popup('open',{transition:'pop'});
}
else
f();
}

playlistController.shareSelectedElements=function(a){
a.stopPropagation();
}

playlistController.getPlaylistGIDFromChosenElement=function(a){
var b=playlistController.chosenObject.results_data[a.find("a").attr("data-option-array-index")];
var c=playlistController.chosenObject.form_field.options[b.options_index]
if(c)
return c.value;
else
return undefined;
}

playlistController.onLoadedPlaylistsChanged=function(){
var a=function(){
setTimeout(function(){
$("#playlistselectvertical .chosen-container").removeClass("chosen-with-drop");
uiController.updateUI();
},0)
if(Object.keys(playlistController.loadedPlaylists).length!=0){
playlistController.chosenClose();
$(".search-field input").css("opacity","0")
if(playlistController.loadedPlaylists[0])
playlistController.playlistsQueueScrollY=uiController.playListScroll.y;
playlistController.loadedPlaylists={};
playlistController.loadedPlaylistSongs=[];
$('#playlistselectverticalform option').prop('selected',false);
$('#playlistselectverticalform').trigger('chosen:updated');
playlistController.loadedPlaylistSongs=playlistController.playlists;
playlistController.loadedPlaylists={};
playlistController.playlistMode=true;
$("#playlistInner .iScrollIndicator").hide();
$("#playlistInner .iScrollPlayIndicator").hide();
$("#playlistInner .iScrollScrollUpIndicator").hide();
$("#clearChoosenPlaylists").hide();
$("#playlistview").hide();
$scope.safeApply();
$('#playlistselectverticalform').trigger('chosen:updated');
playlistController.updateDeselectedSong();
uiController.updateUI();
setTimeout(function(){
$("#playlistview").listview('refresh');
uiController.playListScroll.scrollTo(0,playlistController.playlistsScrollY,0);
$("#playlistview").show();
playlistController.makePlayListSortable();
setTimeout(function(){
uiController.playListScroll.refresh();
if(playlistController.playlistsScrollY)
uiController.playListScroll.scrollTo(0,playlistController.playlistsScrollY,0);
},150)
setTimeout(function(){
uiController.playListScroll.refresh();
},1000)
},0)
}

}
var b=[];
var c=$('#playlistselectvertical .search-choice')
if(c.length>0){
for(var i=0;i<c.length;i++){
var d=$(c.get(i));
var e=d.find("span").text();
b.push(e);
var f=playlistController.getPlaylistGIDFromChosenElement(d);
if(!playlistController.loadedPlaylists[f])
var g=d.find("span").text();
else{
d.remove();
}
}
if(g){
d.find(".search-choice-close").attr("title","Close")
var h=null;
for(var i=0;i<playlistController.playlists.length;i++){
if(playlistController.playlists[i].name==g)
h=playlistController.playlists[i];
}
console.log("LOAD----???"+g+"   "+playlistController.loadedPlaylists[h.gid]+"   "+h.gid)
if(h!=null&&!playlistController.loadedPlaylists[h.gid]){
console.log("LOAD------------------------------------------------------------------------------ "+g)
if(h.gid==playlistController.currentQueue.gid){
$(d).on("click",function(){
optionsMenu.openQueueOptions(event,$(this))
})
}else{
$(d).on("click",function(){
optionsMenu.openPlaylistOptions(event,$(this))
})
}
playlistController.hideHelp=true;
$("#playlistview").css("opacity","0")
if(Object.keys(playlistController.loadedPlaylists).length!=0){
if(playlistController.loadedPlaylists[0])
playlistController.playlistsQueueScrollY=uiController.playListScroll.y;
playlistController.loadedPlaylists={};
playlistController.loadedPlaylistSongs=[];
$('#playlistselectverticalform option').prop('selected',false);
$('#playlistselectverticalform option[value="'+h.gid+'"]').prop('selected',true);
$('#playlistselectverticalform').trigger('chosen:updated');
}
if(h.isSimilarSongs&&playbackController.playingSong){
if(playlistController.similarSongs.song.name!=playbackController.playingSong.name||playlistController.similarSongs.song.artist.name!=playbackController.playingSong.artist.name){
$.mobile.loading("show");
playlistController.getSimilarSongs(playbackController.playingSong);
}
}
playlistController.loadPlaylist(h);
}
}else if(Object.keys(playlistController.loadedPlaylists).length!=0)a();
}else if(Object.keys(playlistController.loadedPlaylists).length!=0)a();

$('#playlistselectvertical .search-choice').data('loaded','true')
if($('#playlistselectverticalform option:selected').size()>1)
$("#clearChoosenPlaylists").show();
else
$("#clearChoosenPlaylists").hide();
uiController.updateUI();
$('.search-choice-close').unbind('click',a);
$(".search-choice-close").click(a)
}
playlistController.deselectSongs=function(a){
if(a)
a.stopPropagation();
$(".songlist li.selected").removeClass("selected");
playlistController.selectedSongs=[];
playlistController.hideSongOptions();
}

playlistController.chosenClose=function(){
$("#playlistselectvertical .chosen-container").removeClass("chosen-with-drop");
$("#playlistselectvertical .chosen-drop").removeClass("visible");
$("#playlistselectvertical chosen-container-active").removeClass("chosen-container-active");
playlistController.chosenObject.container.removeClass("chosen-container-active");
playlistController.chosenObject.clear_backstroke();
playlistController.chosenObject.show_search_field_default();
playlistController.chosenObject.search_field_scale();
playlistController.chosenObject.result_clear_highlight();
playlistController.chosenObject.active_field=false;
playlistController.chosenObject.results_showing=false
}

playlistController.openLoadedPlaylistMenu=function(a,b){
if(playlistController.getLoadedPlaylist().gid==playlistController.currentQueue.gid){
optionsMenu.openQueueOptions(a,$(b).find(".optionsPlaylist"))
}else{
optionsMenu.openPlaylistOptions(a,$(b).find(".optionsPlaylist"))
}
}
playlistController.validateRenamePlaylist=function(a,b){
var c=false;
if(!b||$.trim(b)=="")
var c=true
else{
for(var i=0;i<playlistController.playlists.length;i++){
if(playlistController.editedPlaylist.gid!=playlistController.playlists[i].gid&&$.trim(b)==$.trim(playlistController.playlists[i].name)){
c=true;
}
}
}
if(c){
$("#popupTextInput input").css("background-color","rgb(111, 0, 0)").css("color","#fff");
}else{
$("#popupTextInput input").css("background-color","#fff").css("color","#000");
}
return!c
}

playlistController.renamePlaylist=function(a,b){
if(playlistController.validateRenamePlaylist(a,b)){
$("#popupTextInput").popup("close");
setTimeout(function(){
a=playlistController.getPlaylistFromId(a.gid)
if(a){
a.name=b;
delete a.isUnnamedPlaylist;
$scope.safeApply();
accountController.savePlaylist(a.gid,a.name);
}
},150)
}
}
playlistController.importPlaylistPopup=function(){
$("#popupImportInput").popup("open",{transition:'pop'});
}
playlistController.loadPlaylist=function(a){
$("#playlistInner .iScrollIndicator").hide();
$("#playlistInner .iScrollScrollUpIndicator").hide();
playlistController.loadedPlaylists[a.gid]=a;
if(playlistController.playlistMode){
playlistController.loadedPlaylistSongs=[];
playlistController.playlistMode=false;
playlistController.playlistsScrollY=uiController.playListScroll.y;
}
if(a.gid==playlistController.currentQueue.gid&&playlistController.playlistsQueueScrollY)
uiController.playListScroll.scrollTo(0,playlistController.playlistsQueueScrollY,0);
else
uiController.playListScroll.scrollTo(0,0,0);
playlistController.loadedPlaylistSongs=a.tracks;

if(Object.keys(playlistController.loadedPlaylists).length>1||!playlistController.loadedPlaylists["0"]){
$("#playlisthelp").html(playlistController.playlistHelp.playlist)
}else{
$("#playlisthelp").html(playlistController.playlistHelp.queue)
}

playlistController.hideHelp=false;
playlistController.applySongList();
if(playlistController.renameLoadedPlaylist){
playlistController.renameLoadedPlaylist=false;
var b=function(){
if($(".ui-popup-container.ui-popup-active , .ui-popup-container.reverse.out").length==0){
playlistController.editedPlaylist=jQuery.extend(true,{},a);
playlistController.editedPlaylistTitle="New Playlist";
$scope.safeApply();
$("#popupTextInput").popup('open',{positionTo:"window",transition:'pop'});
}else
setTimeout(b,150)
}
setTimeout(b,0)
}
}
uiController.stopPlaylistScrollingOnClick=function(a){
var b=jQuery.extend({},a);
b.type="mouseup";
b.preventDefault=function(){
};
setTimeout(function(){
uiController.playListScroll.handleEvent(b);
},10)
setTimeout(function(){
uiController.playListScroll.handleEvent(b);
},100)
}


playlistController.getSongPlaylistName=function(a){
if(a.playlistgid===0){
return""}
else if(a.playlistgid&&playlistController.loadedPlaylists[a.playlistgid]){
return playlistController.loadedPlaylists[a.playlistgid].name;
}
return"";
}

playlistController.hasTrendStyle=function(a,b){
return(b.trend===a);
}

playlistController.getTrendTitleClass=function(a){
if(a.trend==0||a.trend==1||a.trend==2||a.trend==3){
return"songTitleMargin";
}
return"";
}


playlistController.scrollByWheel=function(a){
uiController.playListScroll.handleEvent(a);
}

playlistController.scrollByDragCallback=function(a){
if(uiController.draggingSortableSong||uiController.draggingSong){
var b=$(".draggedsortablelistelement, .draggedsearchlistelement");
if($("#playlistview").height()>$("#playlistInner").height()){
var c=false;
if($("#playlistInner").offset().top-b.offset().top>10&&Math.abs($("#playlistInner").offset().left-b.offset().left)<50){
if(!uiController.playListScrollTimer||Date.now()-uiController.playListScrollTimer>500){
console.log(uiController.playListScroll.scrollY)
uiController.playListScrollTimer=Date.now()
uiController.playListScroll.enable();
uiController.playListScroll.refresh();
c=true;
var d=uiController.playListScroll.y+$("#playlistInner").height()/2
}
}else if($("#playlistInner").offset().top+$("#playlistInner").height()-b.offset().top-b.height()<-10&&Math.abs($("#playlistInner").offset().left-b.offset().left)<50){
if(!uiController.playListScrollTimer||Date.now()-uiController.playListScrollTimer>500){
console.log(uiController.playListScroll.scrollY)
uiController.playListScrollTimer=Date.now()
uiController.playListScroll.enable();
uiController.playListScroll.refresh();
c=true;
d=uiController.playListScroll.y-$("#playlistInner").height()/2
}
}
if(d>0)
d=0;
else if(d<uiController.playListScroll.maxScrollY)
d=uiController.playListScroll.maxScrollY;
uiController.playListScroll.refresh();
if(c)
uiController.playListScroll.scrollTo(0,d,1000)
}
}
}

playlistController.getLoadedPlaylist=function(){
for(var a in playlistController.loadedPlaylists){
if(playlistController.loadedPlaylists.hasOwnProperty(a)){
return playlistController.loadedPlaylists[a]
}
}
return{};
}

playlistController.getPlaylistFromId=function(a){
for(var i=0;i<playlistController.playlists.length;i++){
if(playlistController.playlists[i].gid==a){
return playlistController.playlists[i];
}
}
return null;
}

playlistController.getPlaylistIndexFromId=function(a){
for(var i=0;i<playlistController.playlists.length;i++){
if(playlistController.playlists[i].gid==a){
return i;
}
}
return null;
}

playlistController.getPlaylistPosition=function(a){
for(var i=0;i<playlistController.playlists.length;i++){
if(playlistController.playlists[i].gid==a){
return i;
}
}
return-1;
}

playlistController.createEmptyPlaylist=function(a,b){
if(!b)
b="Playlist";
var c=playlistController.getNewID();
var d=0;
for(var i=0;i<playlistController.playlists.length;i++){
if(playlistController.playlists[i].name.substring(0,b.length)==b){
var e=playlistController.playlists[i].name.substring(b.length+2)
if(parseInt(e)&&d<=parseInt(e)){
d=parseInt(e);
}else if(!parseInt(e)&&(playlistController.playlists[i].name!=b||d==0))
d=d+1;
}
}
if(d>0){
b=b+" #"+(d+1);
}
var f={gid:c,id:c,name:b,isUnnamedPlaylist:true,isPlaylist:true,tracks:[]};
if(a)
playlistController.playlists.push(f);
else
playlistController.playlists.unshift(f);
return f;
}

playlistController.getSimilarSongs=function(c){
playlistController.similarSongs.song=jQuery.extend(true,{},c);
var d=c.artist.name;
var e=c.name;
var f="http://ws.audioscrobbler.com/2.0/?method=track.getsimilar&%searchTerm&api_key="+searchController.lastfmapikey+"&format=json"
$.when(
exploreController.basicOnlineSearchDeferred(f,"artist="+d+"&track="+e,searchController.searchTypeSongs,false,d)
).then(function(a){
var b=exploreController.songs.completeSearch([],a);
if(b&&b.length>0){
for(var i=0;i<b.length;i++){
b[i].gid=playlistController.getNewID();
}
playlistController.similarSongs.tracks=b.splice(0,playlistController.similarSongsMaxResults);
playlistController.loadedPlaylistSongs=playlistController.similarSongs.tracks;
uiController.playListScroll.scrollTo(0,0,1000)
$("#playlistInner .iScrollPlayIndicator").hide();
$("#playlistInner .iScrollIndicator").hide();
playlistController.applySongList();
}
$.mobile.loading("hide");
});
}

playlistController.loadSimilarSongs=function(){
if(uiController.swipeTimer&&Date.now()-uiController.swipeTimer<100)
return;
var a=playlistController.similarSongs;
$scope.safeApply();
setTimeout(function(){
playlistController.showPlaylist(a);
setTimeout(function(){
$scope.safeApply();
},50)
},0)
event.stopPropagation();
}

playlistController.loadCurrentQueue=function(){
if(uiController.swipeTimer&&Date.now()-uiController.swipeTimer<100)
return;
var a=playlistController.currentQueue;
$scope.safeApply();
setTimeout(function(){
playlistController.showPlaylist(a);
setTimeout(function(){
$scope.safeApply();
},50)
},0)
if(event)
event.stopPropagation();
}

playlistController.loadNewPlaylistWithSongs=function(a,b){
a=jQuery.extend(true,[],a);
$.mobile.loading("show");
var c=playlistController.createEmptyPlaylist(false,b);
for(var i=0;i<a.length;i++){
var d=jQuery.extend(true,{},a[i]);
if(d.playlistgid!=playlistController.currentQueue.gid||!d.gid)
d.gid=playlistController.getNewID()
d.playlistgid=c.gid;
d.id="plsid"+helperFunctions.padZeros(d,(""+playlistController.loadedPlaylistSongs.length).length);
a[i]=d;
}
c.tracks=a;
for(var j=0;j<c.tracks.length;j++){
if(!c.tracks[j].image){
setTimeout(mediaController.loadPreview(c.tracks[j]),j*300);
}
}
setTimeout(function(){
accountController.savePlaylist(c.gid,c.name,c.tracks);
accountController.savePlaylistsPosition();
},0)
$("#playlistview").hide();
$("#playlisthelp").hide();
playlistController.renameLoadedPlaylist=true;
$scope.safeApply();
setTimeout(function(){
playlistController.showPlaylist(c);
},0)
}

playlistController.loadNewEmptyPlaylist=function(){
if(uiController.swipeTimer&&Date.now()-uiController.swipeTimer<100)
return;
var a=playlistController.createEmptyPlaylist();
setTimeout(function(){
accountController.savePlaylist(a.gid,a.name,[]);
accountController.savePlaylistsPosition();
},0)
playlistController.renameLoadedPlaylist=true;
$scope.safeApply();
setTimeout(function(){
playlistController.showPlaylist(a);
},0)
event.stopPropagation();
}


playlistController.toggleSortablePlaylist=function(a){
console.log("!!!")
if(a&&playlistController.sortPlaylistTimer&&Date.now()-playlistController.sortPlaylistTimer<500){
return;
}
console.log("!!!2")
if(a){
uiController.startedSortPlaylist=false;
}
playlistController.sortPlaylist=!playlistController.sortPlaylist;
if(playlistController.sortPlaylist){
$(".sortable").sortable("enable");
$("#sortplaylistbtn").addClass("greenbackground");
$("#playlistInner").css("background-color","rgba(255,255,255,0.1)");
$('#playlistInner').css({backgroundColor:'rgba(255,255,255,0)'})
$('#playlistInner').animate({
backgroundColor:'rgba(255,255,255,0.1)'
},100);
$("#playlistsortstyle").remove();
var b=$('<style id="playlistsortstyle">'+
'#playlistInner ul li a{'+
'opacity:0.9!important;'+
'margin-bottom:-1px;'+
'border-bottom: 1px solid rgba(255,255,255,0.45);'+
'}'+
'</style>');
$('html > head').append(b);
console.log("!!!3")
}else{
playlistController.deselectSongs();
playlistController.sortPlaylistTimer=Date.now();
if(a){
var c=0;
}
else
c=1500;
setTimeout(function(){
if(!playlistController.sortPlaylist){
$('#playlistInner').animate({
backgroundColor:'rgba(255,255,255,0)'
},200);
}
},c)
$("#sortplaylistbtn").removeClass("greenbackground");
setTimeout(function(){
$(".sortable").sortable("disable");
},100)
uiController.playListScroll.enable();
$("#playlistsortstyle").remove();

}
setTimeout(uiController.updateUI,0);
}
playlistController.getHelpStyleClass=function(){
if(!playlistController.getLoadedPlaylist().isSimilarSongs&&!playlistController.playlistMode&&playlistController.loadedPlaylistSongs.length==0&&!playlistController.hideHelp){
return"";
}else{
return"invisible";
}
}

playlistController.makePlayListScrollable=function(){
uiController.playListScroll=new IScroll('#playlistInner',{
interactiveScrollbars:true,
zoom:true,
scrollX:false,
scrollY:true,
mouseWheel:true,
zoomMin:0.2,
zoomMax:1,
startZoom:1,
scrollbars:true,
noHorizontalZoom:true
});
$(".iScrollIndicator").addClass("fadeincomplete").hide();
}

playlistController.makePlayListSortable=function(){
var r=function(c){
playlistController.dragDraggableSongY=c.clientY;
playlistController.dragDraggableSongX=c.clientX;
if(playlistController.sortPlaylist){
if($(this).parents("#playlistInner").length==0)
return;
if(!playlistController.dragDraggableLastSongTimer||Date.now()-playlistController.dragDraggableLastSongTimer>500){
playlistController.dragDraggableSongTimer=Date.now();
playlistController.dragDraggableSongStartEvent=c;
playlistController.dragDraggableSongStartElement=this;
uiController.swiping=false;
}else
playlistController.dragDraggableSongTimer=0;
}
$("body").on("mouseup ",function(a){
$("body").off("mouseup");
$("body").off("mousemove");
playlistController.dragDraggableSongY=-10;
if(uiController.swiping||(playlistController.dragDraggableSongY>0&&Math.abs(a.clientY-playlistController.dragDraggableSongY)>30)){
uiController.swipeTimer=Date.now();
}
playlistController.dragDraggableSongTimer=0;
uiController.swiping=false;
})
$("body").on("mousemove ",function(a){
if(uiController.swiping||(playlistController.dragDraggableSongY>0&&Math.abs(a.clientY-playlistController.dragDraggableSongY)>30)){
uiController.swipeTimer=Date.now();
uiController.swiping=true;
}
if(playlistController.sortPlaylist){
if(playlistController.dragDraggableSongTimer&&Date.now()-playlistController.dragDraggableSongTimer<500&&Date.now()-playlistController.dragDraggableSongTimer>50){
uiController.stopPlaylistScrollingOnClick(a);
uiController.updateUI();
$("body").off("mousemove").off("mouseup");
playlistController.dragDraggableLastSongTimer=Date.now();
playlistController.dragDraggableSongTimer=0;
$(".sortable").sortable("enable");
var b={
clientX:playlistController.dragDraggableSongStartEvent.clientX,
clientY:playlistController.dragDraggableSongStartEvent.clientY
};
$(playlistController.dragDraggableSongStartElement).simulate("mouseup",b);
var b={
clientX:a.clientX,
clientY:a.clientY
};
$(playlistController.dragDraggableSongStartElement).simulate("mouseup",b);
uiController.mouseUp=false;
$(playlistController.dragDraggableSongStartElement).simulate("mousedown",b);
}
}
})
}
$("#playlistInner li").off("mousedown",r);
$("#playlistInner li").on("mousedown",r)
$("#playlistview").sortable({
tolerance:"pointer",
dropOnEmpty:true,
revert:true,
opacity:0.9,
items:".playlistsong",
helper:function(a,b){
$(".songOptions").appendTo("body").hide();
$("#searchlist li.selected").removeClass("selected")
if(!$(b).hasClass("selected")){
$("#playlistInner li.selected").removeClass("selected")
$(b).addClass("selected");
}

var c=$('<ul></ul>').addClass('songlist draggedlistelement draggedsortablelistelement');
var d=$("#playlistInner li.selected").removeClass("selected").removeClass("loadedsong playing pausing stillLoading");
d.find(".loadingSongImg").remove();
if(d.length==0){
var e=true;
d=$(b).removeClass("selected").removeClass("loadedsong playing pausing stillLoading");
d.removeClass("fadeslideincompletefast");
}else{
d.removeClass("fadeslideincompletefast");
$(d.get(0));
e=false;
}

$("#playlistplaceholder").remove();
$("<style type='text/css' id='playlistplaceholder'> #playlistInner ul .ui-sortable-placeholder{ height:"+(65*d.length)+"px !important} </style>").appendTo("head");
var f=c.append(d.clone());
if(!e){
for(var i=0;i<d.length;i++){
if(b[0]!=d.get(i)){
$(d.get(i)).hide();
}
}
playlistController.draggedElements=d;
}else
playlistController.draggedElements=null;
return f;
},
receive:function(a,b){
console.log(".......................")
console.dir(b)
},
start:function(a,b){
if(!uiController.draggingSong){
console.log("STARTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTT")
playlistController.hideSongOptions();
$("#playlistInner").offset().top
uiController.lastDraggingSongFromSearchlist=false;
uiController.draggingSortableSong=true;
$("#playlistInner").removeClass("animate");
$("#playlistInner li").removeClass("fadeslideincompletefast");
setTimeout(function(){
},3000)
$(".draggedsortablelistelement").off();
$(".draggedsortablelistelement").on('mousemove',playlistController.scrollByDragCallback);
$(".draggedsortablelistelement").on('wheel',playlistController.scrollByWheel);
$(".draggedsortablelistelement").on('mousewheel',playlistController.scrollByWheel);
$(".draggedsortablelistelement").on('DOMMouseScroll',playlistController.scrollByWheel);
uiController.playListScroll.enable();
}
},beforeStop:function(){
},
stop:function(k,l){
playlistController.dragDraggableSongY=0;
uiController.swiping=false;
var m=[];
if(playlistController.draggedElements){
playlistController.draggedElements.css("opacity","");
playlistController.draggedElements.show();
}
var n=0;
$("#playlistview").find("li").each(function(f){
$(this).removeClass("margintop fadeslideincompletefast");
if($(this).hasClass("specialplaylistbutton"))
return;
if($(this).hasClass("playlistsong")){i=this.dataset.index;
var g=false;
var h=false;
if(playlistController.draggedElements&&!uiController.lastDraggingSongFromSearchlist){
if(this.dataset.songgid&&l.item[0].dataset.index==this.dataset.index)
g=true;
else{
playlistController.draggedElements.each(function(a){
var b=playlistController.draggedElements[a].dataset.index;
if(b==i)
h=true;
})
}
}
console.dir("Playlist "+$(this).find("h3").text()+"   "+g+"   "+h)
if(g){playlistController.draggedElements.each(function(a){
i=playlistController.draggedElements[a].dataset.index;
if(playlistController.playlistMode)
j=playlistController.playlists[parseInt(i)];
else{
j=playlistController.loadedPlaylistSongs[parseInt(i)];
j.id="plsid"+helperFunctions.padZeros(n,(""+playlistController.loadedPlaylistSongs.length).length);
}
j=jQuery.extend(true,{},j);
m.push(j);
n=n+1
});
}
else if(!h){
if(playlistController.playlistMode)
j=playlistController.playlists[parseInt(i)];
else{
j=playlistController.loadedPlaylistSongs[parseInt(i)];
j.id="plsid"+helperFunctions.padZeros(n,(""+playlistController.loadedPlaylistSongs.length).length);
}
j=jQuery.extend(true,{},j);
m.push(j);
n=n+1
}
}else{console.dir("Searchlist "+$(this).find("h3").text())
var i=this.dataset.index;
g=false;
if(playlistController.draggedElements&&uiController.lastDraggingSongFromSearchlist){
if(!this.dataset.songgid&&l.item[0].dataset.index==this.dataset.index)
g=true;
}
if(g){playlistController.draggedElements.each(function(a){
var b=playlistController.draggedElements[a].dataset.index;
var c=searchController.getSongFromIndex(parseInt(b));
c=jQuery.extend(true,{},c);
if(c.tmpHide)
delete c.tmpHide;
c.gid=playlistController.getNewID();c.id="plsid"+helperFunctions.padZeros(n,(""+playlistController.loadedPlaylistSongs.length).length);
var d=Object.keys(playlistController.loadedPlaylists).length;
for(var e in playlistController.loadedPlaylists){
if(playlistController.loadedPlaylists.hasOwnProperty(e)){
if(playlistController.loadedPlaylists[e].isUnnamedPlaylist||d==1){
c.playlistgid=playlistController.loadedPlaylists[e].gid;
}
}
}
m.push(c);
n=n+1;
})
}
else{
var j=searchController.getSongFromIndex(parseInt(i));
j=jQuery.extend(true,{},j);
if(j.tmpHide)
delete j.tmpHide;
j.gid=playlistController.getNewID();j.id="plsid"+helperFunctions.padZeros(n,(""+playlistController.loadedPlaylistSongs.length).length);
m.push(j);
n=n+1
}
$(this).remove();
}
})
var o=Object.keys(playlistController.loadedPlaylists).length;playlistController.loadedPlaylistSongs=m;
playlistController.displayLimit=playlistController.loadedPlaylistSongs.length;
if(playlistController.playlistMode){
playlistController.playlists=playlistController.loadedPlaylistSongs;
setTimeout(function(){
accountController.savePlaylistsPosition();
},0)
}
else{
if($('#playlistselectverticalform option:selected').size()>1)
$("#clearChoosenPlaylists").show();
else
$("#clearChoosenPlaylists").hide();
for(var p in playlistController.loadedPlaylists){
if(playlistController.loadedPlaylists.hasOwnProperty(p)){
if(playlistController.loadedPlaylists[p].isUnnamedPlaylist||o==1){
playlistController.loadedPlaylists[p].tracks=playlistController.loadedPlaylistSongs;
}
}
}
}
setTimeout(function(){
for(var a in playlistController.loadedPlaylists){
if(playlistController.loadedPlaylists.hasOwnProperty(a)){
if(playlistController.loadedPlaylists[a].isUnnamedPlaylist||o==1){
if(playlistController.loadedPlaylists[a].tracks.length>0){
var b=playlistController.getPlaylistPosition(playlistController.loadedPlaylists[a].gid);
if(b>-1){
var c=playlistController.loadedPlaylists[a];
accountController.savePlaylist(c.gid,c.name,c.tracks);
}
}
}
}
}
},1000)

var q=uiController.playListScroll.y;
$("#playlistInner").hide();
$("#playlistInner").html(
window.$compile(
preloadhtml.playlisthtml
)($scope));
$scope.safeApply();
playbackController.remarkSong();
$("#playlistview").addClass("disablecoveranim");
setTimeout(function(){
$("#playlistview").removeClass("disablecoveranim");
},300)
$("#playlistview li").removeClass("fadeslideincompletefast").removeClass("fadeincomplete");
$("#playlistview").listview();
playlistController.makePlayListScrollable();
$("#playlistview").listview('refresh');
uiController.playListScroll.scrollTo(0,q);
$("#playlistInner").show();
uiController.updateUI();
setTimeout(function(){
playlistController.createScrollIndicators();
playbackController.positionPlayIndicator();
uiController.playListScroll.refresh();
setTimeout(function(){
uiController.playListScroll.refresh();
},1000)
},150)
if(uiController.startedSortPlaylist){
playlistController.toggleSortablePlaylist();
uiController.startedSortPlaylist=false;
}
setTimeout(function(){
playlistController.makePlayListSortable();
},0)
uiController.swipeTimer=Date.now();
uiController.draggingSortableSong=false;
},
appendTo:'body',
zIndex:"1000000"}).disableSelection();
$(".sortable").sortable("disable");
}
;

;
var preloadhtml=function(){
};
preloadhtml.sharefbartist=$("#fbartistbox").html();
$("#fbartistbox").html("");
preloadhtml.sharefbsong=$("#fbtitlebox").html();
$("#fbtitlebox").html("");
preloadhtml.recommendfb=$(".fb-recommendations-bar-container").html();
$(".fb-recommendations-bar-container").html("");
preloadhtml.playlisthtml=$("#playlistInner").html();
;

;
var searchController=function(){
};
searchController.lastfmapikey="019c7bcfc5d37775d1e7f651d4c08e6f";
searchController.songs=function(){
};
searchController.playlists=function(){
};
searchController.artists=function(){
};
searchController.users=function(){
};
searchController.songs.searchResults=[];
searchController.playlists.searchResults=[];
searchController.artists.searchResults=[];
searchController.users.searchResults=[];
searchController.usesSearchList=true;
searchController.index=0;
searchController.inputText="Search Songs and Playlists";
searchController.currentSearchID=0;
searchController.maxResults=100;
searchController.displayLimit=searchController.maxResults;
searchController.searchSongsString="";
searchController.showMode=-1;searchController.maxPopularSongPages=2;
searchController.maxArtistSongPages=2;

searchController.searchTypeSongs=0;
searchController.searchTypePlaylists=1;
searchController.searchTypeArtists=2;
searchController.searchTypeUsers=3;
if(generatedData&&generatedData.charts){
searchController.preloadedPopularSongs={"track":generatedData.charts};
setTimeout(function(){
searchController.songs.cleanList(searchController.preloadedPopularSongs.track);
},0)
}
else
searchController.preloadedPopularSongs={"track":[]}
searchController.init=function(){
uiController.searchListScroll=new IScroll('#searchlist',{
interactiveScrollbars:true,
zoom:true,
scrollX:false,
scrollY:true,
mouseWheel:true,
zoomMin:0.2,
zoomMax:1,
startZoom:1,
useTransition:true,
scrollbars:true,
noHorizontalZoom:true,
HWCompositing:false
});
$(".iScrollIndicator").addClass("fadeincomplete").hide();
uiController.searchListScroll.on('scrollEnd',function(){
if(uiController.searchListScroll.y==0){
$("#searchlist .iScrollScrollUpIndicator").hide();
}else{
$("#searchlist .iScrollScrollUpIndicator").show();
}
});
setTimeout(function(){
uiController.searchListScroll.refresh();
},150)
searchController.scrollUpIndicator=$('<div class="iScrollScrollUpIndicator fadeincomplete" style="display:none;"></div>');
$("#searchlist .iScrollVerticalScrollbar").prepend(searchController.scrollUpIndicator);
searchController.scrollUpIndicator.click(function(){
uiController.searchListScroll.scrollTo(0,0,200);
});
searchController.playIndicator=$('<div class="iScrollPlayIndicator fadeincomplete5s" style="display:none;"></div>');
searchController.playIndicator.appendTo("#searchlist .iScrollVerticalScrollbar");
searchController.playIndicator.click(function(){
uiController.searchListScroll.scrollToElement(".loadedsong",700);
});
}

searchController.onInput=function(){
if(searchController.showMode==5)
searchController.backShowMode();
$("#searchlist .iScrollPlayIndicator").hide();
$("#searchlist .iScrollScrollUpIndicator").hide();
searchController.startSearch();
}

searchController.onClear=function(){
searchController.startSearch()}

searchController.showView=function(){
uiController.searchListScroll.scrollTo(0,0,0);
searchController.visible=true;
$("#searchinput").val(searchController.searchSongsString);
setTimeout(function(){
if(searchController.visible){
searchController.displayLimit=0;
searchController.applySongList(searchController.currentSearchID);
}
},350)
}

searchController.hideView=function(){
searchController.visible=false;
searchController.currentSearchID++;
searchController.displayLimit=0;
searchController.searchSongsString=$("#searchinput").val();
$scope.safeApply();
$("#searchlistview").listview('refresh');
}
searchController.basicLocalSearchDeferred=function(b,c){
var d=$.Deferred();
setTimeout(function(){
var a=[];
d.resolve(a);
},0)
return d.promise();
}
searchController.basicOnlineSearchDeferred=function(f,g,h,k,l){
var m=$.Deferred();
f=f.replace("%searchTerm",g);
var n=function(){
if(!l)
var d=preferences.serverURL+"?searchjson="+g+"&type="+h+"&auth="+authController.ip_token;
else
d=preferences.serverURL+"?searchjson="+l+"&type="+h+"&auth="+authController.ip_token;
$.ajax({
d:d,
success:function(a){
if(a.auth&&a.auth=="true"){
authController.extractToken(a.token);
n();
}
else{
var b=[];
if(a.track){
for(var i=0;i<a.track.length;i++){
try{
a.track[i].artist=decodeURIComponent(a.track[i].artist);
}
catch(e){
a.track[i].artist=unescape(a.track[i].artist);
}
try{
a.track[i].name=decodeURIComponent(a.track[i].name);
}
catch(e){
a.track[i].name=unescape(a.track[i].name);
}
}
b=a.track;
}
for(var j=0;j<a.track.length;j++){
setTimeout(mediaController.loadPreview(a.track[j]),j*300);
}
m.resolve({list:b,native:true});
}
},
error:function(a,b,c){
console.dir("JUKE SERVER ERROR!");
console.dir(a);
m.resolve({list:[],native:true});
}
})
}
$.ajax({
url:f,
success:function(a){
if(!a)
a={};
if(a.results&&!(a.results.trackmatches=="\n"||a.results.albummatches=="\n"||a.results.artistmatches=="\n")){
m.resolve({list:a,native:false});
}else if(a.similartracks&&!(a.similartracks=="\n")){
m.resolve({list:a.similartracks,native:false});
}else{
if(!k){
n();
}else
m.resolve({list:[],native:true});
}
},
error:function(){
if(!k){
n();
}else
m.resolve({list:[],native:true});
}
})
return m.promise();
}

searchController.startSearch=function(f){
if(!f)
f=$("#searchinput").val();
viewController.showLoading(true);
if(f&&$.trim(f)!=""){
searchController.showedPopulars=false;
searchController.currentSearchID=searchController.currentSearchID+1;
var g=function(e){
$.when(
searchController.songs.startSearchDeferred(f),
searchController.playlists.startSearchDeferred(f),
searchController.artists.startSearchDeferred(f)
).then(function(a,b,c,d){
if(e==searchController.currentSearchID){
searchController.completedSearch(a,b,c,d);
}
});
};
g(searchController.currentSearchID);
}else{
searchController.showPopulars();
}
};

searchController.completedSearch=function(a,b,c,d){
if(a||b||c||d){
searchController.displayLimit=0;
if(searchController.showMode==-1)
searchController.showMode=0;
uiController.searchListScroll.scrollTo(0,0,1000)
if(a!=null)searchController.songs.searchResults=a;
if(b!=null)searchController.playlists.searchResults=b;
if(c!=null)searchController.artists.searchResults=c;
if(d!=null)searchController.users.searchResults=d;
console.dir("songList!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!")
console.dir(a);
searchController.applySongList(searchController.currentSearchID);
setTimeout(viewController.showLoading,100)}
};
searchController.showPopulars=function(){
if(searchController.preloadedPopularSongs){
searchController.playlists.searchResults=[];
searchController.artists.searchResults=[];
searchController.users.searchResults=[];
searchController.showedPopulars=true;
searchController.currentSearchID=searchController.currentSearchID+1;
searchController.completedSearch(searchController.preloadedPopularSongs.track);
}
}
searchController.emptySearchList=function(a){
searchController.currentSearchID++;
viewController.showLoading(false);
searchController.songs.searchResults=[];
searchController.playlists.searchResults=[];
searchController.artists.searchResults=[];
searchController.users.searchResults=[];
searchController.displayLimit=0;
$scope.safeApply();
console.log("EMPTYÄÄÄÄÄAYYYYIIIIIII")
$("#searchlistview").listview('refresh');
$("#searchlist .iScrollIndicator").hide();
$("#searchlist .iScrollPlayIndicator").hide();
$("#searchlist .iScrollScrollUpIndicator").hide();
playbackController.positionPlayIndicatorAtTop(true);
setTimeout(function(){
uiController.searchListScroll.refresh();
playlistController.updateDeselectedSong();
uiController.updateUI();
playbackController.remarkSong();
},0)
if(!a){
searchController.makeSearchListDraggable();
setTimeout(function(){
$("#searchlistview li").removeClass("fadeincompletefast");
},100)
}
}


searchController.songs.startSearchDeferred=function(d){
var e=$.Deferred();
var f="http://ws.audioscrobbler.com/2.0/?method=track.search&track=%searchTerm&limit=100&api_key="+searchController.lastfmapikey+"&format=json";
$.when(
searchController.basicLocalSearchDeferred(d,searchController.searchTypeSongs),
searchController.basicOnlineSearchDeferred(f,d,searchController.searchTypeSongs)
).then(function(a,b){
var c=searchController.songs.completeSearch(a,b)
e.resolve(c);
});
return e.promise();
}
searchController.formatNumber=function(x){
if(x.indexOf(".")==-1)
return x.toString().replace(/\B(?=(\d{3})+(?!\d))/g,".");
else
return x
}
searchController.songs.cleanList=function(a){
for(var i=0;i<a.length;i++){
var b=a[i];
if(!b.name||b.name==""){
a.splice(i,1);
i--;
}else{
if(b.playcount)
b.playcount=searchController.formatNumber(b.playcount);
if(b.artist){
if(!b.artist.name){
if(b.artist)
b.artist={name:b.artist};
}
}else
b.artist={name:mediaController.unknownData};
b.artist.name=$.trim(b.artist.name);
b.name=$.trim(b.name);
if(b.mbid){
delete b.mbid
}
if(b.streamable){
delete b.streamable
}
if(b.url){
delete b.url
}
}
}
}
searchController.songs.completeSearch=function(a,b){
if(b.native){
b=b.list;
}else{
if(b.list.results&&b.list.results.trackmatches)
b=b.list.results.trackmatches.track;
else if(b.list)
b=b.list.track;
}
if(!b)
b=[];
var c=a.concat(b)
searchController.songs.cleanList(c)
var d=false;
if(c.length&&searchController.songs.searchResults.length==c.length){
for(var i=0;i<searchController.songs.searchResults.length;i++){
if($.trim(searchController.songs.searchResults[i].artist.name)!=$.trim(c[i].artist.name)){
d=true;
break;
}
if($.trim(searchController.songs.searchResults[i].name)!=$.trim(c[i].name)){
d=true;
break;
}
}
}else
d=true;
if(!d){
c=null;
}
return c;
}


searchController.playlists.startSearchDeferred=function(d){
var e=$.Deferred();
var f="http://ws.audioscrobbler.com/2.0/?method=album.search&album=%searchTerm&limit=100&api_key="+searchController.lastfmapikey+"&format=json";
$.when(
searchController.basicLocalSearchDeferred(d,searchController.searchTypePlaylists),
searchController.basicOnlineSearchDeferred(f,d,searchController.searchTypePlaylists,true)
).then(function(a,b){
var c=searchController.playlists.completeSearch(a,b)
e.resolve(c);
});
return e.promise();
}
searchController.playlists.completeSearch=function(a,b){
if(b.native){
b=b.list;
}else
b=b.list.results.albummatches.album;
var c=a.concat(b)
for(var i=0;i<c.length;i++){
var d=c[i];
if(!d.name||d.name==""){
c.splice(i,1);
i--;
}else{
c[i].isPlaylist=true;
if(d.artist){
if(!d.artist.name){
if(d.artist)
d.artist={name:d.artist};
}
}else
d.artist={name:mediaController.unknownData};
d.artist.name=$.trim(d.artist.name);
d.name=$.trim(d.name);
}
}
var e=false;
if(searchController.playlists.searchResults.length==c.length){
for(var i=0;i<searchController.playlists.searchResults.length;i++){
if($.trim(searchController.playlists.searchResults[i].name)!=$.trim(c[i].name)){
e=true;
break;
}
}
}else
e=true;
if(!e){
c=null;
}
return c;
}


searchController.artists.startSearchDeferred=function(d){
var e=$.Deferred();
var f="http://ws.audioscrobbler.com/2.0/?method=artist.search&artist=%searchTerm&limit=100&api_key="+searchController.lastfmapikey+"&format=json";
$.when(
searchController.basicLocalSearchDeferred(d,searchController.searchTypeArtists)
).then(function(a,b){
var c=searchController.artists.completeSearch(a,b)
e.resolve(c);
});
return e.promise();
}
searchController.artists.completeSearch=function(a,b){
if(!b)
b=[];
if(b.native){
b=b.list;
}else if(b.list)
b=b.list.results.artistmatches.artist;
else
b=[];
var c=a.concat(b)
for(var i=0;i<c.length;i++){
var d=c[i];
if(!d.name||d.name==""){
c.splice(i,1);
i--;
}else{
c[i].isArtist=true;
d.name=$.trim(d.name);
}
}
var e=false;
if(searchController.artists.searchResults.length==c.length){
for(var i=0;i<searchController.artists.searchResults.length;i++){
if($.trim(searchController.artists.searchResults[i].name)!=$.trim(c[i].name)){
e=true;
break;
}
}
}else
e=true;
if(!e){
c=null;
}
return c;
}


searchController.getSongFromIndex=function(a){
if(searchController.showMode==5)
return searchController.showedPlaylist.tracks[a];
else
return searchController.songs.searchResults[a];
}

searchController.applySongList=function(a){
console.log("-------------------------------------")
$(".specialplaylistbutton").removeClass("fadeincompletefaster");
$("#searchlist .iScrollIndicator").hide();
var b=10;
var c=50;
if(searchController.showMode==0){
var d=searchController.maxResults;
}
else{
if(searchController.showed)
d=Math.min(searchController.showed.searchResults.length,searchController.maxResults)
else
d=searchController.maxResults;
}
var e=(Math.ceil(d/b));
console.log(e)
console.log(d+"  "+b)
viewController.applySongList(a,d,e,b,c);
}
searchController.searchArtistSongs=function(a){
return

}


searchController.showPlaylist=function(a){
console.dir(a)
a.tracks=[];
searchController.showedPlaylist=a;
searchController.oldShowMode=searchController.showMode;
searchController.showMode=5;
$("#searchlistview").hide();
$("#searchlist .iScrollIndicator").hide();
$("#searchlist .iScrollScrollUpIndicator").hide();
var b=function(){
$scope.safeApply();
setTimeout(function(){
$("#searchlistview").listview('refresh');
searchController.makeSearchListDraggable();
$("#searchlistview").show();
},150);
setTimeout(function(){
uiController.searchListScroll.refresh();
},150)
setTimeout(function(){
uiController.searchListScroll.refresh();
},1000)
}
setTimeout(function(){
searchController.loadPlaylistTracks(a,b,true);
},0);
}

searchController.loadPlaylistTracks=function(b,c,d){
var e="http://ws.audioscrobbler.com/2.0/?method=album.getinfo&api_key="+searchController.lastfmapikey+"&artist="+b.artist.name+"&album="+b.name+"&format=json";
$.ajax({
e:e,
success:function(a){
if(a.album&&a.album.tracks&&a.album.tracks.track){
searchController.songs.cleanList(a.album.tracks.track);
b.tracks=a.album.tracks.track;
if(b.tracks.length&&d){
for(var j=0;j<b.tracks.length;j++){
if(!b.tracks[j].image){
setTimeout(mediaController.loadPreview(b.tracks[j]),j*300);
}
}
}
console.dir(b);
}
},
error:function(){
},
complete:function(){
if(c)
c();
}
})
}

searchController.backShowMode=function(){
if(searchController.oldShowMode!==undefined)
searchController.setShowMode(searchController.oldShowMode);
}
searchController.getArtistInfo=function(){
$.ajax({
url:"&search=",
success:function(a){
if(a){
}
}
})
}

searchController.getSongFromId=function(a){
for(var i=0;i<searchController.songs.searchResults.length;i++){
if(searchController.songs.searchResults[i].id==a){
return searchController.songs.searchResults[i];
}
}
return null;
}

searchController.isSongInList=function(a){
if(a){
var b=mediaController.getSongDisplayName(a)
for(var i=0;i<searchController.songs.searchResults.length;i++){
if(b==mediaController.getSongDisplayName(searchController.songs.searchResults[i])){
return true;
}
}
}
return false;
}
searchController.isVisisbleInShowMode=function(a){
return searchController.showMode!=-1&&(a==searchController.showMode||searchController.showMode==0);
}

searchController.setShowMode=function(a){
if(a==searchController.showMode)
return;
if(searchController.isOnlyTypeDisplayed(a))
return;
$("#searchlistview").hide();
$("#searchlist .iScrollIndicator").hide();
$("#searchlist .iScrollScrollUpIndicator").hide();
if(searchController.showMode==0)
playlistController.searchListScrollY=uiController.searchListScroll.y;
searchController.showMode=a;
switch(a){
case 0:searchController.showed=null;
searchController.displayLimit=0;
$scope.safeApply();
$("#searchlistview").listview('refresh');
setTimeout(function(){
playbackController.remarkSong();
},0)
break;
case 1:searchController.showed=searchController.songs;
break;
case 2:searchController.showed=searchController.playlists;
break;
case 3:searchController.showed=searchController.artists;
break;
case 4:searchController.showed=searchController.user;
break;
}
setTimeout(function(){
if(searchController.showMode==0&&playlistController.searchListScrollY)
uiController.searchListScroll.scrollTo(0,playlistController.searchListScrollY,0);
else
uiController.searchListScroll.scrollTo(0,0,0);
},0);
searchController.applySongList(searchController.currentSearchID);
setTimeout(function(){
$("#searchlistview").show();
},150);
}

searchController.isOnlyTypeDisplayed=function(a){
return searchController.showMode==a||searchController.isOnlyResultType(a);
}

searchController.isOnlyResultType=function(a){
switch(a){
case 1:if(searchController.playlists.searchResults.length==0&&searchController.artists.searchResults.length==0&&searchController.users.searchResults.length==0)
return true;
break;
case 2:if(searchController.songs.searchResults.length==0&&searchController.artists.searchResults.length==0&&searchController.users.searchResults.length==0)
return true;
break;
case 3:if(searchController.playlists.searchResults.length==0&&searchController.songs.searchResults.length==0&&searchController.users.searchResults.length==0)
return true;
break;
case 4:if(searchController.playlists.searchResults.length==0&&searchController.songs.searchResults.length==0&&searchController.artists.searchResults.length==0)
return true;
break;
}
return false;
}
searchController.getShowModeLimit=function(a){
if(searchController.isOnlyTypeDisplayed(a)){
var b=searchController.displayLimit;
}else{
switch(a){
case 1:if(uiController.gridLayout)
b=Math.ceil(10/uiController.gridLayoutCols)*uiController.gridLayoutCols;
else
b=30;
break;
break;
case 2:if(uiController.gridLayout)
b=uiController.gridLayoutCols;
else
b=3;break;
case 3:if(uiController.gridLayout)
b=uiController.gridLayoutCols;
else
b=1;
break;
case 4:if(uiController.gridLayout)
b=uiController.gridLayoutCols;
else
b=3;
break;
}
}
return b
}

searchController.dragDraggableSongTimer=0;
searchController.makeSearchListDraggable=function(){
var k=function(e){
if($(this).parents("#searchlist").length==0)
return;
if(!searchController.dragDraggableLastSongTimer||Date.now()-searchController.dragDraggableLastSongTimer>500){
searchController.dragDraggableSongX=e.clientX;
searchController.dragDraggableSongY=e.clientY;
searchController.dragDraggableSongTimer=Date.now();
TIMER=Date.now()
searchController.dragDraggableSongStartEvent=e;
searchController.dragDraggableSongStartElement=this;
uiController.swiping=false;
$("body").on("mouseup ",function(a){
$("body").off("mousemove").off("mouseup");
if(uiController.swiping||(searchController.dragDraggableSongY>0&&Math.abs(a.clientY-searchController.dragDraggableSongY)>30)){
uiController.swipeTimer=Date.now();
}
setTimeout(function(){
$("#playlistview").removeClass("dragging");
$(".songlist").removeClass("nohover");
uiController.swiping=false;
searchController.dragDraggableSongY=0;
searchController.dragDraggableSongTimer=0;
},50)
})
$("body").on("mousemove ",function(b){
console.log('MOUSEMOVE SEARCH  '+Math.abs(b.clientY-searchController.dragDraggableSongY)+"    "+(Date.now()-searchController.dragDraggableSongTimer))
if(uiController.swiping||(searchController.dragDraggableSongY>0&&Math.abs(b.clientY-searchController.dragDraggableSongY)>30)){
searchController.dragDraggableSongY=-10;
uiController.swiping=true;
uiController.swipeTimer=Date.now();
console.log('SWIPING SEARCH '+Math.abs(b.clientY-searchController.dragDraggableSongY)+"    "+(Date.now()-searchController.dragDraggableSongTimer))
}else if(searchController.dragDraggableSongTimer&&Date.now()-searchController.dragDraggableSongTimer<500){
if(!uiController.draggingSong&&b.clientX-searchController.dragDraggableSongX>0&&Math.abs(b.clientY-searchController.dragDraggableSongY)<Math.abs(b.clientX-searchController.dragDraggableSongX)*0.8){
console.log('DRAGGING')
$("body").off("mousemove").off("mouseup");
searchController.dragDraggableSongY=-10;
searchController.dragDraggableLastSongTimer=Date.now();
searchController.dragDraggableSongTimer=0;
searchController.mainDraggedElement=$(searchController.dragDraggableSongStartEvent.target)
if(!searchController.mainDraggedElement.hasClass("draggableSong"))
searchController.mainDraggedElement=$(searchController.dragDraggableSongStartEvent.target).parents("li")
if(searchController.mainDraggedElement.length==0)
return;
var c=0;
if(playlistController.playlistMode){
$("#searchlistview .draggableSong").draggable("option","connectToSortable","");
if(playlistController.sortPlaylist)
playlistController.toggleSortablePlaylist();
}else{
$("#searchlistview .draggableSong").draggable("option","connectToSortable","#playlistview");
}
searchController.mainDraggedElement.draggable("enable");
if(!uiController.sidePanelOpen&&$(window).width()<uiController.responsiveWidthSmallest){
uiController.startedSortPlaylistOpenedPanel=true;
uiController.toggleSidePanel();
c=c+250;
}else{
uiController.startedSortPlaylistOpenedPanel=false;
}
var d={
clientX:searchController.dragDraggableSongStartEvent.clientX,
clientY:searchController.dragDraggableSongStartEvent.clientY
};
$(searchController.dragDraggableSongStartElement).simulate("mouseup",d);
uiController.mouseUp=false;
$("body").on("mouseup ",function(a){
$("body").off("mouseup");
uiController.mouseUp=true;
if(searchController.mainDraggedElement){
searchController.mainDraggedElement.draggable("disable").removeClass("ui-disabled ui-state-disabled");
searchController.mainDraggedElement=null;
}
})
setTimeout(function(){
console.log("MOUSEUP??"+uiController.mouseUp)
if(!uiController.mouseUp){
if(!playlistController.sortPlaylist&&!playlistController.playlistMode){
playlistController.toggleSortablePlaylist();
console.log("STARTTTTTSORTABLE")
uiController.startedSortPlaylist=true;
}else
uiController.startedSortPlaylist=false;
console.log("! "+uiController.startedSortPlaylist+"   "+playlistController.playlistMode)
$(searchController.dragDraggableSongStartElement).simulate("mousedown",d);
uiController.updateUI();
}
},c)
}
}
})
}else
searchController.dragDraggableSongTimer=0;
}
$("#searchlist li").off("mousedown",k);
$("#searchlist li").on("mousedown",k)
$('#searchlistview .draggableSong').draggable({
tolerance:"pointer",
dropOnEmpty:true,
revert:false,
connectToSortable:'#playlistview',
helper:function(a,b){
$("#songOptions").appendTo("body").hide();
$("#playlistInner li.selected").removeClass("selected")
if(!$(this).hasClass("selected")){
$("#searchlist li.selected").removeClass("selected")
$(this).addClass("selected");
}
var c=$('<ul></ul>').addClass('songlist draggedlistelement draggedsearchlistelement');
var d=$("#searchlist li.selected").removeClass("selected").clone().removeClass("loadedsong playing pausing stillLoading");
d.find(".songPlayCount, .songTrend, .loadingSongImg").remove();
d.find("h3").removeClass("songTitleMargin");
if(d.length==0){
d=$(this).removeClass("selected").clone().removeClass("loadedsong playing pausing stillLoading");
d.removeClass("fadeslideincompletefast");
d.addClass("margintop");
}else{
d.removeClass("fadeslideincompletefast");
$(d.get(0)).addClass("margintop");
}
$("#playlistplaceholder").remove();
var e=(65*d.length);
if(e>65*4){
e=65*4;
}
if(e<65)
e=65;
$("<style type='text/css' id='playlistplaceholder'> #playlistInner ul .ui-sortable-placeholder{ height:"+e+"px !important} </style>").appendTo("head");
var f=c.append(d)
playlistController.draggedElements=d;
playlistController.draggedElement=f.find("li[data-index='"+$(this).data("index")+"'] ");
$(".songlist").addClass("nohover");
f.css("opacity","1");
return f;
},
start:function(a){
$(".importplaylist").hide();
var b=$(playlistController.draggedElements.get(0)).parent();
b.attr('style',b.attr('style')+'; '+"margin-top:"+(-(playlistController.draggedElement.offset().top-playlistController.draggedElements.offset().top))+"px"+' !important');
b.css("opacity","1");
playlistController.hideSongOptions();
uiController.draggingSortableSong=false;
uiController.draggingSong=true;
uiController.lastDraggingSongFromSearchlist=true;
uiController.dragSongX=a.clientX;
uiController.dragSongY=a.clientY;
uiController.dragSongCheckHorizontal=true;
uiController.dragSongCheckHorizontalTimer=Date.now();
$(".draggedsearchlistelement").off();
$(".draggedsearchlistelement").on('mousemove',playlistController.scrollByDragCallback);
$(".draggedsearchlistelement").on('wheel',playlistController.scrollByWheel);
$(".draggedsearchlistelement").on('mousewheel',playlistController.scrollByWheel);
$(".draggedsearchlistelement").on('DOMMouseScroll',playlistController.scrollByWheel);
if(playlistController.playlistMode){
$("#playlistview").addClass("dragging")
}
},
stop:function(g,h){
if(playlistController.playlistMode&&playlistController.playlists.length>0){
$(".draggedlistelement").remove();
var x=g.clientX,y=g.clientY,
elementMouseIsOver=document.elementFromPoint(x,y);
var i=$(elementMouseIsOver).parents("li");
if(i.length==0)
i=$(elementMouseIsOver).parents("ul");
if(i.length==0)
i=$(elementMouseIsOver)
setTimeout(function(){
if(i&&(i.parents("#playlistInner").length>0)||i.attr("id")=="playlistInner"){
var d=false;
if(i.hasClass("playlistsong")){
var e=playlistController.getPlaylistFromId(i.data("songgid").substring(12))
var f=false;
}else if(i.hasClass("currentqueue")){
e=playlistController.currentQueue;
f=false;
}else{if(i.hasClass("createplaylist"))
d=true;
e=playlistController.createEmptyPlaylist(!d);
playlistController.editedPlaylist=jQuery.extend(true,{},e);
playlistController.editedPlaylistTitle="New Playlist";
setTimeout(function(){
$("#popupTextInput").popup('open',{positionTo:"window",transition:'pop'});
},500)
delete e.isUnnamedPlaylist;
f=true;
}
if(e){
if(!e.tracks)
e.tracks=[];
playlistController.draggedElements.each(function(a,b){
if($(b).data("song")){
var c=$(b).data("song");
if(c){
c=jQuery.extend(true,{},c);
c.gid=playlistController.getNewID();
c.playlistgid=e.gid;
e.tracks.push(c)
}
}
})
setTimeout(function(){
accountController.savePlaylist(e.gid,e.name,e.tracks);
accountController.savePlaylistsPosition();
},0);
if(f){
if(playlistController.loadedPlaylistSongs.indexOf(e)==-1){
if(d)
playlistController.loadedPlaylistSongs.unshift(e);
else
playlistController.loadedPlaylistSongs.push(e);
}
playlistController.displayLimit=playlistController.loadedPlaylistSongs.length;
$scope.safeApply();
$("#playlistview").listview('refresh');
playlistController.chosenElement.trigger('chosen:updated');
uiController.playListScroll.scrollTo(0,scrollY);
uiController.updateUI();
setTimeout(function(){
uiController.playListScroll.refresh();
},150)
setTimeout(function(){
uiController.playListScroll.refresh();
},1000)
}else
$scope.safeApply();
}
}
},0)
if(i.hasClass("playlistsong")||i.hasClass("currentqueue")){
playlistController.animateAddedToList(i);
}
}else{
setTimeout(function(){
if(!playlistController.playlistMode&&playlistController.loadedPlaylistSongs.length==0)
$(".importplaylist").show();
},1000)
}
$("#playlistview").removeClass("dragging")
$(".songlist").removeClass("nohover");
var j=$(playlistController.draggedElements.get(0)).parent();
j.attr('style',j.attr('style')+'; '+"margin-top:0px"+' !important');
j.addClass("animatemargin");
if(searchController.mainDraggedElement){
searchController.mainDraggedElement.draggable("disable").removeClass("ui-disabled ui-state-disabled");
searchController.mainDraggedElement=null;
}
$(this).css("opacity","1")
setTimeout(function(){
$("#searchlist li").simulate("mouseup");
},0)
if(uiController.startedSortPlaylistOpenedPanel)
setTimeout(function(){
uiController.toggleSidePanel();
},1000)
if(uiController.startedSortPlaylist){
playlistController.sortPlaylist=true;
playlistController.toggleSortablePlaylist();
uiController.startedSortPlaylist=false;
}
uiController.draggingSong=false;
playlistController.updateDeselectedSong();
uiController.swipeTimer=Date.now();
},
appendTo:'body',
zIndex:"1000000"});
$("#searchlistview .draggableSong").draggable("disable").removeClass("ui-disabled ui-state-disabled");
}

;

;
var uiController=function(){
};
uiController.responsiveWidthSmallest=780;
uiController.responsiveWidthSmall=850;
uiController.responsiveWidthSmaller=1165;
uiController.adsWidth=160;
uiController.totalTimeWidth=0;
uiController.gridLayout=false;




uiController.init=function(){
uiController.disableAutoFocus();
$(".ui-icon-loading").click(function(){
$(".ui-icon-loading").hide();
})
if(navigator.userAgent.toLowerCase().indexOf('firefox')>-1){
$("#titleHeader").show().css("opacity","1");
$("#iconHeader").css("opacity","1");
}else{
setTimeout(function(){
$("#titleHeader").addClass("fadeincomplete");
$("#titleHeader").show();
$("#iconHeader").addClass("bounce");
},0);
}
$("#titleHeader").append('<div style="margin-left:3px;display:inline-block;color: #a00; font-weight: 100; font-size: 16px;"><sup> BETA</sup></div>');
setTimeout(function(){
$("#iconHeader").attr("src","public/img/logo.gif");
},1000);
uiController.countCustomButtons=$(".videoControlElements-custom-button:visible").length;
$("body").dblclick(function(a){
playlistController.deselectSongs(a);
if(playlistController.sortPlaylist)
playlistController.toggleSortablePlaylist(true);
})

$(".ui-input-clear").addClass("ui-btn ui-btn-b ui-shadow ui-corner-all ui-mini");
uiController.updateDisplay();
setTimeout(function(){
$("iframe").get(0).contentDocument.close();
},2000);
var d=$('<style id="inputclearhide">'+
'.ui-input-clear {'+
' display:none!important;'+
'}'+
'</style>');
$('html > head').append(d);
$('video').bind('contextmenu',function(e){
});
$(window).resize(function(){
if($('.ui-panel-open').length!=0){
$('#rightpanel').panel('close');
}
if(playlistController.sortPlaylist)
playlistController.toggleSortablePlaylist();
$("#playlistview").css("min-height","");
uiController.updateUI();
setTimeout(function(){
uiController.searchListScroll.refresh();
uiController.playListScroll.refresh();
setTimeout(function(){
uiController.searchListScroll.refresh();
uiController.playListScroll.refresh();
playbackController.positionPlayIndicator();
setTimeout(function(){
uiController.searchListScroll.refresh();
uiController.playListScroll.refresh();
playbackController.positionPlayIndicator();
setTimeout(function(){
playbackController.positionPlayIndicator();
setTimeout(function(){
playbackController.positionPlayIndicator();
setTimeout(function(){
uiController.searchListScroll.refresh();
uiController.playListScroll.refresh();
playbackController.positionPlayIndicator();
},2000);
},100);
},100);
},100);
},100);
},1000);
});
$("#rightpanel").on("panelbeforeclose",function(a,b){
if(playlistController.sortPlaylist)
playlistController.toggleSortablePlaylist();
uiController.sidePanelOpen=false;
uiController.updateUI();
uiController.searchListScroll.enable();
uiController.searchListScroll.refresh();
var c="translate3d(0px,0px,0px)";
$("#openSidePanelBarIcon").css({"transition":"0.15s linear","-transform":c,"-ms-transform":c,"-webkit-transform":c});
setTimeout(function(){
uiController.updateUI();
},500);
});
$("#rightpanel").on("panelbeforeopen",function(a,b){
uiController.sidePanelOpen=true;
uiController.searchListScroll.disable();
var c="translate3d(10px,0px,0px)";
$("#openSidePanelBarIcon").css({"transition":"0.15s linear","-transform":c,"-ms-transform":c,"-webkit-transform":c});
setTimeout(function(){
uiController.updateUI();
},500);
});
setTimeout(function(){
$("#inputclearhide").remove();
},1000);
document.title=$scope.appTitle;
var f=function(){
if($(".sideinfo .adsbygoogle").children().length==0){
$(".sideinfo .blocked").show();
}else
$(".sideinfo .blocked").hide();
setTimeout(f,3000);
}
setTimeout(f,10000);
if(window.WebGLRenderingContext){
try{
var g=document.getElementById("webglcanvas");
if(g)
try{
var h=g.getContext("webgl")||g.getContext("experimental-webgl");
}
catch(e){
}
}catch(e){
}
}
};
uiController.isMaxVideoSizeFaktor=function(a){
if($("#videoplayer").height()*0.5*a*uiController.sizeVideoRelative+82+30>$(window).height()){
return true
}
return false;
}


uiController.toast=function(a,b,c){
$("#toastId").remove();
var d='ui-loader ui-overlay-shadow ui-bar-e ui-corner-all';
$("<div id='toastTest' 'class= '"+d+"'>"+a+"</div>")
.css({display:"inline-block",visibility:"visisble"})
.appendTo($.mobile.pageContainer)
$("<div class='"+d+"' id = 'toastId'>"+a+"</div>")
.css({display:"block",
opacity:0,
position:"fixed",
padding:"7px",
"text-align":"center",
width:$("#toastTest").width()+10,
left:(uiController.windowWidth-$("#toastTest").width()-10)/2,
top:$(window).height()/2-$("#toastTest").height()/2})
.click(function(){
$("#toastId").hide();
c();
})
.appendTo($.mobile.pageContainer)
.fadeTo(400,0.8)
.delay(b)
.fadeOut(400,function(){
$(this).remove();
});
$("#toastTest").remove();
}
uiController.toggleSearchButton=function(a){
$('#searchbutton'+a).buttonMarkup({theme:'a'});
$('#searchbutton'+a).parent().buttonMarkup({theme:'a'});
for(var i=0;i<5;i++){
if(i+1!=a){
$('#searchbutton'+(i+1)).buttonMarkup({theme:'b'});
$('#searchbutton'+(i+1)).parent().buttonMarkup({theme:'b'});
}
}
}

uiController.stopScrollingOnClick=function(a){
var b=jQuery.extend({},a);
b.type="mouseup";
b.preventDefault=function(){
};
setTimeout(function(){
uiController.searchListScroll.handleEvent(b);
},10)
setTimeout(function(){
uiController.searchListScroll.handleEvent(b);
},100)
}
uiController.updateDisplay=function(){
if(videoController.fullscreenMode==0&&$(window).width()>=uiController.responsiveWidthSmallest)
uiController.windowWidth=$(window).width()-uiController.adsWidth;
else
uiController.windowWidth=$(window).width();
$("#page").width(uiController.windowWidth);
if($(window).height()>710)
$("#header").width($(window).width());
else
$("#header").width($(window).width()-160);
$("#videocontrols").width(uiController.windowWidth);
}

uiController.updateUI=function(){
uiController.updateDisplay();
uiController.countCustomButtons=$(".videoControlElements-custom-button:visible").length;
$(".sideinfo").css("line-height",($(window).height()-5-44-10)+"px");
$("#lyricsifrm").css("height",$(window).height()-8-44-44-44)
var d=document.getElementById('lyricsifrm');
setTimeout(function(){
d.contentWindow.scrollTo(0,100);
},2000)
setTimeout(function(){
$("#playlistview").css("min-height",$("#playlistInner").height()-20);
},500)

$(".ui-panel").css("height",$(window).height()-44-3);
$("#page").css("height",$(window).height()-44-3);
if(65*2-30+$(window).height()/2-60>65)
$("#playlisthelp").css("top",75-30+$(window).height()/2-60)
else
$("#playlisthelp").css("top",75-30+65)
if($(window).width()<uiController.responsiveWidthSmallest){
$("#rightpanel").css("height",$(window).height()-88);
$("#searchlist a").css("text-overflow","clip");
if($("#playlist").parents("#rightpanel").length==0)
$("#playlist").appendTo("#rightpanel");
$("#playlist").css("max-height",$(window).height()-44-44-3);
setTimeout(function(){
if($("#playlistselectvertical .chosen-container").height()>0)
$("#playlistInner").css("max-height",$(window).height()-3-45-(100+$("#playlistselectvertical .chosen-container").height()-30));
else
$("#playlistInner").css("max-height",$(window).height()-3-45-5);
},100)
if(uiController.sidePanelOpen){
if(uiController.windowWidth-$("#rightpanel").width()-10<100){
$("#searchlist li").css("max-height","65px");
}
}
$("#searchcontent").css("width",uiController.windowWidth-20);
$("#playlist").css("width",$("#rightpanel").width()-20-10);
$("#playlistInner li").css("width",$("#rightpanel").width()-20);
$("#playlistselectvertical .chosen-container").css("width","");
$("#playlistselectvertical .chosen-container").css("max-width","");
$("#saveplaylistinput").css("width","");
$("#saveplaylistinput").css("max-width","");
$("#playlistselectvertical input").css("width",110);
}
else{$("#searchlist a").css("text-overflow","ellipsis");
if($("#playlist").parents("#rightpanel").length!=0){
$("#playlist").hide().appendTo("#content");
setTimeout(function(){
$("#playlist").fadeIn()
},150)
}
setTimeout(function(){
var a;
if($("#playlistselectvertical .chosen-container").height()>0)
a=$("#playlistselectvertical .chosen-container").height()-30;
else
a=5;
if($(window).width()<uiController.responsiveWidthSmaller&&$(window).width()>uiController.responsiveWidthSmall){
$("#playlist").css("max-height",$(window).height()-110-44);
$("#playlistInner").css("max-height",$(window).height()-110-100-a);
}else{
$("#playlist").css("max-height",$(window).height()-50-44);
$("#playlistInner").css("max-height",$(window).height()-50-100-a);
}
},100)
$("#searchcontent").css("max-height",$(window).height()-44-120+6+5);
var e=function(){
$("#playlistselectvertical .chosen-container").css("width",$("#playlist").width()-45);
$("#playlistselectvertical .chosen-container").css("max-width",$("#playlist").width()-45);
$("#saveplaylistinput").css("width",$("#playlist").width()-45);
$("#saveplaylistinput").css("max-width",$("#playlist").width()-45);
$("#playlistselectvertical input").css("width",110);
}
e();
$("#playlist").css("width",uiController.windowWidth/3);
$("#playlistInner li").css("width",uiController.windowWidth/3);
if($(window).width()<uiController.responsiveWidthSmall)
$("#searchcontent").css("width",uiController.windowWidth-uiController.windowWidth/3-30-33);
else
$("#searchcontent").css("width",uiController.windowWidth-uiController.windowWidth/3-30);
e();
}
uiController.totalTimeWidth=uiController.windowWidth/1.5-160-105-5;
videoController.resizeVideo();
if($(window).width()<uiController.responsiveWidthSmall){
uiController.totalTimeWidth=(uiController.windowWidth/1.5-160);
if((uiController.windowWidth)/1.5-160-105+10<323-105-uiController.countCustomButtons*26){
if(((uiController.windowWidth)/1.5-160-105-uiController.countCustomButtons*26)+10<0){
$("#videocontrols .videoControlElements-time-total").css("width","0px");
$("#videocontrols .videoControlElements-time-rail").css("width","0px");
}
else{
$("#videocontrols .videoControlElements-time-total").css("width",((uiController.windowWidth)/1.5-160-105-uiController.countCustomButtons*26));
$("#videocontrols .videoControlElements-time-rail").css("width",((uiController.windowWidth)/1.5-160-105-uiController.countCustomButtons*26)+10);
}
}
else{
$("#videocontrols .videoControlElements-time-total").css("width",323-105-uiController.countCustomButtons*26-10);
$("#videocontrols .videoControlElements-time-rail").css("width",323-105-uiController.countCustomButtons*26);
}
$("#searchcontent").css("max-height",$(window).height()-44-130-40+12+5);
$("#content").css({"width":uiController.windowWidth-16,"height":$(window).height()-44-4-8});
}
else{

uiController.totalTimeWidth=(uiController.windowWidth/1.5-160)/1.3-105-uiController.countCustomButtons*26;
$("#videocontrols .videoControlElements-time-total").css("width",(uiController.windowWidth/1.5-160)/1.3-105-uiController.countCustomButtons*26);
$("#videocontrols .videoControlElements-time-rail").css("width",(uiController.windowWidth/1.5-160)/1.3+10-105-uiController.countCustomButtons*26);
$("#content").css({"width":uiController.windowWidth-32,"height":$(window).height()-44-4-32});
}
if(uiController.windowWidth<365){
$("#controlbar .ui-input-search").css("max-width",uiController.windowWidth-65);
$("#controlbar .ui-select").css("max-width",uiController.windowWidth-25);
}else{
$("#controlbar .ui-input-search").css("max-width",320);
$("#controlbar .ui-select").css("max-width",340);
}
setTimeout(function(){
if($("#playlistselectvertical .chosen-container").height()>0)
$("#playlistInner").css("top",90+$("#playlistselectvertical .chosen-container").height()-30-30);
else
$("#playlistInner").css("top",90+8-30);
},100)
setTimeout(function(){
var a="draggelement"+Date.now()+""+Math.random();
$("#draggelement").attr("id",a);
var b=$('<style id="draggelement">'+
'.draggedlistelement li { '+
'        width: '+($("#playlistInner ul").width()-18)+'px !important;'+
'        max-width: '+($("#playlistInner ul").width()-18)+'px !important;'+
'        min-width: '+($("#playlistInner ul").width()-18)+'px !important;'+
'}'+
'.draggedlistelement li a { '+
'        width: '+($("#playlistInner ul li").width()-90-18)+'px !important;'+
'        max-width: '+($("#playlistInner ul li").width()-90-18)+'px !important;'+
'        min-width: '+($("#playlistInner ul li").width()-90-18)+'px !important;'+
'}'+
'</style>');
$('html > head').append(b);
setTimeout(function(){
$("#"+a).remove();
},0)
$("#videocontrolsInner").css("opacity",0);
var c=function(){
if(Math.abs($("#videocontrolsInner .videoControlElements-controls").css("padding-left").replace("px","")-((uiController.windowWidth-$(".videoControlElements-controls").width()*1.5)/2/1.5))>1)
$("#videocontrolsInner .videoControlElements-controls").css("padding-left",(uiController.windowWidth-$(".videoControlElements-controls").width()*1.5)/2/1.5).css("padding-right",(uiController.windowWidth-$(".videoControlElements-controls").width()*1.5)/2/1.5);
}
c();
setTimeout(c,50)
},0)
};

uiController.toggleSidePanel=function(){
if(!this.toggleSidePanelTimer||Date.now()-this.toggleSidePanelTimer>200){
if($('.ui-panel-open').length==0){
$('#rightpanel').panel('open')
}else{
$('#rightpanel').panel('close')
}
}
this.toggleSidePanelTimer=Date.now();
}

uiController.showPlaylists=function(){
$('#playlistselectverticalform option').prop('selected',false);
$('#playlistselectverticalform').trigger('chosen:updated');
setTimeout(function(){
$('#playlistselectverticalform').trigger('chosen:close');
},0)
for(var a in playlistController.loadedPlaylists){
if(playlistController.loadedPlaylists.hasOwnProperty(a)){
if(!playlistController.loadedPlaylists[a].tracks||(playlistController.loadedPlaylists[a].tracks.length==0&&playlistController.loadedPlaylists[a].isUnnamedPlaylist)){
for(var j=playlistController.playlists.length-1;j>=0;j--){
if(playlistController.playlists[j].gid==playlistController.loadedPlaylists[a].gid){
playlistController.playlists.splice(j,1);
}
}
}
}
}
playlistController.loadedPlaylists={};
playlistController.loadedPlaylistSongs=[];
playlistController.playlistMode=true;
$("#clearChoosenPlaylists").hide();
uiController.updateUI();
playlistController.loadedPlaylistSongs=playlistController.playlists;
$("#playlistInner .iScrollPlayIndicator").hide();
$("#playlistInner .songlist").addClass("hidden");
playlistController.applySongList();

}

uiController.toggleGridLayout=function(){
uiController.gridLayout=!uiController.gridLayout;
if(uiController.gridLayout)
$("#searchlayoutbutton img").attr("src","public/img/list.png");
else
$("#searchlayoutbutton img").attr("src","public/img/grid.png");
setTimeout(function(){
$("#searchlist  .iScrollIndicator").hide();
var b=uiController.searchListScroll.y;
$("#searchlist").hide();
setTimeout(function(){
$("#searchlist ul").toggleClass("gridlayout")
$("#searchlist").css("opacity","0");
$("#searchlist").show();
$("#searchlistview").listview('refresh');
},0);
setTimeout(function(){
if(uiController.gridLayout){
uiController.gridLayoutCols=Math.floor(($("#searchlist ul").width()-15)/250);
if(($("#searchlist ul").width()/uiController.gridLayoutCols-35)>250){
$("#gridlayoutwidth").remove();
var a=$('<style id="gridlayoutwidth">'+
'#searchlist ul.gridlayout li { width:'+(($("#searchlist ul").width()/uiController.gridLayoutCols-35))+'px!important;} '+
'</style>');
$('html > head').append(a);
}
b=b/uiController.gridLayoutCols;
if(uiController.searchListScroll.toggelLayoutOldY!=uiController.searchListScroll.y)
b=b+64;
}
else{
b=(b)*uiController.gridLayoutCols;
setTimeout(function(){
playlistController.positionSongOptions();
},0)
}
$scope.safeApply();
$("#searchlistview").listview('refresh');
uiController.searchListScroll.refresh();
if($("#searchlist ul").height()>$("#searchlist").height())
$("#searchlist .iScrollIndicator").show();
if(!$("#searchlist ul").height()>$("#searchlist").height())
b=0;
else if(b>0)
b=0;
else if(b<uiController.searchListScroll.maxScrollY)
b=uiController.searchListScroll.maxScrollY;
uiController.searchListScroll.scrollTo(0,b);
$("#searchlist").hide();
$("#searchlist").css("opacity","1");
$("#searchlist").addClass("fadeincomplete");
$("#searchlist").show();
setTimeout(function(){
$("#searchlist").removeClass("fadeincomplete");
},500)
uiController.searchListScroll.toggelLayoutOldY=b;
},800)
},0);
}
uiController.disableUI=function(a){
if(a){
$(".fullscreendisable").show()
$.mobile.loading("show");
}else{
$(".fullscreendisable").hide()
$.mobile.loading("hide");
}
}
uiController.showBackgroundImage=function(a){
if(!a){
uiController.showBackgroundImageWasVisible=($("#backgroundImage:visible").length>0);
$("#backgroundImage").removeClass("fadeoutcomplete").addClass("fadeincompleteslow")
$("<style type='text/css' id='hidevideobackground'> #backgroundVideo{ opacity:0!important} #backgroundImage{ display:block!important;}  </style>").appendTo("head");
}else{
$("#hidevideobackground").remove();
if(!uiController.showBackgroundImageWasVisible){
$("#backgroundImage").removeClass("fadeincompleteslow").addClass("fadeoutcomplete")
}
}
}
uiController.disableAutoFocus=function(){
function is_touch_device(){
return!!window.ontouchstart||!!window.onmsgesturechange};
if(is_touch_device()){
var b=3000;
var c=5;
var d=0;
var e=false;
function check(){
if(!e&&document.activeElement.tagName.toLowerCase()=="input"){
console.log("BLURRED");
document.activeElement.blur();
}
d+=c;
if(d<b){
window.setTimeout(check,c);
}
}
check();
document.body.addEventListener("click",function(a){
if(a.target.tagName=="INPUT"){
console.log("MANUAL CLICK");
e=true;
}
});
document.body.addEventListener("keydown",function(a){
e=true;
});
}
}
;

;
var videoController=function(){
};
videoController.videoPlayerList=[
[]
];
videoController.videoPlayerList[0]=[];
videoController.videoPlayerList[1]=[];
videoController.videoPlayerList[2]=[];
videoController.videoPlayerList[0][0]=new mediaelementPlayer("#mediaemelemtjsPlayer1");
videoController.videoPlayerList[1][0]=dailymotionPlayer;
videoController.videoPlayerList[2][0]=vimeoPlayer;
videoController.videoPlayer=videoController.videoPlayerList[0][0];videoController.videoOpactiy=0.5;
videoController.isEmbedded=false;
videoController.isPlaying=false;
videoController.scaleFactor=1.5;
videoController.fullscreenMode=0;
videoController.progressTime=0;
videoController.maxTime=0;
videoController.changingVolume=false;
videoController.isMuted=false;
videoController.beforeMutedVolume=null;
videoController.volume=0.5;
videoController.shuffleMode=false;
videoController.prevEnabled=true;
videoController.playpauseEnabled=true;
videoController.stopEnabled=true;
videoController.nextEnabled=true;
videoController.shuffleEnabled=true;
videoController.timerailEnabled=true;
videoController.volumeEnabled=true;
videoController.fullscreenEnabled=false;
videoController.versionsEnabled=true;
videoController.lyricsEnabled=false;
videoController.sharesocialEnabled=false;
videoController.externalSiteEnabled=false;

videoController.init=function(){
var d=function(){
setTimeout(function(){
if(!videoController.isBrowserFullscreen()){
if(videoController.fullscreenMode!=0){
videoController.fullscreenMode=0;
videoController.updateFullscreenMode();
}
}
},500)
}
document.addEventListener("fullscreenchange",d,false);
document.addEventListener("webkitfullscreenchange",d,false);
document.addEventListener("mozfullscreenchange",d,false);
$(document).keyup(function(a){
if($('input:focus, textarea:focus').length==0){
if(a.keyCode==32){
videoController.playPauseSong();
}else if(a.keyCode==38||a.keyCode==37){
videoController.playPrevSong();
}else if(a.keyCode==40||a.keyCode==39){
playbackController.playNextSong();
}
}
})
for(var i=0;i<=1;i++){
for(var j=0;i<=1;i++){
if(videoController.videoPlayerList[i][j])
videoController.videoPlayerList[i][j].init();
}
}
videoController.controls=$(".videoControlElements-controls");
videoController.controls.find(".videoControlElements-prevtrack-button").click(function(){
videoController.playPrevSong();
});
videoController.controls.find(".videoControlElements-playpause-button").click(function(){
if(videoController.playpauseEnabled&&videoController.videoPlayer){
videoController.playPauseSong();
}
});
videoController.controls.find(".videoControlElements-stop-button").click(function(){
if(videoController.stopEnabled&&videoController.videoPlayer)
videoController.stopSong();
});
videoController.controls.find(".videoControlElements-nexttrack-button").click(function(){
videoController.playNextSong();
});
videoController.controls.find(".videoControlElements-shuffle-button").click(function(){
if(videoController.shuffleEnabled)
videoController.toggleShuffleSongs();
});
videoController.controls.find(".videoControlElements-time-rail").click(function(a){
if(videoController.timerailEnabled&&playbackController.playingSong){
var b=videoController.controls.find('.videoControlElements-time-total'),
x=a.pageX,
offset=b.offset(),
width=b.outerWidth(true)*videoController.scaleFactor/1.023,
pos,
percentage;
if(x<offset.left){
x=offset.left;
}else if(x>width+offset.left){
x=width+offset.left;
}
pos=x-offset.left;
percentage=(pos/width);
videoController.videoPlayer.setProgressPercentage(percentage);
}
});
videoController.controls.find(".videoControlElements-volume-button button").click(function(){
if(videoController.volumeEnabled&&videoController.videoPlayer){
videoController.isMuted=!videoController.isMuted;
if(videoController.isMuted){
videoController.beforeMutedVolume=videoController.volume;
videoController.volume=0;
}else{
videoController.volume=videoController.beforeMutedVolume;
}
videoController.setVolume(videoController.volume);
}
});
videoController.controls.find(".videoControlElements-volume-button").mouseover(function(){
if(videoController.volumeEnabled)
videoController.controls.find(".videoControlElements-volume-slider").show();
});
videoController.controls.find(".videoControlElements-volume-button").mouseout(function(){
if(!videoController.changingVolume)
videoController.controls.find(".videoControlElements-volume-slider").hide();
});
videoController.controls.find(".videoControlElements-volume-slider").click(function(a){
if(!videoController.changingVolume){
var b=videoController.controls.find('.videoControlElements-volume-slider'),
y=a.pageY-20,
offset=b.offset(),
height=b.outerHeight(true)*videoController.scaleFactor/1.023-20,
pos,
percentage;
if(y<offset.top){
y=offset.top;
}else if(y>height+offset.top){
y=height+offset.top;
}
pos=y-offset.top;
percentage=(pos/height);
videoController.volume=(1-percentage);
videoController.setVolume(videoController.volume);
}
});
videoController.controls.find(".videoControlElements-volume-handle").bind('mousedown',function(e){
var b=videoController.controls.find('.videoControlElements-volume-slider'),
volumeTotal=videoController.controls.find('.videoControlElements-volume-total'),
volumeCurrent=videoController.controls.find('.videoControlElements-volume-current'),
volumeHandle=videoController.controls.find('.videoControlElements-volume-handle'),
mute=$(".videoControlElements-volume-button");
var c=function(e){
videoController.changingVolume=true;
var a,
totalOffset=volumeTotal.offset();
var
railHeight=volumeTotal.height()*videoController.scaleFactor/1.023,totalTop=parseInt(volumeTotal.css('top').replace(/px/,''),10),
newY=e.pageY-totalOffset.top;
a=(railHeight-newY)/railHeight;
if(totalOffset.top==0||totalOffset.left==0)
return;
a=Math.max(0,a);
a=Math.min(a,1);
videoController.volume=a;
videoController.setVolume(videoController.volume);
videoController.videoPlayer.setVolume(videoController.volume);
}
$(document).bind('mousemove.videoVolume',c)
$(document).bind('mouseup.videoVolume',function(e){
if(videoController.controls.find(".videoControlElements-volume-slider:hover").length==0)
videoController.controls.find(".videoControlElements-volume-slider").hide();
setTimeout(function(){
videoController.changingVolume=false;
},50)
$(document).unbind(".videoVolume");
})
});
videoController.controls.find(".videoControlElements-fullscreen-button button").click(function(){
if(videoController.fullscreenEnabled&&videoController.videoPlayer){
videoController.toggleFullscreenMode();
}
});
videoController.controls.find(".videoControlElements-fullscreen-button").mouseover(function(){
if(videoController.fullscreenMode==0)
videoController.controls.find(".videoControlElements-fullscreen-slider").show();
});
videoController.controls.find(".videoControlElements-fullscreen-button").mouseout(function(){
videoController.controls.find(".videoControlElements-fullscreen-slider").hide();
});
videoController.controls.find(".videoControlElements-fullscreen-slider").mouseover(function(){
$(".videoControlElements-fullscreen-button button").css("background-image","url(public/img/brightness.png)")
});
videoController.controls.find(".videoControlElements-fullscreen-slider").mouseout(function(){
$(".videoControlElements-fullscreen-button button").css("background","")
});
videoController.controls.find(".videoControlElements-fullscreen-slider").click(function(a){
if(!videoController.changingVideoOpactiy){
var b=videoController.controls.find('.videoControlElements-fullscreen-slider'),
y=a.pageY-20,
offset=b.offset(),
height=b.outerHeight(true)*videoController.scaleFactor/1.023-20,
pos,
percentage;
if(y<offset.top){
y=offset.top;
}else if(y>height+offset.top){
y=height+offset.top;
}
pos=y-offset.top;
percentage=(pos/height);
videoController.videoOpactiy=(1-percentage);
videoController.setVideoOpacity(videoController.videoOpactiy);
}
});
videoController.controls.find(".videoControlElements-fullscreen-handle").bind('mousedown',function(e){
var b=videoController.controls.find('.videoControlElements-fullscreen-slider'),
videoOpactiyTotal=videoController.controls.find('.videoControlElements-fullscreen-total'),
videoOpactiyCurrent=videoController.controls.find('.videoControlElements-fullscreen-current'),
videoOpactiyHandle=videoController.controls.find('.videoControlElements-fullscreen-handle'),
mute=$(".videoControlElements-fullscreen-button");
var c=function(e){
videoController.changingVideoOpactiy=true;
var a,
totalOffset=videoOpactiyTotal.offset();
var
railHeight=videoOpactiyTotal.height()*videoController.scaleFactor/1.023,totalTop=parseInt(videoOpactiyTotal.css('top').replace(/px/,''),10),
newY=e.pageY-totalOffset.top;
a=(railHeight-newY)/railHeight;
if(totalOffset.top==0||totalOffset.left==0)
return;
a=Math.max(0,a);
a=Math.min(a,1);
videoController.videoOpactiy=a;
videoController.setVideoOpacity(videoController.videoOpactiy);
}
$(document).bind('mousemove.videoOpacity',c)
$(document).bind('mouseup.videoOpacity',function(e){
if(videoController.controls.find(".videoControlElements-fullscreen-slider:hover").length==0)
videoController.controls.find(".videoControlElements-fullscreen-slider").hide();
setTimeout(function(){
videoController.changingVideoOpactiy=false;
},50)
$(document).unbind(".videoOpacity");
})
});
videoController.controls.find(".videoControlElements-button-choose-version").click(function(){
if(videoController.versionsEnabled)
var a=playbackController.getPlayingSong();
var b=encodeURIComponent(mediaController.getSongArtist(a));
var c=encodeURIComponent(a.name);
mediaController.getVersions(b,c);
});
videoController.controls.find(".videoControlElements-button-share").click(function(){
mediaController.shareMedia();
});
videoController.controls.find(".videoControlElements-button-lyrics").click(function(){
if(videoController.lyricsEnabled)
mediaController.toggleLyrics();
});
videoController.controls.find(".videoControlElements-button-facebook").click(function(){
if(videoController.sharesocialEnabled){
$("#popupSocial").popup('open',{positionTo:"window",transition:'slideup'});
}
});
videoController.controls.find(".videoControlElements-button-external").click(function(){
if(videoController.externalSiteEnabled){
var a=window.open(mediaController.currentvideoURL,"","");
a.focus();
}
});
setTimeout(function(){
$("#videocontrolsInner").hide();
$("#videocontrolsInner").css("opacity","1");
$("#videocontrolsInner").addClass("fadeincomplete");
$("#videocontrolsInner").show();
},1000);
$("#videocontrols").css("background","none");
videoController.setVolume(videoController.volume);
videoController.disablePlayStopControls(true);
videoController.disableControls(true);
uiController.noVideoClickTimer=0;
videoController.setVideoOpacity(videoController.videoOpactiy);

}

videoController.playPauseSong=function(){
if(videoController.isPlaying)
videoController.pauseSong();
else
videoController.playSong();
}

videoController.resizeVideo=function(){
if(videoController.videoPlayer.resize)
videoController.videoPlayer.resize();
}

videoController.playNextSong=function(){
if(videoController.prevEnabled)
playbackController.playNextSong();
}

videoController.playPrevSong=function(){
if(videoController.prevEnabled)
playbackController.playPrevSong();
}

videoController.isEmbedVideo=function(a){
if(a.search("dailymotion.com")>-1){
return videoController.videoPlayerList[1][0];
}
return null;
}

videoController.loadSongInSuitablePlayer=function(a,b){
videoController.isPlaying=false;
videoController.isLoading=false;
playbackController.isLoading=false;
$("#backgroundVideo").css("opacity","0");
$("#backgroundVideo").removeClass("animated")
$("#backgroundVideo").hide();
$("#siteLogo").hide();
videoController.setMaxTime(0);
videoController.setProgressPercentage(0);
videoController.setProgressTime(0);
videoController.setBufferedPercentage(0);
if(videoController.videoPlayer&&videoController.videoPlayer.unload){
videoController.videoPlayer.unload();
}
var c=videoController.isEmbedVideo(b);
if(c!=null){
videoController.isEmbedded=true;
videoController.videoPlayer=c;
videoController.videoPlayer.load(b);
}
else{
videoController.isEmbedded=false;
videoController.videoPlayer=videoController.videoPlayerList[0][0];
console.dir("PLAY STREAM!!!: "+a);
videoController.videoPlayer.load(a);
}
$("#backgroundVideo").show();
videoController.updateFullscreenMode();
if(!playbackController.firstPlayedSongAlready){
playbackController.firstPlayedSongAlready=true;
$("#backgroundImage").addClass("fadeoutcomplete");
setTimeout(function(){
$("#backgroundImage").hide();
},1000)
}
}

videoController.playSong=function(){
if(!videoController.isPlaying&&playbackController.playingSong){
videoController.controls.find(".videoControlElements-play").removeClass("videoControlElements-play").addClass("videoControlElements-pause");
videoController.videoPlayer.play();
videoController.isPlaying=true;
videoController.disablePlayStopControls(false);
if(!playbackController.isLoading&&!$(".songlist li.loadedsong").hasClass("firstplay")){
$(".songlist li.loadedsong.stillloading .loadingSongImg").hide();
$(".songlist li.loadedsong").addClass("playing");
$(".songlist li.loadedsong").removeClass("pausing");
}
}
}

videoController.pauseSong=function(){
if(videoController.isPlaying){
videoController.controls.find(".videoControlElements-pause").removeClass("videoControlElements-pause").addClass("videoControlElements-play");
videoController.videoPlayer.pause();
videoController.isPlaying=false;
if(!playbackController.isLoading){
$(".songlist li.loadedsong.stillloading .loadingSongImg").hide();
$(".songlist li.loadedsong").addClass("pausing");
$(".songlist li.loadedsong").removeClass("playing");
}
}
}

videoController.stopSong=function(){
if(playbackController.playingSong){
if(videoController.isPlaying){
videoController.pauseSong();
videoController.isPlaying=false;
}
videoController.videoPlayer.stop();
videoController.setProgressPercentage(0);
$(".songlist li.loadedsong").removeClass("pausing");
$(".songlist li.loadedsong").addClass("playing");
if(videoController.stopEnabled==true){
videoController.disableStopControl(true);
$(".videoControlElements-playpause-button button").removeClass("looped");
$(".videoControlElements-time-loaded").hide();
if(!playbackController.playingOldSong){
playbackController.resetPlayingSong();
}
}
}
}

videoController.isBrowserFullscreen=function(){
return(document.fullscreen||document.mozFullScreen||document.webkitIsFullScreen||document.msFullscreenElement||window.fullScreen)||
(window.innerWidth==screen.width&&window.innerHeight==screen.height);
}

videoController.toggleFullscreenMode=function(){
videoController.fullscreenMode=videoController.fullscreenMode+1;
if(videoController.fullscreenMode>1)
videoController.fullscreenMode=0;
videoController.updateFullscreenMode();
}
videoController.toggleBrowserFullScreen=function(){
var a=document.getElementById("page");
console.dir("FULLSCREEEN!!!!");
console.dir(document.webkitIsFullScreen);
console.dir(a.webkitRequestFullScreen);
console.dir();
if(a.requestFullScreen){
if(!document.fullScreen){
a.requestFullscreen();
}else{
document.exitFullScreen();
}
}
if(a.mozRequestFullScreen){
if(!document.mozFullScreen){
a.mozRequestFullScreen();
}else{
document.mozCancelFullScreen();
}
}else if(a.webkitRequestFullScreen){
if(!document.webkitIsFullScreen){
a.webkitRequestFullScreen();
}else{
document.webkitCancelFullScreen();
}
}
}

videoController.updateFullscreenMode=function(){
var b=null;
var c=null;
var d=null;
var e=function(a){
if(!c||!a||(Math.abs(c-a.clientX)>20&&Math.abs(d-a.clientY)>20)){
if(a){
c=a.clientX;
d=a.clientY;
}
if(b){
clearTimeout(b)
$("#videocontrols").css("opacity","");
$("#siteLogo img").css("bottom","");
}
b=setTimeout(function(){
if(videoController.fullscreenMode==1){
$("#videocontrols").css("opacity","0");
$("#siteLogo img").css("bottom","15px");
}
},3500)
}
}
if(videoController.fullscreenMode==0){$("#songbaseLogoImage").hide();
if(b){
clearTimeout(b);
$("#videocontrols").removeClass("fadeoutcomplete");
}
$("body").off("mousemove mouseup",e);
$("#header").css("opacity","1").css("pointer-events","auto");
$("#controlbar").css("opacity","1").css("pointer-events","auto");
$("#searchlist").css("opacity","1").css("pointer-events","auto");
$("#playlist").css("opacity","1").addClass("fadeincomplete").css("pointer-events","auto");
$("#controlbarplaylist").css("opacity","1").css("pointer-events","auto");
$(".videoControlElements-custom-button").show();
$(".backgroundVideo,  #backgroundVideo").addClass("background");
$(".fb-recommendations-bar-container").show();
$(".sideinfo").show();
$("#page, #content, .backgroundVideo, #backgroundVideo").removeClass("fullscreen");
uiController.updateUI();
if(videoController.isBrowserFullscreen())
videoController.toggleBrowserFullScreen();
setTimeout(function(){
uiController.playListScroll.refresh();
setTimeout(function(){
uiController.updateUI();
uiController.playListScroll.refresh();
setTimeout(function(){
uiController.updateUI();
uiController.playListScroll.refresh();
setTimeout(function(){
uiController.updateUI();
uiController.playListScroll.refresh();
setTimeout(function(){
uiController.updateUI();
uiController.playListScroll.refresh();
},1000)
},1000)
},1000)
},1000)
},150)
}
else if(videoController.fullscreenMode==1){setTimeout(function(){
e();
$("body").on("mousemove mouseup",e);
},2000);
$("#songbaseLogoImage").show();
$(".videoControlElements-custom-button").hide();
$("#header").css("opacity","0").css("pointer-events","none");
$("#controlbar").css("opacity","0").css("pointer-events","none");
$("#searchlist").css("opacity","0").css("pointer-events","none");
$("#playlist").css("opacity","0").removeClass("fadeincomplete").css("pointer-events","none");
$("#controlbarplaylist").css("opacity","0").css("pointer-events","none");
$(".backgroundVideo,  #backgroundVideo").removeClass("background");
$("#page, #content, .backgroundVideo,  #backgroundVideo").addClass("fullscreen");
$(".fb-recommendations-bar-container").hide();
$(".sideinfo").hide();
uiController.updateUI();
if(!videoController.isBrowserFullscreen()){
$("#videocontrols").css("opacity","0");
setTimeout(function(){
$("#videocontrols").hide();
$("#videocontrols").css("opacity","1");
$("#videocontrols").addClass("fadeincomplete")
uiController.updateUI();
$("#videocontrols").show();
setTimeout(function(){
$("#videocontrols").removeClass("fadeincomplete");
},2000)
},1000)
videoController.toggleBrowserFullScreen();
}
}
}

videoController.disableStopControl=function(a){
videoController.stopEnabled=!a;
if(a){
$(".videoControlElements-stop-button button").css("opacity","0.5");
}else{
$(".videoControlElements-stop-button button").css("opacity","1");
}
}

videoController.disablePlayStopControls=function(a){
videoController.stopEnabled=!a;
videoController.playpauseEnabled=!a;
if(a){
$(".videoControlElements-playpause-button button").css("opacity","0.5");
$(".videoControlElements-stop-button button").css("opacity","0.5");
}else{
$(".videoControlElements-playpause-button button").css("opacity","1");
$(".videoControlElements-stop-button button").css("opacity","1");
}
}

videoController.disableControls=function(a){
videoController.prevEnabled=!a;
videoController.nextEnabled=!a;
if(a){
$(".videoControlElements-nexttrack-button button").css("opacity","0.5");
$(".videoControlElements-prevtrack-button button").css("opacity","0.5");
}else{
$(".videoControlElements-nexttrack-button button").css("opacity","1");
$(".videoControlElements-prevtrack-button button").css("opacity","1");
}
}

videoController.disablePositionControls=function(a){
videoController.prevEnabled=!a;
videoController.nextEnabled=!a;
if(a){
$(".videoControlElements-nexttrack-button button").css("opacity","0.5");
$(".videoControlElements-prevtrack-button button").css("opacity","0.5");
}else{
$(".videoControlElements-nexttrack-button button").css("opacity","1");
$(".videoControlElements-prevtrack-button button").css("opacity","1");
}
}

videoController.disableVersionControl=function(a){
videoController.versionsEnabled=!a;
if(a){
$(".videoControlElements-button-choose-version button").css("opacity","0.5");
}else{
$(".videoControlElements-button-choose-version button").css("opacity","1");
}
}

videoController.disableLyricsControl=function(a){
videoController.lyricsEnabled=!a;
if(a){
$(".videoControlElements-button-lyrics button").css("opacity","0.5");
}else{
$(".videoControlElements-button-lyrics button").css("opacity","1");
}
}

videoController.disableFullscreenControl=function(a){
videoController.fullscreenEnabled=!a;
if(a){
$(".videoControlElements-fullscreen-button button").css("opacity","0.5");
}else{
$(".videoControlElements-fullscreen-button button").css("opacity","1");
}
}

videoController.disableExternalSiteControl=function(a){
videoController.externalSiteEnabled=!a;
if(a){
$(".videoControlElements-button-external button").css("opacity","0.5");
}else{
$(".videoControlElements-button-external button").css("opacity","1");
}
}

videoController.disableShareSocialControl=function(a){
videoController.sharesocialEnabled=!a;
if(a){
$(".videoControlElements-button-facebook button").css("opacity","0.5");
}else{
$(".videoControlElements-button-facebook button").css("opacity","1");
}
}

videoController.toggleShuffleSongs=function(){
videoController.shuffleMode=!videoController.shuffleMode;
if(videoController.shuffleMode)
$(".videoControlElements-shuffle-button button").css("opacity","1");
else{
$(".videoControlElements-shuffle-button button").css("opacity","0.5");
}
}

videoController.setLoopButton=function(a){
if(a){
$(".videoControlElements-playpause-button button").addClass("looped");
}else{
$(".videoControlElements-playpause-button button").removeClass("looped");
}
}

videoController.setProgressPercentage=function(a,b){
if(a<0)
a=0;
else if(a>1)
a=1;
videoController.controls.find(".videoControlElements-time-current").css("width",a*100+"%")
if(videoController.maxTime&&videoController.maxTime>0){
videoController.progressTime=videoController.maxTime*a;
videoController.controls.find(".videoControlElements-currenttime").text(videoController.secondsToTimeCode(videoController.progressTime,false,false,false));
}
if(b&&videoController.videoPlayer&&playbackController.playingSong&&!playbackController.isLoading)
videoController.videoPlayer.setProgressPercentage(a);
}

videoController.setProgressTime=function(a,b){
videoController.progressTime=a;
videoController.controls.find(".videoControlElements-currenttime").text(videoController.secondsToTimeCode(a,false,false,false));
if(videoController.maxTime&&videoController.maxTime>0)
videoController.setProgressPercentage(videoController.progressTime/videoController.maxTime,b)
}

videoController.setBufferedPercentage=function(a){
videoController.buffered=a;
if(a<0)
a=0;
else if(a>1)
a=1;
videoController.controls.find(".videoControlElements-time-loaded").css("width",a*100+"%")
}

videoController.showBuffered=function(a){
if(a)
videoController.controls.find(".videoControlElements-time-loaded").fadeIn()
else
videoController.controls.find(".videoControlElements-time-loaded").fadeOut()
}

videoController.setMaxTime=function(a){
videoController.maxTime=a;
videoController.controls.find(".videoControlElements-duration").text(videoController.secondsToTimeCode(a,false,false,false));
}

videoController.showBuffering=function(a){
if(a)
videoController.controls.find(".videoControlElements-time-buffering").fadeIn();
else
videoController.controls.find(".videoControlElements-time-buffering").hide();
}

videoController.setVolume=function(a,b){
var c=videoController.controls.find('.videoControlElements-volume-slider'),
volumeTotal=videoController.controls.find('.videoControlElements-volume-total'),
volumeCurrent=videoController.controls.find('.videoControlElements-volume-current'),
volumeHandle=videoController.controls.find('.videoControlElements-volume-handle'),
mute=$(".videoControlElements-volume-button");
if(!c.is(':visible')&&typeof b=='undefined'){
c.show();
videoController.setVolume(a,true);
c.hide()
return;
}
a=Math.max(0,a);
a=Math.min(a,1);
if(a==0){
mute.removeClass('videoControlElements-mute').addClass('videoControlElements-unmute');
}else{
mute.removeClass('videoControlElements-unmute').addClass('videoControlElements-mute');
}
var d=volumeTotal.height(),
totalPosition=volumeTotal.position(),
newTop=d-(d*a);
volumeHandle.css('top',Math.round(totalPosition.top+newTop-(volumeHandle.height()/2)));
volumeCurrent.height(d-newTop);
volumeCurrent.css('top',totalPosition.top+newTop);
videoController.volume=a;
videoController.videoPlayer.setVolume(videoController.volume);
}

videoController.setVideoOpacity=function(a,b){
var c=videoController.controls.find('.videoControlElements-fullscreen-slider'),
videoOpactiyTotal=videoController.controls.find('.videoControlElements-fullscreen-total'),
videoOpactiyCurrent=videoController.controls.find('.videoControlElements-fullscreen-current'),
videoOpactiyHandle=videoController.controls.find('.videoControlElements-fullscreen-handle'),
mute=$(".videoControlElements-fullscreen-button");
if(!c.is(':visible')&&typeof b=='undefined'){
c.show();
videoController.setVideoOpacity(a,true);
c.hide()
return;
}
a=Math.max(0,a);
a=Math.min(a,1);
var d=videoOpactiyTotal.height(),
totalPosition=videoOpactiyTotal.position(),
newTop=d-(d*a);
videoOpactiyHandle.css('top',Math.round(totalPosition.top+newTop-(videoOpactiyHandle.height()/2)));
videoOpactiyCurrent.height(d-newTop);
videoOpactiyCurrent.css('top',totalPosition.top+newTop);
videoController.videoOpactiy=a;
$("#backgroundVideo").css("opacity",videoController.videoOpactiy);
if(videoController.videoOpactiy==0){
$("#backgroundVideo").hide();
}else
$("#backgroundVideo").show();
}

videoController.endedSong=function(){
videoController.stopSong();

mediaController.mediaEnded();
}

videoController.playingSong=function(){
if(playbackController.playingSong){
playbackController.playingSongTimer=Date.now();
$("#backgroundVideo").addClass("animated")
$("#backgroundVideo").css("opacity",videoController.videoOpactiy);
$("#siteLogoImage").attr("src","public/img/sites/"+mediaController.getSiteLogo());
$("#siteLogo").show();
videoController.disableExternalSiteControl(false);
videoController.disableFullscreenControl(false);
$(".videoControlElements-time-loaded").show();
$(".videoControlElements-playpause-button button").removeClass("looped");
if(!playbackController.playingSong.isAudioFile){

uiController.updateUI(true);
}
}
}


videoController.secondsToTimeCode=function(a,b,c,d){
if(typeof c=='undefined'){
c=false;
}else if(typeof d=='undefined'){
d=25;
}
var e=Math.floor(a/3600)%24,
minutes=Math.floor(a/60)%60,
seconds=Math.floor(a%60),
frames=Math.floor(((a%1)*d).toFixed(3)),
result=
((b||e>0)?(e<10?'0'+e:e)+':':'')
+(minutes<10?'0'+minutes:minutes)+':'
+(seconds<10?'0'+seconds:seconds)
+((c)?':'+(frames<10?'0'+frames:frames):'');
return result;
}

;

;
var viewController=function(){
};
viewController.views=[searchController,exploreController,myBaseController];
viewController.activeView=null;

viewController.init=function(){
for(var i=0;i<viewController.views.length;i++){
if(viewController.views[i].init)
viewController.views[i].init();
}
setTimeout(function(){
$("#searchinput").focus(function(){
var a=$(this);
window.setTimeout(function(){
if($(".ui-popup-active, .ui-popup-container.pop.in").length==0)
a.select();
},100);
});
},10000);
$("#searchinput").on("input",function(){
viewController.activeView.onInput();
})
$("#controlbar .ui-input-clear").click(function(){
viewController.activeView.onClear();
})
viewController.activateView(searchController,true);
if(!urlParams.search||urlParams.search==""){
setTimeout(function(){
viewController.activeView.onInput();
},500)
}
}

viewController.showLoading=function(a){
if(a)
$(".ui-alt-icon.ui-icon-search, .ui-alt-icon .ui-icon-search, .ui-input-search").addClass("loading");
else
$(".ui-alt-icon.ui-icon-search, .ui-alt-icon .ui-icon-search, .ui-input-search").removeClass("loading");
}

viewController.isActiveView=function(a){
return viewController.activeView==a;
}

viewController.activateView=function(a,b,c){
if(!viewController.isActiveView(a)){
viewController.showLoading(false);
$("#controlbar .ui-input-clear").addClass("ui-input-clear-hidden");
if(viewController.activeView){
viewController.activeView.hideView();
if(viewController.activeView.usesSearchList){
$("#searchlist .iScrollPlayIndicator").hide();
$("#searchlist .iScrollScrollUpIndicator").hide();
$("#searchlist .iScrollIndicator").hide();
}
}
viewController.activeView=a;
var d=viewController.activeView.index;
var e=$("#searchinput").parent();
var f=e.data("button");
if(f){
var g=$("#searchbutton"+f).parent();
g.show();
var h=g.width();
g.removeClass("animated");
g.css("width",e.width());
setTimeout(function(){
g.addClass("animated");
g.css("width",h)
},50)
}
e.data("button",d+1);
var i=$("#searchbutton"+(d+1)).parent();
e.removeClass("animated");
if(!b)
e.css("width",i.width());
setTimeout(function(){
if(!b)
e.addClass("animated");
e.css("width","");
setTimeout(function(){
e.find("input").focus();
},500)
uiController.toggleSearchButton(d+1);
},60)
$("#searchinput").val("");
if(viewController.activeView.inputText)
$(e).insertAfter(i).find("input").attr("placeholder",viewController.activeView.inputText);
i.hide();
if(viewController.activeView.usesSearchList){
$("#searchlayoutbutton").show();
$("#searchlist").show();
}
else{
$("#searchlayoutbutton").hide();
$("#searchlist").hide();
}
viewController.activeView.showView(c);
}
}

viewController.applySongList=function(b,c,d,e,f){
$(".specialplaylistbutton").removeClass("fadeincompletefaster");
$("#searchlist .iScrollIndicator").hide();
var g=viewController.activeView.isSongInList(playbackController.playingSong);
$("#searchlist .loadedsong").removeClass("loadedsong playing pausing stillloading");
$("#searchlist .oldloadedsong").removeClass("loadedsong");
for(var i=1;i<=d;i++){
var h=function(a){
setTimeout(function(){
if(viewController.activeView.currentSearchID==b){

viewController.activeView.displayLimit=c*a/d;
$scope.safeApply();
if((g&&$("#searchlist .loadedsong").length==0)||a==1)
playbackController.remarkSong();
if(a==1){
if(g)
playbackController.positionPlayIndicator();
playlistController.updateDeselectedSong();
$(".specialplaylistbutton").addClass("fadeincompletefaster");
}
if(a==d){
if(g)
playbackController.positionPlayIndicator();
searchController.makeSearchListDraggable();
setTimeout(function(){
uiController.searchListScroll.refresh();
$("#searchlistview li").removeClass("fadeincompletefast fadeincompletefaster");
},500)
setTimeout(function(){
uiController.searchListScroll.refresh();
},2000)
}else if(a%3==0){
uiController.searchListScroll.refresh();
if(g)
playbackController.positionPlayIndicator();
}
$("#searchlistview").listview('refresh');
}
},f*(a-1))
}
h(i)
}
}

;

;
var vimeoPlayer=function(){
};
vimeoPlayer.player=null;
vimeoPlayer.active=0;
vimeoPlayer.vimeo=0;
vimeoPlayer.vimeoVideoID="";
vimeoPlayer.bufferedTime=0;
vimeoPlayer.duration=0;
vimeoPlayer.currentTime=0;
vimeoPlayer.apiready=false;
vimeoPlayer.player=null;
vimeoPlayer.status=null;
vimeoPlayer.iframe=null;
window.dmAsyncInit=function()
{
}


vimeoPlayer.init=function(){
};

vimeoPlayer.setProgressPercentage=function(a){
videoController.setProgressPercentage(a)
}
vimeoPlayer.eventListener=function(){};
vimeoPlayer.eventListener.apiready=function(e)
{
if(vimeoPlayer.player){
if(e.target.src.search(vimeoPlayer.vimeoVideoID)>-1){
$(".mejs-time-buffering").hide();
$("#vimeoplayer").show();
$("#vimeoembedplayer").show();
vimeoPlayer.apiready=true;
vimeoPlayer.firstplay=true;
if(vimeoPlayer.startplay){
vimeoPlayer.play()
}
else if(vimeoPlayer.startpause){
videoController.playingSong();
vimeoPlayer.firstplay=false;
}
vimeoPlayer.startpause=false;
vimeoPlayer.startplay=false;
}
}
}
vimeoPlayer.eventListener.error=function(e)
{
if(vimeoPlayer.player){
vimeoPlayer.error();
}
}
vimeoPlayer.eventListener.play=function(e)
{
if(vimeoPlayer.player&&vimeoPlayer.firstplay){
videoController.playingSong();
vimeoPlayer.firstplay=false;
}
}
vimeoPlayer.eventListener.canplaythrough=function(e)
{

}
vimeoPlayer.eventListener.durationchange=function(e)
{
if(vimeoPlayer.player){
vimeoPlayer.duration=e.target.duration;
videoController.setMaxTime(vimeoPlayer.duration);
}
}
vimeoPlayer.eventListener.timeupdate=function(e)
{
if(vimeoPlayer.player){
vimeoPlayer.currentTime=e.target.currentTime;
videoController.setProgressTime(vimeoPlayer.currentTime);
}
}
vimeoPlayer.eventListener.progress=function(e)
{
if(vimeoPlayer.player){
if(e.target.src.search(vimeoPlayer.vimeoVideoID)>-1){
vimeoPlayer.bufferedTime=e.target.bufferedTime;
if(vimeoPlayer.duration>0){
videoController.setBufferedPercentage(vimeoPlayer.bufferedTime/vimeoPlayer.duration);
}
}
}
}
vimeoPlayer.eventListener.ended=function(e)
{
if(vimeoPlayer.player){
if(e.target.src.search(vimeoPlayer.vimeoVideoID)>-1){
vimeoPlayer.mediaEnded();
videoController.endedSong();
}
}
}

vimeoPlayer.loadInit=function(){
vimeoPlayer.iframe=$('#vimeoplayerframe')[0];
vimeoPlayer.player=$f(vimeoPlayer.iframe);
vimeoPlayer.status=$('.status');
vimeoPlayer.player.addEvent('ready',function(){
});
vimeoPlayer.player.api("play");
vimeoPlayer.apiready=true;
}
vimeoPlayer.load=function(d){
console.dir("VIMEO LOAD: "+d);
vimeoPlayer.active=1;
vimeoPlayer.bufferedTime=0;
vimeoPlayer.duration=0;
vimeoPlayer.currentTime=0;
vimeoPlayer.apiready=false;
$.ajax({
d:"http://vimeo.com/api/oembed.json?url="+escape(d),
success:function(a){
console.dir("VIMEO JSON")
console.dir(a)
var b=a.video_id;
if(b){
console.dir("VIMEO VideoID: "+b);
$("#vimeoplayer").remove();
$("#vimeoembedplayer").append('<div id="vimeoplayer" ><iframe id="vimeoplayerframe" src="//player.vimeo.com/video/'+b+'?portrait=0&autoplay=1&badge=0&hd=1&title=0&byline=0" width="110%" height="110%" frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe></div>');
$('#vimeoplayerframe').load(vimeoPlayer.loadInit);
$("#vimeoPlayer").hide();
$("#vimeoembedplayer").show();
$("#vimeoplayer").addClass("iframeVideo").appendTo("#backgroundVideo");
}
},
error:function(a,b,c){
}
})
};

vimeoPlayer.unload=function(){
vimeoPlayer.player.api("unload");
console.dir("UNLOAD! ");
vimeoPlayer.vimeoVideoID="null";
vimeoPlayer.stop();
vimeoPlayer.active=0;
$("#vimeoplayer").hide();
vimeoPlayer.apiready=false;
delete vimeoPlayer.player;
vimeoPlayer.player=null;
$("#vimeoplayer").remove();
$("#vimeoembedplayer").append('<div id="vimeoplayer" ></div>');
};
vimeoPlayer.setVolume=function(a){
if(vimeoPlayer.player&&vimeoPlayer.apiready){
vimeoPlayer.player.api("setVolume",a)
}
}
vimeoPlayer.play=function(){
if(vimeoPlayer.player){
if(vimeoPlayer.apiready){
vimeoPlayer.player.api("play");
}
else{
vimeoPlayer.startplay=true;
vimeoPlayer.startpause=false;
}
console.dir("PLAY: "+vimeoPlayer.vimeoVideoID);
}
}
vimeoPlayer.pause=function(){
if(vimeoPlayer.player){
if(vimeoPlayer.apiready)
vimeoPlayer.player.api("pause");
else{
vimeoPlayer.startplay=false;
vimeoPlayer.startpause=true;
}
console.dir("PAUSE: "+vimeoPlayer.vimeoVideoID);
}
}
vimeoPlayer.stop=function(){
if(vimeoPlayer.player&&vimeoPlayer.apiready){
vimeoPlayer.player.api("pause");
vimeoPlayer.player.api("setCurrentTime",0);
}
}
vimeoPlayer.setProgressPercentage=function(a){
if(vimeoPlayer.player&&vimeoPlayer.apiready){
vimeoPlayer.player.api("setCurrentTime",a*vimeoPlayer.duration);
}
}
vimeoPlayer.mediaEnded=function(){
videoController.endedSong();
mediaController.mediaEnded();
}
vimeoPlayer.error=function(){
if(vimeoPlayer.active==1){
}
}

;

;function pkcs1unpad2(d,n){
var b=d.toByteArray();
var i=0;
while(i<b.length&&b[i]==0)++i;
if(b.length-i!=n-1||b[i]!=2)
return null;
++i;
while(b[i]!=0)
if(++i>=b.length)return null;
var a="";
while(++i<b.length){
var c=b[i]&255;
if(c<128){a+=String.fromCharCode(c);
}
else if((c>191)&&(c<224)){
a+=String.fromCharCode(((c&31)<<6)|(b[i+1]&63));
++i;
}
else{
a+=String.fromCharCode(((c&15)<<12)|((b[i+1]&63)<<6)|(b[i+2]&63));
i+=2;
}
}
return a;
}
function RSASetPrivate(N,E,D){
if(N!=null&&E!=null&&N.length>0&&E.length>0){
this.n=parseBigInt(N,16);
this.e=parseInt(E,16);
this.d=parseBigInt(D,16);
}
else
alert("Invalid RSA private key");
}
function RSASetPrivateEx(N,E,D,P,Q,a,b,C){
if(N!=null&&E!=null&&N.length>0&&E.length>0){
this.n=parseBigInt(N,16);
this.e=parseInt(E,16);
this.d=parseBigInt(D,16);
this.p=parseBigInt(P,16);
this.q=parseBigInt(Q,16);
this.dmp1=parseBigInt(a,16);
this.dmq1=parseBigInt(b,16);
this.coeff=parseBigInt(C,16);
}
else
alert("Invalid RSA private key");
}
function RSAGenerate(B,E){
var a=new SecureRandom();
var b=B>>1;
this.e=parseInt(E,16);
var c=new BigInteger(E,16);
for(;;){
for(;;){
this.p=new BigInteger(B-b,1,a);
if(this.p.subtract(BigInteger.ONE).gcd(c).compareTo(BigInteger.ONE)==0&&this.p.isProbablePrime(10))break;
}
for(;;){
this.q=new BigInteger(b,1,a);
if(this.q.subtract(BigInteger.ONE).gcd(c).compareTo(BigInteger.ONE)==0&&this.q.isProbablePrime(10))break;
}
if(this.p.compareTo(this.q)<=0){
var t=this.p;
this.p=this.q;
this.q=t;
}
var d=this.p.subtract(BigInteger.ONE);
var e=this.q.subtract(BigInteger.ONE);
var f=d.multiply(e);
if(f.gcd(c).compareTo(BigInteger.ONE)==0){
this.n=this.p.multiply(this.q);
this.d=c.modInverse(f);
this.dmp1=this.d.mod(d);
this.dmq1=this.d.mod(e);
this.coeff=this.q.modInverse(this.p);
break;
}
}
}
function RSADoPrivate(x){
if(this.p==null||this.q==null)
return x.modPow(this.d,this.n);
var a=x.mod(this.p).modPow(this.dmp1,this.p);
var b=x.mod(this.q).modPow(this.dmq1,this.q);
while(a.compareTo(b)<0)
a=a.add(this.p);
return a.subtract(b).multiply(this.coeff).mod(this.p).multiply(this.q).add(b);
}
function RSADecrypt(a){
var c=parseBigInt(a,16);
var m=this.doPrivate(c);
if(m==null)return null;
return pkcs1unpad2(m,(this.n.bitLength()+7)>>3);
}
RSAKey.prototype.doPrivate=RSADoPrivate;
RSAKey.prototype.setPrivate=RSASetPrivate;
RSAKey.prototype.setPrivateEx=RSASetPrivateEx;
RSAKey.prototype.generate=RSAGenerate;
RSAKey.prototype.decrypt=RSADecrypt;
;

